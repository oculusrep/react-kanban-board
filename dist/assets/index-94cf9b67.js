var dw=Object.defineProperty;var fw=(e,t,r)=>t in e?dw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>(fw(e,typeof t!="symbol"?t+"":t,r),r);function hw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var r0={exports:{}},Wl={},n0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ci=Symbol.for("react.element"),mw=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),yw=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),bw=Symbol.for("react.context"),ww=Symbol.for("react.forward_ref"),_w=Symbol.for("react.suspense"),kw=Symbol.for("react.memo"),Sw=Symbol.for("react.lazy"),Xh=Symbol.iterator;function Nw(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var s0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o0=Object.assign,i0={};function Zs(e,t,r){this.props=e,this.context=t,this.refs=i0,this.updater=r||s0}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function a0(){}a0.prototype=Zs.prototype;function lf(e,t,r){this.props=e,this.context=t,this.refs=i0,this.updater=r||s0}var cf=lf.prototype=new a0;cf.constructor=lf;o0(cf,Zs.prototype);cf.isPureReactComponent=!0;var Zh=Array.isArray,l0=Object.prototype.hasOwnProperty,uf={current:null},c0={key:!0,ref:!0,__self:!0,__source:!0};function u0(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)l0.call(t,n)&&!c0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ci,type:e,key:o,ref:i,props:s,_owner:uf.current}}function jw(e,t){return{$$typeof:Ci,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function df(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ci}function Dw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ep=/\/+/g;function Ec(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dw(""+e.key):t.toString(36)}function Na(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ci:case mw:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Ec(i,0):n,Zh(s)?(r="",e!=null&&(r=e.replace(ep,"$&/")+"/"),Na(s,t,r,"",function(u){return u})):s!=null&&(df(s)&&(s=jw(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(ep,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Zh(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Ec(o,l);i+=Na(o,t,r,c,s)}else if(c=Nw(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Ec(o,l++),i+=Na(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Yi(e,t,r){if(e==null)return e;var n=[],s=0;return Na(e,n,"","",function(o){return t.call(r,o,s++)}),n}function Cw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},ja={transition:null},Ew={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:ja,ReactCurrentOwner:uf};function d0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Yi,forEach:function(e,t,r){Yi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yi(e,function(){t++}),t},toArray:function(e){return Yi(e,function(t){return t})||[]},only:function(e){if(!df(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=Zs;te.Fragment=gw;te.Profiler=yw;te.PureComponent=lf;te.StrictMode=vw;te.Suspense=_w;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew;te.act=d0;te.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=o0({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=uf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)l0.call(t,c)&&!c0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ci,type:e.type,key:s,ref:o,props:n,_owner:i}};te.createContext=function(e){return e={$$typeof:bw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xw,_context:e},e.Consumer=e};te.createElement=u0;te.createFactory=function(e){var t=u0.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:ww,render:e}};te.isValidElement=df;te.lazy=function(e){return{$$typeof:Sw,_payload:{_status:-1,_result:e},_init:Cw}};te.memo=function(e,t){return{$$typeof:kw,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=ja.transition;ja.transition={};try{e()}finally{ja.transition=t}};te.unstable_act=d0;te.useCallback=function(e,t){return lt.current.useCallback(e,t)};te.useContext=function(e){return lt.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};te.useEffect=function(e,t){return lt.current.useEffect(e,t)};te.useId=function(){return lt.current.useId()};te.useImperativeHandle=function(e,t,r){return lt.current.useImperativeHandle(e,t,r)};te.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return lt.current.useMemo(e,t)};te.useReducer=function(e,t,r){return lt.current.useReducer(e,t,r)};te.useRef=function(e){return lt.current.useRef(e)};te.useState=function(e){return lt.current.useState(e)};te.useSyncExternalStore=function(e,t,r){return lt.current.useSyncExternalStore(e,t,r)};te.useTransition=function(){return lt.current.useTransition()};te.version="18.3.1";n0.exports=te;var w=n0.exports;const P=t0(w),f0=hw({__proto__:null,default:P},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=w,Tw=Symbol.for("react.element"),Rw=Symbol.for("react.fragment"),Ow=Object.prototype.hasOwnProperty,Iw=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mw={key:!0,ref:!0,__self:!0,__source:!0};function h0(e,t,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Ow.call(t,n)&&!Mw.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Tw,type:e,key:o,ref:i,props:s,_owner:Iw.current}}Wl.Fragment=Rw;Wl.jsx=h0;Wl.jsxs=h0;r0.exports=Wl;var a=r0.exports,$u={},p0={exports:{}},Nt={},m0={exports:{}},g0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,T){var O=C.length;C.push(T);e:for(;0<O;){var F=O-1>>>1,G=C[F];if(0<s(G,T))C[F]=T,C[O]=G,O=F;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var T=C[0],O=C.pop();if(O!==T){C[0]=O;e:for(var F=0,G=C.length,ae=G>>>1;F<ae;){var _e=2*(F+1)-1,Dt=C[_e],Ke=_e+1,A=C[Ke];if(0>s(Dt,O))Ke<G&&0>s(A,Dt)?(C[F]=A,C[Ke]=O,F=Ke):(C[F]=Dt,C[_e]=O,F=_e);else if(Ke<G&&0>s(A,O))C[F]=A,C[Ke]=O,F=Ke;else break e}}return T}function s(C,T){var O=C.sortIndex-T.sortIndex;return O!==0?O:C.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(C){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=C)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function _(C){if(x=!1,g(C),!v)if(r(c)!==null)v=!0,I(k);else{var T=r(u);T!==null&&H(_,T.startTime-C)}}function k(C,T){v=!1,x&&(x=!1,y(D),D=-1),p=!0;var O=h;try{for(g(T),f=r(c);f!==null&&(!(f.expirationTime>T)||C&&!M());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var G=F(f.expirationTime<=T);T=e.unstable_now(),typeof G=="function"?f.callback=G:f===r(c)&&n(c),g(T)}else n(c);f=r(c)}if(f!==null)var ae=!0;else{var _e=r(u);_e!==null&&H(_,_e.startTime-T),ae=!1}return ae}finally{f=null,h=O,p=!1}}var S=!1,j=null,D=-1,N=5,E=-1;function M(){return!(e.unstable_now()-E<N)}function L(){if(j!==null){var C=e.unstable_now();E=C;var T=!0;try{T=j(!0,C)}finally{T?$():(S=!1,j=null)}}else S=!1}var $;if(typeof m=="function")$=function(){m(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,R=z.port2;z.port1.onmessage=L,$=function(){R.postMessage(null)}}else $=function(){b(L,0)};function I(C){j=C,S||(S=!0,$())}function H(C,T){D=b(function(){C(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,I(k))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var T=3;break;default:T=h}var O=h;h=T;try{return C()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,T){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var O=h;h=C;try{return T()}finally{h=O}},e.unstable_scheduleCallback=function(C,T,O){var F=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?F+O:F):O=F,C){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=O+G,C={id:d++,callback:T,priorityLevel:C,startTime:O,expirationTime:G,sortIndex:-1},O>F?(C.sortIndex=O,t(u,C),r(c)===null&&C===r(u)&&(x?(y(D),D=-1):x=!0,H(_,O-F))):(C.sortIndex=G,t(c,C),v||p||(v=!0,I(k))),C},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(C){var T=h;return function(){var O=h;h=T;try{return C.apply(this,arguments)}finally{h=O}}}})(g0);m0.exports=g0;var Lw=m0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=w,St=Lw;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,Zo={};function Xn(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(Zo[e]=t,e=0;e<t.length;e++)v0.add(t[e])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=Object.prototype.hasOwnProperty,Fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tp={},rp={};function $w(e){return Bu.call(rp,e)?!0:Bu.call(tp,e)?!1:Fw.test(e)?rp[e]=!0:(tp[e]=!0,!1)}function Bw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Uw(e,t,r,n){if(t===null||typeof t>"u"||Bw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var ff=/[\-:]([a-z])/g;function hf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ff,hf);Ge[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ff,hf);Ge[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ff,hf);Ge[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function pf(e,t,r,n){var s=Ge.hasOwnProperty(t)?Ge[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Uw(t,r,s,n)&&(r=null),n||s===null?$w(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=Aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vi=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),mf=Symbol.for("react.strict_mode"),Uu=Symbol.for("react.profiler"),y0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),gf=Symbol.for("react.forward_ref"),Wu=Symbol.for("react.suspense"),Hu=Symbol.for("react.suspense_list"),vf=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),b0=Symbol.for("react.offscreen"),np=Symbol.iterator;function po(e){return e===null||typeof e!="object"?null:(e=np&&e[np]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,Pc;function Oo(e){if(Pc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pc=t&&t[1]||""}return`
`+Pc+e}var Tc=!1;function Rc(e,t){if(!e||Tc)return"";Tc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Tc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Oo(e):""}function Ww(e){switch(e.tag){case 5:return Oo(e.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 2:case 15:return e=Rc(e.type,!1),e;case 11:return e=Rc(e.type.render,!1),e;case 1:return e=Rc(e.type,!0),e;default:return""}}function zu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ms:return"Fragment";case ps:return"Portal";case Uu:return"Profiler";case mf:return"StrictMode";case Wu:return"Suspense";case Hu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case x0:return(e.displayName||"Context")+".Consumer";case y0:return(e._context.displayName||"Context")+".Provider";case gf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vf:return t=e.displayName||null,t!==null?t:zu(e.type)||"Memo";case Yr:t=e._payload,e=e._init;try{return zu(e(t))}catch{}}return null}function Hw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zu(t);case 8:return t===mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function w0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zw(e){var t=w0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qi(e){e._valueTracker||(e._valueTracker=zw(e))}function _0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=w0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yu(e,t){var r=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=hn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k0(e,t){t=t.checked,t!=null&&pf(e,"checked",t,!1)}function Vu(e,t){k0(e,t);var r=hn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qu(e,t.type,r):t.hasOwnProperty("defaultValue")&&qu(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function op(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function qu(e,t,r){(t!=="number"||Va(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Io=Array.isArray;function Ds(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+hn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Gu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ip(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(Io(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:hn(r)}}function S0(e,t){var r=hn(t.value),n=hn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ap(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function N0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ku(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?N0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gi,j0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gi=Gi||document.createElement("div"),Gi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ei(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yw=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(e){Yw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bo[t]=Bo[e]})});function D0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bo.hasOwnProperty(e)&&Bo[e]?(""+t).trim():t+"px"}function C0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=D0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Vw=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qu(e,t){if(t){if(Vw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function Ju(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=null;function yf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zu=null,Cs=null,Es=null;function lp(e){if(e=Ti(e)){if(typeof Zu!="function")throw Error(B(280));var t=e.stateNode;t&&(t=ql(t),Zu(e.stateNode,e.type,t))}}function E0(e){Cs?Es?Es.push(e):Es=[e]:Cs=e}function P0(){if(Cs){var e=Cs,t=Es;if(Es=Cs=null,lp(e),t)for(e=0;e<t.length;e++)lp(t[e])}}function T0(e,t){return e(t)}function R0(){}var Oc=!1;function O0(e,t,r){if(Oc)return e(t,r);Oc=!0;try{return T0(e,t,r)}finally{Oc=!1,(Cs!==null||Es!==null)&&(R0(),P0())}}function ti(e,t){var r=e.stateNode;if(r===null)return null;var n=ql(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var ed=!1;if(Rr)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){ed=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{ed=!1}function qw(e,t,r,n,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Uo=!1,qa=null,Ga=!1,td=null,Gw={onError:function(e){Uo=!0,qa=e}};function Kw(e,t,r,n,s,o,i,l,c){Uo=!1,qa=null,qw.apply(Gw,arguments)}function Qw(e,t,r,n,s,o,i,l,c){if(Kw.apply(this,arguments),Uo){if(Uo){var u=qa;Uo=!1,qa=null}else throw Error(B(198));Ga||(Ga=!0,td=u)}}function Zn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function I0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cp(e){if(Zn(e)!==e)throw Error(B(188))}function Jw(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return cp(s),e;if(o===n)return cp(s),t;o=o.sibling}throw Error(B(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function M0(e){return e=Jw(e),e!==null?L0(e):null}function L0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=L0(e);if(t!==null)return t;e=e.sibling}return null}var A0=St.unstable_scheduleCallback,up=St.unstable_cancelCallback,Xw=St.unstable_shouldYield,Zw=St.unstable_requestPaint,Pe=St.unstable_now,e_=St.unstable_getCurrentPriorityLevel,xf=St.unstable_ImmediatePriority,F0=St.unstable_UserBlockingPriority,Ka=St.unstable_NormalPriority,t_=St.unstable_LowPriority,$0=St.unstable_IdlePriority,Hl=null,dr=null;function r_(e){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Hl,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:o_,n_=Math.log,s_=Math.LN2;function o_(e){return e>>>=0,e===0?32:31-(n_(e)/s_|0)|0}var Ki=64,Qi=4194304;function Mo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Mo(l):(o&=i,o!==0&&(n=Mo(o)))}else i=r&~s,i!==0?n=Mo(i):o!==0&&(n=Mo(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kt(t),s=1<<r,n|=e[r],t&=~s;return n}function i_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a_(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Kt(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=i_(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function rd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function B0(){var e=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),e}function Ic(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ei(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function l_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Kt(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function bf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var he=0;function U0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var W0,wf,H0,z0,Y0,nd=!1,Ji=[],en=null,tn=null,rn=null,ri=new Map,ni=new Map,qr=[],c_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dp(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(t.pointerId)}}function go(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ti(t),t!==null&&wf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function u_(e,t,r,n,s){switch(t){case"focusin":return en=go(en,e,t,r,n,s),!0;case"dragenter":return tn=go(tn,e,t,r,n,s),!0;case"mouseover":return rn=go(rn,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return ri.set(o,go(ri.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,ni.set(o,go(ni.get(o)||null,e,t,r,n,s)),!0}return!1}function V0(e){var t=Rn(e.target);if(t!==null){var r=Zn(t);if(r!==null){if(t=r.tag,t===13){if(t=I0(r),t!==null){e.blockedOn=t,Y0(e.priority,function(){H0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xu=n,r.target.dispatchEvent(n),Xu=null}else return t=Ti(r),t!==null&&wf(t),e.blockedOn=r,!1;t.shift()}return!0}function fp(e,t,r){Da(e)&&r.delete(t)}function d_(){nd=!1,en!==null&&Da(en)&&(en=null),tn!==null&&Da(tn)&&(tn=null),rn!==null&&Da(rn)&&(rn=null),ri.forEach(fp),ni.forEach(fp)}function vo(e,t){e.blockedOn===t&&(e.blockedOn=null,nd||(nd=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,d_)))}function si(e){function t(s){return vo(s,e)}if(0<Ji.length){vo(Ji[0],e);for(var r=1;r<Ji.length;r++){var n=Ji[r];n.blockedOn===e&&(n.blockedOn=null)}}for(en!==null&&vo(en,e),tn!==null&&vo(tn,e),rn!==null&&vo(rn,e),ri.forEach(t),ni.forEach(t),r=0;r<qr.length;r++)n=qr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<qr.length&&(r=qr[0],r.blockedOn===null);)V0(r),r.blockedOn===null&&qr.shift()}var Ps=Fr.ReactCurrentBatchConfig,Ja=!0;function f_(e,t,r,n){var s=he,o=Ps.transition;Ps.transition=null;try{he=1,_f(e,t,r,n)}finally{he=s,Ps.transition=o}}function h_(e,t,r,n){var s=he,o=Ps.transition;Ps.transition=null;try{he=4,_f(e,t,r,n)}finally{he=s,Ps.transition=o}}function _f(e,t,r,n){if(Ja){var s=sd(e,t,r,n);if(s===null)zc(e,t,n,Xa,r),dp(e,n);else if(u_(s,e,t,r,n))n.stopPropagation();else if(dp(e,n),t&4&&-1<c_.indexOf(e)){for(;s!==null;){var o=Ti(s);if(o!==null&&W0(o),o=sd(e,t,r,n),o===null&&zc(e,t,n,Xa,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else zc(e,t,n,null,r)}}var Xa=null;function sd(e,t,r,n){if(Xa=null,e=yf(n),e=Rn(e),e!==null)if(t=Zn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=I0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xa=e,null}function q0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e_()){case xf:return 1;case F0:return 4;case Ka:case t_:return 16;case $0:return 536870912;default:return 16}default:return 16}}var Jr=null,kf=null,Ca=null;function G0(){if(Ca)return Ca;var e,t=kf,r=t.length,n,s="value"in Jr?Jr.value:Jr.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return Ca=s.slice(e,1<n?1-n:void 0)}function Ea(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xi(){return!0}function hp(){return!1}function jt(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xi:hp,this.isPropagationStopped=hp,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sf=jt(eo),Pi=je({},eo,{view:0,detail:0}),p_=jt(Pi),Mc,Lc,yo,zl=je({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yo&&(yo&&e.type==="mousemove"?(Mc=e.screenX-yo.screenX,Lc=e.screenY-yo.screenY):Lc=Mc=0,yo=e),Mc)},movementY:function(e){return"movementY"in e?e.movementY:Lc}}),pp=jt(zl),m_=je({},zl,{dataTransfer:0}),g_=jt(m_),v_=je({},Pi,{relatedTarget:0}),Ac=jt(v_),y_=je({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),x_=jt(y_),b_=je({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w_=jt(b_),__=je({},eo,{data:0}),mp=jt(__),k_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N_[e])?!!t[e]:!1}function Nf(){return j_}var D_=je({},Pi,{key:function(e){if(e.key){var t=k_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ea(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nf,charCode:function(e){return e.type==="keypress"?Ea(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ea(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C_=jt(D_),E_=je({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=jt(E_),P_=je({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nf}),T_=jt(P_),R_=je({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),O_=jt(R_),I_=je({},zl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M_=jt(I_),L_=[9,13,27,32],jf=Rr&&"CompositionEvent"in window,Wo=null;Rr&&"documentMode"in document&&(Wo=document.documentMode);var A_=Rr&&"TextEvent"in window&&!Wo,K0=Rr&&(!jf||Wo&&8<Wo&&11>=Wo),vp=String.fromCharCode(32),yp=!1;function Q0(e,t){switch(e){case"keyup":return L_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function F_(e,t){switch(e){case"compositionend":return J0(t);case"keypress":return t.which!==32?null:(yp=!0,vp);case"textInput":return e=t.data,e===vp&&yp?null:e;default:return null}}function $_(e,t){if(gs)return e==="compositionend"||!jf&&Q0(e,t)?(e=G0(),Ca=kf=Jr=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return K0&&t.locale!=="ko"?null:t.data;default:return null}}var B_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B_[e.type]:t==="textarea"}function X0(e,t,r,n){E0(n),t=Za(t,"onChange"),0<t.length&&(r=new Sf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ho=null,oi=null;function U_(e){cv(e,0)}function Yl(e){var t=xs(e);if(_0(t))return e}function W_(e,t){if(e==="change")return t}var Z0=!1;if(Rr){var Fc;if(Rr){var $c="oninput"in document;if(!$c){var bp=document.createElement("div");bp.setAttribute("oninput","return;"),$c=typeof bp.oninput=="function"}Fc=$c}else Fc=!1;Z0=Fc&&(!document.documentMode||9<document.documentMode)}function wp(){Ho&&(Ho.detachEvent("onpropertychange",ev),oi=Ho=null)}function ev(e){if(e.propertyName==="value"&&Yl(oi)){var t=[];X0(t,oi,e,yf(e)),O0(U_,t)}}function H_(e,t,r){e==="focusin"?(wp(),Ho=t,oi=r,Ho.attachEvent("onpropertychange",ev)):e==="focusout"&&wp()}function z_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yl(oi)}function Y_(e,t){if(e==="click")return Yl(t)}function V_(e,t){if(e==="input"||e==="change")return Yl(t)}function q_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:q_;function ii(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Bu.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function _p(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kp(e,t){var r=_p(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_p(r)}}function tv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rv(){for(var e=window,t=Va();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Va(e.document)}return t}function Df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function G_(e){var t=rv(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tv(r.ownerDocument.documentElement,r)){if(n!==null&&Df(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=kp(r,o);var i=kp(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K_=Rr&&"documentMode"in document&&11>=document.documentMode,vs=null,od=null,zo=null,id=!1;function Sp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;id||vs==null||vs!==Va(n)||(n=vs,"selectionStart"in n&&Df(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zo&&ii(zo,n)||(zo=n,n=Za(od,"onSelect"),0<n.length&&(t=new Sf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vs)))}function Zi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ys={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionend:Zi("Transition","TransitionEnd")},Bc={},nv={};Rr&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Vl(e){if(Bc[e])return Bc[e];if(!ys[e])return e;var t=ys[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nv)return Bc[e]=t[r];return e}var sv=Vl("animationend"),ov=Vl("animationiteration"),iv=Vl("animationstart"),av=Vl("transitionend"),lv=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){lv.set(e,t),Xn(t,[e])}for(var Uc=0;Uc<Np.length;Uc++){var Wc=Np[Uc],Q_=Wc.toLowerCase(),J_=Wc[0].toUpperCase()+Wc.slice(1);yn(Q_,"on"+J_)}yn(sv,"onAnimationEnd");yn(ov,"onAnimationIteration");yn(iv,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(av,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function jp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Qw(n,t,void 0,e),e.currentTarget=null}function cv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;jp(s,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;jp(s,l,u),o=c}}}if(Ga)throw e=td,Ga=!1,td=null,e}function ve(e,t){var r=t[dd];r===void 0&&(r=t[dd]=new Set);var n=e+"__bubble";r.has(n)||(uv(t,e,2,!1),r.add(n))}function Hc(e,t,r){var n=0;t&&(n|=4),uv(r,e,n,t)}var ea="_reactListening"+Math.random().toString(36).slice(2);function ai(e){if(!e[ea]){e[ea]=!0,v0.forEach(function(r){r!=="selectionchange"&&(X_.has(r)||Hc(r,!1,e),Hc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ea]||(t[ea]=!0,Hc("selectionchange",!1,t))}}function uv(e,t,r,n){switch(q0(t)){case 1:var s=f_;break;case 4:s=h_;break;default:s=_f}r=s.bind(null,t,r,e),s=void 0,!ed||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zc(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Rn(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}O0(function(){var u=o,d=yf(r),f=[];e:{var h=lv.get(e);if(h!==void 0){var p=Sf,v=e;switch(e){case"keypress":if(Ea(r)===0)break e;case"keydown":case"keyup":p=C_;break;case"focusin":v="focus",p=Ac;break;case"focusout":v="blur",p=Ac;break;case"beforeblur":case"afterblur":p=Ac;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=g_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=T_;break;case sv:case ov:case iv:p=x_;break;case av:p=O_;break;case"scroll":p=p_;break;case"wheel":p=M_;break;case"copy":case"cut":case"paste":p=w_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gp}var x=(t&4)!==0,b=!x&&e==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,g;m!==null;){g=m;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,y!==null&&(_=ti(m,y),_!=null&&x.push(li(m,_,g)))),b)break;m=m.return}0<x.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Xu&&(v=r.relatedTarget||r.fromElement)&&(Rn(v)||v[Or]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Rn(v):null,v!==null&&(b=Zn(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(x=pp,_="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=gp,_="onPointerLeave",y="onPointerEnter",m="pointer"),b=p==null?h:xs(p),g=v==null?h:xs(v),h=new x(_,m+"leave",p,r,d),h.target=b,h.relatedTarget=g,_=null,Rn(d)===u&&(x=new x(y,m+"enter",v,r,d),x.target=g,x.relatedTarget=b,_=x),b=_,p&&v)t:{for(x=p,y=v,m=0,g=x;g;g=ns(g))m++;for(g=0,_=y;_;_=ns(_))g++;for(;0<m-g;)x=ns(x),m--;for(;0<g-m;)y=ns(y),g--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=ns(x),y=ns(y)}x=null}else x=null;p!==null&&Dp(f,h,p,x,!1),v!==null&&b!==null&&Dp(f,b,v,x,!0)}}e:{if(h=u?xs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=W_;else if(xp(h))if(Z0)k=V_;else{k=z_;var S=H_}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Y_);if(k&&(k=k(e,u))){X0(f,k,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&qu(h,"number",h.value)}switch(S=u?xs(u):window,e){case"focusin":(xp(S)||S.contentEditable==="true")&&(vs=S,od=u,zo=null);break;case"focusout":zo=od=vs=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Sp(f,r,d);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":Sp(f,r,d)}var j;if(jf)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else gs?Q0(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(K0&&r.locale!=="ko"&&(gs||D!=="onCompositionStart"?D==="onCompositionEnd"&&gs&&(j=G0()):(Jr=d,kf="value"in Jr?Jr.value:Jr.textContent,gs=!0)),S=Za(u,D),0<S.length&&(D=new mp(D,e,null,r,d),f.push({event:D,listeners:S}),j?D.data=j:(j=J0(r),j!==null&&(D.data=j)))),(j=A_?F_(e,r):$_(e,r))&&(u=Za(u,"onBeforeInput"),0<u.length&&(d=new mp("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}cv(f,t)})}function li(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Za(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ti(e,r),o!=null&&n.unshift(li(e,o,s)),o=ti(e,t),o!=null&&n.push(li(e,o,s))),e=e.return}return n}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dp(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ti(r,o),c!=null&&i.unshift(li(r,c,l))):s||(c=ti(r,o),c!=null&&i.push(li(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Z_=/\r\n?/g,e1=/\u0000|\uFFFD/g;function Cp(e){return(typeof e=="string"?e:""+e).replace(Z_,`
`).replace(e1,"")}function ta(e,t,r){if(t=Cp(t),Cp(e)!==t&&r)throw Error(B(425))}function el(){}var ad=null,ld=null;function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,t1=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,r1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(e){return Ep.resolve(null).then(e).catch(n1)}:ud;function n1(e){setTimeout(function(){throw e})}function Yc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),si(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);si(t)}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var to=Math.random().toString(36).slice(2),ar="__reactFiber$"+to,ci="__reactProps$"+to,Or="__reactContainer$"+to,dd="__reactEvents$"+to,s1="__reactListeners$"+to,o1="__reactHandles$"+to;function Rn(e){var t=e[ar];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Or]||r[ar]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Pp(e);e!==null;){if(r=e[ar])return r;e=Pp(e)}return t}e=r,r=e.parentNode}return null}function Ti(e){return e=e[ar]||e[Or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function ql(e){return e[ci]||null}var fd=[],bs=-1;function xn(e){return{current:e}}function ye(e){0>bs||(e.current=fd[bs],fd[bs]=null,bs--)}function ge(e,t){bs++,fd[bs]=e.current,e.current=t}var pn={},tt=xn(pn),pt=xn(!1),Hn=pn;function Ls(e,t){var r=e.type.contextTypes;if(!r)return pn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function tl(){ye(pt),ye(tt)}function Tp(e,t,r){if(tt.current!==pn)throw Error(B(168));ge(tt,t),ge(pt,r)}function dv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(B(108,Hw(e)||"Unknown",s));return je({},r,n)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,Hn=tt.current,ge(tt,e),ge(pt,pt.current),!0}function Rp(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=dv(e,t,Hn),n.__reactInternalMemoizedMergedChildContext=e,ye(pt),ye(tt),ge(tt,e)):ye(pt),ge(pt,r)}var wr=null,Gl=!1,Vc=!1;function fv(e){wr===null?wr=[e]:wr.push(e)}function i1(e){Gl=!0,fv(e)}function bn(){if(!Vc&&wr!==null){Vc=!0;var e=0,t=he;try{var r=wr;for(he=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wr=null,Gl=!1}catch(s){throw wr!==null&&(wr=wr.slice(e+1)),A0(xf,bn),s}finally{he=t,Vc=!1}}return null}var ws=[],_s=0,nl=null,sl=0,Tt=[],Rt=0,zn=null,kr=1,Sr="";function jn(e,t){ws[_s++]=sl,ws[_s++]=nl,nl=e,sl=t}function hv(e,t,r){Tt[Rt++]=kr,Tt[Rt++]=Sr,Tt[Rt++]=zn,zn=e;var n=kr;e=Sr;var s=32-Kt(n)-1;n&=~(1<<s),r+=1;var o=32-Kt(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,kr=1<<32-Kt(t)+s|r<<s|n,Sr=o+e}else kr=1<<o|r<<s|n,Sr=e}function Cf(e){e.return!==null&&(jn(e,1),hv(e,1,0))}function Ef(e){for(;e===nl;)nl=ws[--_s],ws[_s]=null,sl=ws[--_s],ws[_s]=null;for(;e===zn;)zn=Tt[--Rt],Tt[Rt]=null,Sr=Tt[--Rt],Tt[Rt]=null,kr=Tt[--Rt],Tt[Rt]=null}var bt=null,yt=null,xe=!1,qt=null;function pv(e,t){var r=It(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Op(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,yt=nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zn!==null?{id:kr,overflow:Sr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=It(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,yt=null,!0):!1;default:return!1}}function hd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pd(e){if(xe){var t=yt;if(t){var r=t;if(!Op(e,t)){if(hd(e))throw Error(B(418));t=nn(r.nextSibling);var n=bt;t&&Op(e,t)?pv(n,r):(e.flags=e.flags&-4097|2,xe=!1,bt=e)}}else{if(hd(e))throw Error(B(418));e.flags=e.flags&-4097|2,xe=!1,bt=e}}}function Ip(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function ra(e){if(e!==bt)return!1;if(!xe)return Ip(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cd(e.type,e.memoizedProps)),t&&(t=yt)){if(hd(e))throw mv(),Error(B(418));for(;t;)pv(e,t),t=nn(t.nextSibling)}if(Ip(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yt=nn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=bt?nn(e.stateNode.nextSibling):null;return!0}function mv(){for(var e=yt;e;)e=nn(e.nextSibling)}function As(){yt=bt=null,xe=!1}function Pf(e){qt===null?qt=[e]:qt.push(e)}var a1=Fr.ReactCurrentBatchConfig;function xo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function na(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mp(e){var t=e._init;return t(e._payload)}function gv(e){function t(y,m){if(e){var g=y.deletions;g===null?(y.deletions=[m],y.flags|=16):g.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=ln(y,m),y.index=0,y.sibling=null,y}function o(y,m,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags|=2,m):g):(y.flags|=2,m)):(y.flags|=1048576,m)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,g,_){return m===null||m.tag!==6?(m=Zc(g,y.mode,_),m.return=y,m):(m=s(m,g),m.return=y,m)}function c(y,m,g,_){var k=g.type;return k===ms?d(y,m,g.props.children,_,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yr&&Mp(k)===m.type)?(_=s(m,g.props),_.ref=xo(y,m,g),_.return=y,_):(_=La(g.type,g.key,g.props,null,y.mode,_),_.ref=xo(y,m,g),_.return=y,_)}function u(y,m,g,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=eu(g,y.mode,_),m.return=y,m):(m=s(m,g.children||[]),m.return=y,m)}function d(y,m,g,_,k){return m===null||m.tag!==7?(m=Fn(g,y.mode,_,k),m.return=y,m):(m=s(m,g),m.return=y,m)}function f(y,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Zc(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vi:return g=La(m.type,m.key,m.props,null,y.mode,g),g.ref=xo(y,null,m),g.return=y,g;case ps:return m=eu(m,y.mode,g),m.return=y,m;case Yr:var _=m._init;return f(y,_(m._payload),g)}if(Io(m)||po(m))return m=Fn(m,y.mode,g,null),m.return=y,m;na(y,m)}return null}function h(y,m,g,_){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(y,m,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vi:return g.key===k?c(y,m,g,_):null;case ps:return g.key===k?u(y,m,g,_):null;case Yr:return k=g._init,h(y,m,k(g._payload),_)}if(Io(g)||po(g))return k!==null?null:d(y,m,g,_,null);na(y,g)}return null}function p(y,m,g,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(g)||null,l(m,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vi:return y=y.get(_.key===null?g:_.key)||null,c(m,y,_,k);case ps:return y=y.get(_.key===null?g:_.key)||null,u(m,y,_,k);case Yr:var S=_._init;return p(y,m,g,S(_._payload),k)}if(Io(_)||po(_))return y=y.get(g)||null,d(m,y,_,k,null);na(m,_)}return null}function v(y,m,g,_){for(var k=null,S=null,j=m,D=m=0,N=null;j!==null&&D<g.length;D++){j.index>D?(N=j,j=null):N=j.sibling;var E=h(y,j,g[D],_);if(E===null){j===null&&(j=N);break}e&&j&&E.alternate===null&&t(y,j),m=o(E,m,D),S===null?k=E:S.sibling=E,S=E,j=N}if(D===g.length)return r(y,j),xe&&jn(y,D),k;if(j===null){for(;D<g.length;D++)j=f(y,g[D],_),j!==null&&(m=o(j,m,D),S===null?k=j:S.sibling=j,S=j);return xe&&jn(y,D),k}for(j=n(y,j);D<g.length;D++)N=p(j,y,D,g[D],_),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?D:N.key),m=o(N,m,D),S===null?k=N:S.sibling=N,S=N);return e&&j.forEach(function(M){return t(y,M)}),xe&&jn(y,D),k}function x(y,m,g,_){var k=po(g);if(typeof k!="function")throw Error(B(150));if(g=k.call(g),g==null)throw Error(B(151));for(var S=k=null,j=m,D=m=0,N=null,E=g.next();j!==null&&!E.done;D++,E=g.next()){j.index>D?(N=j,j=null):N=j.sibling;var M=h(y,j,E.value,_);if(M===null){j===null&&(j=N);break}e&&j&&M.alternate===null&&t(y,j),m=o(M,m,D),S===null?k=M:S.sibling=M,S=M,j=N}if(E.done)return r(y,j),xe&&jn(y,D),k;if(j===null){for(;!E.done;D++,E=g.next())E=f(y,E.value,_),E!==null&&(m=o(E,m,D),S===null?k=E:S.sibling=E,S=E);return xe&&jn(y,D),k}for(j=n(y,j);!E.done;D++,E=g.next())E=p(j,y,D,E.value,_),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?D:E.key),m=o(E,m,D),S===null?k=E:S.sibling=E,S=E);return e&&j.forEach(function(L){return t(y,L)}),xe&&jn(y,D),k}function b(y,m,g,_){if(typeof g=="object"&&g!==null&&g.type===ms&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Vi:e:{for(var k=g.key,S=m;S!==null;){if(S.key===k){if(k=g.type,k===ms){if(S.tag===7){r(y,S.sibling),m=s(S,g.props.children),m.return=y,y=m;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yr&&Mp(k)===S.type){r(y,S.sibling),m=s(S,g.props),m.ref=xo(y,S,g),m.return=y,y=m;break e}r(y,S);break}else t(y,S);S=S.sibling}g.type===ms?(m=Fn(g.props.children,y.mode,_,g.key),m.return=y,y=m):(_=La(g.type,g.key,g.props,null,y.mode,_),_.ref=xo(y,m,g),_.return=y,y=_)}return i(y);case ps:e:{for(S=g.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(y,m.sibling),m=s(m,g.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=eu(g,y.mode,_),m.return=y,y=m}return i(y);case Yr:return S=g._init,b(y,m,S(g._payload),_)}if(Io(g))return v(y,m,g,_);if(po(g))return x(y,m,g,_);na(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(y,m.sibling),m=s(m,g),m.return=y,y=m):(r(y,m),m=Zc(g,y.mode,_),m.return=y,y=m),i(y)):r(y,m)}return b}var Fs=gv(!0),vv=gv(!1),ol=xn(null),il=null,ks=null,Tf=null;function Rf(){Tf=ks=il=null}function Of(e){var t=ol.current;ye(ol),e._currentValue=t}function md(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){il=e,Tf=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Tf!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(il===null)throw Error(B(308));ks=e,il.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var On=null;function If(e){On===null?On=[e]:On.push(e)}function yv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,If(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ir(e,n)}function Ir(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vr=!1;function Mf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ir(e,r)}return s=n.interleaved,s===null?(t.next=t,If(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ir(e,r)}function Pa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bf(e,r)}}function Lp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function al(e,t,r,n){var s=e.updateQueue;Vr=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;i=0,d=u=c=null,l=o;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(h=t,p=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=je({},f,h);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,i|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Vn|=i,e.lanes=i,e.memoizedState=f}}function Ap(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(B(191,s));s.call(n)}}}var Ri={},fr=xn(Ri),ui=xn(Ri),di=xn(Ri);function In(e){if(e===Ri)throw Error(B(174));return e}function Lf(e,t){switch(ge(di,t),ge(ui,e),ge(fr,Ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ku(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ku(t,e)}ye(fr),ge(fr,t)}function $s(){ye(fr),ye(ui),ye(di)}function bv(e){In(di.current);var t=In(fr.current),r=Ku(t,e.type);t!==r&&(ge(ui,e),ge(fr,r))}function Af(e){ui.current===e&&(ye(fr),ye(ui))}var ke=xn(0);function ll(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qc=[];function Ff(){for(var e=0;e<qc.length;e++)qc[e]._workInProgressVersionPrimary=null;qc.length=0}var Ta=Fr.ReactCurrentDispatcher,Gc=Fr.ReactCurrentBatchConfig,Yn=0,Ne=null,Le=null,$e=null,cl=!1,Yo=!1,fi=0,l1=0;function Qe(){throw Error(B(321))}function $f(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function Bf(e,t,r,n,s,o){if(Yn=o,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ta.current=e===null||e.memoizedState===null?f1:h1,e=r(n,s),Yo){o=0;do{if(Yo=!1,fi=0,25<=o)throw Error(B(301));o+=1,$e=Le=null,t.updateQueue=null,Ta.current=p1,e=r(n,s)}while(Yo)}if(Ta.current=ul,t=Le!==null&&Le.next!==null,Yn=0,$e=Le=Ne=null,cl=!1,t)throw Error(B(300));return e}function Uf(){var e=fi!==0;return fi=0,e}function sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ne.memoizedState=$e=e:$e=$e.next=e,$e}function Bt(){if(Le===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?Ne.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw Error(B(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?Ne.memoizedState=$e=e:$e=$e.next=e}return $e}function hi(e,t){return typeof t=="function"?t(e):t}function Kc(e){var t=Bt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=Le,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((Yn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Ne.lanes|=d,Vn|=d}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,Xt(n,t.memoizedState)||(ht=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,Ne.lanes|=o,Vn|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qc(e){var t=Bt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Xt(o,t.memoizedState)||(ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function wv(){}function _v(e,t){var r=Ne,n=Bt(),s=t(),o=!Xt(n.memoizedState,s);if(o&&(n.memoizedState=s,ht=!0),n=n.queue,Wf(Nv.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,pi(9,Sv.bind(null,r,n,s,t),void 0,null),Be===null)throw Error(B(349));Yn&30||kv(r,t,s)}return s}function kv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sv(e,t,r,n){t.value=r,t.getSnapshot=n,jv(t)&&Dv(e)}function Nv(e,t,r){return r(function(){jv(t)&&Dv(e)})}function jv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function Dv(e){var t=Ir(e,1);t!==null&&Qt(t,e,1,-1)}function Fp(e){var t=sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t.queue=e,e=e.dispatch=d1.bind(null,Ne,e),[t.memoizedState,e]}function pi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Cv(){return Bt().memoizedState}function Ra(e,t,r,n){var s=sr();Ne.flags|=e,s.memoizedState=pi(1|t,r,void 0,n===void 0?null:n)}function Kl(e,t,r,n){var s=Bt();n=n===void 0?null:n;var o=void 0;if(Le!==null){var i=Le.memoizedState;if(o=i.destroy,n!==null&&$f(n,i.deps)){s.memoizedState=pi(t,r,o,n);return}}Ne.flags|=e,s.memoizedState=pi(1|t,r,o,n)}function $p(e,t){return Ra(8390656,8,e,t)}function Wf(e,t){return Kl(2048,8,e,t)}function Ev(e,t){return Kl(4,2,e,t)}function Pv(e,t){return Kl(4,4,e,t)}function Tv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rv(e,t,r){return r=r!=null?r.concat([e]):null,Kl(4,4,Tv.bind(null,t,e),r)}function Hf(){}function Ov(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$f(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Iv(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$f(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Mv(e,t,r){return Yn&21?(Xt(r,t)||(r=B0(),Ne.lanes|=r,Vn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=r)}function c1(e,t){var r=he;he=r!==0&&4>r?r:4,e(!0);var n=Gc.transition;Gc.transition={};try{e(!1),t()}finally{he=r,Gc.transition=n}}function Lv(){return Bt().memoizedState}function u1(e,t,r){var n=an(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Av(e))Fv(t,r);else if(r=yv(e,t,r,n),r!==null){var s=at();Qt(r,e,n,s),$v(r,t,n)}}function d1(e,t,r){var n=an(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Av(e))Fv(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,Xt(l,i)){var c=t.interleaved;c===null?(s.next=s,If(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=yv(e,t,s,n),r!==null&&(s=at(),Qt(r,e,n,s),$v(r,t,n))}}function Av(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function Fv(e,t){Yo=cl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $v(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bf(e,r)}}var ul={readContext:$t,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},f1={readContext:$t,useCallback:function(e,t){return sr().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:$p,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ra(4194308,4,Tv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var r=sr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=sr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=u1.bind(null,Ne,e),[n.memoizedState,e]},useRef:function(e){var t=sr();return e={current:e},t.memoizedState=e},useState:Fp,useDebugValue:Hf,useDeferredValue:function(e){return sr().memoizedState=e},useTransition:function(){var e=Fp(!1),t=e[0];return e=c1.bind(null,e[1]),sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ne,s=sr();if(xe){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),Be===null)throw Error(B(349));Yn&30||kv(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,$p(Nv.bind(null,n,o,e),[e]),n.flags|=2048,pi(9,Sv.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=sr(),t=Be.identifierPrefix;if(xe){var r=Sr,n=kr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=fi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=l1++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h1={readContext:$t,useCallback:Ov,useContext:$t,useEffect:Wf,useImperativeHandle:Rv,useInsertionEffect:Ev,useLayoutEffect:Pv,useMemo:Iv,useReducer:Kc,useRef:Cv,useState:function(){return Kc(hi)},useDebugValue:Hf,useDeferredValue:function(e){var t=Bt();return Mv(t,Le.memoizedState,e)},useTransition:function(){var e=Kc(hi)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:wv,useSyncExternalStore:_v,useId:Lv,unstable_isNewReconciler:!1},p1={readContext:$t,useCallback:Ov,useContext:$t,useEffect:Wf,useImperativeHandle:Rv,useInsertionEffect:Ev,useLayoutEffect:Pv,useMemo:Iv,useReducer:Qc,useRef:Cv,useState:function(){return Qc(hi)},useDebugValue:Hf,useDeferredValue:function(e){var t=Bt();return Le===null?t.memoizedState=e:Mv(t,Le.memoizedState,e)},useTransition:function(){var e=Qc(hi)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:wv,useSyncExternalStore:_v,useId:Lv,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gd(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:je({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ql={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=at(),s=an(e),o=Nr(n,s);o.payload=t,r!=null&&(o.callback=r),t=sn(e,o,s),t!==null&&(Qt(t,e,s,n),Pa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=at(),s=an(e),o=Nr(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=sn(e,o,s),t!==null&&(Qt(t,e,s,n),Pa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=at(),n=an(e),s=Nr(r,n);s.tag=2,t!=null&&(s.callback=t),t=sn(e,s,n),t!==null&&(Qt(t,e,n,r),Pa(t,e,n))}};function Bp(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!ii(r,n)||!ii(s,o):!0}function Bv(e,t,r){var n=!1,s=pn,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(s=mt(t)?Hn:tt.current,n=t.contextTypes,o=(n=n!=null)?Ls(e,s):pn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ql,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Up(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ql.enqueueReplaceState(t,t.state,null)}function vd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Mf(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=$t(o):(o=mt(t)?Hn:tt.current,s.context=Ls(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(gd(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ql.enqueueReplaceState(s,s.state,null),al(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Bs(e,t){try{var r="",n=t;do r+=Ww(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Jc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function yd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var m1=typeof WeakMap=="function"?WeakMap:Map;function Uv(e,t,r){r=Nr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){fl||(fl=!0,Cd=n),yd(e,t)},r}function Wv(e,t,r){r=Nr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){yd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){yd(e,t),typeof n!="function"&&(on===null?on=new Set([this]):on.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Wp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new m1;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=E1.bind(null,e,t,r),t.then(e,e))}function Hp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zp(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Nr(-1,1),t.tag=2,sn(r,t,1))),r.lanes|=1),e)}var g1=Fr.ReactCurrentOwner,ht=!1;function st(e,t,r,n){t.child=e===null?vv(t,null,r,n):Fs(t,e.child,r,n)}function Yp(e,t,r,n,s){r=r.render;var o=t.ref;return Ts(t,s),n=Bf(e,t,r,n,o,s),r=Uf(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mr(e,t,s)):(xe&&r&&Cf(t),t.flags|=1,st(e,t,n,s),t.child)}function Vp(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Jf(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Hv(e,t,o,n,s)):(e=La(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:ii,r(i,n)&&e.ref===t.ref)return Mr(e,t,s)}return t.flags|=1,e=ln(o,n),e.ref=t.ref,e.return=t,t.child=e}function Hv(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(ii(o,n)&&e.ref===t.ref)if(ht=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Mr(e,t,s)}return xd(e,t,r,n,s)}function zv(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Ns,vt),vt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(Ns,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ge(Ns,vt),vt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ge(Ns,vt),vt|=n;return st(e,t,s,r),t.child}function Yv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xd(e,t,r,n,s){var o=mt(r)?Hn:tt.current;return o=Ls(t,o),Ts(t,s),r=Bf(e,t,r,n,o,s),n=Uf(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mr(e,t,s)):(xe&&n&&Cf(t),t.flags|=1,st(e,t,r,s),t.child)}function qp(e,t,r,n,s){if(mt(r)){var o=!0;rl(t)}else o=!1;if(Ts(t,s),t.stateNode===null)Oa(e,t),Bv(t,r,n),vd(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=$t(u):(u=mt(r)?Hn:tt.current,u=Ls(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Up(t,i,n,u),Vr=!1;var h=t.memoizedState;i.state=h,al(t,n,i,s),c=t.memoizedState,l!==n||h!==c||pt.current||Vr?(typeof d=="function"&&(gd(t,r,d,n),c=t.memoizedState),(l=Vr||Bp(t,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,xv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:zt(t.type,l),i.props=u,f=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=mt(r)?Hn:tt.current,c=Ls(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Up(t,i,n,c),Vr=!1,h=t.memoizedState,i.state=h,al(t,n,i,s);var v=t.memoizedState;l!==f||h!==v||pt.current||Vr?(typeof p=="function"&&(gd(t,r,p,n),v=t.memoizedState),(u=Vr||Bp(t,r,u,n,h,v,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),i.props=n,i.state=v,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return bd(e,t,r,n,o,s)}function bd(e,t,r,n,s,o){Yv(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Rp(t,r,!1),Mr(e,t,o);n=t.stateNode,g1.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Fs(t,e.child,null,o),t.child=Fs(t,null,l,o)):st(e,t,l,o),t.memoizedState=n.state,s&&Rp(t,r,!0),t.child}function Vv(e){var t=e.stateNode;t.pendingContext?Tp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tp(e,t.context,!1),Lf(e,t.containerInfo)}function Gp(e,t,r,n,s){return As(),Pf(s),t.flags|=256,st(e,t,r,n),t.child}var wd={dehydrated:null,treeContext:null,retryLane:0};function _d(e){return{baseLanes:e,cachePool:null,transitions:null}}function qv(e,t,r){var n=t.pendingProps,s=ke.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ge(ke,s&1),e===null)return pd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Zl(i,n,0,null),e=Fn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=_d(r),t.memoizedState=wd,e):zf(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return v1(e,t,i,n,l,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ln(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ln(l,o):(o=Fn(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?_d(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=wd,n}return o=e.child,e=o.sibling,n=ln(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zf(e,t){return t=Zl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sa(e,t,r,n){return n!==null&&Pf(n),Fs(t,e.child,null,r),e=zf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function v1(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Jc(Error(B(422))),sa(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Zl({mode:"visible",children:n.children},s,0,null),o=Fn(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Fs(t,e.child,null,i),t.child.memoizedState=_d(i),t.memoizedState=wd,o);if(!(t.mode&1))return sa(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(B(419)),n=Jc(o,n,void 0),sa(e,t,i,n)}if(l=(i&e.childLanes)!==0,ht||l){if(n=Be,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ir(e,s),Qt(n,e,s,-1))}return Qf(),n=Jc(Error(B(421))),sa(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=P1.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,yt=nn(s.nextSibling),bt=t,xe=!0,qt=null,e!==null&&(Tt[Rt++]=kr,Tt[Rt++]=Sr,Tt[Rt++]=zn,kr=e.id,Sr=e.overflow,zn=t),t=zf(t,n.children),t.flags|=4096,t)}function Kp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),md(e.return,t,r)}function Xc(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Gv(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(st(e,t,n.children,r),n=ke.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kp(e,r,t);else if(e.tag===19)Kp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ge(ke,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ll(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Xc(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ll(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Xc(t,!0,r,null,o);break;case"together":Xc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=ln(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ln(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function y1(e,t,r){switch(t.tag){case 3:Vv(t),As();break;case 5:bv(t);break;case 1:mt(t.type)&&rl(t);break;case 4:Lf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ge(ol,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ge(ke,ke.current&1),t.flags|=128,null):r&t.child.childLanes?qv(e,t,r):(ge(ke,ke.current&1),e=Mr(e,t,r),e!==null?e.sibling:null);ge(ke,ke.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(ke,ke.current),n)break;return null;case 22:case 23:return t.lanes=0,zv(e,t,r)}return Mr(e,t,r)}var Kv,kd,Qv,Jv;Kv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kd=function(){};Qv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,In(fr.current);var o=null;switch(r){case"input":s=Yu(e,s),n=Yu(e,n),o=[];break;case"select":s=je({},s,{value:void 0}),n=je({},n,{value:void 0}),o=[];break;case"textarea":s=Gu(e,s),n=Gu(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=el)}Qu(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Jv=function(e,t,r,n){r!==n&&(t.flags|=4)};function bo(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function x1(e,t,r){var n=t.pendingProps;switch(Ef(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return mt(t.type)&&tl(),Je(t),null;case 3:return n=t.stateNode,$s(),ye(pt),ye(tt),Ff(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Td(qt),qt=null))),kd(e,t),Je(t),null;case 5:Af(t);var s=In(di.current);if(r=t.type,e!==null&&t.stateNode!=null)Qv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return Je(t),null}if(e=In(fr.current),ra(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ar]=t,n[ci]=o,e=(t.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(s=0;s<Lo.length;s++)ve(Lo[s],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":sp(n,o),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ve("invalid",n);break;case"textarea":ip(n,o),ve("invalid",n)}Qu(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&ta(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ta(n.textContent,l,e),s=["children",""+l]):Zo.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ve("scroll",n)}switch(r){case"input":qi(n),op(n,o,!0);break;case"textarea":qi(n),ap(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=el)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=N0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ar]=t,e[ci]=n,Kv(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ju(r,n),r){case"dialog":ve("cancel",e),ve("close",e),s=n;break;case"iframe":case"object":case"embed":ve("load",e),s=n;break;case"video":case"audio":for(s=0;s<Lo.length;s++)ve(Lo[s],e);s=n;break;case"source":ve("error",e),s=n;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=n;break;case"details":ve("toggle",e),s=n;break;case"input":sp(e,n),s=Yu(e,n),ve("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=je({},n,{value:void 0}),ve("invalid",e);break;case"textarea":ip(e,n),s=Gu(e,n),ve("invalid",e);break;default:s=n}Qu(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?C0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&j0(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ei(e,c):typeof c=="number"&&ei(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ve("scroll",e):c!=null&&pf(e,o,c,i))}switch(r){case"input":qi(e),op(e,n,!1);break;case"textarea":qi(e),ap(e);break;case"option":n.value!=null&&e.setAttribute("value",""+hn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Ds(e,!!n.multiple,o,!1):n.defaultValue!=null&&Ds(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=el)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Jv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=In(di.current),In(fr.current),ra(t)){if(n=t.stateNode,r=t.memoizedProps,n[ar]=t,(o=n.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:ta(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ta(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ar]=t,t.stateNode=n}return Je(t),null;case 13:if(ye(ke),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&yt!==null&&t.mode&1&&!(t.flags&128))mv(),As(),t.flags|=98560,o=!1;else if(o=ra(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[ar]=t}else As(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),o=!1}else qt!==null&&(Td(qt),qt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?Ae===0&&(Ae=3):Qf())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return $s(),kd(e,t),e===null&&ai(t.stateNode.containerInfo),Je(t),null;case 10:return Of(t.type._context),Je(t),null;case 17:return mt(t.type)&&tl(),Je(t),null;case 19:if(ye(ke),o=t.memoizedState,o===null)return Je(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)bo(o,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ll(e),i!==null){for(t.flags|=128,bo(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ge(ke,ke.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pe()>Us&&(t.flags|=128,n=!0,bo(o,!1),t.lanes=4194304)}else{if(!n)if(e=ll(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!xe)return Je(t),null}else 2*Pe()-o.renderingStartTime>Us&&r!==1073741824&&(t.flags|=128,n=!0,bo(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pe(),t.sibling=null,r=ke.current,ge(ke,n?r&1|2:r&1),t):(Je(t),null);case 22:case 23:return Kf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function b1(e,t){switch(Ef(t),t.tag){case 1:return mt(t.type)&&tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $s(),ye(pt),ye(tt),Ff(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Af(t),null;case 13:if(ye(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));As()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(ke),null;case 4:return $s(),null;case 10:return Of(t.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var oa=!1,Ze=!1,w1=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ss(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ce(e,t,n)}else r.current=null}function Sd(e,t,r){try{r()}catch(n){Ce(e,t,n)}}var Qp=!1;function _1(e,t){if(ad=Ja,e=rv(),Df(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==o||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=i),h===o&&++d===n&&(c=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ld={focusedElem:e,selectionRange:r},Ja=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:zt(t.type,x),b);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(_){Ce(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return v=Qp,Qp=!1,v}function Vo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Sd(t,r,o)}s=s.next}while(s!==n)}}function Jl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Nd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Xv(e){var t=e.alternate;t!==null&&(e.alternate=null,Xv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[ci],delete t[dd],delete t[s1],delete t[o1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zv(e){return e.tag===5||e.tag===3||e.tag===4}function Jp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=el));else if(n!==4&&(e=e.child,e!==null))for(jd(e,t,r),e=e.sibling;e!==null;)jd(e,t,r),e=e.sibling}function Dd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Dd(e,t,r),e=e.sibling;e!==null;)Dd(e,t,r),e=e.sibling}var ze=null,Yt=!1;function Ur(e,t,r){for(r=r.child;r!==null;)ey(e,t,r),r=r.sibling}function ey(e,t,r){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Hl,r)}catch{}switch(r.tag){case 5:Ze||Ss(r,t);case 6:var n=ze,s=Yt;ze=null,Ur(e,t,r),ze=n,Yt=s,ze!==null&&(Yt?(e=ze,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ze.removeChild(r.stateNode));break;case 18:ze!==null&&(Yt?(e=ze,r=r.stateNode,e.nodeType===8?Yc(e.parentNode,r):e.nodeType===1&&Yc(e,r),si(e)):Yc(ze,r.stateNode));break;case 4:n=ze,s=Yt,ze=r.stateNode.containerInfo,Yt=!0,Ur(e,t,r),ze=n,Yt=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Sd(r,t,i),s=s.next}while(s!==n)}Ur(e,t,r);break;case 1:if(!Ze&&(Ss(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ce(r,t,l)}Ur(e,t,r);break;case 21:Ur(e,t,r);break;case 22:r.mode&1?(Ze=(n=Ze)||r.memoizedState!==null,Ur(e,t,r),Ze=n):Ur(e,t,r);break;default:Ur(e,t,r)}}function Xp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new w1),t.forEach(function(n){var s=T1.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,Yt=!1;break e;case 3:ze=l.stateNode.containerInfo,Yt=!0;break e;case 4:ze=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(ze===null)throw Error(B(160));ey(o,i,s),ze=null,Yt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ty(t,e),t=t.sibling}function ty(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),nr(e),n&4){try{Vo(3,e,e.return),Jl(3,e)}catch(x){Ce(e,e.return,x)}try{Vo(5,e,e.return)}catch(x){Ce(e,e.return,x)}}break;case 1:Wt(t,e),nr(e),n&512&&r!==null&&Ss(r,r.return);break;case 5:if(Wt(t,e),nr(e),n&512&&r!==null&&Ss(r,r.return),e.flags&32){var s=e.stateNode;try{ei(s,"")}catch(x){Ce(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&k0(s,o),Ju(l,i);var u=Ju(l,o);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?C0(s,f):d==="dangerouslySetInnerHTML"?j0(s,f):d==="children"?ei(s,f):pf(s,d,f,u)}switch(l){case"input":Vu(s,o);break;case"textarea":S0(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ds(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ds(s,!!o.multiple,o.defaultValue,!0):Ds(s,!!o.multiple,o.multiple?[]:"",!1))}s[ci]=o}catch(x){Ce(e,e.return,x)}}break;case 6:if(Wt(t,e),nr(e),n&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(x){Ce(e,e.return,x)}}break;case 3:if(Wt(t,e),nr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(x){Ce(e,e.return,x)}break;case 4:Wt(t,e),nr(e);break;case 13:Wt(t,e),nr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(qf=Pe())),n&4&&Xp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(u=Ze)||d,Wt(t,e),Ze=u):Wt(t,e),nr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(f=q=d;q!==null;){switch(h=q,p=h.child,h.tag){case 0:case 11:case 14:case 15:Vo(4,h,h.return);break;case 1:Ss(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Ce(n,r,x)}}break;case 5:Ss(h,h.return);break;case 22:if(h.memoizedState!==null){em(f);continue}}p!==null?(p.return=h,q=p):em(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=D0("display",i))}catch(x){Ce(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Ce(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wt(t,e),nr(e),n&4&&Xp(e);break;case 21:break;default:Wt(t,e),nr(e)}}function nr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zv(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ei(s,""),n.flags&=-33);var o=Jp(e);Dd(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Jp(e);jd(e,l,i);break;default:throw Error(B(161))}}catch(c){Ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function k1(e,t,r){q=e,ry(e)}function ry(e,t,r){for(var n=(e.mode&1)!==0;q!==null;){var s=q,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||oa;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ze;l=oa;var u=Ze;if(oa=i,(Ze=c)&&!u)for(q=s;q!==null;)i=q,c=i.child,i.tag===22&&i.memoizedState!==null?tm(s):c!==null?(c.return=i,q=c):tm(s);for(;o!==null;)q=o,ry(o),o=o.sibling;q=s,oa=l,Ze=u}Zp(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,q=o):Zp(e)}}function Zp(e){for(;q!==null;){var t=q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Jl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ze)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:zt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ap(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ap(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&si(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ze||t.flags&512&&Nd(t)}catch(h){Ce(t,t.return,h)}}if(t===e){q=null;break}if(r=t.sibling,r!==null){r.return=t.return,q=r;break}q=t.return}}function em(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,q=r;break}q=t.return}}function tm(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jl(4,t)}catch(c){Ce(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ce(t,s,c)}}var o=t.return;try{Nd(t)}catch(c){Ce(t,o,c)}break;case 5:var i=t.return;try{Nd(t)}catch(c){Ce(t,i,c)}}}catch(c){Ce(t,t.return,c)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var S1=Math.ceil,dl=Fr.ReactCurrentDispatcher,Yf=Fr.ReactCurrentOwner,Lt=Fr.ReactCurrentBatchConfig,ie=0,Be=null,Oe=null,qe=0,vt=0,Ns=xn(0),Ae=0,mi=null,Vn=0,Xl=0,Vf=0,qo=null,dt=null,qf=0,Us=1/0,yr=null,fl=!1,Cd=null,on=null,ia=!1,Xr=null,hl=0,Go=0,Ed=null,Ia=-1,Ma=0;function at(){return ie&6?Pe():Ia!==-1?Ia:Ia=Pe()}function an(e){return e.mode&1?ie&2&&qe!==0?qe&-qe:a1.transition!==null?(Ma===0&&(Ma=B0()),Ma):(e=he,e!==0||(e=window.event,e=e===void 0?16:q0(e.type)),e):1}function Qt(e,t,r,n){if(50<Go)throw Go=0,Ed=null,Error(B(185));Ei(e,r,n),(!(ie&2)||e!==Be)&&(e===Be&&(!(ie&2)&&(Xl|=r),Ae===4&&Gr(e,qe)),gt(e,n),r===1&&ie===0&&!(t.mode&1)&&(Us=Pe()+500,Gl&&bn()))}function gt(e,t){var r=e.callbackNode;a_(e,t);var n=Qa(e,e===Be?qe:0);if(n===0)r!==null&&up(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&up(r),t===1)e.tag===0?i1(rm.bind(null,e)):fv(rm.bind(null,e)),r1(function(){!(ie&6)&&bn()}),r=null;else{switch(U0(n)){case 1:r=xf;break;case 4:r=F0;break;case 16:r=Ka;break;case 536870912:r=$0;break;default:r=Ka}r=uy(r,ny.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ny(e,t){if(Ia=-1,Ma=0,ie&6)throw Error(B(327));var r=e.callbackNode;if(Rs()&&e.callbackNode!==r)return null;var n=Qa(e,e===Be?qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=pl(e,n);else{t=n;var s=ie;ie|=2;var o=oy();(Be!==e||qe!==t)&&(yr=null,Us=Pe()+500,An(e,t));do try{D1();break}catch(l){sy(e,l)}while(1);Rf(),dl.current=o,ie=s,Oe!==null?t=0:(Be=null,qe=0,t=Ae)}if(t!==0){if(t===2&&(s=rd(e),s!==0&&(n=s,t=Pd(e,s))),t===1)throw r=mi,An(e,0),Gr(e,n),gt(e,Pe()),r;if(t===6)Gr(e,n);else{if(s=e.current.alternate,!(n&30)&&!N1(s)&&(t=pl(e,n),t===2&&(o=rd(e),o!==0&&(n=o,t=Pd(e,o))),t===1))throw r=mi,An(e,0),Gr(e,n),gt(e,Pe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:Dn(e,dt,yr);break;case 3:if(Gr(e,n),(n&130023424)===n&&(t=qf+500-Pe(),10<t)){if(Qa(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){at(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ud(Dn.bind(null,e,dt,yr),t);break}Dn(e,dt,yr);break;case 4:if(Gr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Kt(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=Pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*S1(n/1960))-n,10<n){e.timeoutHandle=ud(Dn.bind(null,e,dt,yr),n);break}Dn(e,dt,yr);break;case 5:Dn(e,dt,yr);break;default:throw Error(B(329))}}}return gt(e,Pe()),e.callbackNode===r?ny.bind(null,e):null}function Pd(e,t){var r=qo;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=pl(e,t),e!==2&&(t=dt,dt=r,t!==null&&Td(t)),e}function Td(e){dt===null?dt=e:dt.push.apply(dt,e)}function N1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Xt(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gr(e,t){for(t&=~Vf,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),n=1<<r;e[r]=-1,t&=~n}}function rm(e){if(ie&6)throw Error(B(327));Rs();var t=Qa(e,0);if(!(t&1))return gt(e,Pe()),null;var r=pl(e,t);if(e.tag!==0&&r===2){var n=rd(e);n!==0&&(t=n,r=Pd(e,n))}if(r===1)throw r=mi,An(e,0),Gr(e,t),gt(e,Pe()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dn(e,dt,yr),gt(e,Pe()),null}function Gf(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Us=Pe()+500,Gl&&bn())}}function qn(e){Xr!==null&&Xr.tag===0&&!(ie&6)&&Rs();var t=ie;ie|=1;var r=Lt.transition,n=he;try{if(Lt.transition=null,he=1,e)return e()}finally{he=n,Lt.transition=r,ie=t,!(ie&6)&&bn()}}function Kf(){vt=Ns.current,ye(Ns)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,t1(r)),Oe!==null)for(r=Oe.return;r!==null;){var n=r;switch(Ef(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&tl();break;case 3:$s(),ye(pt),ye(tt),Ff();break;case 5:Af(n);break;case 4:$s();break;case 13:ye(ke);break;case 19:ye(ke);break;case 10:Of(n.type._context);break;case 22:case 23:Kf()}r=r.return}if(Be=e,Oe=e=ln(e.current,null),qe=vt=t,Ae=0,mi=null,Vf=Xl=Vn=0,dt=qo=null,On!==null){for(t=0;t<On.length;t++)if(r=On[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}On=null}return e}function sy(e,t){do{var r=Oe;try{if(Rf(),Ta.current=ul,cl){for(var n=Ne.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}cl=!1}if(Yn=0,$e=Le=Ne=null,Yo=!1,fi=0,Yf.current=null,r===null||r.return===null){Ae=1,mi=t,Oe=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=qe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Hp(i);if(p!==null){p.flags&=-257,zp(p,i,l,o,t),p.mode&1&&Wp(o,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){Wp(o,u,t),Qf();break e}c=Error(B(426))}}else if(xe&&l.mode&1){var b=Hp(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zp(b,i,l,o,t),Pf(Bs(c,l));break e}}o=c=Bs(c,l),Ae!==4&&(Ae=2),qo===null?qo=[o]:qo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=Uv(o,c,t);Lp(o,y);break e;case 1:l=c;var m=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(on===null||!on.has(g)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Wv(o,l,t);Lp(o,_);break e}}o=o.return}while(o!==null)}ay(r)}catch(k){t=k,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(1)}function oy(){var e=dl.current;return dl.current=ul,e===null?ul:e}function Qf(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Be===null||!(Vn&268435455)&&!(Xl&268435455)||Gr(Be,qe)}function pl(e,t){var r=ie;ie|=2;var n=oy();(Be!==e||qe!==t)&&(yr=null,An(e,t));do try{j1();break}catch(s){sy(e,s)}while(1);if(Rf(),ie=r,dl.current=n,Oe!==null)throw Error(B(261));return Be=null,qe=0,Ae}function j1(){for(;Oe!==null;)iy(Oe)}function D1(){for(;Oe!==null&&!Xw();)iy(Oe)}function iy(e){var t=cy(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?ay(e):Oe=t,Yf.current=null}function ay(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=b1(r,t),r!==null){r.flags&=32767,Oe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Oe=null;return}}else if(r=x1(r,t,vt),r!==null){Oe=r;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);Ae===0&&(Ae=5)}function Dn(e,t,r){var n=he,s=Lt.transition;try{Lt.transition=null,he=1,C1(e,t,r,n)}finally{Lt.transition=s,he=n}return null}function C1(e,t,r,n){do Rs();while(Xr!==null);if(ie&6)throw Error(B(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(l_(e,o),e===Be&&(Oe=Be=null,qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ia||(ia=!0,uy(Ka,function(){return Rs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Lt.transition,Lt.transition=null;var i=he;he=1;var l=ie;ie|=4,Yf.current=null,_1(e,r),ty(r,e),G_(ld),Ja=!!ad,ld=ad=null,e.current=r,k1(r),Zw(),ie=l,he=i,Lt.transition=o}else e.current=r;if(ia&&(ia=!1,Xr=e,hl=s),o=e.pendingLanes,o===0&&(on=null),r_(r.stateNode),gt(e,Pe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fl)throw fl=!1,e=Cd,Cd=null,e;return hl&1&&e.tag!==0&&Rs(),o=e.pendingLanes,o&1?e===Ed?Go++:(Go=0,Ed=e):Go=0,bn(),null}function Rs(){if(Xr!==null){var e=U0(hl),t=Lt.transition,r=he;try{if(Lt.transition=null,he=16>e?16:e,Xr===null)var n=!1;else{if(e=Xr,Xr=null,hl=0,ie&6)throw Error(B(331));var s=ie;for(ie|=4,q=e.current;q!==null;){var o=q,i=o.child;if(q.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Vo(8,d,o)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var h=d.sibling,p=d.return;if(Xv(d),d===u){q=null;break}if(h!==null){h.return=p,q=h;break}q=p}}}var v=o.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}q=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,q=i;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Vo(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,q=y;break e}q=o.return}}var m=e.current;for(q=m;q!==null;){i=q;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,q=g;else e:for(i=m;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jl(9,l)}}catch(k){Ce(l,l.return,k)}if(l===i){q=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,q=_;break e}q=l.return}}if(ie=s,bn(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Hl,e)}catch{}n=!0}return n}finally{he=r,Lt.transition=t}}return!1}function nm(e,t,r){t=Bs(r,t),t=Uv(e,t,1),e=sn(e,t,1),t=at(),e!==null&&(Ei(e,1,t),gt(e,t))}function Ce(e,t,r){if(e.tag===3)nm(e,e,r);else for(;t!==null;){if(t.tag===3){nm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(on===null||!on.has(n))){e=Bs(r,e),e=Wv(t,e,1),t=sn(t,e,1),e=at(),t!==null&&(Ei(t,1,e),gt(t,e));break}}t=t.return}}function E1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(qe&r)===r&&(Ae===4||Ae===3&&(qe&130023424)===qe&&500>Pe()-qf?An(e,0):Vf|=r),gt(e,t)}function ly(e,t){t===0&&(e.mode&1?(t=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):t=1);var r=at();e=Ir(e,t),e!==null&&(Ei(e,t,r),gt(e,r))}function P1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ly(e,r)}function T1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),ly(e,r)}var cy;cy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ht=!1,y1(e,t,r);ht=!!(e.flags&131072)}else ht=!1,xe&&t.flags&1048576&&hv(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Oa(e,t),e=t.pendingProps;var s=Ls(t,tt.current);Ts(t,r),s=Bf(null,t,n,e,s,r);var o=Uf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(n)?(o=!0,rl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mf(t),s.updater=Ql,t.stateNode=s,s._reactInternals=t,vd(t,n,e,r),t=bd(null,t,n,!0,o,r)):(t.tag=0,xe&&o&&Cf(t),st(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Oa(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=O1(n),e=zt(n,e),s){case 0:t=xd(null,t,n,e,r);break e;case 1:t=qp(null,t,n,e,r);break e;case 11:t=Yp(null,t,n,e,r);break e;case 14:t=Vp(null,t,n,zt(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),xd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),qp(e,t,n,s,r);case 3:e:{if(Vv(t),e===null)throw Error(B(387));n=t.pendingProps,o=t.memoizedState,s=o.element,xv(e,t),al(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Bs(Error(B(423)),t),t=Gp(e,t,n,r,s);break e}else if(n!==s){s=Bs(Error(B(424)),t),t=Gp(e,t,n,r,s);break e}else for(yt=nn(t.stateNode.containerInfo.firstChild),bt=t,xe=!0,qt=null,r=vv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(As(),n===s){t=Mr(e,t,r);break e}st(e,t,n,r)}t=t.child}return t;case 5:return bv(t),e===null&&pd(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,cd(n,s)?i=null:o!==null&&cd(n,o)&&(t.flags|=32),Yv(e,t),st(e,t,i,r),t.child;case 6:return e===null&&pd(t),null;case 13:return qv(e,t,r);case 4:return Lf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fs(t,null,n,r):st(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),Yp(e,t,n,s,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,ge(ol,n._currentValue),n._currentValue=i,o!==null)if(Xt(o.value,i)){if(o.children===s.children&&!pt.current){t=Mr(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Nr(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),md(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(B(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),md(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}st(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ts(t,r),s=$t(s),n=n(s),t.flags|=1,st(e,t,n,r),t.child;case 14:return n=t.type,s=zt(n,t.pendingProps),s=zt(n.type,s),Vp(e,t,n,s,r);case 15:return Hv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),Oa(e,t),t.tag=1,mt(n)?(e=!0,rl(t)):e=!1,Ts(t,r),Bv(t,n,s),vd(t,n,s,r),bd(null,t,n,!0,e,r);case 19:return Gv(e,t,r);case 22:return zv(e,t,r)}throw Error(B(156,t.tag))};function uy(e,t){return A0(e,t)}function R1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,r,n){return new R1(e,t,r,n)}function Jf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O1(e){if(typeof e=="function")return Jf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gf)return 11;if(e===vf)return 14}return 2}function ln(e,t){var r=e.alternate;return r===null?(r=It(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function La(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")Jf(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ms:return Fn(r.children,s,o,t);case mf:i=8,s|=8;break;case Uu:return e=It(12,r,t,s|2),e.elementType=Uu,e.lanes=o,e;case Wu:return e=It(13,r,t,s),e.elementType=Wu,e.lanes=o,e;case Hu:return e=It(19,r,t,s),e.elementType=Hu,e.lanes=o,e;case b0:return Zl(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y0:i=10;break e;case x0:i=9;break e;case gf:i=11;break e;case vf:i=14;break e;case Yr:i=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=It(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function Fn(e,t,r,n){return e=It(7,e,n,t),e.lanes=r,e}function Zl(e,t,r,n){return e=It(22,e,n,t),e.elementType=b0,e.lanes=r,e.stateNode={isHidden:!1},e}function Zc(e,t,r){return e=It(6,e,null,t),e.lanes=r,e}function eu(e,t,r){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I1(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ic(0),this.expirationTimes=Ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ic(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xf(e,t,r,n,s,o,i,l,c){return e=new I1(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=It(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mf(o),e}function M1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function dy(e){if(!e)return pn;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(mt(r))return dv(e,r,t)}return t}function fy(e,t,r,n,s,o,i,l,c){return e=Xf(r,n,!0,e,s,o,i,l,c),e.context=dy(null),r=e.current,n=at(),s=an(r),o=Nr(n,s),o.callback=t??null,sn(r,o,s),e.current.lanes=s,Ei(e,s,n),gt(e,n),e}function ec(e,t,r,n){var s=t.current,o=at(),i=an(s);return r=dy(r),t.context===null?t.context=r:t.pendingContext=r,t=Nr(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=sn(s,t,i),e!==null&&(Qt(e,s,i,o),Pa(e,s,i)),i}function ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zf(e,t){sm(e,t),(e=e.alternate)&&sm(e,t)}function L1(){return null}var hy=typeof reportError=="function"?reportError:function(e){console.error(e)};function eh(e){this._internalRoot=e}tc.prototype.render=eh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));ec(e,t,null,null)};tc.prototype.unmount=eh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){ec(null,e,null,null)}),t[Or]=null}};function tc(e){this._internalRoot=e}tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=z0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qr.length&&t!==0&&t<qr[r].priority;r++);qr.splice(r,0,e),r===0&&V0(e)}};function th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function om(){}function A1(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=ml(i);o.call(u)}}var i=fy(t,n,e,0,null,!1,!1,"",om);return e._reactRootContainer=i,e[Or]=i.current,ai(e.nodeType===8?e.parentNode:e),qn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=ml(c);l.call(u)}}var c=Xf(e,0,!1,null,null,!1,!1,"",om);return e._reactRootContainer=c,e[Or]=c.current,ai(e.nodeType===8?e.parentNode:e),qn(function(){ec(t,c,r,n)}),c}function nc(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=ml(i);l.call(c)}}ec(t,i,e,s)}else i=A1(r,t,e,s,n);return ml(i)}W0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Mo(t.pendingLanes);r!==0&&(bf(t,r|1),gt(t,Pe()),!(ie&6)&&(Us=Pe()+500,bn()))}break;case 13:qn(function(){var n=Ir(e,1);if(n!==null){var s=at();Qt(n,e,1,s)}}),Zf(e,1)}};wf=function(e){if(e.tag===13){var t=Ir(e,134217728);if(t!==null){var r=at();Qt(t,e,134217728,r)}Zf(e,134217728)}};H0=function(e){if(e.tag===13){var t=an(e),r=Ir(e,t);if(r!==null){var n=at();Qt(r,e,t,n)}Zf(e,t)}};z0=function(){return he};Y0=function(e,t){var r=he;try{return he=e,t()}finally{he=r}};Zu=function(e,t,r){switch(t){case"input":if(Vu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ql(n);if(!s)throw Error(B(90));_0(n),Vu(n,s)}}}break;case"textarea":S0(e,r);break;case"select":t=r.value,t!=null&&Ds(e,!!r.multiple,t,!1)}};T0=Gf;R0=qn;var F1={usingClientEntryPoint:!1,Events:[Ti,xs,ql,E0,P0,Gf]},wo={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=M0(e),e===null?null:e.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||L1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Hl=aa.inject($1),dr=aa}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F1;Nt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!th(t))throw Error(B(200));return M1(e,t,null,r)};Nt.createRoot=function(e,t){if(!th(e))throw Error(B(299));var r=!1,n="",s=hy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xf(e,1,!1,null,null,r,!1,n,s),e[Or]=t.current,ai(e.nodeType===8?e.parentNode:e),new eh(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=M0(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return qn(e)};Nt.hydrate=function(e,t,r){if(!rc(t))throw Error(B(200));return nc(null,e,t,!0,r)};Nt.hydrateRoot=function(e,t,r){if(!th(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=hy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=fy(t,null,e,1,r??null,s,!1,o,i),e[Or]=t.current,ai(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new tc(t)};Nt.render=function(e,t,r){if(!rc(t))throw Error(B(200));return nc(null,e,t,!1,r)};Nt.unmountComponentAtNode=function(e){if(!rc(e))throw Error(B(40));return e._reactRootContainer?(qn(function(){nc(null,null,e,!1,function(){e._reactRootContainer=null,e[Or]=null})}),!0):!1};Nt.unstable_batchedUpdates=Gf;Nt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rc(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return nc(e,t,r,!1,n)};Nt.version="18.3.1-next-f1338f8080-20240426";function py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(py)}catch(e){console.error(e)}}py(),p0.exports=Nt;var Oi=p0.exports;const my=t0(Oi);var im=Oi;$u.createRoot=im.createRoot,$u.hydrateRoot=im.hydrateRoot;const B1="modulepreload",U1=function(e){return"/"+e},am={},ro=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=U1(o),o in am)return;am[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":B1,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var lm="popstate";function W1(e={}){function t(n,s){let{pathname:o,search:i,hash:l}=n.location;return Rd("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:gi(s)}return z1(t,r,null,e)}function we(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H1(){return Math.random().toString(36).substring(2,10)}function cm(e,t){return{usr:e.state,key:e.key,idx:t}}function Rd(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?no(t):t,state:r,key:t&&t.key||n||H1()}}function gi({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function no(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function z1(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:y})}function h(b,y){l="PUSH";let m=Rd(x.location,b,y);r&&r(m,b),u=d()+1;let g=cm(m,u),_=x.createHref(m);try{i.pushState(g,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}o&&c&&c({action:l,location:x.location,delta:1})}function p(b,y){l="REPLACE";let m=Rd(x.location,b,y);r&&r(m,b),u=d();let g=cm(m,u),_=x.createHref(m);i.replaceState(g,"",_),o&&c&&c({action:l,location:x.location,delta:0})}function v(b){return Y1(b)}let x={get action(){return l},get location(){return e(s,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(lm,f),c=b,()=>{s.removeEventListener(lm,f),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(b){return i.go(b)}};return x}function Y1(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),we(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:gi(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function gy(e,t,r="/"){return V1(e,t,r,!1)}function V1(e,t,r,n){let s=typeof t=="string"?no(t):t,o=Lr(s.pathname||"/",r);if(o==null)return null;let i=vy(e);q1(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=sk(o);l=rk(i[c],u,n)}return l}function vy(e,t=[],r=[],n=""){let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(we(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=jr([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(we(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),vy(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:ek(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of yy(o.path))s(o,i,c)}),t}function yy(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=yy(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function q1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var G1=/^:[\w-]+$/,K1=3,Q1=2,J1=1,X1=10,Z1=-2,um=e=>e==="*";function ek(e,t){let r=e.split("/"),n=r.length;return r.some(um)&&(n+=Z1),t&&(n+=Q1),r.filter(s=>!um(s)).reduce((s,o)=>s+(G1.test(o)?K1:o===""?J1:X1),n)}function tk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function rk(e,t,r=!1){let{routesMeta:n}=e,s={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=gl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=gl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:jr([o,f.pathname]),pathnameBase:lk(jr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=jr([o,f.pathnameBase]))}return i}function gl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=nk(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let v=l[h]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function nk(e,t=!1,r=!0){Zt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function sk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ok(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?no(e):e;return{pathname:r?r.startsWith("/")?r:ik(r,t):t,search:ck(n),hash:uk(s)}}function ik(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function tu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ak(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rh(e){let t=ak(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function nh(e,t,r,n=!1){let s;typeof e=="string"?s=no(e):(s={...e},we(!s.pathname||!s.pathname.includes("?"),tu("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),tu("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),tu("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=ok(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var jr=e=>e.join("/").replace(/\/\/+/g,"/"),lk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ck=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var xy=["POST","PUT","PATCH","DELETE"];new Set(xy);var fk=["GET",...xy];new Set(fk);var so=w.createContext(null);so.displayName="DataRouter";var sc=w.createContext(null);sc.displayName="DataRouterState";w.createContext(!1);var by=w.createContext({isTransitioning:!1});by.displayName="ViewTransition";var hk=w.createContext(new Map);hk.displayName="Fetchers";var pk=w.createContext(null);pk.displayName="Await";var tr=w.createContext(null);tr.displayName="Navigation";var Ii=w.createContext(null);Ii.displayName="Location";var rr=w.createContext({outlet:null,matches:[],isDataRoute:!1});rr.displayName="Route";var sh=w.createContext(null);sh.displayName="RouteError";function mk(e,{relative:t}={}){we(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(tr),{hash:s,pathname:o,search:i}=Mi(e,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:jr([r,o])),n.createHref({pathname:l,search:i,hash:s})}function oo(){return w.useContext(Ii)!=null}function $r(){return we(oo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ii).location}var wy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _y(e){w.useContext(tr).static||w.useLayoutEffect(e)}function io(){let{isDataRoute:e}=w.useContext(rr);return e?Ck():gk()}function gk(){we(oo(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(so),{basename:t,navigator:r}=w.useContext(tr),{matches:n}=w.useContext(rr),{pathname:s}=$r(),o=JSON.stringify(rh(n)),i=w.useRef(!1);return _y(()=>{i.current=!0}),w.useCallback((c,u={})=>{if(Zt(i.current,wy),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=nh(c,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,s,e])}w.createContext(null);function ky(){let{matches:e}=w.useContext(rr),t=e[e.length-1];return t?t.params:{}}function Mi(e,{relative:t}={}){let{matches:r}=w.useContext(rr),{pathname:n}=$r(),s=JSON.stringify(rh(r));return w.useMemo(()=>nh(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function vk(e,t){return Sy(e,t)}function Sy(e,t,r,n){var y;we(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(tr),{matches:o}=w.useContext(rr),i=o[o.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let m=d&&d.path||"";Ny(c,!d||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=$r(),h;if(t){let m=typeof t=="string"?no(t):t;we(u==="/"||((y=m.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let p=h.pathname||"/",v=p;if(u!=="/"){let m=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=gy(e,{pathname:v});Zt(d||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Zt(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=_k(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:jr([u,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:jr([u,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,r,n);return t&&b?w.createElement(Ii.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function yk(){let e=Dk(),t=dk(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,i)}var xk=w.createElement(yk,null),bk=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(rr.Provider,{value:this.props.routeContext},w.createElement(sh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wk({routeContext:e,match:t,children:r}){let n=w.useContext(so);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(rr.Provider,{value:e},r)}function _k(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=r==null?void 0:r.errors;if(o!=null){let c=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);we(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,d)=>{let f,h=!1,p=null,v=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||xk,i&&(l<0&&d===0?(Ny("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,v=null):l===d&&(h=!0,v=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),b=()=>{let y;return f?y=p:h?y=v:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=c,w.createElement(wk,{match:u,routeContext:{outlet:c,matches:x,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?w.createElement(bk,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function oh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kk(e){let t=w.useContext(so);return we(t,oh(e)),t}function Sk(e){let t=w.useContext(sc);return we(t,oh(e)),t}function Nk(e){let t=w.useContext(rr);return we(t,oh(e)),t}function ih(e){let t=Nk(e),r=t.matches[t.matches.length-1];return we(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function jk(){return ih("useRouteId")}function Dk(){var n;let e=w.useContext(sh),t=Sk("useRouteError"),r=ih("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Ck(){let{router:e}=kk("useNavigate"),t=ih("useNavigate"),r=w.useRef(!1);return _y(()=>{r.current=!0}),w.useCallback(async(s,o={})=>{Zt(r.current,wy),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var dm={};function Ny(e,t,r){!t&&!dm[e]&&(dm[e]=!0,Zt(!1,r))}w.memo(Ek);function Ek({routes:e,future:t,state:r}){return Sy(e,void 0,r,t)}function Pk({to:e,replace:t,state:r,relative:n}){we(oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(tr);Zt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(rr),{pathname:i}=$r(),l=io(),c=nh(e,rh(o),i,n==="path"),u=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function us(e){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tk({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:o=!1}){we(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof r=="string"&&(r=no(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=w.useMemo(()=>{let v=Lr(c,i);return v==null?null:{location:{pathname:v,search:u,hash:d,state:f,key:h},navigationType:n}},[i,c,u,d,f,h,n]);return Zt(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(tr.Provider,{value:l},w.createElement(Ii.Provider,{children:t,value:p}))}function Rk({children:e,location:t}){return vk(Od(e),t)}function Od(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let o=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Od(n.props.children,o));return}we(n.type===us,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Od(n.props.children,o)),r.push(i)}),r}var Aa="get",Fa="application/x-www-form-urlencoded";function oc(e){return e!=null&&typeof e.tagName=="string"}function Ok(e){return oc(e)&&e.tagName.toLowerCase()==="button"}function Ik(e){return oc(e)&&e.tagName.toLowerCase()==="form"}function Mk(e){return oc(e)&&e.tagName.toLowerCase()==="input"}function Lk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ak(e,t){return e.button===0&&(!t||t==="_self")&&!Lk(e)}var la=null;function Fk(){if(la===null)try{new FormData(document.createElement("form"),0),la=!1}catch{la=!0}return la}var $k=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ru(e){return e!=null&&!$k.has(e)?(Zt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fa}"`),null):e}function Bk(e,t){let r,n,s,o,i;if(Ik(e)){let l=e.getAttribute("action");n=l?Lr(l,t):null,r=e.getAttribute("method")||Aa,s=ru(e.getAttribute("enctype"))||Fa,o=new FormData(e)}else if(Ok(e)||Mk(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Lr(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Aa,s=ru(e.getAttribute("formenctype"))||ru(l.getAttribute("enctype"))||Fa,o=new FormData(l,e),!Fk()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";o.append(`${h}x`,"0"),o.append(`${h}y`,"0")}else u&&o.append(u,f)}}else{if(oc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Aa,n=null,s=Fa,i=e}return o&&s==="text/plain"&&(i=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ah(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uk(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Lr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Wk(e,t){if(e.id in t)return t[e.id];try{let r=await ro(()=>import(e.module),[]);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hk(e){return e!=null&&typeof e.page=="string"}function zk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Yk(e,t,r){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let i=await Wk(o,r);return i.links?i.links():[]}return[]}));return Kk(n.flat(1).filter(zk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function fm(e,t,r,n,s,o){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return o==="assets"?t.filter((c,u)=>i(c,u)||l(c,u)):o==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Vk(e,t,{includeHydrateFallback:r}={}){return qk(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function qk(e){return[...new Set(e)]}function Gk(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Kk(e,t){let r=new Set,n=new Set(t);return e.reduce((s,o)=>{if(t&&!Hk(o)&&o.as==="script"&&o.href&&n.has(o.href))return s;let l=JSON.stringify(Gk(o));return r.has(l)||(r.add(l),s.push({key:l,link:o})),s},[])}function jy(){let e=w.useContext(so);return ah(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Qk(){let e=w.useContext(sc);return ah(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lh=w.createContext(void 0);lh.displayName="FrameworkContext";function Dy(){let e=w.useContext(lh);return ah(e,"You must render this element inside a <HydratedRouter> element"),e}function Jk(e,t){let r=w.useContext(lh),[n,s]=w.useState(!1),[o,i]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=w.useRef(null);w.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=y=>{y.forEach(m=>{i(m.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),i(!1)};return r?e!=="intent"?[o,h,{}]:[o,h,{onFocus:_o(l,p),onBlur:_o(c,v),onMouseEnter:_o(u,p),onMouseLeave:_o(d,v),onTouchStart:_o(f,p)}]:[!1,h,{}]}function _o(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Xk({page:e,...t}){let{router:r}=jy(),n=w.useMemo(()=>gy(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(eS,{page:e,matches:n,...t}):null}function Zk(e){let{manifest:t,routeModules:r}=Dy(),[n,s]=w.useState([]);return w.useEffect(()=>{let o=!1;return Yk(e,t,r).then(i=>{o||s(i)}),()=>{o=!0}},[e,t,r]),n}function eS({page:e,matches:t,...r}){let n=$r(),{manifest:s,routeModules:o}=Dy(),{basename:i}=jy(),{loaderData:l,matches:c}=Qk(),u=w.useMemo(()=>fm(e,t,c,s,n,"data"),[e,t,c,s,n]),d=w.useMemo(()=>fm(e,t,c,s,n,"assets"),[e,t,c,s,n]),f=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,x=!1;if(t.forEach(y=>{var g;let m=s.routes[y.route.id];!m||!m.hasLoader||(!u.some(_=>_.route.id===y.route.id)&&y.route.id in l&&((g=o[y.route.id])!=null&&g.shouldRevalidate)||m.hasClientLoader?x=!0:v.add(y.route.id))}),v.size===0)return[];let b=Uk(e,i,"data");return x&&v.size>0&&b.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[i,l,n,s,u,t,e,o]),h=w.useMemo(()=>Vk(d,s),[d,s]),p=Zk(d);return w.createElement(w.Fragment,null,f.map(v=>w.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),h.map(v=>w.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:x})=>w.createElement("link",{key:v,...x})))}function tS(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Cy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cy&&(window.__reactRouterVersion="7.7.1")}catch{}function rS({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=W1({window:r,v5Compat:!0}));let s=n.current,[o,i]=w.useState({action:s.action,location:s.location}),l=w.useCallback(c=>{w.startTransition(()=>i(c))},[i]);return w.useLayoutEffect(()=>s.listen(l),[s,l]),w.createElement(Tk,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var Ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vi=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:v}=w.useContext(tr),x=typeof u=="string"&&Ey.test(u),b,y=!1;if(typeof u=="string"&&x&&(b=u,Cy))try{let N=new URL(window.location.href),E=u.startsWith("//")?new URL(N.protocol+u):new URL(u),M=Lr(E.pathname,v);E.origin===N.origin&&M!=null?u=M+E.search+E.hash:y=!0}catch{Zt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=mk(u,{relative:s}),[g,_,k]=Jk(n,h),S=iS(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function j(N){t&&t(N),N.defaultPrevented||S(N)}let D=w.createElement("a",{...h,...k,href:b||m,onClick:y||o?t:j,ref:tS(p,_),target:c,"data-discover":!x&&r==="render"?"true":void 0});return g&&!x?w.createElement(w.Fragment,null,D,w.createElement(Xk,{page:m})):D});vi.displayName="Link";var nS=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:o,to:i,viewTransition:l,children:c,...u},d){let f=Mi(i,{relative:u.relative}),h=$r(),p=w.useContext(sc),{navigator:v,basename:x}=w.useContext(tr),b=p!=null&&dS(f)&&l===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,m=h.pathname,g=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(m=m.toLowerCase(),g=g?g.toLowerCase():null,y=y.toLowerCase()),g&&x&&(g=Lr(g,x)||g);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=m===y||!s&&m.startsWith(y)&&m.charAt(_)==="/",S=g!=null&&(g===y||!s&&g.startsWith(y)&&g.charAt(y.length)==="/"),j={isActive:k,isPending:S,isTransitioning:b},D=k?t:void 0,N;typeof n=="function"?N=n(j):N=[n,k?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let E=typeof o=="function"?o(j):o;return w.createElement(vi,{...u,"aria-current":D,className:N,ref:d,style:E,to:i,viewTransition:l},typeof c=="function"?c(j):c)});nS.displayName="NavLink";var sS=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:o,method:i=Aa,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let v=cS(),x=uS(l,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&Ey.test(l),m=g=>{if(c&&c(g),g.defaultPrevented)return;g.preventDefault();let _=g.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||i;v(_||g.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return w.createElement("form",{ref:p,method:b,action:x,onSubmit:n?c:m,...h,"data-discover":!y&&e==="render"?"true":void 0})});sS.displayName="Form";function oS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Py(e){let t=w.useContext(so);return we(t,oS(e)),t}function iS(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:i}={}){let l=io(),c=$r(),u=Mi(e,{relative:o});return w.useCallback(d=>{if(Ak(d,t)){d.preventDefault();let f=r!==void 0?r:gi(c)===gi(u);l(e,{replace:f,state:n,preventScrollReset:s,relative:o,viewTransition:i})}},[c,l,u,r,n,t,e,s,o,i])}var aS=0,lS=()=>`__${String(++aS)}__`;function cS(){let{router:e}=Py("useSubmit"),{basename:t}=w.useContext(tr),r=jk();return w.useCallback(async(n,s={})=>{let{action:o,method:i,encType:l,formData:c,body:u}=Bk(n,t);if(s.navigate===!1){let d=s.fetcherKey||lS();await e.fetch(d,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||i,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||i,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function uS(e,{relative:t}={}){let{basename:r}=w.useContext(tr),n=w.useContext(rr);we(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Mi(e||".",{relative:t})},i=$r();if(e==null){o.search=i.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:jr([r,o.pathname])),gi(o)}function dS(e,{relative:t}={}){let r=w.useContext(by);we(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Py("useViewTransitionState"),s=Mi(e,{relative:t});if(!r.isTransitioning)return!1;let o=Lr(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Lr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return gl(s.pathname,i)!=null||gl(s.pathname,o)!=null}const fS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>ao),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ch extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class hS extends ch{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hm extends ch{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pm extends ch{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Id;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Id||(Id={}));var pS=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class mS{constructor(t,{headers:r={},customFetch:n,region:s=Id.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=fS(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return pS(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new hS(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new hm(f);if(!f.ok)throw new pm(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield f.json():p==="application/octet-stream"?v=yield f.blob():p==="text/event-stream"?v=f:p==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof pm||s instanceof hm?s.context:void 0}}})}}var ft={},uh={},ic={},Li={},ac={},lc={},gS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ws=gS();const vS=Ws.fetch,Ty=Ws.fetch.bind(Ws),Ry=Ws.Headers,yS=Ws.Request,xS=Ws.Response,ao=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ry,Request:yS,Response:xS,default:Ty,fetch:vS},Symbol.toStringTag,{value:"Module"})),bS=pw(ao);var cc={};Object.defineProperty(cc,"__esModule",{value:!0});let wS=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};cc.default=wS;var Oy=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lc,"__esModule",{value:!0});const _S=Oy(bS),kS=Oy(cc);let SS=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=_S.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let u=null,d=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),b=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await o.text();try{u=JSON.parse(x),Array.isArray(u)&&o.status===404&&(d=[],u=null,h=200,p="OK")}catch{o.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new kS.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};lc.default=SS;var NS=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ac,"__esModule",{value:!0});const jS=NS(lc);let DS=class extends jS.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ac.default=DS;var CS=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Li,"__esModule",{value:!0});const ES=CS(ac);let PS=class extends ES.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Li.default=PS;var TS=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ic,"__esModule",{value:!0});const ko=TS(Li);let RS=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new ko.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ko.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ko.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ko.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ko.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ic.default=RS;var uc={},dc={};Object.defineProperty(dc,"__esModule",{value:!0});dc.version=void 0;dc.version="0.0.0-automated";Object.defineProperty(uc,"__esModule",{value:!0});uc.DEFAULT_HEADERS=void 0;const OS=dc;uc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${OS.version}`};var Iy=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uh,"__esModule",{value:!0});const IS=Iy(ic),MS=Iy(Li),LS=uc;let AS=class My{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},LS.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new IS.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new My(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(i="POST",c=r);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new MS.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};uh.default=AS;var lo=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ft,"__esModule",{value:!0});ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const Ly=lo(uh);ft.PostgrestClient=Ly.default;const Ay=lo(ic);ft.PostgrestQueryBuilder=Ay.default;const Fy=lo(Li);ft.PostgrestFilterBuilder=Fy.default;const $y=lo(ac);ft.PostgrestTransformBuilder=$y.default;const By=lo(lc);ft.PostgrestBuilder=By.default;const Uy=lo(cc);ft.PostgrestError=Uy.default;var FS=ft.default={PostgrestClient:Ly.default,PostgrestQueryBuilder:Ay.default,PostgrestFilterBuilder:Fy.default,PostgrestTransformBuilder:$y.default,PostgrestBuilder:By.default,PostgrestError:Uy.default};const{PostgrestClient:$S,PostgrestQueryBuilder:V4,PostgrestFilterBuilder:q4,PostgrestTransformBuilder:G4,PostgrestBuilder:K4,PostgrestError:Q4}=FS;function BS(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const US=BS(),WS="2.11.15",HS=`realtime-js/${WS}`,zS="1.0.0",Wy=1e4,YS=1e3;var Ko;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ko||(Ko={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var Vt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vt||(Vt={}));var Md;(function(e){e.websocket="websocket"})(Md||(Md={}));var Tn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tn||(Tn={}));class VS{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const c=n.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Hy{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(me||(me={}));const mm=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=qS(i,e,t,s),o),{})},qS=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,i=r[e];return o&&!n.includes(o)?zy(o,i):Ld(i)},zy=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return JS(t,r)}switch(e){case me.bool:return GS(t);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return KS(t);case me.json:case me.jsonb:return QS(t);case me.timestamp:return XS(t);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Ld(t);default:return Ld(t)}},Ld=e=>e,GS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},KS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QS=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},JS=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>zy(t,l))}return e},XS=e=>typeof e=="string"?e.replace(" ","T"):e,Yy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class nu{constructor(t,r,n={},s=Wy){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gm||(gm={}));class Qo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qo.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=Qo.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qo.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const f=o[u];if(f){const h=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),v=d.filter(b=>p.indexOf(b.presence_ref)<0),x=f.filter(b=>h.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vm||(vm={}));var ym;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ym||(ym={}));var xr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xr||(xr={}));class dh{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new nu(this,Vt.join,this.params,this.timeout),this.rejoinTimer=new Hy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vt.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Qo(this),this.broadcastEndpointURL=Yy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(d=>t==null?void 0:t(xr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(xr.CLOSED));const c={},u={broadcast:o,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(xr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,v=[];for(let x=0;x<p;x++){const b=h[x],{filter:{event:y,schema:m,table:g,filter:_}}=b,k=d&&d[x];if(k&&k.event===y&&k.schema===m&&k.table===g&&k.filter===_)v.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(xr.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xe.errored,t==null||t(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new nu(this,Vt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new nu(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Vt;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,x,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var v,x,b,y,m,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:x,table:b,commit_timestamp:y,type:m,errors:g}=v;h=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:y,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&dh.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vt.close,{},t)}_onError(t){this._on(Vt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=mm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=mm(t.columns,t.old_record)),r}}const xm=()=>{},ZS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eN{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wy,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xm,this.ref=0,this.logger=xm,this.conn=null,this.sendBuffer=[],this.serializer=new VS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>ro(()=>Promise.resolve().then(()=>ao),void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Md.websocket}`,this.httpEndpoint=Yy(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=US),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zS}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ko.connecting:return Tn.Connecting;case Ko.open:return Tn.Open;case Ko.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new dh(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:HS};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Vt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(YS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ZS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class fh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tN extends fh{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ad extends fh{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var rN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Vy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>ao),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},nN=()=>rN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ro(()=>Promise.resolve().then(()=>ao),void 0)).Response:Response}),Fd=e=>{if(Array.isArray(e))return e.map(r=>Fd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Fd(n)}),t},sN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var es=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const su=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oN=(e,t,r)=>es(void 0,void 0,void 0,function*(){const n=yield nN();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,i=(s==null?void 0:s.statusCode)||o+"";t(new tN(su(s),o,i))}).catch(s=>{t(new Ad(su(s),s))}):t(new Ad(su(e),e))}),iN=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(sN(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function Ai(e,t,r,n,s,o){return es(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,iN(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>oN(c,l,n))})})}function vl(e,t,r,n){return es(this,void 0,void 0,function*(){return Ai(e,"GET",t,r,n)})}function br(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Ai(e,"POST",t,n,s,r)})}function $d(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Ai(e,"PUT",t,n,s,r)})}function aN(e,t,r,n){return es(this,void 0,void 0,function*(){return Ai(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function qy(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Ai(e,"DELETE",t,n,s,r)})}var ut=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const lN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cN{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Vy(s)}uploadOrUpdate(t,r,n,s){return ut(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},bm),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?$d:br)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(Fe(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ut(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:bm.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield $d(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:f.Key},error:null}}catch(c){if(Fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield br(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new fh("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}update(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield br(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ut(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield br(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=yield br(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}download(t,r){return ut(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield vl(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Fe(l))return{data:null,error:l};throw l}})}info(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield vl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fd(n),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}exists(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield aN(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Fe(n)&&n instanceof Ad){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ut(this,void 0,void 0,function*(){try{return{data:yield qy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}list(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},lN),r),{prefix:t||""});return{data:yield br(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uN="2.10.4",dN={"X-Client-Info":`storage-js/${uN}`};var ss=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class fN{constructor(t,r={},n,s){const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},dN),r),this.fetch=Vy(n)}listBuckets(){return ss(this,void 0,void 0,function*(){try{return{data:yield vl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}getBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield vl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ss(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ss(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield qy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}}class hN extends fN{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new cN(this.url,this.headers,t,this.fetch)}}const pN="2.53.0";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const mN={"X-Client-Info":`supabase-js-${Ao}/${pN}`},gN={headers:mN},vN={schema:"public"},yN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xN={};var bN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const wN=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ty:t=fetch,(...r)=>t(...r)},_N=()=>typeof Headers>"u"?Ry:Headers,kN=(e,t,r)=>{const n=wN(r),s=_N();return(o,i)=>bN(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:u}))})};var SN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function NN(e){return e.endsWith("/")?e:e+"/"}function jN(e,t){var r,n;const{db:s,auth:o,realtime:i,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>SN(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Gy="2.71.1",ds=30*1e3,Bd=3,ou=Bd*ds,DN="http://localhost:9999",CN="supabase.auth.token",EN={"X-Client-Info":`gotrue-js/${Gy}`},Ud="X-Supabase-Api-Version",Ky={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TN=10*60*1e3;class hh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function X(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class RN extends hh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ON(e){return X(e)&&e.name==="AuthApiError"}class Qy extends hh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wn extends hh{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class zr extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IN(e){return X(e)&&e.name==="AuthSessionMissingError"}class ca extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ua extends wn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class da extends wn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MN(e){return X(e)&&e.name==="AuthImplicitGrantRedirectError"}class wm extends wn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wd extends wn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function iu(e){return X(e)&&e.name==="AuthRetryableFetchError"}class _m extends wn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Hd extends wn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),km=` 	
\r=`.split(""),LN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<km.length;t+=1)e[km[t].charCodeAt(0)]=-2;for(let t=0;t<yl.length;t+=1)e[yl[t].charCodeAt(0)]=t;return e})();function Sm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(yl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(yl[n]),t.queuedBits-=6}}function Jy(e,t,r){const n=LN[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Nm(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{$N(i,n,r)};for(let i=0;i<e.length;i+=1)Jy(e.charCodeAt(i),s,o);return t.join("")}function AN(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function FN(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}AN(n,t)}}function $N(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function BN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Jy(e.charCodeAt(s),r,n);return new Uint8Array(t)}function UN(e){const t=[];return FN(e,r=>t.push(r)),new Uint8Array(t)}function WN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Sm(s,r,n)),Sm(null,r,n),t.join("")}function HN(e){return Math.round(Date.now()/1e3)+e}function zN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",_n={tested:!1,writable:!1},Xy=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_n.tested)return _n.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),_n.tested=!0,_n.writable=!0}catch{_n.tested=!0,_n.writable=!1}return _n.writable};function YN(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Zy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>ao),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},VN=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},kn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wr=async(e,t)=>{await e.removeItem(t)};class fc{constructor(){this.promise=new fc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}fc.promiseConstructor=Promise;function au(e){const t=e.split(".");if(t.length!==3)throw new Hd("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!PN.test(t[n]))throw new Hd("JWT not in base64url format");return{header:JSON.parse(Nm(t[0])),payload:JSON.parse(Nm(t[1])),signature:BN(t[2]),raw:{header:t[0],payload:t[1]}}}async function qN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function GN(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function KN(e){return("0"+e.toString(16)).substr(-2)}function QN(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,KN).join("")}async function JN(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function XN(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await JN(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function os(e,t,r=!1){const n=QN();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await fs(e,`${t}-code-verifier`,s);const o=await XN(n);return[o,n===o?"plain":"s256"]}const ZN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ej(e){const t=e.headers.get(Ud);if(!t||!t.match(ZN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function is(e){if(!nj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jm(e){return JSON.parse(JSON.stringify(e))}var sj=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Cn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oj=[502,503,504];async function Dm(e){var t;if(!VN(e))throw new Wd(Cn(e),0);if(oj.includes(e.status))throw new Wd(Cn(e),e.status);let r;try{r=await e.json()}catch(o){throw new Qy(Cn(o),o)}let n;const s=ej(e);if(s&&s.getTime()>=Ky["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new _m(Cn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new _m(Cn(r),e.status,r.weak_password.reasons);throw new RN(Cn(r),e.status||500,n)}const ij=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ee(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Ud]||(o[Ud]=Ky["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await aj(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function aj(e,t,r,n,s,o){const i=ij(t,n,s,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Wd(Cn(c),0)}if(l.ok||await Dm(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Dm(c)}}function vr(e){var t;let r=null;dj(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=HN(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Cm(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lj(e){return{data:e,error:null}}function cj(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=sj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function uj(e){return e}function dj(e){return e.access_token&&e.refresh_token&&e.expires_in}const cu=["global","local","others"];var fj=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class hj{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Zy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=cu[0]){if(cu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cu.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=fj(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cj,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(X(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:uj});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(X(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){is(t);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){is(t);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){is(t);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){is(t.userId);try{const{data:r,error:n}=await ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _deleteFactor(t){is(t.userId),is(t.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}}function Em(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function pj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const as={debug:!!(globalThis&&Xy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ex extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mj extends ex{}async function gj(e,t,r){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(as.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}pj();const vj={url:DN,storageKey:CN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pm(e,t,r){return await r()}const ls={};class yi{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yi.nextInstanceID,yi.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},vj),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Zy(s.fetch),this.lock=s.lock||Pm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ht()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=gj:this.lock=Pm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Xy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Em(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Em(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ls[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ls[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=YN(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),MN(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return X(r)?{error:r}:{error:new Qy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vr}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(X(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await os(this.storage,this.storageKey)),o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:vr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:vr})}else throw new ua("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(X(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cm})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cm})}else throw new ua("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ca}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,l,c,u,d,f,h,p;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:b,wallet:y,statement:m,options:g}=t;let _;if(Ht())if(typeof y=="object")_=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:b,error:y}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:WN(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vr});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ca}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(X(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:vr});if(await Wr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ca}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(X(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,l=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:vr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ca}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await os(this.storage,this.storageKey));const{error:f}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ua("You must provide either an email or phone number.")}catch(l){if(X(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:vr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await os(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:lj})}catch(o){if(X(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zr;const{error:s}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:l}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new ua("You must provide either an email or phone number and a type")}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ou:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await kn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=lu()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kr}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zr}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Kr})})}catch(r){if(X(r))return IN(r)&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new zr;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await os(this.storage,this.storageKey));const{data:u,error:d}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Kr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zr;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=au(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(X(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zr;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ht())throw new da("No browser detected.");if(t.error||t.error_description||t.error_code)throw new da(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new wm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new da("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new wm("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!i||!u)throw new da("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=ds&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:x,error:b}=await this._getUser(o);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(X(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(ON(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=zN(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await os(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(X(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ht()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(X(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await GN(async s=>(s>0&&await qN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&iu(o)&&Date.now()+i-n<ds})}catch(n){if(this._debug(r,"error",n),X(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await kn(this.storage,this.storageKey);if(s&&this.userStorage){let i=await kn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await fs(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:lu()}else if(s&&!s.user&&!s.user){const i=await kn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Wr(this.storage,this.storageKey+"-user"),await fs(this.storage,this.storageKey,s)):s.user=lu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ou;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ou}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),iu(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fc;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new zr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),X(o)){const i={session:null,error:o};return iu(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await fs(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=jm(s);await fs(this.storage,this.storageKey,o)}else{const s=jm(r);await fs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Wr(this.storage,this.storageKey),await Wr(this.storage,this.storageKey+"-code-verifier"),await Wr(this.storage,this.storageKey+"-user"),this.userStorage&&await Wr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ds);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ds);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ds}ms, refresh threshold is ${Bd} ticks`),s<=Bd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ex)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await os(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=au(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+TN>s)return n;const{data:o,error:i}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=au(n);r!=null&&r.allowExpired||tj(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=rj(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,UN(`${l}.${c}`)))throw new Hd("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}}yi.nextInstanceID=0;const yj=yi;class xj extends yj{constructor(t){super(t)}}var bj=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class wj{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=NN(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:vN,realtime:xN,auth:Object.assign(Object.assign({},yN),{storageKey:u}),global:gN},f=jN(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=kN(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new $S(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new hN(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new mS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return bj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xj({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new eN(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _j=(e,t,r)=>new wj(e,t,r);function kj(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Sj="https://rqbvcvwbziilnycqtmnc.supabase.co",Nj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxYnZjdndiemlpbG55Y3F0bW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyMzk5ODIsImV4cCI6MjA2NTgxNTk4Mn0.819LDXCnlu2dgCPw91oMbZIojeFom-UxqJn2hA5yjBM",W=_j(Sj,Nj),tx=w.createContext(void 0);function jj(){const e=w.useContext(tx);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Dj({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{W.auth.getSession().then(({data:{session:h}})=>{s(h),r((h==null?void 0:h.user)??null),i(!1)});const{data:{subscription:f}}=W.auth.onAuthStateChange(async(h,p)=>{s(p),r((p==null?void 0:p.user)??null),i(!1)});return()=>f.unsubscribe()},[]);const d={user:t,session:n,loading:o,signIn:async(f,h)=>await W.auth.signInWithPassword({email:f,password:h}),signUp:async(f,h)=>await W.auth.signUp({email:f,password:h}),signOut:async()=>{await W.auth.signOut()}};return a.jsx(tx.Provider,{value:d,children:e})}function Cj({children:e}){return a.jsx(a.Fragment,{children:e})}function nt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ej=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Tm=Ej,uu=()=>Math.random().toString(36).substring(7).split("").join("."),Pj={INIT:`@@redux/INIT${uu()}`,REPLACE:`@@redux/REPLACE${uu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${uu()}`},Rm=Pj;function Tj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function rx(e,t,r){if(typeof e!="function")throw new Error(nt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(nt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(nt(1));return r(rx)(e,t)}let n=e,s=t,o=new Map,i=o,l=0,c=!1;function u(){i===o&&(i=new Map,o.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(nt(3));return s}function f(b){if(typeof b!="function")throw new Error(nt(4));if(c)throw new Error(nt(5));let y=!0;u();const m=l++;return i.set(m,b),function(){if(y){if(c)throw new Error(nt(6));y=!1,u(),i.delete(m),o=null}}}function h(b){if(!Tj(b))throw new Error(nt(7));if(typeof b.type>"u")throw new Error(nt(8));if(typeof b.type!="string")throw new Error(nt(17));if(c)throw new Error(nt(9));try{c=!0,s=n(s,b)}finally{c=!1}return(o=i).forEach(m=>{m()}),b}function p(b){if(typeof b!="function")throw new Error(nt(10));n=b,h({type:Rm.REPLACE})}function v(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(nt(11));function m(){const _=y;_.next&&_.next(d())}return m(),{unsubscribe:b(m)}},[Tm](){return this}}}return h({type:Rm.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[Tm]:v}}function Om(e,t){return function(...r){return t(e.apply(this,r))}}function Im(e,t){if(typeof e=="function")return Om(e,t);if(typeof e!="object"||e===null)throw new Error(nt(16));const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=Om(s,t))}return r}function nx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Rj(...e){return t=>(r,n)=>{const s=t(r,n);let o=()=>{throw new Error(nt(15))};const i={getState:s.getState,dispatch:(c,...u)=>o(c,...u)},l=e.map(c=>c(i));return o=nx(...l)(s.dispatch),{...s,dispatch:o}}}var Oj={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=w;function Ij(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mj=typeof Object.is=="function"?Object.is:Ij,Lj=Fi.useSyncExternalStore,Aj=Fi.useRef,Fj=Fi.useEffect,$j=Fi.useMemo,Bj=Fi.useDebugValue;Oj.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=Aj(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=$j(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),s!==void 0&&i.hasValue){var v=i.value;if(s(v,p))return f=v}return f=p}if(v=f,Mj(d,p))return v;var x=n(p);return s!==void 0&&s(v,x)?(d=p,v):(d=p,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=Lj(e,o[0],o[1]);return Fj(function(){i.hasValue=!0,i.value=l},[l]),Bj(l),l};var Uj=w.version.startsWith("19"),Wj=Symbol.for(Uj?"react.transitional.element":"react.element"),Hj=Symbol.for("react.portal"),zj=Symbol.for("react.fragment"),Yj=Symbol.for("react.strict_mode"),Vj=Symbol.for("react.profiler"),qj=Symbol.for("react.consumer"),Gj=Symbol.for("react.context"),sx=Symbol.for("react.forward_ref"),Kj=Symbol.for("react.suspense"),Qj=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),Jj=Symbol.for("react.lazy"),Xj=sx,Zj=ph;function eD(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Wj:switch(e=e.type,e){case zj:case Vj:case Yj:case Kj:case Qj:return e;default:switch(e=e&&e.$$typeof,e){case Gj:case sx:case Jj:case ph:return e;case qj:return e;default:return t}}case Hj:return t}}}function tD(e){return eD(e)===ph}function rD(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,u,d,f,h;function p(m,g){return c=m,u=g,d=e(c,u),f=t(n,u),h=r(d,f,u),l=!0,h}function v(){return d=e(c,u),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function x(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function b(){const m=e(c,u),g=!i(m,d);return d=m,g&&(h=r(d,f,u)),h}function y(m,g){const _=!o(g,u),k=!s(m,c,g,u);return c=m,u=g,_&&k?v():_?x():k?b():h}return function(g,_){return l?y(g,_):p(g,_)}}function nD(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...s}){const o=t(e,s),i=r(e,s),l=n(e,s);return rD(o,i,l,e,s)}function sD(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function zd(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function Mm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function ox(e,t){return function(n,{displayName:s}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=Mm(e);let u=o(l,c);return typeof u=="function"&&(o.mapToProps=u,o.dependsOnOwnProps=Mm(u),u=o(l,c)),u},o}}function mh(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function oD(e){return e&&typeof e=="object"?zd(t=>sD(e,t)):e?typeof e=="function"?ox(e):mh(e,"mapDispatchToProps"):zd(t=>({dispatch:t}))}function iD(e){return e?typeof e=="function"?ox(e):mh(e,"mapStateToProps"):zd(()=>({}))}function aD(e,t,r){return{...r,...e,...t}}function lD(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,i;return function(c,u,d){const f=e(c,u,d);return o?s(f,i)||(i=f):(o=!0,i=f),i}}}function cD(e){return e?typeof e=="function"?lD(e):mh(e,"mergeProps"):()=>aD}function uD(e){e()}function dD(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uD(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Lm={notify(){},get:()=>[]};function ix(e,t){let r,n=Lm,s=0,o=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return o}function d(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=dD())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Lm)}function h(){o||(o=!0,d())}function p(){o&&(o=!1,f())}const v={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return v}var fD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hD=fD(),pD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mD=pD(),gD=()=>hD||mD?w.useLayoutEffect:w.useEffect,xl=gD();function Am(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function du(e,t){if(Am(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Am(e[r[s]],t[r[s]]))return!1;return!0}var vD={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},yD={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},xD={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ax={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bD={[Xj]:xD,[Zj]:ax};function Fm(e){return tD(e)?ax:bD[e.$$typeof]||vD}var wD=Object.defineProperty,_D=Object.getOwnPropertyNames,$m=Object.getOwnPropertySymbols,kD=Object.getOwnPropertyDescriptor,SD=Object.getPrototypeOf,Bm=Object.prototype;function Yd(e,t){if(typeof t!="string"){if(Bm){const o=SD(t);o&&o!==Bm&&Yd(e,o)}let r=_D(t);$m&&(r=r.concat($m(t)));const n=Fm(e),s=Fm(t);for(let o=0;o<r.length;++o){const i=r[o];if(!yD[i]&&!(s&&s[i])&&!(n&&n[i])){const l=kD(t,i);try{wD(e,i,l)}catch{}}}}return e}var fu=Symbol.for("react-redux-context"),hu=typeof globalThis<"u"?globalThis:{};function ND(){if(!w.createContext)return{};const e=hu[fu]??(hu[fu]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var lx=ND(),jD=[null,null];function DD(e,t,r){xl(()=>e(...t),r)}function CD(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function ED(e,t,r,n,s,o,i,l,c,u,d){if(!e)return()=>{};let f=!1,h=null;const p=()=>{if(f||!l.current)return;const x=t.getState();let b,y;try{b=n(x,s.current)}catch(m){y=m,h=m}y||(h=null),b===o.current?i.current||u():(o.current=b,c.current=b,i.current=!0,d())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function PD(e,t){return e===t}function TD(e,t,r,{pure:n,areStatesEqual:s=PD,areOwnPropsEqual:o=du,areStatePropsEqual:i=du,areMergedPropsEqual:l=du,forwardRef:c=!1,context:u=lx}={}){const d=u,f=iD(e),h=oD(t),p=cD(r),v=!!e;return b=>{const y=b.displayName||b.name||"Component",m=`Connect(${y})`,g={shouldHandleStateChanges:v,displayName:m,wrappedComponentName:y,WrappedComponent:b,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function _(j){const[D,N,E]=w.useMemo(()=>{const{reactReduxForwardedRef:Me,...rs}=j;return[j.context,Me,rs]},[j]),M=w.useMemo(()=>{let Me=d;return D!=null&&D.Consumer,Me},[D,d]),L=w.useContext(M),$=!!j.store&&!!j.store.getState&&!!j.store.dispatch,z=!!L&&!!L.store,R=$?j.store:L.store,I=z?L.getServerState:R.getState,H=w.useMemo(()=>nD(R.dispatch,g),[R]),[C,T]=w.useMemo(()=>{if(!v)return jD;const Me=ix(R,$?void 0:L.subscription),rs=Me.notifyNestedSubs.bind(Me);return[Me,rs]},[R,$,L]),O=w.useMemo(()=>$?L:{...L,subscription:C},[$,L,C]),F=w.useRef(void 0),G=w.useRef(E),ae=w.useRef(void 0),_e=w.useRef(!1),Dt=w.useRef(!1),Ke=w.useRef(void 0);xl(()=>(Dt.current=!0,()=>{Dt.current=!1}),[]);const A=w.useMemo(()=>()=>ae.current&&E===G.current?ae.current:H(R.getState(),E),[R,E]),re=w.useMemo(()=>rs=>C?ED(v,R,C,H,G,F,_e,Dt,ae,T,rs):()=>{},[C]);DD(CD,[G,F,_e,E,ae,T]);let J;try{J=w.useSyncExternalStore(re,A,I?()=>H(I(),E):A)}catch(Me){throw Ke.current&&(Me.message+=`
The error may be correlated with this previous error:
${Ke.current.stack}

`),Me}xl(()=>{Ke.current=void 0,ae.current=void 0,F.current=J});const Ie=w.useMemo(()=>w.createElement(b,{...J,ref:N}),[N,b,J]);return w.useMemo(()=>v?w.createElement(M.Provider,{value:O},Ie):Ie,[M,Ie,O])}const S=w.memo(_);if(S.WrappedComponent=b,S.displayName=_.displayName=m,c){const D=w.forwardRef(function(E,M){return w.createElement(S,{...E,reactReduxForwardedRef:M})});return D.displayName=m,D.WrappedComponent=b,Yd(D,b)}return Yd(S,b)}}var cx=TD;function RD(e){const{children:t,context:r,serverState:n,store:s}=e,o=w.useMemo(()=>{const c=ix(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),i=w.useMemo(()=>s.getState(),[s]);xl(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,i]);const l=r||lx;return w.createElement(l.Provider,{value:o},t)}var OD=RD,ID=!0,pu="Invariant failed";function MD(e,t){if(!e){if(ID)throw new Error(pu);var r=typeof t=="function"?t():t,n=r?"".concat(pu,": ").concat(r):pu;throw new Error(n)}}var Gt=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,i=n-o,l=s-r,c={top:r,right:n,bottom:s,left:o,width:i,height:l,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return c},gh=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Um=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},LD=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},mu={top:0,right:0,bottom:0,left:0},vh=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?mu:n,o=t.border,i=o===void 0?mu:o,l=t.padding,c=l===void 0?mu:l,u=Gt(gh(r,s)),d=Gt(Um(r,i)),f=Gt(Um(d,c));return{marginBox:u,borderBox:Gt(r),paddingBox:d,contentBox:f,margin:s,border:i,padding:c}},Ct=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&MD(!1),s},AD=function(){return{x:window.pageXOffset,y:window.pageYOffset}},bl=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,i=t.padding,l=LD(n,r);return vh({borderBox:l,border:s,margin:o,padding:i})},wl=function(t,r){return r===void 0&&(r=AD()),bl(t,r)},ux=function(t,r){var n={top:Ct(r.marginTop),right:Ct(r.marginRight),bottom:Ct(r.marginBottom),left:Ct(r.marginLeft)},s={top:Ct(r.paddingTop),right:Ct(r.paddingRight),bottom:Ct(r.paddingBottom),left:Ct(r.paddingLeft)},o={top:Ct(r.borderTopWidth),right:Ct(r.borderRightWidth),bottom:Ct(r.borderBottomWidth),left:Ct(r.borderLeftWidth)};return vh({borderBox:t,margin:n,padding:s,border:o})},dx=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return ux(r,n)},FD=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const xi=FD;function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_l.apply(null,arguments)}function fx(e,t){}fx.bind(null,"warn");fx.bind(null,"error");function cn(){}function $D(e,t){return{...e,...t}}function Mt(e,t,r){const n=t.map(s=>{const o=$D(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const BD="Invariant failed";class kl extends Error{}kl.prototype.toString=function(){return this.message};function U(e,t){throw new kl(BD)}class UD extends P.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=cn,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof kl&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Mt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof kl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const WD=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Sl=e=>e+1,HD=e=>`
  You have lifted an item in position ${Sl(e.source.index)}
`,hx=(e,t)=>{const r=e.droppableId===t.droppableId,n=Sl(e.index),s=Sl(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},px=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,zD=e=>{const t=e.destination;if(t)return hx(e.source,t);const r=e.combine;return r?px(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Wm=e=>`
  The item has returned to its starting position
  of ${Sl(e.index)}
`,YD=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Wm(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${hx(e.source,t)}
    `:r?`
      You have dropped the item.
      ${px(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Wm(e.source)}
  `},$a={dragHandleUsageInstructions:WD,onDragStart:HD,onDragUpdate:zD,onDragEnd:YD};function VD(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function mx(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!VD(e[r],t[r]))return!1;return!0}function ne(e,t){const r=w.useState(()=>({inputs:t,result:e()}))[0],n=w.useRef(!0),s=w.useRef(r),i=n.current||!!(t&&s.current.inputs&&mx(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{n.current=!1,s.current=i},[i]),i.result}function Q(e,t){return ne(()=>e,t)}const We={x:0,y:0},Ye=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),xt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),un=(e,t)=>e.x===t.x&&e.y===t.y,co=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Gn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},bi=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Hm=(e,t)=>Math.min(...t.map(r=>bi(e,r))),gx=e=>t=>({x:e(t.x),y:e(t.y)});var qD=(e,t)=>{const r=Gt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const $i=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),zm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],GD={top:0,right:0,bottom:0,left:0},KD=(e,t)=>t?$i(e,t.scroll.diff.displacement):e,QD=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,JD=(e,t)=>t&&t.shouldClipSubject?qD(t.pageMarginBox,e):Gt(e);var Hs=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=KD(e.marginBox,n),o=QD(s,r,t),i=JD(o,n);return{page:e,withPlaceholder:t,active:i}},yh=(e,t)=>{e.frame||U();const r=e.frame,n=xt(t,r.scroll.initial),s=co(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},i=Hs({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function Ue(e,t=mx){let r=null;function n(...s){if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}const vx=Ue(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),yx=Ue(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),hc=Ue(e=>Object.values(e)),XD=Ue(e=>Object.values(e));var uo=Ue((e,t)=>XD(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function xh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function pc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var mc=Ue((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),ZD=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!xh(s))return null;function i(p){const v={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...s,at:v}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const u=mc(t,n);if(!c){if(!u.length)return null;const p=u[u.length-1];return i(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===c);d===-1&&U();const f=d-1;if(f<0)return null;const h=u[f];return i(h.descriptor.id)},fo=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const xx={point:We,value:0},wi={invisible:{},visible:{},all:[]},eC={displaced:wi,displacedBy:xx,at:null};var At=(e,t)=>r=>e<=r&&r<=t,bx=e=>{const t=At(e.top,e.bottom),r=At(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return c&&u?!0:c&&i||u&&o}},tC=e=>{const t=At(e.top,e.bottom),r=At(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const bh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var rC=e=>t=>{const r=At(t.top,t.bottom),n=At(t.left,t.right);return s=>e===bh?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const nC=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:We;return $i(e,r)},sC=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,oC=(e,t,r)=>r(t)(e),wh=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?nC(e,t):e;return sC(o,t,s)&&oC(o,r,s)},iC=e=>wh({...e,isVisibleThroughFrameFn:bx}),_x=e=>wh({...e,isVisibleThroughFrameFn:tC}),aC=e=>wh({...e,isVisibleThroughFrameFn:rC(e.destination.axis)}),lC=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function cC(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Gt(gh(r,n))}function _i({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(l,c){const u=cC(c,r),d=c.descriptor.id;if(l.all.push(d),!iC({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const h=lC(d,o,s),p={draggableId:d,shouldAnimate:h};return l.visible[d]=p,l},{all:[],visible:{},invisible:{}})}function uC(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Ym({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=uC(e,{inHomeList:t});return{displaced:wi,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Nl({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:i,forceShouldAnimate:l}){const c=fo(e,r);if(i==null)return Ym({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const u=t.find(v=>v.descriptor.index===i);if(!u)return Ym({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const d=mc(e,t),f=t.indexOf(u),h=d.slice(f);return{displaced:_i({afterDragging:h,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function mn(e,t){return!!t.effected[e]}var dC=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,l=r[o].descriptor.index;return mn(o,s)?e?l:l-1:e?l+1:l},fC=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},hC=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const u=i.at;if(u||U(),u.type==="REORDER"){const f=fC({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:o});return f==null?null:Nl({draggable:r,insideDestination:o,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:f})}const d=dC({isMovingForward:e,destination:s,displaced:i.displaced,draggables:n,combine:u.combine,afterCritical:c});return d==null?null:Nl({draggable:r,insideDestination:o,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:d})},pC=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return mn(r,t)?s?We:co(n.point):s?n.point:We},mC=({afterCritical:e,impact:t,draggables:r})=>{const n=pc(t);n||U();const s=n.draggableId,o=r[s].page.borderBox.center,i=pC({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return Ye(o,i)};const kx=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,gC=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,_h=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Vm=({axis:e,moveRelativeTo:t,isMoving:r})=>Gn(e.line,t.marginBox[e.end]+kx(e,r),_h(e,t.marginBox,r)),qm=({axis:e,moveRelativeTo:t,isMoving:r})=>Gn(e.line,t.marginBox[e.start]-gC(e,r),_h(e,t.marginBox,r)),vC=({axis:e,moveInto:t,isMoving:r})=>Gn(e.line,t.contentBox[e.start]+kx(e,r),_h(e,t.contentBox,r));var yC=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=uo(n.descriptor.id,r),i=t.page,l=n.axis;if(!o.length)return vC({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const h=r[d];if(mn(d,s))return qm({axis:l,moveRelativeTo:h.page,isMoving:i});const p=bl(h.page,u.point);return qm({axis:l,moveRelativeTo:p,isMoving:i})}const f=o[o.length-1];if(f.descriptor.id===t.descriptor.id)return i.borderBox.center;if(mn(f.descriptor.id,s)){const h=bl(f.page,co(s.displacedBy.point));return Vm({axis:l,moveRelativeTo:h,isMoving:i})}return Vm({axis:l,moveRelativeTo:f.page,isMoving:i})},Vd=(e,t)=>{const r=e.frame;return r?Ye(t,r.scroll.diff.displacement):t};const xC=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?yC({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):mC({impact:e,draggables:n,afterCritical:s})};var gc=e=>{const t=xC(e),r=e.droppable;return r?Vd(r,t):t},Sx=(e,t)=>{const r=xt(t,e.scroll.initial),n=co(r);return{frame:Gt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Gm(e,t){return e.map(r=>t[r])}function bC(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var wC=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=Sx(t,Ye(t.scroll.current,s)),i=r.frame?yh(r,Ye(r.frame.scroll.current,s)):r,l=e.displaced,c=_i({afterDragging:Gm(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=_i({afterDragging:Gm(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},f={},h=[l,c,u];return l.all.forEach(v=>{const x=bC(v,h);if(x){f[v]=x;return}d[v]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:f}}},_C=(e,t)=>Ye(e.scroll.diff.displacement,t),kh=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=_C(r,e),s=xt(n,t.page.borderBox.center);return Ye(t.client.borderBox.center,s)},Nx=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const i=xt(r,e.page.borderBox.center),c={target:$i(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:n};return o?aC(c):_x(c)},kC=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const u=uo(r.descriptor.id,n),d=fo(t,r),f=ZD({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||hC({isMovingForward:e,isInHomeList:d,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!f)return null;const h=gc({impact:f,draggable:t,droppable:r,draggables:n,afterCritical:c});if(Nx({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:kh({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:f,scrollJumpRequest:null};const v=xt(h,i),x=wC({impact:f,viewport:o,destination:r,draggables:n,maxScrollChange:v});return{clientSelection:l,impact:x,scrollJumpRequest:v}};const rt=e=>{const t=e.subject.active;return t||U(),t};var SC=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,l=At(o[i.start],o[i.end]),c=hc(n).filter(d=>d!==r).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>bx(s.frame)(rt(d))).filter(d=>{const f=rt(d);return e?o[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<o[i.crossAxisStart]}).filter(d=>{const f=rt(d),h=At(f[i.start],f[i.end]);return l(f[i.start])||l(f[i.end])||h(o[i.start])||h(o[i.end])}).sort((d,f)=>{const h=rt(d)[i.crossAxisStart],p=rt(f)[i.crossAxisStart];return e?h-p:p-h}).filter((d,f,h)=>rt(d)[i.crossAxisStart]===rt(h[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>At(rt(d)[i.start],rt(d)[i.end])(t[i.line]));return u.length===1?u[0]:u.length>1?u.sort((d,f)=>rt(d)[i.start]-rt(f)[i.start])[0]:c.sort((d,f)=>{const h=Hm(t,zm(rt(d))),p=Hm(t,zm(rt(f)));return h!==p?h-p:rt(d)[i.start]-rt(f)[i.start]})[0]};const Km=(e,t)=>{const r=e.page.borderBox.center;return mn(e.descriptor.id,t)?xt(r,t.displacedBy.point):r},NC=(e,t)=>{const r=e.page.borderBox;return mn(e.descriptor.id,t)?$i(r,co(t.displacedBy.point)):r};var jC=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(i=>_x({target:NC(i,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=bi(e,Vd(r,Km(i,s))),u=bi(e,Vd(r,Km(l,s)));return c<u?-1:u<c?1:i.descriptor.index-l.descriptor.index})[0]||null,Bi=Ue(function(t,r){const n=r[t.line];return{value:n,point:Gn(t.line,n)}});const DC=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Gn(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],c=uo(e.descriptor.id,r).reduce((u,d)=>u+d.client.marginBox[n.size],0)+t[n.line]-s;return c<=0?null:Gn(n.line,c)},jx=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Dx=(e,t,r)=>{const n=e.frame;fo(t,e)&&U(),e.subject.withPlaceholder&&U();const s=Bi(e.axis,t.displaceBy).point,o=DC(e,s,r),i={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const d=Hs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=o?Ye(n.scroll.max,o):n.scroll.max,c=jx(n,l),u=Hs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},CC=e=>{const t=e.subject.withPlaceholder;t||U();const r=e.frame;if(!r){const i=Hs({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||U();const s=jx(r,n),o=Hs({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var EC=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const f={displaced:wi,displacedBy:xx,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=gc({impact:f,draggable:n,droppable:o,draggables:s,afterCritical:l}),p=fo(n,o)?o:Dx(o,n,s);return Nx({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],u=(()=>{const f=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?f:f+1})(),d=Bi(o.axis,n.displaceBy);return Nl({draggable:n,insideDestination:r,destination:o,viewport:i,displacedBy:d,last:wi,index:u})},PC=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:i,afterCritical:l})=>{const c=SC({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:i});if(!c)return null;const u=uo(c.descriptor.id,s),d=jC({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:u,afterCritical:l}),f=EC({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:i,afterCritical:l});if(!f)return null;const h=gc({impact:f,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:kh({pageBorderBoxCenter:h,draggable:r,viewport:i}),impact:f,scrollJumpRequest:null}},wt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const TC=(e,t)=>{const r=wt(e);return r?t[r]:null};var RC=({state:e,type:t})=>{const r=TC(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:f,droppables:h}=e.dimensions;return l?kC({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):PC({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:f,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function En(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Cx(e){const t=At(e.top,e.bottom),r=At(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function OC(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function IC({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const i=o.axis,l=Gn(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:bi(n,l)}}).sort((o,i)=>i.distance-o.distance);return s[0]?s[0].id:null}function MC({pageBorderBox:e,draggable:t,droppables:r}){const n=hc(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!OC(e,o))return!1;if(Cx(o)(e.center))return!0;const i=s.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],u=e[i.crossAxisEnd],d=At(o[i.crossAxisStart],o[i.crossAxisEnd]),f=d(c),h=d(u);return!f&&!h?!0:f?c<l:u>l});return n.length?n.length===1?n[0].descriptor.id:IC({pageBorderBox:e,draggable:t,candidates:n}):null}const Ex=(e,t)=>Gt($i(e,t));var LC=(e,t)=>{const r=e.frame;return r?Ex(t,r.scroll.diff.value):t};function Px({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function AC({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var FC=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:i})=>{const l=r.axis,c=Bi(r.axis,t.displaceBy),u=c.value,d=e[l.start],f=e[l.end],p=mc(t,n).find(x=>{const b=x.descriptor.id,y=x.page.borderBox.center[l.line],m=mn(b,i),g=Px({displaced:s,id:b});return m?g?f<=y:d<y-u:g?f<=y+u:d<y})||null,v=AC({draggable:t,closest:p,inHomeList:fo(t,r)});return Nl({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:c,index:v})};const $C=4;var BC=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=Bi(n.axis,e.displaceBy),c=l.value,u=t[i.start],d=t[i.end],h=mc(e,s).find(v=>{const x=v.descriptor.id,b=v.page.borderBox,m=b[i.size]/$C,g=mn(x,o),_=Px({displaced:r.displaced,id:x});return g?_?d>b[i.start]+m&&d<b[i.end]-m:u>b[i.start]-c+m&&u<b[i.end]-c-m:_?d>b[i.start]+c+m&&d<b[i.end]+c-m:u>b[i.start]+m&&u<b[i.end]-m});return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Tx=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:i})=>{const l=Ex(t.page.borderBox,e),c=MC({pageBorderBox:l,draggable:t,droppables:n});if(!c)return eC;const u=n[c],d=uo(u.descriptor.id,r),f=LC(u,l);return BC({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:i})||FC({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:o,afterCritical:i})},Sh=(e,t)=>({...e,[t.descriptor.id]:t});const UC=({previousImpact:e,impact:t,droppables:r})=>{const n=wt(e),s=wt(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const i=CC(o);return Sh(r,i)};var WC=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=UC({previousImpact:n,impact:s,droppables:r}),i=wt(s);if(!i)return o;const l=r[i];if(fo(e,l)||l.subject.withPlaceholder)return o;const c=Dx(l,e,t);return Sh(o,c)},Jo=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,u=xt(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:Ye(e.initial.client.borderBoxCenter,u)},f={selection:Ye(d.selection,i.scroll.current),borderBoxCenter:Ye(d.borderBoxCenter,i.scroll.current),offset:Ye(d.offset,i.scroll.diff.value)},h={client:d,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:h};const p=l.draggables[e.critical.draggable.id],v=s||Tx({pageOffset:f.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=WC({draggable:p,impact:v,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:h,dimensions:{draggables:l.draggables,droppables:x},impact:v,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function HC(e,t){return e.map(r=>t[r])}var Rx=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,i=HC(o.all,r),l=_i({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:l}},Ox=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const i=gc({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return kh({pageBorderBoxCenter:i,draggable:t,viewport:s})},Ix=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&U();const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],u=wt(n);u||U();const d=l[u],f=Rx({impact:n,viewport:s,destination:d,draggables:i}),h=Ox({impact:f,draggable:c,droppable:d,draggables:i,viewport:s,afterCritical:e.afterCritical});return Jo({impact:f,clientSelection:h,state:e,dimensions:o,viewport:s})},zC=e=>({index:e.index,droppableId:e.droppableId}),Mx=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=Bi(t.axis,e.displaceBy),o=uo(t.descriptor.id,r),i=o.indexOf(e);i===-1&&U();const l=o.slice(i+1),c=l.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:_i({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:zC(e.descriptor)}},afterCritical:u}},YC=(e,t)=>({draggables:e.draggables,droppables:Sh(e.droppables,t)}),VC=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=bl(e.client,t),s=wl(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},qC=e=>{const t=e.frame;return t||U(),t},GC=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,i=t[o],c=qC(i).scroll.diff.value,u=Ye(n,c);return VC({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},KC=({state:e,published:t})=>{const r=t.modified.map(y=>{const m=e.dimensions.droppables[y.droppableId];return yh(m,y.scroll)}),n={...e.dimensions.droppables,...vx(r)},s=yx(GC({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(y=>{delete o[y]});const i={droppables:n,draggables:o},l=wt(e.impact),c=l?i.droppables[l]:null,u=i.draggables[e.critical.draggable.id],d=i.droppables[e.critical.droppable.id],{impact:f,afterCritical:h}=Mx({draggable:u,home:d,draggables:o,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:f,v=Tx({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:h}),x={...e,phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:i,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const qd=e=>e.movementMode==="SNAP",gu=(e,t,r)=>{const n=YC(e.dimensions,t);return!qd(e)||r?Jo({state:e,dimensions:n}):Ix({state:e,dimensions:n})};function vu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Qm={phase:"IDLE",completed:null,shouldFlush:!1};var QC=(e=Qm,t)=>{if(t.type==="FLUSH")return{...Qm,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&U();const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:i}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:n,borderBoxCenter:l.client.borderBox.center,offset:We},d={client:u,page:{selection:Ye(u.selection,s.scroll.initial),borderBoxCenter:Ye(u.selection,s.scroll.initial),offset:Ye(u.selection,s.scroll.diff.value)}},f=hc(o.droppables).every(x=>!x.isFixedOnPage),{impact:h,afterCritical:p}=Mx({draggable:l,home:c,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:d,current:d,isWindowScrollAllowed:f,impact:h,afterCritical:p,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&U(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||U(),KC({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;En(e)||U();const{client:r}=t.payload;return un(r,e.current.client.selection)?e:Jo({state:e,clientSelection:r,impact:qd(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return vu(e);En(e)||U();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=yh(s,n);return gu(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;En(e)||U();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||U(),s.isEnabled===n&&U();const o={...s,isEnabled:n};return gu(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;En(e)||U();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||U(),s.isCombineEnabled===n&&U();const o={...s,isCombineEnabled:n};return gu(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;En(e)||U(),e.isWindowScrollAllowed||U();const r=t.payload.newScroll;if(un(e.viewport.scroll.current,r))return vu(e);const n=Sx(e.viewport,r);return qd(e)?Ix({state:e,viewport:n}):Jo({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!En(e))return e;const r=t.payload.maxScroll;if(un(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&U();const r=RC({state:e,type:t.type});return r?Jo({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&U(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||U(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function ue(e,t){return e instanceof Object&&"type"in e&&e.type===t}const JC=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),XC=e=>({type:"LIFT",payload:e}),ZC=e=>({type:"INITIAL_PUBLISH",payload:e}),e2=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),t2=()=>({type:"COLLECTION_STARTING",payload:null}),r2=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),n2=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),s2=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Lx=e=>({type:"MOVE",payload:e}),o2=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),i2=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),a2=()=>({type:"MOVE_UP",payload:null}),l2=()=>({type:"MOVE_DOWN",payload:null}),c2=()=>({type:"MOVE_RIGHT",payload:null}),u2=()=>({type:"MOVE_LEFT",payload:null}),Nh=()=>({type:"FLUSH",payload:null}),d2=e=>({type:"DROP_ANIMATE",payload:e}),jh=e=>({type:"DROP_COMPLETE",payload:e}),Ax=e=>({type:"DROP",payload:e}),f2=e=>({type:"DROP_PENDING",payload:e}),Fx=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var h2=e=>({getState:t,dispatch:r})=>n=>s=>{if(!ue(s,"LIFT")){n(s);return}const{id:o,clientSelection:i,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&r(jh({completed:c.completed})),t().phase!=="IDLE"&&U(),r(Nh()),r(JC({draggableId:o,movementMode:l}));const d={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:f,dimensions:h,viewport:p}=e.startPublishing(d);r(ZC({critical:f,dimensions:h,clientSelection:i,movementMode:l,viewport:p}))},p2=e=>()=>t=>r=>{ue(r,"INITIAL_PUBLISH")&&e.dragging(),ue(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(ue(r,"FLUSH")||ue(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Dh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ki={opacity:{drop:0,combining:.7},scale:{drop:.75}},$x={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Sn=`${$x.outOfTheWay}s ${Dh.outOfTheWay}`,Xo={fluid:`opacity ${Sn}`,snap:`transform ${Sn}, opacity ${Sn}`,drop:e=>{const t=`${e}s ${Dh.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Sn}`,placeholder:`height ${Sn}, width ${Sn}, margin ${Sn}`},Jm=e=>un(e,We)?void 0:`translate(${e.x}px, ${e.y}px)`,Gd={moveTo:Jm,drop:(e,t)=>{const r=Jm(e);if(r)return t?`${r} scale(${ki.scale.drop})`:r}},{minDropTime:Kd,maxDropTime:Bx}=$x,m2=Bx-Kd,Xm=1500,g2=.6;var v2=({current:e,destination:t,reason:r})=>{const n=bi(e,t);if(n<=0)return Kd;if(n>=Xm)return Bx;const s=n/Xm,o=Kd+m2*s,i=r==="CANCEL"?o*g2:o;return Number(i.toFixed(2))},y2=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:i}=r,l=wt(e),c=l?i[l]:null,u=i[t.descriptor.droppableId],d=Ox({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:c||u,viewport:n});return xt(d,t.client.borderBox.center)},x2=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:Rx({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:wi},didDropInsideDroppable:!0};const b2=({getState:e,dispatch:t})=>r=>n=>{if(!ue(n,"DROP")){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t(f2({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&U(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||U();const l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=x2({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f?xh(d):null,p=f?pc(d):null,v={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:v,reason:o,mode:s.movementMode,destination:h,combine:p},b=y2({impact:d,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:d};if(!(!un(s.current.client.offset,b)||!!x.combine)){t(jh({completed:y}));return}const g=v2({current:s.current.client.offset,destination:b,reason:o});t(d2({newHomeClientOffset:b,dropDuration:g,completed:y}))};var Ux=()=>({x:window.pageXOffset,y:window.pageYOffset});function w2(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function _2({onWindowScroll:e}){function t(){e(Ux())}const r=xi(t),n=w2(r);let s=cn;function o(){return s!==cn}function i(){o()&&U(),s=Mt(window,[n])}function l(){o()||U(),r.cancel(),s(),s=cn}return{start:i,stop:l,isActive:o}}const k2=e=>ue(e,"DROP_COMPLETE")||ue(e,"DROP_ANIMATE")||ue(e,"FLUSH"),S2=e=>{const t=_2({onWindowScroll:r=>{e.dispatch(o2({newScroll:r}))}});return r=>n=>{!t.isActive()&&ue(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&k2(n)&&t.stop(),r(n)}};var N2=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},j2=()=>{const e=[],t=s=>{const o=e.findIndex(l=>l.timerId===s);o===-1&&U();const[i]=e.splice(o,1);i.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const D2=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,C2=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,E2=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},So=(e,t)=>{t()},fa=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function yu(e,t,r,n){if(!e){r(n(t));return}const s=N2(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var P2=(e,t)=>{const r=j2();let n=null;const s=(f,h)=>{n&&U(),So("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:h})})},o=(f,h)=>{n&&U(),So("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(fa(f,h))})},i=(f,h)=>{n&&U();const p=fa(f,h);n={mode:h,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{So("onDragStart",()=>yu(e().onDragStart,p,t,$a.onDragStart))})},l=(f,h)=>{const p=xh(h),v=pc(h);n||U();const x=!E2(f,n.lastCritical);x&&(n.lastCritical=f);const b=!D2(n.lastLocation,p);b&&(n.lastLocation=p);const y=!C2(n.lastCombine,v);if(y&&(n.lastCombine=v),!x&&!b&&!y)return;const m={...fa(f,n.mode),combine:v,destination:p};r.add(()=>{So("onDragUpdate",()=>yu(e().onDragUpdate,m,t,$a.onDragUpdate))})},c=()=>{n||U(),r.flush()},u=f=>{n||U(),n=null,So("onDragEnd",()=>yu(e().onDragEnd,f,t,$a.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:i,update:l,flush:c,drop:u,abort:()=>{if(!n)return;const f={...fa(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(f)}}},T2=(e,t)=>{const r=P2(e,t);return n=>s=>o=>{if(ue(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(ue(o,"INITIAL_PUBLISH")){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),s(o),r.start(l,o.payload.movementMode);return}if(ue(o,"DROP_COMPLETE")){const l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),ue(o,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const R2=e=>t=>r=>{if(!ue(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&U(),e.dispatch(jh({completed:n.completed}))},O2=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((ue(o,"FLUSH")||ue(o,"DROP_COMPLETE")||ue(o,"DROP_ANIMATION_FINISHED"))&&n(),s(o),!ue(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Fx())}};r=requestAnimationFrame(()=>{r=null,t=Mt(window,[i])})}};var I2=e=>()=>t=>r=>{(ue(r,"DROP_COMPLETE")||ue(r,"FLUSH")||ue(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},M2=e=>{let t=!1;return()=>r=>n=>{if(ue(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(ue(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(ue(n,"DROP_COMPLETE")){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const L2=e=>ue(e,"DROP_COMPLETE")||ue(e,"DROP_ANIMATE")||ue(e,"FLUSH");var A2=e=>t=>r=>n=>{if(L2(n)){e.stop(),r(n);return}if(ue(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();s.phase!=="DRAGGING"&&U(),e.start(s);return}r(n),e.scroll(t.getState())};const F2=e=>t=>r=>{if(t(r),!ue(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Ax({reason:n.reason})))},$2=nx;var B2=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>rx(QC,$2(Rj(p2(r),I2(e),h2(e),b2,R2,O2,F2,A2(o),S2,M2(t),T2(n,s))));const xu=()=>({additions:{},removals:{},modified:{}});function U2({registry:e,callbacks:t}){let r=xu(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:u,modified:d}=r,f=Object.keys(c).map(v=>e.draggable.getById(v).getDimension(We)).sort((v,x)=>v.descriptor.index-x.descriptor.index),h=Object.keys(d).map(v=>{const b=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:b}}),p={additions:f,removals:Object.keys(u),modified:h};r=xu(),t.publish(p)}))};return{add:c=>{const u=c.descriptor.id;r.additions[u]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:c=>{const u=c.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=xu())}}}var Wx=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=xt({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Hx=()=>{const e=document.documentElement;return e||U(),e},zx=()=>{const e=Hx();return Wx({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},W2=()=>{const e=Ux(),t=zx(),r=e.y,n=e.x,s=Hx(),o=s.clientWidth,i=s.clientHeight,l=n+o,c=r+i;return{frame:Gt({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:We,displacement:We}}}},H2=({critical:e,scrollOptions:t,registry:r})=>{const n=W2(),s=n.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),l=r.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:yx(l),droppables:vx(i)},critical:e,viewport:n}};function Zm(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var z2=(e,t)=>{let r=null;const n=U2({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,p)=>{e.droppable.exists(h)||U(),r&&t.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(e.droppable.exists(h)||U(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},i=(h,p)=>{r&&(e.droppable.exists(h)||U(),t.updateDroppableScroll({id:h,newScroll:p}))},l=(h,p)=>{r&&e.droppable.getById(h).callbacks.scroll(p)},c=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||U();const p=r.critical.draggable;h.type==="ADDITION"&&Zm(e,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Zm(e,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:h=>{r&&U();const p=e.draggable.getById(h.draggableId),v=e.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:v.descriptor},b=e.subscribe(u);return r={critical:x,unsubscribe:b},H2({critical:x,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:c}},Yx=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Y2=e=>{window.scrollBy(e.x,e.y)};const V2=Ue(e=>hc(e).filter(t=>!(!t.isEnabled||!t.frame))),q2=(e,t)=>V2(t).find(n=>(n.frame||U(),Cx(n.frame.pageMarginBox)(e)))||null;var G2=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return q2(e,r)};const Si={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var K2=(e,t,r=()=>Si)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},Vx=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},Ch=1,Q2=(e,t,r=()=>Si)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return Ch;const o=1-Vx({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)},J2=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,i=t,l=o,u=Date.now()-i;if(u>=o)return e;if(u<s)return Ch;const d=Vx({startOfRange:s,endOfRange:l,current:u}),f=e*n.ease(d);return Math.ceil(f)},eg=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=Q2(e,t,s);return o===0?0:n?Math.max(J2(o,r,s),Ch):o},tg=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=K2(e,n,o);return t[n.end]<t[n.start]?eg({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*eg({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},X2=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const Z2=gx(e=>e===0?0:e);var qx=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=tg({container:t,distanceToEdges:i,dragStartTime:e,axis:bh,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),c=tg({container:t,distanceToEdges:i,dragStartTime:e,axis:wx,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),u=Z2({x:c,y:l});if(un(u,We))return null;const d=X2({container:t,subject:r,proposedScroll:u});return d?un(d,We)?null:d:null};const eE=gx(e=>e===0?0:e>0?1:-1),Eh=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=Ye(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return un(o,We)?null:o}})(),Gx=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=eE(r),o=Eh({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Ph=(e,t)=>Gx({current:e.scroll.current,max:e.scroll.max,change:t}),tE=(e,t)=>{if(!Ph(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return Eh({current:n,max:r,change:t})},Th=(e,t)=>{const r=e.frame;return r?Gx({current:r.scroll.current,max:r.scroll.max,change:t}):!1},rE=(e,t)=>{const r=e.frame;return!r||!Th(e,t)?null:Eh({current:r.scroll.current,max:r.scroll.max,change:t})};var nE=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=qx({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return i&&Ph(e,i)?i:null},sE=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=qx({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&Th(e,l)?l:null},rg=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,h=nE({dragStartTime:t,viewport:f,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const u=G2({center:i,destination:wt(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=sE({dragStartTime:t,droppable:u,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});d&&s(u.descriptor.id,d)},oE=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>Si})=>{const n=xi(e),s=xi(t);let o=null;const i=u=>{o||U();const{shouldUseTimeDampening:d,dragStartTime:f}=o;rg({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:r})};return{start:u=>{o&&U();const d=Date.now();let f=!1;const h=()=>{f=!0};rg({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:d,shouldUseTimeDampening:f},f&&i(u)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:i}},iE=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const u=Ye(l.current.client.selection,c);e({client:u})},s=(l,c)=>{if(!Th(l,c))return c;const u=rE(l,c);if(!u)return t(l.descriptor.id,c),null;const d=xt(c,u);return t(l.descriptor.id,d),xt(c,d)},o=(l,c,u)=>{if(!l||!Ph(c,u))return u;const d=tE(c,u);if(!d)return r(u),null;const f=xt(u,d);return r(f),xt(u,f)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=wt(l.impact);u||U();const d=s(l.dimensions.droppables[u],c);if(!d)return;const f=l.viewport,h=o(l.isWindowScrollAllowed,f,d);h&&n(l,h)}},aE=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=oE({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=iE({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:s.start,stop:s.stop}};const zs="data-rfd",Ys=(()=>{const e=`${zs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Qd=(()=>{const e=`${zs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),lE=(()=>{const e=`${zs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ng={contextId:`${zs}-scroll-container-context-id`},cE=e=>t=>`[${t}="${e}"]`,No=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),uE="pointer-events: none;";var dE=e=>{const t=cE(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ys.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:uE,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${Xo.outOfTheWay};
    `;return{selector:t(Qd.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(lE.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:No(i,"always"),resting:No(i,"resting"),dragging:No(i,"dragging"),dropAnimating:No(i,"dropAnimating"),userCancel:No(i,"userCancel")}};const _t=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,bu=()=>{const e=document.querySelector("head");return e||U(),e},sg=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function fE(e,t){const r=ne(()=>dE(e),[e]),n=w.useRef(null),s=w.useRef(null),o=Q(Ue(f=>{const h=s.current;h||U(),h.textContent=f}),[]),i=Q(f=>{const h=n.current;h||U(),h.textContent=f},[]);_t(()=>{!n.current&&!s.current||U();const f=sg(t),h=sg(t);return n.current=f,s.current=h,f.setAttribute(`${zs}-always`,e),h.setAttribute(`${zs}-dynamic`,e),bu().appendChild(f),bu().appendChild(h),i(r.always),o(r.resting),()=>{const p=v=>{const x=v.current;x||U(),bu().removeChild(x),v.current=null};p(n),p(s)}},[t,i,o,r.always,r.resting,e]);const l=Q(()=>o(r.dragging),[o,r.dragging]),c=Q(f=>{if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),u=Q(()=>{s.current&&o(r.resting)},[o,r.resting]);return ne(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function Kx(e,t){return Array.from(e.querySelectorAll(t))}var Qx=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function vc(e){return e instanceof Qx(e).HTMLElement}function hE(e,t){const r=`[${Ys.contextId}="${e}"]`,n=Kx(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute(Ys.draggableId)===t);return!s||!vc(s)?null:s}function pE(e){const t=w.useRef({}),r=w.useRef(null),n=w.useRef(null),s=w.useRef(!1),o=Q(function(h,p){const v={id:h,focus:p};return t.current[h]=v,function(){const b=t.current;b[h]!==v&&delete b[h]}},[]),i=Q(function(h){const p=hE(e,h);p&&p!==document.activeElement&&p.focus()},[e]),l=Q(function(h,p){r.current===h&&(r.current=p)},[]),c=Q(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&i(h)}))},[i]),u=Q(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(Ys.draggableId)===h&&(r.current=h)},[]);return _t(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),ne(()=>({register:o,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,u,c,l])}function mE(){const e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function n(f){t.length&&t.forEach(h=>h(f))}function s(f){return e.draggables[f]||null}function o(f){const h=s(f);return h||U(),h}const i={register:f=>{e.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:(f,h)=>{const p=e.draggables[h.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const h=f.descriptor.id,p=s(h);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[h],e.droppables[f.descriptor.droppableId]&&n({type:"REMOVAL",value:f}))},getById:o,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(e.draggables).filter(h=>h.descriptor.type===f)};function l(f){return e.droppables[f]||null}function c(f){const h=l(f);return h||U(),h}const u={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const h=l(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete e.droppables[f.descriptor.id]},getById:c,findById:l,exists:f=>!!l(f),getAllByType:f=>Object.values(e.droppables).filter(h=>h.descriptor.type===f)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:d}}function gE(){const e=ne(mE,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var Rh=P.createContext(null),jl=()=>{const e=document.body;return e||U(),e};const vE={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},yE=e=>`rfd-announcement-${e}`;function xE(e){const t=ne(()=>yE(e),[e]),r=w.useRef(null);return w.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),_l(o.style,vE),jl().appendChild(o),function(){setTimeout(function(){const c=jl();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),Q(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}const bE={separator:"::"};function Oh(e,t=bE){const r=P.useId();return ne(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function wE({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function _E({contextId:e,text:t}){const r=Oh("hidden-text",{separator:"-"}),n=ne(()=>wE({contextId:e,uniqueId:r}),[r,e]);return w.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",jl().appendChild(o),function(){const l=jl();l.contains(o)&&l.removeChild(o)}},[n,t]),n}var yc=P.createContext(null);function Jx(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function kE(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&U();const l={abandon:i};return e=l,l}function s(){e||U(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function Ni(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const SE=9,NE=13,Ih=27,Xx=32,jE=33,DE=34,CE=35,EE=36,PE=37,TE=38,RE=39,OE=40,IE={[NE]:!0,[SE]:!0};var Zx=e=>{IE[e.keyCode]&&e.preventDefault()};const xc=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),eb=0,og=5;function ME(e,t){return Math.abs(t.x-e.x)>=og||Math.abs(t.y-e.y)>=og}const ig={type:"IDLE"};function LE({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:i,clientY:l}=s;if(o!==eb)return;const c={x:i,y:l},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&U();const d=u.point;if(!ME(d,c))return;s.preventDefault();const f=u.actions.fluidLift(c);n({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===Ih){s.preventDefault(),e();return}Zx(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&U(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:xc,fn:e}]}function AE(e){const t=w.useRef(ig),r=w.useRef(cn),n=ne(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==eb||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.tryGetLock(h,i,{sourceEvent:f});if(!p)return;f.preventDefault();const v={x:f.clientX,y:f.clientY};r.current(),u(p,v)}}),[e]),s=ne(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=e.findClosestDraggableId(d);if(!f)return;const h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&d.preventDefault())}}),[e]),o=Q(function(){const f={passive:!1,capture:!0};r.current=Mt(window,[s,n],f)},[s,n]),i=Q(()=>{t.current.type!=="IDLE"&&(t.current=ig,r.current(),o())},[o]),l=Q(()=>{const d=t.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),c=Q(function(){const f={capture:!0,passive:!1},h=LE({cancel:l,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=Mt(window,h,f)},[l,i]),u=Q(function(f,h){t.current.type!=="IDLE"&&U(),t.current={type:"PENDING",point:h,actions:f},c()},[c]);_t(function(){return o(),function(){r.current()}},[o])}function FE(){}const $E={[DE]:!0,[jE]:!0,[EE]:!0,[CE]:!0};function BE(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Ih){s.preventDefault(),r();return}if(s.keyCode===Xx){s.preventDefault(),n();return}if(s.keyCode===OE){s.preventDefault(),e.moveDown();return}if(s.keyCode===TE){s.preventDefault(),e.moveUp();return}if(s.keyCode===RE){s.preventDefault(),e.moveRight();return}if(s.keyCode===PE){s.preventDefault(),e.moveLeft();return}if($E[s.keyCode]){s.preventDefault();return}Zx(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:xc,fn:r}]}function UE(e){const t=w.useRef(FE),r=ne(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Xx)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,d,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||U(),c=!1,t.current(),n()}t.current=Mt(window,BE(u,d),{capture:!0,passive:!1})}}),[e]),n=Q(function(){const o={passive:!1,capture:!0};t.current=Mt(window,[r],o)},[r]);_t(function(){return n(),function(){t.current()}},[n])}const wu={type:"IDLE"},WE=120,HE=.15;function zE({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Ih&&r.preventDefault(),e()}},{eventName:xc,fn:e}]}function YE({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:i}=n.touches[0],l={x:o,y:i};n.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&U();const o=n.touches[0];if(!o||!(o.force>=HE))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:xc,fn:e}]}function VE(e){const t=w.useRef(wu),r=w.useRef(cn),n=Q(function(){return t.current},[]),s=Q(function(p){t.current=p},[]),o=ne(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const v=e.findClosestDraggableId(p);if(!v)return;const x=e.tryGetLock(v,l,{sourceEvent:p});if(!x)return;const b=p.touches[0],{clientX:y,clientY:m}=b,g={x:y,y:m};r.current(),f(x,g)}}),[e]),i=Q(function(){const p={capture:!0,passive:!1};r.current=Mt(window,[o],p)},[o]),l=Q(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(wu),r.current(),i())},[i,s]),c=Q(()=>{const h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=Q(function(){const p={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:n},x=Mt(window,YE(v),p),b=Mt(window,zE(v),p);r.current=function(){x(),b()}},[c,n,l]),d=Q(function(){const p=n();p.type!=="PENDING"&&U();const v=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[n,s]),f=Q(function(p,v){n().type!=="IDLE"&&U();const x=setTimeout(d,WE);s({type:"PENDING",point:v,actions:p,longPressTimerId:x}),u()},[u,n,s,d]);_t(function(){return i(),function(){r.current();const v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(wu))}},[n,i,s]),_t(function(){return Mt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const qE=["input","button","textarea","select","option","optgroup","video","audio"];function tb(e,t){if(t==null)return!1;if(qE.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:tb(e,t.parentElement)}function GE(e,t){const r=t.target;return vc(r)?tb(e,r):!1}var KE=e=>Gt(e.getBoundingClientRect()).center;function QE(e){return e instanceof Qx(e).Element}const JE=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function rb(e,t){return e==null?null:e[JE](t)?e:rb(e.parentElement,t)}function XE(e,t){return e.closest?e.closest(t):rb(e,t)}function ZE(e){return`[${Ys.contextId}="${e}"]`}function eP(e,t){const r=t.target;if(!QE(r))return null;const n=ZE(e),s=XE(r,n);return!s||!vc(s)?null:s}function tP(e,t){const r=eP(e,t);return r?r.getAttribute(Ys.draggableId):null}function rP(e,t){const r=`[${Qd.contextId}="${e}"]`,s=Kx(document,r).find(o=>o.getAttribute(Qd.id)===t);return!s||!vc(s)?null:s}function nP(e){e.preventDefault()}function ha({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function nb({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!Yx(t.getState(),n))}function sP({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:i}){if(!nb({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const c=n.draggable.getById(s),u=rP(t,c.descriptor.id);if(!u||i&&!c.options.canDragInteractiveElements&&GE(u,i))return null;const d=e.claim(o||cn);let f="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function p(){return e.isActive(d)}function v(k,S){ha({expected:k,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(S())}const x=v.bind(null,"DRAGGING");function b(k){function S(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(S(),U()),r.dispatch(XC(k.liftActionArgs)),f="DRAGGING";function j(D,N={shouldBlockNextClick:!1}){if(k.cleanup(),N.shouldBlockNextClick){const E=Mt(window,[{eventName:"click",fn:nP,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}S(),r.dispatch(Ax({reason:D}))}return{isActive:()=>ha({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:D=>j("DROP",D),cancel:D=>j("CANCEL",D),...k.actions}}function y(k){const S=xi(D=>{x(()=>Lx({client:D}))});return{...b({liftActionArgs:{id:s,clientSelection:k,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function m(){const k={moveUp:()=>x(a2),moveRight:()=>x(c2),moveDown:()=>x(l2),moveLeft:()=>x(u2)};return b({liftActionArgs:{id:s,clientSelection:KE(u),movementMode:"SNAP"},cleanup:cn,actions:k})}function g(){ha({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>ha({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:y,snapLift:m,abort:g}}const oP=[AE,UE,VE];function iP({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?oP:[],...n||[]],i=w.useState(()=>kE())[0],l=Q(function(b,y){Ni(b)&&!Ni(y)&&i.tryAbandon()},[i]);_t(function(){let b=t.getState();return t.subscribe(()=>{const m=t.getState();l(b,m),b=m})},[i,t,l]),_t(()=>i.tryAbandon,[i.tryAbandon]);const c=Q(x=>nb({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),u=Q((x,b,y)=>sP({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,i,r,t]),d=Q(x=>tP(e,x),[e]),f=Q(x=>{const b=r.draggable.findById(x);return b?b.options:null},[r.draggable]),h=Q(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Nh()))},[i,t]),p=Q(()=>i.isClaimed(),[i]),v=ne(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:p}),[c,u,d,f,h,p]);for(let x=0;x<o.length;x++)o[x](v)}const aP=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Oi.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),lP=e=>({...Si,...e.autoScrollerOptions,durationDampening:{...Si.durationDampening,...e.autoScrollerOptions}});function jo(e){return e.current||U(),e.current}function cP(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,i=w.useRef(null),l=Jx(e),c=Q(()=>aP(l.current),[l]),u=Q(()=>lP(l.current),[l]),d=xE(t),f=_E({contextId:t,text:o}),h=fE(t,s),p=Q(E=>{jo(i).dispatch(E)},[]),v=ne(()=>Im({publishWhileDragging:e2,updateDroppableScroll:r2,updateDroppableIsEnabled:n2,updateDroppableIsCombineEnabled:s2,collectionStarting:t2},p),[p]),x=gE(),b=ne(()=>z2(x,v),[x,v]),y=ne(()=>aE({scrollWindow:Y2,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...Im({move:Lx},p)}),[b.scrollDroppable,p,u]),m=pE(t),g=ne(()=>B2({announce:d,autoScroller:y,dimensionMarshal:b,focusMarshal:m,getResponders:c,styleMarshal:h}),[d,y,b,m,c,h]);i.current=g;const _=Q(()=>{const E=jo(i);E.getState().phase!=="IDLE"&&E.dispatch(Nh())},[]),k=Q(()=>{const E=jo(i).getState();return E.phase==="DROP_ANIMATING"?!0:E.phase==="IDLE"?!1:E.isDragging},[]),S=ne(()=>({isDragging:k,tryAbort:_}),[k,_]);r(S);const j=Q(E=>Yx(jo(i).getState(),E),[]),D=Q(()=>En(jo(i).getState()),[]),N=ne(()=>({marshal:b,focus:m,contextId:t,canLift:j,isMovementAllowed:D,dragHandleUsageInstructionsId:f,registry:x}),[t,b,f,m,j,D,x]);return iP({contextId:t,store:g,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>_,[_]),P.createElement(yc.Provider,{value:N},P.createElement(OD,{context:Rh,store:g},e.children))}function uP(){return P.useId()}function dP(e){const t=uP(),r=e.dragHandleUsageInstructions||$a.dragHandleUsageInstructions;return P.createElement(UD,null,n=>P.createElement(cP,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const ag={dragging:5e3,dropAnimating:4500},fP=(e,t)=>t?Xo.drop(t.duration):e?Xo.snap:Xo.fluid,hP=(e,t)=>{if(e)return t?ki.opacity.drop:ki.opacity.combining},pP=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function mP(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,i=!!s,l=pP(e),c=!!o,u=c?Gd.drop(n,i):Gd.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:fP(l,o),transform:u,opacity:hP(i,c),zIndex:c?ag.dropAnimating:ag.dragging,pointerEvents:"none"}}function gP(e){return{transform:Gd.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function vP(e){return e.type==="DRAGGING"?mP(e):gP(e)}function yP(e,t,r=We){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=ux(s,n),i=wl(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function xP(e){const t=Oh("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=ne(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),u=Q(p=>{const v=s();return v||U(),yP(r,v,p)},[r,s]),d=ne(()=>({uniqueId:t,descriptor:r,options:c,getDimension:u}),[r,u,c,t]),f=w.useRef(d),h=w.useRef(!0);_t(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),_t(()=>{if(h.current){h.current=!1;return}const p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}var Mh=P.createContext(null);function Dl(e){const t=w.useContext(e);return t||U(),t}function bP(e){e.preventDefault()}const wP=e=>{const t=w.useRef(null),r=Q((S=null)=>{t.current=S},[]),n=Q(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:i}=Dl(yc),{type:l,droppableId:c}=Dl(Mh),u=ne(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:f,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:v,isClone:x,mapped:b,dropAnimationFinished:y}=e;if(!x){const S=ne(()=>({descriptor:u,registry:i,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:p,isEnabled:h}),[u,i,n,v,p,h]);xP(S)}const m=ne(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:bP}:null,[s,o,f,h]),g=Q(S=>{b.type==="DRAGGING"&&b.dropping&&S.propertyName==="transform"&&Oi.flushSync(y)},[y,b]),_=ne(()=>{const S=vP(b),j=b.type==="DRAGGING"&&b.dropping?g:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:S,onTransitionEnd:j},dragHandleProps:m}},[s,m,f,b,g,r]),k=ne(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return P.createElement(P.Fragment,null,d(_,b.snapshot,k))};var sb=(e,t)=>e===t,ob=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const _P=e=>e.combine?e.combine.draggableId:null,kP=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function SP(){const e=Ue((s,o)=>({x:s,y:o})),t=Ue((s,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null})),r=Ue((s,o,i,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:o,offset:s,dimension:i,forceShouldAnimate:d,snapshot:t(o,l,c,u,null)}}));return(s,o)=>{if(Ni(s)){if(s.critical.draggable.id!==o.draggableId)return null;const i=s.current.client.offset,l=s.dimensions.draggables[o.draggableId],c=wt(s.impact),u=kP(s.impact),d=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,l,o.isClone,c,u,d)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=s.dimensions.draggables[o.draggableId],u=i.result,d=u.mode,f=ob(u),h=_P(u),v={duration:s.dropDuration,curve:Dh.drop,moveTo:s.newHomeClientOffset,opacity:h?ki.opacity.drop:null,scale:h?ki.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:v,draggingOver:f,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:t(d,l,f,h,v)}}}return null}}function ib(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const NP={mapped:{type:"SECONDARY",offset:We,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ib(null)}};function jP(){const e=Ue((i,l)=>({x:i,y:l})),t=Ue(ib),r=Ue((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(We,i,!0):null,s=(i,l,c,u)=>{const d=c.displaced.visible[i],f=!!(u.inVirtualList&&u.effected[i]),h=pc(c),p=h&&h.draggableId===i?l:null;if(!d){if(!f)return n(p);if(c.displaced.invisible[i])return null;const b=co(u.displacedBy.point),y=e(b.x,b.y);return r(y,p,!0)}if(f)return n(p);const v=c.displacedBy.point,x=e(v.x,v.y);return r(x,p,d.shouldAnimate)};return(i,l)=>{if(Ni(i))return i.critical.draggable.id===l.draggableId?null:s(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const DP=()=>{const e=SP(),t=jP();return(n,s)=>e(n,s)||t(n,s)||NP},CP={dropAnimationFinished:Fx},EP=cx(DP,CP,null,{context:Rh,areStatePropsEqual:sb})(wP);function ab(e){return Dl(Mh).isUsingCloneFor===e.draggableId&&!e.isClone?null:P.createElement(EP,e)}function PP(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return P.createElement(ab,_l({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const lb=e=>t=>e===t,TP=lb("scroll"),RP=lb("auto"),lg=(e,t)=>t(e.overflowX)||t(e.overflowY),OP=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return lg(r,TP)||lg(r,RP)},IP=()=>!1,cb=e=>e==null?null:e===document.body?IP()?e:null:e===document.documentElement?null:OP(e)?e:cb(e.parentElement);var Jd=e=>({x:e.scrollLeft,y:e.scrollTop});const ub=e=>e?window.getComputedStyle(e).position==="fixed"?!0:ub(e.parentElement):!1;var MP=e=>{const t=cb(e),r=ub(e);return{closestScrollable:t,isFixedOnPage:r}},LP=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:h,client:p}=l,v=Wx({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:v,diff:{value:We,displacement:We}}}})(),u=s==="vertical"?bh:wx,d=Hs({page:i,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:o,page:i,frame:c,subject:d}};const AP=(e,t)=>{const r=dx(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,i=s+t.scrollWidth,c=gh({top:n,right:i,bottom:o,left:s},r.border);return vh({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var FP=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,u=AP(e,c),d=wl(u,n),f=(()=>{if(!c)return null;const p=dx(c),v={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:wl(p,n),scroll:Jd(c),scrollSize:v,shouldClipSubject:l}})();return LP({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:f})};const $P={passive:!1},BP={passive:!0};var cg=e=>e.shouldPublishImmediately?$P:BP;const pa=e=>e&&e.env.closestScrollable||null;function UP(e){const t=w.useRef(null),r=Dl(yc),n=Oh("droppable"),{registry:s,marshal:o}=r,i=Jx(e),l=ne(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=w.useRef(l),u=ne(()=>Ue((_,k)=>{t.current||U();const S={x:_,y:k};o.updateDroppableScroll(l.id,S)}),[l.id,o]),d=Q(()=>{const _=t.current;return!_||!_.env.closestScrollable?We:Jd(_.env.closestScrollable)},[]),f=Q(()=>{const _=d();u(_.x,_.y)},[d,u]),h=ne(()=>xi(f),[f]),p=Q(()=>{const _=t.current,k=pa(_);if(_&&k||U(),_.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),v=Q((_,k)=>{t.current&&U();const S=i.current,j=S.getDroppableRef();j||U();const D=MP(j),N={ref:j,descriptor:l,env:D,scrollOptions:k};t.current=N;const E=FP({ref:j,descriptor:l,env:D,windowScroll:_,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),M=D.closestScrollable;return M&&(M.setAttribute(ng.contextId,r.contextId),M.addEventListener("scroll",p,cg(N.scrollOptions))),E},[r.contextId,l,p,i]),x=Q(()=>{const _=t.current,k=pa(_);return _&&k||U(),Jd(k)},[]),b=Q(()=>{const _=t.current;_||U();const k=pa(_);t.current=null,k&&(h.cancel(),k.removeAttribute(ng.contextId),k.removeEventListener("scroll",p,cg(_.scrollOptions)))},[p,h]),y=Q(_=>{const k=t.current;k||U();const S=pa(k);S||U(),S.scrollTop+=_.y,S.scrollLeft+=_.x},[]),m=ne(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:x,dragStopped:b,scroll:y}),[b,v,x,y]),g=ne(()=>({uniqueId:n,descriptor:l,callbacks:m}),[m,l,n]);_t(()=>(c.current=g.descriptor,s.droppable.register(g),()=>{t.current&&b(),s.droppable.unregister(g)}),[m,l,b,g,o,s.droppable]),_t(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),_t(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function _u(){}const ug={width:0,height:0,margin:GD},WP=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?ug:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},HP=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=WP({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Xo.placeholder:null}},zP=e=>{const t=w.useRef(null),r=Q(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:i}=e,[l,c]=w.useState(e.animate==="open");w.useEffect(()=>l?n!=="open"?(r(),c(!1),_u):t.current?_u:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):_u,[n,l,r]);const u=Q(f=>{f.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),d=HP({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return P.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var YP=P.memo(zP);class VP extends P.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const qP=e=>{const t=w.useContext(yc);t||U();const{contextId:r,isMovementAllowed:n}=t,s=w.useRef(null),o=w.useRef(null),{children:i,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:p,snapshot:v,useClone:x,updateViewportMaxScroll:b,getContainerForClone:y}=e,m=Q(()=>s.current,[]),g=Q((M=null)=>{s.current=M},[]);Q(()=>o.current,[]);const _=Q((M=null)=>{o.current=M},[]),k=Q(()=>{n()&&b({maxScroll:zx()})},[n,b]);UP({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:m});const S=ne(()=>P.createElement(VP,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:M,data:L,animate:$})=>P.createElement(YP,{placeholder:L,onClose:M,innerRef:_,animate:$,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,_]),j=ne(()=>({innerRef:g,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,S,g]),D=x?x.dragging.draggableId:null,N=ne(()=>({droppableId:l,type:c,isUsingCloneFor:D}),[l,D,c]);function E(){if(!x)return null;const{dragging:M,render:L}=x,$=P.createElement(ab,{draggableId:M.draggableId,index:M.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(z,R)=>L(z,R,M));return my.createPortal($,y())}return P.createElement(Mh.Provider,{value:N},i(j,v),E())};function GP(){return document.body||U(),document.body}const dg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:GP},db=e=>{let t={...e},r;for(r in dg)e[r]===void 0&&(t={...t,[r]:dg[r]});return t},ku=(e,t)=>e===t.droppable.type,fg=(e,t)=>t.draggables[e.draggable.id],KP=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Ue(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Ue((o,i,l,c,u,d)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===o){const v=d?{render:d,dragging:r(u.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:v}}if(!i)return t;if(!c)return e;const p={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const l=db(i),c=l.droppableId,u=l.type,d=!l.isDropDisabled,f=l.renderClone;if(Ni(o)){const h=o.critical;if(!ku(u,h))return t;const p=fg(h,o.dimensions),v=wt(o.impact)===c;return n(c,d,v,v,p,f)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!ku(u,h.critical))return t;const p=fg(h.critical,o.dimensions);return n(c,d,ob(h.result)===c,wt(h.impact)===c,p,f)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!ku(u,h.critical))return t;const p=wt(h.impact)===c,v=!!(h.impact.at&&h.impact.at.type==="COMBINE"),x=h.critical.droppable.id===c;return p?v?e:t:x?e:t}return t}},QP={updateViewportMaxScroll:i2},JP=cx(KP,QP,(e,t,r)=>({...db(r),...e,...t}),{context:Rh,areStatePropsEqual:sb})(qP);function XP(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,o]=w.useState(!0);return w.useEffect(()=>{(async()=>{try{console.log(" Fetching kanban data (safe version)...");const{data:l,error:c}=await W.from("deal_stage").select("id, label, description, sort_order, active").eq("active",!0).order("sort_order",{ascending:!0});if(console.log(" Stages:",l),c)throw console.error(" Stage error:",c),c;const{data:u,error:d}=await W.from("deal").select("id, deal_name, fee, deal_value, closed_date, stage_id, kanban_position, client_id, created_at").order("kanban_position",{ascending:!0});if(console.log(" Deals:",(u==null?void 0:u.length)||0,"deals fetched"),d)throw console.error(" Deal error:",d),d;const{data:f,error:h}=await W.from("client").select("id, client_name");console.log(" Clients:",(f==null?void 0:f.length)||0,"clients fetched"),h&&console.warn(" Client error (non-fatal):",h);const p=new Map;f==null||f.forEach(g=>{p.set(g.id,g.client_name)});const v=u.map(g=>({id:g.id,deal_name:g.deal_name,fee:g.fee,deal_value:g.deal_value,closed_date:g.closed_date,stage_id:g.stage_id,kanban_position:g.kanban_position,client_name:g.client_id&&p.get(g.client_id)||null,created_at:g.created_at})),x=new Map;l.forEach(g=>{x.set(g.id,g.label)});const b=new Set(l.map(g=>g.id)),y=new Date;y.setFullYear(y.getFullYear()-2);const m=v.filter(g=>!g.stage_id||!b.has(g.stage_id)?!1:x.get(g.stage_id)==="Lost"?g.created_at?new Date(g.created_at)>=y:!1:!0);console.log(" Final cards:",m.length),console.log(" Final columns:",l.length),t(l||[]),n(m)}catch(l){console.error(" Error:",l)}finally{o(!1)}})()},[]),{columns:e,cards:r,loading:s}}function ZP(){const{columns:e,cards:t,loading:r}=XP(),[n,s]=w.useState([]);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{document.title="Master Pipeline"},[]);const o=async c=>{const{destination:u,draggableId:d}=c;if(!u)return;const f=u.droppableId,h=[...n],p=h.find(b=>b.id===d);if(!p)return;p.stage_id=f;const v=h.filter(b=>b.stage_id===f&&b.id!==d).sort((b,y)=>(b.kanban_position??0)-(y.kanban_position??0));v.splice(u.index,0,p),v.forEach((b,y)=>{b.kanban_position=y}),s(h);const x=v.map(b=>W.from("deal").update({stage_id:b.stage_id,kanban_position:b.kanban_position}).eq("id",b.id));await Promise.all(x)},i=(c,u=0)=>typeof c=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:u,maximumFractionDigits:u}).format(c):"--",l=new Date().getFullYear();return r?a.jsx("div",{className:"p-4",children:"Loading..."}):a.jsxs("div",{className:"p-4 overflow-x-auto bg-gray-100 min-h-screen",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Master Pipeline"}),a.jsx("div",{className:"flex min-w-max gap-[2px]",children:a.jsx(dP,{onDragEnd:o,children:e.map((c,u)=>{let d=n.filter(v=>v.stage_id===c.id).sort((v,x)=>(v.kanban_position??0)-(x.kanban_position??0));c.label==="Closed Paid"&&(d=d.filter(v=>v.closed_date?new Date(v.closed_date).getFullYear()===l:!1));const f=d.reduce((v,x)=>v+(x.fee??0),0),h=u===e.length-1,p=u===0;return a.jsx(JP,{droppableId:c.id,children:(v,x)=>a.jsxs("div",{ref:v.innerRef,...v.droppableProps,className:`relative min-w-[240px] max-w-[280px] bg-white shadow-sm flex flex-col ${x.isDraggingOver?"bg-blue-50":""}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`chevron-header ${p?"first":""} ${h?"last":""} flex items-center justify-center`,children:a.jsxs("div",{className:"text-center font-semibold text-sm",children:[c.label," (",d.length,")"]})}),a.jsx("div",{className:"bg-white text-center py-2 border-b",children:a.jsx("div",{className:"text-green-600 text-lg font-bold",children:i(f)})})]}),a.jsxs("div",{className:"p-2 flex-1",children:[d.map((b,y)=>a.jsx(PP,{draggableId:b.id,index:y,children:(m,g)=>a.jsxs("div",{ref:m.innerRef,...m.draggableProps,...m.dragHandleProps,className:`bg-white p-2 rounded shadow mb-2 border text-sm ${g.isDragging?"bg-yellow-100":""}`,children:[a.jsx("div",{className:"font-semibold",children:a.jsx(vi,{to:`/deal/${b.id}`,className:"text-blue-600 hover:underline",children:b.deal_name||"Untitled Deal"})}),a.jsx("div",{className:"text-gray-700",children:i(b.fee)}),a.jsx("div",{className:"text-gray-500 text-xs",children:b.client_name||"No Client"}),a.jsx("div",{className:"text-gray-800",children:i(b.deal_value)})]})},b.id)),v.placeholder]})]})},c.id)})})})]})}function Su(e,t=0){return e==null||isNaN(e)?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function eT(e,t=2){return typeof e!="number"||isNaN(e)?"":`${e.toFixed(t)}%`}function tT(e){return typeof e!="number"?"":Math.round(e)+"%"}function ma({label:e,value:t,onChange:r,format:n,editingField:s,setEditingField:o,fieldKey:i}){const l=s===i,c=w.useRef(null);w.useEffect(()=>{l&&c.current&&c.current.focus()},[l]);const u=()=>{o(null)};return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),l?a.jsx("input",{ref:c,type:"number",value:t??"",onChange:d=>r(d.target.value),onBlur:u,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):a.jsx("div",{onClick:()=>o(i),className:"mt-1 p-2 bg-gray-100 rounded text-sm cursor-pointer",children:t==null||t===""?"":n(t)})]})}function fb(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=fb(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ve(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=fb(e))&&(n&&(n+=" "),n+=t);return n}const hb=6048e5,rT=864e5,bc=6e4,wc=36e5,nT=1e3,hg=Symbol.for("constructDateFrom");function pe(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&hg in e?e[hg](t):e instanceof Date?new e.constructor(t):new Date(t)}function K(e,t){return pe(t||e,e)}function Jt(e,t,r){const n=K(e,r==null?void 0:r.in);return isNaN(t)?pe((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function er(e,t,r){const n=K(e,r==null?void 0:r.in);if(isNaN(t))return pe((r==null?void 0:r.in)||e,NaN);if(!t)return n;const s=n.getDate(),o=pe((r==null?void 0:r.in)||e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const i=o.getDate();return s>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function pb(e,t,r){return pe((r==null?void 0:r.in)||e,+K(e)+t)}function sT(e,t,r){return pb(e,t*wc,r)}let oT={};function ts(){return oT}function Ar(e,t){var l,c,u,d;const r=ts(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=K(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Vs(e,t){return Ar(e,{...t,weekStartsOn:1})}function mb(e,t){const r=K(e,t==null?void 0:t.in),n=r.getFullYear(),s=pe(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=Vs(s),i=pe(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Vs(i);return r.getTime()>=o.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Cl(e){const t=K(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Br(e,...t){const r=pe.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function Kn(e,t){const r=K(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function qs(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=Kn(n),i=Kn(s),l=+o-Cl(o),c=+i-Cl(i);return Math.round((l-c)/rT)}function iT(e,t){const r=mb(e,t),n=pe((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Vs(n)}function Xd(e,t,r){const n=K(e,r==null?void 0:r.in);return n.setTime(n.getTime()+t*bc),n}function Lh(e,t,r){return er(e,t*3,r)}function aT(e,t,r){return pb(e,t*1e3,r)}function El(e,t,r){return Jt(e,t*7,r)}function Dr(e,t,r){return er(e,t*12,r)}function pg(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=pe.bind(null,s));const o=K(s,n);(!r||r<o||isNaN(+o))&&(r=o)}),pe(n,r||NaN)}function mg(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=pe.bind(null,s));const o=K(s,n);(!r||r>o||isNaN(+o))&&(r=o)}),pe(n,r||NaN)}function lT(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return+Kn(n)==+Kn(s)}function Cr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Pl(e){return!(!Cr(e)&&typeof e!="number"||isNaN(+K(e)))}function Tl(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return o*12+i}function $n(e,t){const r=K(e,t==null?void 0:t.in);return Math.trunc(r.getMonth()/3)+1}function Rl(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=$n(n)-$n(s);return o*4+i}function Ol(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()-s.getFullYear()}function cT(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=gg(n,s),i=Math.abs(qs(n,s));n.setDate(n.getDate()-o*i);const l=+(gg(n,s)===-o),c=o*(i-l);return c===0?0:c}function gg(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function gb(e,t){const r=K(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function vb(e,t){const r=K(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Zd(e,t){const r=K(e,t==null?void 0:t.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function yb(e,t){const r=K(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function xb(e,t){const r=K(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function _c(e,t){const r=K(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function uT(e,t){var l,c,u,d;const r=ts(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=K(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const dT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fT=(e,t,r)=>{let n;const s=dT[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Nu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const hT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gT={date:Nu({formats:hT,defaultWidth:"full"}),time:Nu({formats:pT,defaultWidth:"full"}),dateTime:Nu({formats:mT,defaultWidth:"full"})},vT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yT=(e,t,r,n)=>vT[e];function Do(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const xT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_T={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ST={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NT=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jT={ordinalNumber:NT,era:Do({values:xT,defaultWidth:"wide"}),quarter:Do({values:bT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Do({values:wT,defaultWidth:"wide"}),day:Do({values:_T,defaultWidth:"wide"}),dayPeriod:Do({values:kT,defaultWidth:"wide",formattingValues:ST,defaultFormattingWidth:"wide"})};function Co(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?CT(l,f=>f.test(i)):DT(l,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function DT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function CT(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ET(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const PT=/^(\d+)(th|st|nd|rd)?/i,TT=/\d+/i,RT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OT={any:[/^b/i,/^(a|c)/i]},IT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MT={any:[/1/i,/2/i,/3/i,/4/i]},LT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$T={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WT={ordinalNumber:ET({matchPattern:PT,parsePattern:TT,valueCallback:e=>parseInt(e,10)}),era:Co({matchPatterns:RT,defaultMatchWidth:"wide",parsePatterns:OT,defaultParseWidth:"any"}),quarter:Co({matchPatterns:IT,defaultMatchWidth:"wide",parsePatterns:MT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Co({matchPatterns:LT,defaultMatchWidth:"wide",parsePatterns:AT,defaultParseWidth:"any"}),day:Co({matchPatterns:FT,defaultMatchWidth:"wide",parsePatterns:$T,defaultParseWidth:"any"}),dayPeriod:Co({matchPatterns:BT,defaultMatchWidth:"any",parsePatterns:UT,defaultParseWidth:"any"})},bb={code:"en-US",formatDistance:fT,formatLong:gT,formatRelative:yT,localize:jT,match:WT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HT(e,t){const r=K(e,t==null?void 0:t.in);return qs(r,_c(r))+1}function Ah(e,t){const r=K(e,t==null?void 0:t.in),n=+Vs(r)-+iT(r);return Math.round(n/hb)+1}function Fh(e,t){var d,f,h,p;const r=K(e,t==null?void 0:t.in),n=r.getFullYear(),s=ts(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=pe((t==null?void 0:t.in)||e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=Ar(i,t),c=pe((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const u=Ar(c,t);return+r>=+l?n+1:+r>=+u?n:n-1}function zT(e,t){var l,c,u,d;const r=ts(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Fh(e,t),o=pe((t==null?void 0:t.in)||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Ar(o,t)}function wb(e,t){const r=K(e,t==null?void 0:t.in),n=+Ar(r,t)-+zT(r,t);return Math.round(n/hb)+1}function de(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Hr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return de(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):de(r+1,2)},d(e,t){return de(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return de(e.getHours()%12||12,t.length)},H(e,t){return de(e.getHours(),t.length)},m(e,t){return de(e.getMinutes(),t.length)},s(e,t){return de(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return de(s,t.length)}},cs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vg={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Hr.y(e,t)},Y:function(e,t,r,n){const s=Fh(e,n),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return de(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):de(o,t.length)},R:function(e,t){const r=mb(e);return de(r,t.length)},u:function(e,t){const r=e.getFullYear();return de(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return de(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return de(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Hr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return de(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=wb(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):de(s,t.length)},I:function(e,t,r){const n=Ah(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):de(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Hr.d(e,t)},D:function(e,t,r){const n=HT(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):de(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return de(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return de(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return de(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=cs.noon:n===0?s=cs.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=cs.evening:n>=12?s=cs.afternoon:n>=4?s=cs.morning:s=cs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Hr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Hr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):de(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):de(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Hr.s(e,t)},S:function(e,t){return Hr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return xg(n);case"XXXX":case"XX":return Pn(n);case"XXXXX":case"XXX":default:return Pn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return xg(n);case"xxxx":case"xx":return Pn(n);case"xxxxx":case"xxx":default:return Pn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yg(n,":");case"OOOO":default:return"GMT"+Pn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yg(n,":");case"zzzz":default:return"GMT"+Pn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return de(n,t.length)},T:function(e,t,r){return de(+e,t.length)}};function yg(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+t+de(o,2)}function xg(e,t){return e%60===0?(e>0?"-":"+")+de(Math.abs(e)/60,2):Pn(e,t)}function Pn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=de(Math.trunc(n/60),2),o=de(n%60,2);return r+s+t+o}const bg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_b=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},YT=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return bg(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",bg(n,t)).replace("{{time}}",_b(s,t))},ef={p:_b,P:YT},VT=/^D+$/,qT=/^Y+$/,GT=["D","DD","YY","YYYY"];function kb(e){return VT.test(e)}function Sb(e){return qT.test(e)}function tf(e,t,r){const n=KT(e,t,r);if(console.warn(n),GT.includes(e))throw new RangeError(n)}function KT(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const QT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XT=/^'([^]*?)'?$/,ZT=/''/g,eR=/[a-zA-Z]/;function rf(e,t,r){var d,f,h,p,v,x,b,y;const n=ts(),s=(r==null?void 0:r.locale)??n.locale??bb,o=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=K(e,r==null?void 0:r.in);if(!Pl(l))throw new RangeError("Invalid time value");let c=t.match(JT).map(m=>{const g=m[0];if(g==="p"||g==="P"){const _=ef[g];return _(m,s.formatLong)}return m}).join("").match(QT).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:tR(m)};if(vg[g])return{isToken:!0,value:m};if(g.match(eR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Sb(g)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&kb(g))&&tf(g,t,String(e));const _=vg[g[0]];return _(l,g,s.localize,u)}).join("")}function tR(e){const t=e.match(XT);return t?t[1].replace(ZT,"'"):e}function wg(e,t){return K(e,t==null?void 0:t.in).getDate()}function rR(e,t){return K(e,t==null?void 0:t.in).getDay()}function nR(e,t){const r=K(e,t==null?void 0:t.in),n=r.getFullYear(),s=r.getMonth(),o=pe(r,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function sR(){return Object.assign({},ts())}function Er(e,t){return K(e,t==null?void 0:t.in).getHours()}function oR(e,t){const r=K(e,t==null?void 0:t.in).getDay();return r===0?7:r}function Pr(e,t){return K(e,t==null?void 0:t.in).getMinutes()}function et(e,t){return K(e,t==null?void 0:t.in).getMonth()}function dn(e){return K(e).getSeconds()}function nf(e){return+K(e)}function Z(e,t){return K(e,t==null?void 0:t.in).getFullYear()}function gn(e,t){return+K(e)>+K(t)}function Qn(e,t){return+K(e)<+K(t)}function iR(e,t){return+K(e)==+K(t)}function aR(e,t){const r=lR(t)?new t(0):pe(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function lR(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const cR=10;class Nb{constructor(){V(this,"subPriority",0)}validate(t,r){return!0}}class uR extends Nb{constructor(t,r,n,s,o){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class dR extends Nb{constructor(r,n){super();V(this,"priority",cR);V(this,"subPriority",-1);this.context=r||(s=>pe(n,s))}set(r,n){return n.timestampIsSet?r:pe(r,aR(r,this.context))}}class le{run(t,r,n,s){const o=this.parse(t,r,n,s);return o?{setter:new uR(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,r,n){return!0}}class fR extends le{constructor(){super(...arguments);V(this,"priority",140);V(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}const Te={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},lr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Re(e,t){return e&&{value:t(e.value),rest:e.rest}}function Se(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function cr(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(s*wc+o*bc+i*nT),rest:t.slice(r[0].length)}}function jb(e){return Se(Te.anyDigitsSigned,e)}function Ee(e,t){switch(e){case 1:return Se(Te.singleDigit,t);case 2:return Se(Te.twoDigits,t);case 3:return Se(Te.threeDigits,t);case 4:return Se(Te.fourDigits,t);default:return Se(new RegExp("^\\d{1,"+e+"}"),t)}}function Il(e,t){switch(e){case 1:return Se(Te.singleDigitSigned,t);case 2:return Se(Te.twoDigitsSigned,t);case 3:return Se(Te.threeDigitsSigned,t);case 4:return Se(Te.fourDigitsSigned,t);default:return Se(new RegExp("^-?\\d{1,"+e+"}"),t)}}function $h(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Db(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const o=n+50,i=Math.trunc(o/100)*100,l=e>=o%100;s=e+i-(l?100:0)}return r?s:1-s}function Cb(e){return e%400===0||e%4===0&&e%100!==0}class hR extends le{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Re(Ee(4,r),o);case"yo":return Re(s.ordinalNumber(r,{unit:"year"}),o);default:return Re(Ee(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const o=r.getFullYear();if(s.isTwoDigitYear){const l=Db(s.year,o);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const i=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(i,0,1),r.setHours(0,0,0,0),r}}class pR extends le{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Re(Ee(4,r),o);case"Yo":return Re(s.ordinalNumber(r,{unit:"year"}),o);default:return Re(Ee(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,o){const i=Fh(r,o);if(s.isTwoDigitYear){const c=Db(s.year,i);return r.setFullYear(c,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Ar(r,o)}const l=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(l,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Ar(r,o)}}class mR extends le{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return Il(n==="R"?4:n.length,r)}set(r,n,s){const o=pe(r,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Vs(o)}}class gR extends le{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return Il(n==="u"?4:n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}class vR extends le{constructor(){super(...arguments);V(this,"priority",120);V(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"Q":case"QQ":return Ee(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class yR extends le{constructor(){super(...arguments);V(this,"priority",120);V(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"q":case"qq":return Ee(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class xR extends le{constructor(){super(...arguments);V(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);V(this,"priority",110)}parse(r,n,s){const o=i=>i-1;switch(n){case"M":return Re(Se(Te.month,r),o);case"MM":return Re(Ee(2,r),o);case"Mo":return Re(s.ordinalNumber(r,{unit:"month"}),o);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}class bR extends le{constructor(){super(...arguments);V(this,"priority",110);V(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,s){const o=i=>i-1;switch(n){case"L":return Re(Se(Te.month,r),o);case"LL":return Re(Ee(2,r),o);case"Lo":return Re(s.ordinalNumber(r,{unit:"month"}),o);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}function wR(e,t,r){const n=K(e,r==null?void 0:r.in),s=wb(n,r)-t;return n.setDate(n.getDate()-s*7),K(n,r==null?void 0:r.in)}class _R extends le{constructor(){super(...arguments);V(this,"priority",100);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,s){switch(n){case"w":return Se(Te.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return Ee(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,o){return Ar(wR(r,s,o),o)}}function kR(e,t,r){const n=K(e,r==null?void 0:r.in),s=Ah(n,r)-t;return n.setDate(n.getDate()-s*7),n}class SR extends le{constructor(){super(...arguments);V(this,"priority",100);V(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,s){switch(n){case"I":return Se(Te.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return Ee(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return Vs(kR(r,s))}}const NR=[31,28,31,30,31,30,31,31,30,31,30,31],jR=[31,29,31,30,31,30,31,31,30,31,30,31];class DR extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"subPriority",1);V(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"d":return Se(Te.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return Ee(n.length,r)}}validate(r,n){const s=r.getFullYear(),o=Cb(s),i=r.getMonth();return o?n>=1&&n<=jR[i]:n>=1&&n<=NR[i]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}}class CR extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"subpriority",1);V(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,s){switch(n){case"D":case"DD":return Se(Te.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return Ee(n.length,r)}}validate(r,n){const s=r.getFullYear();return Cb(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}}function Bh(e,t,r){var f,h,p,v;const n=ts(),s=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,o=K(e,r==null?void 0:r.in),i=o.getDay(),c=(t%7+7)%7,u=7-s,d=t<0||t>6?t-(i+u)%7:(c+u)%7-(i+u)%7;return Jt(o,d,r)}class ER extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Bh(r,s,o),r.setHours(0,0,0,0),r}}class PR extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,s,o){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+o.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Re(Ee(n.length,r),i);case"eo":return Re(s.ordinalNumber(r,{unit:"day"}),i);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Bh(r,s,o),r.setHours(0,0,0,0),r}}class TR extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,s,o){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+o.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Re(Ee(n.length,r),i);case"co":return Re(s.ordinalNumber(r,{unit:"day"}),i);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Bh(r,s,o),r.setHours(0,0,0,0),r}}function RR(e,t,r){const n=K(e,r==null?void 0:r.in),s=oR(n,r),o=t-s;return Jt(n,o,r)}class OR extends le{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,s){const o=i=>i===0?7:i;switch(n){case"i":case"ii":return Ee(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return Re(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiii":return Re(s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Re(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Re(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=RR(r,s),r.setHours(0,0,0,0),r}}class IR extends le{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours($h(s),0,0,0),r}}class MR extends le{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours($h(s),0,0,0),r}}class LR extends le{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours($h(s),0,0,0),r}}class AR extends le{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,s){switch(n){case"h":return Se(Te.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return Ee(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const o=r.getHours()>=12;return o&&s<12?r.setHours(s+12,0,0,0):!o&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}}class FR extends le{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,s){switch(n){case"H":return Se(Te.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return Ee(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}}class $R extends le{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,s){switch(n){case"K":return Se(Te.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return Ee(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}}class BR extends le{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,s){switch(n){case"k":return Se(Te.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return Ee(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const o=s<=24?s%24:s;return r.setHours(o,0,0,0),r}}class UR extends le{constructor(){super(...arguments);V(this,"priority",60);V(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"m":return Se(Te.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return Ee(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}}class WR extends le{constructor(){super(...arguments);V(this,"priority",50);V(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"s":return Se(Te.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return Ee(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}}class HR extends le{constructor(){super(...arguments);V(this,"priority",30);V(this,"incompatibleTokens",["t","T"])}parse(r,n){const s=o=>Math.trunc(o*Math.pow(10,-n.length+3));return Re(Ee(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}}class zR extends le{constructor(){super(...arguments);V(this,"priority",10);V(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return cr(lr.basicOptionalMinutes,r);case"XX":return cr(lr.basic,r);case"XXXX":return cr(lr.basicOptionalSeconds,r);case"XXXXX":return cr(lr.extendedOptionalSeconds,r);case"XXX":default:return cr(lr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:pe(r,r.getTime()-Cl(r)-s)}}class YR extends le{constructor(){super(...arguments);V(this,"priority",10);V(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return cr(lr.basicOptionalMinutes,r);case"xx":return cr(lr.basic,r);case"xxxx":return cr(lr.basicOptionalSeconds,r);case"xxxxx":return cr(lr.extendedOptionalSeconds,r);case"xxx":default:return cr(lr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:pe(r,r.getTime()-Cl(r)-s)}}class VR extends le{constructor(){super(...arguments);V(this,"priority",40);V(this,"incompatibleTokens","*")}parse(r){return jb(r)}set(r,n,s){return[pe(r,s*1e3),{timestampIsSet:!0}]}}class qR extends le{constructor(){super(...arguments);V(this,"priority",20);V(this,"incompatibleTokens","*")}parse(r){return jb(r)}set(r,n,s){return[pe(r,s),{timestampIsSet:!0}]}}const GR={G:new fR,y:new hR,Y:new pR,R:new mR,u:new gR,Q:new vR,q:new yR,M:new xR,L:new bR,w:new _R,I:new SR,d:new DR,D:new CR,E:new ER,e:new PR,c:new TR,i:new OR,a:new IR,b:new MR,B:new LR,h:new AR,H:new FR,K:new $R,k:new BR,m:new UR,s:new WR,S:new HR,X:new zR,x:new YR,t:new VR,T:new qR},KR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JR=/^'([^]*?)'?$/,XR=/''/g,ZR=/\S/,eO=/[a-zA-Z]/;function tO(e,t,r,n){var b,y,m,g,_,k,S,j;const s=()=>pe((n==null?void 0:n.in)||r,NaN),o=sR(),i=(n==null?void 0:n.locale)??o.locale??bb,l=(n==null?void 0:n.firstWeekContainsDate)??((y=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??o.firstWeekContainsDate??((g=(m=o.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,c=(n==null?void 0:n.weekStartsOn)??((k=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:k.weekStartsOn)??o.weekStartsOn??((j=(S=o.locale)==null?void 0:S.options)==null?void 0:j.weekStartsOn)??0;if(!t)return e?s():K(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:i},d=[new dR(n==null?void 0:n.in,r)],f=t.match(QR).map(D=>{const N=D[0];if(N in ef){const E=ef[N];return E(D,i.formatLong)}return D}).join("").match(KR),h=[];for(let D of f){!(n!=null&&n.useAdditionalWeekYearTokens)&&Sb(D)&&tf(D,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&kb(D)&&tf(D,t,e);const N=D[0],E=GR[N];if(E){const{incompatibleTokens:M}=E;if(Array.isArray(M)){const $=h.find(z=>M.includes(z.token)||z.token===N);if($)throw new RangeError(`The format string mustn't contain \`${$.fullToken}\` and \`${D}\` at the same time`)}else if(E.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${D}\` and any other token at the same time`);h.push({token:N,fullToken:D});const L=E.run(e,D,i.match,u);if(!L)return s();d.push(L.setter),e=L.rest}else{if(N.match(eO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(D==="''"?D="'":N==="'"&&(D=rO(D)),e.indexOf(D)===0)e=e.slice(D.length);else return s()}}if(e.length>0&&ZR.test(e))return s();const p=d.map(D=>D.priority).sort((D,N)=>N-D).filter((D,N,E)=>E.indexOf(D)===N).map(D=>d.filter(N=>N.priority===D).sort((N,E)=>E.subPriority-N.subPriority)).map(D=>D[0]);let v=K(r,n==null?void 0:n.in);if(isNaN(+v))return s();const x={};for(const D of p){if(!D.validate(v,u))return s();const N=D.set(v,x,u);Array.isArray(N)?(v=N[0],Object.assign(x,N[1])):v=N}return v}function rO(e){return e.match(JR)[1].replace(XR,"'")}function nO(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function sO(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return+Zd(n)==+Zd(s)}function oO(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()}function ji(e,t,r){const n=+K(e,r==null?void 0:r.in),[s,o]=[+K(t.start,r==null?void 0:r.in),+K(t.end,r==null?void 0:r.in)].sort((i,l)=>i-l);return n>=s&&n<=o}function iO(e,t,r){return Jt(e,-t,r)}function Eb(e,t){const r=()=>pe(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,s=uO(e);let o;if(s.date){const u=dO(s.date,n);o=fO(u.restDateString,u.year)}if(!o||isNaN(+o))return r();const i=+o;let l=0,c;if(s.time&&(l=hO(s.time),isNaN(l)))return r();if(s.timezone){if(c=pO(s.timezone),isNaN(c))return r()}else{const u=new Date(i+l),d=K(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return K(i+l+c,t==null?void 0:t.in)}const ga={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},aO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,lO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function uO(e){const t={},r=e.split(ga.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ga.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ga.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=ga.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function dO(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function fO(e,t){if(t===null)return new Date(NaN);const r=e.match(aO);if(!r)return new Date(NaN);const n=!!r[4],s=Eo(r[1]),o=Eo(r[2])-1,i=Eo(r[3]),l=Eo(r[4]),c=Eo(r[5])-1;if(n)return xO(t,l,c)?mO(t,l,c):new Date(NaN);{const u=new Date(0);return!vO(t,o,i)||!yO(t,s)?new Date(NaN):(u.setUTCFullYear(t,o,Math.max(s,i)),u)}}function Eo(e){return e?parseInt(e):1}function hO(e){const t=e.match(lO);if(!t)return NaN;const r=ju(t[1]),n=ju(t[2]),s=ju(t[3]);return bO(r,n,s)?r*wc+n*bc+s*1e3:NaN}function ju(e){return e&&parseFloat(e.replace(",","."))||0}function pO(e){if(e==="Z")return 0;const t=e.match(cO);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return wO(n,s)?r*(n*wc+s*bc):NaN}function mO(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,o=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const gO=[31,null,31,30,31,30,31,31,30,31,30,31];function Pb(e){return e%400===0||e%4===0&&e%100!==0}function vO(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(gO[t]||(Pb(e)?29:28))}function yO(e,t){return t>=1&&t<=(Pb(e)?366:365)}function xO(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function bO(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function wO(e,t){return t>=0&&t<=59}function Pt(e,t,r){const n=K(e,r==null?void 0:r.in),s=n.getFullYear(),o=n.getDate(),i=pe((r==null?void 0:r.in)||e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const l=nR(i);return n.setMonth(t,Math.min(o,l)),n}function Ba(e,t,r){const n=K(e,r==null?void 0:r.in);return n.setHours(t),n}function Ua(e,t,r){const n=K(e,r==null?void 0:r.in);return n.setMinutes(t),n}function hs(e,t,r){const n=K(e,r==null?void 0:r.in),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return Pt(n,n.getMonth()+o*3)}function Wa(e,t,r){const n=K(e,r==null?void 0:r.in);return n.setSeconds(t),n}function or(e,t,r){const n=K(e,r==null?void 0:r.in);return isNaN(+n)?pe((r==null?void 0:r.in)||e,NaN):(n.setFullYear(t),n)}function Bn(e,t,r){return er(e,-t,r)}function Tb(e,t,r){return Lh(e,-t,r)}function _g(e,t,r){return El(e,-t,r)}function Gs(e,t,r){return Dr(e,-t,r)}function kc(){return typeof window<"u"}function ho(e){return Rb(e)?(e.nodeName||"").toLowerCase():"#document"}function kt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mr(e){var t;return(t=(Rb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Rb(e){return kc()?e instanceof Node||e instanceof kt(e).Node:!1}function it(e){return kc()?e instanceof Element||e instanceof kt(e).Element:!1}function pr(e){return kc()?e instanceof HTMLElement||e instanceof kt(e).HTMLElement:!1}function kg(e){return!kc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof kt(e).ShadowRoot}const _O=new Set(["inline","contents"]);function Ui(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Ut(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!_O.has(s)}const kO=new Set(["table","td","th"]);function SO(e){return kO.has(ho(e))}const NO=[":popover-open",":modal"];function Sc(e){return NO.some(t=>{try{return e.matches(t)}catch{return!1}})}const jO=["transform","translate","scale","rotate","perspective"],DO=["transform","translate","scale","rotate","perspective","filter"],CO=["paint","layout","strict","content"];function Uh(e){const t=Wh(),r=it(e)?Ut(e):e;return jO.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||DO.some(n=>(r.willChange||"").includes(n))||CO.some(n=>(r.contain||"").includes(n))}function EO(e){let t=vn(e);for(;pr(t)&&!Ks(t);){if(Uh(t))return t;if(Sc(t))return null;t=vn(t)}return null}function Wh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PO=new Set(["html","body","#document"]);function Ks(e){return PO.has(ho(e))}function Ut(e){return kt(e).getComputedStyle(e)}function Nc(e){return it(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function vn(e){if(ho(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kg(e)&&e.host||mr(e);return kg(t)?t.host:t}function Ob(e){const t=vn(e);return Ks(t)?e.ownerDocument?e.ownerDocument.body:e.body:pr(t)&&Ui(t)?t:Ob(t)}function Di(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Ob(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),i=kt(s);if(o){const l=sf(i);return t.concat(i,i.visualViewport||[],Ui(s)?s:[],l&&r?Di(l):[])}return t.concat(s,Di(s,[],r))}function sf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Qs=Math.min,Un=Math.max,Ml=Math.round,va=Math.floor,hr=e=>({x:e,y:e}),TO={left:"right",right:"left",bottom:"top",top:"bottom"},RO={start:"end",end:"start"};function OO(e,t,r){return Un(e,Qs(t,r))}function jc(e,t){return typeof e=="function"?e(t):e}function Js(e){return e.split("-")[0]}function Wi(e){return e.split("-")[1]}function IO(e){return e==="x"?"y":"x"}function Hh(e){return e==="y"?"height":"width"}const MO=new Set(["top","bottom"]);function Mn(e){return MO.has(Js(e))?"y":"x"}function zh(e){return IO(Mn(e))}function LO(e,t,r){r===void 0&&(r=!1);const n=Wi(e),s=zh(e),o=Hh(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Ll(i)),[i,Ll(i)]}function AO(e){const t=Ll(e);return[of(e),t,of(t)]}function of(e){return e.replace(/start|end/g,t=>RO[t])}const Sg=["left","right"],Ng=["right","left"],FO=["top","bottom"],$O=["bottom","top"];function BO(e,t,r){switch(e){case"top":case"bottom":return r?t?Ng:Sg:t?Sg:Ng;case"left":case"right":return t?FO:$O;default:return[]}}function UO(e,t,r,n){const s=Wi(e);let o=BO(Js(e),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(of)))),o}function Ll(e){return e.replace(/left|right|bottom|top/g,t=>TO[t])}function WO(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ib(e){return typeof e!="number"?WO(e):{top:e,right:e,bottom:e,left:e}}function Al(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}var HO=typeof document<"u",zO=function(){},Fl=HO?w.useLayoutEffect:zO;const YO={...f0},VO=YO.useInsertionEffect,qO=VO||(e=>e());function GO(e){const t=w.useRef(()=>{});return qO(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function jg(e,t,r){let{reference:n,floating:s}=e;const o=Mn(t),i=zh(t),l=Hh(i),c=Js(t),u=o==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Wi(t)){case"start":p[i]-=h*(r&&u?-1:1);break;case"end":p[i]+=h*(r&&u?-1:1);break}return p}const KO=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=jg(u,n,c),h=n,p={},v=0;for(let x=0;x<l.length;x++){const{name:b,fn:y}=l[x],{x:m,y:g,data:_,reset:k}=await y({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=m??d,f=g??f,p={...p,[b]:{...p[b],..._}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:d,y:f}=jg(u,h,c)),x=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function QO(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=jc(t,e),v=Ib(p),b=l[h?f==="floating"?"reference":"floating":f],y=Al(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(b)))==null||r?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),m=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,g=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(g))?await(o.getScale==null?void 0:o.getScale(g))||{x:1,y:1}:{x:1,y:1},k=Al(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:g,strategy:c}):m);return{top:(y.top-k.top+v.top)/_.y,bottom:(k.bottom-y.bottom+v.bottom)/_.y,left:(y.left-k.left+v.left)/_.x,right:(k.right-y.right+v.right)/_.x}}const JO=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=jc(e,t)||{};if(u==null)return{};const f=Ib(d),h={x:r,y:n},p=zh(s),v=Hh(p),x=await i.getDimensions(u),b=p==="y",y=b?"top":"left",m=b?"bottom":"right",g=b?"clientHeight":"clientWidth",_=o.reference[v]+o.reference[p]-h[p]-o.floating[v],k=h[p]-o.reference[p],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let j=S?S[g]:0;(!j||!await(i.isElement==null?void 0:i.isElement(S)))&&(j=l.floating[g]||o.floating[v]);const D=_/2-k/2,N=j/2-x[v]/2-1,E=Qs(f[y],N),M=Qs(f[m],N),L=E,$=j-x[v]-M,z=j/2-x[v]/2+D,R=OO(L,z,$),I=!c.arrow&&Wi(s)!=null&&z!==R&&o.reference[v]/2-(z<L?E:M)-x[v]/2<0,H=I?z<L?z-L:z-$:0;return{[p]:h[p]+H,data:{[p]:R,centerOffset:z-R-H,...I&&{alignmentOffset:H}},reset:I}}}),XO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=jc(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=Js(s),m=Mn(l),g=Js(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=h||(g||!x?[Ll(l)]:AO(l)),S=v!=="none";!h&&S&&k.push(...UO(l,x,v,_));const j=[l,...k],D=await QO(t,b),N=[];let E=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&N.push(D[y]),f){const z=LO(s,i,_);N.push(D[z[0]],D[z[1]])}if(E=[...E,{placement:s,overflows:N}],!N.every(z=>z<=0)){var M,L;const z=(((M=o.flip)==null?void 0:M.index)||0)+1,R=j[z];if(R&&(!(f==="alignment"?m!==Mn(R):!1)||E.every(C=>Mn(C.placement)===m?C.overflows[0]>0:!0)))return{data:{index:z,overflows:E},reset:{placement:R}};let I=(L=E.filter(H=>H.overflows[0]<=0).sort((H,C)=>H.overflows[1]-C.overflows[1])[0])==null?void 0:L.placement;if(!I)switch(p){case"bestFit":{var $;const H=($=E.filter(C=>{if(S){const T=Mn(C.placement);return T===m||T==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(T=>T>0).reduce((T,O)=>T+O,0)]).sort((C,T)=>C[1]-T[1])[0])==null?void 0:$[0];H&&(I=H);break}case"initialPlacement":I=l;break}if(s!==I)return{reset:{placement:I}}}return{}}}},ZO=new Set(["left","top"]);async function eI(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Js(r),l=Wi(r),c=Mn(r)==="y",u=ZO.has(i)?-1:1,d=o&&c?-1:1,f=jc(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const tI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:i,middlewareData:l}=t,c=await eI(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}};function Mb(e){const t=Ut(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=pr(e),o=s?e.offsetWidth:r,i=s?e.offsetHeight:n,l=Ml(r)!==o||Ml(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Yh(e){return it(e)?e:e.contextElement}function Os(e){const t=Yh(e);if(!pr(t))return hr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=Mb(t);let i=(o?Ml(r.width):r.width)/n,l=(o?Ml(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const rI=hr(0);function Lb(e){const t=kt(e);return!Wh()||!t.visualViewport?rI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nI(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==kt(e)?!1:t}function Jn(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Yh(e);let i=hr(1);t&&(n?it(n)&&(i=Os(n)):i=Os(e));const l=nI(o,r,n)?Lb(o):hr(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(o){const h=kt(o),p=n&&it(n)?kt(n):n;let v=h,x=sf(v);for(;x&&n&&p!==v;){const b=Os(x),y=x.getBoundingClientRect(),m=Ut(x),g=y.left+(x.clientLeft+parseFloat(m.paddingLeft))*b.x,_=y.top+(x.clientTop+parseFloat(m.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=g,u+=_,v=kt(x),x=sf(v)}}return Al({width:d,height:f,x:c,y:u})}function Vh(e,t){const r=Nc(e).scrollLeft;return t?t.left+r:Jn(mr(e)).left+r}function Ab(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Vh(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function sI(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",i=mr(n),l=t?Sc(t.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=hr(1);const d=hr(0),f=pr(n);if((f||!f&&!o)&&((ho(n)!=="body"||Ui(i))&&(c=Nc(n)),pr(n))){const p=Jn(n);u=Os(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=i&&!f&&!o?Ab(i,c,!0):hr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function oI(e){return Array.from(e.getClientRects())}function iI(e){const t=mr(e),r=Nc(e),n=e.ownerDocument.body,s=Un(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Un(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Vh(e);const l=-r.scrollTop;return Ut(n).direction==="rtl"&&(i+=Un(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:l}}function aI(e,t){const r=kt(e),n=mr(e),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=Wh();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}const lI=new Set(["absolute","fixed"]);function cI(e,t){const r=Jn(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=pr(e)?Os(e):hr(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function Dg(e,t,r){let n;if(t==="viewport")n=aI(e,r);else if(t==="document")n=iI(mr(e));else if(it(t))n=cI(t,r);else{const s=Lb(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Al(n)}function Fb(e,t){const r=vn(e);return r===t||!it(r)||Ks(r)?!1:Ut(r).position==="fixed"||Fb(r,t)}function uI(e,t){const r=t.get(e);if(r)return r;let n=Di(e,[],!1).filter(l=>it(l)&&ho(l)!=="body"),s=null;const o=Ut(e).position==="fixed";let i=o?vn(e):e;for(;it(i)&&!Ks(i);){const l=Ut(i),c=Uh(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&lI.has(s.position)||Ui(i)&&!c&&Fb(e,i))?n=n.filter(d=>d!==i):s=l,i=vn(i)}return t.set(e,n),n}function dI(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?Sc(t)?[]:uI(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const f=Dg(t,d,s);return u.top=Un(f.top,u.top),u.right=Qs(f.right,u.right),u.bottom=Qs(f.bottom,u.bottom),u.left=Un(f.left,u.left),u},Dg(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fI(e){const{width:t,height:r}=Mb(e);return{width:t,height:r}}function hI(e,t,r){const n=pr(t),s=mr(t),o=r==="fixed",i=Jn(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=hr(0);function u(){c.x=Vh(s)}if(n||!n&&!o)if((ho(t)!=="body"||Ui(s))&&(l=Nc(t)),n){const p=Jn(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?Ab(s,l):hr(0),f=i.left+l.scrollLeft-c.x-d.x,h=i.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:i.width,height:i.height}}function Du(e){return Ut(e).position==="static"}function Cg(e,t){if(!pr(e)||Ut(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return mr(e)===r&&(r=r.ownerDocument.body),r}function $b(e,t){const r=kt(e);if(Sc(e))return r;if(!pr(e)){let s=vn(e);for(;s&&!Ks(s);){if(it(s)&&!Du(s))return s;s=vn(s)}return r}let n=Cg(e,t);for(;n&&SO(n)&&Du(n);)n=Cg(n,t);return n&&Ks(n)&&Du(n)&&!Uh(n)?r:n||EO(e)||r}const pI=async function(e){const t=this.getOffsetParent||$b,r=this.getDimensions,n=await r(e.floating);return{reference:hI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mI(e){return Ut(e).direction==="rtl"}const gI={convertOffsetParentRelativeRectToViewportRelativeRect:sI,getDocumentElement:mr,getClippingRect:dI,getOffsetParent:$b,getElementRects:pI,getClientRects:oI,getDimensions:fI,getScale:Os,isElement:it,isRTL:mI};function Bb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vI(e,t){let r=null,n;const s=mr(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(l||t(),!h||!p)return;const v=va(f),x=va(s.clientWidth-(d+h)),b=va(s.clientHeight-(f+p)),y=va(d),g={rootMargin:-v+"px "+-x+"px "+-b+"px "+-y+"px",threshold:Un(0,Qs(1,c))||1};let _=!0;function k(S){const j=S[0].intersectionRatio;if(j!==c){if(!_)return i();j?i(!1,j):n=setTimeout(()=>{i(!1,1e-7)},1e3)}j===1&&!Bb(u,e.getBoundingClientRect())&&i(),_=!1}try{r=new IntersectionObserver(k,{...g,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,g)}r.observe(e)}return i(!0),o}function yI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Yh(e),d=s||o?[...u?Di(u):[],...Di(t)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const f=u&&l?vI(u,r):null;let h=-1,p=null;i&&(p=new ResizeObserver(y=>{let[m]=y;m&&m.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var g;(g=p)==null||g.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let v,x=c?Jn(e):null;c&&b();function b(){const y=Jn(e);x&&!Bb(x,y)&&r(),x=y,v=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(m=>{s&&m.removeEventListener("scroll",r),o&&m.removeEventListener("resize",r)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const xI=tI,bI=XO,Eg=JO,wI=(e,t,r)=>{const n=new Map,s={platform:gI,...r},o={...s.platform,_c:n};return KO(e,t,{...s,platform:o})};var _I=typeof document<"u",kI=function(){},Ha=_I?w.useLayoutEffect:kI;function $l(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!$l(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!$l(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ub(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pg(e,t){const r=Ub(e);return Math.round(t*r)/r}function Cu(e){const t=w.useRef(e);return Ha(()=>{t.current=e}),t}function SI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(n);$l(h,n)||p(n);const[v,x]=w.useState(null),[b,y]=w.useState(null),m=w.useCallback(C=>{C!==S.current&&(S.current=C,x(C))},[]),g=w.useCallback(C=>{C!==j.current&&(j.current=C,y(C))},[]),_=o||v,k=i||b,S=w.useRef(null),j=w.useRef(null),D=w.useRef(d),N=c!=null,E=Cu(c),M=Cu(s),L=Cu(u),$=w.useCallback(()=>{if(!S.current||!j.current)return;const C={placement:t,strategy:r,middleware:h};M.current&&(C.platform=M.current),wI(S.current,j.current,C).then(T=>{const O={...T,isPositioned:L.current!==!1};z.current&&!$l(D.current,O)&&(D.current=O,Oi.flushSync(()=>{f(O)}))})},[h,t,r,M,L]);Ha(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(C=>({...C,isPositioned:!1})))},[u]);const z=w.useRef(!1);Ha(()=>(z.current=!0,()=>{z.current=!1}),[]),Ha(()=>{if(_&&(S.current=_),k&&(j.current=k),_&&k){if(E.current)return E.current(_,k,$);$()}},[_,k,$,E,N]);const R=w.useMemo(()=>({reference:S,floating:j,setReference:m,setFloating:g}),[m,g]),I=w.useMemo(()=>({reference:_,floating:k}),[_,k]),H=w.useMemo(()=>{const C={position:r,left:0,top:0};if(!I.floating)return C;const T=Pg(I.floating,d.x),O=Pg(I.floating,d.y);return l?{...C,transform:"translate("+T+"px, "+O+"px)",...Ub(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:O}},[r,l,I.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:$,refs:R,elements:I,floatingStyles:H}),[d,$,R,I,H])}const NI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Eg({element:n.current,padding:s}).fn(r):{}:n?Eg({element:n,padding:s}).fn(r):{}}}},jI=(e,t)=>({...xI(e),options:[e,t]}),DI=(e,t)=>({...bI(e),options:[e,t]}),CI=(e,t)=>({...NI(e),options:[e,t]}),EI={...f0};let Tg=!1,PI=0;const Rg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PI++;function TI(){const[e,t]=w.useState(()=>Tg?Rg():void 0);return Fl(()=>{e==null&&t(Rg())},[]),w.useEffect(()=>{Tg=!0},[]),e}const RI=EI.useId,Wb=RI||TI,OI=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:i}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:f,stroke:h,d:p,style:{transform:v,...x}={},...b}=t,y=Wb(),[m,g]=w.useState(!1);if(Fl(()=>{if(!s)return;Ut(s).direction==="rtl"&&g(!0)},[s]),!s)return null;const[_,k]=n.split("-"),S=_==="top"||_==="bottom";let j=f;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(j=null);const D=d*2,N=D/2,E=l/2*(u/-8+1),M=c/2*u/4,L=!!p,$=j&&k==="end"?"bottom":"top";let z=j&&k==="end"?"right":"left";j&&m&&(z=k==="end"?"left":"right");const R=(o==null?void 0:o.x)!=null?j||o.x:"",I=(o==null?void 0:o.y)!=null?j||o.y:"",H=p||"M0,0"+(" H"+l)+(" L"+(l-E)+","+(c-M))+(" Q"+l/2+","+c+" "+E+","+(c-M))+" Z",C={top:L?"rotate(180deg)":"",left:L?"rotate(90deg)":"rotate(-90deg)",bottom:L?"":"rotate(180deg)",right:L?"rotate(-90deg)":"rotate(90deg)"}[_];return a.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:L?l:l+D,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[z]:R,[$]:I,[_]:S||L?"100%":"calc(100% - "+D/2+"px)",transform:[C,v].filter(T=>!!T).join(" "),...x},children:[D>0&&a.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:h,strokeWidth:D+(p?0:1),d:H}),a.jsx("path",{stroke:D&&!p?b.fill:"none",d:H}),a.jsx("clipPath",{id:y,children:a.jsx("rect",{x:-N,y:N*(L?-1:1),width:l+D,height:l})})]})});function II(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const MI=w.createContext(null),LI=w.createContext(null),AI=()=>{var e;return((e=w.useContext(MI))==null?void 0:e.id)||null},FI=()=>w.useContext(LI);function $I(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=Wb(),o=w.useRef({}),[i]=w.useState(()=>II()),l=AI()!=null,[c,u]=w.useState(n.reference),d=GO((p,v,x)=>{o.current.openEvent=p?v:void 0,i.emit("openchange",{open:p,event:v,reason:x,nested:l}),r==null||r(p,v,x)}),f=w.useMemo(()=>({setPositionReference:u}),[]),h=w.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:h,events:i,floatingId:s,refs:f}),[t,d,h,i,s,f])}function BI(e){e===void 0&&(e={});const{nodeId:t}=e,r=$I({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[o,i]=w.useState(null),[l,c]=w.useState(null),d=(s==null?void 0:s.domReference)||o,f=w.useRef(null),h=FI();Fl(()=>{d&&(f.current=d)},[d]);const p=SI({...e,elements:{...s,...l&&{reference:l}}}),v=w.useCallback(g=>{const _=it(g)?{getBoundingClientRect:()=>g.getBoundingClientRect(),getClientRects:()=>g.getClientRects(),contextElement:g}:g;c(_),p.refs.setReference(_)},[p.refs]),x=w.useCallback(g=>{(it(g)||g===null)&&(f.current=g,i(g)),(it(p.refs.reference.current)||p.refs.reference.current===null||g!==null&&!it(g))&&p.refs.setReference(g)},[p.refs]),b=w.useMemo(()=>({...p.refs,setReference:x,setPositionReference:v,domReference:f}),[p.refs,x,v]),y=w.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),m=w.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return Fl(()=>{n.dataRef.current.floatingContext=m;const g=h==null?void 0:h.nodesRef.current.find(_=>_.id===t);g&&(g.context=m)}),w.useMemo(()=>({...p,context:m,refs:b,elements:y}),[p,b,y,m])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var af=function(t,r){return af=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},af(t,r)};function He(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");af(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var oe=function(){return oe=Object.assign||function(r){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},oe.apply(this,arguments)};function ur(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var UI=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,o=e.className,i=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return P.createElement("div",{className:o,role:"dialog","aria-label":l,"aria-modal":"true"},i)},WI=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(o){var i,l=o.composed&&o.composedPath&&o.composedPath().find(function(c){return c instanceof Node})||o.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(i=n.current)===null||i===void 0||i.call(n,o))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},Dc=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,o=e.style,i=e.ignoreClass,l=WI(r,i);return P.createElement("div",{className:n,style:o,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Y;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Y||(Y={}));function Hb(){var e=typeof window<"u"?window:globalThis;return e}var Hi=12;function ce(e){if(e==null)return new Date;var t=typeof e=="string"?Eb(e):K(e);return Cc(t)?t:new Date}function Eu(e,t,r,n,s){s===void 0&&(s=ce());for(var o=Xs(r)||Xs(qh()),i=Array.isArray(t)?t:[t],l=0,c=i;l<c.length;l++){var u=c[l],d=tO(e,u,s,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(Cc(d)&&(!n||e===be(d,u,r)))return d}return null}function Cc(e,t){return Pl(e)&&!Qn(e,new Date("1/1/1800"))}function be(e,t,r){if(r==="en")return rf(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?Xs(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||Xs(qh()),rf(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Et(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&be(e,s,n)||""}var zb=" - ";function HI(e,t,r){if(!e)return"";var n=Et(e,r),s=t?Et(t,r):"";return"".concat(n).concat(zb).concat(s)}function zI(e,t){if(!(e!=null&&e.length))return"";var r=e[0]?Et(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=Et(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function Pu(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,o=s===void 0?0:s,i=t.second,l=i===void 0?0:i;return Ba(Ua(Wa(e,l),o),n)}function YI(e){return Ah(e)}function VI(e,t){return be(e,"ddd",t)}function za(e){return Kn(e)}function fn(e,t,r){var n=Xs(t||qh());return Ar(e,{locale:n,weekStartsOn:r})}function Tr(e){return yb(e)}function Fo(e){return _c(e)}function Og(e){return Zd(e)}function Ig(){return Kn(ce())}function Mg(e){return gb(e)}function qI(e){return uT(e)}function GI(e){return vb(e)}function ir(e,t){return e&&t?oO(e,t):!e&&!t}function ot(e,t){return e&&t?nO(e,t):!e&&!t}function Bl(e,t){return e&&t?sO(e,t):!e&&!t}function se(e,t){return e&&t?lT(e,t):!e&&!t}function Ln(e,t){return e&&t?iR(e,t):!e&&!t}function $o(e,t,r){var n,s=Kn(t),o=gb(r);try{n=ji(e,{start:s,end:o})}catch{n=!1}return n}function qh(){var e=Hb();return e.__localeId__}function Xs(e){if(typeof e=="string"){var t=Hb();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function KI(e,t,r){return t(be(e,"EEEE",r))}function QI(e,t){return be(e,"EEEEEE",t)}function JI(e,t){return be(e,"EEE",t)}function Gh(e,t){return be(Pt(ce(),e),"LLLL",t)}function Yb(e,t){return be(Pt(ce(),e),"LLL",t)}function XI(e,t){return be(hs(ce(),e),"QQQ",t)}function Ot(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,u=r.filterDate;return zi(e,{minDate:n,maxDate:s})||o&&o.some(function(d){return d instanceof Date?se(e,d):se(e,d.date)})||i&&i.some(function(d){var f=d.start,h=d.end;return ji(e,{start:f,end:h})})||l&&!l.some(function(d){return se(e,d)})||c&&!c.some(function(d){var f=d.start,h=d.end;return ji(e,{start:f,end:h})})||u&&!u(ce(e))||!1}function Kh(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var i=o.start,l=o.end;return ji(e,{start:i,end:l})}):n&&n.some(function(o){var i;return o instanceof Date?se(e,o):se(e,(i=o.date)!==null&&i!==void 0?i:new Date)})||!1}function Vb(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,l=r.filterDate;return zi(e,{minDate:n?yb(n):void 0,maxDate:s?vb(s):void 0})||(o==null?void 0:o.some(function(c){return ot(e,c instanceof Date?c:c.date)}))||i&&!i.some(function(c){return ot(e,c)})||l&&!l(ce(e))||!1}function ya(e,t,r,n){var s=Z(e),o=et(e),i=Z(t),l=et(t),c=Z(n);return s===i&&s===c?o<=r&&r<=l:s<i?c===s&&o<=r||c===i&&l>=r||c<i&&c>s:!1}function ZI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates;return zi(e,{minDate:n,maxDate:s})||o&&o.some(function(l){return ot(l instanceof Date?l:l.date,e)})||i&&!i.some(function(l){return ot(l,e)})||!1}function xa(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,l=r.filterDate;return zi(e,{minDate:n,maxDate:s})||(o==null?void 0:o.some(function(c){return Bl(e,c instanceof Date?c:c.date)}))||i&&!i.some(function(c){return Bl(e,c)})||l&&!l(ce(e))||!1}function ba(e,t,r){if(!t||!r||!Pl(t)||!Pl(r))return!1;var n=Z(t),s=Z(r);return n<=e&&s>=e}function Ya(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return zi(c,{minDate:n?_c(n):void 0,maxDate:s?xb(s):void 0})||(o==null?void 0:o.some(function(u){return ir(c,u instanceof Date?u:u.date)}))||i&&!i.some(function(u){return ir(c,u)})||l&&!l(ce(c))||!1}function wa(e,t,r,n){var s=Z(e),o=$n(e),i=Z(t),l=$n(t),c=Z(n);return s===i&&s===c?o<=r&&r<=l:s<i?c===s&&o<=r||c===i&&l>=r||c<i&&c>s:!1}function zi(e,t){var r,n=t===void 0?{}:t,s=n.minDate,o=n.maxDate;return(r=s&&qs(e,s)<0||o&&qs(e,o)>0)!==null&&r!==void 0?r:!1}function Lg(e,t){return t.some(function(r){return Er(r)===Er(e)&&Pr(r)===Pr(e)&&dn(r)===dn(e)})}function Ag(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,o=r.filterTime;return n&&Lg(e,n)||s&&!Lg(e,s)||o&&!o(e)||!1}function Fg(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=ce();s=Ba(s,Er(e)),s=Ua(s,Pr(e)),s=Wa(s,dn(e));var o=ce();o=Ba(o,Er(r)),o=Ua(o,Pr(r)),o=Wa(o,dn(r));var i=ce();i=Ba(i,Er(n)),i=Ua(i,Pr(n)),i=Wa(i,dn(n));var l;try{l=!ji(s,{start:o,end:i})}catch{l=!1}return l}function $g(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=Bn(e,1);return n&&Tl(n,o)>0||s&&s.every(function(i){return Tl(i,o)>0})||!1}function Bg(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=er(e,1);return n&&Tl(o,n)>0||s&&s.every(function(i){return Tl(o,i)>0})||!1}function eM(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=_c(e),i=Tb(o,1);return n&&Rl(n,i)>0||s&&s.every(function(l){return Rl(l,i)>0})||!1}function tM(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=xb(e),i=Lh(o,1);return n&&Rl(i,n)>0||s&&s.every(function(l){return Rl(i,l)>0})||!1}function Ug(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=Gs(e,1);return n&&Ol(n,o)>0||s&&s.every(function(i){return Ol(i,o)>0})||!1}function rM(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,o=s===void 0?Hi:s,i=Fo(Gs(e,o)),l=Zr(i,o).endPeriod,c=n&&Z(n);return c&&c>l||!1}function Wg(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=Dr(e,1);return n&&Ol(o,n)>0||s&&s.every(function(i){return Ol(o,i)>0})||!1}function nM(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,o=s===void 0?Hi:s,i=Dr(e,o),l=Zr(i,o).startPeriod,c=n&&Z(n);return c&&c<l||!1}function qb(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return qs(s,t)>=0});return mg(n)}else return r?mg(r):t}function Gb(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return qs(s,t)<=0});return pg(n)}else return r?pg(r):t}function Hg(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=e.length;s<o;s++){var i=e[s];if(Cr(i)){var l=be(i,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(t)||(c.push(t),n.set(l,c))}else if(typeof i=="object"){var u=Object.keys(i),d=(r=u[0])!==null&&r!==void 0?r:"",f=i[d];if(typeof d=="string"&&Array.isArray(f))for(var h=0,p=f.length;h<p;h++){var v=f[h];if(v){var l=be(v,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(d)||(c.push(d),n.set(l,c))}}}}return n}function sM(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function oM(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,o=n.holidayName;if(Cr(s)){var i=be(s,"MM.dd.yyyy"),l=r.get(i)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&sM(l.holidayNames,[o]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?ur(ur([],c,!0),[o],!1):[o],r.set(i,l)}}}),r}function iM(e,t,r,n,s){for(var o=s.length,i=[],l=0;l<o;l++){var c=e,u=s[l];u&&(c=sT(c,Er(u)),c=Xd(c,Pr(u)),c=aT(c,dn(u)));var d=Xd(e,(r+1)*n);gn(c,t)&&Qn(c,d)&&u!=null&&i.push(u)}return i}function zg(e){return e<10?"0".concat(e):"".concat(e)}function Zr(e,t){t===void 0&&(t=Hi);var r=Math.ceil(Z(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function aM(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function Yg(e){var t=e.getSeconds(),r=e.getMilliseconds();return K(e.getTime()-t*1e3-r)}function lM(e,t){return Yg(e).getTime()===Yg(t).getTime()}function Vg(e){if(!Cr(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function qg(e,t){if(!Cr(e)||!Cr(t))throw new Error("Invalid date received");var r=Vg(e),n=Vg(t);return Qn(r,n)}function Kb(e){return e.key===Y.Space}var cM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=P.createRef(),n.onTimeChange=function(s){var o,i;n.setState({time:s});var l=n.props.date,c=l instanceof Date&&!isNaN(+l),u=c?l:new Date;if(s!=null&&s.includes(":")){var d=s.split(":"),f=d[0],h=d[1];u.setHours(Number(f)),u.setMinutes(Number(h))}(i=(o=n.props).onChange)===null||i===void 0||i.call(o,u)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,i=o.date,l=o.timeString,c=o.customTimeInput;return c?w.cloneElement(c,{date:i,value:s,onChange:n.onTimeChange}):P.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var u;(u=n.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){n.onTimeChange(u.target.value||l)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return P.createElement("div",{className:"react-datepicker__input-time-container"},P.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),P.createElement("div",{className:"react-datepicker-time__input-container"},P.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),uM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===Y.Space&&(n.preventDefault(),n.key=Y.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isSameDay=function(n){return se(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(i){return r.isSameDayOrWeek(i)}):r.isSameDayOrWeek(r.props.selected),o=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!o},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return Kh(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return se(r.props.day,fn(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&se(n,fn(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,o=n.highlightDates;if(!o)return!1;var i=be(s,"MM.dd.yyyy");return o.get(i)},r.getHolidaysClass=function(){var n,s=r.props,o=s.day,i=s.holidays;if(!i)return[void 0];var l=be(o,"MM.dd.yyyy");return i.has(l)?[(n=i.get(l))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:$o(s,o,i)},r.isInSelectingRange=function(){var n,s=r.props,o=s.day,i=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,u=s.selectsDisabledDaysInRange,d=s.startDate,f=s.endDate,h=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(i||l||c)||!h||!u&&r.isDisabled()?!1:i&&f&&(Qn(h,f)||Ln(h,f))?$o(o,h,f):l&&d&&(gn(h,d)||Ln(h,d))||c&&d&&!f&&(gn(h,d)||Ln(h,d))?$o(o,d,h):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.startDate,l=s.selectsStart,c=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l?se(o,c):se(o,i)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.endDate,l=s.selectsEnd,c=s.selectsRange,u=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l||c?se(o,u):se(o,i)},r.isRangeStart=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:se(o,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:se(i,s)},r.isWeekend=function(){var n=rR(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===et(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(et(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(ce())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return Ve("react-datepicker__day",s,"react-datepicker__day--"+VI(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,i=o===void 0?"Choose":o,l=n.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,u=r.isDisabled()||r.isExcluded()?c:i;return"".concat(u," ").concat(be(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,o=n.holidays,i=o===void 0?new Map:o,l=n.excludeDates,c=be(s,"MM.dd.yyyy"),u=[];return i.has(c)&&u.push.apply(u,i.get(c).holidayNames),r.isExcluded()&&u.push(l==null?void 0:l.filter(function(d){return d instanceof Date?se(d,s):se(d==null?void 0:d.date,s)}).map(function(d){if(!(d instanceof Date))return d==null?void 0:d.message})),u.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,o=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&se(s,n))?0:-1;return o},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(wg(r.props.day),r.props.day):wg(r.props.day)},r.render=function(){return P.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&P.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),dM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===Y.Space&&(n.preventDefault(),n.key=Y.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!se(r.props.date,r.props.selected)&&se(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||se(r.props.date,r.props.selected)&&se(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&se(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,o=r.ariaLabelPrefix,i=o===void 0?t.defaultProps.ariaLabelPrefix:o,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&se(this.props.date,this.props.selected)};return P.createElement("div",{ref:this.weekNumberEl,className:Ve(c),"aria-label":"".concat(i," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),fM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,o){for(var i,l,c,u=new Date(n),d=0;d<7;d++){var f=new Date(n);f.setDate(f.getDate()+d);var h=!r.isDisabled(f);if(h){u=f;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(u,s,o),r.props.showWeekPicker&&r.handleDayClick(u,o),((i=r.props.shouldCloseOnSelect)!==null&&i!==void 0?i:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):YI(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Jt(n,6),o=new Date(n);o<=s;){if(!r.isDisabled(o))return!1;o=Jt(o,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],o=r.formatWeekNumber(n);if(r.props.showWeekNumber){var i=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,o):void 0;s.push(P.createElement(dM,oe({key:"W"},t.defaultProps,r.props,{weekNumber:o,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:i})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Jt(n,l);return P.createElement(uM,oe({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return fn(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!se(r.startOfWeek(),r.props.selected)&&se(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":se(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return P.createElement("div",{className:Ve(r)},this.renderDays())},t}(w.Component),Po,hM=6,Is={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Tu=(Po={},Po[Is.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Po[Is.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Po[Is.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Po),_a=1;function Gg(e,t){return e?Is.FOUR_COLUMNS:t?Is.TWO_COLUMNS:Is.THREE_COLUMNS}var pM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=ur([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=ur([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return Kh(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var o,i;(i=(o=r.props).onDayClick)===null||i===void 0||i.call(o,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,o;(o=(s=r.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:ot(Pt(o,n),i)},r.isRangeStartQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:Bl(hs(o,n),i)},r.isRangeEndMonth=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:ot(Pt(o,n),l)},r.isRangeEndQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:Bl(hs(o,n),l)},r.isInSelectingRangeMonth=function(n){var s,o=r.props,i=o.day,l=o.selectsStart,c=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||u)||!h?!1:l&&f?ya(h,f,n,i):c&&d||u&&d&&!f?ya(d,h,n,i):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,l=o.startDate,c=o.selectsStart,u=Pt(i,n),d=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?ot(u,d):ot(u,l)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,l=o.endDate,c=o.selectsEnd,u=o.selectsRange,d=Pt(i,n),f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||u?ot(d,f):ot(d,l)},r.isInSelectingRangeQuarter=function(n){var s,o=r.props,i=o.day,l=o.selectsStart,c=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||u)||!h?!1:l&&f?wa(h,f,n,i):c&&d||u&&d&&!f?wa(d,h,n,i):!1},r.isWeekInMonth=function(n){var s=r.props.day,o=Jt(n,6);return ot(n,s)||ot(o,s)},r.isCurrentMonth=function(n,s){return Z(n)===Z(ce())&&s===et(ce())},r.isCurrentQuarter=function(n,s){return Z(n)===Z(ce())&&s===$n(ce())},r.isSelectedMonth=function(n,s,o){return et(o)===s&&Z(n)===Z(o)},r.isSelectMonthInList=function(n,s,o){return o.some(function(i){return r.isSelectedMonth(n,s,i)})},r.isSelectedQuarter=function(n,s,o){return $n(n)===s&&Z(n)===Z(o)},r.isMonthSelected=function(){var n=r.props,s=n.day,o=n.selected,i=n.selectedDates,l=n.selectsMultiple,c=et(s);return l?i==null?void 0:i.some(function(u){return r.isSelectedMonth(s,c,u)}):!!o&&r.isSelectedMonth(s,c,o)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,o=0,i=!1,l=fn(Tr(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(v){return r.props.showWeekPicker?fn(v,r.props.locale,r.props.calendarStartDay):r.props.preSelection},u=function(v){return r.props.showWeekPicker?fn(v,r.props.locale,r.props.calendarStartDay):r.props.selected},d=r.props.selected?u(r.props.selected):void 0,f=r.props.preSelection?c(r.props.preSelection):void 0;n.push(P.createElement(fM,oe({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:o,day:l,month:et(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:d,preSelection:f,showWeekNumber:r.props.showWeekNumbers}))),!i;){o++,l=El(l,1);var h=s&&o>=hM,p=!s&&!r.isWeekInMonth(l);if(h||p)if(r.props.peekNextMonth)i=!0;else break}return n},r.onMonthClick=function(n,s){var o=r.isMonthDisabledForLabelDate(s),i=o.isDisabled,l=o.labelDate;i||r.handleDayClick(Tr(l),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),o=s.isDisabled,i=s.labelDate;o||r.handleDayMouseEnter(Tr(i))},r.handleMonthNavigation=function(n,s){var o,i,l,c;(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(c=(l=r.MONTH_REFS[n])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(n,s,o){var i,l=r.props,c=l.selected,u=l.preSelection,d=l.setPreSelection,f=l.minDate,h=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(u){var x=Gg(p,v),b=r.getVerticalOffset(x),y=(i=Tu[x])===null||i===void 0?void 0:i.grid,m=function(j,D,N){var E,M,L=D,$=N;switch(j){case Y.ArrowRight:L=er(D,_a),$=N===11?0:N+_a;break;case Y.ArrowLeft:L=Bn(D,_a),$=N===0?11:N-_a;break;case Y.ArrowUp:L=Bn(D,b),$=!((E=y==null?void 0:y[0])===null||E===void 0)&&E.includes(N)?N+12-b:N-b;break;case Y.ArrowDown:L=er(D,b),$=!((M=y==null?void 0:y[y.length-1])===null||M===void 0)&&M.includes(N)?N-12+b:N+b;break}return{newCalculatedDate:L,newCalculatedMonth:$}},g=function(j,D,N){for(var E=40,M=j,L=!1,$=0,z=m(M,D,N),R=z.newCalculatedDate,I=z.newCalculatedMonth;!L;){if($>=E){R=D,I=N;break}if(f&&R<f){M=Y.ArrowRight;var H=m(M,R,I);R=H.newCalculatedDate,I=H.newCalculatedMonth}if(h&&R>h){M=Y.ArrowLeft;var H=m(M,R,I);R=H.newCalculatedDate,I=H.newCalculatedMonth}if(ZI(R,r.props)){var H=m(M,R,I);R=H.newCalculatedDate,I=H.newCalculatedMonth}else L=!0;$++}return{newCalculatedDate:R,newCalculatedMonth:I}};if(s===Y.Enter){r.isMonthDisabled(o)||(r.onMonthClick(n,o),d==null||d(c));return}var _=g(s,u,o),k=_.newCalculatedDate,S=_.newCalculatedMonth;switch(s){case Y.ArrowRight:case Y.ArrowLeft:case Y.ArrowUp:case Y.ArrowDown:r.handleMonthNavigation(S,k);break}}},r.getVerticalOffset=function(n){var s,o;return(o=(s=Tu[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},r.onMonthKeyDown=function(n,s){var o=r.props,i=o.disabledKeyboardNavigation,l=o.handleOnMonthKeyDown,c=n.key;c!==Y.Tab&&n.preventDefault(),i||r.handleKeyboardNavigation(n,c,s),l&&l(n)},r.onQuarterClick=function(n,s){var o=hs(r.props.day,s);xa(o,r.props)||r.handleDayClick(Og(o),n)},r.onQuarterMouseEnter=function(n){var s=hs(r.props.day,n);xa(s,r.props)||r.handleDayMouseEnter(Og(s))},r.handleQuarterNavigation=function(n,s){var o,i,l,c;r.isDisabled(s)||r.isExcluded(s)||((i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(c=(l=r.QUARTER_REFS[n-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(n,s){var o,i,l=n.key;if(!r.props.disabledKeyboardNavigation)switch(l){case Y.Enter:r.onQuarterClick(n,s),(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,r.props.selected);break;case Y.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,Lh(r.props.preSelection,1));break;case Y.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,Tb(r.props.preSelection,1));break}},r.isMonthDisabledForLabelDate=function(n){var s,o=r.props,i=o.day,l=o.minDate,c=o.maxDate,u=o.excludeDates,d=o.includeDates,f=Pt(i,n);return{isDisabled:(s=(l||c||u||d)&&Vb(f,r.props))!==null&&s!==void 0?s:!1,labelDate:f}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate,c=s.preSelection,u=s.monthClassName,d=u?u(Pt(o,n)):void 0,f=r.getSelection();return Ve("react-datepicker__month-text","react-datepicker__month-".concat(n),d,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":f?r.isSelectMonthInList(o,n,f):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(o,n,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":i&&l?ya(i,l,n,o):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(o,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=et(r.props.preSelection),o=r.isMonthDisabledForLabelDate(s).isDisabled,i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=$n(r.props.preSelection),o=xa(r.props.day,r.props),i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getAriaLabel=function(n){var s=r.props,o=s.chooseDayAriaLabelPrefix,i=o===void 0?"Choose":o,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,u=s.day,d=s.locale,f=Pt(u,n),h=r.isDisabled(f)||r.isExcluded(f)?c:i;return"".concat(h," ").concat(be(f,"MMMM yyyy",d))},r.getQuarterClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,l=s.endDate,c=s.selected,u=s.minDate,d=s.maxDate,f=s.excludeDates,h=s.includeDates,p=s.filterDate,v=s.preSelection,x=s.disabledKeyboardNavigation,b=(u||d||f||h||p)&&xa(hs(o,n),r.props);return Ve("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(o,n,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!x&&v&&r.isSelectedQuarter(o,n,v)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":i&&l?wa(i,l,n,o):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(o,n)})},r.getMonthContent=function(n){var s=r.props,o=s.showFullMonthYearPicker,i=s.renderMonthContent,l=s.locale,c=s.day,u=Yb(n,l),d=Gh(n,l);return i?i(n,u,d,c):o?d:u},r.getQuarterContent=function(n){var s,o=r.props,i=o.renderQuarterContent,l=o.locale,c=XI(n,l);return(s=i==null?void 0:i(n,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var n,s=r.props,o=s.showTwoColumnMonthYearPicker,i=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,u=(n=Tu[Gg(i,o)])===null||n===void 0?void 0:n.grid;return u==null?void 0:u.map(function(d,f){return P.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(h,p){return P.createElement("div",{ref:r.MONTH_REFS[h],key:p,onClick:function(v){r.onMonthClick(v,h)},onKeyDown:function(v){Kb(v)&&(v.preventDefault(),v.key=Y.Enter),r.onMonthKeyDown(v,h)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(h)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(h)}:void 0,tabIndex:Number(r.getTabIndex(h)),className:r.getMonthClassNames(h),"aria-disabled":r.isMonthDisabled(h),role:"option","aria-label":r.getAriaLabel(h),"aria-current":r.isCurrentMonth(l,h)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,h,c):void 0},r.getMonthContent(h))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,o=n.selected,i=[1,2,3,4];return P.createElement("div",{className:"react-datepicker__quarter-wrapper"},i.map(function(l,c){return P.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(u){r.onQuarterClick(u,l)},onKeyDown:function(u){r.onQuarterKeyDown(u,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":o?r.isSelectedQuarter(s,l,o):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,o=n.selectsStart,i=n.selectsEnd,l=n.showMonthYearPicker,c=n.showQuarterYearPicker,u=n.showWeekPicker;return Ve("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||i)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":u})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,o=r.selectsMultiple;if(o)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,o=r.day,i=r.ariaLabelPrefix,l=i===void 0?"Month ":i,c=l?l.trim()+" ":"";return P.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(be(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),mM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return P.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?P.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return P.createElement(Dc,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),gM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,o){return P.createElement("option",{key:s,value:o},s)})},r.renderSelectMode=function(n){return P.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return P.createElement(mM,oe({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,o=[r.renderReadView(!s,n)];return s&&o.unshift(r.renderDropdown(n)),o},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return Yb(o,r.props.locale)}:function(o){return Gh(o,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return P.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function vM(e,t){for(var r=[],n=Tr(e),s=Tr(t);!gn(n,s);)r.push(ce(n)),n=er(n,1);return r}var yM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=nf(s),i=ir(n.props.date,s)&&ot(n.props.date,s);return P.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":i?"true":void 0},i?P.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",be(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:vM(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=Ve({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return P.createElement(Dc,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),xM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Tr(r.props.minDate),s=Tr(r.props.maxDate),o=[];!gn(n,s);){var i=nf(n);o.push(P.createElement("option",{key:i,value:i},be(n,r.props.dateFormat,r.props.locale))),n=er(n,1)}return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:nf(Tr(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=be(r.props.date,r.props.dateFormat,r.props.locale);return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return P.createElement(yM,oe({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=ce(n);ir(r.props.date,s)&&ot(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),bM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;r.list&&(r.list.scrollTop=(o=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&o!==void 0?o:0)})},r.handleClick=function(n){var s,o;(r.props.minTime||r.props.maxTime)&&Fg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Ag(n,r.props)||(o=(s=r.props).onChange)===null||o===void 0||o.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&lM(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&Fg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Ag(n,r.props)},r.liClasses=function(n){var s,o=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Er(n)*3600+Pr(n)*60+dn(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},r.handleOnKeyDown=function(n,s){var o,i;n.key===Y.Space&&(n.preventDefault(),n.key=Y.Enter),(n.key===Y.ArrowUp||n.key===Y.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Y.ArrowDown||n.key===Y.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Y.Enter&&r.handleClick(s),(i=(o=r.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},r.renderTimes=function(){for(var n,s=[],o=typeof r.props.format=="string"?r.props.format:"p",i=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||ce(),c=za(l),u=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),d=60*aM(l),f=d/i,h=0;h<f;h++){var p=Xd(c,h*i);if(s.push(p),u){var v=iM(c,p,h,i,u);s=s.concat(v)}}var x=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return P.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===x&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===x?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},be(b,o,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?P.createElement(P.Fragment,null):P.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},P.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return P.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),P.createElement("div",{className:"react-datepicker__time"},P.createElement("div",{className:"react-datepicker__time-box"},P.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){r.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),Kg=3,wM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=ur([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Ot(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Kh(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var i,l;(l=(i=n.YEAR_REFS[s])===null||i===void 0?void 0:i.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var i,l,c,u,d=n.props,f=d.date,h=d.yearItemNumber;if(!(f===void 0||h===void 0)){var p=Zr(f,h).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((l=(i=n.props).setPreSelection)===null||l===void 0||l.call(i,o),s-p<0?n.updateFocusOnPaginate(h-(p-s)):s-p>=h?n.updateFocusOnPaginate(Math.abs(h-(s-p))):(u=(c=n.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())}},n.isSameDay=function(s,o){return se(s,o)},n.isCurrentYear=function(s){return s===Z(ce())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&ir(or(ce(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&ir(or(ce(),s),n.props.endDate)},n.isInRange=function(s){return ba(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,i=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,u=o.startDate,d=o.endDate;return!(i||l||c)||!n.selectingDate()?!1:i&&d?ba(s,n.selectingDate(),d):l&&u||c&&u&&!d?ba(s,u,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,l=i.startDate,c=i.selectsStart,u=or(ce(),s);return c?ir(u,(o=n.selectingDate())!==null&&o!==void 0?o:null):ir(u,l??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,l=i.endDate,c=i.selectsEnd,u=i.selectsRange,d=or(ce(),s);return c||u?ir(d,(o=n.selectingDate())!==null&&o!==void 0?o:null):ir(d,l??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var o=n.props,i=o.minDate,l=o.maxDate,c=o.excludeDates,u=o.includeDates,d=o.filterDate,f=Fo(or(n.props.date,s)),h=(i||l||c||u||d)&&Ya(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!se(f,Fo(n.props.selected))&&se(f,Fo(n.props.preSelection))&&!h}},n.isSelectedYear=function(s){var o=n.props,i=o.selectsMultiple,l=o.selected,c=o.selectedDates;return i?c==null?void 0:c.some(function(u){return s===Z(u)}):!!l&&s===Z(l)},n.onYearClick=function(s,o){var i=n.props.date;i!==void 0&&n.handleYearClick(Fo(or(i,o)),s)},n.onYearKeyDown=function(s,o){var i,l,c=s.key,u=n.props,d=u.date,f=u.yearItemNumber,h=u.handleOnKeyDown;if(c!==Y.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(c){case Y.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(l=(i=n.props).setPreSelection)===null||l===void 0||l.call(i,n.props.selected);break;case Y.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,Dr(n.props.preSelection,1));break;case Y.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,Gs(n.props.preSelection,1));break;case Y.ArrowUp:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var p=Zr(d,f).startPeriod,v=Kg,x=o-v;if(x<p){var b=f%v;o>=p&&o<p+b?v=b:v+=b,x=o-v}n.handleYearNavigation(x,Gs(n.props.preSelection,v));break}case Y.ArrowDown:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var y=Zr(d,f).endPeriod,v=Kg,x=o+v;if(x>y){var b=f%v;o<=y&&o>y-b?v=b:v+=b,x=o+v}n.handleYearNavigation(x,Dr(n.props.preSelection,v));break}}h&&h(s)},n.getYearClassNames=function(s){var o=n.props,i=o.date,l=o.minDate,c=o.maxDate,u=o.excludeDates,d=o.includeDates,f=o.filterDate,h=o.yearClassName;return Ve("react-datepicker__year-text","react-datepicker__year-".concat(s),i?h==null?void 0:h(or(i,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||u||d||f)&&Ya(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=Z(n.props.preSelection),i=Ya(s,n.props);return s===o&&!i?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,o=s.date,i=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(o===void 0)return null;for(var u=Zr(o,i),d=u.startPeriod,f=u.endPeriod,h=function(x){n.push(P.createElement("div",{ref:p.YEAR_REFS[x-d],onClick:function(b){r.onYearClick(b,x)},onKeyDown:function(b){Kb(b)&&(b.preventDefault(),b.key=Y.Enter),r.onYearKeyDown(b,x)},tabIndex:Number(p.getYearTabIndex(x)),className:p.getYearClassNames(x),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,x)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,x)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,x)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,x)}:void 0,key:x,"aria-current":p.isCurrentYear(x)?"date":void 0},p.getYearContent(x)))},p=this,v=d;v<=f;v++)h(v);return P.createElement("div",{className:"react-datepicker__year"},P.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function _M(e,t,r,n){for(var s=[],o=0;o<2*t+1;o++){var i=e+t-o,l=!0;r&&(l=Z(r)<=i),n&&l&&(l=Z(n)>=i),l&&s.push(i)}return s}var kM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var l=n.props.year,c=n.state.yearsList.map(function(f){return P.createElement("div",{className:l===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:n.onChange.bind(n,f),"aria-selected":l===f?"true":void 0},l===f?P.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",f)}),u=n.props.minDate?Z(n.props.minDate):null,d=n.props.maxDate?Z(n.props.maxDate):null;return(!d||!n.state.yearsList.find(function(f){return f===d}))&&c.unshift(P.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!n.state.yearsList.find(function(f){return f===u}))&&c.push(P.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},n.onChange=function(l){n.props.onChange(l)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(l){var c=n.state.yearsList.map(function(u){return u+l});n.setState({yearsList:c})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,i=s||(o?10:5);return n.state={yearsList:_M(n.props.year,i,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=Ve({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return P.createElement(Dc,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),SM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?Z(r.props.minDate):1900,s=r.props.maxDate?Z(r.props.maxDate):2100,o=[],i=n;i<=s;i++)o.push(P.createElement("option",{key:i,value:i},i));return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},P.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return P.createElement(kM,oe({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var o;(o=r.onSelect)===null||o===void 0||o.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var o,i;(i=(o=r.props).onSelect)===null||i===void 0||i.call(o,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),NM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],jM=function(e){var t=(e.className||"").split(/\s+/);return NM.some(function(r){return t.indexOf(r)>=0})},DM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,i;jM(s.target)&&((i=(o=n.props).onDropdownFocus)===null||i===void 0||i.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,i=s.selected,l=s.openToDate,c=qb(n.props),u=Gb(n.props),d=ce(),f=l||i||o;return f||(c&&Qn(d,c)?c:u&&gn(d,u)?u:d)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:er(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Bn(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,i){n.props.onSelect(s,o,i),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:or(ce(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,i,l,c;(i=(o=n.props).onYearChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Ot(s,n.props))return s;for(var o=Tr(s),i=GI(s),l=cT(i,o),c=null,u=0;u<=l;u++){var d=Jt(o,u);if(!Ot(d,n.props)){c=d;break}}return c},n.handleMonthChange=function(s){var o,i,l,c=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(c),n.props.adjustDateOnChange&&(n.props.onSelect(c),(l=(i=n.props).setOpen)===null||l===void 0||l.call(i,!0)),n.props.setPreSelection&&n.props.setPreSelection(c)},n.handleCustomMonthChange=function(s){var o,i;(i=(o=n.props).onMonthChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var i=o.date;return{date:or(i,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var i=o.date;return{date:Pt(i,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var i=o.date;return{date:or(Pt(i,et(s)),Z(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=fn(s,n.props.locale,n.props.calendarStartDay),i=[];return n.props.showWeekNumbers&&i.push(P.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),i.concat([0,1,2,3,4,5,6].map(function(l){var c=Jt(o,l),u=n.formatWeekday(c,n.props.locale),d=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return P.createElement("div",{key:l,"aria-label":be(c,"EEEE",n.props.locale),className:Ve("react-datepicker__day-name",d)},u)}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?KI(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?JI(s,o):QI(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:Gs(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,i;if(!n.props.renderCustomHeader){var l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,u=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:c,d=Bn(n.state.date,u),f;switch(!0){case n.props.showMonthYearPicker:f=Ug(n.state.date,n.props);break;case n.props.showYearPicker:f=rM(n.state.date,n.props);break;case n.props.showQuarterYearPicker:f=eM(n.state.date,n.props);break;default:f=$g(d,n.props);break}if(!(!((i=n.props.forceShowMonthNavigation)!==null&&i!==void 0?i:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&f||n.props.showTimeSelectOnly)){var h=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(v=n.decreaseYear),f&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var x=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,m=y===void 0?t.defaultProps.previousMonthButtonLabel:y,g=b.previousYearButtonLabel,_=g===void 0?t.defaultProps.previousYearButtonLabel:g,k=n.props,S=k.previousMonthAriaLabel,j=S===void 0?typeof m=="string"?m:"Previous Month":S,D=k.previousYearAriaLabel,N=D===void 0?typeof _=="string"?_:"Previous Year":D;return P.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:n.props.handleOnKeyDown,"aria-label":x?N:j},P.createElement("span",{className:h.join(" ")},x?_:m))}}},n.increaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:Dr(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.showMonthYearPicker:o=Wg(n.state.date,n.props);break;case n.props.showYearPicker:o=nM(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=tM(n.state.date,n.props);break;default:o=Bg(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var i=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var c=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(c=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),c=void 0);var u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,d=n.props,f=d.nextMonthButtonLabel,h=f===void 0?t.defaultProps.nextMonthButtonLabel:f,p=d.nextYearButtonLabel,v=p===void 0?t.defaultProps.nextYearButtonLabel:p,x=n.props,b=x.nextMonthAriaLabel,y=b===void 0?typeof h=="string"?h:"Next Month":b,m=x.nextYearAriaLabel,g=m===void 0?typeof v=="string"?v:"Next Year":m;return P.createElement("button",{type:"button",className:i.join(" "),onClick:c,onKeyDown:n.props.handleOnKeyDown,"aria-label":u?g:y},P.createElement("span",{className:l.join(" ")},u?v:h))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),P.createElement("h2",{className:o.join(" ")},be(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return P.createElement(SM,oe({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Z(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return P.createElement(gM,oe({},t.defaultProps,n.props,{month:et(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return P.createElement(xM,oe({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(Ig(),s),n.props.setPreSelection&&n.props.setPreSelection(Ig())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return P.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var o=s.monthDate,i=s.i;return P.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),P.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(i!==0),n.renderMonthYearDropdown(i!==0),n.renderYearDropdown(i!==0)),P.createElement("div",{className:"react-datepicker__day-names"},n.header(o)))},n.renderCustomHeader=function(s){var o,i,l=s.monthDate,c=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var u=$g(n.state.date,n.props),d=Bg(n.state.date,n.props),f=Ug(n.state.date,n.props),h=Wg(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return P.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(i=(o=n.props).renderCustomHeader)===null||i===void 0?void 0:i.call(o,oe(oe({},n.state),{customHeaderCount:c,monthDate:l,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:d,prevYearButtonDisabled:f,nextYearButtonDisabled:h})),p&&P.createElement("div",{className:"react-datepicker__day-names"},n.header(l)))},n.renderYearHeader=function(s){var o=s.monthDate,i=n.props,l=i.showYearPicker,c=i.yearItemNumber,u=c===void 0?t.defaultProps.yearItemNumber:c,d=Zr(o,u),f=d.startPeriod,h=d.endPeriod;return P.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(f," - ").concat(h):Z(o))},n.renderHeader=function(s){var o=s.monthDate,i=s.i,l=i===void 0?0:i,c={monthDate:o,i:l};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(c);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(c);default:return n.renderDefaultHeader(c)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var i=[],l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Dr(n.state.date,c):Bn(n.state.date,c),d=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:c,f=0;f<l;++f){var h=f-d+c,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Dr(u,h):er(u,h),v="month-".concat(f),x=f<l-1,b=f>0;i.push(P.createElement("div",{key:v,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:f}),P.createElement(pM,oe({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:f,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:x,monthShowsDuplicateDaysStart:b}))))}return i}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return P.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),P.createElement(wM,oe({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return P.createElement(bM,oe({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&Cc(s)&&!!n.props.selected,i=o?"".concat(zg(s.getHours()),":").concat(zg(s.getMinutes())):"";if(n.props.showTimeInput)return P.createElement(cM,oe({},t.defaultProps,n.props,{date:s,timeString:i,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=Zr(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),i=o.startPeriod,l=o.endPeriod,c;return n.props.showYearPicker?c="".concat(i," - ").concat(l):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?c=Z(n.state.date):c="".concat(Gh(et(n.state.date),n.props.locale)," ").concat(Z(n.state.date)),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&c)},n.renderChildren=function(){if(n.props.children)return P.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Hi}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!se(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!ot(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!se(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||UI;return P.createElement(Dc,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},P.createElement("div",{style:{display:"contents"},ref:this.containerRef},P.createElement(r,{className:Ve("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),CM=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return P.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(P.isValidElement(t)){var i=t;return P.cloneElement(i,{className:"".concat(i.props.className||""," ").concat(o," ").concat(n),onClick:function(l){typeof i.props.onClick=="function"&&i.props.onClick(l),typeof s=="function"&&s(l)}})}return P.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},P.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Qb=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return my.createPortal(this.props.children,this.el)},t}(w.Component),EM="[tabindex], a, button, input, select, textarea",PM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Jb=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(EM),1,-1).filter(PM)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?P.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},P.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,P.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function TM(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,o=w.useRef(null),i=BI(oe({open:!s,whileElementsMounted:yI,placement:r.popperPlacement,middleware:ur([DI({padding:15}),jI(10),CI({element:o})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),l=oe(oe({},r),{hidePopper:s,popperProps:oe(oe({},i),{arrowRef:o})});return P.createElement(e,oe({},l))};return t}var RM=function(e){He(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,o=r.hidePopper,i=o===void 0?t.defaultProps.hidePopper:o,l=r.popperComponent,c=r.targetComponent,u=r.enableTabLoop,d=r.popperOnKeyDown,f=r.portalId,h=r.portalHost,p=r.popperProps,v=r.showArrow,x=void 0;if(!i){var b=Ve("react-datepicker-popper",n);x=P.createElement(Jb,{enableTabLoop:u},P.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:d},l,v&&P.createElement(OI,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(x=w.createElement(this.props.popperContainer,{},x)),f&&!i&&(x=P.createElement(Qb,{portalId:f,portalHost:h},x));var y=Ve("react-datepicker-wrapper",s);return P.createElement(P.Fragment,null,P.createElement("div",{ref:p.refs.setReference,className:y},c),x)},t}(w.Component),OM=TM(RM),Qg="react-datepicker-ignore-onclickoutside";function IM(e,t){return e&&t?et(e)!==et(t)||Z(e)!==Z(t):e!==t}var Ru="Date input not valid.",MM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:ce()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,i){var l=new Date(i.date);return Cc(l)?ur(ur([],o,!0),[oe(oe({},i),{date:l})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),i=qb(n.props),l=Gb(n.props),c=i&&Qn(o,za(i))?i:l&&gn(o,Mg(l))?l:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:c,highlightDates:Hg(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(oe(oe({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(oe(oe({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Ou},function(){s||n.setState(function(i){return{focused:o?i.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Cr(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,i,l=n.state.wasHidden,c=l?n.state.open:!0;l&&n.resetHiddenStatus(),n.state.preventFocus||((i=(o=n.props).onFocus)===null||i===void 0||i.call(o,s),c&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var o,i;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((i=(o=n.props).onBlur)===null||i===void 0||i.call(o,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,i;n.props.inline||n.setOpen(!1),(i=(o=n.props).onClickOutside)===null||i===void 0||i.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,i,l,c,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var f=u[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,u),!f||typeof f.isDefaultPrevented!="function"||f.isDefaultPrevented()))){n.setState({inputValue:(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:null,lastPreSelectChange:LM});var h=n.props,p=h.selectsRange,v=h.startDate,x=h.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(o=n.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,m=(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:"";if(p){var g=m.split(b.includes("-")?zb:"-",2).map(function(M){return M.trim()}),_=g[0],k=g[1],S=Eu(_??"",b,n.props.locale,y),j=Eu(k??"",b,n.props.locale,y),D=(v==null?void 0:v.getTime())!==(S==null?void 0:S.getTime()),N=(x==null?void 0:x.getTime())!==(j==null?void 0:j.getTime());if(!D&&!N||S&&Ot(S,n.props)||j&&Ot(j,n.props))return;(l=(i=n.props).onChange)===null||l===void 0||l.call(i,[S,j],f)}else{var E=Eu(m,b,n.props.locale,y,(c=n.props.selected)!==null&&c!==void 0?c:void 0);(E||!m)&&n.setSelected(E,f,!0)}}},n.handleSelect=function(s,o,i){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(o),n.setSelected(s,o,!1,i),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var l=n.props,c=l.startDate,u=l.endDate;c&&!u&&(n.props.swapRange||!qg(s,c))&&n.setOpen(!1)}}},n.setSelected=function(s,o,i,l){var c,u,d=s;if(n.props.showYearPicker){if(d!==null&&Ya(Z(d),n.props))return}else if(n.props.showMonthYearPicker){if(d!==null&&Vb(d,n.props))return}else if(d!==null&&Ot(d,n.props))return;var f=n.props,h=f.onChange,p=f.selectsRange,v=f.startDate,x=f.endDate,b=f.selectsMultiple,y=f.selectedDates,m=f.minTime,g=f.swapRange;if(!Ln(n.props.selected,d)||n.props.allowSameDay||p||b)if(d!==null&&(n.props.selected&&(!i||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(d=Pu(d,{hour:Er(n.props.selected),minute:Pr(n.props.selected),second:dn(n.props.selected)})),!i&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&m&&(d=Pu(d,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),n.props.inline||n.setState({preSelection:d}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:l})),p){var _=!v&&!x,k=v&&!x,S=v&&x;_?h==null||h([d,null],o):k&&(d===null?h==null||h([null,null],o):qg(d,v)?g?h==null||h([d,v],o):h==null||h([d,null],o):h==null||h([v,d],o)),S&&(h==null||h([d,null],o))}else if(b){if(d!==null)if(!(y!=null&&y.length))h==null||h([d],o);else{var j=y.some(function(N){return se(N,d)});if(j){var D=y.filter(function(N){return!se(N,d)});h==null||h(D,o)}else h==null||h(ur(ur([],y,!0),[d],!1),o)}}else h==null||h(d,o);i||((u=(c=n.props).onSelect)===null||u===void 0||u.call(c,d,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=Cr(n.props.minDate),i=Cr(n.props.maxDate),l=!0;if(s){var c=za(s);if(o&&i)l=$o(s,n.props.minDate,n.props.maxDate);else if(o){var u=za(n.props.minDate);l=gn(s,u)||Ln(c,u)}else if(i){var d=Mg(n.props.maxDate);l=Qn(s,d)||Ln(c,d)}}l&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,i;if(!(n.props.selectsRange||n.props.selectsMultiple)){var l=n.props.selected?n.props.selected:n.getPreSelection(),c=n.props.selected?s:Pu(l,{hour:Er(s),minute:Pr(s)});n.setState({preSelection:c}),(i=(o=n.props).onChange)===null||i===void 0||i.call(o,c),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,i,l,c,u,d;(i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s);var f=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(f===Y.ArrowDown||f===Y.ArrowUp||f===Y.Enter)&&((l=n.onInputClick)===null||l===void 0||l.call(n));return}if(n.state.open){if(f===Y.ArrowDown||f===Y.ArrowUp){s.preventDefault();var h=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=n.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(h);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=ce(n.state.preSelection);f===Y.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Ou?(n.handleSelect(v,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(v)):n.setOpen(!1)):f===Y.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):f===Y.Tab&&n.setOpen(!1),n.inputOk()||(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Ru})}},n.onPortalKeyDown=function(s){var o=s.key;o===Y.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,i,l,c,u,d,f=n.props,h=f.minDate,p=f.maxDate,v=f.disabledKeyboardNavigation,x=f.showWeekPicker,b=f.shouldCloseOnSelect,y=f.locale,m=f.calendarStartDay,g=f.adjustDateOnChange,_=f.inline;if((i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s),!v){var k=s.key,S=s.shiftKey,j=ce(n.state.preSelection),D=function(R,I){var H=I;switch(R){case Y.ArrowRight:H=x?El(I,1):Jt(I,1);break;case Y.ArrowLeft:H=x?_g(I,1):iO(I,1);break;case Y.ArrowUp:H=_g(I,1);break;case Y.ArrowDown:H=El(I,1);break;case Y.PageUp:H=S?Gs(I,1):Bn(I,1);break;case Y.PageDown:H=S?Dr(I,1):er(I,1);break;case Y.Home:H=fn(I,y,m);break;case Y.End:H=qI(I);break}return H},N=function(R,I){for(var H=40,C=R,T=!1,O=0,F=D(R,I);!T;){if(O>=H){F=I;break}h&&F<h&&(C=Y.ArrowRight,F=Ot(h,n.props)?D(C,F):h),p&&F>p&&(C=Y.ArrowLeft,F=Ot(p,n.props)?D(C,F):p),Ot(F,n.props)?((C===Y.PageUp||C===Y.Home)&&(C=Y.ArrowRight),(C===Y.PageDown||C===Y.End)&&(C=Y.ArrowLeft),F=D(C,F)):T=!0,O++}return F};if(k===Y.Enter){s.preventDefault(),n.handleSelect(j,s),!b&&n.setPreSelection(j);return}else if(k===Y.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(c=(l=n.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:Ru});return}var E=null;switch(k){case Y.ArrowLeft:case Y.ArrowRight:case Y.ArrowUp:case Y.ArrowDown:case Y.PageUp:case Y.PageDown:case Y.Home:case Y.End:E=N(k,j);break}if(!E){(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Ru});return}if(s.preventDefault(),n.setState({lastPreSelectChange:Ou}),g&&n.setSelected(E),n.setPreSelection(E),_){var M=et(j),L=et(E),$=Z(j),z=Z(E);M!==L||$!==z?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===Y.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,i=o.selectsRange,l=o.onChange;i?l==null||l([null,null],s):l==null||l(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:P.createElement(DM,oe({showMonthYearDropdown:void 0,ref:function(i){n.calendar=i}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:oM(n.modifyHolidays()),outsideClickIgnoreClass:Qg,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,o=s.dateFormat,i=o===void 0?t.defaultProps.dateFormat:o,l=s.locale,c=n.props.showTimeInput||n.props.showTimeSelect,u=c?"PPPPp":"PPPP",d;return n.props.selectsRange?d="Selected start date: ".concat(Et(n.props.startDate,{dateFormat:u,locale:l}),". ").concat(n.props.endDate?"End date: "+Et(n.props.endDate,{dateFormat:u,locale:l}):""):n.props.showTimeSelectOnly?d="Selected time: ".concat(Et(n.props.selected,{dateFormat:i,locale:l})):n.props.showYearPicker?d="Selected year: ".concat(Et(n.props.selected,{dateFormat:"yyyy",locale:l})):n.props.showMonthYearPicker?d="Selected month: ".concat(Et(n.props.selected,{dateFormat:"MMMM yyyy",locale:l})):n.props.showQuarterYearPicker?d="Selected quarter: ".concat(Et(n.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):d="Selected date: ".concat(Et(n.props.selected,{dateFormat:u,locale:l})),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},n.renderDateInput=function(){var s,o,i,l=Ve(n.props.className,(s={},s[Qg]=n.state.open,s)),c=n.props.customInput||P.createElement("input",{type:"text"}),u=n.props.customInputRef||"ref",d=n.props,f=d.dateFormat,h=f===void 0?t.defaultProps.dateFormat:f,p=d.locale,v=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?HI(n.props.startDate,n.props.endDate,{dateFormat:h,locale:p}):n.props.selectsMultiple?zI((i=n.props.selectedDates)!==null&&i!==void 0?i:[],{dateFormat:h,locale:p}):Et(n.props.selected,{dateFormat:h,locale:p});return w.cloneElement(c,(o={},o[u]=function(x){n.input=x},o.value=v,o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Ve(c.props.className,l),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,i=s.disabled,l=s.selected,c=s.startDate,u=s.endDate,d=s.clearButtonTitle,f=s.clearButtonClassName,h=f===void 0?"":f,p=s.ariaLabelClose,v=p===void 0?"Close":p,x=s.selectedDates,b=s.readOnly;return o&&!b&&(l!=null||c!=null||u!=null||x!=null&&x.length)?P.createElement("button",{type:"button",className:Ve("react-datepicker__close-icon",h,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":v,onClick:n.onClearClick,title:d,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Hi,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,o,i,l;r.inline&&IM(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Hg(this.props.highlightDates)}),!n.focused&&!Ln(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((l=(i=this.props).onCalendarClose)===null||l===void 0||l.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,o=r.calendarIconClassname,i=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),P.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&P.createElement(CM,oe({icon:s,className:Ve(i,!i&&o,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?P.createElement(Jb,{enableTabLoop:this.props.enableTabLoop},P.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=P.createElement(Qb,oe({portalId:this.props.portalId},this.props),n)),P.createElement("div",null,this.renderInputContainer(),n)}return P.createElement(OM,oe({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),LM="input",Ou="navigate";function AM({value:e,onChange:t,label:r="Site Submit"}){const[n,s]=w.useState(""),[o,i]=w.useState([]),[l,c]=w.useState(null),[u,d]=w.useState(!1),f=w.useRef(null),h=w.useRef(null);w.useEffect(()=>{e?W.from("site_submit").select("*").eq("id",e).single().then(({data:b})=>{b&&(c(b),s(b.code||""))}):(c(null),s(""))},[e]),w.useEffect(()=>{const y=setTimeout(async()=>{if(n.length===0){i([]);return}const{data:m}=await W.from("site_submit").select("*").or(`site_submit_name.ilike.%${n}%,code.ilike.%${n}%`).limit(10).order("site_submit_name");m&&i(m)},300);return()=>clearTimeout(y)},[n]),w.useEffect(()=>{const b=y=>{h.current&&!h.current.contains(y.target)&&f.current&&!f.current.contains(y.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{c(b),s(b.code||""),t(b.id),d(!1),i([])},v=b=>{s(b.target.value),d(!0),b.target.value===""&&(t(null),c(null))},x=()=>{f.current&&f.current.select(),n.length>0&&d(!0)};return a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{ref:f,type:"text",value:n,onChange:v,onFocus:x,placeholder:"Search by site submit name...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),u&&o.length>0&&a.jsx("div",{ref:h,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:o.map(b=>a.jsxs("div",{onClick:()=>p(b),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[a.jsx("div",{className:"font-medium",children:b.code}),b.site_submit_name&&a.jsx("div",{className:"text-xs text-gray-500",children:b.site_submit_name})]},b.id))})]}),l&&a.jsx("div",{className:"mt-1",children:a.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View site submit:",l.id)},children:"View Site Submit Details "})})]})}function Xb({value:e,onChange:t,propertyId:r,label:n="Property Unit"}){const[s,o]=w.useState(""),[i,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{e?W.from("property_unit").select("*").eq("id",e).single().then(({data:m})=>{m&&(u(m),o(m.property_unit_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const g=setTimeout(async()=>{if(!r){l([]);return}let _=W.from("property_unit").select("*").eq("property_id",r);s.length>0&&(_=_.ilike("property_unit_name",`%${s}%`));const{data:k}=await _.limit(20).order("property_unit_name");k&&l(k)},300);return()=>clearTimeout(g)},[s,r,d]),w.useEffect(()=>{const m=g=>{p.current&&!p.current.contains(g.target)&&h.current&&!h.current.contains(g.target)&&f(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const v=m=>{u(m),o(m.property_unit_name||""),t(m.id),f(!1)},x=m=>{o(m.target.value),f(!0),m.target.value===""&&(t(null),u(null))},b=()=>{r&&(h.current&&h.current.select(),f(!0))},y=m=>{const g=[];m.sqft&&g.push(`${Number(m.sqft).toLocaleString()} sqft`),m.rent&&g.push(`$${Number(m.rent).toLocaleString()}/mo`);const _=[];return m.inline===!0&&_.push("Inline"),m.end_cap===!0&&_.push("End Cap"),m.patio===!0&&_.push("Patio"),_.length>0&&g.push(_.join(", ")),g.join("  ")};return a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{ref:h,type:"text",value:s,onChange:x,onFocus:b,placeholder:r?"Search or select unit...":"Select a property first",disabled:!r,className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),d&&i.length>0&&r&&a.jsx("div",{ref:p,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:i.map(m=>a.jsxs("div",{onClick:()=>v(m),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[a.jsx("div",{className:"font-medium",children:m.property_unit_name}),a.jsx("div",{className:"text-xs text-gray-500",children:y(m)})]},m.id))}),d&&i.length===0&&r&&s.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2 text-sm text-gray-500",children:"No units found for this property"})]}),c&&a.jsx("div",{className:"mt-1",children:a.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property unit:",c.id)},children:"View Property Unit Details "})})]})}function Zb({value:e,onChange:t,label:r="Property"}){const n=io(),[s,o]=w.useState(""),[i,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState(!1),[h,p]=w.useState(!1),v=w.useRef(null),x=w.useRef(null);w.useEffect(()=>{e?W.from("property").select("*").eq("id",e).single().then(({data:g})=>{g&&(u(g),o(g.property_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const _=setTimeout(async()=>{if(!s||s.trim().length===0){l([]);return}p(!0),console.log("Searching for:",s);const{data:k,error:S}=await W.from("property").select("*").ilike("property_name",`%${s}%`).limit(10).order("property_name");l(k||[]),p(!1)},300);return()=>clearTimeout(_)},[s]),w.useEffect(()=>{const g=_=>{x.current&&!x.current.contains(_.target)&&v.current&&!v.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const b=g=>{u(g),o(g.property_name||""),t(g.id),f(!1),l([])},y=g=>{const _=g.target.value;o(_),_.length>0&&f(!0),c&&_!==c.property_name&&(u(null),t(null)),_===""&&(t(null),u(null),l([]),f(!1))},m=()=>{v.current&&v.current.select(),i.length>0&&f(!0)};return a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{ref:v,type:"text",value:s,onChange:y,onFocus:m,placeholder:"Type to search properties...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),d&&a.jsx("div",{ref:x,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:h?a.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}):i.length>0?i.map(g=>{var _,k,S,j;return a.jsxs("div",{onClick:()=>b(g),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[a.jsx("div",{className:"font-medium",children:g.property_name}),(((_=g.property_type)==null?void 0:_.label)||((k=g.property_stage)==null?void 0:k.label))&&a.jsx("div",{className:"text-xs text-gray-500",children:[(S=g.property_type)==null?void 0:S.label,(j=g.property_stage)==null?void 0:j.label].filter(Boolean).join("  ")})]},g.id)}):s.length>0?a.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No properties found"}):null})]}),c&&a.jsx("div",{className:"mt-1",children:a.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>{n(`/property/${c.id}`)},children:"View Property Details "})})]})}const FM={"Negotiating LOI":50,"At Lease/PSA":75,"Under Contract / Contingent":85,Booked:90,"Executed Payable":95,"Closed Paid":100,Lost:0};function $M({deal:e,onSave:t}){const[r,n]=w.useState(e),[s,o]=w.useState(!1),[i,l]=w.useState(null),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(""),[v,x]=w.useState(""),[b,y]=w.useState([]),[m,g]=w.useState({}),[_,k]=w.useState(!1),[S,j]=w.useState(!1),D=w.useRef(null),N=w.useRef(!0);w.useEffect(()=>{n(e),g({}),j(!1),D.current=e.stage_id??null,N.current=!0},[e]),w.useEffect(()=>{W.from("deal_stage").select("id, label").then(({data:C})=>C&&u(C)),W.from("deal_team").select("id, label").then(({data:C})=>C&&f(C)),e.updated_by_id&&W.from("user").select("name").eq("id",e.updated_by_id).maybeSingle().then(({data:C})=>(C==null?void 0:C.name)&&p(C.name)),e.client_id?W.from("client").select("client_name").eq("id",e.client_id).maybeSingle().then(({data:C})=>(C==null?void 0:C.client_name)&&x(C.client_name)):x("")},[e.client_id,e.property_id]),w.useEffect(()=>{const T=setTimeout(async()=>{const O=v.trim();if(!O)return y([]);const{data:F}=await W.from("client").select("id, client_name").ilike("client_name",`%${O}%`).order("client_name",{ascending:!0}).limit(5);F&&y(F.map(G=>({id:G.id,label:G.client_name})))},150);return()=>clearTimeout(T)},[v]);const E=(C,T)=>{C==="probability"&&j(!0);const O={...r,[C]:T};if(n(O),["deal_name","deal_value","commission_percent"].includes(C)){const F=$(C,T);g(G=>{const ae={...G},_e=F[C];return _e?ae[C]=_e:delete ae[C],ae})}if(C==="commission_percent"){const F=O.flat_fee_override??(O.deal_value??0)*((T??0)/100);(async()=>{const{data:ae,error:_e}=await W.from("deal").update({commission_percent:T,fee:F}).eq("id",r.id).select().single();_e?console.error("Error auto-saving commission:",_e):ae&&t(ae)})()}},M=r.flat_fee_override??(r.deal_value??0)*((r.commission_percent??0)/100),L=()=>{var C;return(C=c.find(T=>T.id===r.stage_id))==null?void 0:C.label};w.useEffect(()=>{if(!r.stage_id||c.length===0)return;const C=L();if(!C)return;const T=FM[C];if(N.current){if(N.current=!1,r.probability==null&&typeof T=="number"){n(G=>({...G,probability:T})),k(!0);const F=setTimeout(()=>k(!1),800);return()=>clearTimeout(F)}return}if(D.current!==r.stage_id&&typeof T=="number"){n(G=>({...G,probability:T})),j(!1),k(!0);const F=setTimeout(()=>k(!1),800);return D.current=r.stage_id,()=>clearTimeout(F)}D.current=r.stage_id},[r.stage_id,c]);const $=(C,T)=>{const O={};if(C==="deal_name"&&(!T||String(T).trim().length===0)&&(O.deal_name="Opportunity Name is required."),C==="deal_value"&&(T===null||T===""||isNaN(Number(T))?O.deal_value="Enter a number.":Number(T)<0&&(O.deal_value="Must be  0.")),C==="commission_percent"){const F=Number(T);T===null||T===""||isNaN(F)?O.commission_percent="Enter a percent.":(F<0||F>100)&&(O.commission_percent="0100 only.")}return O},z=C=>{const T={};return Object.assign(T,$("deal_name",C.deal_name)),Object.assign(T,$("deal_value",C.deal_value)),Object.assign(T,$("commission_percent",C.commission_percent)),T},R=async()=>{const C=z(r);if(g(C),Object.keys(C).length>0)return;o(!0);const T={deal_name:r.deal_name,client_id:r.client_id,property_id:r.property_id,property_unit_id:r.property_unit_id,site_submit_id:r.site_submit_id,deal_value:r.deal_value,commission_percent:r.commission_percent,flat_fee_override:r.flat_fee_override,fee:M,target_close_date:r.target_close_date,loi_signed_date:r.loi_signed_date,closed_date:r.closed_date,probability:r.probability,deal_team_id:r.deal_team_id,stage_id:r.stage_id,updated_at:new Date().toISOString()},{data:O,error:F}=await W.from("deal").update(T).eq("id",r.id).select().single();o(!1),F?alert("Error saving: "+F.message):O&&t(O)},I=L(),H=I==="Closed Paid";return a.jsxs("div",{className:"relative",children:[a.jsx(ka,{title:"Deal Context",help:"Name the opportunity, choose the client, property, and deal team.",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(BM,{label:"Opportunity Name",value:r.deal_name,onChange:C=>E("deal_name",C)}),a.jsx(UM,{label:"Client",search:v,setSearch:x,suggestions:b,onSelect:(C,T)=>{E("client_id",C),x(T),y([])}}),a.jsx(Zb,{value:r.property_id,onChange:C=>E("property_id",C),label:"Property"}),a.jsx(Xb,{value:r.property_unit_id,onChange:C=>E("property_unit_id",C),propertyId:r.property_id,label:"Property Unit"}),a.jsx(AM,{value:r.site_submit_id,onChange:C=>E("site_submit_id",C),label:"Site Submit"}),a.jsx(Jg,{label:"Deal Team",value:r.deal_team_id,onChange:C=>E("deal_team_id",C),options:d}),m.deal_name&&a.jsx(Iu,{msg:m.deal_name,className:"col-span-2"})]})}),a.jsx(ka,{title:"Financials",help:"Set value and commission. Fee auto-calculates unless a flat fee is set.",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ma,{label:"Deal Value",value:r.deal_value,onChange:C=>E("deal_value",C===""?null:parseFloat(C)),format:C=>Su(C,2),editingField:i,setEditingField:l,fieldKey:"deal_value"}),m.deal_value&&a.jsx(Iu,{msg:m.deal_value}),a.jsx(ma,{label:"Commission %",value:r.commission_percent,onChange:C=>E("commission_percent",C===""?null:parseFloat(C)),format:C=>eT(C,2),editingField:i,setEditingField:l,fieldKey:"commission_percent"}),m.commission_percent&&a.jsx(Iu,{msg:m.commission_percent}),a.jsx(ma,{label:"Flat Fee Override",value:r.flat_fee_override,onChange:C=>E("flat_fee_override",C===""?null:parseFloat(C)),format:C=>C===null?"":Su(C,2),editingField:i,setEditingField:l,fieldKey:"flat_fee_override"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Calculated Fee"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:isNaN(M)?"":Su(M,2)})]})]})}),a.jsx(ka,{title:"Stage & Probability",help:"Choosing a stage will set a default probability. You can override it.",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Jg,{label:"Stage",value:r.stage_id,onChange:C=>E("stage_id",C),options:c}),a.jsx("div",{className:"rounded transition-colors duration-700 "+(_?"bg-yellow-50":"bg-transparent"),children:a.jsx(ma,{label:"Probability %",value:r.probability,onChange:C=>E("probability",C===""?null:parseFloat(C)),format:C=>tT(C),editingField:i,setEditingField:l,fieldKey:"probability"})})]})}),a.jsx(ka,{title:"Timeline",help:"Target and actual dates. Closed Date enabled only at Closed Paid.",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Mu,{label:"Target Close Date",value:r.target_close_date,onChange:C=>E("target_close_date",C)}),a.jsx(Mu,{label:"LOI Signed Date",value:r.loi_signed_date,onChange:C=>E("loi_signed_date",C)}),a.jsx(Mu,{label:"Closed Date",value:r.closed_date,onChange:C=>E("closed_date",C),disabled:!H,tooltip:H?void 0:"Set Stage to 'Closed Paid' to enable"})]})}),a.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t mt-6 p-3 flex items-center justify-between shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:r.updated_at?a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Last Updated by"}),a.jsx("span",{className:"font-medium",children:h||"Unknown"}),a.jsxs("span",{children:[new Date(r.updated_at).toLocaleDateString()," ",new Date(r.updated_at).toLocaleTimeString()]})]}):a.jsx("span",{children:"Not yet saved"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-gray-500",children:I?`Stage: ${I}`:"No stage selected"}),a.jsx("button",{onClick:R,disabled:s||Object.keys(m).length>0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:s?"Saving...":"Save Deal"})]})]})]})}function ka({title:e,help:t,children:r}){return a.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&a.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]})}function Iu({msg:e,className:t=""}){return a.jsx("p",{className:"text-xs text-red-600 mt-1 "+t,children:e})}function BM({label:e,value:t,onChange:r,type:n="text",className:s=""}){return a.jsxs("div",{className:s,children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("input",{type:n,value:t??"",onChange:o=>r(o.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})}function Mu({label:e,value:t,onChange:r,disabled:n,tooltip:s}){const o=t?Eb(t):null;return a.jsxs("div",{title:s,children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx(MM,{selected:o,onChange:i=>r(i?rf(i,"yyyy-MM-dd"):null),className:`mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${n?"bg-gray-100 cursor-not-allowed":""}`,dateFormat:"MM/dd/yyyy",isClearable:!0,disabled:n})]})}function Jg({label:e,value:t,onChange:r,options:n}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsxs("select",{value:t??"",onChange:s=>r(s.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"-- Select --"}),n.map(s=>a.jsx("option",{value:s.id,children:s.label},s.id))]})]})}function UM({label:e,search:t,setSearch:r,suggestions:n,onSelect:s}){const o=w.useRef(null),i=()=>{o.current&&o.current.select()};return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("input",{ref:o,type:"text",value:t,onChange:l=>r(l.target.value),onFocus:i,placeholder:`Search ${e.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),n.filter(l=>l.label!==t).length>0&&a.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:n.filter(l=>l.label!==t).map(l=>a.jsx("li",{onClick:()=>s(l.id,l.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:l.label},l.id))})]})}const ew=w.createContext(null),tw=()=>{const e=w.useContext(ew);if(!e)throw new Error("usePanelManager must be used within a FloatingPanelManager");return e},WM=({children:e})=>{const[t,r]=w.useState(null),n=i=>{r(i)},s=()=>{r(null)},o=i=>{t===i?s():n(i)};return a.jsx(ew.Provider,{value:{activePanel:t,openPanel:n,closePanel:s,togglePanel:o},children:e})},To=({type:e,icon:t,count:r,label:n,position:s})=>{const{activePanel:o,togglePanel:i}=tw(),l=o===e;return a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{onClick:()=>i(e),className:`
          relative flex items-center justify-center w-10 h-10 rounded-full shadow-md
          transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg
          backdrop-blur-sm border
          ${l?"bg-blue-600 text-white border-blue-500 shadow-blue-200":"bg-white/90 text-gray-600 hover:bg-white border-gray-200 hover:text-gray-800"}
        `,title:n,children:[a.jsx("span",{className:"text-sm",children:t}),r!==void 0&&r>0&&a.jsx("span",{className:`
            absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full
            border-2 border-white
            ${l?"bg-white text-blue-600":"bg-red-500 text-white"}
          `,children:r>99?"99+":r})]}),a.jsxs("div",{className:"absolute right-full mr-3 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[n,r!==void 0&&a.jsxs("span",{className:"ml-1 text-gray-300",children:["(",r,")"]}),a.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]})},HM=({children:e,contactCount:t=0,notesCount:r=0,filesCount:n=0,activityCount:s=0,paymentsCount:o=0})=>a.jsxs("div",{className:"relative",children:[e,a.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 space-y-3",style:{zIndex:50},children:[a.jsx(To,{type:"contacts",icon:"",count:t,label:"Contact Roles",position:0}),a.jsx(To,{type:"notes",icon:"",count:r,label:"Notes",position:1}),a.jsx(To,{type:"files",icon:"",count:n,label:"Files",position:2}),a.jsx(To,{type:"activity",icon:"",count:s,label:"Activity",position:3}),a.jsx(To,{type:"payments",icon:"",count:o,label:"Payments",position:4})]})]}),rw=e=>{const[t,r]=w.useState([]),[n,s]=w.useState(!0),[o,i]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!e){r([]),s(!1);return}try{s(!0),i(null);const{data:c,error:u}=await W.from("deal_contact").select("id, contact_id, role_id, primary_contact").eq("deal_id",e);if(u)throw u;if(!c||c.length===0){r([]),s(!1);return}const d=[...new Set(c.map(g=>g.contact_id).filter(Boolean))],f=[...new Set(c.map(g=>g.role_id).filter(Boolean))],{data:h,error:p}=await W.from("contact").select("id, first_name, last_name, email, phone, mobile_phone").in("id",d);if(p)throw p;const{data:v,error:x}=await W.from("contact_role").select("role_id, label").in("role_id",f);if(x)throw x;const b=new Map;h==null||h.forEach(g=>{b.set(g.id,g)});const y=new Map;v==null||v.forEach(g=>{y.set(g.role_id,g)});const m=c.map(g=>{const _=b.get(g.contact_id),k=y.get(g.role_id);let S="Unknown Contact";if(_){const j=_.first_name||"",D=_.last_name||"";j&&D?S=`${j} ${D}`:j?S=j:D&&(S=D)}return{id:g.id,contact_name:S,contact_email:(_==null?void 0:_.email)||null,contact_phone:(_==null?void 0:_.phone)||null,contact_mobile:(_==null?void 0:_.mobile_phone)||null,role_label:(k==null?void 0:k.label)||"No Role",primary_contact:g.primary_contact||!1,contact_id:g.contact_id}});m.sort((g,_)=>g.primary_contact&&!_.primary_contact?-1:!g.primary_contact&&_.primary_contact?1:g.role_label.localeCompare(_.role_label)),r(m)}catch(c){console.error("Error fetching deal contacts:",c),i("Failed to load contacts")}finally{s(!1)}})()},[e]),{contacts:t,loading:n,error:o,refetch:()=>{e&&s(!0)}}},zM=({dealId:e})=>{const{activePanel:t,closePanel:r}=tw(),{contacts:n,loading:s,error:o}=rw(e),i=t==="contacts",l=u=>{const d=u.split(" ");return d.length>=2?`${d[0].charAt(0)}${d[d.length-1].charAt(0)}`.toUpperCase():u.charAt(0).toUpperCase()||"?"},c=(u,d)=>{u&&window.open(`tel:${u}`,"_self")};return i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/10 transition-all duration-300 z-40",onClick:r}),a.jsxs("div",{className:`
        fixed right-0 top-0 h-full w-80 bg-white shadow-2xl border-l border-gray-200
        transform transition-all duration-300 ease-out z-50
        ${i?"translate-x-0":"translate-x-full"}
        flex flex-col
      `,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),a.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," contact",n.length!==1?"s":""," on this deal"]})]})]}),a.jsx("button",{onClick:r,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:s?a.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((u,d)=>a.jsx("div",{className:"animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):o?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-red-500 text-lg",children:""})}),a.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Contacts"}),a.jsx("p",{className:"text-sm text-gray-500",children:o})]}):n.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-gray-300 text-2xl",children:""})}),a.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Contacts Yet"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add contacts to this deal to see them here"}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Contact"})]}):a.jsx("div",{className:"divide-y divide-gray-50",children:n.map(u=>a.jsx("div",{className:"p-4 hover:bg-gray-25 transition-colors",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-sm",children:a.jsx("span",{className:"text-white font-medium text-sm",children:l(u.contact_name)})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("button",{className:"text-sm font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate",onClick:()=>{console.log("View contact:",u.contact_id)},children:u.contact_name}),u.primary_contact&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:"Primary"})]}),a.jsx("p",{className:"text-xs font-medium text-blue-600 mb-2",children:u.role_label}),a.jsxs("div",{className:"space-y-1",children:[u.contact_email&&a.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[" ",u.contact_email]}),u.contact_phone&&a.jsxs("button",{onClick:()=>c(u.contact_phone,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer",children:[" ",u.contact_phone]}),u.contact_mobile&&a.jsxs("button",{onClick:()=>c(u.contact_mobile,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer block",children:[" ",u.contact_mobile]})]})]})]})},u.id))})}),a.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 shrink-0",children:a.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[a.jsx("span",{className:"mr-2",children:"+"}),"Add Contact Role"]})})]})]}):null},_r=({label:e,value:t,onChange:r,disabled:n=!1})=>{const[s,o]=w.useState(!1),[i,l]=w.useState(""),c=t?`${t.toFixed(1)}%`:"0.0%",u=()=>{n||(o(!0),l((t==null?void 0:t.toString())||""))},d=()=>{const p=parseFloat(i);r(isNaN(p)?null:p),o(!1)},f=()=>{o(!1),l("")},h=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),d()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),f())};return s?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{type:"number",step:"0.1",value:i,onChange:p=>l(p.target.value),onBlur:d,onKeyDown:h,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",autoFocus:!0})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("div",{onClick:u,className:`mt-1 block w-full rounded border-gray-300 shadow-sm px-3 py-2 transition-colors border text-sm ${n?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200"}`,title:n?"Not editable":"Click to edit",children:c})]})},YM=({value:e,onChange:t,label:r="Referral Payee"})=>{const[n,s]=w.useState(""),[o,i]=w.useState([]),l=w.useRef(null);w.useEffect(()=>{(async()=>{if(e){const{data:h}=await W.from("client").select("client_name").eq("id",e).single();h!=null&&h.client_name&&s(h.client_name)}else s("")})()},[e]),w.useEffect(()=>{const h=setTimeout(async()=>{const p=n.trim();if(!p)return i([]);const{data:v}=await W.from("client").select("id, client_name").ilike("client_name",`%${p}%`).order("client_name",{ascending:!0}).limit(5);v&&i(v.map(x=>({id:x.id,label:x.client_name})))},150);return()=>clearTimeout(h)},[n]);const c=()=>{l.current&&l.current.select()},u=(f,h)=>{t(f),s(h),i([])},d=f=>{const h=f.target.value;s(h),h===""&&t(null)};return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),a.jsx("input",{ref:l,type:"text",value:n,onChange:d,onFocus:c,placeholder:`Search ${r.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),o.filter(f=>f.label!==n).length>0&&a.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:o.filter(f=>f.label!==n).map(f=>a.jsx("li",{onClick:()=>u(f.id,f.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:f.label},f.id))})]})},Qh=(e,t=[])=>w.useMemo(()=>{const r=(e==null?void 0:e.fee)||0,n=(e==null?void 0:e.referral_fee_usd)||0,s=(e==null?void 0:e.house_usd)||0,o=r-n-s,i=(e==null?void 0:e.origination_percent)||0,l=(e==null?void 0:e.site_percent)||0,c=(e==null?void 0:e.deal_percent)||0,u=i/100*o,d=l/100*o,f=c/100*o,h=u+d+f,p=t.map(m=>{const g=(m==null?void 0:m.split_origination_percent)||0,_=(m==null?void 0:m.split_site_percent)||0,k=(m==null?void 0:m.split_deal_percent)||0,S=g/100*u,j=_/100*d,D=k/100*f,N=S+j+D;return{...m,calculatedOriginationUSD:S,calculatedSiteUSD:j,calculatedDealUSD:D,calculatedTotalUSD:N}}),v=p.reduce((m,g)=>m+(g.split_origination_percent||0),0),x=p.reduce((m,g)=>m+(g.split_site_percent||0),0),b=p.reduce((m,g)=>m+(g.split_deal_percent||0),0),y=p.reduce((m,g)=>m+g.calculatedTotalUSD,0);return{baseAmounts:{gci:r,referralFeeUsd:n,houseUsd:s,agci:o,originationPercent:i,sitePercent:l,dealPercent:c,originationUSD:u,siteUSD:d,dealUSD:f,totalDealUSD:h},brokerSplits:p,totals:{originationPercent:v,sitePercent:x,dealPercent:b,brokerUSD:y},validation:{isOriginationValid:v<=100,isSiteValid:x<=100,isDealValid:b<=100,areAllValid:v<=100&&x<=100&&b<=100}}},[e,t]),VM=({title:e,help:t,children:r})=>a.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&a.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),qM=({deal:e,onFieldUpdate:t})=>{const{baseAmounts:r}=Qh(e),n=o=>o==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),s=o=>o==null?"0.0%":`${o.toFixed(1)}%`;return a.jsx(VM,{title:"Commission Details",help:"Set commission percentages and amounts. Click any percentage to edit.",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Fee"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.fee)})]}),a.jsx(_r,{label:"Commission Rate %",value:e.commission_percent,onChange:o=>t("commission_percent",o)}),a.jsx(_r,{label:"Referral Fee %",value:e.referral_fee_percent,onChange:o=>t("referral_fee_percent",o)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referral Fee $"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.referral_fee_usd)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of Payments"}),a.jsx("input",{type:"number",step:"1",min:"1",value:e.number_of_payments||1,onChange:o=>t("number_of_payments",parseInt(o.target.value)||1),className:"mt-1 block w-full rounded border-gray-300 shadow-sm cursor-pointer hover:bg-blue-50 px-3 py-2 transition-colors border border-transparent hover:border-blue-200 text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(YM,{value:e.referral_payee_client_id,onChange:o=>t("referral_payee_client_id",o),label:"Referral Payee"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GCI"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.gci)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AGCI"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.agci)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(_r,{label:"House %",value:e.house_percent,onChange:o=>t("house_percent",o)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House $"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.house_usd)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(_r,{label:"Origination %",value:e.origination_percent,onChange:o=>t("origination_percent",o)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origination $"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.originationUSD)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(_r,{label:"Site %",value:e.site_percent,onChange:o=>t("site_percent",o)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Site $"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.siteUSD)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(_r,{label:"Deal %",value:e.deal_percent,onChange:o=>t("deal_percent",o)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal $"}),a.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.dealUSD)})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Broker Split Summary (Origination + Site + Deal)"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Origination:"})," ",s(e.origination_percent)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Site:"})," ",s(e.site_percent)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Deal:"})," ",s(e.deal_percent)]}),a.jsxs("div",{className:"font-semibold",children:[a.jsx("span",{className:"text-blue-700",children:"Total:"})," ",s((e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0))]})]}),a.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"House % is separate and not included in the 100% split validation."})]})]})})},nw=({isOpen:e,onClose:t,onConfirm:r,title:n,itemName:s,message:o})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",a.jsx("strong",{children:s}),"?"]}),o&&a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:o})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})}):null,gr=e=>e==null||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Lu=({value:e,onChange:t,label:r})=>{const[n,s]=w.useState(!1),[o,i]=w.useState(""),l=e?`${e.toFixed(1)}%`:"0.0%",c=()=>{s(!0),i((e==null?void 0:e.toString())||"0")},u=()=>{const h=parseFloat(o);t(isNaN(h)?null:h),s(!1)},d=()=>{s(!1),i("")},f=h=>{h.key==="Enter"?u():h.key==="Escape"&&d()};return n?a.jsx("input",{type:"number",step:"0.1",value:o,onChange:h=>i(h.target.value),onBlur:u,onKeyDown:f,className:"w-16 px-1 py-0.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}):a.jsx("span",{onClick:c,className:"cursor-pointer hover:bg-blue-50 px-1 py-0.5 rounded text-sm",title:`Click to edit ${r||"percentage"}`,children:l})},GM=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState({isOpen:!1,splitId:"",brokerName:""}),{baseAmounts:h}=Qh(e,r),p=k=>{const S=s.find(j=>j.id===k);return S?S.name:"Unknown Broker"};w.useEffect(()=>{(async()=>{if(e.id)try{l(!0);const{data:S,error:j}=await W.from("commission_split").select("*").eq("deal_id",e.id).order("created_at");if(j)throw j;const{data:D,error:N}=await W.from("broker").select("*").order("name");if(N)throw N;n(S||[]),o(D||[])}catch(S){console.error("Error fetching commission data:",S),u("Failed to load commission splits")}finally{l(!1)}})()},[e.id]);const v=async(k,S,j)=>{console.log(" updateCommissionSplit called:",{splitId:k,field:S,value:j});try{const D=r.find(M=>M.id===k);if(!D)return;const N={...D};S==="split_origination_percent"?(N.split_origination_percent=j||0,N.split_origination_usd=(j||0)/100*h.originationUSD):S==="split_site_percent"?(N.split_site_percent=j||0,N.split_site_usd=(j||0)/100*h.siteUSD):S==="split_deal_percent"&&(N.split_deal_percent=j||0,N.split_deal_usd=(j||0)/100*h.dealUSD),N.split_broker_total=(N.split_origination_usd||0)+(N.split_site_usd||0)+(N.split_deal_usd||0);const{error:E}=await W.from("commission_split").update({split_origination_percent:N.split_origination_percent,split_origination_usd:N.split_origination_usd,split_site_percent:N.split_site_percent,split_site_usd:N.split_site_usd,split_deal_percent:N.split_deal_percent,split_deal_usd:N.split_deal_usd,split_broker_total:N.split_broker_total}).eq("id",k);if(E)throw E;n(M=>M.map(L=>L.id===k?N:L)),console.log(" Commission split updated successfully")}catch(D){console.error("Error updating commission split:",D),u("Failed to update commission split")}},x=async k=>{if(e.id)try{if(!s.find(E=>E.id===k))return;const j={deal_id:e.id,broker_id:k,split_origination_percent:0,split_origination_usd:0,split_site_percent:0,split_site_usd:0,split_deal_percent:0,split_deal_usd:0,split_broker_total:0},{data:D,error:N}=await W.from("commission_split").insert(j).select("*").single();if(N)throw N;n([...r,D])}catch(S){console.error("Error adding broker split:",S),u("Failed to add broker split")}},b=async k=>{try{const{error:S}=await W.from("commission_split").delete().eq("id",k);if(S){if(S.code==="23503"&&S.message.includes("payment_split")){u("Cannot delete this broker split because it has related payments. You must delete the payments first, or contact support to safely remove this split.");return}throw S}n(j=>j.filter(D=>D.id!==k)),u(null),f({isOpen:!1,splitId:"",brokerName:""})}catch(S){console.error("Error deleting broker split:",S),u("Failed to delete broker split: "+(S instanceof Error?S.message:"Unknown error")),f({isOpen:!1,splitId:"",brokerName:""})}},y=(k,S)=>{f({isOpen:!0,splitId:k,brokerName:S})},m=()=>{b(d.splitId)},g=()=>{f({isOpen:!1,splitId:"",brokerName:""})},_=s.filter(k=>!r.some(S=>S.broker_id===k.id));return i?a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Broker Commission Splits"}),a.jsx("div",{className:"text-gray-500",children:"Loading..."})]}):a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Broker Commission Splits"}),_.length>0&&a.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:k=>{k.target.value&&(x(k.target.value),k.target.value="")},defaultValue:"",children:[a.jsx("option",{value:"",children:"+ Add Broker"}),_.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:a.jsx("p",{className:"text-red-600 text-sm",children:c})}),r.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No broker splits configured for this deal."}),_.length>0&&a.jsx("p",{className:"text-sm mt-2",children:"Use the dropdown above to add brokers."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Broker"}),a.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination %"}),a.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination $"}),a.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site %"}),a.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site $"}),a.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal %"}),a.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal $"}),a.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total $"}),a.jsx("th",{className:"w-16 text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{children:r.map(k=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-3 w-48 whitespace-nowrap",children:a.jsx("div",{className:"text-xs text-gray-900 font-medium",children:p(k.broker_id)})}),a.jsx("td",{className:"py-3 px-3 text-center",children:a.jsx(Lu,{value:k.split_origination_percent,onChange:S=>v(k.id,"split_origination_percent",S),label:"Origination %"})}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_origination_percent||0)/100*h.originationUSD)}),a.jsx("td",{className:"py-3 px-3 text-center",children:a.jsx(Lu,{value:k.split_site_percent,onChange:S=>v(k.id,"split_site_percent",S),label:"Site %"})}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_site_percent||0)/100*h.siteUSD)}),a.jsx("td",{className:"py-3 px-3 text-center",children:a.jsx(Lu,{value:k.split_deal_percent,onChange:S=>v(k.id,"split_deal_percent",S),label:"Deal %"})}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_deal_percent||0)/100*h.dealUSD)}),a.jsx("td",{className:"py-3 px-3 text-right text-sm font-medium text-gray-900",children:gr((k.split_origination_percent||0)/100*h.originationUSD+(k.split_site_percent||0)/100*h.siteUSD+(k.split_deal_percent||0)/100*h.dealUSD)}),a.jsx("td",{className:"py-3 px-3 text-center",children:a.jsx("button",{onClick:()=>y(k.id,p(k.broker_id)),className:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Delete broker split",children:""})})]},k.id))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[a.jsx("td",{className:"py-3 px-3 text-sm text-gray-900",children:"TOTALS"}),a.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((j,D)=>j+(Number(D.split_origination_percent)||0),0),S=Math.abs(k-100)<.1;return a.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_origination_percent||0)/100*h.originationUSD,0))}),a.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((j,D)=>j+(Number(D.split_site_percent)||0),0),S=Math.abs(k-100)<.1;return a.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_site_percent||0)/100*h.siteUSD,0))}),a.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((j,D)=>j+(Number(D.split_deal_percent)||0),0),S=Math.abs(k-100)<.1;return a.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),a.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_deal_percent||0)/100*h.dealUSD,0))}),a.jsx("td",{className:"py-3 px-3 text-right text-sm font-semibold text-blue-600",children:gr(r.reduce((k,S)=>{const j=(S.split_origination_percent||0)/100*h.originationUSD,D=(S.split_site_percent||0)/100*h.siteUSD,N=(S.split_deal_percent||0)/100*h.dealUSD;return k+j+D+N},0))}),a.jsx("td",{className:"py-3 px-3"})]})})]})}),a.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[" Split percentages are applied to AGCI: ",gr(Number(e.agci||0))]}),a.jsx("p",{children:" These splits serve as templates for payment generation"}),a.jsx("p",{children:" Click on percentage values to edit them directly"})]}),a.jsx(nw,{isOpen:d.isOpen,onClose:g,onConfirm:m,title:"Delete Broker Split",itemName:d.brokerName,message:"This action cannot be undone. If this broker has related payments, the deletion will be blocked."})]})},Xg=({title:e,help:t,children:r})=>a.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&a.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),KM=({dealId:e,deal:t,onDealUpdate:r})=>{const[n,s]=w.useState(t),[o,i]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState(!0),[p,v]=w.useState(null),[x,b]=w.useState(!1);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{y()},[e]);const y=async()=>{try{h(!0);const{data:N,error:E}=await W.from("commission_split").select("*").eq("deal_id",e);if(E)throw E;const{data:M,error:L}=await W.from("broker").select("*");if(L)throw L;c(M.filter(I=>I.active));const $=N.map(I=>{const H=M.find(C=>C.id===I.broker_id);return{...I,broker_name:H?H.name:"Unknown Broker"}});i($);const{data:z,error:R}=await W.from("payment").select("*").eq("deal_id",e);if(R)throw R;console.log(" CommissionTab fetchCommissionData - payments found:",{dealId:e,paymentsCount:(z==null?void 0:z.length)||0,payments:z==null?void 0:z.map(I=>({id:I.id,sequence:I.payment_sequence,amount:I.payment_amount,estimated_date:I.payment_date_estimated,actual_date:I.payment_date_actual}))}),d(z)}catch(N){v(N instanceof Error?N.message:"An error occurred")}finally{h(!1)}},m=N=>{const E=N.deal_value||0,M=N.commission_percent||0,L=N.referral_fee_percent||0,$=N.flat_fee_override??E*(M/100),z=$*(L/100),R=$-z,I=R*((N.house_percent||0)/100),H=R-I,C=H*((N.origination_percent||0)/100),T=H*((N.site_percent||0)/100),O=H*((N.deal_percent||0)/100);return{...N,fee:Math.round($*100)/100,gci:Math.round(R*100)/100,referral_fee_usd:Math.round(z*100)/100,agci:Math.round(H*100)/100,house_usd:Math.round(I*100)/100,origination_usd:Math.round(C*100)/100,site_usd:Math.round(T*100)/100,deal_usd:Math.round(O*100)/100}},g=async(N,E)=>{if(!n)return;const M={...n,[N]:E},L=["commission_percent","referral_fee_percent","house_percent","origination_percent","site_percent","deal_percent"];let $=M;L.includes(N)&&($=m(M));const z={commission_percent:$.commission_percent,referral_fee_percent:$.referral_fee_percent,house_percent:$.house_percent,origination_percent:$.origination_percent,site_percent:$.site_percent,deal_percent:$.deal_percent,number_of_payments:$.number_of_payments,fee:$.fee,updated_at:new Date().toISOString()};$.gci!==void 0&&(z.gci=$.gci),$.referral_fee_usd!==void 0&&(z.referral_fee_usd=$.referral_fee_usd),$.agci!==void 0&&(z.agci=$.agci),$.house_usd!==void 0&&(z.house_usd=$.house_usd),$.origination_usd!==void 0&&(z.origination_usd=$.origination_usd),$.site_usd!==void 0&&(z.site_usd=$.site_usd),$.deal_usd!==void 0&&(z.deal_usd=$.deal_usd),N==="referral_payee_client_id"&&$.referral_payee_client_id!==void 0&&(z.referral_payee_client_id=$.referral_payee_client_id);try{console.log("Updating field:",N,"with value:",E),console.log("Update payload:",z);const{data:R,error:I}=await W.from("deal").update(z).eq("id",e).select().single();if(I)throw console.error("Supabase error:",I),I;console.log("Update successful:",R),s(R),r(R)}catch(R){console.error("Error saving:",R),alert(`Error saving: ${R instanceof Error?R.message:"Failed to save"}`)}},_=async()=>{try{b(!0);const{data:N,error:E}=await W.rpc("generate_payments_for_deal",{deal_uuid:e});if(E)throw E;await y()}catch(N){alert(`Error: ${N instanceof Error?N.message:"Failed to generate payments"}`)}finally{b(!1)}},k=N=>N==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),S=N=>{const E=[],M=Number(N.origination_percent)||0,L=Number(N.site_percent)||0,$=Number(N.deal_percent)||0,z=Number(N.commission_percent)||0,R=Number(N.referral_fee_percent)||0,I=M+L+$;return I>100&&E.push("Broker split percentages total "+I.toFixed(1)+"% (over 100%)"),z>50&&E.push("Commission rate "+z.toFixed(1)+"% seems high"),R>100&&E.push("Referral fee "+R.toFixed(1)+"% cannot exceed 100%"),E};if(f)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Loading commission data..."})});if(p)return a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Loading Commission Data"}),a.jsx("p",{className:"text-sm text-red-600",children:p}),a.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Try Again"})]});if(!n)return a.jsx("div",{className:"text-center text-gray-600 py-8",children:a.jsx("p",{className:"text-sm",children:"Deal not found"})});const j=u.length>0,D=S(n);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-xs font-medium text-blue-800 mb-1",children:"Deal Fee"}),a.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(n.fee)})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-xs font-medium text-purple-800 mb-1",children:"Number of Payments"}),a.jsx("p",{className:"text-lg font-bold text-purple-900",children:n.number_of_payments})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-xs font-medium text-orange-800 mb-1",children:"Commission Rate"}),a.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.commission_percent?`${n.commission_percent.toFixed(1)}%`:"0%"})]})]}),D.length>0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),a.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:D.map((N,E)=>a.jsx("li",{children:N},E))})]})]})}),j&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payments Already Generated"}),a.jsxs("p",{className:"mt-1 text-xs text-yellow-700",children:["This deal already has ",u.length," payment",u.length!==1?"s":""," generated. To regenerate payments, you would need to delete the existing ones first."]})]})]})}),o.length===0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"No Commission Splits Found"}),a.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Commission splits are imported from Salesforce. If this deal should have commission data, check that it exists in Salesforce and run the migration again."})]})]})}),a.jsx(qM,{deal:n,onFieldUpdate:g}),a.jsx(GM,{deal:n,onDealUpdate:r}),a.jsxs(Xg,{title:"Payment Generation",help:"Generate payments based on commission splits",children:[a.jsx("div",{className:"flex justify-end mb-3",children:a.jsx("button",{onClick:_,disabled:o.length===0||j||x,className:`px-4 py-2 rounded font-medium text-sm ${o.length>0&&!j&&!x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:x?"Generating...":"Generate Payments"})}),o.length===0&&a.jsx("div",{className:"text-center text-gray-500 py-4",children:a.jsx("p",{className:"text-sm",children:"No commission splits available for payment generation."})})]}),o.length>0&&a.jsx(Xg,{title:"Quick Summary",help:"Overview of commission allocation",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[a.jsx("h4",{className:"text-xs font-medium text-green-800 mb-1",children:"Total Commission Splits"}),a.jsx("p",{className:"text-lg font-bold text-green-900",children:o.length})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Total Broker Amount"}),a.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(o.reduce((N,E)=>N+(E.split_broker_total||0),0))})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[a.jsx("h4",{className:"text-xs font-medium text-purple-800 mb-1",children:"Payments Status"}),a.jsx("p",{className:"text-lg font-bold text-purple-900",children:j?`${u.length} Generated`:"Not Generated"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[a.jsx("h4",{className:"text-xs font-medium text-orange-800 mb-1",children:"Per Payment Amount"}),a.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.number_of_payments&&n.fee?k(n.fee/n.number_of_payments):"$0.00"})]})]})})]})},sw=(e,t=[],r=[])=>{const n=w.useMemo(()=>{const c=e.fee||0,u=e.number_of_payments||1,d=u>0?c/u:0,f=d*u;return{calculatedPaymentAmount:d,totalCalculatedPayments:f}},[e.fee,e.number_of_payments]),s=w.useMemo(()=>{const c=n.calculatedPaymentAmount,u=e.referral_fee_usd||0,d=e.number_of_payments||1,f=u/d,p=(e.house_usd||0)/d,v=c-f-p,x=e.origination_percent||0,b=e.site_percent||0,y=e.deal_percent||0,m=x/100*v,g=b/100*v,_=y/100*v;return{gci:c,referral_fee_usd:f,house_usd:p,agci:v,origination_percent:x,origination_usd:m,site_percent:b,site_usd:g,deal_percent:y,deal_usd:_}},[n.calculatedPaymentAmount,e.fee,e.referral_fee_usd,e.house_usd,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),o=w.useMemo(()=>c=>c.map(u=>{const d=(u.split_origination_percent||0)/100*s.origination_usd,f=(u.split_site_percent||0)/100*s.site_usd,h=(u.split_deal_percent||0)/100*s.deal_usd,p=d+f+h;return{broker_id:u.broker_id||"",origination_amount:d,site_amount:f,deal_amount:h,total_amount:p}}),[s]),i=w.useMemo(()=>{const c=[];let u=!0;return(!e.fee||e.fee<=0)&&(c.push("Commission fee is not set"),u=!1),(!e.number_of_payments||e.number_of_payments<1)&&(c.push("Number of payments must be at least 1"),u=!1),e.number_of_payments&&e.number_of_payments>10&&(c.push("Number of payments cannot exceed 10"),u=!1),(e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0)===0&&c.push("Commission split percentages are not configured"),{canGeneratePayments:u,validationMessages:c}},[e.fee,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),l=w.useMemo(()=>t.map(c=>({payment_id:c.payment_id,calculated_amount:n.calculatedPaymentAmount,database_amount:c.payment_amount||0,needs_update:Math.abs((c.payment_amount||0)-n.calculatedPaymentAmount)>.01})),[t,n.calculatedPaymentAmount]);return{calculatedPaymentAmount:n.calculatedPaymentAmount,totalCalculatedPayments:n.totalCalculatedPayments,paymentCommissionBreakdown:s,calculateBrokerSplitsForPayment:o,canGeneratePayments:i.canGeneratePayments,validationMessages:i.validationMessages,paymentComparisons:l}},QM=({deal:e,hasPayments:t,existingPayments:r=[],commissionSplits:n=[],onGeneratePayments:s,onUpdatePaymentAmounts:o,generatingPayments:i})=>{const{calculatedPaymentAmount:l,totalCalculatedPayments:c,paymentCommissionBreakdown:u,canGeneratePayments:d,validationMessages:f,paymentComparisons:h}=sw(e,r,n),p=e.number_of_payments||1,v=y=>y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),x=h.some(y=>y.needs_update);r.length<p;const b=r.length===p;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Generation"}),t&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.length," of ",p," Payments Created"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Actions"}),a.jsxs("div",{className:"space-y-3",children:[b?a.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3",children:[a.jsx("div",{className:"font-medium mb-1",children:" All Payments Created"}),a.jsxs("div",{children:["All ",p," payments have been created for this deal."]})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:s,disabled:!d||i,className:`w-full px-4 py-3 rounded-md font-medium transition-colors ${d&&!i?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating Additional Payments...":"Generating Payments..."]}):t?`Create Remaining ${p-r.length} Payments`:`Generate ${p} Payment${p>1?"s":""}`}),t&&a.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-3",children:[a.jsx("div",{className:"font-medium mb-1",children:" Safe Generation"}),a.jsx("div",{children:"This will create the remaining payments without affecting existing payment records or their associated invoice data."})]})]}),t&&x&&o&&a.jsx("button",{onClick:o,disabled:i,className:"w-full px-4 py-2 border border-amber-300 bg-amber-50 text-amber-700 rounded-md font-medium hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Payment Amounts"}),!d&&a.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3",children:[a.jsx("div",{className:"font-medium mb-1",children:"Configuration Required"}),a.jsx("div",{children:"Complete commission configuration in the Commission tab before generating payments."})]})]}),d&&p>1||t&&h.length>0?a.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d&&p>1&&a.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[a.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Payment Schedule Preview"}),a.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[Array.from({length:p},(y,m)=>{const g=r.find(_=>_.payment_sequence===m+1);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{children:["Payment ",m+1,":"]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`font-medium ${g?"text-green-600":""}`,children:["$",v(l),g&&" "]}),a.jsxs("div",{className:"text-xs text-green-600 opacity-75",children:["AGCI: $",v(u.agci)]})]})]},m)}),a.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:["$",v(c)]}),a.jsxs("div",{className:"text-xs text-green-600 opacity-75 font-normal",children:["Total AGCI: $",v(u.agci*p)]})]})]})]})]}),t&&h.length>0&&a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[a.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Current vs Calculated"}),a.jsx("div",{className:"text-sm text-gray-700 space-y-1",children:h.map((y,m)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Payment ",m+1,":"]}),a.jsxs("span",{className:y.needs_update?"text-amber-700 font-medium":"text-gray-600",children:["$",v(y.database_amount),"  $",v(y.calculated_amount),y.needs_update&&" "]})]},m))})]})]}):null]})]})};function JM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const XM=w.forwardRef(JM),ow=XM;function ZM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const e4=w.forwardRef(ZM),iw=e4,aw=e=>{if(!e)return"Unknown";const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n).toLocaleDateString()},Nn=(e,t="Not set")=>e?aw(e):t,t4=e=>e||"",r4=({payment:e,totalPayments:t,isExpanded:r,onToggleExpansion:n,onUpdatePayment:s,onDeletePayment:o})=>(console.log(" PaymentSummaryRow payment dates:",{id:e.id,payment_sequence:e.payment_sequence,payment_date_estimated:e.payment_date_estimated,payment_received_date:e.payment_received_date}),a.jsxs("div",{className:"p-4 grid grid-cols-12 items-center gap-4",children:[a.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded flex-shrink-0",children:r?a.jsx(ow,{className:"h-4 w-4 text-gray-500"}):a.jsx(iw,{className:"h-4 w-4 text-gray-500"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:["Payment ",e.payment_sequence," of ",t]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["$",(e.payment_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Invoice #"}),a.jsx("div",{className:"text-sm text-gray-900",children:e.orep_invoice||"-"})]}),a.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:e.payment_received||!1,onChange:i=>s({payment_received:i.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e.payment_received?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.payment_received?"Received":"Pending"})]}),a.jsx("div",{className:"col-span-3",children:e.payment_received?a.jsx("div",{className:"w-full px-2 py-1 text-sm",children:a.jsxs("div",{className:"font-medium text-green-800",children:["Paid Date: ",aw(e.payment_received_date)]})}):a.jsxs("div",{children:[e.payment_date_estimated&&a.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Estimated Pmt Date"}),a.jsx("input",{type:"date",value:e.payment_date_estimated||"",onChange:i=>s({payment_date_estimated:i.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",placeholder:"Estimated payment date"}),!e.payment_date_estimated&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Set estimated payment date"})]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-900 text-sm whitespace-nowrap",children:"Delete"})})]})),n4=({split:e,brokerName:t,paymentAmount:r,onPercentageChange:n,validationTotals:s})=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t})}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2})]})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Origination"}),a.jsx(_r,{label:"",value:e.split_origination_percent||0,onChange:o=>n("split_origination_percent",o)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_origination_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Site"}),a.jsx(_r,{label:"",value:e.split_site_percent||0,onChange:o=>n("split_site_percent",o)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_site_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Deal"}),a.jsx(_r,{label:"",value:e.split_deal_percent||0,onChange:o=>n("split_deal_percent",o)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_deal_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Total"}),a.jsxs("div",{className:`text-sm font-semibold ${s&&!s.isValid?"text-red-600":"text-blue-600"}`,children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s&&!s.isValid&&a.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Check totals"})]})]})]}),js=e=>e==null||isNaN(e)?"$0.00":`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Zg=({payeeName:e,amount:t,paid:r,onTogglePaid:n,disabled:s=!1})=>{const o=()=>{s||n(!r)};return a.jsxs("div",{className:`
        flex items-center justify-between p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer
        ${r?"bg-green-50 border-green-200 hover:border-green-300":"bg-white border-gray-200 hover:border-gray-300"}
        ${s?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
      `,onClick:o,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&!s&&(i.preventDefault(),o())},"aria-label":`${r?"Mark as unpaid":"Mark as paid"} - ${e} - ${js(t)}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx("div",{className:`
          flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200
          ${r?"bg-green-500 border-green-500":"bg-white border-gray-300 hover:border-green-400"}
        `,children:r&&a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`
            text-sm font-medium truncate transition-colors duration-200
            ${r?"text-green-900":"text-gray-900"}
          `,children:e}),a.jsx("p",{className:`
            text-xs transition-colors duration-200
            ${r?"text-green-700":"text-gray-500"}
          `,children:r?"Check written":"Pending payment"})]})]}),a.jsxs("div",{className:"flex-shrink-0 text-right",children:[a.jsx("p",{className:`
          text-lg font-semibold transition-colors duration-200
          ${r?"text-green-900":"text-gray-900"}
        `,children:js(t)}),r&&a.jsxs("div",{className:"flex items-center justify-end mt-1",children:[a.jsx("svg",{className:"w-3 h-3 text-green-600 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Paid"})]})]})]})},s4=({isOpen:e,onClose:t,payment:r,deal:n,clients:s,brokers:o,paymentSplits:i,onUpdateReferralPaid:l,onUpdatePaymentSplitPaid:c})=>{const[u,d]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const g=[];if(n.referral_payee_client_id&&n.referral_fee_usd&&n.referral_fee_usd>0){const _=s.find(D=>D.id===n.referral_payee_client_id),k=n.fee||n.deal_usd||0,S=r.payment_amount||0,j=k>0?n.referral_fee_usd*(S/k):0;j>0&&g.push({id:`referral-${r.id}`,type:"referral",payeeName:(_==null?void 0:_.client_name)||"Unknown Referral Client",amount:j,paid:r.referral_fee_paid||!1})}console.log(" Payment splits for disbursement modal:",i),i.forEach(_=>{const k=o.find(j=>j.id===_.broker_id),S=_.paid||!1;console.log(" Processing split:",{paymentSplitId:_.id,brokerName:k==null?void 0:k.name,brokerPaid:S,amount:_.split_broker_total}),_.split_broker_total&&_.split_broker_total>0&&g.push({id:_.id,type:"broker",payeeName:(k==null?void 0:k.name)||"Unknown Broker",amount:_.split_broker_total,paid:S})}),d(g)}},[e,r,n,s,o,i]);const p=async(g,_)=>{h(!0);try{g.type==="referral"?await l(r.id,_):await c(g.id,_),d(k=>k.map(S=>S.id===g.id?{...S,paid:_}:S))}catch(k){console.error("Error updating disbursement status:",k)}finally{h(!1)}},v=r.payment_amount||0,x=u.reduce((g,_)=>g+(_.paid?_.amount:0),0),b=v-x,y=u.filter(g=>g.paid).length,m=u.length;return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Disbursement"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Payment ",r.payment_sequence," - ",js(v)]})]})]}),a.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",disabled:f,children:a.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Disbursement Progress: ",y," of ",m," checks written"]}),a.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(y/Math.max(m,1)*100),"% Complete"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${y/Math.max(m,1)*100}%`}})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),a.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Disbursements Required"}),a.jsx("p",{className:"text-sm text-gray-500",children:"This payment has no referral fees or broker commissions to disburse."})]}):a.jsxs("div",{className:"space-y-4",children:[u.some(g=>g.type==="referral")&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Referral Payments"}),a.jsx("div",{className:"space-y-2",children:u.filter(g=>g.type==="referral").map(g=>a.jsx(Zg,{payeeName:g.payeeName,amount:g.amount,paid:g.paid,onTogglePaid:_=>p(g,_),disabled:f},g.id))})]}),u.some(g=>g.type==="broker")&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Broker Commissions"}),a.jsx("div",{className:"space-y-2",children:u.filter(g=>g.type==="broker").map(g=>a.jsx(Zg,{payeeName:g.payeeName,amount:g.amount,paid:g.paid,onTogglePaid:_=>p(g,_),disabled:f},g.id))})]})]})}),u.length>0&&a.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Payment Received:"}),a.jsx("p",{className:"font-semibold text-gray-900",children:js(v)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Disbursed:"}),a.jsx("p",{className:"font-semibold text-green-600",children:js(x)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Remaining:"}),a.jsx("p",{className:`font-semibold ${b>=0?"text-gray-900":"text-red-600"}`,children:js(b)})]})]})})]})}):null},o4=({payment:e,deal:t,clients:r,brokers:n,paymentSplits:s,commissionSplits:o,onUpdatePayment:i,onUpdateReferralPaid:l,onUpdatePaymentSplitPaid:c})=>{const[u,d]=w.useState(!1),f=()=>{if(!t.referral_payee_client_id)return"No referral payee set";if(!r||r.length===0)return"Client data not available";const x=r.find(b=>b.id===t.referral_payee_client_id);return x?x.client_name||"Unknown Client":"Client not found"},h=()=>{if(!t.referral_fee_usd||t.referral_fee_usd===0)return 0;const x=t.fee||t.deal_usd||0,b=e.payment_amount||0;return x===0?0:t.referral_fee_usd*(b/x)},p=(x,b,y=!1)=>{const m=e[b];return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),y&&m&&a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:Nn(m)}),a.jsx("input",{type:"date",value:t4(m),onChange:g=>i({[b]:g.target.value||null}),className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})},v=(x,b,y)=>{const m=e[b];return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),a.jsx("input",{type:"text",value:m||"",onChange:g=>i({[b]:g.target.value||null}),placeholder:y,className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})};return a.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Details"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Payment Dates & Tracking"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6",children:[p("Estimated Payment Date","payment_date_estimated"),p("Payment Received Date","payment_received_date"),p("Invoice Date","payment_invoice_date"),v("OREP Invoice","orep_invoice","Enter OREP Invoice number")]})]}),(t.referral_payee_client_id||t.referral_fee_usd||t.referral_fee_percent)&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Referral Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Payee"}),a.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:f()})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Fee"}),a.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:(()=>{const x=h(),b=t.referral_fee_usd||0;return x===0?"No referral fee for this payment":a.jsxs(a.Fragment,{children:["$",x.toLocaleString("en-US",{minimumFractionDigits:2}),a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["($",b.toLocaleString("en-US",{minimumFractionDigits:2})," total)"]}),t.referral_fee_percent&&a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.referral_fee_percent,"%)"]})]})})()})]})]})]}),(e.sf_payment_date_est||e.sf_payment_date_actual||e.sf_payment_date_received||e.sf_payment_invoice_date)&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Salesforce Date Fields (Read-only)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-xs",children:[e.sf_payment_date_est&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"SF Est Date:"})," ",a.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_est)})]}),e.sf_payment_date_actual&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"SF Actual Date:"})," ",a.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_actual)})]}),e.sf_payment_date_received&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"SF Received Date:"})," ",a.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_received)})]}),e.sf_payment_invoice_date&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"SF Invoice Date:"})," ",a.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_invoice_date)})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-gray-500",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Payment Received:"})," ",e.payment_received?"Yes":"No",e.payment_received_date&&a.jsxs("span",{className:"ml-1",children:["(",Nn(e.payment_received_date),")"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"SF Payment Status:"})," ",e.sf_payment_status||"Not set"]}),e.qb_sync_status&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"QB Sync Status:"})," ",e.qb_sync_status]}),e.qb_last_sync&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Last QB Sync:"})," ",Nn(e.qb_last_sync)]})]})}),a.jsx("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:`payment-received-${e.id}`,checked:e.payment_received||!1,onChange:async x=>{const b=x.target.checked;await i({payment_received:b}),b&&(t.referral_fee_usd&&t.referral_fee_usd>0||s&&s.some(y=>(y.split_broker_total||0)>0))&&d(!0)},className:"h-5 w-5 text-blue-600 rounded border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:`payment-received-${e.id}`,className:"text-sm font-semibold text-blue-900 cursor-pointer",children:"Payment Received"}),a.jsx("p",{className:"text-xs text-blue-700",children:e.payment_received?"Payment has been received - manage disbursements below":"Check when payment is received to manage disbursements"})]})]}),e.payment_received&&a.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Manage Disbursements"})]})})]}),u&&a.jsx(s4,{isOpen:u,onClose:()=>d(!1),payment:e,deal:t,clients:r||[],brokers:n||[],paymentSplits:s||[],onUpdateReferralPaid:l||(async()=>{}),onUpdatePaymentSplitPaid:c||(async()=>{})})]})},i4=e=>{const t={deal:0,site:0,origination:0,isValid:!0};return e.forEach(r=>{t.deal+=r.split_deal_percent||0,t.site+=r.split_site_percent||0,t.origination+=r.split_origination_percent||0}),t.isValid=t.deal===100&&t.site===100&&t.origination===100,t},a4=(e,t,r,n)=>e.map(s=>{let o=s.split_origination_usd||0,i=s.split_site_usd||0,l=s.split_deal_usd||0,c=s.split_broker_total||0;if(r&&n){const u=r.number_of_payments||1,d=(r.referral_fee_usd||0)/u,f=(r.house_usd||0)/u,h=n-d-f,p=(r.origination_percent||0)/100*h,v=(r.site_percent||0)/100*h,x=(r.deal_percent||0)/100*h;o=p*(s.split_origination_percent||0)/100,i=v*(s.split_site_percent||0)/100,l=x*(s.split_deal_percent||0)/100,c=o+i+l}return{...s,split_origination_usd:o,split_site_usd:i,split_deal_usd:l,split_broker_total:c}}),l4=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(async d=>{t(!0),n(null);try{const{data:f,error:h}=await W.from("payment").select("*").eq("id",d).single();if(h)throw h;const{data:p,error:v}=await W.from("payment_split").select("*").eq("payment_id",d);if(v)throw v;return{payment:f,paymentSplits:p||[]}}catch(f){const h=f instanceof Error?f.message:"Failed to load disbursement data";return n(h),console.error("Error loading disbursement data:",f),null}finally{t(!1)}},[]),o=w.useCallback(async(d,f)=>{t(!0),n(null);try{const{error:h}=await W.from("payment").update({referral_fee_paid:f}).eq("id",d);if(h)throw h}catch(h){const p=h instanceof Error?h.message:"Failed to update referral payment status";throw n(p),console.error("Error updating referral paid status:",h),h}finally{t(!1)}},[]),i=w.useCallback(async(d,f)=>{t(!0),n(null),console.log(" Updating payment split paid status:",{splitId:d,paid:f});try{const{error:h,data:p}=await W.from("payment_split").update({paid:f}).eq("id",d).select();if(h)throw console.error(" Supabase error updating payment split:",h),h;console.log(" Payment split updated successfully:",p)}catch(h){const p=h instanceof Error?h.message:"Failed to update payment split status";throw n(p),console.error("Error updating payment split paid status:",h),h}finally{t(!1)}},[]),l=w.useCallback((d,f,h)=>{const p=d.payment_amount||0,v=h||0,x=d.referral_fee_paid&&v>0?v:0,b=f.reduce((N,E)=>N+(E.paid&&E.split_broker_total||0),0),y=x+b,m=p-y,g=v>0?1:0,_=f.filter(N=>(N.split_broker_total||0)>0).length,k=g+_,S=d.referral_fee_paid&&v>0?1:0,j=f.filter(N=>N.paid&&(N.split_broker_total||0)>0).length,D=S+j;return{paymentAmount:p,referralAmount:v,referralDisbursed:x,brokerDisbursed:b,totalDisbursed:y,remainingBalance:m,totalItems:k,paidItems:D,completionPercentage:k>0?Math.round(D/k*100):0,isOverDisbursed:y>p,isFullyDisbursed:D===k&&k>0}},[]),c=w.useCallback((d,f)=>f>d?{isValid:!1,message:`Disbursements exceed payment by $${(f-d).toLocaleString("en-US",{minimumFractionDigits:2})}`}:{isValid:!0},[]),u=w.useCallback(()=>{n(null)},[]);return{loading:e,error:r,loadDisbursementData:s,updateReferralPaid:o,updatePaymentSplitPaid:i,calculateDisbursementTotals:l,validateDisbursement:c,clearError:u}},c4=({payment:e,splits:t,brokers:r,clients:n,commissionSplits:s,dealAmounts:o,deal:i,onSplitPercentageChange:l,onUpdatePayment:c,onUpdatePaymentSplit:u})=>{const[d,f]=w.useState(!1),h=k=>{const S=r.find(j=>j.id===k);return S?S.name:"Unknown Broker"},v=(()=>{const k=e.payment_amount||0,S=i.number_of_payments||1,j=(i.referral_fee_usd||0)/S,D=(i.house_usd||0)/S;return k-j-D})(),x=a4(t,o,i,e.payment_amount||0),b=i4(x),{updateReferralPaid:y,updatePaymentSplitPaid:m}=l4(),g=async(k,S)=>{try{await y(k,S)}catch(j){console.error("Error updating referral payment status:",j)}},_=async(k,S)=>{try{await m(k,S),u&&(await u(k,{paid:S}),console.log(" Payment split paid status updated, parent state refreshed"))}catch(j){console.error("Error updating payment split status:",j)}};return a.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Commission Breakdown"}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Payment #",e.payment_sequence,"  AGCI: $",v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsx("div",{className:"space-y-4",children:x.map(k=>a.jsx(n4,{split:k,brokerName:h(k.broker_id),paymentAmount:e.payment_amount||0,onPercentageChange:(S,j)=>l(k.id,S,j),validationTotals:b},k.id))}),!b.isValid&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[a.jsx("div",{className:"text-sm font-medium text-red-800",children:"Percentage Validation Errors:"}),a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[b.origination!==100&&`Origination: ${b.origination}% `,b.site!==100&&`Site: ${b.site}% `,b.deal!==100&&`Deal: ${b.deal}% `,"(must equal 100% each)"]})]})]}),a.jsxs("div",{className:"border-t border-gray-200",children:[a.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>f(!d),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Dates, tracking, and referral information"})]}),a.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:d?a.jsx(ow,{className:"h-4 w-4 text-gray-500"}):a.jsx(iw,{className:"h-4 w-4 text-gray-500"})})]})}),d&&a.jsx(o4,{payment:e,deal:i,clients:n,brokers:r,paymentSplits:t,commissionSplits:s,onUpdatePayment:c,onUpdateReferralPaid:g,onUpdatePaymentSplitPaid:_})]})]})},u4=({payments:e,paymentSplits:t,brokers:r,clients:n,commissionSplits:s,deal:o,onUpdatePayment:i,onDeletePayment:l,onUpdatePaymentSplit:c})=>{const[u,d]=w.useState(new Set),[f,h]=w.useState(!1),[p,v]=w.useState(null),x=_=>{d(k=>{const S=new Set(k);return S.has(_)?S.delete(_):S.add(_),S})},b=_=>t.filter(k=>k.payment_id===_),y=_=>{v(_),h(!0)},m=async()=>{if(p)try{await l(p.id),h(!1),v(null)}catch(_){console.error("Error deleting payment:",_)}},g=async(_,k,S)=>{try{const{error:j}=await W.from("payment_split").update({[k]:S||0}).eq("id",_);if(j)throw console.error("Supabase error:",j),j;c&&await c(_,k,S)}catch(j){console.error("Error updating payment split:",j),alert("Failed to update split percentage. Please try again.")}};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Management"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage individual payments and track their status"})]}),a.jsx("div",{className:"space-y-3",children:e.map(_=>{const k=b(_.id),S=u.has(_.id);return a.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white",children:[a.jsx(r4,{payment:_,totalPayments:e.length,isExpanded:S,onToggleExpansion:()=>x(_.id),onUpdatePayment:j=>i(_.id,j),onDeletePayment:()=>y(_)}),S&&a.jsx(c4,{payment:_,splits:k,brokers:r,clients:n,commissionSplits:s,dealAmounts:{origination_usd:o.origination_usd||0,site_usd:o.site_usd||0,deal_usd:o.deal_usd||0},deal:o,onSplitPercentageChange:g,onUpdatePayment:j=>i(_.id,j),onUpdatePaymentSplit:async(j,D)=>{c&&D.paid!==void 0&&await c(j,"paid",D.paid)}})]},_.id)})}),a.jsx(nw,{isOpen:f,onClose:()=>h(!1),onConfirm:m,title:"Delete Payment",itemName:p?`Payment ${p.payment_sequence} of ${e.length}`:"",message:"This will permanently delete the payment and all associated commission splits. This action cannot be undone."})]})},d4=({statusSummary:e,hasOverdue:t,completionRate:r})=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Payment Status"}),e.total>0&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(r),"% complete)"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.received>0&&a.jsx("div",{className:"px-2 py-1 bg-green-100 rounded whitespace-nowrap",children:a.jsxs("span",{className:"text-green-800 font-bold",children:[" Received ",e.received]})}),e.sent>0&&a.jsx("div",{className:"px-2 py-1 bg-blue-100 rounded whitespace-nowrap",children:a.jsxs("span",{className:"text-blue-800 font-bold",children:[" Sent ",e.sent]})}),e.pending>0&&a.jsx("div",{className:"px-2 py-1 bg-yellow-100 rounded whitespace-nowrap",children:a.jsxs("span",{className:"text-yellow-800 font-bold",children:[" Pending ",e.pending]})}),e.overdue>0&&a.jsx("div",{className:"px-2 py-1 bg-red-100 rounded whitespace-nowrap",children:a.jsxs("span",{className:"text-red-800 font-bold",children:[" Overdue ",e.overdue]})})]}),t&&a.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[a.jsx("strong",{children:"Action needed:"})," ",e.overdue," payment",e.overdue!==1?"s":"",e.overdue===1?" is":" are"," overdue and require",e.overdue===1?"s":""," attention."]}),e.total>0&&a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})})]}),f4=({deal:e,commissionSplits:t=[],onEditClick:r,className:n=""})=>{const{baseAmounts:s}=Qh(e,t),{gci:o,houseUsd:i,agci:l,originationPercent:c,sitePercent:u,dealPercent:d,originationUSD:f,siteUSD:h,dealUSD:p,totalDealUSD:v}=s,x=e.fee||0,b=e.referral_fee_percent||0,y=e.referral_fee_usd||b/100*x,m=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(E),g=x>0?i/x*100:0,_=x>0?y/x*100:0,k=x>0?i/x*100:0,S=x>0?f/x*100:0,j=x>0?h/x*100:0,D=x>0?p/x*100:0,N=_>0||k>0||S>0||j>0||D>0;return!e.fee||e.fee===0?a.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Commission breakdown will appear when commission fee is set"}),r&&a.jsx("button",{onClick:r,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Set Commission Details "})]}):a.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Total Commission: ",a.jsx("span",{className:"text-green-600",children:m(x)})]}),y>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"text-gray-600",children:["Referral: ",a.jsx("span",{className:"text-orange-600",children:m(y)})]})]}),i>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"text-gray-600",children:["House: ",a.jsx("span",{className:"text-gray-600",children:m(i)})]})]}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"text-gray-600",children:["AGCI: ",a.jsx("span",{className:"text-blue-600 font-medium",children:m(l)})]})]}),r&&a.jsx("button",{onClick:r,className:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Edit Commission"})]}),N&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex h-8 bg-gray-200 rounded-lg overflow-hidden",children:[_>0&&a.jsx("div",{className:"bg-orange-500 flex items-center justify-center relative group",style:{width:`${_}%`},title:`Referral: ${b}% of total - ${m(y)}`,children:_>15&&a.jsxs("span",{className:"text-white text-xs font-medium",children:[b.toFixed(1),"%"]})}),k>0&&a.jsx("div",{className:"bg-gray-500 flex items-center justify-center relative group",style:{width:`${k}%`},title:`House: ${g.toFixed(1)}% of total - ${m(i)}`,children:k>15&&a.jsxs("span",{className:"text-white text-xs font-medium",children:[g.toFixed(1),"%"]})}),S>0&&a.jsx("div",{className:"bg-blue-500 flex items-center justify-center relative group",style:{width:`${S}%`},title:`Origination: ${c}% of AGCI - ${m(f)}`,children:S>15&&a.jsxs("span",{className:"text-white text-xs font-medium",children:[c,"%"]})}),j>0&&a.jsx("div",{className:"bg-green-500 flex items-center justify-center relative group",style:{width:`${j}%`},title:`Site: ${u}% of AGCI - ${m(h)}`,children:j>15&&a.jsxs("span",{className:"text-white text-xs font-medium",children:[u,"%"]})}),D>0&&a.jsx("div",{className:"bg-purple-500 flex items-center justify-center relative group",style:{width:`${D}%`},title:`Deal: ${d}% of AGCI - ${m(p)}`,children:D>15&&a.jsxs("span",{className:"text-white text-xs font-medium",children:[d,"%"]})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2",children:[y>0&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:"Referral"})," ",m(y)]})]}),i>0&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:"House"})," ",m(i)]})]}),c>0&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:"Origination"})," ",m(f)]})]}),u>0&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:"Site"})," ",m(h)]})]}),d>0&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:"Deal"})," ",m(p)]})]})]}),v!==l&&l>0&&a.jsx("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:" Commission percentages don't total to 100% of AGCI"})]}),!N&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Commission breakdown percentages not configured"}),r&&a.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Configure Commission Splits "})]})]})},h4=e=>{const t=i=>{if(i.payment_received)return"received";if(i.invoice_sent&&!i.payment_received){if(i.payment_date_estimated){const l=new Date(i.payment_date_estimated),c=new Date;if(c.setHours(0,0,0,0),l<c)return"overdue"}return"sent"}if(i.payment_date_estimated&&!i.invoice_sent){const l=new Date(i.payment_date_estimated),c=new Date;if(c.setHours(0,0,0,0),l<c)return"overdue"}return"pending"},r=e.reduce((i,l)=>{const c=t(l);return i[c]=(i[c]||0)+1,i.total++,i},{pending:0,sent:0,overdue:0,received:0,total:0}),n=r.overdue>0,s=r.overdue>0||r.sent>0,o=r.total>0?r.received/r.total*100:0;return{getPaymentStatus:t,statusSummary:r,hasOverdue:n,hasActionItems:s,completionRate:o}},p4=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(!0),[v,x]=w.useState(null),[b,y]=w.useState(!1),{calculatedPaymentAmount:m,totalCalculatedPayments:g,paymentCommissionBreakdown:_,canGeneratePayments:k,validationMessages:S}=sw(e,r,i),j=async()=>{if(e.id)try{p(!0),x(null);const{data:C,error:T}=await W.from("payment").select("*, payment_date_estimated").eq("deal_id",e.id).order("payment_sequence",{ascending:!0});if(T)throw T;console.log(" PaymentTab fetchPaymentData - payments found:",{dealId:e.id,paymentsCount:(C==null?void 0:C.length)||0,payments:C==null?void 0:C.map(A=>({id:A.id,sequence:A.payment_sequence,amount:A.payment_amount,estimated_date:A.payment_date_estimated}))});const O=(C==null?void 0:C.map(A=>A.id))||[];let F=[];if(O.length>0){const{data:A,error:re}=await W.from("payment_split").select("*").in("payment_id",O);if(re)throw re;F=A||[]}const{data:G,error:ae}=await W.from("commission_split").select("*").eq("deal_id",e.id);if(ae)throw ae;const{data:_e,error:Dt}=await W.from("broker").select("*").order("name");if(Dt)throw Dt;let Ke=[];try{const{data:A,error:re}=await W.from("client").select("*").order("client_name");re?console.warn("Client table not available:",re.message):Ke=A||[]}catch(A){console.warn("Error fetching clients (table may not exist):",A)}n(C||[]),o(F),l(G||[]),u(_e||[]),f(Ke||[])}catch(C){console.error("Error fetching payment data:",C),x(C instanceof Error?C.message:"Failed to load payment data")}finally{p(!1)}},D=async()=>{if(e.id)try{y(!0),x(null);const{data:C,error:T}=await W.rpc("generate_payments_for_deal",{deal_uuid:e.id});if(T)throw T;await j()}catch(C){console.error("Error generating payments:",C),x(C instanceof Error?C.message:"Failed to generate payments")}finally{y(!1)}},N=async(C,T)=>{try{const{error:O}=await W.from("payment").update(T).eq("id",C);if(O)throw O;n(F=>F.map(G=>G.id===C?{...G,...T}:G))}catch(O){console.error("Error updating payment:",O),x(O instanceof Error?O.message:"Failed to update payment")}},E=async C=>{try{const{error:T}=await W.from("payment_split").delete().eq("payment_id",C);if(T)throw T;const{error:O}=await W.from("payment").delete().eq("id",C);if(O)throw O;n(F=>F.filter(G=>G.id!==C)),o(F=>F.filter(G=>G.payment_id!==C))}catch(T){console.error("Error deleting payment:",T),x(T instanceof Error?T.message:"Failed to delete payment")}};if(w.useEffect(()=>{j()},[e.id]),h)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})});const M=r.length>0;r.reduce((C,T)=>C+(T.payment_amount||0),0);const L=e.fee||0,{statusSummary:$,hasOverdue:z,hasActionItems:R,completionRate:I}=h4(r),H=C=>C.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return a.jsxs("div",{className:"space-y-6",children:[v&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("div",{className:"text-red-700",children:v})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Commission"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",H(L)]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-green-600",children:"Calculated Payments"}),a.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["$",H(g)]}),a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.number_of_payments||1,"  $",H(m)]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-purple-600",children:"AGCI Available"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",H(e.agci||0)]}),a.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"After house & referral fees"})]}),a.jsx(d4,{statusSummary:$,hasOverdue:z,completionRate:I})]}),a.jsx(f4,{deal:e,commissionSplits:i,className:"mb-6"}),a.jsx(QM,{deal:e,hasPayments:M,existingPayments:r,commissionSplits:i,onGeneratePayments:D,generatingPayments:b}),M?a.jsx("div",{className:"space-y-6",children:a.jsx(u4,{payments:r,paymentSplits:s,brokers:c,clients:d,commissionSplits:i,deal:e,onUpdatePayment:N,onDeletePayment:E,onUpdatePaymentSplit:async(C,T,O)=>{o(F=>F.map(G=>G.id===C?{...G,[T]:O!==null?O:T==="paid"?!1:0}:G))}})}):a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No payments generated yet"}),a.jsx("div",{className:"text-gray-400 text-sm",children:k?'Click "Generate Payments" above to create payment records':"Complete commission configuration to enable payment generation"}),S.length>0&&a.jsxs("div",{className:"mt-4 text-left max-w-md mx-auto",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Required configuration:"}),a.jsx("ul",{className:"text-sm text-gray-500 space-y-1",children:S.map((C,T)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-400 mr-1",children:""}),C]},T))})]})]})]})},m4=({deal:e})=>{const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{(async()=>{try{if(e.client_id){const{data:f}=await W.from("client").select("id, client_name").eq("id",e.client_id).single();f&&r(f)}if(e.stage_id){const{data:f}=await W.from("deal_stage").select("id, label").eq("id",e.stage_id).single();f&&s(f)}}catch(f){console.error("Error fetching header data:",f)}finally{i(!1)}})()},[e.client_id,e.stage_id]);const l=d=>d==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),c=d=>{if(!d)return"Not set";try{return new Date(d).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},u=()=>a.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}),a.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),a.jsx("circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}),a.jsx("circle",{cx:"21",cy:"7",r:"1",fill:"currentColor"})]});return o?a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:a.jsx(u,{})}),a.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Loading..."})]})})})}):a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[a.jsx(u,{}),a.jsx("span",{className:"text-white text-sm font-medium",children:"Deal"})]}),a.jsx("h1",{className:"text-xl font-bold leading-tight",children:e.deal_name||"Unnamed Deal"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Account Name"}),a.jsx("div",{className:"text-white",children:(t==null?void 0:t.client_name)||"No Client"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Stage"}),a.jsx("div",{className:"text-white font-semibold",children:(n==null?void 0:n.label)||"No Stage"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Probability"}),a.jsx("div",{className:"text-white font-semibold",children:e.probability!==null?`${e.probability}%`:"0%"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Target Close Date"}),a.jsx("div",{className:"text-white",children:c(e.target_close_date)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Deal Value"}),a.jsx("div",{className:"text-white font-bold text-base",children:l(e.deal_value)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Fee"}),a.jsx("div",{className:"text-emerald-400 font-bold text-base",children:l(e.fee)})]})]})]})})};function g4(){const{dealId:e}=ky(),[t,r]=w.useState(null),[n,s]=w.useState("overview"),{contacts:o}=rw(e||null);w.useEffect(()=>{e&&(async()=>{const{data:u,error:d}=await W.from("deal").select("*").eq("id",e).single();!d&&u&&r(u)})()},[e]);const i=c=>{r(c)},l=async c=>{const u={...t,...c};return r(u),Promise.resolve()};return t?a.jsxs(WM,{children:[a.jsxs(HM,{contactCount:o.length,notesCount:0,filesCount:0,activityCount:0,paymentsCount:0,children:[a.jsx(m4,{deal:t}),a.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>s("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),a.jsx("button",{onClick:()=>s("commission"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="commission"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Commission"}),a.jsx("button",{onClick:()=>s("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payments"})]})}),n==="overview"&&a.jsx($M,{deal:t,onSave:i}),n==="commission"&&a.jsx(KM,{dealId:e,deal:t,onDealUpdate:l}),n==="payments"&&a.jsx(p4,{deal:t,onDealUpdate:l})]})]}),e&&a.jsx(zM,{dealId:e})]}):a.jsx("div",{className:"p-4",children:"Loading..."})}const lw=e=>{const[t,r]=w.useState(null),[n,s]=w.useState(!0),[o,i]=w.useState(null),l=w.useCallback(async()=>{if(!e){r(null),s(!1);return}try{s(!0),i(null);const{data:f,error:h}=await W.from("property").select("*").eq("id",e).single();if(h)throw h;const[p,v,x]=await Promise.all([f.property_type_id?W.from("property_type").select("*").eq("id",f.property_type_id).single():Promise.resolve({data:null,error:null}),f.property_stage_id?W.from("property_stage").select("*").eq("id",f.property_stage_id).single():Promise.resolve({data:null,error:null}),f.property_record_type_id?W.from("property_record_type").select("*").eq("id",f.property_record_type_id).single():Promise.resolve({data:null,error:null})]),b={...f,property_type:p.data||void 0,property_stage:v.data||void 0,property_record_type:x.data||void 0};r(b)}catch(f){console.error("Error fetching property:",f),i(f instanceof Error?f.message:"Failed to fetch property")}finally{s(!1)}},[e]);w.useEffect(()=>{l()},[l]);const c=w.useCallback(async f=>{if(!e)throw new Error("No property ID provided");try{i(null);const h={...f,updated_at:new Date().toISOString()},{data:p,error:v}=await W.from("property").update(h).eq("id",e).select("*").single();if(v)throw v;r(p)}catch(h){throw console.error("Error updating property:",h),i(h instanceof Error?h.message:"Failed to update property"),h}},[e]),u=w.useCallback(async f=>{try{i(null);const{data:h,error:p}=await W.from("property").insert([{...f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw p;return h}catch(h){throw console.error("Error creating property:",h),i(h instanceof Error?h.message:"Failed to create property"),h}},[]),d=w.useCallback(async()=>{await l()},[l]);return{property:t,loading:n,error:o,updateProperty:c,createProperty:u,refreshProperty:d}},v4=e=>{const[t,r]=w.useState(e||{}),[n,s]=w.useState(e||{}),o=w.useCallback(d=>{r(d)},[]),i=w.useCallback((d,f)=>{r(h=>({...h,[d]:f}))},[]),l=w.useCallback(d=>{const f=d||{};r(f),s(f)},[]),c=(()=>{var k,S,j,D;const d={},f=[];(k=t.property_name)!=null&&k.trim()||(d.property_name="Property name is required"),(S=t.address)!=null&&S.trim()||(d.address="Address is required"),(j=t.city)!=null&&j.trim()||(d.city="City is required"),(D=t.state)!=null&&D.trim()||(d.state="State is required");const h=Number(t.asking_lease_price),p=Number(t.asking_purchase_price);h<0&&(d.asking_lease_price="Lease price cannot be negative"),p<0&&(d.asking_purchase_price="Purchase price cannot be negative");const v=Number(t.rent_psf),x=Number(t.nnn_psf);v<0&&(d.rent_psf="Rent PSF cannot be negative"),x<0&&(d.nnn_psf="NNN PSF cannot be negative");const b=Number(t.building_sqft),y=Number(t.available_sqft);b<0&&(d.building_sqft="Building square footage cannot be negative"),y<0&&(d.available_sqft="Available square footage cannot be negative"),y>0&&b>0&&y>b&&f.push("Available square footage exceeds building square footage"),Number(t.traffic_count)<0&&(d.traffic_count="Traffic count cannot be negative");const g=Number(t.latitude),_=Number(t.longitude);return g&&(g<-90||g>90)&&(d.latitude="Latitude must be between -90 and 90"),_&&(_<-180||_>180)&&(d.longitude="Longitude must be between -180 and 180"),t.property_type_id||f.push("Property type is not set"),t.property_stage_id||f.push("Property stage is not set"),t.contact_id||f.push("No contact assigned to this property"),h===0&&p===0&&f.push("No pricing information available"),{isValid:Object.keys(d).length===0,errors:d,warnings:f}})(),u=JSON.stringify(t)!==JSON.stringify(n);return{formData:t,setFormData:o,updateField:i,validation:c,resetForm:l,isDirty:u}},y4=({property:e,isEditing:t,onToggleEdit:r,onBack:n,onGetLocation:s,onCallContact:o})=>{var l;const i=()=>a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});return a.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white shadow-sm",children:a.jsxs("div",{className:"px-4 sm:px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[a.jsx(i,{}),a.jsx("span",{className:"text-white text-sm font-medium",children:"Property"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[s&&a.jsx("button",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",title:"Get current location",children:a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o&&e.contact_id&&a.jsx("button",{onClick:o,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-600 hover:bg-green-500 transition-colors",title:"Call contact",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold leading-tight mb-2",children:e.property_name||e.address||"Unnamed Property"}),e.address&&e.property_name&&a.jsx("p",{className:"text-slate-300 text-sm",children:e.address})]})}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mt-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Type"}),a.jsx("div",{className:"text-white",children:((l=e.property_type)==null?void 0:l.label)||"Not set"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Building Size"}),a.jsx("div",{className:"text-white",children:e.building_sqft?`${e.building_sqft.toLocaleString()} SF`:"Not set"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Available Size"}),a.jsx("div",{className:"text-white",children:e.available_sqft?`${e.available_sqft.toLocaleString()} SF`:"Not set"})]})]})]})})},Wn=({label:e,value:t,onChange:r,field:n,placeholder:s,disabled:o=!1,tabIndex:i})=>{const[l,c]=w.useState(!1),[u,d]=w.useState(""),[f,h]=w.useState([]),[p,v]=w.useState(!1),[x,b]=w.useState(-1),[y,m]=w.useState(!1),g=w.useRef(null),_=w.useRef(null),k=t||"",S=async R=>{if(R.trim().length<2){h([]);return}m(!0);try{const{data:I,error:H}=await W.from("property").select(n).not(n,"is",null).ilike(n,`%${R}%`);if(H)throw H;const C={};I==null||I.forEach(O=>{const F=O[n];F&&(C[F]=(C[F]||0)+1)});const T=Object.entries(C).map(([O,F])=>({value:O,count:F})).sort((O,F)=>F.count-O.count).slice(0,8);h(T)}catch(I){console.error("Error fetching suggestions:",I),h([])}finally{m(!1)}};w.useEffect(()=>{if(!l)return;const R=setTimeout(()=>{S(u)},300);return()=>clearTimeout(R)},[u,l,n]);const j=R=>{o||(c(!0),d(R!==void 0?R:t||""),v(!0),b(-1))},D=()=>{o||j()},N=R=>{r((R??u).trim()||null),c(!1),v(!1),h([]),b(-1)},E=()=>{c(!1),v(!1),h([]),d(""),b(-1)},M=R=>{d(R),N(R)},L=R=>{R.key==="Enter"?(R.preventDefault(),x>=0&&f[x]?N(f[x].value):N()):R.key==="Escape"?(R.preventDefault(),E()):R.key==="ArrowDown"?(R.preventDefault(),b(I=>I<f.length-1?I+1:I)):R.key==="ArrowUp"&&(R.preventDefault(),b(I=>I>0?I-1:-1))},$=R=>{const I=R.target.value;d(I),v(!0),b(-1)},z=()=>{setTimeout(()=>{var R;(R=_.current)!=null&&R.contains(document.activeElement)||N()},150)};return l?a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{ref:g,type:"text",value:u,onChange:$,onBlur:z,onKeyDown:L,placeholder:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:i,autoFocus:!0}),p&&(f.length>0||y)&&a.jsxs("div",{ref:_,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:[y&&a.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500 flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Loading suggestions..."]}),!y&&f.map((R,I)=>a.jsxs("button",{type:"button",onMouseDown:H=>{H.preventDefault(),M(R.value)},className:`w-full px-3 py-2 text-left hover:bg-blue-50 flex items-center justify-between ${I===x?"bg-blue-50 text-blue-900":"text-gray-900"}`,children:[a.jsx("span",{className:"truncate",children:R.value}),a.jsxs("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:[R.count," properties"]})]},R.value)),!y&&f.length===0&&u.trim().length>=2&&a.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:["No matching ",e.toLowerCase()," found"]})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("div",{onClick:()=>j(),onKeyDown:R=>{R.key==="Enter"||R.key===" "?(R.preventDefault(),j()):R.key.length===1&&!R.ctrlKey&&!R.metaKey&&!R.altKey&&(R.preventDefault(),j(R.key))},onFocus:D,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:o?"Not editable":"Click to edit - suggestions will appear as you type",role:"button","aria-label":`Click to edit ${e}`,children:a.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:k})})]})},fe=({label:e,value:t,onChange:r,type:n="text",placeholder:s,disabled:o=!1,multiline:i=!1,rows:l=1,inputMode:c,tabIndex:u,required:d=!1,defaultText:f="Click to add"})=>{const[h,p]=w.useState(!1),[v,x]=w.useState(""),b=t!=null&&t!==""&&t!==0?t:"",y=!t||typeof t=="string"&&t.trim()==="",m=d&&y,g=()=>{o||(p(!0),x((t==null?void 0:t.toString())||""))},_=()=>{o||g()},k=()=>{if(n==="number"){const D=parseFloat(v);r(isNaN(D)?null:D)}else r(v.trim()||null);p(!1)},S=()=>{p(!1),x("")},j=D=>{D.key==="Enter"&&!i?(D.preventDefault(),D.stopPropagation(),k()):D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),S())};if(h){const D=i?"textarea":"input";return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx(D,{type:i?void 0:n,inputMode:c,value:v,onChange:N=>x(N.target.value),onBlur:k,onKeyDown:j,placeholder:s,rows:i?l:void 0,className:`w-full px-3 py-2 rounded-md shadow-sm text-base min-h-[44px] resize-none ${m?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white focus:ring-blue-500 focus:border-blue-500"}`,tabIndex:u,autoFocus:!0})]})}return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("div",{onClick:g,onKeyDown:D=>{D.key==="Enter"||D.key===" "?(D.preventDefault(),g()):D.key.length===1&&!D.ctrlKey&&!D.metaKey&&!D.altKey&&(D.preventDefault(),p(!0),x(D.key))},onFocus:_,tabIndex:u||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-start transition-colors focus:outline-none focus:ring-2 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":m?"cursor-pointer bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 focus:ring-red-500 focus:border-red-500":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white focus:ring-blue-500 focus:border-blue-500"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:a.jsx("span",{className:t?"text-gray-900":m?"text-red-600 font-medium":"text-gray-500",children:i?a.jsx("div",{className:"whitespace-pre-wrap",children:b||(y?f:"")}):b||(y?f:"")})})]})},x4=({property:e,onFieldUpdate:t,onGetCurrentLocation:r})=>{var _,k,S,j,D;const[n,s]=w.useState(!1),[o,i]=w.useState("idle"),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!1),p=()=>{const N=e.verified_latitude&&e.verified_longitude,E=e.latitude&&e.longitude;return N?{lat:e.verified_latitude,lng:e.verified_longitude,source:"verified"}:E?{lat:e.latitude,lng:e.longitude,source:"regular"}:null},v=()=>{const N=p();return N?`https://www.google.com/maps?q=${N.lat},${N.lng}`:null},x=async()=>{const N=v();if(N)try{await navigator.clipboard.writeText(N),i("copied"),setTimeout(()=>i("idle"),2e3)}catch(E){console.error("Failed to copy to clipboard:",E),window.open(N,"_blank")}},b=async()=>{if(r)try{s(!0);const N=await r();t("latitude",N.lat),t("longitude",N.lng)}catch(N){console.error("Error getting current location:",N)}finally{s(!1)}},y=()=>{c(!0),setTimeout(()=>c(!1),3e3)},m=()=>{d(!0),setTimeout(()=>d(!1),3e3)},g=()=>{h(!0),setTimeout(()=>h(!1),4e3)};return a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Location"})]}),r&&a.jsxs("button",{onClick:b,disabled:n,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm disabled:opacity-50",children:[n?a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Use Current Location"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[a.jsx("div",{className:"sm:col-span-2",children:a.jsx(fe,{label:"Street Address*",value:e.address,onChange:N=>t("address",N),placeholder:"123 Main Street",tabIndex:1})}),a.jsx(Wn,{label:"City*",value:e.city,onChange:N=>t("city",N),field:"city",placeholder:"San Francisco",tabIndex:2}),a.jsx(Wn,{label:"State*",value:e.state,onChange:N=>t("state",N),field:"state",placeholder:"CA",tabIndex:3}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),a.jsx("button",{type:"button",onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Click for more info",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),a.jsx(fe,{label:"",value:e.zip,onChange:N=>t("zip",N),placeholder:"94105",tabIndex:4}),l&&a.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),a.jsx("div",{className:"font-medium text-blue-200 mb-1",children:" Future Auto-Fill"}),a.jsx("p",{children:"Will auto-populate in the future from Google geocoding services."}),a.jsx("button",{onClick:()=>c(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"County"}),a.jsx("button",{type:"button",onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Click for more info",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),a.jsx(Wn,{label:"",value:e.county,onChange:N=>t("county",N),field:"county",placeholder:"San Francisco County",tabIndex:5}),u&&a.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),a.jsx("div",{className:"font-medium text-blue-200 mb-1",children:" Future Auto-Fill"}),a.jsx("p",{children:"Will auto-populate in the future from Google geocoding services."}),a.jsx("button",{onClick:()=>d(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"GPS Coordinates"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Verify Location"]}),f&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),a.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will take you to a map where you can move the pin to the correct location and recode the address coordinates."}),a.jsx("button",{onClick:()=>h(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(fe,{label:"Latitude",value:e.latitude,onChange:N=>t("latitude",N),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:6}),a.jsx(fe,{label:"Longitude",value:e.longitude,onChange:N=>t("longitude",N),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:7}),a.jsx(fe,{label:"Verified Latitude",value:e.verified_latitude,onChange:N=>t("verified_latitude",N),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:8}),a.jsx(fe,{label:"Verified Longitude",value:e.verified_longitude,onChange:N=>t("verified_longitude",N),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:9})]})]}),p()&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("div",{className:"bg-gray-100 rounded-md p-6 text-center",children:[a.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),a.jsx("p",{className:"text-sm text-gray-600",children:"Map Preview"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(k=(_=p())==null?void 0:_.lat)==null?void 0:k.toFixed(6),", ",(j=(S=p())==null?void 0:S.lng)==null?void 0:j.toFixed(6),((D=p())==null?void 0:D.source)==="verified"&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),a.jsxs("div",{className:"mt-3 flex gap-2 justify-center",children:[a.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",onClick:()=>{const N=v();N&&window.open(N,"_blank")},children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in Maps"]}),a.jsx("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",onClick:x,children:o==="copied"?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Link"]})})]})]})})]})},Qr=({label:e,value:t,onChange:r,placeholder:n="0",disabled:s=!1,tabIndex:o,helpText:i,showLarge:l=!1,colorScheme:c="gray"})=>{const[u,d]=w.useState(!1),[f,h]=w.useState(""),p=k=>k==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(k),v=t!=null?p(t):"",x={green:"text-green-700",blue:"text-blue-700",purple:"text-purple-700",gray:"text-gray-900",orange:"text-orange-700"},b=k=>{s||(d(!0),h(k!==void 0?k:(t==null?void 0:t.toString())||""))},y=()=>{s||b()},m=()=>{const k=parseFloat(f.replace(/[^0-9.-]/g,""))||null;r(k),d(!1)},g=()=>{d(!1),h("")},_=k=>{k.key==="Enter"?(k.preventDefault(),k.stopPropagation(),m()):k.key==="Escape"&&(k.preventDefault(),k.stopPropagation(),g())};return u?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{type:"text",inputMode:"decimal",value:f,onChange:k=>h(k.target.value),onBlur:m,onKeyDown:_,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("div",{onClick:()=>b(),onKeyDown:k=>{k.key==="Enter"||k.key===" "?(k.preventDefault(),b()):k.key.length===1&&!k.ctrlKey&&!k.metaKey&&!k.altKey&&(k.preventDefault(),b(k.key))},onFocus:y,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border ${l?"min-h-[48px]":"min-h-[44px]"} flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:a.jsx("span",{className:`${t!==null?x[c]:"text-gray-500"} ${l?"text-lg font-semibold":"font-medium"}`,children:v})}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},Ul=({label:e,value:t,onChange:r,placeholder:n="0.00",disabled:s=!1,tabIndex:o,helpText:i})=>{const[l,c]=w.useState(!1),[u,d]=w.useState(""),f=m=>m==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m),h=t!=null?`${f(t)} / SF`:"Not set",p=m=>{s||(c(!0),d(m!==void 0?m:(t==null?void 0:t.toString())||""))},v=()=>{s||p()},x=()=>{const m=parseFloat(u.replace(/[^0-9.-]/g,""))||null;r(m),c(!1)},b=()=>{c(!1),d("")},y=m=>{m.key==="Enter"?(m.preventDefault(),m.stopPropagation(),x()):m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),b())};return l?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{type:"text",inputMode:"decimal",value:u,onChange:m=>d(m.target.value),onBlur:x,onKeyDown:y,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("div",{onClick:()=>p(),onKeyDown:m=>{m.key==="Enter"||m.key===" "?(m.preventDefault(),p()):m.key.length===1&&!m.ctrlKey&&!m.metaKey&&!m.altKey&&(m.preventDefault(),p(m.key))},onFocus:v,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:a.jsx("span",{className:`${t!==null?"text-gray-900":"text-gray-500"} font-medium`,children:h})}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},b4=({property:e,onFieldUpdate:t})=>{var c,u;const r=((u=(c=e.property_record_type)==null?void 0:c.label)==null?void 0:u.toLowerCase())||"",n=r.includes("land"),s=r.includes("shopping")||r.includes("retail"),o=!n&&!s,i=!n,l=!n;return a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})]}),o&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:a.jsx(Qr,{label:"Asking Lease Price",value:e.asking_lease_price,onChange:d=>t("asking_lease_price",d),helpText:"Annual lease amount",showLarge:!0,colorScheme:"green",tabIndex:10})}),i&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Ul,{label:"Rent PSF",value:e.rent_psf,onChange:d=>t("rent_psf",d),helpText:"Base rent per square foot",tabIndex:12}),a.jsx(Ul,{label:"NNN PSF",value:e.nnn_psf,onChange:d=>t("nnn_psf",d),helpText:"Triple net charges per square foot",tabIndex:13})]}),e.rent_psf&&e.nnn_psf&&e.available_sqft&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[a.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"All-In Rent Calculation"}),a.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["$",(e.rent_psf+e.nnn_psf).toFixed(2)," / SF"]}),a.jsxs("div",{className:"text-sm text-blue-600",children:["Total annual: $",((e.rent_psf+e.nnn_psf)*e.available_sqft).toLocaleString()]})]})]}),l&&a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Square Footage"}),s?a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsx(fe,{label:"Available Sqft",value:e.available_sqft,onChange:d=>t("available_sqft",d),type:"number",placeholder:"0",tabIndex:14})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(fe,{label:"Building Size",value:e.building_sqft,onChange:d=>t("building_sqft",d),type:"number",placeholder:"0",tabIndex:14}),a.jsx(fe,{label:"Available Size",value:e.available_sqft,onChange:d=>t("available_sqft",d),type:"number",placeholder:"0",tabIndex:15})]}),e.building_sqft&&e.available_sqft&&a.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded-md",children:a.jsxs("div",{className:"text-sm text-gray-600",children:["Occupancy: ",((e.building_sqft-e.available_sqft)/e.building_sqft*100).toFixed(1),"% (",(e.building_sqft-e.available_sqft).toLocaleString()," SF occupied)"]})})]})]}),n&&a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Land Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[a.jsx(Qr,{label:"Asking Purchase Price",value:e.asking_purchase_price,onChange:d=>t("asking_purchase_price",d),showLarge:!0,colorScheme:"blue",tabIndex:16}),a.jsx(Qr,{label:"Asking Ground Lease Price",value:e.asking_lease_price,onChange:d=>t("asking_lease_price",d),showLarge:!0,colorScheme:"green",tabIndex:17})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[a.jsx(fe,{label:"NNN",value:e.nnn_psf,onChange:d=>t("nnn_psf",d),type:"number",placeholder:"0",tabIndex:18}),a.jsx(fe,{label:"Acres",value:e.acres,onChange:d=>t("acres",d),type:"number",placeholder:"0",tabIndex:19})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(fe,{label:"Building Sqft",value:e.building_sqft,onChange:d=>t("building_sqft",d),type:"number",placeholder:"0",tabIndex:20}),a.jsx(fe,{label:"Lease Expiration Date",value:e.lease_expiration_date,onChange:d=>t("lease_expiration_date",d),type:"text",placeholder:"MM/DD/YYYY",tabIndex:21})]})]})]})},cw=({label:e,value:t,onChange:r,options:n,placeholder:s="Select...",disabled:o=!1,tabIndex:i,required:l=!1,defaultText:c="Not set"})=>{const[u,d]=w.useState(!1),f=n.find(g=>g.id===t),h=(f==null?void 0:f.label)||c,v=l&&!t,x=()=>{o||d(!0)},b=g=>{r(g||null),d(!1)},y=()=>{d(!1)},m=g=>{g.key==="Escape"&&(g.preventDefault(),g.stopPropagation(),y())};return u?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("select",{value:t||"",onChange:g=>b(g.target.value),onBlur:y,onKeyDown:m,className:`w-full px-3 py-2 rounded-md shadow-sm text-base min-h-[44px] ${v?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white focus:ring-blue-500 focus:border-blue-500"}`,tabIndex:i,autoFocus:!0,children:[a.jsx("option",{value:"",children:s}),n.map(g=>a.jsx("option",{value:g.id,children:g.label},g.id))]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a.jsx("div",{onClick:x,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),x())},onFocus:x,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":v?"cursor-pointer bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 focus:ring-red-500 focus:border-red-500":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white focus:ring-blue-500 focus:border-blue-500"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:a.jsx("span",{className:t?"text-gray-900":v?"text-red-600 font-medium":"text-gray-500",children:h})})]})},w4=async e=>{try{const{data:t,error:r}=await W.from("property").select("sf_id").eq("id",e).single();if(r||!(t!=null&&t.sf_id))return console.log("No sf_id found for property:",r==null?void 0:r.message),null;const{data:n,error:s}=await W.from("salesforce_Property__c").select("RecordTypeId").eq("Id",t.sf_id).single();return s?(console.log("RecordTypeId field not found:",s.message),null):(n==null?void 0:n.RecordTypeId)||null}catch(t){return console.log("Error checking for legacy record type:",t),null}},_4=({property:e,isEditing:t,onFieldUpdate:r,propertyRecordTypes:n=[]})=>{const[s,o]=w.useState(!0),[i,l]=w.useState(null);return w.useEffect(()=>{(async()=>{if(e.id&&!e.property_record_type_id){const u=await w4(e.id);console.log(" Legacy RecordTypeId found:",u),l(u)}})()},[e.id,e.property_record_type_id]),a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[a.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between text-left",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&a.jsxs("div",{className:"mt-4 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx(cw,{label:"Property Record Type",value:e.property_record_type_id,onChange:c=>r("property_record_type_id",c),options:n.map(c=>({id:c.id,label:c.label})),placeholder:n.length===0?"No record types available":"Select record type...",disabled:n.length===0,tabIndex:20}),i&&!e.property_record_type_id&&a.jsxs("div",{className:"mt-1 text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded border border-blue-200",children:["Salesforce RecordTypeId: ",i]})]}),a.jsx(fe,{label:"Property Name",value:e.property_name,onChange:c=>r("property_name",c),placeholder:"Property name or identifier",tabIndex:21})]}),a.jsx(fe,{label:"Property Description",value:e.description,onChange:c=>r("description",c),placeholder:"Brief description of the property...",multiline:!0,rows:3}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Location Details"}),a.jsx(Wn,{label:"Trade Area",value:e.trade_area,onChange:c=>r("trade_area",c),field:"trade_area",placeholder:"Downtown, Suburb, etc."})]})]})]})},k4=({property:e,onFieldUpdate:t})=>{const[r,n]=w.useState(!1);return a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[a.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between text-left",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Analysis"})]}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsxs("div",{className:"mt-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Traffic Data"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(fe,{label:"Traffic Count",value:e.traffic_count,onChange:s=>t("traffic_count",s),type:"number",inputMode:"numeric",placeholder:"0"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Daily vehicle count"})]}),a.jsxs("div",{children:[a.jsx(fe,{label:"Secondary Traffic Count",value:e.traffic_count_2nd,onChange:s=>t("traffic_count_2nd",s),type:"number",inputMode:"numeric",placeholder:"0"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secondary road/access point"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Traffic"}),a.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-base min-h-[44px] flex items-center",children:a.jsx("span",{className:"text-gray-900 font-medium",children:((e.traffic_count||0)+(e.traffic_count_2nd||0)).toLocaleString()})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calculated total (vehicles/day)"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Demographics"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(fe,{label:"Demographic Information",value:e.demographics,onChange:s=>t("demographics",s),placeholder:"Population, income levels, age groups, household composition, etc.",multiline:!0,rows:4}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(fe,{label:"1 Mile Population",value:e["1_mile_pop"],onChange:s=>t("1_mile_pop",s),type:"number",inputMode:"numeric",placeholder:"Enter population count"}),a.jsx(fe,{label:"HH Income - Median 3 Mile",value:e.hh_income_median_3_mile,onChange:s=>t("hh_income_median_3_mile",s),type:"number",inputMode:"numeric",placeholder:"Enter median income"}),a.jsx(fe,{label:"3 Mile Population",value:e["3_mile_pop"],onChange:s=>t("3_mile_pop",s),type:"number",inputMode:"numeric",placeholder:"Enter population count"})]})]})]})]})]})},S4=({property:e,isEditing:t,onFieldUpdate:r})=>{const n=[{key:"costar_link",label:"CoStar",description:"Commercial real estate database",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),color:"blue"},{key:"reonomy_link",label:"Reonomy",description:"Property intelligence platform",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),color:"purple"},{key:"tax_url",label:"Tax Records",description:"Property tax information",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),color:"green"},{key:"map_link",label:"Map View",description:"Interactive map link",icon:a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"orange"}],s=(i,l)=>{const c={blue:l?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",purple:l?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100",green:l?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",orange:l?"bg-orange-600 hover:bg-orange-700 text-white border-orange-600":"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100"};return c[i]||c.blue},o=i=>{try{return new URL(i),!0}catch{return!1}};return a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Links"})]}),t?a.jsx("div",{className:"space-y-4",children:n.map(i=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i.label}),a.jsx("input",{type:"url",value:e[i.key]||"",onChange:l=>r(i.key,l.target.value),placeholder:`https://example.com/${i.label.toLowerCase()}-link`,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]},i.key))}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(i=>{const l=e[i.key],c=l&&l.trim()!=="",u=c&&o(l);return a.jsx("button",{onClick:()=>{c&&u&&window.open(l,"_blank","noopener,noreferrer")},disabled:!c||!u,className:`w-full p-3 border rounded-lg text-left transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s(i.color,c&&u)}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:i.icon}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:i.label}),a.jsx("div",{className:`text-xs opacity-75 truncate ${c&&u?"text-current":"text-gray-500"}`,children:c?u?"Click to open":"Invalid URL":i.description})]}),c&&u&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})},i.key)})}),t&&a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>{if(e.latitude&&e.longitude){const i=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;r("map_link",i)}},disabled:!e.latitude||!e.longitude,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate Map Link"}),a.jsx("button",{onClick:()=>{if(e.address&&e.city&&e.state){const l=`https://www.costar.com/search?q=${encodeURIComponent(`${e.address} ${e.city} ${e.state}`)}`;r("costar_link",l)}},disabled:!e.address||!e.city||!e.state,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate CoStar Search"})]}),a.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Quick generation requires property address and coordinates to be set."})]})]})},N4=({property:e,isEditing:t,onFieldUpdate:r})=>{const[n,s]=w.useState(e.property_notes||""),[o,i]=w.useState(null),[l,c]=w.useState(!1),u=w.useRef(null),d=w.useRef(),f=()=>{u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")};w.useEffect(()=>{f()},[n,t]);const h=v=>{s(v),t&&(d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{try{c(!0),await r("property_notes",v),i(new Date)}catch(x){console.error("Auto-save failed:",x)}finally{c(!1)}},1e3))};w.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const p=v=>{const b=new Date().getTime()-v.getTime(),y=Math.floor(b/6e4);return y<1?"just now":y===1?"1 minute ago":y<60?`${y} minutes ago`:v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Notes"})]}),t&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Saving..."})]}),!l&&o&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{children:["Saved ",p(o)]})]})]})]}),t?a.jsxs("div",{className:"space-y-3",children:[a.jsx("textarea",{ref:u,value:n,onChange:v=>h(v.target.value),placeholder:"Add notes about this property, market conditions, tenant information, lease details, or any other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none overflow-hidden min-h-[120px]",style:{maxHeight:"400px"}}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{children:[n.length," characters"]}),a.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border rounded text-xs",children:"Cmd+S"}),a.jsx("span",{children:"to save manually"})]})]}),a.jsx("div",{className:"text-right",children:"Auto-saves after 1 second"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>{const v=`Property visit completed on [DATE]
- Condition: 
- Tenant activity: 
- Market comparison: 
- Next steps: `;h(n+(n?`

`:"")+v)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Site Visit"}),a.jsx("button",{onClick:()=>{const v=`Market analysis as of [DATE]
- Comparable properties: 
- Pricing trends: 
- Occupancy rates: 
- Notable developments: `;h(n+(n?`

`:"")+v)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Market Update"}),a.jsx("button",{onClick:()=>{const v=`Contact follow-up [DATE]
- Person contacted: 
- Response: 
- Action items: 
- Next contact date: `;h(n+(n?`

`:"")+v)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Follow-up"})]})]})]}):a.jsx("div",{children:n?a.jsx("div",{className:"prose prose-sm max-w-none",children:a.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:n})}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-sm",children:"No notes added yet"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click Edit to add property notes"})]})}),t&&a.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18.5a5.5 5.5 0 100-11 5.5 5.5 0 000 11z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2a10 10 0 100 20 10 10 0 000-20z"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Voice-to-Text Coming Soon"}),a.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Future enhancement will allow voice dictation for faster note-taking during property visits."})]})]})})]})},j4=({isOpen:e,onClose:t,onSave:r,onUpdate:n,siteSubmitId:s,propertyId:o,propertyUnitId:i})=>{const[l,c]=w.useState({site_submit_name:"",client_id:null,property_id:o||null,property_unit_id:i||null,assignment_id:null,submit_stage_id:null,date_submitted:new Date().toISOString().split("T")[0],loi_written:!1,loi_date:"",delivery_date:"",delivery_timeframe:"",notes:"",customer_comments:"",competitor_data:"",record_type_id:null,verified_latitude:null,verified_longitude:null,year_1_rent:null,ti:null}),[u,d]=w.useState([]),[f,h]=w.useState([]),[p,v]=w.useState(!1),[x,b]=w.useState(!1),[y,m]=w.useState({});w.useEffect(()=>{e&&(async()=>{var j,D,N;v(!0);try{const[E,M]=await Promise.all([W.from("client").select("*").order("client_name"),W.from("submit_stage").select("*").order("name")]);if(E.data&&d(E.data),M.data&&h(M.data),s){const{data:L,error:$}=await W.from("site_submit").select("*").eq("id",s).single();$?console.error("Error loading site submit:",$):L&&c({site_submit_name:L.site_submit_name||"",client_id:L.client_id,property_id:L.property_id,property_unit_id:L.property_unit_id,assignment_id:L.assignment_id,submit_stage_id:L.submit_stage_id,date_submitted:((j=L.date_submitted)==null?void 0:j.split("T")[0])||new Date().toISOString().split("T")[0],loi_written:L.loi_written||!1,loi_date:((D=L.loi_date)==null?void 0:D.split("T")[0])||"",delivery_date:((N=L.delivery_date)==null?void 0:N.split("T")[0])||"",delivery_timeframe:L.delivery_timeframe||"",notes:L.notes||"",customer_comments:L.customer_comments||"",competitor_data:L.competitor_data||"",record_type_id:L.record_type_id,verified_latitude:L.verified_latitude,verified_longitude:L.verified_longitude,year_1_rent:L.year_1_rent,ti:L.ti})}}catch(E){console.error("Error loading form data:",E)}finally{v(!1)}})()},[e,s]),w.useEffect(()=>{e||(c({site_submit_name:"",client_id:null,property_id:o||null,property_unit_id:i||null,assignment_id:null,submit_stage_id:null,date_submitted:new Date().toISOString().split("T")[0],loi_written:!1,loi_date:"",delivery_date:"",delivery_timeframe:"",notes:"",customer_comments:"",competitor_data:"",record_type_id:null,verified_latitude:null,verified_longitude:null,year_1_rent:null,ti:null}),m({}))},[e,o,i]);const g=(S,j)=>{c(D=>({...D,[S]:j})),y[S]&&m(D=>({...D,[S]:""}))},_=()=>{var j;const S={};return(j=l.site_submit_name)!=null&&j.trim()||(S.site_submit_name="Site submit name is required"),l.client_id||(S.client_id="Client selection is required"),l.property_id||(S.property_id="Property selection is required"),m(S),Object.keys(S).length===0},k=async()=>{if(_()){b(!0);try{if(s){const S={...l,date_submitted:l.date_submitted||null,loi_date:l.loi_date||null,delivery_date:l.delivery_date||null,updated_at:new Date().toISOString()},{data:j,error:D}=await W.from("site_submit").update(S).eq("id",s).select(`
            *,
            submit_stage (
              name
            ),
            client!client_id (
              client_name
            )
          `).single();if(D)throw D;n==null||n(j)}else{const S={...l,date_submitted:l.date_submitted||null,loi_date:l.loi_date||null,delivery_date:l.delivery_date||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("About to insert site submit data:",S);const{data:j,error:D}=await W.from("site_submit").insert(S).select(`
            *,
            submit_stage (
              name
            ),
            client!client_id (
              client_name
            )
          `).single();if(D)throw D;r==null||r(j)}t()}catch(S){console.error("Error saving site submit:",S),S instanceof Error&&console.error("Error message:",S.message),console.log("Attempted to save data:",s?"UPDATE":"CREATE"),console.log("Form data:",l),alert(`Error saving site submit: ${S instanceof Error?S.message:"Unknown error"}. Please check the console for details.`)}finally{b(!1)}}};return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60]",onClick:t}),a.jsxs("div",{className:`fixed inset-0 lg:inset-y-0 lg:right-0 lg:left-auto w-full lg:w-[700px] bg-white shadow-xl transform transition-transform duration-300 z-[60] ${e?"translate-x-0":"translate-x-full"} flex flex-col`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Site Submit":"New Site Submit"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:p?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Submit Name *"}),a.jsx("input",{type:"text",value:l.site_submit_name,onChange:S=>g("site_submit_name",S.target.value),className:`block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${y.site_submit_name?"border-red-300":""}`,placeholder:"Enter site submit name"}),y.site_submit_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.site_submit_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client *"}),a.jsxs("select",{value:l.client_id||"",onChange:S=>g("client_id",S.target.value||null),className:`block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${y.client_id?"border-red-300":""}`,children:[a.jsx("option",{value:"",children:"Select a client..."}),u.map(S=>a.jsx("option",{value:S.id,children:S.client_name},S.id))]}),y.client_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.client_id})]}),a.jsx(Zb,{value:l.property_id,onChange:S=>g("property_id",S),label:"Property *"}),y.property_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.property_id}),l.property_id&&a.jsx(Xb,{propertyId:l.property_id,value:l.property_unit_id,onChange:S=>g("property_unit_id",S),label:"Property Unit (Optional)"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Submission Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Submit Stage"}),a.jsxs("select",{value:l.submit_stage_id||"",onChange:S=>g("submit_stage_id",S.target.value||null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"Select stage..."}),f.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Submitted"}),a.jsx("input",{type:"date",value:l.date_submitted,onChange:S=>g("date_submitted",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"loi_written",checked:l.loi_written,onChange:S=>g("loi_written",S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"loi_written",className:"text-sm font-medium text-gray-700",children:"LOI Written"})]}),l.loi_written&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LOI Date"}),a.jsx("input",{type:"date",value:l.loi_date,onChange:S=>g("loi_date",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date"}),a.jsx("input",{type:"date",value:l.delivery_date,onChange:S=>g("delivery_date",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Timeframe"}),a.jsx("input",{type:"text",value:l.delivery_timeframe,onChange:S=>g("delivery_timeframe",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"e.g., 30-60 days, Q1 2024"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Financial Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year 1 Rent ($)"}),a.jsx("input",{type:"number",step:"0.01",value:l.year_1_rent||"",onChange:S=>g("year_1_rent",S.target.value?parseFloat(S.target.value):null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TI ($)"}),a.jsx("input",{type:"number",step:"0.01",value:l.ti||"",onChange:S=>g("ti",S.target.value?parseFloat(S.target.value):null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"0.00"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Location Verification"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verified Latitude"}),a.jsx("input",{type:"number",step:"any",value:l.verified_latitude||"",onChange:S=>g("verified_latitude",S.target.value?parseFloat(S.target.value):null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"e.g., 40.7128"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verified Longitude"}),a.jsx("input",{type:"number",step:"any",value:l.verified_longitude||"",onChange:S=>g("verified_longitude",S.target.value?parseFloat(S.target.value):null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"e.g., -74.0060"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Notes & Comments"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{rows:3,value:l.notes,onChange:S=>g("notes",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Internal notes..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Comments"}),a.jsx("textarea",{rows:3,value:l.customer_comments,onChange:S=>g("customer_comments",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Customer feedback or requirements..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Competitor Data"}),a.jsx("textarea",{rows:3,value:l.competitor_data,onChange:S=>g("competitor_data",S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Competitive landscape information..."})]})]})]})}),a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,disabled:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:k,disabled:x||p,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:x?"Saving...":"Save Site Submit"})]})})]})]}):null},Au=({title:e,count:t,onAddNew:r,children:n,isExpanded:s=!0,onToggle:o,icon:i,isEmpty:l=!1})=>a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg mb-3 shadow-sm ${l?"opacity-60":""}`,children:[a.jsxs("div",{className:`flex items-center justify-between p-3 border-b border-gray-100 ${l?"bg-gray-50":"bg-gradient-to-r from-slate-50 to-gray-50"}`,children:[a.jsxs("button",{onClick:o,className:"flex items-center space-x-2 flex-1 text-left hover:bg-white/50 -mx-3 px-3 py-1 rounded-t-lg transition-colors",children:[a.jsx("svg",{className:`w-4 h-4 text-gray-400 transform transition-transform ${s?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),i&&a.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:i})})}),a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:e}),a.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${l?"bg-gray-200 text-gray-600":"bg-blue-100 text-blue-800"}`,children:t}),l&&a.jsx("span",{className:"text-xs text-gray-500 italic",children:"(Empty)"})]}),a.jsxs("button",{onClick:r,className:"flex items-center px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors ml-2",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New"]})]}),s&&a.jsx("div",{className:"max-h-48 overflow-y-auto",children:t===0?a.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[a.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-gray-100 rounded-full flex items-center justify-center",children:i&&a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:i})})}),"No ",e.toLowerCase()," yet"]}):n})]}),D4=({contact:e,isExpanded:t=!1,onToggle:r})=>{var s,o;const n=e.mobile_phone||e.phone;return a.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[a.jsxs("div",{className:"p-2 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:r,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsxs("span",{className:"text-white font-medium text-xs",children:[((s=e.first_name)==null?void 0:s[0])||"?",((o=e.last_name)==null?void 0:o[0])||""]})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900 truncate",children:[e.first_name," ",e.last_name]}),n&&a.jsx("span",{className:"text-xs text-gray-500 truncate",children:n})]})})]}),a.jsx("svg",{className:`w-3 h-3 text-gray-400 transform transition-transform flex-shrink-0 ${t?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),t&&a.jsx("div",{className:"px-2 pb-2 bg-blue-25",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 text-xs space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),a.jsx("span",{className:"font-medium text-blue-900",children:"Contact Details"})]}),a.jsxs("div",{className:"space-y-1 ml-4",children:[e.title&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Title:"})," ",a.jsx("span",{className:"text-blue-700",children:e.title})]}),e.company&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Company:"})," ",a.jsx("span",{className:"text-blue-700",children:e.company})]}),e.email&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Email:"})," ",a.jsx("span",{className:"text-blue-700",children:e.email})]}),e.phone&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Phone:"})," ",a.jsx("span",{className:"text-blue-700",children:e.phone})]}),e.mobile_phone&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Mobile:"})," ",a.jsx("span",{className:"text-blue-700",children:e.mobile_phone})]})]})]})})]})},C4=({siteSubmit:e,onClick:t})=>{var r,n;return a.jsx("div",{className:"p-2 hover:bg-green-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0 group",onClick:()=>t==null?void 0:t(e.id),children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-green-900",children:e.site_submit_name||e.sf_account||"Unnamed Submit"}),a.jsx("svg",{className:"w-3 h-3 text-gray-400 group-hover:text-green-600 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:((r=e.submit_stage)==null?void 0:r.name)||e.sf_submit_stage||"No stage"}),a.jsx("p",{className:"text-xs text-gray-500 truncate ml-2",children:((n=e.client)==null?void 0:n.client_name)||"No client"})]})]})})})},E4=({deal:e,onClick:t})=>{var r,n;return a.jsx("div",{className:"p-2 hover:bg-blue-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0 group",onClick:()=>t==null?void 0:t(e.id),children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-blue-900",children:e.deal_name||"Unnamed Deal"}),a.jsx("svg",{className:"w-3 h-3 text-gray-400 group-hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:((r=e.deal_stage)==null?void 0:r.label)||"No stage"}),a.jsx("p",{className:"text-xs text-gray-500 truncate ml-2",children:((n=e.client)==null?void 0:n.client_name)||"No client"})]})]})})})},P4=({propertyId:e,isOpen:t,onToggle:r,onDealClick:n})=>{const[s,o]=w.useState([]),[i,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState(!1),[h,p]=w.useState(null),[v,x]=w.useState(!1),[b,y]=w.useState(null),m=()=>({contacts:s.length>0,deals:i.length>0,siteSubmits:c.length>0}),[g,_]=w.useState(()=>{const N=localStorage.getItem(`expandedSidebarModules_${e}`);return N?JSON.parse(N):m()}),[k,S]=w.useState(()=>{const N=localStorage.getItem(`expandedContacts_${e}`);return N?JSON.parse(N):{}});w.useEffect(()=>{if(!e)return;(async()=>{f(!0),p(null);try{const{data:E,error:M}=await W.from("property_contact").select(`
            *,
            contact!fk_property_contact_contact_id (*)
          `).eq("property_id",e);if(M)throw M;const L=[];E&&E.forEach(T=>{T.contact&&L.push({...T.contact,isPrimaryContact:!1})});const{data:$,error:z}=await W.from("property").select("contact_id").eq("id",e).single();if(!z&&($!=null&&$.contact_id)){const T=L.findIndex(O=>O.id===$.contact_id);if(T>=0)L[T].isPrimaryContact=!0;else{const{data:O}=await W.from("contact").select("*").eq("id",$.contact_id).single();O&&L.unshift({...O,isPrimaryContact:!0})}}o(L);const{data:R,error:I}=await W.from("deal").select(`
            *,
            deal_stage (
              label,
              sort_order
            ),
            client!client_id (
              client_name
            )
          `).eq("property_id",e).order("created_at",{ascending:!1});if(I)throw I;l(R||[]);const{data:H,error:C}=await W.from("site_submit").select(`
            *,
            submit_stage (
              name
            ),
            client!client_id (
              client_name
            )
          `).eq("property_id",e).order("created_at",{ascending:!1});if(C)throw C;u(H||[])}catch(E){console.error("Error loading sidebar data:",E),p(E instanceof Error?E.message:"Failed to load data")}finally{f(!1)}})()},[e]),w.useEffect(()=>{d||_(N=>{const E=m(),M=localStorage.getItem(`expandedSidebarModules_${e}`);return M?JSON.parse(M):E})},[s.length,i.length,c.length,d,e]);const j=N=>{const E={...g,[N]:!g[N]};_(E),localStorage.setItem(`expandedSidebarModules_${e}`,JSON.stringify(E))},D=N=>{const E={...k,[N]:!k[N]};S(E),localStorage.setItem(`expandedContacts_${e}`,JSON.stringify(E))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed right-0 top-0 h-full w-[500px] bg-white border-l border-gray-200 shadow-xl transform transition-transform duration-300 ${t?"translate-x-0":"translate-x-full"} z-40 overflow-y-auto`,style:{top:"180px",height:"calc(100vh - 180px)"},children:a.jsx("div",{className:"p-3",children:d?a.jsx("div",{className:"p-4 space-y-3",children:[...Array(3)].map((N,E)=>a.jsx("div",{className:"animate-pulse",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-gray-200 rounded"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},E))}):h?a.jsxs("div",{className:"p-4 text-center text-red-600",children:[a.jsx("p",{className:"font-medium",children:"Error loading data"}),a.jsx("p",{className:"text-sm",children:h})]}):a.jsxs(a.Fragment,{children:[a.jsx(Au,{title:"Associated Contacts",count:s.length,onAddNew:()=>console.log("Add new contact"),isExpanded:g.contacts,onToggle:()=>j("contacts"),icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",isEmpty:s.length===0,children:s.map(N=>a.jsx(D4,{contact:N,isExpanded:k[N.id],onToggle:()=>D(N.id)},N.id))}),a.jsx(Au,{title:"Deals",count:i.length,onAddNew:()=>console.log("Add new deal"),isExpanded:g.deals,onToggle:()=>j("deals"),icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1",isEmpty:i.length===0,children:i.map(N=>a.jsx(E4,{deal:N,onClick:n},N.id))}),a.jsx(Au,{title:"Site Submits",count:c.length,onAddNew:()=>{y(null),x(!0)},isExpanded:g.siteSubmits,onToggle:()=>j("siteSubmits"),icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",isEmpty:c.length===0,children:c.map(N=>a.jsx(C4,{siteSubmit:N,onClick:E=>{y(E),x(!0)}},N.id))})]})})}),a.jsx(j4,{isOpen:v,onClose:()=>{x(!1),y(null)},siteSubmitId:b,propertyId:e,onSave:N=>{u(E=>[N,...E]),x(!1)},onUpdate:N=>{u(E=>E.map(M=>M.id===N.id?N:M)),x(!1)}})]})},Sa=({label:e,value:t,onChange:r,placeholder:n,required:s=!1,type:o="text",helpText:i})=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e," ",s&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:o,value:t||"",onChange:l=>r(l.target.value||null),placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),e0=({label:e,value:t,onChange:r,helpText:n})=>{const[s,o]=w.useState("");w.useEffect(()=>{t==null?o(""):o(t.toFixed(2))},[t]);const i=l=>{const c=l.target.value;console.log(`[${e}] User typed:`,c),o(c);const u=c===""?null:parseFloat(c);console.log(`[${e}] Parsed value:`,u),console.log(`[${e}] Calling onChange with:`,u),r(u)};return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2 text-gray-500 text-sm",children:"$"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:s,onChange:i,placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),n&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]})},Ro=({label:e,checked:t,onChange:r})=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:n=>r(n.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:e})]}),T4=({propertyId:e,isEditing:t=!1,onUnitsChange:r,isExpanded:n=!1,onToggle:s})=>{const[o,i]=w.useState([]),[l,c]=w.useState(!1),[u,d]=w.useState(null);w.useEffect(()=>{if(!e)return;(async()=>{c(!0),d(null);try{const{data:b,error:y}=await W.from("property_unit").select("*").eq("property_id",e).order("property_unit_name");if(y)throw y;i(b||[]),r==null||r(b||[])}catch(b){console.error("Error loading property units:",b),d(b instanceof Error?b.message:"Failed to load units")}finally{c(!1)}})()},[e,r]);const f=async()=>{const x={property_id:e,property_unit_name:`Unit ${o.length+1}`,sqft:null,rent:null,nnn:null,patio:!1,inline:!1,end_cap:!1,end_cap_drive_thru:!1,second_gen_restaurant:!1,lease_expiration_date:null,unit_notes:null};try{const{data:b,error:y}=await W.from("property_unit").insert([x]).select().single();if(y)throw y;const m=[...o,b];i(m),r==null||r(m)}catch(b){console.error("Error creating unit:",b),d(b instanceof Error?b.message:"Failed to create unit")}},h=async(x,b,y)=>{console.log(`[updateUnit] Updating unit ${x}, field: ${b}, value:`,y,typeof y);try{const m={[b]:y};console.log("[updateUnit] Sending to database:",m);const{error:g}=await W.from("property_unit").update(m).eq("id",x);if(g)throw g;const _=o.map(k=>k.id===x?{...k,[b]:y}:k);console.log("[updateUnit] Updated unit in array:",_.find(k=>k.id===x)),i(_),r==null||r(_)}catch(m){console.error("Error updating unit:",m),d(m instanceof Error?m.message:"Failed to update unit")}},p=async x=>{if(confirm("Are you sure you want to delete this unit?"))try{const{error:b}=await W.from("property_unit").delete().eq("id",x);if(b)throw b;const y=o.filter(m=>m.id!==x);i(y),r==null||r(y)}catch(b){console.error("Error deleting unit:",b),d(b instanceof Error?b.message:"Failed to delete unit")}};if(l)return a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"space-y-3",children:[...Array(2)].map((x,b)=>a.jsx("div",{className:"h-24 bg-gray-200 rounded"},b))})]})});const v=()=>{if(l)return"Loading units...";if(o.length===0)return"No units yet";if(o.length===1){const g=o[0];let _=g.property_unit_name||"Unit";return g.sqft&&(_+=`  ${g.sqft.toLocaleString()} sqft`),g.rent&&(_+=`  $${g.rent.toFixed(2)} rent`),g.nnn&&(_+=`  $${g.nnn.toFixed(2)} NNN`),_}const x=o.reduce((g,_)=>g+(_.sqft||0),0),b=o.reduce((g,_)=>g+(_.rent||0),0),y=o.reduce((g,_)=>g+(_.nnn||0),0);let m=`${o.length} units`;return x>0&&(m+=`  ${x.toLocaleString()} total sqft`),b>0&&(m+=`  $${b.toLocaleString()} total rent`),y>0&&(m+=`  $${y.toLocaleString()} total NNN`),m};return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-6 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Property Units"}),a.jsx("p",{className:"text-sm text-gray-500",children:v()})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:o.length>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o.length})})]}),n&&a.jsxs("div",{className:"px-6 pb-6 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pt-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Manage individual units within this property"}),a.jsxs("button",{onClick:f,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Unit"]})]}),u&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-red-600 text-sm",children:u})}),o.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("p",{className:"text-sm font-medium",children:"No units yet"}),a.jsx("p",{className:"text-xs mt-1",children:'Click "Add Unit" to start adding units to this property'})]}):a.jsx("div",{className:"space-y-4",children:o.map((x,b)=>{var y;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Unit ",b+1]}),a.jsx("button",{onClick:()=>p(x.id),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded",title:"Delete unit",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsx(Sa,{label:"Unit Name",value:x.property_unit_name,onChange:m=>h(x.id,"property_unit_name",m),placeholder:"e.g., Suite 101",required:!0}),a.jsx(Sa,{label:"Unit Notes",value:x.unit_notes,onChange:m=>h(x.id,"unit_notes",m),placeholder:"Any special notes about this unit"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[a.jsx(Sa,{label:"Square Feet",value:((y=x.sqft)==null?void 0:y.toString())||null,onChange:m=>h(x.id,"sqft",m?Number(m):null),type:"number",placeholder:"0"}),a.jsx(e0,{label:"Rent",value:x.rent,onChange:m=>h(x.id,"rent",m),helpText:"Base rent amount"}),a.jsx(e0,{label:"NNN",value:x.nnn,onChange:m=>h(x.id,"nnn",m),helpText:"Net, Net, Net charges"}),a.jsx(Sa,{label:"Lease Expiration",value:x.lease_expiration_date?new Date(x.lease_expiration_date).toISOString().split("T")[0]:null,onChange:m=>h(x.id,"lease_expiration_date",m?new Date(m).toISOString():null),type:"date"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Unit Features"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[a.jsx(Ro,{label:"Patio",checked:x.patio||!1,onChange:m=>h(x.id,"patio",m)}),a.jsx(Ro,{label:"Inline",checked:x.inline||!1,onChange:m=>h(x.id,"inline",m)}),a.jsx(Ro,{label:"End Cap",checked:x.end_cap||!1,onChange:m=>h(x.id,"end_cap",m)}),a.jsx(Ro,{label:"End Cap Drive Thru",checked:x.end_cap_drive_thru||!1,onChange:m=>h(x.id,"end_cap_drive_thru",m)}),a.jsx(Ro,{label:"2nd Gen Restaurant",checked:x.second_gen_restaurant||!1,onChange:m=>h(x.id,"second_gen_restaurant",m)})]})]})]},x.id)})}),o.length>0&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:a.jsx("p",{className:"text-blue-800 text-sm",children:" Units are automatically saved as you make changes. You can add, edit, or remove units at any time."})})]})]})},R4=({propertyId:e,mode:t="view",initialLocation:r,onSave:n,onBack:s=()=>window.history.back()})=>{const o=io(),[i,l]=w.useState(!1),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState([]),[v,x]=w.useState("idle"),[b,y]=w.useState(!0),[m,g]=w.useState(!1),{property:_,loading:k,error:S,updateProperty:j,createProperty:D,refreshProperty:N}=lw(e),{formData:E,updateField:M,validation:L,isDirty:$,resetForm:z}=v4(_||void 0);w.useEffect(()=>{(async()=>{try{const[G,ae,_e]=await Promise.all([W.from("property_type").select("*").eq("active",!0).order("sort_order"),W.from("property_stage").select("*").eq("active",!0).order("sort_order"),W.from("property_record_type").select("*").eq("active",!0).order("sort_order")]);G.data&&u(G.data),ae.data&&f(ae.data),_e.data?p(_e.data):(console.log("No property record types found in lookup table"),p([]))}catch(G){console.error("Error loading dropdown data:",G),p([])}})()},[]),w.useEffect(()=>{t==="create"&&r&&!E.latitude&&!E.longitude&&(M("latitude",r.lat),M("longitude",r.lng))},[t,r,E.latitude,E.longitude,M]),w.useEffect(()=>{_&&z(_)},[_,z]);const R=async()=>{},I=async(F,G)=>{if(M(F,G),e&&t!=="create")try{x("saving"),await j({[F]:G}),x("saved"),setTimeout(()=>x("idle"),2e3)}catch(ae){console.error("Auto-save failed:",ae),x("error")}},H=()=>new Promise((F,G)=>{if(!navigator.geolocation){G(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(ae=>{F({lat:ae.coords.latitude,lng:ae.coords.longitude})},ae=>{G(new Error("Failed to get current location: "+ae.message))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),C=()=>{console.log("Call contact for property:",e)},T=F=>{o(`/deal/${F}`)};if(k)return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"bg-slate-800 h-32"}),a.jsxs("div",{className:"flex h-screen",children:[a.jsx("div",{className:"flex-1 p-4 space-y-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})}),a.jsx("div",{className:"w-80 bg-white border-l border-gray-200 p-4",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]})})]})]})});if(S&&t!=="create")return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:a.jsxs("div",{className:"text-red-600 text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Property"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:S}),a.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})});const O=t==="create"?E:_||E;return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx(y4,{property:{...O,property_type:c.find(F=>F.id===O.property_type_id),property_stage:d.find(F=>F.id===O.property_stage_id)},isEditing:i,onToggleEdit:R,onBack:s,onGetLocation:()=>H().then(F=>{I("latitude",F.lat),I("longitude",F.lng)}),onCallContact:C}),a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-2 shadow-sm",children:a.jsx("div",{className:"flex items-center justify-end",children:a.jsxs("button",{onClick:()=>y(!b),className:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),b?"Hide":"Show"," Sidebar"]})})}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-8",children:[i&&L.warnings.length>0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Recommendations"}),a.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:L.warnings.map((F,G)=>a.jsx("li",{children:F},G))})]})]})}),i&&v!=="idle"&&a.jsxs("div",{className:`p-2 rounded-md text-sm mb-4 ${v==="saving"?"bg-blue-50 text-blue-700":v==="saved"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[v==="saving"&&"Saving changes...",v==="saved"&&"Changes saved successfully",v==="error"&&"Error saving changes"]}),a.jsx(_4,{property:O,isEditing:i,onFieldUpdate:I,propertyRecordTypes:h}),a.jsx(x4,{property:O,onFieldUpdate:I,onGetCurrentLocation:H}),e&&a.jsx(T4,{propertyId:e,isEditing:i,isExpanded:m,onToggle:()=>g(!m),onUnitsChange:F=>{console.log("Units updated:",F)}}),a.jsx(b4,{property:{...O,property_record_type:h.find(F=>F.id===O.property_record_type_id)},onFieldUpdate:I}),a.jsx(k4,{property:O,onFieldUpdate:I}),a.jsx(S4,{property:O,isEditing:i,onFieldUpdate:I}),a.jsx(N4,{property:O,isEditing:i,onFieldUpdate:I}),i&&!L.isValid&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please fix these errors:"}),a.jsx("ul",{className:"mt-1 text-xs text-red-700 list-disc list-inside",children:Object.entries(L.errors).map(([F,G])=>a.jsxs("li",{children:[a.jsxs("strong",{children:[F,":"]})," ",G]},F))})]})]})})]})}),e&&a.jsx(P4,{propertyId:e,isOpen:b,onToggle:()=>y(!b),onDealClick:T})]})]})};function O4(){const{propertyId:e}=ky(),t=io(),[r,n]=w.useState(null),[s,o]=w.useState(!0),[i,l]=w.useState(null),c=e==="create";w.useEffect(()=>{(async()=>{if(!e||c){o(!1);return}try{o(!0);const{data:h,error:p}=await W.from("property").select("*").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching property:",h),l(h instanceof Error?h.message:"Failed to load property")}finally{o(!1)}})()},[e,c]);const u=()=>{t(-1)},d=f=>{n(f),c&&t(`/property/${f.id}`)};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Loading property..."})]})}):i&&!c?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:a.jsxs("div",{className:"text-red-600 text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Property Not Found"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),a.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})}):a.jsx(R4,{propertyId:c?void 0:e,mode:c?"create":"view",onSave:d,onBack:u})}class I4{constructor(){this.NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org/search",this.USER_AGENT="PropertyKanbanApp/1.0"}async geocodeAddress(t){try{const r=t.trim().replace(/\s+/g," ");if(!r)return{error:"Address is required"};const n=await fetch(`${this.NOMINATIM_BASE_URL}?`+new URLSearchParams({q:r,format:"json",limit:"1",addressdetails:"1",countrycodes:"us"}),{headers:{"User-Agent":this.USER_AGENT}});if(!n.ok)throw new Error(`Geocoding API responded with status: ${n.status}`);const s=await n.json();if(!s||s.length===0)return{error:"Address not found",code:"NOT_FOUND"};const o=s[0],i=o.address||{};return{latitude:parseFloat(o.lat),longitude:parseFloat(o.lon),formatted_address:o.display_name,city:i.city||i.town||i.village||i.hamlet,state:i.state,zip:i.postcode,county:i.county}}catch(r){return console.error("Geocoding error:",r),{error:r instanceof Error?r.message:"Geocoding failed",code:"GEOCODING_ERROR"}}}async reverseGeocode(t,r){try{const n=await fetch("https://nominatim.openstreetmap.org/reverse?"+new URLSearchParams({lat:t.toString(),lon:r.toString(),format:"json",addressdetails:"1"}),{headers:{"User-Agent":this.USER_AGENT}});if(!n.ok)throw new Error(`Reverse geocoding API responded with status: ${n.status}`);const s=await n.json();if(!s)return{error:"Location not found",code:"NOT_FOUND"};const o=s.address||{};return{latitude:t,longitude:r,formatted_address:s.display_name,city:o.city||o.town||o.village||o.hamlet,state:o.state,zip:o.postcode,county:o.county}}catch(n){return console.error("Reverse geocoding error:",n),{error:n instanceof Error?n.message:"Reverse geocoding failed",code:"REVERSE_GEOCODING_ERROR"}}}buildAddressString(t,r,n,s){const o=[t];return r&&o.push(r),n&&o.push(n),s&&o.push(s),o.join(", ")}isValidCoordinates(t,r){return t>=-90&&t<=90&&r>=-180&&r<=180}async getCurrentLocation(){return new Promise(t=>{if(!navigator.geolocation){t({error:"Geolocation is not supported by this browser",code:"NOT_SUPPORTED"});return}navigator.geolocation.getCurrentPosition(r=>{t({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{let n="Failed to get current location",s="LOCATION_ERROR";switch(r.code){case r.PERMISSION_DENIED:n="Location access denied by user",s="PERMISSION_DENIED";break;case r.POSITION_UNAVAILABLE:n="Location information unavailable",s="POSITION_UNAVAILABLE";break;case r.TIMEOUT:n="Location request timed out",s="TIMEOUT";break}t({error:n,code:s})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}}const Fu=new I4;function M4(){const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(()=>{n(null)},[]),o=w.useCallback(async l=>{t(!0),n(null);try{const c=Fu.buildAddressString(l.address||"",l.city,l.state,l.zip);if(!c.trim())throw new Error("No address provided for geocoding");console.log(" Geocoding address:",c);const u=await Fu.geocodeAddress(c);if("error"in u)return n(u.error),console.error("Geocoding failed:",u.error),l;const d=u,f={...l,latitude:d.latitude,longitude:d.longitude};return!l.city&&d.city&&(f.city=d.city),!l.state&&d.state&&(f.state=d.state),!l.zip&&d.zip&&(f.zip=d.zip),!l.county&&d.county&&(f.county=d.county),console.log(" Geocoding successful:",{address:c,coordinates:[d.latitude,d.longitude]}),f}catch(c){const u=c instanceof Error?c.message:"Geocoding failed";return n(u),console.error("Geocoding error:",c),l}finally{t(!1)}},[]),i=w.useCallback(async()=>{n(null);try{const l=await Fu.getCurrentLocation();return"error"in l?(n(l.error),null):l}catch(l){const c=l instanceof Error?l.message:"Failed to get current location";return n(c),null}},[]);return{isGeocoding:e,geocodeError:r,geocodeProperty:o,getCurrentLocation:i,clearError:s}}function L4(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,o]=w.useState(null);return w.useEffect(()=>{(async()=>{try{n(!0),o(null);const{data:l,error:c}=await W.from("property_record_type").select("*").eq("active",!0).order("sort_order");if(c)throw c;t(l||[])}catch(l){const c=l instanceof Error?l.message:"Failed to fetch property record types";o(c),console.error("Error fetching property record types:",l)}finally{n(!1)}})()},[]),{propertyRecordTypes:e,isLoading:r,error:s}}const A4=()=>{const e=io(),[t,r]=w.useState(!1),{isGeocoding:n,geocodeError:s,geocodeProperty:o,getCurrentLocation:i,clearError:l}=M4(),{propertyRecordTypes:c,isLoading:u,error:d}=L4(),{createProperty:f}=lw(),[h,p]=w.useState({property_record_type_id:null,property_name:"",address:"",city:"",state:"",zip:"",trade_area:"",asking_lease_price:null,asking_purchase_price:null,rent_psf:null,nnn_psf:null,property_notes:"",acres:null,units:[]}),v=(A,re)=>{p(J=>({...J,[A]:re}))},x=()=>{const A={id:`temp_${Date.now()}`,property_unit_name:null,sqft:null,rent:null,nnn:null,patio:!1,inline:!1,end_cap:!1,end_cap_drive_thru:!1,second_gen_restaurant:!1,created_at:null,created_by_id:null,created_by_sf_id:null,deal_id:null,lease_expiration_date:null,property_id:null,sf_id:crypto.randomUUID(),site_submit_id:null,unit_notes:null,updated_at:null,updated_by_id:null,updated_by_sf_id:null};p(re=>({...re,units:[...re.units,A]}))},b=(A,re,J)=>{p(Ie=>({...Ie,units:Ie.units.map(De=>De.id===A?{...De,[re]:J}:De)}))},y=A=>{p(re=>({...re,units:re.units.filter(J=>J.id!==A)}))},m=w.useMemo(()=>{var Jh;const A=c.find(uw=>uw.id===h.property_record_type_id),re=((Jh=A==null?void 0:A.label)==null?void 0:Jh.toLowerCase())||"",J=re.includes("land"),Ie=re.includes("shopping")||re.includes("retail");return{isLandType:J,isShoppingCenterType:Ie,showLeaseFields:!J&&!Ie,showPSFFields:!J,showPurchaseFields:J,selectedRecordType:A,recordTypeLabel:re}},[h.property_record_type_id,c]),{isLandType:g,isShoppingCenterType:_,showLeaseFields:k,showPSFFields:S,showPurchaseFields:j,selectedRecordType:D,recordTypeLabel:N}=m;w.useEffect(()=>{if(!h.property_record_type_id)return;const A={};g&&!S&&(h.rent_psf||h.nnn_psf)&&(A.rent_psf=null,A.nnn_psf=null),_&&h.asking_purchase_price&&(A.asking_purchase_price=null),k&&h.asking_purchase_price&&(A.asking_purchase_price=null),Object.keys(A).length>0&&p(re=>({...re,...A}))},[g,_,k,S,h.property_record_type_id]);const E=async A=>{if(A.preventDefault(),l(),!h.property_record_type_id){alert("Please select a property record type");return}if(!h.property_name.trim()||!h.address.trim()||!h.city.trim()||!h.state.trim()){alert("Please fill in all required fields (Property Record Type, Property Name, Address, City, State)");return}r(!0);try{console.log("Creating new property:",h);const re={property_record_type_id:h.property_record_type_id,property_name:h.property_name,address:h.address,city:h.city,state:h.state,zip:h.zip,trade_area:h.trade_area,asking_lease_price:h.asking_lease_price,asking_purchase_price:h.asking_purchase_price,rent_psf:h.rent_psf,nnn_psf:h.nnn_psf,property_notes:h.property_notes,acres:h.acres},J=await f(re);if(console.log(" Property created successfully:",J),_&&h.units.length>0){console.log("Creating property units:",h.units);const Ie=h.units.filter(De=>De.property_unit_name&&De.property_unit_name.trim()).map(De=>{var Me;return{property_id:J.id,property_unit_name:((Me=De.property_unit_name)==null?void 0:Me.trim())||null,sqft:De.sqft,rent:De.rent,nnn:De.nnn,patio:De.patio,inline:De.inline,end_cap:De.end_cap,end_cap_drive_thru:De.end_cap_drive_thru,second_gen_restaurant:De.second_gen_restaurant,sf_id:crypto.randomUUID(),lease_expiration_date:De.lease_expiration_date,unit_notes:De.unit_notes,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by_id:null,created_by_sf_id:null,deal_id:null,site_submit_id:null,updated_by_id:null,updated_by_sf_id:null}});if(Ie.length>0){const{data:De,error:Me}=await W.from("property_unit").insert(Ie).select();Me?console.error("Error creating property units:",Me):console.log(" Property units created successfully:",De)}}o(J).then(Ie=>{Ie.latitude&&Ie.longitude?console.log(" Property geocoded successfully:",{coordinates:[Ie.latitude,Ie.longitude]}):s&&console.warn(" Property created but geocoding failed:",s)}).catch(Ie=>{console.warn(" Property created but geocoding failed:",Ie)}),e(`/property/${J.id}`)}catch(re){console.error("Error creating property:",re),alert("Failed to create property. Please try again.")}finally{r(!1)}},M=()=>{e(-1)},[L,$]=w.useState(!1),[z,R]=w.useState(!1),[I,H]=w.useState({}),[C,T]=w.useState(!1),[O,F]=w.useState(!1),G=()=>{$(!0),setTimeout(()=>$(!1),4e3)},ae=()=>{R(!0),setTimeout(()=>R(!1),4e3)},_e=A=>{H(re=>({...re,[A]:!0})),setTimeout(()=>{H(re=>({...re,[A]:!1}))},4e3)},Dt=()=>{T(!0),setTimeout(()=>{T(!1)},4e3)},Ke=()=>{F(!0),setTimeout(()=>{F(!1)},4e3)};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Property"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enter essential property information to get started"})]}),a.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Unable to load property types"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:d})})]})]})}),s&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L4.316 15.5C3.546 16.333 4.508 18 6.048 18z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Geocoding Notice"}),a.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[a.jsx("p",{children:s}),a.jsx("p",{className:"mt-1",children:"Don't worry - your property will still be created. You can manually enter coordinates later if needed."})]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{type:"button",onClick:l,className:"text-sm text-yellow-600 hover:text-yellow-500 underline",children:"Dismiss"})})]})]})}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Type"}),a.jsx("span",{className:"text-red-500 text-sm",children:"*Required"})]}),a.jsx("div",{className:"max-w-md",children:a.jsx(cw,{label:"Property Record Type*",value:h.property_record_type_id,onChange:A=>v("property_record_type_id",A),options:c.map(A=>({id:A.id,label:A.label})),placeholder:u?"Loading...":c.length===0?"No record types available":"Select property type...",disabled:u||c.length===0,tabIndex:1,required:!0,defaultText:"Select Property Type"})})]}),a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",onClick:ae,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",title:"Pin current location",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),z&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute bottom-full right-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),a.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will drop your current location geocode to create an address and geocode from where your computer or phone are located."}),a.jsx("button",{onClick:()=>R(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsx(fe,{label:"Property Name*",value:h.property_name,onChange:A=>v("property_name",A),placeholder:"Downtown Office Building",tabIndex:2,required:!0,defaultText:"Enter Property Name"}),a.jsx(fe,{label:"Street Address*",value:h.address,onChange:A=>v("address",A),placeholder:"123 Main Street",tabIndex:3}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(Wn,{label:"City*",value:h.city,onChange:A=>v("city",A),field:"city",placeholder:"San Francisco",tabIndex:4}),a.jsx(Wn,{label:"State*",value:h.state,onChange:A=>v("state",A),field:"state",placeholder:"CA",tabIndex:5}),a.jsx(fe,{label:"ZIP Code",value:h.zip,onChange:A=>v("zip",A),placeholder:"94105",tabIndex:6})]}),a.jsxs("div",{className:"flex items-end gap-4 mt-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Wn,{label:"Trade Area",value:h.trade_area,onChange:A=>v("trade_area",A),field:"trade_area",placeholder:"Downtown, Suburb, etc.",tabIndex:7})}),a.jsxs("div",{className:"relative pb-1",children:[a.jsxs("button",{type:"button",onClick:G,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Verify Location"]}),L&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),a.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will take you to a map where you can move the pin to the correct location and recode the address coordinates."}),a.jsx("button",{onClick:()=>$(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]})]})]}),h.property_record_type_id&&a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Financial Information",g&&" (Land)",_&&" (Retail/Shopping)",!g&&!_&&" (Building)"]}),a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(Optional - can be added later)"})]}),g&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Qr,{label:"Asking Purchase Price",value:h.asking_purchase_price,onChange:A=>v("asking_purchase_price",A),helpText:"Land purchase price",colorScheme:"blue",showLarge:!0,tabIndex:8}),a.jsx(Qr,{label:"Asking Ground Lease Price",value:h.asking_lease_price,onChange:A=>v("asking_lease_price",A),helpText:"Annual ground lease amount",colorScheme:"green",showLarge:!0,tabIndex:9}),a.jsx(fe,{label:"Acres",value:h.acres,onChange:A=>v("acres",A),type:"number",placeholder:"5.25",inputMode:"decimal",tabIndex:10})]}),a.jsxs("div",{className:"flex justify-end relative",children:[a.jsxs("button",{type:"button",onClick:Ke,className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),O&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),a.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will create a site submit for this land property to track development prospects and opportunities."}),a.jsx("button",{onClick:()=>F(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),k&&a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.jsx(Qr,{label:"Asking Lease Price",value:h.asking_lease_price,onChange:A=>v("asking_lease_price",A),helpText:"Annual lease amount",colorScheme:"green",showLarge:!0,tabIndex:8})})}),S&&a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Ul,{label:"Rent PSF",value:h.rent_psf,onChange:A=>v("rent_psf",A),helpText:"Base rent per square foot",tabIndex:9}),a.jsx(Ul,{label:"NNN PSF",value:h.nnn_psf,onChange:A=>v("nnn_psf",A),helpText:"Triple net charges per square foot",tabIndex:10})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:a.jsx("p",{className:"text-sm text-gray-600",children:" Additional financial fields like square footage, occupancy rates, and detailed lease terms can be added in the detailed property view after creation."})})]}),!h.property_record_type_id&&a.jsxs("section",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Financial Information"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Select a property record type above to see relevant financial fields."})]}),_&&a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Shopping Center Units"})]}),a.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Unit"]})]}),h.units.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"mb-2",children:a.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("p",{className:"text-sm",children:"No units added yet."}),a.jsx("p",{className:"text-xs mt-1 text-gray-400",children:'Use the "Add Unit" button to start adding units to this shopping center.'}),a.jsxs("div",{className:"mt-4 relative inline-block",children:[a.jsxs("button",{type:"button",onClick:Dt,className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),C&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),a.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will create a site submit on the property level for tracking prospects when no specific units are defined."}),a.jsx("button",{onClick:()=>T(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}):a.jsx("div",{className:"space-y-4",children:h.units.map((A,re)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Unit ",re+1]})}),a.jsx("button",{type:"button",onClick:()=>y(A.id),className:"text-red-500 hover:text-red-700 text-lg font-bold",title:"Delete unit",children:""})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(fe,{label:"Unit Name",value:A.property_unit_name,onChange:J=>b(A.id,"property_unit_name",J),placeholder:"e.g., Suite A, Space 101, etc.",tabIndex:11})}),a.jsx("div",{children:a.jsx(fe,{label:"Unit Notes",value:A.unit_notes,onChange:J=>b(A.id,"unit_notes",J),placeholder:"Optional notes",multiline:!0,rows:1,tabIndex:15})}),a.jsx("div",{children:a.jsx(fe,{label:"Square Feet",value:A.sqft,onChange:J=>b(A.id,"sqft",J),type:"number",placeholder:"1,200",inputMode:"numeric",tabIndex:12})}),a.jsx("div",{children:a.jsx(Qr,{label:"Rent",value:A.rent,onChange:J=>b(A.id,"rent",J),helpText:"Unit rent amount",tabIndex:13})}),a.jsx("div",{children:a.jsx(Qr,{label:"NNN",value:A.nnn,onChange:J=>b(A.id,"nnn",J),helpText:"Net Net Net charges",tabIndex:14})}),a.jsx("div",{className:"md:col-span-3",children:a.jsx(fe,{label:"Lease Expiration Date",value:A.lease_expiration_date?new Date(A.lease_expiration_date).toISOString().split("T")[0]:null,onChange:J=>b(A.id,"lease_expiration_date",J?new Date(J).toISOString():null),type:"date",placeholder:"YYYY-MM-DD",tabIndex:16})})]}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Unit Features"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>_e(A.id),className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-xs font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),I[A.id]&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:a.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[a.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),a.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),a.jsx("p",{children:"This will create a site submit on the unit for tracking tenant prospects and submissions."}),a.jsx("button",{onClick:()=>H(J=>({...J,[A.id]:!1})),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.patio,onChange:J=>b(A.id,"patio",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Patio"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.inline,onChange:J=>b(A.id,"inline",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Inline"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.end_cap,onChange:J=>b(A.id,"end_cap",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"End Cap"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.end_cap_drive_thru,onChange:J=>b(A.id,"end_cap_drive_thru",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"End Cap Drive-Thru"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.second_gen_restaurant,onChange:J=>b(A.id,"second_gen_restaurant",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"2nd Gen Restaurant"})]})]})]})]},A.id))}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:a.jsx("p",{className:"text-sm text-blue-700",children:" Units can be added now or later in the detailed property view. Adding units helps track individual tenant spaces and their lease details."})})]}),a.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Initial Notes"})]}),a.jsx("textarea",{value:h.property_notes,onChange:A=>v("property_notes",A.target.value),placeholder:"Add any initial notes about this property, market conditions, or other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none min-h-[100px]",tabIndex:10}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can add more detailed notes and use quick templates after the property is created."})]}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Required fields: Property Record Type, Property Name, Address, City, State"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:t||n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(t||n)&&a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n?"Adding Location...":t?"Creating Property...":"Create Property"]})]})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Automatic Location Detection"}),a.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"The system automatically converts your address into GPS coordinates for mapping and location features. This happens in the background and won't delay property creation."}),n&&a.jsxs("div",{className:"mt-2 flex items-center gap-2 text-blue-600",children:[a.jsx("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-xs",children:"Detecting location..."})]})]})]})})]})})};function F4(){const e=$r(),{user:t,signOut:r}=jj(),n=o=>`px-4 py-2 rounded hover:bg-blue-100 ${e.pathname===o?"bg-blue-200 font-semibold":""}`,s=async()=>{await r()};return a.jsxs("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(vi,{to:"/master-pipeline",className:n("/master-pipeline"),children:"Master Pipeline"}),a.jsx(vi,{to:"/property/new",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"+ New Property"})]}),t&&a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm text-gray-600",children:t.email}),a.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})}function $4(){return a.jsx(Dj,{children:a.jsx(Cj,{children:a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[a.jsx(F4,{}),a.jsxs(Rk,{children:[a.jsx(us,{path:"/",element:a.jsx(Pk,{to:"/master-pipeline",replace:!0})}),a.jsx(us,{path:"/master-pipeline",element:a.jsx(ZP,{})}),a.jsx(us,{path:"/deal/:dealId",element:a.jsx(g4,{})}),a.jsx(us,{path:"/property/new",element:a.jsx(A4,{})}),a.jsx(us,{path:"/property/:propertyId",element:a.jsx(O4,{})})]})]})})})}$u.createRoot(document.getElementById("root")).render(a.jsx(P.StrictMode,{children:a.jsx(rS,{children:a.jsx($4,{})})}));
