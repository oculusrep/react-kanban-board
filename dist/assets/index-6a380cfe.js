var Jb=Object.defineProperty;var Xb=(e,t,r)=>t in e?Jb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var W=(e,t,r)=>(Xb(e,typeof t!="symbol"?t+"":t,r),r);function Zb(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ew(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Gg={exports:{}},Il={},qg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),tw=Symbol.for("react.portal"),rw=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),sw=Symbol.for("react.profiler"),iw=Symbol.for("react.provider"),ow=Symbol.for("react.context"),aw=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),cw=Symbol.for("react.memo"),uw=Symbol.for("react.lazy"),Hh=Symbol.iterator;function dw(e){return e===null||typeof e!="object"?null:(e=Hh&&e[Hh]||e["@@iterator"],typeof e=="function"?e:null)}var Kg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qg=Object.assign,Jg={};function Gs(e,t,r){this.props=e,this.context=t,this.refs=Jg,this.updater=r||Kg}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xg(){}Xg.prototype=Gs.prototype;function Zd(e,t,r){this.props=e,this.context=t,this.refs=Jg,this.updater=r||Kg}var ef=Zd.prototype=new Xg;ef.constructor=Zd;Qg(ef,Gs.prototype);ef.isPureReactComponent=!0;var Yh=Array.isArray,Zg=Object.prototype.hasOwnProperty,tf={current:null},e0={key:!0,ref:!0,__self:!0,__source:!0};function t0(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Zg.call(t,n)&&!e0.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:wo,type:e,key:i,ref:o,props:s,_owner:tf.current}}function fw(e,t){return{$$typeof:wo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rf(e){return typeof e=="object"&&e!==null&&e.$$typeof===wo}function hw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zh=/\/+/g;function Sc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hw(""+e.key):t.toString(36)}function ya(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wo:case tw:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Sc(o,0):n,Yh(s)?(r="",e!=null&&(r=e.replace(zh,"$&/")+"/"),ya(s,t,r,"",function(u){return u})):s!=null&&(rf(s)&&(s=fw(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Yh(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Sc(i,a);o+=ya(i,t,r,l,s)}else if(l=dw(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Sc(i,a++),o+=ya(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $o(e,t,r){if(e==null)return e;var n=[],s=0;return ya(e,n,"","",function(i){return t.call(r,i,s++)}),n}function pw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},xa={transition:null},mw={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:xa,ReactCurrentOwner:tf};function r0(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:$o,forEach:function(e,t,r){$o(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $o(e,function(){t++}),t},toArray:function(e){return $o(e,function(t){return t})||[]},only:function(e){if(!rf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Gs;Z.Fragment=rw;Z.Profiler=sw;Z.PureComponent=Zd;Z.StrictMode=nw;Z.Suspense=lw;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mw;Z.act=r0;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Qg({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=tf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Zg.call(t,l)&&!e0.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:wo,type:e.type,key:s,ref:i,props:n,_owner:o}};Z.createContext=function(e){return e={$$typeof:ow,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iw,_context:e},e.Consumer=e};Z.createElement=t0;Z.createFactory=function(e){var t=t0.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:aw,render:e}};Z.isValidElement=rf;Z.lazy=function(e){return{$$typeof:uw,_payload:{_status:-1,_result:e},_init:pw}};Z.memo=function(e,t){return{$$typeof:cw,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};Z.unstable_act=r0;Z.useCallback=function(e,t){return tt.current.useCallback(e,t)};Z.useContext=function(e){return tt.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};Z.useEffect=function(e,t){return tt.current.useEffect(e,t)};Z.useId=function(){return tt.current.useId()};Z.useImperativeHandle=function(e,t,r){return tt.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return tt.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return tt.current.useReducer(e,t,r)};Z.useRef=function(e){return tt.current.useRef(e)};Z.useState=function(e){return tt.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return tt.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return tt.current.useTransition()};Z.version="18.3.1";qg.exports=Z;var w=qg.exports;const j=Vg(w),n0=Zb({__proto__:null,default:j},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=w,vw=Symbol.for("react.element"),yw=Symbol.for("react.fragment"),xw=Object.prototype.hasOwnProperty,bw=gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ww={key:!0,ref:!0,__self:!0,__source:!0};function s0(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)xw.call(t,n)&&!ww.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:vw,type:e,key:i,ref:o,props:s,_owner:bw.current}}Il.Fragment=yw;Il.jsx=s0;Il.jsxs=s0;Gg.exports=Il;var c=Gg.exports,Tu={},i0={exports:{}},xt={},o0={exports:{}},a0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,T){var M=N.length;N.push(T);e:for(;0<M;){var H=M-1>>>1,K=N[H];if(0<s(K,T))N[H]=T,N[M]=K,M=H;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var T=N[0],M=N.pop();if(M!==T){N[0]=M;e:for(var H=0,K=N.length,Ne=K>>>1;H<Ne;){var Te=2*(H+1)-1,Jt=N[Te],nt=Te+1,Ce=N[nt];if(0>s(Jt,M))nt<K&&0>s(Ce,Jt)?(N[H]=Ce,N[nt]=M,H=nt):(N[H]=Jt,N[Te]=M,H=Te);else if(nt<K&&0>s(Ce,M))N[H]=Ce,N[nt]=M,H=nt;else break e}}return T}function s(N,T){var M=N.sortIndex-T.sortIndex;return M!==0?M:N.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,h=3,p=!1,m=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=N)n(u),T.sortIndex=T.expirationTime,t(l,T);else break;T=r(u)}}function _(N){if(x=!1,v(N),!m)if(r(l)!==null)m=!0,$(S);else{var T=r(u);T!==null&&z(_,T.startTime-N)}}function S(N,T){m=!1,x&&(x=!1,y(C),C=-1),p=!0;var M=h;try{for(v(T),f=r(l);f!==null&&(!(f.expirationTime>T)||N&&!I());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var K=H(f.expirationTime<=T);T=e.unstable_now(),typeof K=="function"?f.callback=K:f===r(l)&&n(l),v(T)}else n(l);f=r(l)}if(f!==null)var Ne=!0;else{var Te=r(u);Te!==null&&z(_,Te.startTime-T),Ne=!1}return Ne}finally{f=null,h=M,p=!1}}var k=!1,D=null,C=-1,E=5,P=-1;function I(){return!(e.unstable_now()-P<E)}function F(){if(D!==null){var N=e.unstable_now();P=N;var T=!0;try{T=D(!0,N)}finally{T?O():(k=!1,D=null)}}else k=!1}var O;if(typeof g=="function")O=function(){g(F)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,B=A.port2;A.port1.onmessage=F,O=function(){B.postMessage(null)}}else O=function(){b(F,0)};function $(N){D=N,k||(k=!0,O())}function z(N,T){C=b(function(){N(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,$(S))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(N){switch(h){case 1:case 2:case 3:var T=3;break;default:T=h}var M=h;h=T;try{return N()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,T){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var M=h;h=N;try{return T()}finally{h=M}},e.unstable_scheduleCallback=function(N,T,M){var H=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=M+K,N={id:d++,callback:T,priorityLevel:N,startTime:M,expirationTime:K,sortIndex:-1},M>H?(N.sortIndex=M,t(u,N),r(l)===null&&N===r(u)&&(x?(y(C),C=-1):x=!0,z(_,M-H))):(N.sortIndex=K,t(l,N),m||p||(m=!0,$(S))),N},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(N){var T=h;return function(){var M=h;h=T;try{return N.apply(this,arguments)}finally{h=M}}}})(a0);o0.exports=a0;var _w=o0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=w,yt=_w;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l0=new Set,zi={};function Vn(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(zi[e]=t,e=0;e<t.length;e++)l0.add(t[e])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ou=Object.prototype.hasOwnProperty,kw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vh={},Gh={};function Dw(e){return Ou.call(Gh,e)?!0:Ou.call(Vh,e)?!1:kw.test(e)?Gh[e]=!0:(Vh[e]=!0,!1)}function Nw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cw(e,t,r,n){if(t===null||typeof t>"u"||Nw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function sf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nf,sf);We[t]=new rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nf,sf);We[t]=new rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nf,sf);We[t]=new rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new rt(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function of(e,t,r,n){var s=We.hasOwnProperty(t)?We[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cw(t,r,s,n)&&(r=null),n||s===null?Dw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Rr=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bo=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),af=Symbol.for("react.strict_mode"),Ru=Symbol.for("react.profiler"),c0=Symbol.for("react.provider"),u0=Symbol.for("react.context"),lf=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),d0=Symbol.for("react.offscreen"),qh=Symbol.iterator;function ai(e){return e===null||typeof e!="object"?null:(e=qh&&e[qh]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,kc;function Di(e){if(kc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kc=t&&t[1]||""}return`
`+kc+e}var Dc=!1;function Nc(e,t){if(!e||Dc)return"";Dc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Di(e):""}function Ew(e){switch(e.tag){case 5:return Di(e.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 2:case 15:return e=Nc(e.type,!1),e;case 11:return e=Nc(e.type.render,!1),e;case 1:return e=Nc(e.type,!0),e;default:return""}}function Lu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case as:return"Portal";case Ru:return"Profiler";case af:return"StrictMode";case Iu:return"Suspense";case Mu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case u0:return(e.displayName||"Context")+".Consumer";case c0:return(e._context.displayName||"Context")+".Provider";case lf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cf:return t=e.displayName||null,t!==null?t:Lu(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return Lu(e(t))}catch{}}return null}function Pw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lu(t);case 8:return t===af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function f0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jw(e){var t=f0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Uo(e){e._valueTracker||(e._valueTracker=jw(e))}function h0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=f0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Au(e,t){var r=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=an(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function p0(e,t){t=t.checked,t!=null&&of(e,"checked",t,!1)}function Fu(e,t){p0(e,t);var r=an(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$u(e,t.type,r):t.hasOwnProperty("defaultValue")&&$u(e,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $u(e,t,r){(t!=="number"||$a(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ni=Array.isArray;function bs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+an(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(Ni(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:an(r)}}function m0(e,t){var r=an(t.value),n=an(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Xh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function g0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?g0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wo,v0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tw=["Webkit","ms","Moz","O"];Object.keys(Oi).forEach(function(e){Tw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oi[t]=Oi[e]})});function y0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oi.hasOwnProperty(e)&&Oi[e]?(""+t).trim():t+"px"}function x0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=y0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Ow=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wu(e,t){if(t){if(Ow[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Hu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function uf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zu=null,ws=null,_s=null;function Zh(e){if(e=ko(e)){if(typeof zu!="function")throw Error(R(280));var t=e.stateNode;t&&(t=$l(t),zu(e.stateNode,e.type,t))}}function b0(e){ws?_s?_s.push(e):_s=[e]:ws=e}function w0(){if(ws){var e=ws,t=_s;if(_s=ws=null,Zh(e),t)for(e=0;e<t.length;e++)Zh(t[e])}}function _0(e,t){return e(t)}function S0(){}var Cc=!1;function k0(e,t,r){if(Cc)return e(t,r);Cc=!0;try{return _0(e,t,r)}finally{Cc=!1,(ws!==null||_s!==null)&&(S0(),w0())}}function Gi(e,t){var r=e.stateNode;if(r===null)return null;var n=$l(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var Vu=!1;if(Cr)try{var li={};Object.defineProperty(li,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Vu=!1}function Rw(e,t,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ri=!1,Ba=null,Ua=!1,Gu=null,Iw={onError:function(e){Ri=!0,Ba=e}};function Mw(e,t,r,n,s,i,o,a,l){Ri=!1,Ba=null,Rw.apply(Iw,arguments)}function Lw(e,t,r,n,s,i,o,a,l){if(Mw.apply(this,arguments),Ri){if(Ri){var u=Ba;Ri=!1,Ba=null}else throw Error(R(198));Ua||(Ua=!0,Gu=u)}}function Gn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function D0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ep(e){if(Gn(e)!==e)throw Error(R(188))}function Aw(e){var t=e.alternate;if(!t){if(t=Gn(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return ep(s),e;if(i===n)return ep(s),t;i=i.sibling}throw Error(R(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function N0(e){return e=Aw(e),e!==null?C0(e):null}function C0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=C0(e);if(t!==null)return t;e=e.sibling}return null}var E0=yt.unstable_scheduleCallback,tp=yt.unstable_cancelCallback,Fw=yt.unstable_shouldYield,$w=yt.unstable_requestPaint,Se=yt.unstable_now,Bw=yt.unstable_getCurrentPriorityLevel,df=yt.unstable_ImmediatePriority,P0=yt.unstable_UserBlockingPriority,Wa=yt.unstable_NormalPriority,Uw=yt.unstable_LowPriority,j0=yt.unstable_IdlePriority,Ml=null,or=null;function Ww(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Ml,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:zw,Hw=Math.log,Yw=Math.LN2;function zw(e){return e>>>=0,e===0?32:31-(Hw(e)/Yw|0)|0}var Ho=64,Yo=4194304;function Ci(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ha(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Ci(a):(i&=o,i!==0&&(n=Ci(i)))}else o=r&~s,o!==0?n=Ci(o):i!==0&&(n=Ci(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ht(t),s=1<<r,n|=e[r],t&=~s;return n}function Vw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ht(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=Vw(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function qu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T0(){var e=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),e}function Ec(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _o(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=r}function qw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ht(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function ff(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ht(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var le=0;function O0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var R0,hf,I0,M0,L0,Ku=!1,zo=[],qr=null,Kr=null,Qr=null,qi=new Map,Ki=new Map,Wr=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rp(e,t){switch(e){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function ci(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ko(t),t!==null&&hf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Qw(e,t,r,n,s){switch(t){case"focusin":return qr=ci(qr,e,t,r,n,s),!0;case"dragenter":return Kr=ci(Kr,e,t,r,n,s),!0;case"mouseover":return Qr=ci(Qr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return qi.set(i,ci(qi.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ki.set(i,ci(Ki.get(i)||null,e,t,r,n,s)),!0}return!1}function A0(e){var t=Cn(e.target);if(t!==null){var r=Gn(t);if(r!==null){if(t=r.tag,t===13){if(t=D0(r),t!==null){e.blockedOn=t,L0(e.priority,function(){I0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ba(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Yu=n,r.target.dispatchEvent(n),Yu=null}else return t=ko(r),t!==null&&hf(t),e.blockedOn=r,!1;t.shift()}return!0}function np(e,t,r){ba(e)&&r.delete(t)}function Jw(){Ku=!1,qr!==null&&ba(qr)&&(qr=null),Kr!==null&&ba(Kr)&&(Kr=null),Qr!==null&&ba(Qr)&&(Qr=null),qi.forEach(np),Ki.forEach(np)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,Ku||(Ku=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Jw)))}function Qi(e){function t(s){return ui(s,e)}if(0<zo.length){ui(zo[0],e);for(var r=1;r<zo.length;r++){var n=zo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(qr!==null&&ui(qr,e),Kr!==null&&ui(Kr,e),Qr!==null&&ui(Qr,e),qi.forEach(t),Ki.forEach(t),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)A0(r),r.blockedOn===null&&Wr.shift()}var Ss=Rr.ReactCurrentBatchConfig,Ya=!0;function Xw(e,t,r,n){var s=le,i=Ss.transition;Ss.transition=null;try{le=1,pf(e,t,r,n)}finally{le=s,Ss.transition=i}}function Zw(e,t,r,n){var s=le,i=Ss.transition;Ss.transition=null;try{le=4,pf(e,t,r,n)}finally{le=s,Ss.transition=i}}function pf(e,t,r,n){if(Ya){var s=Qu(e,t,r,n);if(s===null)Fc(e,t,n,za,r),rp(e,n);else if(Qw(s,e,t,r,n))n.stopPropagation();else if(rp(e,n),t&4&&-1<Kw.indexOf(e)){for(;s!==null;){var i=ko(s);if(i!==null&&R0(i),i=Qu(e,t,r,n),i===null&&Fc(e,t,n,za,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Fc(e,t,n,null,r)}}var za=null;function Qu(e,t,r,n){if(za=null,e=uf(n),e=Cn(e),e!==null)if(t=Gn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=D0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return za=e,null}function F0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bw()){case df:return 1;case P0:return 4;case Wa:case Uw:return 16;case j0:return 536870912;default:return 16}default:return 16}}var zr=null,mf=null,wa=null;function $0(){if(wa)return wa;var e,t=mf,r=t.length,n,s="value"in zr?zr.value:zr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return wa=s.slice(e,1<n?1-n:void 0)}function _a(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vo(){return!0}function sp(){return!1}function bt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vo:sp,this.isPropagationStopped=sp,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),t}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=bt(qs),So=be({},qs,{view:0,detail:0}),e_=bt(So),Pc,jc,di,Ll=be({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&e.type==="mousemove"?(Pc=e.screenX-di.screenX,jc=e.screenY-di.screenY):jc=Pc=0,di=e),Pc)},movementY:function(e){return"movementY"in e?e.movementY:jc}}),ip=bt(Ll),t_=be({},Ll,{dataTransfer:0}),r_=bt(t_),n_=be({},So,{relatedTarget:0}),Tc=bt(n_),s_=be({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),i_=bt(s_),o_=be({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a_=bt(o_),l_=be({},qs,{data:0}),op=bt(l_),c_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d_[e])?!!t[e]:!1}function vf(){return f_}var h_=be({},So,{key:function(e){if(e.key){var t=c_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vf,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p_=bt(h_),m_=be({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ap=bt(m_),g_=be({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vf}),v_=bt(g_),y_=be({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),x_=bt(y_),b_=be({},Ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w_=bt(b_),__=[9,13,27,32],yf=Cr&&"CompositionEvent"in window,Ii=null;Cr&&"documentMode"in document&&(Ii=document.documentMode);var S_=Cr&&"TextEvent"in window&&!Ii,B0=Cr&&(!yf||Ii&&8<Ii&&11>=Ii),lp=String.fromCharCode(32),cp=!1;function U0(e,t){switch(e){case"keyup":return __.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function k_(e,t){switch(e){case"compositionend":return W0(t);case"keypress":return t.which!==32?null:(cp=!0,lp);case"textInput":return e=t.data,e===lp&&cp?null:e;default:return null}}function D_(e,t){if(cs)return e==="compositionend"||!yf&&U0(e,t)?(e=$0(),wa=mf=zr=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return B0&&t.locale!=="ko"?null:t.data;default:return null}}var N_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!N_[e.type]:t==="textarea"}function H0(e,t,r,n){b0(n),t=Va(t,"onChange"),0<t.length&&(r=new gf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Mi=null,Ji=null;function C_(e){ev(e,0)}function Al(e){var t=fs(e);if(h0(t))return e}function E_(e,t){if(e==="change")return t}var Y0=!1;if(Cr){var Oc;if(Cr){var Rc="oninput"in document;if(!Rc){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),Rc=typeof dp.oninput=="function"}Oc=Rc}else Oc=!1;Y0=Oc&&(!document.documentMode||9<document.documentMode)}function fp(){Mi&&(Mi.detachEvent("onpropertychange",z0),Ji=Mi=null)}function z0(e){if(e.propertyName==="value"&&Al(Ji)){var t=[];H0(t,Ji,e,uf(e)),k0(C_,t)}}function P_(e,t,r){e==="focusin"?(fp(),Mi=t,Ji=r,Mi.attachEvent("onpropertychange",z0)):e==="focusout"&&fp()}function j_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Al(Ji)}function T_(e,t){if(e==="click")return Al(t)}function O_(e,t){if(e==="input"||e==="change")return Al(t)}function R_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:R_;function Xi(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ou.call(t,s)||!Vt(e[s],t[s]))return!1}return!0}function hp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pp(e,t){var r=hp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hp(r)}}function V0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?V0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G0(){for(var e=window,t=$a();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$a(e.document)}return t}function xf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function I_(e){var t=G0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&V0(r.ownerDocument.documentElement,r)){if(n!==null&&xf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=pp(r,i);var o=pp(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M_=Cr&&"documentMode"in document&&11>=document.documentMode,us=null,Ju=null,Li=null,Xu=!1;function mp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xu||us==null||us!==$a(n)||(n=us,"selectionStart"in n&&xf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Li&&Xi(Li,n)||(Li=n,n=Va(Ju,"onSelect"),0<n.length&&(t=new gf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=us)))}function Go(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ds={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},Ic={},q0={};Cr&&(q0=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Fl(e){if(Ic[e])return Ic[e];if(!ds[e])return e;var t=ds[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in q0)return Ic[e]=t[r];return e}var K0=Fl("animationend"),Q0=Fl("animationiteration"),J0=Fl("animationstart"),X0=Fl("transitionend"),Z0=new Map,gp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,t){Z0.set(e,t),Vn(t,[e])}for(var Mc=0;Mc<gp.length;Mc++){var Lc=gp[Mc],L_=Lc.toLowerCase(),A_=Lc[0].toUpperCase()+Lc.slice(1);fn(L_,"on"+A_)}fn(K0,"onAnimationEnd");fn(Q0,"onAnimationIteration");fn(J0,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(X0,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function vp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Lw(n,t,void 0,e),e.currentTarget=null}function ev(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;vp(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;vp(s,a,u),i=l}}}if(Ua)throw e=Gu,Ua=!1,Gu=null,e}function fe(e,t){var r=t[nd];r===void 0&&(r=t[nd]=new Set);var n=e+"__bubble";r.has(n)||(tv(t,e,2,!1),r.add(n))}function Ac(e,t,r){var n=0;t&&(n|=4),tv(r,e,n,t)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[qo]){e[qo]=!0,l0.forEach(function(r){r!=="selectionchange"&&(F_.has(r)||Ac(r,!1,e),Ac(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qo]||(t[qo]=!0,Ac("selectionchange",!1,t))}}function tv(e,t,r,n){switch(F0(t)){case 1:var s=Xw;break;case 4:s=Zw;break;default:s=pf}r=s.bind(null,t,r,e),s=void 0,!Vu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Fc(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Cn(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}k0(function(){var u=i,d=uf(r),f=[];e:{var h=Z0.get(e);if(h!==void 0){var p=gf,m=e;switch(e){case"keypress":if(_a(r)===0)break e;case"keydown":case"keyup":p=p_;break;case"focusin":m="focus",p=Tc;break;case"focusout":m="blur",p=Tc;break;case"beforeblur":case"afterblur":p=Tc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=r_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=v_;break;case K0:case Q0:case J0:p=i_;break;case X0:p=x_;break;case"scroll":p=e_;break;case"wheel":p=w_;break;case"copy":case"cut":case"paste":p=a_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ap}var x=(t&4)!==0,b=!x&&e==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var g=u,v;g!==null;){v=g;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=Gi(g,y),_!=null&&x.push(eo(g,_,v)))),b)break;g=g.return}0<x.length&&(h=new p(h,m,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Yu&&(m=r.relatedTarget||r.fromElement)&&(Cn(m)||m[Er]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?Cn(m):null,m!==null&&(b=Gn(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(x=ip,_="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=ap,_="onPointerLeave",y="onPointerEnter",g="pointer"),b=p==null?h:fs(p),v=m==null?h:fs(m),h=new x(_,g+"leave",p,r,d),h.target=b,h.relatedTarget=v,_=null,Cn(d)===u&&(x=new x(y,g+"enter",m,r,d),x.target=v,x.relatedTarget=b,_=x),b=_,p&&m)t:{for(x=p,y=m,g=0,v=x;v;v=Qn(v))g++;for(v=0,_=y;_;_=Qn(_))v++;for(;0<g-v;)x=Qn(x),g--;for(;0<v-g;)y=Qn(y),v--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=Qn(x),y=Qn(y)}x=null}else x=null;p!==null&&yp(f,h,p,x,!1),m!==null&&b!==null&&yp(f,b,m,x,!0)}}e:{if(h=u?fs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=E_;else if(up(h))if(Y0)S=O_;else{S=j_;var k=P_}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=T_);if(S&&(S=S(e,u))){H0(f,S,r,d);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&$u(h,"number",h.value)}switch(k=u?fs(u):window,e){case"focusin":(up(k)||k.contentEditable==="true")&&(us=k,Ju=u,Li=null);break;case"focusout":Li=Ju=us=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,mp(f,r,d);break;case"selectionchange":if(M_)break;case"keydown":case"keyup":mp(f,r,d)}var D;if(yf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else cs?U0(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(B0&&r.locale!=="ko"&&(cs||C!=="onCompositionStart"?C==="onCompositionEnd"&&cs&&(D=$0()):(zr=d,mf="value"in zr?zr.value:zr.textContent,cs=!0)),k=Va(u,C),0<k.length&&(C=new op(C,e,null,r,d),f.push({event:C,listeners:k}),D?C.data=D:(D=W0(r),D!==null&&(C.data=D)))),(D=S_?k_(e,r):D_(e,r))&&(u=Va(u,"onBeforeInput"),0<u.length&&(d=new op("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=D))}ev(f,t)})}function eo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Va(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gi(e,r),i!=null&&n.unshift(eo(e,i,s)),i=Gi(e,t),i!=null&&n.push(eo(e,i,s))),e=e.return}return n}function Qn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yp(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=Gi(r,i),l!=null&&o.unshift(eo(r,l,a))):s||(l=Gi(r,i),l!=null&&o.push(eo(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var $_=/\r\n?/g,B_=/\u0000|\uFFFD/g;function xp(e){return(typeof e=="string"?e:""+e).replace($_,`
`).replace(B_,"")}function Ko(e,t,r){if(t=xp(t),xp(e)!==t&&r)throw Error(R(425))}function Ga(){}var Zu=null,ed=null;function td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,U_=typeof clearTimeout=="function"?clearTimeout:void 0,bp=typeof Promise=="function"?Promise:void 0,W_=typeof queueMicrotask=="function"?queueMicrotask:typeof bp<"u"?function(e){return bp.resolve(null).then(e).catch(H_)}:rd;function H_(e){setTimeout(function(){throw e})}function $c(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Qi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qi(t)}function Jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),rr="__reactFiber$"+Ks,to="__reactProps$"+Ks,Er="__reactContainer$"+Ks,nd="__reactEvents$"+Ks,Y_="__reactListeners$"+Ks,z_="__reactHandles$"+Ks;function Cn(e){var t=e[rr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Er]||r[rr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=wp(e);e!==null;){if(r=e[rr])return r;e=wp(e)}return t}e=r,r=e.parentNode}return null}function ko(e){return e=e[rr]||e[Er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function $l(e){return e[to]||null}var sd=[],hs=-1;function hn(e){return{current:e}}function he(e){0>hs||(e.current=sd[hs],sd[hs]=null,hs--)}function de(e,t){hs++,sd[hs]=e.current,e.current=t}var ln={},qe=hn(ln),lt=hn(!1),An=ln;function js(e,t){var r=e.type.contextTypes;if(!r)return ln;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ct(e){return e=e.childContextTypes,e!=null}function qa(){he(lt),he(qe)}function _p(e,t,r){if(qe.current!==ln)throw Error(R(168));de(qe,t),de(lt,r)}function rv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(R(108,Pw(e)||"Unknown",s));return be({},r,n)}function Ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ln,An=qe.current,de(qe,e),de(lt,lt.current),!0}function Sp(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=rv(e,t,An),n.__reactInternalMemoizedMergedChildContext=e,he(lt),he(qe),de(qe,e)):he(lt),de(lt,r)}var gr=null,Bl=!1,Bc=!1;function nv(e){gr===null?gr=[e]:gr.push(e)}function V_(e){Bl=!0,nv(e)}function pn(){if(!Bc&&gr!==null){Bc=!0;var e=0,t=le;try{var r=gr;for(le=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gr=null,Bl=!1}catch(s){throw gr!==null&&(gr=gr.slice(e+1)),E0(df,pn),s}finally{le=t,Bc=!1}}return null}var ps=[],ms=0,Qa=null,Ja=0,Dt=[],Nt=0,Fn=null,yr=1,xr="";function wn(e,t){ps[ms++]=Ja,ps[ms++]=Qa,Qa=e,Ja=t}function sv(e,t,r){Dt[Nt++]=yr,Dt[Nt++]=xr,Dt[Nt++]=Fn,Fn=e;var n=yr;e=xr;var s=32-Ht(n)-1;n&=~(1<<s),r+=1;var i=32-Ht(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,yr=1<<32-Ht(t)+s|r<<s|n,xr=i+e}else yr=1<<i|r<<s|n,xr=e}function bf(e){e.return!==null&&(wn(e,1),sv(e,1,0))}function wf(e){for(;e===Qa;)Qa=ps[--ms],ps[ms]=null,Ja=ps[--ms],ps[ms]=null;for(;e===Fn;)Fn=Dt[--Nt],Dt[Nt]=null,xr=Dt[--Nt],Dt[Nt]=null,yr=Dt[--Nt],Dt[Nt]=null}var pt=null,ft=null,pe=!1,Ut=null;function iv(e,t){var r=Et(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function kp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,ft=Jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fn!==null?{id:yr,overflow:xr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Et(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,pt=e,ft=null,!0):!1;default:return!1}}function id(e){return(e.mode&1)!==0&&(e.flags&128)===0}function od(e){if(pe){var t=ft;if(t){var r=t;if(!kp(e,t)){if(id(e))throw Error(R(418));t=Jr(r.nextSibling);var n=pt;t&&kp(e,t)?iv(n,r):(e.flags=e.flags&-4097|2,pe=!1,pt=e)}}else{if(id(e))throw Error(R(418));e.flags=e.flags&-4097|2,pe=!1,pt=e}}}function Dp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function Qo(e){if(e!==pt)return!1;if(!pe)return Dp(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!td(e.type,e.memoizedProps)),t&&(t=ft)){if(id(e))throw ov(),Error(R(418));for(;t;)iv(e,t),t=Jr(t.nextSibling)}if(Dp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ft=Jr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=pt?Jr(e.stateNode.nextSibling):null;return!0}function ov(){for(var e=ft;e;)e=Jr(e.nextSibling)}function Ts(){ft=pt=null,pe=!1}function _f(e){Ut===null?Ut=[e]:Ut.push(e)}var G_=Rr.ReactCurrentBatchConfig;function fi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function Jo(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Np(e){var t=e._init;return t(e._payload)}function av(e){function t(y,g){if(e){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=tn(y,g),y.index=0,y.sibling=null,y}function i(y,g,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,_){return g===null||g.tag!==6?(g=Gc(v,y.mode,_),g.return=y,g):(g=s(g,v),g.return=y,g)}function l(y,g,v,_){var S=v.type;return S===ls?d(y,g,v.props.children,_,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Br&&Np(S)===g.type)?(_=s(g,v.props),_.ref=fi(y,g,v),_.return=y,_):(_=Pa(v.type,v.key,v.props,null,y.mode,_),_.ref=fi(y,g,v),_.return=y,_)}function u(y,g,v,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=qc(v,y.mode,_),g.return=y,g):(g=s(g,v.children||[]),g.return=y,g)}function d(y,g,v,_,S){return g===null||g.tag!==7?(g=Rn(v,y.mode,_,S),g.return=y,g):(g=s(g,v),g.return=y,g)}function f(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Gc(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bo:return v=Pa(g.type,g.key,g.props,null,y.mode,v),v.ref=fi(y,null,g),v.return=y,v;case as:return g=qc(g,y.mode,v),g.return=y,g;case Br:var _=g._init;return f(y,_(g._payload),v)}if(Ni(g)||ai(g))return g=Rn(g,y.mode,v,null),g.return=y,g;Jo(y,g)}return null}function h(y,g,v,_){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(y,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bo:return v.key===S?l(y,g,v,_):null;case as:return v.key===S?u(y,g,v,_):null;case Br:return S=v._init,h(y,g,S(v._payload),_)}if(Ni(v)||ai(v))return S!==null?null:d(y,g,v,_,null);Jo(y,v)}return null}function p(y,g,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(g,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bo:return y=y.get(_.key===null?v:_.key)||null,l(g,y,_,S);case as:return y=y.get(_.key===null?v:_.key)||null,u(g,y,_,S);case Br:var k=_._init;return p(y,g,v,k(_._payload),S)}if(Ni(_)||ai(_))return y=y.get(v)||null,d(g,y,_,S,null);Jo(g,_)}return null}function m(y,g,v,_){for(var S=null,k=null,D=g,C=g=0,E=null;D!==null&&C<v.length;C++){D.index>C?(E=D,D=null):E=D.sibling;var P=h(y,D,v[C],_);if(P===null){D===null&&(D=E);break}e&&D&&P.alternate===null&&t(y,D),g=i(P,g,C),k===null?S=P:k.sibling=P,k=P,D=E}if(C===v.length)return r(y,D),pe&&wn(y,C),S;if(D===null){for(;C<v.length;C++)D=f(y,v[C],_),D!==null&&(g=i(D,g,C),k===null?S=D:k.sibling=D,k=D);return pe&&wn(y,C),S}for(D=n(y,D);C<v.length;C++)E=p(D,y,C,v[C],_),E!==null&&(e&&E.alternate!==null&&D.delete(E.key===null?C:E.key),g=i(E,g,C),k===null?S=E:k.sibling=E,k=E);return e&&D.forEach(function(I){return t(y,I)}),pe&&wn(y,C),S}function x(y,g,v,_){var S=ai(v);if(typeof S!="function")throw Error(R(150));if(v=S.call(v),v==null)throw Error(R(151));for(var k=S=null,D=g,C=g=0,E=null,P=v.next();D!==null&&!P.done;C++,P=v.next()){D.index>C?(E=D,D=null):E=D.sibling;var I=h(y,D,P.value,_);if(I===null){D===null&&(D=E);break}e&&D&&I.alternate===null&&t(y,D),g=i(I,g,C),k===null?S=I:k.sibling=I,k=I,D=E}if(P.done)return r(y,D),pe&&wn(y,C),S;if(D===null){for(;!P.done;C++,P=v.next())P=f(y,P.value,_),P!==null&&(g=i(P,g,C),k===null?S=P:k.sibling=P,k=P);return pe&&wn(y,C),S}for(D=n(y,D);!P.done;C++,P=v.next())P=p(D,y,C,P.value,_),P!==null&&(e&&P.alternate!==null&&D.delete(P.key===null?C:P.key),g=i(P,g,C),k===null?S=P:k.sibling=P,k=P);return e&&D.forEach(function(F){return t(y,F)}),pe&&wn(y,C),S}function b(y,g,v,_){if(typeof v=="object"&&v!==null&&v.type===ls&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Bo:e:{for(var S=v.key,k=g;k!==null;){if(k.key===S){if(S=v.type,S===ls){if(k.tag===7){r(y,k.sibling),g=s(k,v.props.children),g.return=y,y=g;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Br&&Np(S)===k.type){r(y,k.sibling),g=s(k,v.props),g.ref=fi(y,k,v),g.return=y,y=g;break e}r(y,k);break}else t(y,k);k=k.sibling}v.type===ls?(g=Rn(v.props.children,y.mode,_,v.key),g.return=y,y=g):(_=Pa(v.type,v.key,v.props,null,y.mode,_),_.ref=fi(y,g,v),_.return=y,y=_)}return o(y);case as:e:{for(k=v.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(y,g.sibling),g=s(g,v.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=qc(v,y.mode,_),g.return=y,y=g}return o(y);case Br:return k=v._init,b(y,g,k(v._payload),_)}if(Ni(v))return m(y,g,v,_);if(ai(v))return x(y,g,v,_);Jo(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(y,g.sibling),g=s(g,v),g.return=y,y=g):(r(y,g),g=Gc(v,y.mode,_),g.return=y,y=g),o(y)):r(y,g)}return b}var Os=av(!0),lv=av(!1),Xa=hn(null),Za=null,gs=null,Sf=null;function kf(){Sf=gs=Za=null}function Df(e){var t=Xa.current;he(Xa),e._currentValue=t}function ad(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ks(e,t){Za=e,Sf=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(at=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(Sf!==e)if(e={context:e,memoizedValue:t,next:null},gs===null){if(Za===null)throw Error(R(308));gs=e,Za.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return t}var En=null;function Nf(e){En===null?En=[e]:En.push(e)}function cv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Nf(t)):(r.next=s.next,s.next=r),t.interleaved=r,Pr(e,n)}function Pr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ur=!1;function Cf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ne&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Pr(e,r)}return s=n.interleaved,s===null?(t.next=t,Nf(n)):(t.next=s.next,s.next=t),n.interleaved=t,Pr(e,r)}function Sa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ff(e,r)}}function Cp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function el(e,t,r,n){var s=e.updateQueue;Ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=u=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,x=a;switch(h=t,p=r,x.tag){case 1:if(m=x.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=be({},f,h);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Bn|=o,e.lanes=o,e.memoizedState=f}}function Ep(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(R(191,s));s.call(n)}}}var Do={},ar=hn(Do),ro=hn(Do),no=hn(Do);function Pn(e){if(e===Do)throw Error(R(174));return e}function Ef(e,t){switch(de(no,t),de(ro,e),de(ar,Do),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uu(t,e)}he(ar),de(ar,t)}function Rs(){he(ar),he(ro),he(no)}function dv(e){Pn(no.current);var t=Pn(ar.current),r=Uu(t,e.type);t!==r&&(de(ro,e),de(ar,r))}function Pf(e){ro.current===e&&(he(ar),he(ro))}var ve=hn(0);function tl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uc=[];function jf(){for(var e=0;e<Uc.length;e++)Uc[e]._workInProgressVersionPrimary=null;Uc.length=0}var ka=Rr.ReactCurrentDispatcher,Wc=Rr.ReactCurrentBatchConfig,$n=0,xe=null,Pe=null,Re=null,rl=!1,Ai=!1,so=0,q_=0;function He(){throw Error(R(321))}function Tf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vt(e[r],t[r]))return!1;return!0}function Of(e,t,r,n,s,i){if($n=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ka.current=e===null||e.memoizedState===null?X_:Z_,e=r(n,s),Ai){i=0;do{if(Ai=!1,so=0,25<=i)throw Error(R(301));i+=1,Re=Pe=null,t.updateQueue=null,ka.current=e1,e=r(n,s)}while(Ai)}if(ka.current=nl,t=Pe!==null&&Pe.next!==null,$n=0,Re=Pe=xe=null,rl=!1,t)throw Error(R(300));return e}function Rf(){var e=so!==0;return so=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?xe.memoizedState=Re=e:Re=Re.next=e,Re}function It(){if(Pe===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Re===null?xe.memoizedState:Re.next;if(t!==null)Re=t,Pe=e;else{if(e===null)throw Error(R(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Re===null?xe.memoizedState=Re=e:Re=Re.next=e}return Re}function io(e,t){return typeof t=="function"?t(e):t}function Hc(e){var t=It(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=Pe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if(($n&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=n):l=l.next=f,xe.lanes|=d,Bn|=d}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,Vt(n,t.memoizedState)||(at=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,xe.lanes|=i,Bn|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yc(e){var t=It(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Vt(i,t.memoizedState)||(at=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function fv(){}function hv(e,t){var r=xe,n=It(),s=t(),i=!Vt(n.memoizedState,s);if(i&&(n.memoizedState=s,at=!0),n=n.queue,If(gv.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Re!==null&&Re.memoizedState.tag&1){if(r.flags|=2048,oo(9,mv.bind(null,r,n,s,t),void 0,null),Ie===null)throw Error(R(349));$n&30||pv(r,t,s)}return s}function pv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mv(e,t,r,n){t.value=r,t.getSnapshot=n,vv(t)&&yv(e)}function gv(e,t,r){return r(function(){vv(t)&&yv(e)})}function vv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vt(e,r)}catch{return!0}}function yv(e){var t=Pr(e,1);t!==null&&Yt(t,e,1,-1)}function Pp(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:e},t.queue=e,e=e.dispatch=J_.bind(null,xe,e),[t.memoizedState,e]}function oo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function xv(){return It().memoizedState}function Da(e,t,r,n){var s=Zt();xe.flags|=e,s.memoizedState=oo(1|t,r,void 0,n===void 0?null:n)}function Ul(e,t,r,n){var s=It();n=n===void 0?null:n;var i=void 0;if(Pe!==null){var o=Pe.memoizedState;if(i=o.destroy,n!==null&&Tf(n,o.deps)){s.memoizedState=oo(t,r,i,n);return}}xe.flags|=e,s.memoizedState=oo(1|t,r,i,n)}function jp(e,t){return Da(8390656,8,e,t)}function If(e,t){return Ul(2048,8,e,t)}function bv(e,t){return Ul(4,2,e,t)}function wv(e,t){return Ul(4,4,e,t)}function _v(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sv(e,t,r){return r=r!=null?r.concat([e]):null,Ul(4,4,_v.bind(null,t,e),r)}function Mf(){}function kv(e,t){var r=It();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Dv(e,t){var r=It();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Nv(e,t,r){return $n&21?(Vt(r,t)||(r=T0(),xe.lanes|=r,Bn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=r)}function K_(e,t){var r=le;le=r!==0&&4>r?r:4,e(!0);var n=Wc.transition;Wc.transition={};try{e(!1),t()}finally{le=r,Wc.transition=n}}function Cv(){return It().memoizedState}function Q_(e,t,r){var n=en(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ev(e))Pv(t,r);else if(r=cv(e,t,r,n),r!==null){var s=et();Yt(r,e,n,s),jv(r,t,n)}}function J_(e,t,r){var n=en(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ev(e))Pv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Vt(a,o)){var l=t.interleaved;l===null?(s.next=s,Nf(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=cv(e,t,s,n),r!==null&&(s=et(),Yt(r,e,n,s),jv(r,t,n))}}function Ev(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Pv(e,t){Ai=rl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ff(e,r)}}var nl={readContext:Rt,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},X_={readContext:Rt,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:jp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Da(4194308,4,_v.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var r=Zt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Q_.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Pp,useDebugValue:Mf,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Pp(!1),t=e[0];return e=K_.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xe,s=Zt();if(pe){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),Ie===null)throw Error(R(349));$n&30||pv(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,jp(gv.bind(null,n,i,e),[e]),n.flags|=2048,oo(9,mv.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Zt(),t=Ie.identifierPrefix;if(pe){var r=xr,n=yr;r=(n&~(1<<32-Ht(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=so++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=q_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Z_={readContext:Rt,useCallback:kv,useContext:Rt,useEffect:If,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:wv,useMemo:Dv,useReducer:Hc,useRef:xv,useState:function(){return Hc(io)},useDebugValue:Mf,useDeferredValue:function(e){var t=It();return Nv(t,Pe.memoizedState,e)},useTransition:function(){var e=Hc(io)[0],t=It().memoizedState;return[e,t]},useMutableSource:fv,useSyncExternalStore:hv,useId:Cv,unstable_isNewReconciler:!1},e1={readContext:Rt,useCallback:kv,useContext:Rt,useEffect:If,useImperativeHandle:Sv,useInsertionEffect:bv,useLayoutEffect:wv,useMemo:Dv,useReducer:Yc,useRef:xv,useState:function(){return Yc(io)},useDebugValue:Mf,useDeferredValue:function(e){var t=It();return Pe===null?t.memoizedState=e:Nv(t,Pe.memoizedState,e)},useTransition:function(){var e=Yc(io)[0],t=It().memoizedState;return[e,t]},useMutableSource:fv,useSyncExternalStore:hv,useId:Cv,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ld(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:be({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wl={isMounted:function(e){return(e=e._reactInternals)?Gn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=et(),s=en(e),i=br(n,s);i.payload=t,r!=null&&(i.callback=r),t=Xr(e,i,s),t!==null&&(Yt(t,e,s,n),Sa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=et(),s=en(e),i=br(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Xr(e,i,s),t!==null&&(Yt(t,e,s,n),Sa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=et(),n=en(e),s=br(r,n);s.tag=2,t!=null&&(s.callback=t),t=Xr(e,s,n),t!==null&&(Yt(t,e,n,r),Sa(t,e,n))}};function Tp(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xi(r,n)||!Xi(s,i):!0}function Tv(e,t,r){var n=!1,s=ln,i=t.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=ct(t)?An:qe.current,n=t.contextTypes,i=(n=n!=null)?js(e,s):ln),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Op(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Wl.enqueueReplaceState(t,t.state,null)}function cd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Cf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=ct(t)?An:qe.current,s.context=js(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ld(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wl.enqueueReplaceState(s,s.state,null),el(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Is(e,t){try{var r="",n=t;do r+=Ew(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function zc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ud(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var t1=typeof WeakMap=="function"?WeakMap:Map;function Ov(e,t,r){r=br(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){il||(il=!0,bd=n),ud(e,t)},r}function Rv(e,t,r){r=br(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ud(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ud(e,t),typeof n!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Rp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new t1;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=m1.bind(null,e,t,r),t.then(e,e))}function Ip(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mp(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=br(-1,1),t.tag=2,Xr(r,t,1))),r.lanes|=1),e)}var r1=Rr.ReactCurrentOwner,at=!1;function Je(e,t,r,n){t.child=e===null?lv(t,null,r,n):Os(t,e.child,r,n)}function Lp(e,t,r,n,s){r=r.render;var i=t.ref;return ks(t,s),n=Of(e,t,r,n,i,s),r=Rf(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jr(e,t,s)):(pe&&r&&bf(t),t.flags|=1,Je(e,t,n,s),t.child)}function Ap(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Hf(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Iv(e,t,i,n,s)):(e=Pa(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xi,r(o,n)&&e.ref===t.ref)return jr(e,t,s)}return t.flags|=1,e=tn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Iv(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Xi(i,n)&&e.ref===t.ref)if(at=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(at=!0);else return t.lanes=e.lanes,jr(e,t,s)}return dd(e,t,r,n,s)}function Mv(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(ys,dt),dt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(ys,dt),dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,de(ys,dt),dt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,de(ys,dt),dt|=n;return Je(e,t,s,r),t.child}function Lv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dd(e,t,r,n,s){var i=ct(r)?An:qe.current;return i=js(t,i),ks(t,s),r=Of(e,t,r,n,i,s),n=Rf(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jr(e,t,s)):(pe&&n&&bf(t),t.flags|=1,Je(e,t,r,s),t.child)}function Fp(e,t,r,n,s){if(ct(r)){var i=!0;Ka(t)}else i=!1;if(ks(t,s),t.stateNode===null)Na(e,t),Tv(t,r,n),cd(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ct(r)?An:qe.current,u=js(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Op(t,o,n,u),Ur=!1;var h=t.memoizedState;o.state=h,el(t,n,o,s),l=t.memoizedState,a!==n||h!==l||lt.current||Ur?(typeof d=="function"&&(ld(t,r,d,n),l=t.memoizedState),(a=Ur||Tp(t,r,a,n,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,uv(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ft(t.type,a),o.props=u,f=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Rt(l):(l=ct(r)?An:qe.current,l=js(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Op(t,o,n,l),Ur=!1,h=t.memoizedState,o.state=h,el(t,n,o,s);var m=t.memoizedState;a!==f||h!==m||lt.current||Ur?(typeof p=="function"&&(ld(t,r,p,n),m=t.memoizedState),(u=Ur||Tp(t,r,u,n,h,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return fd(e,t,r,n,i,s)}function fd(e,t,r,n,s,i){Lv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Sp(t,r,!1),jr(e,t,i);n=t.stateNode,r1.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Os(t,e.child,null,i),t.child=Os(t,null,a,i)):Je(e,t,a,i),t.memoizedState=n.state,s&&Sp(t,r,!0),t.child}function Av(e){var t=e.stateNode;t.pendingContext?_p(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_p(e,t.context,!1),Ef(e,t.containerInfo)}function $p(e,t,r,n,s){return Ts(),_f(s),t.flags|=256,Je(e,t,r,n),t.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function pd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fv(e,t,r){var n=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ve,s&1),e===null)return od(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zl(o,n,0,null),e=Rn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pd(r),t.memoizedState=hd,e):Lf(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return n1(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=tn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=tn(a,i):(i=Rn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?pd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=hd,n}return i=e.child,e=i.sibling,n=tn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Lf(e,t){return t=zl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xo(e,t,r,n){return n!==null&&_f(n),Os(t,e.child,null,r),e=Lf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function n1(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=zc(Error(R(422))),Xo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=zl({mode:"visible",children:n.children},s,0,null),i=Rn(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Os(t,e.child,null,o),t.child.memoizedState=pd(o),t.memoizedState=hd,i);if(!(t.mode&1))return Xo(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(R(419)),n=zc(i,n,void 0),Xo(e,t,o,n)}if(a=(o&e.childLanes)!==0,at||a){if(n=Ie,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pr(e,s),Yt(n,e,s,-1))}return Wf(),n=zc(Error(R(421))),Xo(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=g1.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ft=Jr(s.nextSibling),pt=t,pe=!0,Ut=null,e!==null&&(Dt[Nt++]=yr,Dt[Nt++]=xr,Dt[Nt++]=Fn,yr=e.id,xr=e.overflow,Fn=t),t=Lf(t,n.children),t.flags|=4096,t)}function Bp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ad(e.return,t,r)}function Vc(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function $v(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Je(e,t,n.children,r),n=ve.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bp(e,r,t);else if(e.tag===19)Bp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ve,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&tl(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vc(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&tl(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vc(t,!0,r,null,i);break;case"together":Vc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=tn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function s1(e,t,r){switch(t.tag){case 3:Av(t),Ts();break;case 5:dv(t);break;case 1:ct(t.type)&&Ka(t);break;case 4:Ef(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;de(Xa,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):r&t.child.childLanes?Fv(e,t,r):(de(ve,ve.current&1),e=jr(e,t,r),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return $v(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ve,ve.current),n)break;return null;case 22:case 23:return t.lanes=0,Mv(e,t,r)}return jr(e,t,r)}var Bv,md,Uv,Wv;Bv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};md=function(){};Uv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pn(ar.current);var i=null;switch(r){case"input":s=Au(e,s),n=Au(e,n),i=[];break;case"select":s=be({},s,{value:void 0}),n=be({},n,{value:void 0}),i=[];break;case"textarea":s=Bu(e,s),n=Bu(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ga)}Wu(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fe("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Wv=function(e,t,r,n){r!==n&&(t.flags|=4)};function hi(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function i1(e,t,r){var n=t.pendingProps;switch(wf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ct(t.type)&&qa(),Ye(t),null;case 3:return n=t.stateNode,Rs(),he(lt),he(qe),jf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(Sd(Ut),Ut=null))),md(e,t),Ye(t),null;case 5:Pf(t);var s=Pn(no.current);if(r=t.type,e!==null&&t.stateNode!=null)Uv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return Ye(t),null}if(e=Pn(ar.current),Qo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[rr]=t,n[to]=i,e=(t.mode&1)!==0,r){case"dialog":fe("cancel",n),fe("close",n);break;case"iframe":case"object":case"embed":fe("load",n);break;case"video":case"audio":for(s=0;s<Ei.length;s++)fe(Ei[s],n);break;case"source":fe("error",n);break;case"img":case"image":case"link":fe("error",n),fe("load",n);break;case"details":fe("toggle",n);break;case"input":Kh(n,i),fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},fe("invalid",n);break;case"textarea":Jh(n,i),fe("invalid",n)}Wu(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ko(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ko(n.textContent,a,e),s=["children",""+a]):zi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fe("scroll",n)}switch(r){case"input":Uo(n),Qh(n,i,!0);break;case"textarea":Uo(n),Xh(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ga)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=g0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[rr]=t,e[to]=n,Bv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Hu(r,n),r){case"dialog":fe("cancel",e),fe("close",e),s=n;break;case"iframe":case"object":case"embed":fe("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ei.length;s++)fe(Ei[s],e);s=n;break;case"source":fe("error",e),s=n;break;case"img":case"image":case"link":fe("error",e),fe("load",e),s=n;break;case"details":fe("toggle",e),s=n;break;case"input":Kh(e,n),s=Au(e,n),fe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=be({},n,{value:void 0}),fe("invalid",e);break;case"textarea":Jh(e,n),s=Bu(e,n),fe("invalid",e);break;default:s=n}Wu(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?x0(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&v0(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Vi(e,l):typeof l=="number"&&Vi(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&fe("scroll",e):l!=null&&of(e,i,l,o))}switch(r){case"input":Uo(e),Qh(e,n,!1);break;case"textarea":Uo(e),Xh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+an(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?bs(e,!!n.multiple,i,!1):n.defaultValue!=null&&bs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ga)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Wv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=Pn(no.current),Pn(ar.current),Qo(t)){if(n=t.stateNode,r=t.memoizedProps,n[rr]=t,(i=n.nodeValue!==r)&&(e=pt,e!==null))switch(e.tag){case 3:Ko(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ko(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rr]=t,t.stateNode=n}return Ye(t),null;case 13:if(he(ve),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&ft!==null&&t.mode&1&&!(t.flags&128))ov(),Ts(),t.flags|=98560,i=!1;else if(i=Qo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[rr]=t}else Ts(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else Ut!==null&&(Sd(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?je===0&&(je=3):Wf())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Rs(),md(e,t),e===null&&Zi(t.stateNode.containerInfo),Ye(t),null;case 10:return Df(t.type._context),Ye(t),null;case 17:return ct(t.type)&&qa(),Ye(t),null;case 19:if(he(ve),i=t.memoizedState,i===null)return Ye(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)hi(i,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=tl(e),o!==null){for(t.flags|=128,hi(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>Ms&&(t.flags|=128,n=!0,hi(i,!1),t.lanes=4194304)}else{if(!n)if(e=tl(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return Ye(t),null}else 2*Se()-i.renderingStartTime>Ms&&r!==1073741824&&(t.flags|=128,n=!0,hi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,r=ve.current,de(ve,n?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return Uf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?dt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function o1(e,t){switch(wf(t),t.tag){case 1:return ct(t.type)&&qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rs(),he(lt),he(qe),jf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pf(t),null;case 13:if(he(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ve),null;case 4:return Rs(),null;case 10:return Df(t.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var Zo=!1,Ve=!1,a1=typeof WeakSet=="function"?WeakSet:Set,Y=null;function vs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){we(e,t,n)}else r.current=null}function gd(e,t,r){try{r()}catch(n){we(e,t,n)}}var Up=!1;function l1(e,t){if(Zu=Ya,e=G0(),xf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(a=o+s),f!==i||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(a=o),h===i&&++d===n&&(l=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ed={focusedElem:e,selectionRange:r},Ya=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,b=m.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ft(t.type,x),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){we(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return m=Up,Up=!1,m}function Fi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&gd(t,r,i)}s=s.next}while(s!==n)}}function Hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Hv(e){var t=e.alternate;t!==null&&(e.alternate=null,Hv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rr],delete t[to],delete t[nd],delete t[Y_],delete t[z_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yv(e){return e.tag===5||e.tag===3||e.tag===4}function Wp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ga));else if(n!==4&&(e=e.child,e!==null))for(yd(e,t,r),e=e.sibling;e!==null;)yd(e,t,r),e=e.sibling}function xd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(xd(e,t,r),e=e.sibling;e!==null;)xd(e,t,r),e=e.sibling}var Fe=null,$t=!1;function Lr(e,t,r){for(r=r.child;r!==null;)zv(e,t,r),r=r.sibling}function zv(e,t,r){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Ml,r)}catch{}switch(r.tag){case 5:Ve||vs(r,t);case 6:var n=Fe,s=$t;Fe=null,Lr(e,t,r),Fe=n,$t=s,Fe!==null&&($t?(e=Fe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fe.removeChild(r.stateNode));break;case 18:Fe!==null&&($t?(e=Fe,r=r.stateNode,e.nodeType===8?$c(e.parentNode,r):e.nodeType===1&&$c(e,r),Qi(e)):$c(Fe,r.stateNode));break;case 4:n=Fe,s=$t,Fe=r.stateNode.containerInfo,$t=!0,Lr(e,t,r),Fe=n,$t=s;break;case 0:case 11:case 14:case 15:if(!Ve&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gd(r,t,o),s=s.next}while(s!==n)}Lr(e,t,r);break;case 1:if(!Ve&&(vs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){we(r,t,a)}Lr(e,t,r);break;case 21:Lr(e,t,r);break;case 22:r.mode&1?(Ve=(n=Ve)||r.memoizedState!==null,Lr(e,t,r),Ve=n):Lr(e,t,r);break;default:Lr(e,t,r)}}function Hp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new a1),t.forEach(function(n){var s=v1.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Lt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fe=a.stateNode,$t=!1;break e;case 3:Fe=a.stateNode.containerInfo,$t=!0;break e;case 4:Fe=a.stateNode.containerInfo,$t=!0;break e}a=a.return}if(Fe===null)throw Error(R(160));zv(i,o,s),Fe=null,$t=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){we(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vv(t,e),t=t.sibling}function Vv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Xt(e),n&4){try{Fi(3,e,e.return),Hl(3,e)}catch(x){we(e,e.return,x)}try{Fi(5,e,e.return)}catch(x){we(e,e.return,x)}}break;case 1:Lt(t,e),Xt(e),n&512&&r!==null&&vs(r,r.return);break;case 5:if(Lt(t,e),Xt(e),n&512&&r!==null&&vs(r,r.return),e.flags&32){var s=e.stateNode;try{Vi(s,"")}catch(x){we(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&p0(s,i),Hu(a,o);var u=Hu(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?x0(s,f):d==="dangerouslySetInnerHTML"?v0(s,f):d==="children"?Vi(s,f):of(s,d,f,u)}switch(a){case"input":Fu(s,i);break;case"textarea":m0(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?bs(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?bs(s,!!i.multiple,i.defaultValue,!0):bs(s,!!i.multiple,i.multiple?[]:"",!1))}s[to]=i}catch(x){we(e,e.return,x)}}break;case 6:if(Lt(t,e),Xt(e),n&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){we(e,e.return,x)}}break;case 3:if(Lt(t,e),Xt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qi(t.containerInfo)}catch(x){we(e,e.return,x)}break;case 4:Lt(t,e),Xt(e);break;case 13:Lt(t,e),Xt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($f=Se())),n&4&&Hp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ve=(u=Ve)||d,Lt(t,e),Ve=u):Lt(t,e),Xt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Y=e,d=e.child;d!==null;){for(f=Y=d;Y!==null;){switch(h=Y,p=h.child,h.tag){case 0:case 11:case 14:case 15:Fi(4,h,h.return);break;case 1:vs(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(x){we(n,r,x)}}break;case 5:vs(h,h.return);break;case 22:if(h.memoizedState!==null){zp(f);continue}}p!==null?(p.return=h,Y=p):zp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=y0("display",o))}catch(x){we(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){we(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Lt(t,e),Xt(e),n&4&&Hp(e);break;case 21:break;default:Lt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Yv(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Vi(s,""),n.flags&=-33);var i=Wp(e);xd(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Wp(e);yd(e,a,o);break;default:throw Error(R(161))}}catch(l){we(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c1(e,t,r){Y=e,Gv(e)}function Gv(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Zo;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ve;a=Zo;var u=Ve;if(Zo=o,(Ve=l)&&!u)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?Vp(s):l!==null?(l.return=o,Y=l):Vp(s);for(;i!==null;)Y=i,Gv(i),i=i.sibling;Y=s,Zo=a,Ve=u}Yp(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Yp(e)}}function Yp(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||Hl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ve)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ft(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ep(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ep(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Qi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ve||t.flags&512&&vd(t)}catch(h){we(t,t.return,h)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function zp(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Vp(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hl(4,t)}catch(l){we(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){we(t,s,l)}}var i=t.return;try{vd(t)}catch(l){we(t,i,l)}break;case 5:var o=t.return;try{vd(t)}catch(l){we(t,o,l)}}}catch(l){we(t,t.return,l)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var u1=Math.ceil,sl=Rr.ReactCurrentDispatcher,Af=Rr.ReactCurrentOwner,jt=Rr.ReactCurrentBatchConfig,ne=0,Ie=null,Ee=null,Ue=0,dt=0,ys=hn(0),je=0,ao=null,Bn=0,Yl=0,Ff=0,$i=null,it=null,$f=0,Ms=1/0,hr=null,il=!1,bd=null,Zr=null,ea=!1,Vr=null,ol=0,Bi=0,wd=null,Ca=-1,Ea=0;function et(){return ne&6?Se():Ca!==-1?Ca:Ca=Se()}function en(e){return e.mode&1?ne&2&&Ue!==0?Ue&-Ue:G_.transition!==null?(Ea===0&&(Ea=T0()),Ea):(e=le,e!==0||(e=window.event,e=e===void 0?16:F0(e.type)),e):1}function Yt(e,t,r,n){if(50<Bi)throw Bi=0,wd=null,Error(R(185));_o(e,r,n),(!(ne&2)||e!==Ie)&&(e===Ie&&(!(ne&2)&&(Yl|=r),je===4&&Hr(e,Ue)),ut(e,n),r===1&&ne===0&&!(t.mode&1)&&(Ms=Se()+500,Bl&&pn()))}function ut(e,t){var r=e.callbackNode;Gw(e,t);var n=Ha(e,e===Ie?Ue:0);if(n===0)r!==null&&tp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tp(r),t===1)e.tag===0?V_(Gp.bind(null,e)):nv(Gp.bind(null,e)),W_(function(){!(ne&6)&&pn()}),r=null;else{switch(O0(n)){case 1:r=df;break;case 4:r=P0;break;case 16:r=Wa;break;case 536870912:r=j0;break;default:r=Wa}r=ty(r,qv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function qv(e,t){if(Ca=-1,Ea=0,ne&6)throw Error(R(327));var r=e.callbackNode;if(Ds()&&e.callbackNode!==r)return null;var n=Ha(e,e===Ie?Ue:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=al(e,n);else{t=n;var s=ne;ne|=2;var i=Qv();(Ie!==e||Ue!==t)&&(hr=null,Ms=Se()+500,On(e,t));do try{h1();break}catch(a){Kv(e,a)}while(1);kf(),sl.current=i,ne=s,Ee!==null?t=0:(Ie=null,Ue=0,t=je)}if(t!==0){if(t===2&&(s=qu(e),s!==0&&(n=s,t=_d(e,s))),t===1)throw r=ao,On(e,0),Hr(e,n),ut(e,Se()),r;if(t===6)Hr(e,n);else{if(s=e.current.alternate,!(n&30)&&!d1(s)&&(t=al(e,n),t===2&&(i=qu(e),i!==0&&(n=i,t=_d(e,i))),t===1))throw r=ao,On(e,0),Hr(e,n),ut(e,Se()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:_n(e,it,hr);break;case 3:if(Hr(e,n),(n&130023424)===n&&(t=$f+500-Se(),10<t)){if(Ha(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rd(_n.bind(null,e,it,hr),t);break}_n(e,it,hr);break;case 4:if(Hr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Ht(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*u1(n/1960))-n,10<n){e.timeoutHandle=rd(_n.bind(null,e,it,hr),n);break}_n(e,it,hr);break;case 5:_n(e,it,hr);break;default:throw Error(R(329))}}}return ut(e,Se()),e.callbackNode===r?qv.bind(null,e):null}function _d(e,t){var r=$i;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=al(e,t),e!==2&&(t=it,it=r,t!==null&&Sd(t)),e}function Sd(e){it===null?it=e:it.push.apply(it,e)}function d1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Vt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t){for(t&=~Ff,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ht(t),n=1<<r;e[r]=-1,t&=~n}}function Gp(e){if(ne&6)throw Error(R(327));Ds();var t=Ha(e,0);if(!(t&1))return ut(e,Se()),null;var r=al(e,t);if(e.tag!==0&&r===2){var n=qu(e);n!==0&&(t=n,r=_d(e,n))}if(r===1)throw r=ao,On(e,0),Hr(e,t),ut(e,Se()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_n(e,it,hr),ut(e,Se()),null}function Bf(e,t){var r=ne;ne|=1;try{return e(t)}finally{ne=r,ne===0&&(Ms=Se()+500,Bl&&pn())}}function Un(e){Vr!==null&&Vr.tag===0&&!(ne&6)&&Ds();var t=ne;ne|=1;var r=jt.transition,n=le;try{if(jt.transition=null,le=1,e)return e()}finally{le=n,jt.transition=r,ne=t,!(ne&6)&&pn()}}function Uf(){dt=ys.current,he(ys)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,U_(r)),Ee!==null)for(r=Ee.return;r!==null;){var n=r;switch(wf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qa();break;case 3:Rs(),he(lt),he(qe),jf();break;case 5:Pf(n);break;case 4:Rs();break;case 13:he(ve);break;case 19:he(ve);break;case 10:Df(n.type._context);break;case 22:case 23:Uf()}r=r.return}if(Ie=e,Ee=e=tn(e.current,null),Ue=dt=t,je=0,ao=null,Ff=Yl=Bn=0,it=$i=null,En!==null){for(t=0;t<En.length;t++)if(r=En[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}En=null}return e}function Kv(e,t){do{var r=Ee;try{if(kf(),ka.current=nl,rl){for(var n=xe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}rl=!1}if($n=0,Re=Pe=xe=null,Ai=!1,so=0,Af.current=null,r===null||r.return===null){je=1,ao=t,Ee=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=Ue,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ip(o);if(p!==null){p.flags&=-257,Mp(p,o,a,i,t),p.mode&1&&Rp(i,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var x=new Set;x.add(l),t.updateQueue=x}else m.add(l);break e}else{if(!(t&1)){Rp(i,u,t),Wf();break e}l=Error(R(426))}}else if(pe&&a.mode&1){var b=Ip(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Mp(b,o,a,i,t),_f(Is(l,a));break e}}i=l=Is(l,a),je!==4&&(je=2),$i===null?$i=[i]:$i.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Ov(i,l,t);Cp(i,y);break e;case 1:a=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zr===null||!Zr.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Rv(i,a,t);Cp(i,_);break e}}i=i.return}while(i!==null)}Xv(r)}catch(S){t=S,Ee===r&&r!==null&&(Ee=r=r.return);continue}break}while(1)}function Qv(){var e=sl.current;return sl.current=nl,e===null?nl:e}function Wf(){(je===0||je===3||je===2)&&(je=4),Ie===null||!(Bn&268435455)&&!(Yl&268435455)||Hr(Ie,Ue)}function al(e,t){var r=ne;ne|=2;var n=Qv();(Ie!==e||Ue!==t)&&(hr=null,On(e,t));do try{f1();break}catch(s){Kv(e,s)}while(1);if(kf(),ne=r,sl.current=n,Ee!==null)throw Error(R(261));return Ie=null,Ue=0,je}function f1(){for(;Ee!==null;)Jv(Ee)}function h1(){for(;Ee!==null&&!Fw();)Jv(Ee)}function Jv(e){var t=ey(e.alternate,e,dt);e.memoizedProps=e.pendingProps,t===null?Xv(e):Ee=t,Af.current=null}function Xv(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=o1(r,t),r!==null){r.flags&=32767,Ee=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,Ee=null;return}}else if(r=i1(r,t,dt),r!==null){Ee=r;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);je===0&&(je=5)}function _n(e,t,r){var n=le,s=jt.transition;try{jt.transition=null,le=1,p1(e,t,r,n)}finally{jt.transition=s,le=n}return null}function p1(e,t,r,n){do Ds();while(Vr!==null);if(ne&6)throw Error(R(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(qw(e,i),e===Ie&&(Ee=Ie=null,Ue=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ea||(ea=!0,ty(Wa,function(){return Ds(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=le;le=1;var a=ne;ne|=4,Af.current=null,l1(e,r),Vv(r,e),I_(ed),Ya=!!Zu,ed=Zu=null,e.current=r,c1(r),$w(),ne=a,le=o,jt.transition=i}else e.current=r;if(ea&&(ea=!1,Vr=e,ol=s),i=e.pendingLanes,i===0&&(Zr=null),Ww(r.stateNode),ut(e,Se()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(il)throw il=!1,e=bd,bd=null,e;return ol&1&&e.tag!==0&&Ds(),i=e.pendingLanes,i&1?e===wd?Bi++:(Bi=0,wd=e):Bi=0,pn(),null}function Ds(){if(Vr!==null){var e=O0(ol),t=jt.transition,r=le;try{if(jt.transition=null,le=16>e?16:e,Vr===null)var n=!1;else{if(e=Vr,Vr=null,ol=0,ne&6)throw Error(R(331));var s=ne;for(ne|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Y=u;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Fi(8,d,i)}var f=d.child;if(f!==null)f.return=d,Y=f;else for(;Y!==null;){d=Y;var h=d.sibling,p=d.return;if(Hv(d),d===u){Y=null;break}if(h!==null){h.return=p,Y=h;break}Y=p}}}var m=i.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var g=e.current;for(Y=g;Y!==null;){o=Y;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Y=v;else e:for(o=g;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hl(9,a)}}catch(S){we(a,a.return,S)}if(a===o){Y=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Y=_;break e}Y=a.return}}if(ne=s,pn(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Ml,e)}catch{}n=!0}return n}finally{le=r,jt.transition=t}}return!1}function qp(e,t,r){t=Is(r,t),t=Ov(e,t,1),e=Xr(e,t,1),t=et(),e!==null&&(_o(e,1,t),ut(e,t))}function we(e,t,r){if(e.tag===3)qp(e,e,r);else for(;t!==null;){if(t.tag===3){qp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zr===null||!Zr.has(n))){e=Is(r,e),e=Rv(t,e,1),t=Xr(t,e,1),e=et(),t!==null&&(_o(t,1,e),ut(t,e));break}}t=t.return}}function m1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&r,Ie===e&&(Ue&r)===r&&(je===4||je===3&&(Ue&130023424)===Ue&&500>Se()-$f?On(e,0):Ff|=r),ut(e,t)}function Zv(e,t){t===0&&(e.mode&1?(t=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):t=1);var r=et();e=Pr(e,t),e!==null&&(_o(e,t,r),ut(e,r))}function g1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Zv(e,r)}function v1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),Zv(e,r)}var ey;ey=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)at=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return at=!1,s1(e,t,r);at=!!(e.flags&131072)}else at=!1,pe&&t.flags&1048576&&sv(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Na(e,t),e=t.pendingProps;var s=js(t,qe.current);ks(t,r),s=Of(null,t,n,e,s,r);var i=Rf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(n)?(i=!0,Ka(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cf(t),s.updater=Wl,t.stateNode=s,s._reactInternals=t,cd(t,n,e,r),t=fd(null,t,n,!0,i,r)):(t.tag=0,pe&&i&&bf(t),Je(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Na(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=x1(n),e=Ft(n,e),s){case 0:t=dd(null,t,n,e,r);break e;case 1:t=Fp(null,t,n,e,r);break e;case 11:t=Lp(null,t,n,e,r);break e;case 14:t=Ap(null,t,n,Ft(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ft(n,s),dd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ft(n,s),Fp(e,t,n,s,r);case 3:e:{if(Av(t),e===null)throw Error(R(387));n=t.pendingProps,i=t.memoizedState,s=i.element,uv(e,t),el(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Is(Error(R(423)),t),t=$p(e,t,n,r,s);break e}else if(n!==s){s=Is(Error(R(424)),t),t=$p(e,t,n,r,s);break e}else for(ft=Jr(t.stateNode.containerInfo.firstChild),pt=t,pe=!0,Ut=null,r=lv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ts(),n===s){t=jr(e,t,r);break e}Je(e,t,n,r)}t=t.child}return t;case 5:return dv(t),e===null&&od(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,td(n,s)?o=null:i!==null&&td(n,i)&&(t.flags|=32),Lv(e,t),Je(e,t,o,r),t.child;case 6:return e===null&&od(t),null;case 13:return Fv(e,t,r);case 4:return Ef(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Os(t,null,n,r):Je(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ft(n,s),Lp(e,t,n,s,r);case 7:return Je(e,t,t.pendingProps,r),t.child;case 8:return Je(e,t,t.pendingProps.children,r),t.child;case 12:return Je(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,de(Xa,n._currentValue),n._currentValue=o,i!==null)if(Vt(i.value,o)){if(i.children===s.children&&!lt.current){t=jr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=br(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ad(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ad(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Je(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ks(t,r),s=Rt(s),n=n(s),t.flags|=1,Je(e,t,n,r),t.child;case 14:return n=t.type,s=Ft(n,t.pendingProps),s=Ft(n.type,s),Ap(e,t,n,s,r);case 15:return Iv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ft(n,s),Na(e,t),t.tag=1,ct(n)?(e=!0,Ka(t)):e=!1,ks(t,r),Tv(t,n,s),cd(t,n,s,r),fd(null,t,n,!0,e,r);case 19:return $v(e,t,r);case 22:return Mv(e,t,r)}throw Error(R(156,t.tag))};function ty(e,t){return E0(e,t)}function y1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,r,n){return new y1(e,t,r,n)}function Hf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function x1(e){if(typeof e=="function")return Hf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lf)return 11;if(e===cf)return 14}return 2}function tn(e,t){var r=e.alternate;return r===null?(r=Et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pa(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Hf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ls:return Rn(r.children,s,i,t);case af:o=8,s|=8;break;case Ru:return e=Et(12,r,t,s|2),e.elementType=Ru,e.lanes=i,e;case Iu:return e=Et(13,r,t,s),e.elementType=Iu,e.lanes=i,e;case Mu:return e=Et(19,r,t,s),e.elementType=Mu,e.lanes=i,e;case d0:return zl(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case c0:o=10;break e;case u0:o=9;break e;case lf:o=11;break e;case cf:o=14;break e;case Br:o=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Et(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Rn(e,t,r,n){return e=Et(7,e,n,t),e.lanes=r,e}function zl(e,t,r,n){return e=Et(22,e,n,t),e.elementType=d0,e.lanes=r,e.stateNode={isHidden:!1},e}function Gc(e,t,r){return e=Et(6,e,null,t),e.lanes=r,e}function qc(e,t,r){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b1(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ec(0),this.expirationTimes=Ec(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ec(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yf(e,t,r,n,s,i,o,a,l){return e=new b1(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Et(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cf(i),e}function w1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ry(e){if(!e)return ln;e=e._reactInternals;e:{if(Gn(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(ct(r))return rv(e,r,t)}return t}function ny(e,t,r,n,s,i,o,a,l){return e=Yf(r,n,!0,e,s,i,o,a,l),e.context=ry(null),r=e.current,n=et(),s=en(r),i=br(n,s),i.callback=t??null,Xr(r,i,s),e.current.lanes=s,_o(e,s,n),ut(e,n),e}function Vl(e,t,r,n){var s=t.current,i=et(),o=en(s);return r=ry(r),t.context===null?t.context=r:t.pendingContext=r,t=br(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Xr(s,t,o),e!==null&&(Yt(e,s,o,i),Sa(e,s,o)),o}function ll(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function zf(e,t){Kp(e,t),(e=e.alternate)&&Kp(e,t)}function _1(){return null}var sy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vf(e){this._internalRoot=e}Gl.prototype.render=Vf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Vl(e,t,null,null)};Gl.prototype.unmount=Vf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){Vl(null,e,null,null)}),t[Er]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=M0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wr.length&&t!==0&&t<Wr[r].priority;r++);Wr.splice(r,0,e),r===0&&A0(e)}};function Gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function S1(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=ll(o);i.call(u)}}var o=ny(t,n,e,0,null,!1,!1,"",Qp);return e._reactRootContainer=o,e[Er]=o.current,Zi(e.nodeType===8?e.parentNode:e),Un(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=ll(l);a.call(u)}}var l=Yf(e,0,!1,null,null,!1,!1,"",Qp);return e._reactRootContainer=l,e[Er]=l.current,Zi(e.nodeType===8?e.parentNode:e),Un(function(){Vl(t,l,r,n)}),l}function Kl(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ll(o);a.call(l)}}Vl(t,o,e,s)}else o=S1(r,t,e,s,n);return ll(o)}R0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ci(t.pendingLanes);r!==0&&(ff(t,r|1),ut(t,Se()),!(ne&6)&&(Ms=Se()+500,pn()))}break;case 13:Un(function(){var n=Pr(e,1);if(n!==null){var s=et();Yt(n,e,1,s)}}),zf(e,1)}};hf=function(e){if(e.tag===13){var t=Pr(e,134217728);if(t!==null){var r=et();Yt(t,e,134217728,r)}zf(e,134217728)}};I0=function(e){if(e.tag===13){var t=en(e),r=Pr(e,t);if(r!==null){var n=et();Yt(r,e,t,n)}zf(e,t)}};M0=function(){return le};L0=function(e,t){var r=le;try{return le=e,t()}finally{le=r}};zu=function(e,t,r){switch(t){case"input":if(Fu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=$l(n);if(!s)throw Error(R(90));h0(n),Fu(n,s)}}}break;case"textarea":m0(e,r);break;case"select":t=r.value,t!=null&&bs(e,!!r.multiple,t,!1)}};_0=Bf;S0=Un;var k1={usingClientEntryPoint:!1,Events:[ko,fs,$l,b0,w0,Bf]},pi={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D1={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=N0(e),e===null?null:e.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||_1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{Ml=ta.inject(D1),or=ta}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k1;xt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(t))throw Error(R(200));return w1(e,t,null,r)};xt.createRoot=function(e,t){if(!Gf(e))throw Error(R(299));var r=!1,n="",s=sy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yf(e,1,!1,null,null,r,!1,n,s),e[Er]=t.current,Zi(e.nodeType===8?e.parentNode:e),new Vf(t)};xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=N0(t),e=e===null?null:e.stateNode,e};xt.flushSync=function(e){return Un(e)};xt.hydrate=function(e,t,r){if(!ql(t))throw Error(R(200));return Kl(null,e,t,!0,r)};xt.hydrateRoot=function(e,t,r){if(!Gf(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=sy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ny(t,null,e,1,r??null,s,!1,i,o),e[Er]=t.current,Zi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Gl(t)};xt.render=function(e,t,r){if(!ql(t))throw Error(R(200));return Kl(null,e,t,!1,r)};xt.unmountComponentAtNode=function(e){if(!ql(e))throw Error(R(40));return e._reactRootContainer?(Un(function(){Kl(null,null,e,!1,function(){e._reactRootContainer=null,e[Er]=null})}),!0):!1};xt.unstable_batchedUpdates=Bf;xt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ql(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Kl(e,t,r,!1,n)};xt.version="18.3.1-next-f1338f8080-20240426";function iy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iy)}catch(e){console.error(e)}}iy(),i0.exports=xt;var No=i0.exports;const oy=Vg(No);var Jp=No;Tu.createRoot=Jp.createRoot,Tu.hydrateRoot=Jp.hydrateRoot;const N1="modulepreload",C1=function(e){return"/"+e},Xp={},Qs=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=C1(i),i in Xp)return;Xp[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":N1,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Zp="popstate";function E1(e={}){function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return kd("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:lo(s)}return j1(t,r,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P1(){return Math.random().toString(36).substring(2,10)}function em(e,t){return{usr:e.state,key:e.key,idx:t}}function kd(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Js(t):t,state:r,key:t&&t.key||n||P1()}}function lo({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Js(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function j1(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let b=d(),y=b==null?null:b-u;u=b,l&&l({action:a,location:x.location,delta:y})}function h(b,y){a="PUSH";let g=kd(x.location,b,y);r&&r(g,b),u=d()+1;let v=em(g,u),_=x.createHref(g);try{o.pushState(v,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:x.location,delta:1})}function p(b,y){a="REPLACE";let g=kd(x.location,b,y);r&&r(g,b),u=d();let v=em(g,u),_=x.createHref(g);o.replaceState(v,"",_),i&&l&&l({action:a,location:x.location,delta:0})}function m(b){return T1(b)}let x={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Zp,f),l=b,()=>{s.removeEventListener(Zp,f),l=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(b){return o.go(b)}};return x}function T1(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ge(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:lo(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function ay(e,t,r="/"){return O1(e,t,r,!1)}function O1(e,t,r,n){let s=typeof t=="string"?Js(t):t,i=Tr(s.pathname||"/",r);if(i==null)return null;let o=ly(e);R1(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Y1(i);a=W1(o[l],u,n)}return a}function ly(e,t=[],r=[],n=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=wr([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(ge(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),ly(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:B1(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of cy(i.path))s(i,o,l)}),t}function cy(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=cy(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function R1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:U1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var I1=/^:[\w-]+$/,M1=3,L1=2,A1=1,F1=10,$1=-2,tm=e=>e==="*";function B1(e,t){let r=e.split("/"),n=r.length;return r.some(tm)&&(n+=$1),t&&(n+=L1),r.filter(s=>!tm(s)).reduce((s,i)=>s+(I1.test(i)?M1:i===""?A1:F1),n)}function U1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function W1(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=cl({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=cl({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:wr([i,f.pathname]),pathnameBase:q1(wr([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=wr([i,f.pathnameBase]))}return o}function cl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=H1(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function H1(e,t=!1,r=!0){Gt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Y1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Tr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function z1(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Js(e):e;return{pathname:r?r.startsWith("/")?r:V1(r,t):t,search:K1(n),hash:Q1(s)}}function V1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Kc(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function qf(e){let t=G1(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Kf(e,t,r,n=!1){let s;typeof e=="string"?s=Js(e):(s={...e},ge(!s.pathname||!s.pathname.includes("?"),Kc("?","pathname","search",s)),ge(!s.pathname||!s.pathname.includes("#"),Kc("#","pathname","hash",s)),ge(!s.search||!s.search.includes("#"),Kc("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=z1(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var wr=e=>e.join("/").replace(/\/\/+/g,"/"),q1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Q1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function J1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var uy=["POST","PUT","PATCH","DELETE"];new Set(uy);var X1=["GET",...uy];new Set(X1);var Xs=w.createContext(null);Xs.displayName="DataRouter";var Ql=w.createContext(null);Ql.displayName="DataRouterState";w.createContext(!1);var dy=w.createContext({isTransitioning:!1});dy.displayName="ViewTransition";var Z1=w.createContext(new Map);Z1.displayName="Fetchers";var eS=w.createContext(null);eS.displayName="Await";var Kt=w.createContext(null);Kt.displayName="Navigation";var Co=w.createContext(null);Co.displayName="Location";var Qt=w.createContext({outlet:null,matches:[],isDataRoute:!1});Qt.displayName="Route";var Qf=w.createContext(null);Qf.displayName="RouteError";function tS(e,{relative:t}={}){ge(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(Kt),{hash:s,pathname:i,search:o}=Eo(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:wr([r,i])),n.createHref({pathname:a,search:o,hash:s})}function Zs(){return w.useContext(Co)!=null}function Ir(){return ge(Zs(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Co).location}var fy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hy(e){w.useContext(Kt).static||w.useLayoutEffect(e)}function Jl(){let{isDataRoute:e}=w.useContext(Qt);return e?pS():rS()}function rS(){ge(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Xs),{basename:t,navigator:r}=w.useContext(Kt),{matches:n}=w.useContext(Qt),{pathname:s}=Ir(),i=JSON.stringify(qf(n)),o=w.useRef(!1);return hy(()=>{o.current=!0}),w.useCallback((l,u={})=>{if(Gt(o.current,fy),!o.current)return;if(typeof l=="number"){r.go(l);return}let d=Kf(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:wr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,s,e])}w.createContext(null);function py(){let{matches:e}=w.useContext(Qt),t=e[e.length-1];return t?t.params:{}}function Eo(e,{relative:t}={}){let{matches:r}=w.useContext(Qt),{pathname:n}=Ir(),s=JSON.stringify(qf(r));return w.useMemo(()=>Kf(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function nS(e,t){return my(e,t)}function my(e,t,r,n){var y;ge(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(Kt),{matches:i}=w.useContext(Qt),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let g=d&&d.path||"";gy(l,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let f=Ir(),h;if(t){let g=typeof t=="string"?Js(t):t;ge(u==="/"||((y=g.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${g.pathname}" was given in the \`location\` prop.`),h=g}else h=f;let p=h.pathname||"/",m=p;if(u!=="/"){let g=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=ay(e,{pathname:m});Gt(d||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Gt(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=lS(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:wr([u,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:wr([u,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n);return t&&b?w.createElement(Co.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function sS(){let e=hS(),t=J1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,o)}var iS=w.createElement(sS,null),oS=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Qt.Provider,{value:this.props.routeContext},w.createElement(Qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aS({routeContext:e,match:t,children:r}){let n=w.useContext(Xs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Qt.Provider,{value:e},r)}function lS(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let l=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);ge(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(r)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,d)=>{let f,h=!1,p=null,m=null;r&&(f=i&&u.route.id?i[u.route.id]:void 0,p=u.route.errorElement||iS,o&&(a<0&&d===0?(gy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):a===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),b=()=>{let y;return f?y=p:h?y=m:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,w.createElement(aS,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?w.createElement(oS,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function Jf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(e){let t=w.useContext(Xs);return ge(t,Jf(e)),t}function uS(e){let t=w.useContext(Ql);return ge(t,Jf(e)),t}function dS(e){let t=w.useContext(Qt);return ge(t,Jf(e)),t}function Xf(e){let t=dS(e),r=t.matches[t.matches.length-1];return ge(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function fS(){return Xf("useRouteId")}function hS(){var n;let e=w.useContext(Qf),t=uS("useRouteError"),r=Xf("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function pS(){let{router:e}=cS("useNavigate"),t=Xf("useNavigate"),r=w.useRef(!1);return hy(()=>{r.current=!0}),w.useCallback(async(s,i={})=>{Gt(r.current,fy),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var rm={};function gy(e,t,r){!t&&!rm[e]&&(rm[e]=!0,Gt(!1,r))}w.memo(mS);function mS({routes:e,future:t,state:r}){return my(e,void 0,r,t)}function gS({to:e,replace:t,state:r,relative:n}){ge(Zs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(Kt);Gt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Qt),{pathname:o}=Ir(),a=Jl(),l=Kf(e,qf(i),o,n==="path"),u=JSON.stringify(l);return w.useEffect(()=>{a(JSON.parse(u),{replace:t,state:r,relative:n})},[a,u,n,t,r]),null}function ns(e){ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vS({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){ge(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Js(r));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=w.useMemo(()=>{let m=Tr(l,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:h},navigationType:n}},[o,l,u,d,f,h,n]);return Gt(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(Kt.Provider,{value:a},w.createElement(Co.Provider,{children:t,value:p}))}function yS({children:e,location:t}){return nS(Dd(e),t)}function Dd(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Dd(n.props.children,i));return}ge(n.type===ns,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ge(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Dd(n.props.children,i)),r.push(o)}),r}var ja="get",Ta="application/x-www-form-urlencoded";function Xl(e){return e!=null&&typeof e.tagName=="string"}function xS(e){return Xl(e)&&e.tagName.toLowerCase()==="button"}function bS(e){return Xl(e)&&e.tagName.toLowerCase()==="form"}function wS(e){return Xl(e)&&e.tagName.toLowerCase()==="input"}function _S(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SS(e,t){return e.button===0&&(!t||t==="_self")&&!_S(e)}var ra=null;function kS(){if(ra===null)try{new FormData(document.createElement("form"),0),ra=!1}catch{ra=!0}return ra}var DS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qc(e){return e!=null&&!DS.has(e)?(Gt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ta}"`),null):e}function NS(e,t){let r,n,s,i,o;if(bS(e)){let a=e.getAttribute("action");n=a?Tr(a,t):null,r=e.getAttribute("method")||ja,s=Qc(e.getAttribute("enctype"))||Ta,i=new FormData(e)}else if(xS(e)||wS(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Tr(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||ja,s=Qc(e.getAttribute("formenctype"))||Qc(a.getAttribute("enctype"))||Ta,i=new FormData(a,e),!kS()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(Xl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ja,n=null,s=Ta,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CS(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Tr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function ES(e,t){if(e.id in t)return t[e.id];try{let r=await Qs(()=>import(e.module),[]);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PS(e){return e!=null&&typeof e.page=="string"}function jS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function TS(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await ES(i,r);return o.links?o.links():[]}return[]}));return MS(n.flat(1).filter(jS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nm(e,t,r,n,s,i){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,a=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function OS(e,t,{includeHydrateFallback:r}={}){return RS(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function RS(e){return[...new Set(e)]}function IS(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function MS(e,t){let r=new Set,n=new Set(t);return e.reduce((s,i)=>{if(t&&!PS(i)&&i.as==="script"&&i.href&&n.has(i.href))return s;let a=JSON.stringify(IS(i));return r.has(a)||(r.add(a),s.push({key:a,link:i})),s},[])}function vy(){let e=w.useContext(Xs);return Zf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function LS(){let e=w.useContext(Ql);return Zf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eh=w.createContext(void 0);eh.displayName="FrameworkContext";function yy(){let e=w.useContext(eh);return Zf(e,"You must render this element inside a <HydratedRouter> element"),e}function AS(e,t){let r=w.useContext(eh),[n,s]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=y=>{y.forEach(g=>{o(g.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[n]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,h,{}]:[i,h,{onFocus:mi(a,p),onBlur:mi(l,m),onMouseEnter:mi(u,p),onMouseLeave:mi(d,m),onTouchStart:mi(f,p)}]:[!1,h,{}]}function mi(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function FS({page:e,...t}){let{router:r}=vy(),n=w.useMemo(()=>ay(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(BS,{page:e,matches:n,...t}):null}function $S(e){let{manifest:t,routeModules:r}=yy(),[n,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return TS(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function BS({page:e,matches:t,...r}){let n=Ir(),{manifest:s,routeModules:i}=yy(),{basename:o}=vy(),{loaderData:a,matches:l}=LS(),u=w.useMemo(()=>nm(e,t,l,s,n,"data"),[e,t,l,s,n]),d=w.useMemo(()=>nm(e,t,l,s,n,"assets"),[e,t,l,s,n]),f=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let m=new Set,x=!1;if(t.forEach(y=>{var v;let g=s.routes[y.route.id];!g||!g.hasLoader||(!u.some(_=>_.route.id===y.route.id)&&y.route.id in a&&((v=i[y.route.id])!=null&&v.shouldRevalidate)||g.hasClientLoader?x=!0:m.add(y.route.id))}),m.size===0)return[];let b=CS(e,o,"data");return x&&m.size>0&&b.searchParams.set("_routes",t.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,u,t,e,i]),h=w.useMemo(()=>OS(d,s),[d,s]),p=$S(d);return w.createElement(w.Fragment,null,f.map(m=>w.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>w.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),p.map(({key:m,link:x})=>w.createElement("link",{key:m,...x})))}function US(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var xy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xy&&(window.__reactRouterVersion="7.7.1")}catch{}function WS({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=E1({window:r,v5Compat:!0}));let s=n.current,[i,o]=w.useState({action:s.action,location:s.location}),a=w.useCallback(l=>{w.startTransition(()=>o(l))},[o]);return w.useLayoutEffect(()=>s.listen(a),[s,a]),w.createElement(vS,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,co=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:m}=w.useContext(Kt),x=typeof u=="string"&&by.test(u),b,y=!1;if(typeof u=="string"&&x&&(b=u,xy))try{let E=new URL(window.location.href),P=u.startsWith("//")?new URL(E.protocol+u):new URL(u),I=Tr(P.pathname,m);P.origin===E.origin&&I!=null?u=I+P.search+P.hash:y=!0}catch{Gt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=tS(u,{relative:s}),[v,_,S]=AS(n,h),k=VS(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function D(E){t&&t(E),E.defaultPrevented||k(E)}let C=w.createElement("a",{...h,...S,href:b||g,onClick:y||i?t:D,ref:US(p,_),target:l,"data-discover":!x&&r==="render"?"true":void 0});return v&&!x?w.createElement(w.Fragment,null,C,w.createElement(FS,{page:g})):C});co.displayName="Link";var HS=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},d){let f=Eo(o,{relative:u.relative}),h=Ir(),p=w.useContext(Ql),{navigator:m,basename:x}=w.useContext(Kt),b=p!=null&&JS(f)&&a===!0,y=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,g=h.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(g=g.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&x&&(v=Tr(v,x)||v);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=g===y||!s&&g.startsWith(y)&&g.charAt(_)==="/",k=v!=null&&(v===y||!s&&v.startsWith(y)&&v.charAt(y.length)==="/"),D={isActive:S,isPending:k,isTransitioning:b},C=S?t:void 0,E;typeof n=="function"?E=n(D):E=[n,S?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(D):i;return w.createElement(co,{...u,"aria-current":C,className:E,ref:d,style:P,to:o,viewTransition:a},typeof l=="function"?l(D):l)});HS.displayName="NavLink";var YS=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=ja,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let m=KS(),x=QS(a,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&by.test(a),g=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let _=v.nativeEvent.submitter,S=(_==null?void 0:_.getAttribute("formmethod"))||o;m(_||v.currentTarget,{fetcherKey:t,method:S,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return w.createElement("form",{ref:p,method:b,action:x,onSubmit:n?l:g,...h,"data-discover":!y&&e==="render"?"true":void 0})});YS.displayName="Form";function zS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wy(e){let t=w.useContext(Xs);return ge(t,zS(e)),t}function VS(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Jl(),l=Ir(),u=Eo(e,{relative:i});return w.useCallback(d=>{if(SS(d,t)){d.preventDefault();let f=r!==void 0?r:lo(l)===lo(u);a(e,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,r,n,t,e,s,i,o])}var GS=0,qS=()=>`__${String(++GS)}__`;function KS(){let{router:e}=wy("useSubmit"),{basename:t}=w.useContext(Kt),r=fS();return w.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=NS(n,t);if(s.navigate===!1){let d=s.fetcherKey||qS();await e.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function QS(e,{relative:t}={}){let{basename:r}=w.useContext(Kt),n=w.useContext(Qt);ge(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Eo(e||".",{relative:t})},o=Ir();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:wr([r,i.pathname])),lo(i)}function JS(e,{relative:t}={}){let r=w.useContext(dy);ge(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=wy("useViewTransitionState"),s=Eo(e,{relative:t});if(!r.isTransitioning)return!1;let i=Tr(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Tr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cl(s.pathname,o)!=null||cl(s.pathname,i)!=null}const XS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>ei),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class th extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class ZS extends th{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sm extends th{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class im extends th{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Nd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Nd||(Nd={}));var ek=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class tk{constructor(t,{headers:r={},customFetch:n,region:s=Nd.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=XS(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return ek(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(x=>{throw new ZS(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new sm(f);if(!f.ok)throw new im(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield f.json():p==="application/octet-stream"?m=yield f.blob():p==="text/event-stream"?m=f:p==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof im||s instanceof sm?s.context:void 0}}})}}var ot={},rh={},Zl={},Po={},ec={},tc={},rk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ls=rk();const nk=Ls.fetch,_y=Ls.fetch.bind(Ls),Sy=Ls.Headers,sk=Ls.Request,ik=Ls.Response,ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sy,Request:sk,Response:ik,default:_y,fetch:nk},Symbol.toStringTag,{value:"Module"})),ok=ew(ei);var rc={};Object.defineProperty(rc,"__esModule",{value:!0});let ak=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};rc.default=ak;var ky=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tc,"__esModule",{value:!0});const lk=ky(ok),ck=ky(rc);let uk=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=lk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,f=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,p="OK")}catch{i.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new ck.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};tc.default=uk;var dk=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ec,"__esModule",{value:!0});const fk=dk(tc);let hk=class extends fk.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ec.default=hk;var pk=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Po,"__esModule",{value:!0});const mk=pk(ec);let gk=class extends mk.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Po.default=gk;var vk=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zl,"__esModule",{value:!0});const gi=vk(Po);let yk=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new gi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new gi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new gi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new gi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new gi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Zl.default=yk;var nc={},sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.version=void 0;sc.version="0.0.0-automated";Object.defineProperty(nc,"__esModule",{value:!0});nc.DEFAULT_HEADERS=void 0;const xk=sc;nc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${xk.version}`};var Dy=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rh,"__esModule",{value:!0});const bk=Dy(Zl),wk=Dy(Po),_k=nc;let Sk=class Ny{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},_k.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new bk.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ny(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",l=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new wk.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};rh.default=Sk;var ti=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ot,"__esModule",{value:!0});ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;const Cy=ti(rh);ot.PostgrestClient=Cy.default;const Ey=ti(Zl);ot.PostgrestQueryBuilder=Ey.default;const Py=ti(Po);ot.PostgrestFilterBuilder=Py.default;const jy=ti(ec);ot.PostgrestTransformBuilder=jy.default;const Ty=ti(tc);ot.PostgrestBuilder=Ty.default;const Oy=ti(rc);ot.PostgrestError=Oy.default;var kk=ot.default={PostgrestClient:Cy.default,PostgrestQueryBuilder:Ey.default,PostgrestFilterBuilder:Py.default,PostgrestTransformBuilder:jy.default,PostgrestBuilder:Ty.default,PostgrestError:Oy.default};const{PostgrestClient:Dk,PostgrestQueryBuilder:DL,PostgrestFilterBuilder:NL,PostgrestTransformBuilder:CL,PostgrestBuilder:EL,PostgrestError:PL}=kk;function Nk(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Ck=Nk(),Ek="2.11.15",Pk=`realtime-js/${Ek}`,jk="1.0.0",Ry=1e4,Tk=1e3;var Ui;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ui||(Ui={}));var ze;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ze||(ze={}));var Bt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bt||(Bt={}));var Cd;(function(e){e.websocket="websocket"})(Cd||(Cd={}));var Nn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Nn||(Nn={}));class Ok{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Iy{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const om=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Rk(o,e,t,s),i),{})},Rk=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?My(i,o):Ed(o)},My=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Ak(t,r)}switch(e){case ue.bool:return Ik(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return Mk(t);case ue.json:case ue.jsonb:return Lk(t);case ue.timestamp:return Fk(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Ed(t);default:return Ed(t)}},Ed=e=>e,Ik=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Lk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Ak=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>My(t,a))}return e},Fk=e=>typeof e=="string"?e.replace(" ","T"):e,Ly=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Jc{constructor(t,r,n={},s=Ry){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var am;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(am||(am={}));class Wi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wi.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Wi.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wi.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),x=f.filter(b=>h.indexOf(b.presence_ref)<0);m.length>0&&(a[u]=m),x.length>0&&(l[u]=x)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const f=t[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[a].unshift(...h)}n(a,d,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(lm||(lm={}));var cm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(cm||(cm={}));var pr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class nh{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Jc(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new Iy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Wi(this),this.broadcastEndpointURL=Ly(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>t==null?void 0:t(pr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(pr.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(pr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,m=[];for(let x=0;x<p;x++){const b=h[x],{filter:{event:y,schema:g,table:v,filter:_}}=b,S=d&&d[x];if(S&&S.event===y&&S.schema===g&&S.table===v&&S.filter===_)m.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=ze.errored,t==null||t(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(pr.SUBSCRIBED);return}}).receive("error",d=>{this.state=ze.errored,t==null||t(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ze.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Jc(this,Bt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jc(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Bt;if(n&&[a,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,x,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,x,b,y,g,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(g=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:x,table:b,commit_timestamp:y,type:g,errors:v}=m;h=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:y,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(h,n)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&nh.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bt.close,{},t)}_onError(t){this._on(Bt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=om(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=om(t.columns,t.old_record)),r}}const um=()=>{},$k=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bk{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ry,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=um,this.ref=0,this.logger=um,this.conn=null,this.sendBuffer=[],this.serializer=new Ok,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Qs(()=>Promise.resolve().then(()=>ei),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Cd.websocket}`,this.httpEndpoint=Ly(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Iy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ck),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jk}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ui.connecting:return Nn.Connecting;case Ui.open:return Nn.Open;case Ui.closing:return Nn.Closing;default:return Nn.Closed}}isConnected(){return this.connectionState()===Nn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new nh(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Pk};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Bt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Tk,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([$k],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class sh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Oe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Uk extends sh{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pd extends sh{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Wk=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const Ay=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>ei),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Hk=()=>Wk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>ei),void 0)).Response:Response}),jd=e=>{if(Array.isArray(e))return e.map(r=>jd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=jd(n)}),t},Yk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var qn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const Xc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zk=(e,t,r)=>qn(void 0,void 0,void 0,function*(){const n=yield Hk();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Uk(Xc(s),i,o))}).catch(s=>{t(new Pd(Xc(s),s))}):t(new Pd(Xc(e),e))}),Vk=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Yk(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function jo(e,t,r,n,s,i){return qn(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Vk(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>zk(l,a,n))})})}function ul(e,t,r,n){return qn(this,void 0,void 0,function*(){return jo(e,"GET",t,r,n)})}function mr(e,t,r,n,s){return qn(this,void 0,void 0,function*(){return jo(e,"POST",t,n,s,r)})}function Td(e,t,r,n,s){return qn(this,void 0,void 0,function*(){return jo(e,"PUT",t,n,s,r)})}function Gk(e,t,r,n){return qn(this,void 0,void 0,function*(){return jo(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Fy(e,t,r,n,s){return qn(this,void 0,void 0,function*(){return jo(e,"DELETE",t,n,s,r)})}var st=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const qk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kk{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Ay(s)}uploadOrUpdate(t,r,n,s){return st(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},dm),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?Td:mr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return st(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:dm.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Td(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return st(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield mr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new sh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(t,r,n){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return st(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return st(this,void 0,void 0,function*(){try{return{data:{path:(yield mr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return st(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield mr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return st(this,void 0,void 0,function*(){try{const s=yield mr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}download(t,r){return st(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ul(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}info(t){return st(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ul(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:jd(n),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}exists(t){return st(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Gk(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Oe(n)&&n instanceof Pd){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return st(this,void 0,void 0,function*(){try{return{data:yield Fy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}list(t,r,n){return st(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},qk),r),{prefix:t||""});return{data:yield mr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Qk="2.10.4",Jk={"X-Client-Info":`storage-js/${Qk}`};var Jn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class Xk{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Jk),r),this.fetch=Ay(n)}listBuckets(){return Jn(this,void 0,void 0,function*(){try{return{data:yield ul(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}getBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield ul(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Jn(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Jn(this,void 0,void 0,function*(){try{return{data:yield Td(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield Fy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}}class Zk extends Xk{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Kk(this.url,this.headers,t,this.fetch)}}const eD="2.53.0";let Pi="";typeof Deno<"u"?Pi="deno":typeof document<"u"?Pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pi="react-native":Pi="node";const tD={"X-Client-Info":`supabase-js-${Pi}/${eD}`},rD={headers:tD},nD={schema:"public"},sD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iD={};var oD=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const aD=e=>{let t;return e?t=e:typeof fetch>"u"?t=_y:t=fetch,(...r)=>t(...r)},lD=()=>typeof Headers>"u"?Sy:Headers,cD=(e,t,r)=>{const n=aD(r),s=lD();return(i,o)=>oD(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var uD=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};function dD(e){return e.endsWith("/")?e:e+"/"}function fD(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>uD(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const $y="2.71.1",ss=30*1e3,Od=3,Zc=Od*ss,hD="http://localhost:9999",pD="supabase.auth.token",mD={"X-Client-Info":`gotrue-js/${$y}`},Rd="X-Supabase-Api-Version",By={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vD=10*60*1e3;class ih extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class yD extends ih{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function xD(e){return Q(e)&&e.name==="AuthApiError"}class Uy extends ih{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class mn extends ih{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class $r extends mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bD(e){return Q(e)&&e.name==="AuthSessionMissingError"}class na extends mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sa extends mn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ia extends mn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wD(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class fm extends mn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Id extends mn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function eu(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class hm extends mn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Md extends mn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pm=` 	
\r=`.split(""),_D=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pm.length;t+=1)e[pm[t].charCodeAt(0)]=-2;for(let t=0;t<dl.length;t+=1)e[dl[t].charCodeAt(0)]=t;return e})();function mm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dl[n]),t.queuedBits-=6}}function Wy(e,t,r){const n=_D[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gm(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{DD(o,n,r)};for(let o=0;o<e.length;o+=1)Wy(e.charCodeAt(o),s,i);return t.join("")}function SD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}SD(n,t)}}function DD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ND(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Wy(e.charCodeAt(s),r,n);return new Uint8Array(t)}function CD(e){const t=[];return kD(e,r=>t.push(r)),new Uint8Array(t)}function ED(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>mm(s,r,n)),mm(null,r,n),t.join("")}function PD(e){return Math.round(Date.now()/1e3)+e}function jD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",vn={tested:!1,writable:!1},Hy=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vn.tested)return vn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vn.tested=!0,vn.writable=!0}catch{vn.tested=!0,vn.writable=!1}return vn.writable};function TD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Yy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>ei),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},OD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",is=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},yn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ar=async(e,t)=>{await e.removeItem(t)};class ic{constructor(){this.promise=new ic.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ic.promiseConstructor=Promise;function tu(e){const t=e.split(".");if(t.length!==3)throw new Md("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!gD.test(t[n]))throw new Md("JWT not in base64url format");return{header:JSON.parse(gm(t[0])),payload:JSON.parse(gm(t[1])),signature:ND(t[2]),raw:{header:t[0],payload:t[1]}}}async function RD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ID(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function MD(e){return("0"+e.toString(16)).substr(-2)}function LD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,MD).join("")}async function AD(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await AD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xn(e,t,r=!1){const n=LD();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await is(e,`${t}-code-verifier`,s);const i=await FD(n);return[i,n===i?"plain":"s256"]}const $D=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BD(e){const t=e.headers.get(Rd);if(!t||!t.match($D))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function UD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(e){if(!HD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ru(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vm(e){return JSON.parse(JSON.stringify(e))}var YD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Sn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zD=[502,503,504];async function ym(e){var t;if(!OD(e))throw new Id(Sn(e),0);if(zD.includes(e.status))throw new Id(Sn(e),e.status);let r;try{r=await e.json()}catch(i){throw new Uy(Sn(i),i)}let n;const s=BD(e);if(s&&s.getTime()>=By["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new hm(Sn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new hm(Sn(r),e.status,r.weak_password.reasons);throw new yD(Sn(r),e.status||500,n)}const VD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function X(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Rd]||(i[Rd]=By["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await GD(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function GD(e,t,r,n,s,i){const o=VD(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Id(Sn(l),0)}if(a.ok||await ym(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await ym(l)}}function fr(e){var t;let r=null;JD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=PD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function xm(e){const t=fr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function qD(e){return{data:e,error:null}}function KD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=YD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function QD(e){return e}function JD(e){return e.access_token&&e.refresh_token&&e.expires_in}const nu=["global","local","others"];var XD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class ZD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Yy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=nu[0]){if(nu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nu.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=XD(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:KD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:QD});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const x=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Q(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Zn(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zn(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Yr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zn(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zn(t.userId);try{const{data:r,error:n}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zn(t.userId),Zn(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}function bm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function eN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const es={debug:!!(globalThis&&Hy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tN extends zy{}async function rN(e,t,r){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),es.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{es.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw es.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tN(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(es.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}eN();const nN={url:hD,storageKey:pD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wm(e,t,r){return await r()}const ts={};class uo{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uo.nextInstanceID,uo.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},nN),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ZD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Yy(s.fetch),this.lock=s.lock||wm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:At()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=rN:this.lock=wm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Hy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=bm(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ts[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ts[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$y}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=TD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),At()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),wD(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new Uy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:fr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Xn(this.storage,this.storageKey)),i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:fr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:fr})}else throw new sa("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xm})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xm})}else throw new sa("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new na}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,u,d,f,h,p;let m,x;if("message"in t)m=t.message,x=t.signature;else{const{chain:b,wallet:y,statement:g,options:v}=t;let _;if(At())if(typeof y=="object")_=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),g?{statement:g}:null));let D;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")D=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)D=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)m=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),x=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:b,error:y}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ED(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:fr});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new na}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(Q(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await yn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:fr});if(await Ar(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new na}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:fr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new na}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xn(this.storage,this.storageKey));const{error:f}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new sa("You must provide either an email or phone number.")}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:fr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xn(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:qD})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $r;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await X(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await X(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new sa("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Zc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await yn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ru()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yr}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $r}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Yr})})}catch(r){if(Q(r))return bD(r)&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $r;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Xn(this.storage,this.storageKey));const{data:u,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $r;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=tu(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $r;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!At())throw new ia("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ia(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ia("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fm("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new ia("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=h-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,d);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(Q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await yn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(xD(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=jD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Xn(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return At()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Q(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ID(async s=>(s>0&&await RD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:fr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&eu(i)&&Date.now()+o-n<ss})}catch(n){if(this._debug(r,"error",n),Q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),At()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await yn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await is(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ru()}else if(s&&!s.user&&!s.user){const o=await yn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ar(this.storage,this.storageKey+"-user"),await is(this.storage,this.storageKey,s)):s.user=ru()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Zc;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Zc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),eu(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ic;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new $r;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return eu(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await is(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=vm(s);await is(this.storage,this.storageKey,i)}else{const s=vm(r);await is(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ar(this.storage,this.storageKey),await Ar(this.storage,this.storageKey+"-code-verifier"),await Ar(this.storage,this.storageKey+"-user"),this.userStorage&&await Ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&At()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ss);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ss}ms, refresh threshold is ${Od} ticks`),s<=Od&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await X(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=tu(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+vD>s)return n;const{data:i,error:o}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=tu(n);r!=null&&r.allowExpired||UD(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=WD(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,CD(`${a}.${l}`)))throw new Md("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}uo.nextInstanceID=0;const sN=uo;class iN extends sN{constructor(t){super(t)}}var oN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class aN{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=dD(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:nD,realtime:iD,auth:Object.assign(Object.assign({},sD),{storageKey:u}),global:rD},f=fD(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=cD(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Dk(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Zk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new tk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return oN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iN({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Bk(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lN=(e,t,r)=>new aN(e,t,r);function cN(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uN="https://rqbvcvwbziilnycqtmnc.supabase.co",dN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxYnZjdndiemlpbG55Y3F0bW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyMzk5ODIsImV4cCI6MjA2NTgxNTk4Mn0.819LDXCnlu2dgCPw91oMbZIojeFom-UxqJn2hA5yjBM",V=lN(uN,dN),Vy=w.createContext(void 0);function fN(){const e=w.useContext(Vy);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function hN({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(null),[i,o]=w.useState(!0);w.useEffect(()=>{V.auth.getSession().then(({data:{session:h}})=>{s(h),r((h==null?void 0:h.user)??null),o(!1)});const{data:{subscription:f}}=V.auth.onAuthStateChange(async(h,p)=>{s(p),r((p==null?void 0:p.user)??null),o(!1)});return()=>f.unsubscribe()},[]);const d={user:t,session:n,loading:i,signIn:async(f,h)=>await V.auth.signInWithPassword({email:f,password:h}),signUp:async(f,h)=>await V.auth.signUp({email:f,password:h}),signOut:async()=>{await V.auth.signOut()}};return c.jsx(Vy.Provider,{value:d,children:e})}function pN({children:e}){return c.jsx(c.Fragment,{children:e})}function Qe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mN=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),_m=mN,su=()=>Math.random().toString(36).substring(7).split("").join("."),gN={INIT:`@@redux/INIT${su()}`,REPLACE:`@@redux/REPLACE${su()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${su()}`},Sm=gN;function vN(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Gy(e,t,r){if(typeof e!="function")throw new Error(Qe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qe(1));return r(Gy)(e,t)}let n=e,s=t,i=new Map,o=i,a=0,l=!1;function u(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function d(){if(l)throw new Error(Qe(3));return s}function f(b){if(typeof b!="function")throw new Error(Qe(4));if(l)throw new Error(Qe(5));let y=!0;u();const g=a++;return o.set(g,b),function(){if(y){if(l)throw new Error(Qe(6));y=!1,u(),o.delete(g),i=null}}}function h(b){if(!vN(b))throw new Error(Qe(7));if(typeof b.type>"u")throw new Error(Qe(8));if(typeof b.type!="string")throw new Error(Qe(17));if(l)throw new Error(Qe(9));try{l=!0,s=n(s,b)}finally{l=!1}return(i=o).forEach(g=>{g()}),b}function p(b){if(typeof b!="function")throw new Error(Qe(10));n=b,h({type:Sm.REPLACE})}function m(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Qe(11));function g(){const _=y;_.next&&_.next(d())}return g(),{unsubscribe:b(g)}},[_m](){return this}}}return h({type:Sm.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[_m]:m}}function km(e,t){return function(...r){return t(e.apply(this,r))}}function Dm(e,t){if(typeof e=="function")return km(e,t);if(typeof e!="object"||e===null)throw new Error(Qe(16));const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=km(s,t))}return r}function qy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function yN(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Qe(15))};const o={getState:s.getState,dispatch:(l,...u)=>i(l,...u)},a=e.map(l=>l(o));return i=qy(...a)(s.dispatch),{...s,dispatch:i}}}var xN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=w;function bN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wN=typeof Object.is=="function"?Object.is:bN,_N=To.useSyncExternalStore,SN=To.useRef,kN=To.useEffect,DN=To.useMemo,NN=To.useDebugValue;xN.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=SN(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=DN(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return f=m}return f=p}if(m=f,wN(d,p))return m;var x=n(p);return s!==void 0&&s(m,x)?(d=p,m):(d=p,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,s]);var a=_N(e,i[0],i[1]);return kN(function(){o.hasValue=!0,o.value=a},[a]),NN(a),a};var CN=w.version.startsWith("19"),EN=Symbol.for(CN?"react.transitional.element":"react.element"),PN=Symbol.for("react.portal"),jN=Symbol.for("react.fragment"),TN=Symbol.for("react.strict_mode"),ON=Symbol.for("react.profiler"),RN=Symbol.for("react.consumer"),IN=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),MN=Symbol.for("react.suspense"),LN=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),AN=Symbol.for("react.lazy"),FN=Ky,$N=oh;function BN(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case EN:switch(e=e.type,e){case jN:case ON:case TN:case MN:case LN:return e;default:switch(e=e&&e.$$typeof,e){case IN:case Ky:case AN:case oh:return e;case RN:return e;default:return t}}case PN:return t}}}function UN(e){return BN(e)===oh}function WN(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let a=!1,l,u,d,f,h;function p(g,v){return l=g,u=v,d=e(l,u),f=t(n,u),h=r(d,f,u),a=!0,h}function m(){return d=e(l,u),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function x(){return e.dependsOnOwnProps&&(d=e(l,u)),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function b(){const g=e(l,u),v=!o(g,d);return d=g,v&&(h=r(d,f,u)),h}function y(g,v){const _=!i(v,u),S=!s(g,l,v,u);return l=g,u=v,_&&S?m():_?x():S?b():h}return function(v,_){return a?y(v,_):p(v,_)}}function HN(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...s}){const i=t(e,s),o=r(e,s),a=n(e,s);return WN(i,o,a,e,s)}function YN(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...i)=>t(s(...i)))}return r}function Ld(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function Nm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Qy(e,t){return function(n,{displayName:s}){const i=function(a,l){return i.dependsOnOwnProps?i.mapToProps(a,l):i.mapToProps(a,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(a,l){i.mapToProps=e,i.dependsOnOwnProps=Nm(e);let u=i(a,l);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=Nm(u),u=i(a,l)),u},i}}function ah(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function zN(e){return e&&typeof e=="object"?Ld(t=>YN(e,t)):e?typeof e=="function"?Qy(e):ah(e,"mapDispatchToProps"):Ld(t=>({dispatch:t}))}function VN(e){return e?typeof e=="function"?Qy(e):ah(e,"mapStateToProps"):Ld(()=>({}))}function GN(e,t,r){return{...r,...e,...t}}function qN(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let i=!1,o;return function(l,u,d){const f=e(l,u,d);return i?s(f,o)||(o=f):(i=!0,o=f),o}}}function KN(e){return e?typeof e=="function"?qN(e):ah(e,"mergeProps"):()=>GN}function QN(e){e()}function JN(){let e=null,t=null;return{clear(){e=null,t=null},notify(){QN(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Cm={notify(){},get:()=>[]};function Jy(e,t){let r,n=Cm,s=0,i=!1;function o(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function u(){return i}function d(){s++,r||(r=t?t.addNestedSub(l):e.subscribe(l),n=JN())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Cm)}function h(){i||(i=!0,d())}function p(){i&&(i=!1,f())}const m={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return m}var XN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZN=XN(),eC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tC=eC(),rC=()=>ZN||tC?w.useLayoutEffect:w.useEffect,fl=rC();function Em(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function iu(e,t){if(Em(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Em(e[r[s]],t[r[s]]))return!1;return!0}var nC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oC={[FN]:iC,[$N]:Xy};function Pm(e){return UN(e)?Xy:oC[e.$$typeof]||nC}var aC=Object.defineProperty,lC=Object.getOwnPropertyNames,jm=Object.getOwnPropertySymbols,cC=Object.getOwnPropertyDescriptor,uC=Object.getPrototypeOf,Tm=Object.prototype;function Ad(e,t){if(typeof t!="string"){if(Tm){const i=uC(t);i&&i!==Tm&&Ad(e,i)}let r=lC(t);jm&&(r=r.concat(jm(t)));const n=Pm(e),s=Pm(t);for(let i=0;i<r.length;++i){const o=r[i];if(!sC[o]&&!(s&&s[o])&&!(n&&n[o])){const a=cC(t,o);try{aC(e,o,a)}catch{}}}}return e}var ou=Symbol.for("react-redux-context"),au=typeof globalThis<"u"?globalThis:{};function dC(){if(!w.createContext)return{};const e=au[ou]??(au[ou]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Zy=dC(),fC=[null,null];function hC(e,t,r){fl(()=>e(...t),r)}function pC(e,t,r,n,s,i){e.current=n,r.current=!1,s.current&&(s.current=null,i())}function mC(e,t,r,n,s,i,o,a,l,u,d){if(!e)return()=>{};let f=!1,h=null;const p=()=>{if(f||!a.current)return;const x=t.getState();let b,y;try{b=n(x,s.current)}catch(g){y=g,h=g}y||(h=null),b===i.current?o.current||u():(i.current=b,l.current=b,o.current=!0,d())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function gC(e,t){return e===t}function vC(e,t,r,{pure:n,areStatesEqual:s=gC,areOwnPropsEqual:i=iu,areStatePropsEqual:o=iu,areMergedPropsEqual:a=iu,forwardRef:l=!1,context:u=Zy}={}){const d=u,f=VN(e),h=zN(t),p=KN(r),m=!!e;return b=>{const y=b.displayName||b.name||"Component",g=`Connect(${y})`,v={shouldHandleStateChanges:m,displayName:g,wrappedComponentName:y,WrappedComponent:b,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:a};function _(D){const[C,E,P]=w.useMemo(()=>{const{reactReduxForwardedRef:wt,...oi}=D;return[D.context,wt,oi]},[D]),I=w.useMemo(()=>{let wt=d;return C!=null&&C.Consumer,wt},[C,d]),F=w.useContext(I),O=!!D.store&&!!D.store.getState&&!!D.store.dispatch,A=!!F&&!!F.store,B=O?D.store:F.store,$=A?F.getServerState:B.getState,z=w.useMemo(()=>HN(B.dispatch,v),[B]),[N,T]=w.useMemo(()=>{if(!m)return fC;const wt=Jy(B,O?void 0:F.subscription),oi=wt.notifyNestedSubs.bind(wt);return[wt,oi]},[B,O,F]),M=w.useMemo(()=>O?F:{...F,subscription:N},[O,F,N]),H=w.useRef(void 0),K=w.useRef(P),Ne=w.useRef(void 0),Te=w.useRef(!1),Jt=w.useRef(!1),nt=w.useRef(void 0);fl(()=>(Jt.current=!0,()=>{Jt.current=!1}),[]);const Ce=w.useMemo(()=>()=>Ne.current&&P===K.current?Ne.current:z(B.getState(),P),[B,P]),gn=w.useMemo(()=>oi=>N?mC(m,B,N,z,K,H,Te,Jt,Ne,T,oi):()=>{},[N]);hC(pC,[K,H,Te,P,Ne,T]);let Fo;try{Fo=w.useSyncExternalStore(gn,Ce,$?()=>z($(),P):Ce)}catch(wt){throw nt.current&&(wt.message+=`
The error may be correlated with this previous error:
${nt.current.stack}

`),wt}fl(()=>{nt.current=void 0,Ne.current=void 0,H.current=Fo});const _c=w.useMemo(()=>w.createElement(b,{...Fo,ref:E}),[E,b,Fo]);return w.useMemo(()=>m?w.createElement(I.Provider,{value:M},_c):_c,[I,_c,M])}const k=w.memo(_);if(k.WrappedComponent=b,k.displayName=_.displayName=g,l){const C=w.forwardRef(function(P,I){return w.createElement(k,{...P,reactReduxForwardedRef:I})});return C.displayName=g,C.WrappedComponent=b,Ad(C,b)}return Ad(k,b)}}var ex=vC;function yC(e){const{children:t,context:r,serverState:n,store:s}=e,i=w.useMemo(()=>{const l=Jy(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=w.useMemo(()=>s.getState(),[s]);fl(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||Zy;return w.createElement(a.Provider,{value:i},t)}var xC=yC,bC=!0,lu="Invariant failed";function wC(e,t){if(!e){if(bC)throw new Error(lu);var r=typeof t=="function"?t():t,n=r?"".concat(lu,": ").concat(r):lu;throw new Error(n)}}var Wt=function(t){var r=t.top,n=t.right,s=t.bottom,i=t.left,o=n-i,a=s-r,l={top:r,right:n,bottom:s,left:i,width:o,height:a,x:i,y:r,center:{x:(n+i)/2,y:(s+r)/2}};return l},lh=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Om=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},_C=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},cu={top:0,right:0,bottom:0,left:0},ch=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?cu:n,i=t.border,o=i===void 0?cu:i,a=t.padding,l=a===void 0?cu:a,u=Wt(lh(r,s)),d=Wt(Om(r,o)),f=Wt(Om(d,l));return{marginBox:u,borderBox:Wt(r),paddingBox:d,contentBox:f,margin:s,border:o,padding:l}},_t=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&wC(!1),s},SC=function(){return{x:window.pageXOffset,y:window.pageYOffset}},hl=function(t,r){var n=t.borderBox,s=t.border,i=t.margin,o=t.padding,a=_C(n,r);return ch({borderBox:a,border:s,margin:i,padding:o})},pl=function(t,r){return r===void 0&&(r=SC()),hl(t,r)},tx=function(t,r){var n={top:_t(r.marginTop),right:_t(r.marginRight),bottom:_t(r.marginBottom),left:_t(r.marginLeft)},s={top:_t(r.paddingTop),right:_t(r.paddingRight),bottom:_t(r.paddingBottom),left:_t(r.paddingLeft)},i={top:_t(r.borderTopWidth),right:_t(r.borderRightWidth),bottom:_t(r.borderBottomWidth),left:_t(r.borderLeftWidth)};return ch({borderBox:t,margin:n,padding:s,border:i})},rx=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return tx(r,n)},kC=function(t){var r=[],n=null,s=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const fo=kC;function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ml.apply(null,arguments)}function nx(e,t){}nx.bind(null,"warn");nx.bind(null,"error");function rn(){}function DC(e,t){return{...e,...t}}function Pt(e,t,r){const n=t.map(s=>{const i=DC(r,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){n.forEach(i=>{i()})}}const NC="Invariant failed";class gl extends Error{}gl.prototype.toString=function(){return this.message};function L(e,t){throw new gl(NC)}class CC extends j.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=rn,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof gl&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Pt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof gl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const EC=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,vl=e=>e+1,PC=e=>`
  You have lifted an item in position ${vl(e.source.index)}
`,sx=(e,t)=>{const r=e.droppableId===t.droppableId,n=vl(e.index),s=vl(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},ix=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,jC=e=>{const t=e.destination;if(t)return sx(e.source,t);const r=e.combine;return r?ix(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Rm=e=>`
  The item has returned to its starting position
  of ${vl(e.index)}
`,TC=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Rm(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${sx(e.source,t)}
    `:r?`
      You have dropped the item.
      ${ix(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Rm(e.source)}
  `},Oa={dragHandleUsageInstructions:EC,onDragStart:PC,onDragUpdate:jC,onDragEnd:TC};function OC(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function ox(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!OC(e[r],t[r]))return!1;return!0}function ee(e,t){const r=w.useState(()=>({inputs:t,result:e()}))[0],n=w.useRef(!0),s=w.useRef(r),o=n.current||!!(t&&s.current.inputs&&ox(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{n.current=!1,s.current=o},[o]),o.result}function q(e,t){return ee(()=>e,t)}const Le={x:0,y:0},$e=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ht=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),nn=(e,t)=>e.x===t.x&&e.y===t.y,ri=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Wn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},ho=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Im=(e,t)=>Math.min(...t.map(r=>ho(e,r))),ax=e=>t=>({x:e(t.x),y:e(t.y)});var RC=(e,t)=>{const r=Wt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Oo=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Mm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],IC={top:0,right:0,bottom:0,left:0},MC=(e,t)=>t?Oo(e,t.scroll.diff.displacement):e,LC=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,AC=(e,t)=>t&&t.shouldClipSubject?RC(t.pageMarginBox,e):Wt(e);var As=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=MC(e.marginBox,n),i=LC(s,r,t),o=AC(i,n);return{page:e,withPlaceholder:t,active:o}},uh=(e,t)=>{e.frame||L();const r=e.frame,n=ht(t,r.scroll.initial),s=ri(n),i={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},o=As({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function Me(e,t=ox){let r=null;function n(...s){if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const i=e.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return n.clear=function(){r=null},n}const lx=Me(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),cx=Me(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),oc=Me(e=>Object.values(e)),FC=Me(e=>Object.values(e));var ni=Me((e,t)=>FC(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function dh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ac(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var lc=Me((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),$C=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!dh(s))return null;function o(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...s,at:m}}const a=s.displaced.all,l=a.length?a[0]:null;if(e)return l?o(l):null;const u=lc(t,n);if(!l){if(!u.length)return null;const p=u[u.length-1];return o(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===l);d===-1&&L();const f=d-1;if(f<0)return null;const h=u[f];return o(h.descriptor.id)},si=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const ux={point:Le,value:0},po={invisible:{},visible:{},all:[]},BC={displaced:po,displacedBy:ux,at:null};var Tt=(e,t)=>r=>e<=r&&r<=t,dx=e=>{const t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right);if(i&&o)return!0;const l=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return l&&u?!0:l&&o||u&&i}},UC=e=>{const t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const fh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var WC=e=>t=>{const r=Tt(t.top,t.bottom),n=Tt(t.left,t.right);return s=>e===fh?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const HC=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:Le;return Oo(e,r)},YC=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,zC=(e,t,r)=>r(t)(e),hh=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const i=n?HC(e,t):e;return YC(i,t,s)&&zC(i,r,s)},VC=e=>hh({...e,isVisibleThroughFrameFn:dx}),hx=e=>hh({...e,isVisibleThroughFrameFn:UC}),GC=e=>hh({...e,isVisibleThroughFrameFn:WC(e.destination.axis)}),qC=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function KC(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Wt(lh(r,n))}function mo({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:i}){return e.reduce(function(a,l){const u=KC(l,r),d=l.descriptor.id;if(a.all.push(d),!VC({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=qC(d,i,s),p={draggableId:d,shouldAnimate:h};return a.visible[d]=p,a},{all:[],visible:{},invisible:{}})}function QC(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Lm({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=QC(e,{inHomeList:t});return{displaced:po,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function yl({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:i,index:o,forceShouldAnimate:a}){const l=si(e,r);if(o==null)return Lm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const u=t.find(m=>m.descriptor.index===o);if(!u)return Lm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const d=lc(e,t),f=t.indexOf(u),h=d.slice(f);return{displaced:mo({afterDragging:h,destination:r,displacedBy:s,last:i,viewport:n.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function cn(e,t){return!!t.effected[e]}var JC=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=n.draggableId,a=r[i].descriptor.index;return cn(i,s)?e?a:a-1:e?a+1:a},XC=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,i=e?s+1:s-1,o=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=t?a:a+1;return i<o||i>l?null:i},ZC=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:i,previousImpact:o,viewport:a,afterCritical:l})=>{const u=o.at;if(u||L(),u.type==="REORDER"){const f=XC({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return f==null?null:yl({draggable:r,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:f})}const d=JC({isMovingForward:e,destination:s,displaced:o.displaced,draggables:n,combine:u.combine,afterCritical:l});return d==null?null:yl({draggable:r,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:d})},eE=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return cn(r,t)?s?Le:ri(n.point):s?n.point:Le},tE=({afterCritical:e,impact:t,draggables:r})=>{const n=ac(t);n||L();const s=n.draggableId,i=r[s].page.borderBox.center,o=eE({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return $e(i,o)};const px=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,rE=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,ph=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Am=({axis:e,moveRelativeTo:t,isMoving:r})=>Wn(e.line,t.marginBox[e.end]+px(e,r),ph(e,t.marginBox,r)),Fm=({axis:e,moveRelativeTo:t,isMoving:r})=>Wn(e.line,t.marginBox[e.start]-rE(e,r),ph(e,t.marginBox,r)),nE=({axis:e,moveInto:t,isMoving:r})=>Wn(e.line,t.contentBox[e.start]+px(e,r),ph(e,t.contentBox,r));var sE=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const i=ni(n.descriptor.id,r),o=t.page,a=n.axis;if(!i.length)return nE({axis:a,moveInto:n.page,isMoving:o});const{displaced:l,displacedBy:u}=e,d=l.all[0];if(d){const h=r[d];if(cn(d,s))return Fm({axis:a,moveRelativeTo:h.page,isMoving:o});const p=hl(h.page,u.point);return Fm({axis:a,moveRelativeTo:p,isMoving:o})}const f=i[i.length-1];if(f.descriptor.id===t.descriptor.id)return o.borderBox.center;if(cn(f.descriptor.id,s)){const h=hl(f.page,ri(s.displacedBy.point));return Am({axis:a,moveRelativeTo:h,isMoving:o})}return Am({axis:a,moveRelativeTo:f.page,isMoving:o})},Fd=(e,t)=>{const r=e.frame;return r?$e(t,r.scroll.diff.displacement):t};const iE=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const i=t.page.borderBox.center,o=e.at;return!r||!o?i:o.type==="REORDER"?sE({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):tE({impact:e,draggables:n,afterCritical:s})};var cc=e=>{const t=iE(e),r=e.droppable;return r?Fd(r,t):t},mx=(e,t)=>{const r=ht(t,e.scroll.initial),n=ri(r);return{frame:Wt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function $m(e,t){return e.map(r=>t[r])}function oE(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var aE=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const i=mx(t,$e(t.scroll.current,s)),o=r.frame?uh(r,$e(r.frame.scroll.current,s)):r,a=e.displaced,l=mo({afterDragging:$m(a.all,n),destination:r,displacedBy:e.displacedBy,viewport:i.frame,last:a,forceShouldAnimate:!1}),u=mo({afterDragging:$m(a.all,n),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),d={},f={},h=[a,l,u];return a.all.forEach(m=>{const x=oE(m,h);if(x){f[m]=x;return}d[m]=!0}),{...e,displaced:{all:a.all,invisible:d,visible:f}}},lE=(e,t)=>$e(e.scroll.diff.displacement,t),mh=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=lE(r,e),s=ht(n,t.page.borderBox.center);return $e(t.client.borderBox.center,s)},gx=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=ht(r,e.page.borderBox.center),l={target:Oo(e.page.borderBox,o),destination:t,withDroppableDisplacement:s,viewport:n};return i?GC(l):hx(l)},cE=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const u=ni(r.descriptor.id,n),d=si(t,r),f=$C({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||ZC({isMovingForward:e,isInHomeList:d,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:i,afterCritical:l});if(!f)return null;const h=cc({impact:f,draggable:t,droppable:r,draggables:n,afterCritical:l});if(gx({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:mh({pageBorderBoxCenter:h,draggable:t,viewport:i}),impact:f,scrollJumpRequest:null};const m=ht(h,o),x=aE({impact:f,viewport:i,destination:r,draggables:n,maxScrollChange:m});return{clientSelection:a,impact:x,scrollJumpRequest:m}};const Ke=e=>{const t=e.subject.active;return t||L(),t};var uE=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const i=r.subject.active;if(!i)return null;const o=r.axis,a=Tt(i[o.start],i[o.end]),l=oc(n).filter(d=>d!==r).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>dx(s.frame)(Ke(d))).filter(d=>{const f=Ke(d);return e?i[o.crossAxisEnd]<f[o.crossAxisEnd]:f[o.crossAxisStart]<i[o.crossAxisStart]}).filter(d=>{const f=Ke(d),h=Tt(f[o.start],f[o.end]);return a(f[o.start])||a(f[o.end])||h(i[o.start])||h(i[o.end])}).sort((d,f)=>{const h=Ke(d)[o.crossAxisStart],p=Ke(f)[o.crossAxisStart];return e?h-p:p-h}).filter((d,f,h)=>Ke(d)[o.crossAxisStart]===Ke(h[0])[o.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const u=l.filter(d=>Tt(Ke(d)[o.start],Ke(d)[o.end])(t[o.line]));return u.length===1?u[0]:u.length>1?u.sort((d,f)=>Ke(d)[o.start]-Ke(f)[o.start])[0]:l.sort((d,f)=>{const h=Im(t,Mm(Ke(d))),p=Im(t,Mm(Ke(f)));return h!==p?h-p:Ke(d)[o.start]-Ke(f)[o.start]})[0]};const Bm=(e,t)=>{const r=e.page.borderBox.center;return cn(e.descriptor.id,t)?ht(r,t.displacedBy.point):r},dE=(e,t)=>{const r=e.page.borderBox;return cn(e.descriptor.id,t)?Oo(r,ri(t.displacedBy.point)):r};var fE=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(o=>hx({target:dE(o,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const l=ho(e,Fd(r,Bm(o,s))),u=ho(e,Fd(r,Bm(a,s)));return l<u?-1:u<l?1:o.descriptor.index-a.descriptor.index})[0]||null,Ro=Me(function(t,r){const n=r[t.line];return{value:n,point:Wn(t.line,n)}});const hE=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Wn(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],l=ni(e.descriptor.id,r).reduce((u,d)=>u+d.client.marginBox[n.size],0)+t[n.line]-s;return l<=0?null:Wn(n.line,l)},vx=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),yx=(e,t,r)=>{const n=e.frame;si(t,e)&&L(),e.subject.withPlaceholder&&L();const s=Ro(e.axis,t.displaceBy).point,i=hE(e,s,r),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const d=As({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:d}}const a=i?$e(n.scroll.max,i):n.scroll.max,l=vx(n,a),u=As({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l});return{...e,subject:u,frame:l}},pE=e=>{const t=e.subject.withPlaceholder;t||L();const r=e.frame;if(!r){const o=As({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const n=t.oldFrameMaxScroll;n||L();const s=vx(r,n),i=As({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var mE=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:i,viewport:o,afterCritical:a})=>{if(!t){if(r.length)return null;const f={displaced:po,displacedBy:ux,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},h=cc({impact:f,draggable:n,droppable:i,draggables:s,afterCritical:a}),p=si(n,i)?i:yx(i,n,s);return gx({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const l=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const f=t.descriptor.index;return t.descriptor.id===n.descriptor.id||l?f:f+1})(),d=Ro(i.axis,n.displaceBy);return yl({draggable:n,insideDestination:r,destination:i,viewport:o,displacedBy:d,last:po,index:u})},gE=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:i,viewport:o,afterCritical:a})=>{const l=uE({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:o});if(!l)return null;const u=ni(l.descriptor.id,s),d=fE({pageBorderBoxCenter:t,viewport:o,destination:l,insideDestination:u,afterCritical:a}),f=mE({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:o,afterCritical:a});if(!f)return null;const h=cc({impact:f,draggable:r,droppable:l,draggables:s,afterCritical:a});return{clientSelection:mh({pageBorderBoxCenter:h,draggable:r,viewport:o}),impact:f,scrollJumpRequest:null}},mt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const vE=(e,t)=>{const r=mt(e);return r?t[r]:null};var yE=({state:e,type:t})=>{const r=vE(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],i=r||s,o=i.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!n)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:f,droppables:h}=e.dimensions;return a?cE({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):gE({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:f,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function kn(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function xx(e){const t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function xE(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function bE({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(i=>{const o=i.axis,a=Wn(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:ho(n,a)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function wE({pageBorderBox:e,draggable:t,droppables:r}){const n=oc(r).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!xE(e,i))return!1;if(xx(i)(e.center))return!0;const o=s.axis,a=i.center[o.crossAxisLine],l=e[o.crossAxisStart],u=e[o.crossAxisEnd],d=Tt(i[o.crossAxisStart],i[o.crossAxisEnd]),f=d(l),h=d(u);return!f&&!h?!0:f?l<a:u>a});return n.length?n.length===1?n[0].descriptor.id:bE({pageBorderBox:e,draggable:t,candidates:n}):null}const bx=(e,t)=>Wt(Oo(e,t));var _E=(e,t)=>{const r=e.frame;return r?bx(t,r.scroll.diff.value):t};function wx({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function SE({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var kE=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:i,afterCritical:o})=>{const a=r.axis,l=Ro(r.axis,t.displaceBy),u=l.value,d=e[a.start],f=e[a.end],p=lc(t,n).find(x=>{const b=x.descriptor.id,y=x.page.borderBox.center[a.line],g=cn(b,o),v=wx({displaced:s,id:b});return g?v?f<=y:d<y-u:v?f<=y+u:d<y})||null,m=SE({draggable:t,closest:p,inHomeList:si(t,r)});return yl({draggable:t,insideDestination:n,destination:r,viewport:i,last:s,displacedBy:l,index:m})};const DE=4;var NE=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:i})=>{if(!n.isCombineEnabled)return null;const o=n.axis,a=Ro(n.axis,e.displaceBy),l=a.value,u=t[o.start],d=t[o.end],h=lc(e,s).find(m=>{const x=m.descriptor.id,b=m.page.borderBox,g=b[o.size]/DE,v=cn(x,i),_=wx({displaced:r.displaced,id:x});return v?_?d>b[o.start]+g&&d<b[o.end]-g:u>b[o.start]-l+g&&u<b[o.end]-l-g:_?d>b[o.start]+l+g&&d<b[o.end]+l-g:u>b[o.start]+g&&u<b[o.end]-g});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},_x=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:i,afterCritical:o})=>{const a=bx(t.page.borderBox,e),l=wE({pageBorderBox:a,draggable:t,droppables:n});if(!l)return BC;const u=n[l],d=ni(u.descriptor.id,r),f=_E(u,a);return NE({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:o})||kE({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:i,afterCritical:o})},gh=(e,t)=>({...e,[t.descriptor.id]:t});const CE=({previousImpact:e,impact:t,droppables:r})=>{const n=mt(e),s=mt(t);if(!n||n===s)return r;const i=r[n];if(!i.subject.withPlaceholder)return r;const o=pE(i);return gh(r,o)};var EE=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const i=CE({previousImpact:n,impact:s,droppables:r}),o=mt(s);if(!o)return i;const a=r[o];if(si(e,a)||a.subject.withPlaceholder)return i;const l=yx(a,e,t);return gh(i,l)},Hi=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:i})=>{const o=n||e.viewport,a=r||e.dimensions,l=t||e.current.client.selection,u=ht(l,e.initial.client.selection),d={offset:u,selection:l,borderBoxCenter:$e(e.initial.client.borderBoxCenter,u)},f={selection:$e(d.selection,o.scroll.current),borderBoxCenter:$e(d.borderBoxCenter,o.scroll.current),offset:$e(d.offset,o.scroll.diff.value)},h={client:d,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:h};const p=a.draggables[e.critical.draggable.id],m=s||_x({pageOffset:f.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),x=EE({draggable:p,impact:m,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:h,dimensions:{draggables:a.draggables,droppables:x},impact:m,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function PE(e,t){return e.map(r=>t[r])}var Sx=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const i=e.displaced,o=PE(i.all,r),a=mo({afterDragging:o,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:a}},kx=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:i})=>{const o=cc({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i});return mh({pageBorderBoxCenter:o,draggable:t,viewport:s})},Dx=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&L();const n=e.impact,s=r||e.viewport,i=t||e.dimensions,{draggables:o,droppables:a}=i,l=o[e.critical.draggable.id],u=mt(n);u||L();const d=a[u],f=Sx({impact:n,viewport:s,destination:d,draggables:o}),h=kx({impact:f,draggable:l,droppable:d,draggables:o,viewport:s,afterCritical:e.afterCritical});return Hi({impact:f,clientSelection:h,state:e,dimensions:i,viewport:s})},jE=e=>({index:e.index,droppableId:e.droppableId}),Nx=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=Ro(t.axis,e.displaceBy),i=ni(t.descriptor.id,r),o=i.indexOf(e);o===-1&&L();const a=i.slice(o+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:mo({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:jE(e.descriptor)}},afterCritical:u}},TE=(e,t)=>({draggables:e.draggables,droppables:gh(e.droppables,t)}),OE=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=hl(e.client,t),s=pl(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},RE=e=>{const t=e.frame;return t||L(),t},IE=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,o=t[i],l=RE(o).scroll.diff.value,u=$e(n,l);return OE({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},ME=({state:e,published:t})=>{const r=t.modified.map(y=>{const g=e.dimensions.droppables[y.droppableId];return uh(g,y.scroll)}),n={...e.dimensions.droppables,...lx(r)},s=cx(IE({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(y=>{delete i[y]});const o={droppables:n,draggables:i},a=mt(e.impact),l=a?o.droppables[a]:null,u=o.draggables[e.critical.draggable.id],d=o.droppables[e.critical.droppable.id],{impact:f,afterCritical:h}=Nx({draggable:u,home:d,draggables:i,viewport:e.viewport}),p=l&&l.isCombineEnabled?e.impact:f,m=_x({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:e.viewport,afterCritical:h}),x={...e,phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:o,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const $d=e=>e.movementMode==="SNAP",uu=(e,t,r)=>{const n=TE(e.dimensions,t);return!$d(e)||r?Hi({state:e,dimensions:n}):Dx({state:e,dimensions:n})};function du(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Um={phase:"IDLE",completed:null,shouldFlush:!1};var LE=(e=Um,t)=>{if(t.type==="FLUSH")return{...Um,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&L();const{critical:r,clientSelection:n,viewport:s,dimensions:i,movementMode:o}=t.payload,a=i.draggables[r.draggable.id],l=i.droppables[r.droppable.id],u={selection:n,borderBoxCenter:a.client.borderBox.center,offset:Le},d={client:u,page:{selection:$e(u.selection,s.scroll.initial),borderBoxCenter:$e(u.selection,s.scroll.initial),offset:$e(u.selection,s.scroll.diff.value)}},f=oc(i.droppables).every(x=>!x.isFixedOnPage),{impact:h,afterCritical:p}=Nx({draggable:a,home:l,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:o,dimensions:i,initial:d,current:d,isWindowScrollAllowed:f,impact:h,afterCritical:p,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&L(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||L(),ME({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;kn(e)||L();const{client:r}=t.payload;return nn(r,e.current.client.selection)?e:Hi({state:e,clientSelection:r,impact:$d(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return du(e);kn(e)||L();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const i=uh(s,n);return uu(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;kn(e)||L();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||L(),s.isEnabled===n&&L();const i={...s,isEnabled:n};return uu(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;kn(e)||L();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||L(),s.isCombineEnabled===n&&L();const i={...s,isCombineEnabled:n};return uu(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;kn(e)||L(),e.isWindowScrollAllowed||L();const r=t.payload.newScroll;if(nn(e.viewport.scroll.current,r))return du(e);const n=mx(e.viewport,r);return $d(e)?Dx({state:e,viewport:n}):Hi({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!kn(e))return e;const r=t.payload.maxScroll;if(nn(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&L();const r=yE({state:e,type:t.type});return r?Hi({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&L(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||L(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function oe(e,t){return e instanceof Object&&"type"in e&&e.type===t}const AE=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),FE=e=>({type:"LIFT",payload:e}),$E=e=>({type:"INITIAL_PUBLISH",payload:e}),BE=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),UE=()=>({type:"COLLECTION_STARTING",payload:null}),WE=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),HE=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),YE=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Cx=e=>({type:"MOVE",payload:e}),zE=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),VE=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),GE=()=>({type:"MOVE_UP",payload:null}),qE=()=>({type:"MOVE_DOWN",payload:null}),KE=()=>({type:"MOVE_RIGHT",payload:null}),QE=()=>({type:"MOVE_LEFT",payload:null}),vh=()=>({type:"FLUSH",payload:null}),JE=e=>({type:"DROP_ANIMATE",payload:e}),yh=e=>({type:"DROP_COMPLETE",payload:e}),Ex=e=>({type:"DROP",payload:e}),XE=e=>({type:"DROP_PENDING",payload:e}),Px=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ZE=e=>({getState:t,dispatch:r})=>n=>s=>{if(!oe(s,"LIFT")){n(s);return}const{id:i,clientSelection:o,movementMode:a}=s.payload,l=t();l.phase==="DROP_ANIMATING"&&r(yh({completed:l.completed})),t().phase!=="IDLE"&&L(),r(vh()),r(AE({draggableId:i,movementMode:a}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:h,viewport:p}=e.startPublishing(d);r($E({critical:f,dimensions:h,clientSelection:o,movementMode:a,viewport:p}))},eP=e=>()=>t=>r=>{oe(r,"INITIAL_PUBLISH")&&e.dragging(),oe(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(oe(r,"FLUSH")||oe(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const xh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},go={opacity:{drop:0,combining:.7},scale:{drop:.75}},jx={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},xn=`${jx.outOfTheWay}s ${xh.outOfTheWay}`,Yi={fluid:`opacity ${xn}`,snap:`transform ${xn}, opacity ${xn}`,drop:e=>{const t=`${e}s ${xh.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${xn}`,placeholder:`height ${xn}, width ${xn}, margin ${xn}`},Wm=e=>nn(e,Le)?void 0:`translate(${e.x}px, ${e.y}px)`,Bd={moveTo:Wm,drop:(e,t)=>{const r=Wm(e);if(r)return t?`${r} scale(${go.scale.drop})`:r}},{minDropTime:Ud,maxDropTime:Tx}=jx,tP=Tx-Ud,Hm=1500,rP=.6;var nP=({current:e,destination:t,reason:r})=>{const n=ho(e,t);if(n<=0)return Ud;if(n>=Hm)return Tx;const s=n/Hm,i=Ud+tP*s,o=r==="CANCEL"?i*rP:i;return Number(o.toFixed(2))},sP=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:i,droppables:o}=r,a=mt(e),l=a?o[a]:null,u=o[t.descriptor.droppableId],d=kx({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:l||u,viewport:n});return ht(d,t.client.borderBox.center)},iP=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:i})=>!r.at||t!=="DROP"?{impact:Sx({draggables:e,impact:i,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:po},didDropInsideDroppable:!0};const oP=({getState:e,dispatch:t})=>r=>n=>{if(!oe(n,"DROP")){r(n);return}const s=e(),i=n.payload.reason;if(s.phase==="COLLECTING"){t(XE({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&L(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||L();const a=s.critical,l=s.dimensions,u=l.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=iP({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f?dh(d):null,p=f?ac(d):null,m={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:m,reason:i,mode:s.movementMode,destination:h,combine:p},b=sP({impact:d,draggable:u,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:d};if(!(!nn(s.current.client.offset,b)||!!x.combine)){t(yh({completed:y}));return}const v=nP({current:s.current.client.offset,destination:b,reason:i});t(JE({newHomeClientOffset:b,dropDuration:v,completed:y}))};var Ox=()=>({x:window.pageXOffset,y:window.pageYOffset});function aP(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function lP({onWindowScroll:e}){function t(){e(Ox())}const r=fo(t),n=aP(r);let s=rn;function i(){return s!==rn}function o(){i()&&L(),s=Pt(window,[n])}function a(){i()||L(),r.cancel(),s(),s=rn}return{start:o,stop:a,isActive:i}}const cP=e=>oe(e,"DROP_COMPLETE")||oe(e,"DROP_ANIMATE")||oe(e,"FLUSH"),uP=e=>{const t=lP({onWindowScroll:r=>{e.dispatch(zE({newScroll:r}))}});return r=>n=>{!t.isActive()&&oe(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&cP(n)&&t.stop(),r(n)}};var dP=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=i=>{t||r||(t=!0,e(i),clearTimeout(n))};return s.wasCalled=()=>t,s},fP=()=>{const e=[],t=s=>{const i=e.findIndex(a=>a.timerId===s);i===-1&&L();const[o]=e.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:s};e.push(o)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const hP=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,pP=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,mP=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},vi=(e,t)=>{t()},oa=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function fu(e,t,r,n){if(!e){r(n(t));return}const s=dP(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var gP=(e,t)=>{const r=fP();let n=null;const s=(f,h)=>{n&&L(),vi("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:h})})},i=(f,h)=>{n&&L(),vi("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(oa(f,h))})},o=(f,h)=>{n&&L();const p=oa(f,h);n={mode:h,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{vi("onDragStart",()=>fu(e().onDragStart,p,t,Oa.onDragStart))})},a=(f,h)=>{const p=dh(h),m=ac(h);n||L();const x=!mP(f,n.lastCritical);x&&(n.lastCritical=f);const b=!hP(n.lastLocation,p);b&&(n.lastLocation=p);const y=!pP(n.lastCombine,m);if(y&&(n.lastCombine=m),!x&&!b&&!y)return;const g={...oa(f,n.mode),combine:m,destination:p};r.add(()=>{vi("onDragUpdate",()=>fu(e().onDragUpdate,g,t,Oa.onDragUpdate))})},l=()=>{n||L(),r.flush()},u=f=>{n||L(),n=null,vi("onDragEnd",()=>fu(e().onDragEnd,f,t,Oa.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:a,flush:l,drop:u,abort:()=>{if(!n)return;const f={...oa(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(f)}}},vP=(e,t)=>{const r=gP(e,t);return n=>s=>i=>{if(oe(i,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(oe(i,"INITIAL_PUBLISH")){const a=i.payload.critical;r.beforeStart(a,i.payload.movementMode),s(i),r.start(a,i.payload.movementMode);return}if(oe(i,"DROP_COMPLETE")){const a=i.payload.completed.result;r.flush(),s(i),r.drop(a);return}if(s(i),oe(i,"FLUSH")){r.abort();return}const o=n.getState();o.phase==="DRAGGING"&&r.update(o.critical,o.impact)}};const yP=e=>t=>r=>{if(!oe(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&L(),e.dispatch(yh({completed:n.completed}))},xP=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>i=>{if((oe(i,"FLUSH")||oe(i,"DROP_COMPLETE")||oe(i,"DROP_ANIMATION_FINISHED"))&&n(),s(i),!oe(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Px())}};r=requestAnimationFrame(()=>{r=null,t=Pt(window,[o])})}};var bP=e=>()=>t=>r=>{(oe(r,"DROP_COMPLETE")||oe(r,"FLUSH")||oe(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},wP=e=>{let t=!1;return()=>r=>n=>{if(oe(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(oe(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(oe(n,"DROP_COMPLETE")){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const _P=e=>oe(e,"DROP_COMPLETE")||oe(e,"DROP_ANIMATE")||oe(e,"FLUSH");var SP=e=>t=>r=>n=>{if(_P(n)){e.stop(),r(n);return}if(oe(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();s.phase!=="DRAGGING"&&L(),e.start(s);return}r(n),e.scroll(t.getState())};const kP=e=>t=>r=>{if(t(r),!oe(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Ex({reason:n.reason})))},DP=qy;var NP=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:i})=>Gy(LE,DP(yN(eP(r),bP(e),ZE(e),oP,yP,xP,kP,SP(i),uP,wP(t),vP(n,s))));const hu=()=>({additions:{},removals:{},modified:{}});function CP({registry:e,callbacks:t}){let r=hu(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:u,modified:d}=r,f=Object.keys(l).map(m=>e.draggable.getById(m).getDimension(Le)).sort((m,x)=>m.descriptor.index-x.descriptor.index),h=Object.keys(d).map(m=>{const b=e.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:b}}),p={additions:f,removals:Object.keys(u),modified:h};r=hu(),t.publish(p)}))};return{add:l=>{const u=l.descriptor.id;r.additions[u]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:l=>{const u=l.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=hu())}}}var Rx=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=ht({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Ix=()=>{const e=document.documentElement;return e||L(),e},Mx=()=>{const e=Ix();return Rx({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},EP=()=>{const e=Ox(),t=Mx(),r=e.y,n=e.x,s=Ix(),i=s.clientWidth,o=s.clientHeight,a=n+i,l=r+o;return{frame:Wt({top:r,left:n,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:Le,displacement:Le}}}},PP=({critical:e,scrollOptions:t,registry:r})=>{const n=EP(),s=n.scroll.current,i=e.droppable,o=r.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),a=r.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:cx(a),droppables:lx(o)},critical:e,viewport:n}};function Ym(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var jP=(e,t)=>{let r=null;const n=CP({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,p)=>{e.droppable.exists(h)||L(),r&&t.updateDroppableIsEnabled({id:h,isEnabled:p})},i=(h,p)=>{r&&(e.droppable.exists(h)||L(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},o=(h,p)=>{r&&(e.droppable.exists(h)||L(),t.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&e.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||L();const p=r.critical.draggable;h.type==="ADDITION"&&Ym(e,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Ym(e,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:a,updateDroppableScroll:o,startPublishing:h=>{r&&L();const p=e.draggable.getById(h.draggableId),m=e.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:m.descriptor},b=e.subscribe(u);return r={critical:x,unsubscribe:b},PP({critical:x,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:l}},Lx=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",TP=e=>{window.scrollBy(e.x,e.y)};const OP=Me(e=>oc(e).filter(t=>!(!t.isEnabled||!t.frame))),RP=(e,t)=>OP(t).find(n=>(n.frame||L(),xx(n.frame.pageMarginBox)(e)))||null;var IP=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return RP(e,r)};const vo={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var MP=(e,t,r=()=>vo)=>{const n=r(),s=e[t.size]*n.startFromPercentage,i=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},Ax=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},bh=1,LP=(e,t,r=()=>vo)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return bh;const i=1-Ax({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=n.maxPixelScroll*n.ease(i);return Math.ceil(o)},AP=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,i=n.durationDampening.stopDampeningAt,o=t,a=i,u=Date.now()-o;if(u>=i)return e;if(u<s)return bh;const d=Ax({startOfRange:s,endOfRange:a,current:u}),f=e*n.ease(d);return Math.ceil(f)},zm=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const i=LP(e,t,s);return i===0?0:n?Math.max(AP(i,r,s),bh):i},Vm=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=MP(e,n,i);return t[n.end]<t[n.start]?zm({distanceToEdge:t[n.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*zm({distanceToEdge:t[n.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},FP=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const $P=ax(e=>e===0?0:e);var Fx=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},a=Vm({container:t,distanceToEdges:o,dragStartTime:e,axis:fh,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),l=Vm({container:t,distanceToEdges:o,dragStartTime:e,axis:fx,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),u=$P({x:l,y:a});if(nn(u,Le))return null;const d=FP({container:t,subject:r,proposedScroll:u});return d?nn(d,Le)?null:d:null};const BP=ax(e=>e===0?0:e>0?1:-1),wh=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=$e(t,n),i={x:e(s.x,r.x),y:e(s.y,r.y)};return nn(i,Le)?null:i}})(),$x=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=BP(r),i=wh({max:n,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},_h=(e,t)=>$x({current:e.scroll.current,max:e.scroll.max,change:t}),UP=(e,t)=>{if(!_h(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return wh({current:n,max:r,change:t})},Sh=(e,t)=>{const r=e.frame;return r?$x({current:r.scroll.current,max:r.scroll.max,change:t}):!1},WP=(e,t)=>{const r=e.frame;return!r||!Sh(e,t)?null:wh({current:r.scroll.current,max:r.scroll.max,change:t})};var HP=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=Fx({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&_h(e,o)?o:null},YP=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const a=Fx({dragStartTime:n,container:o.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&Sh(e,a)?a:null},Gm=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,h=HP({dragStartTime:t,viewport:f,subject:l,center:o,shouldUseTimeDampening:r,getAutoScrollerOptions:i});if(h){n(h);return}}const u=IP({center:o,destination:mt(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=YP({dragStartTime:t,droppable:u,subject:l,center:o,shouldUseTimeDampening:r,getAutoScrollerOptions:i});d&&s(u.descriptor.id,d)},zP=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>vo})=>{const n=fo(e),s=fo(t);let i=null;const o=u=>{i||L();const{shouldUseTimeDampening:d,dragStartTime:f}=i;Gm({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:r})};return{start:u=>{i&&L();const d=Date.now();let f=!1;const h=()=>{f=!0};Gm({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),i={dragStartTime:d,shouldUseTimeDampening:f},f&&o(u)},stop:()=>{i&&(n.cancel(),s.cancel(),i=null)},scroll:o}},VP=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(a,l)=>{const u=$e(a.current.client.selection,l);e({client:u})},s=(a,l)=>{if(!Sh(a,l))return l;const u=WP(a,l);if(!u)return t(a.descriptor.id,l),null;const d=ht(l,u);return t(a.descriptor.id,d),ht(l,d)},i=(a,l,u)=>{if(!a||!_h(l,u))return u;const d=UP(l,u);if(!d)return r(u),null;const f=ht(u,d);return r(f),ht(u,f)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const u=mt(a.impact);u||L();const d=s(a.dimensions.droppables[u],l);if(!d)return;const f=a.viewport,h=i(a.isWindowScrollAllowed,f,d);h&&n(a,h)}},GP=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=zP({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),i=VP({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&i(l)}},start:s.start,stop:s.stop}};const Fs="data-rfd",$s=(()=>{const e=`${Fs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Wd=(()=>{const e=`${Fs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),qP=(()=>{const e=`${Fs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),qm={contextId:`${Fs}-scroll-container-context-id`},KP=e=>t=>`[${t}="${e}"]`,yi=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),QP="pointer-events: none;";var JP=e=>{const t=KP(e),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t($s.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:QP,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Yi.outOfTheWay};
    `;return{selector:t(Wd.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(qP.contextId),styles:{always:"overflow-anchor: none;"}},o=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:yi(o,"always"),resting:yi(o,"resting"),dragging:yi(o,"dragging"),dropAnimating:yi(o,"dropAnimating"),userCancel:yi(o,"userCancel")}};const gt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,pu=()=>{const e=document.querySelector("head");return e||L(),e},Km=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function XP(e,t){const r=ee(()=>JP(e),[e]),n=w.useRef(null),s=w.useRef(null),i=q(Me(f=>{const h=s.current;h||L(),h.textContent=f}),[]),o=q(f=>{const h=n.current;h||L(),h.textContent=f},[]);gt(()=>{!n.current&&!s.current||L();const f=Km(t),h=Km(t);return n.current=f,s.current=h,f.setAttribute(`${Fs}-always`,e),h.setAttribute(`${Fs}-dynamic`,e),pu().appendChild(f),pu().appendChild(h),o(r.always),i(r.resting),()=>{const p=m=>{const x=m.current;x||L(),pu().removeChild(x),m.current=null};p(n),p(s)}},[t,o,i,r.always,r.resting,e]);const a=q(()=>i(r.dragging),[i,r.dragging]),l=q(f=>{if(f==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=q(()=>{s.current&&i(r.resting)},[i,r.resting]);return ee(()=>({dragging:a,dropping:l,resting:u}),[a,l,u])}function Bx(e,t){return Array.from(e.querySelectorAll(t))}var Ux=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function uc(e){return e instanceof Ux(e).HTMLElement}function ZP(e,t){const r=`[${$s.contextId}="${e}"]`,n=Bx(document,r);if(!n.length)return null;const s=n.find(i=>i.getAttribute($s.draggableId)===t);return!s||!uc(s)?null:s}function ej(e){const t=w.useRef({}),r=w.useRef(null),n=w.useRef(null),s=w.useRef(!1),i=q(function(h,p){const m={id:h,focus:p};return t.current[h]=m,function(){const b=t.current;b[h]!==m&&delete b[h]}},[]),o=q(function(h){const p=ZP(e,h);p&&p!==document.activeElement&&p.focus()},[e]),a=q(function(h,p){r.current===h&&(r.current=p)},[]),l=q(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&o(h)}))},[o]),u=q(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute($s.draggableId)===h&&(r.current=h)},[]);return gt(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),ee(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[i,u,l,a])}function tj(){const e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function n(f){t.length&&t.forEach(h=>h(f))}function s(f){return e.draggables[f]||null}function i(f){const h=s(f);return h||L(),h}const o={register:f=>{e.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:(f,h)=>{const p=e.draggables[h.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const h=f.descriptor.id,p=s(h);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[h],e.droppables[f.descriptor.droppableId]&&n({type:"REMOVAL",value:f}))},getById:i,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(e.draggables).filter(h=>h.descriptor.type===f)};function a(f){return e.droppables[f]||null}function l(f){const h=a(f);return h||L(),h}const u={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const h=a(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete e.droppables[f.descriptor.id]},getById:l,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.droppables).filter(h=>h.descriptor.type===f)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:r,clean:d}}function rj(){const e=ee(tj,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var kh=j.createContext(null),xl=()=>{const e=document.body;return e||L(),e};const nj={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},sj=e=>`rfd-announcement-${e}`;function ij(e){const t=ee(()=>sj(e),[e]),r=w.useRef(null);return w.useEffect(function(){const i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),ml(i.style,nj),xl().appendChild(i),function(){setTimeout(function(){const l=xl();l.contains(i)&&l.removeChild(i),i===r.current&&(r.current=null)})}},[t]),q(s=>{const i=r.current;if(i){i.textContent=s;return}},[])}const oj={separator:"::"};function Dh(e,t=oj){const r=j.useId();return ee(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function aj({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function lj({contextId:e,text:t}){const r=Dh("hidden-text",{separator:"-"}),n=ee(()=>aj({contextId:e,uniqueId:r}),[r,e]);return w.useEffect(function(){const i=document.createElement("div");return i.id=n,i.textContent=t,i.style.display="none",xl().appendChild(i),function(){const a=xl();a.contains(i)&&a.removeChild(i)}},[n,t]),n}var dc=j.createContext(null);function Wx(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function cj(){let e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&L();const a={abandon:o};return e=a,a}function s(){e||L(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:i}}function yo(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const uj=9,dj=13,Nh=27,Hx=32,fj=33,hj=34,pj=35,mj=36,gj=37,vj=38,yj=39,xj=40,bj={[dj]:!0,[uj]:!0};var Yx=e=>{bj[e.keyCode]&&e.preventDefault()};const fc=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),zx=0,Qm=5;function wj(e,t){return Math.abs(t.x-e.x)>=Qm||Math.abs(t.y-e.y)>=Qm}const Jm={type:"IDLE"};function _j({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:a}=s;if(i!==zx)return;const l={x:o,y:a},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(l);return}u.type!=="PENDING"&&L();const d=u.point;if(!wj(d,l))return;s.preventDefault();const f=u.actions.fluidLift(l);n({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:s=>{const i=r();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===Nh){s.preventDefault(),e();return}Yx(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=r();if(i.type==="IDLE"&&L(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:fc,fn:e}]}function Sj(e){const t=w.useRef(Jm),r=w.useRef(rn),n=ee(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==zx||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.tryGetLock(h,o,{sourceEvent:f});if(!p)return;f.preventDefault();const m={x:f.clientX,y:f.clientY};r.current(),u(p,m)}}),[e]),s=ee(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=e.findClosestDraggableId(d);if(!f)return;const h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&d.preventDefault())}}),[e]),i=q(function(){const f={passive:!1,capture:!0};r.current=Pt(window,[s,n],f)},[s,n]),o=q(()=>{t.current.type!=="IDLE"&&(t.current=Jm,r.current(),i())},[i]),a=q(()=>{const d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),l=q(function(){const f={capture:!0,passive:!1},h=_j({cancel:a,completed:o,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=Pt(window,h,f)},[a,o]),u=q(function(f,h){t.current.type!=="IDLE"&&L(),t.current={type:"PENDING",point:h,actions:f},l()},[l]);gt(function(){return i(),function(){r.current()}},[i])}function kj(){}const Dj={[hj]:!0,[fj]:!0,[mj]:!0,[pj]:!0};function Nj(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Nh){s.preventDefault(),r();return}if(s.keyCode===Hx){s.preventDefault(),n();return}if(s.keyCode===xj){s.preventDefault(),e.moveDown();return}if(s.keyCode===vj){s.preventDefault(),e.moveUp();return}if(s.keyCode===yj){s.preventDefault(),e.moveRight();return}if(s.keyCode===gj){s.preventDefault(),e.moveLeft();return}if(Dj[s.keyCode]){s.preventDefault();return}Yx(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:fc,fn:r}]}function Cj(e){const t=w.useRef(kj),r=ee(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Hx)return;const o=e.findClosestDraggableId(i);if(!o)return;const a=e.tryGetLock(o,d,{sourceEvent:i});if(!a)return;i.preventDefault();let l=!0;const u=a.snapLift();t.current();function d(){l||L(),l=!1,t.current(),n()}t.current=Pt(window,Nj(u,d),{capture:!0,passive:!1})}}),[e]),n=q(function(){const i={passive:!1,capture:!0};t.current=Pt(window,[r],i)},[r]);gt(function(){return n(),function(){t.current()}},[n])}const mu={type:"IDLE"},Ej=120,Pj=.15;function jj({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Nh&&r.preventDefault(),e()}},{eventName:fc,fn:e}]}function Tj({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:o}=n.touches[0],a={x:i,y:o};n.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&L();const i=n.touches[0];if(!i||!(i.force>=Pj))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:fc,fn:e}]}function Oj(e){const t=w.useRef(mu),r=w.useRef(rn),n=q(function(){return t.current},[]),s=q(function(p){t.current=p},[]),i=ee(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=e.findClosestDraggableId(p);if(!m)return;const x=e.tryGetLock(m,a,{sourceEvent:p});if(!x)return;const b=p.touches[0],{clientX:y,clientY:g}=b,v={x:y,y:g};r.current(),f(x,v)}}),[e]),o=q(function(){const p={capture:!0,passive:!1};r.current=Pt(window,[i],p)},[i]),a=q(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(mu),r.current(),o())},[o,s]),l=q(()=>{const h=t.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),u=q(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:n},x=Pt(window,Tj(m),p),b=Pt(window,jj(m),p);r.current=function(){x(),b()}},[l,n,a]),d=q(function(){const p=n();p.type!=="PENDING"&&L();const m=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:m,hasMoved:!1})},[n,s]),f=q(function(p,m){n().type!=="IDLE"&&L();const x=setTimeout(d,Ej);s({type:"PENDING",point:m,actions:p,longPressTimerId:x}),u()},[u,n,s,d]);gt(function(){return o(),function(){r.current();const m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),s(mu))}},[n,o,s]),gt(function(){return Pt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Rj=["input","button","textarea","select","option","optgroup","video","audio"];function Vx(e,t){if(t==null)return!1;if(Rj.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Vx(e,t.parentElement)}function Ij(e,t){const r=t.target;return uc(r)?Vx(e,r):!1}var Mj=e=>Wt(e.getBoundingClientRect()).center;function Lj(e){return e instanceof Ux(e).Element}const Aj=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function Gx(e,t){return e==null?null:e[Aj](t)?e:Gx(e.parentElement,t)}function Fj(e,t){return e.closest?e.closest(t):Gx(e,t)}function $j(e){return`[${$s.contextId}="${e}"]`}function Bj(e,t){const r=t.target;if(!Lj(r))return null;const n=$j(e),s=Fj(r,n);return!s||!uc(s)?null:s}function Uj(e,t){const r=Bj(e,t);return r?r.getAttribute($s.draggableId):null}function Wj(e,t){const r=`[${Wd.contextId}="${e}"]`,s=Bx(document,r).find(i=>i.getAttribute(Wd.id)===t);return!s||!uc(s)?null:s}function Hj(e){e.preventDefault()}function aa({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function qx({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!Lx(t.getState(),n))}function Yj({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!qx({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const l=n.draggable.getById(s),u=Wj(t,l.descriptor.id);if(!u||o&&!l.options.canDragInteractiveElements&&Ij(u,o))return null;const d=e.claim(i||rn);let f="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return e.isActive(d)}function m(S,k){aa({expected:S,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(k())}const x=m.bind(null,"DRAGGING");function b(S){function k(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(k(),L()),r.dispatch(FE(S.liftActionArgs)),f="DRAGGING";function D(C,E={shouldBlockNextClick:!1}){if(S.cleanup(),E.shouldBlockNextClick){const P=Pt(window,[{eventName:"click",fn:Hj,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}k(),r.dispatch(Ex({reason:C}))}return{isActive:()=>aa({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>D("DROP",C),cancel:C=>D("CANCEL",C),...S.actions}}function y(S){const k=fo(C=>{x(()=>Cx({client:C}))});return{...b({liftActionArgs:{id:s,clientSelection:S,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function g(){const S={moveUp:()=>x(GE),moveRight:()=>x(KE),moveDown:()=>x(qE),moveLeft:()=>x(QE)};return b({liftActionArgs:{id:s,clientSelection:Mj(u),movementMode:"SNAP"},cleanup:rn,actions:S})}function v(){aa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>aa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:y,snapLift:g,abort:v}}const zj=[Sj,Cj,Oj];function Vj({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const i=[...s?zj:[],...n||[]],o=w.useState(()=>cj())[0],a=q(function(b,y){yo(b)&&!yo(y)&&o.tryAbandon()},[o]);gt(function(){let b=t.getState();return t.subscribe(()=>{const g=t.getState();a(b,g),b=g})},[o,t,a]),gt(()=>o.tryAbandon,[o.tryAbandon]);const l=q(x=>qx({lockAPI:o,registry:r,store:t,draggableId:x}),[o,r,t]),u=q((x,b,y)=>Yj({lockAPI:o,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,o,r,t]),d=q(x=>Uj(e,x),[e]),f=q(x=>{const b=r.draggable.findById(x);return b?b.options:null},[r.draggable]),h=q(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(vh()))},[o,t]),p=q(()=>o.isClaimed(),[o]),m=ee(()=>({canGetLock:l,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:p}),[l,u,d,f,h,p]);for(let x=0;x<i.length;x++)i[x](m)}const Gj=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};No.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),qj=e=>({...vo,...e.autoScrollerOptions,durationDampening:{...vo.durationDampening,...e.autoScrollerOptions}});function xi(e){return e.current||L(),e.current}function Kj(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:i}=e,o=w.useRef(null),a=Wx(e),l=q(()=>Gj(a.current),[a]),u=q(()=>qj(a.current),[a]),d=ij(t),f=lj({contextId:t,text:i}),h=XP(t,s),p=q(P=>{xi(o).dispatch(P)},[]),m=ee(()=>Dm({publishWhileDragging:BE,updateDroppableScroll:WE,updateDroppableIsEnabled:HE,updateDroppableIsCombineEnabled:YE,collectionStarting:UE},p),[p]),x=rj(),b=ee(()=>jP(x,m),[x,m]),y=ee(()=>GP({scrollWindow:TP,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...Dm({move:Cx},p)}),[b.scrollDroppable,p,u]),g=ej(t),v=ee(()=>NP({announce:d,autoScroller:y,dimensionMarshal:b,focusMarshal:g,getResponders:l,styleMarshal:h}),[d,y,b,g,l,h]);o.current=v;const _=q(()=>{const P=xi(o);P.getState().phase!=="IDLE"&&P.dispatch(vh())},[]),S=q(()=>{const P=xi(o).getState();return P.phase==="DROP_ANIMATING"?!0:P.phase==="IDLE"?!1:P.isDragging},[]),k=ee(()=>({isDragging:S,tryAbort:_}),[S,_]);r(k);const D=q(P=>Lx(xi(o).getState(),P),[]),C=q(()=>kn(xi(o).getState()),[]),E=ee(()=>({marshal:b,focus:g,contextId:t,canLift:D,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:x}),[t,b,f,g,D,C,x]);return Vj({contextId:t,store:v,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>_,[_]),j.createElement(dc.Provider,{value:E},j.createElement(xC,{context:kh,store:v},e.children))}function Qj(){return j.useId()}function Jj(e){const t=Qj(),r=e.dragHandleUsageInstructions||Oa.dragHandleUsageInstructions;return j.createElement(CC,null,n=>j.createElement(Kj,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Xm={dragging:5e3,dropAnimating:4500},Xj=(e,t)=>t?Yi.drop(t.duration):e?Yi.snap:Yi.fluid,Zj=(e,t)=>{if(e)return t?go.opacity.drop:go.opacity.combining},e2=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function t2(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:i}=e,o=!!s,a=e2(e),l=!!i,u=l?Bd.drop(n,o):Bd.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Xj(a,i),transform:u,opacity:Zj(o,l),zIndex:l?Xm.dropAnimating:Xm.dragging,pointerEvents:"none"}}function r2(e){return{transform:Bd.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function n2(e){return e.type==="DRAGGING"?t2(e):r2(e)}function s2(e,t,r=Le){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=tx(s,n),o=pl(i,r),a={client:i,tagName:t.tagName.toLowerCase(),display:n.display},l={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:i,page:o}}function i2(e){const t=Dh("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}=e,l=ee(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}),[i,a,o]),u=q(p=>{const m=s();return m||L(),s2(r,m,p)},[r,s]),d=ee(()=>({uniqueId:t,descriptor:r,options:l,getDimension:u}),[r,u,l,t]),f=w.useRef(d),h=w.useRef(!0);gt(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),gt(()=>{if(h.current){h.current=!1;return}const p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}var Ch=j.createContext(null);function bl(e){const t=w.useContext(e);return t||L(),t}function o2(e){e.preventDefault()}const a2=e=>{const t=w.useRef(null),r=q((k=null)=>{t.current=k},[]),n=q(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=bl(dc),{type:a,droppableId:l}=bl(Ch),u=ee(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:d,draggableId:f,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:x,mapped:b,dropAnimationFinished:y}=e;if(!x){const k=ee(()=>({descriptor:u,registry:o,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[u,o,n,m,p,h]);i2(k)}const g=ee(()=>h?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:o2}:null,[s,i,f,h]),v=q(k=>{b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&No.flushSync(y)},[y,b]),_=ee(()=>{const k=n2(b),D=b.type==="DRAGGING"&&b.dropping?v:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:k,onTransitionEnd:D},dragHandleProps:g}},[s,g,f,b,v,r]),S=ee(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return j.createElement(j.Fragment,null,d(_,b.snapshot,S))};var Kx=(e,t)=>e===t,Qx=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const l2=e=>e.combine?e.combine.draggableId:null,c2=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function u2(){const e=Me((s,i)=>({x:s,y:i})),t=Me((s,i,o=null,a=null,l=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:o,combineWith:a,combineTargetFor:null})),r=Me((s,i,o,a,l=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:i,offset:s,dimension:o,forceShouldAnimate:d,snapshot:t(i,a,l,u,null)}}));return(s,i)=>{if(yo(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,a=s.dimensions.draggables[i.draggableId],l=mt(s.impact),u=c2(s.impact),d=s.forceShouldAnimate;return r(e(o.x,o.y),s.movementMode,a,i.isClone,l,u,d)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const a=i.isClone,l=s.dimensions.draggables[i.draggableId],u=o.result,d=u.mode,f=Qx(u),h=l2(u),m={duration:s.dropDuration,curve:xh.drop,moveTo:s.newHomeClientOffset,opacity:h?go.opacity.drop:null,scale:h?go.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:m,draggingOver:f,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:t(d,a,f,h,m)}}}return null}}function Jx(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const d2={mapped:{type:"SECONDARY",offset:Le,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Jx(null)}};function f2(){const e=Me((o,a)=>({x:o,y:a})),t=Me(Jx),r=Me((o,a=null,l)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),n=o=>o?r(Le,o,!0):null,s=(o,a,l,u)=>{const d=l.displaced.visible[o],f=!!(u.inVirtualList&&u.effected[o]),h=ac(l),p=h&&h.draggableId===o?a:null;if(!d){if(!f)return n(p);if(l.displaced.invisible[o])return null;const b=ri(u.displacedBy.point),y=e(b.x,b.y);return r(y,p,!0)}if(f)return n(p);const m=l.displacedBy.point,x=e(m.x,m.y);return r(x,p,d.shouldAnimate)};return(o,a)=>{if(yo(o))return o.critical.draggable.id===a.draggableId?null:s(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const l=o.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const h2=()=>{const e=u2(),t=f2();return(n,s)=>e(n,s)||t(n,s)||d2},p2={dropAnimationFinished:Px},m2=ex(h2,p2,null,{context:kh,areStatePropsEqual:Kx})(a2);function Xx(e){return bl(Ch).isUsingCloneFor===e.draggableId&&!e.isClone?null:j.createElement(m2,e)}function g2(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return j.createElement(Xx,ml({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const Zx=e=>t=>e===t,v2=Zx("scroll"),y2=Zx("auto"),Zm=(e,t)=>t(e.overflowX)||t(e.overflowY),x2=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Zm(r,v2)||Zm(r,y2)},b2=()=>!1,eb=e=>e==null?null:e===document.body?b2()?e:null:e===document.documentElement?null:x2(e)?e:eb(e.parentElement);var Hd=e=>({x:e.scrollLeft,y:e.scrollTop});const tb=e=>e?window.getComputedStyle(e).position==="fixed"?!0:tb(e.parentElement):!1;var w2=e=>{const t=eb(e),r=tb(e);return{closestScrollable:t,isFixedOnPage:r}},_2=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:i,page:o,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=Rx({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:Le,displacement:Le}}}})(),u=s==="vertical"?fh:fx,d=As({page:o,withPlaceholder:null,axis:u,frame:l});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:i,page:o,frame:l,subject:d}};const S2=(e,t)=>{const r=rx(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,i=n+t.scrollHeight,o=s+t.scrollWidth,l=lh({top:n,right:o,bottom:i,left:s},r.border);return ch({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var k2=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:a})=>{const l=r.closestScrollable,u=S2(e,l),d=pl(u,n),f=(()=>{if(!l)return null;const p=rx(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:pl(p,n),scroll:Hd(l),scrollSize:m,shouldClipSubject:a}})();return _2({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:f})};const D2={passive:!1},N2={passive:!0};var eg=e=>e.shouldPublishImmediately?D2:N2;const la=e=>e&&e.env.closestScrollable||null;function C2(e){const t=w.useRef(null),r=bl(dc),n=Dh("droppable"),{registry:s,marshal:i}=r,o=Wx(e),a=ee(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=w.useRef(a),u=ee(()=>Me((_,S)=>{t.current||L();const k={x:_,y:S};i.updateDroppableScroll(a.id,k)}),[a.id,i]),d=q(()=>{const _=t.current;return!_||!_.env.closestScrollable?Le:Hd(_.env.closestScrollable)},[]),f=q(()=>{const _=d();u(_.x,_.y)},[d,u]),h=ee(()=>fo(f),[f]),p=q(()=>{const _=t.current,S=la(_);if(_&&S||L(),_.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),m=q((_,S)=>{t.current&&L();const k=o.current,D=k.getDroppableRef();D||L();const C=w2(D),E={ref:D,descriptor:a,env:C,scrollOptions:S};t.current=E;const P=k2({ref:D,descriptor:a,env:C,windowScroll:_,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),I=C.closestScrollable;return I&&(I.setAttribute(qm.contextId,r.contextId),I.addEventListener("scroll",p,eg(E.scrollOptions))),P},[r.contextId,a,p,o]),x=q(()=>{const _=t.current,S=la(_);return _&&S||L(),Hd(S)},[]),b=q(()=>{const _=t.current;_||L();const S=la(_);t.current=null,S&&(h.cancel(),S.removeAttribute(qm.contextId),S.removeEventListener("scroll",p,eg(_.scrollOptions)))},[p,h]),y=q(_=>{const S=t.current;S||L();const k=la(S);k||L(),k.scrollTop+=_.y,k.scrollLeft+=_.x},[]),g=ee(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:x,dragStopped:b,scroll:y}),[b,m,x,y]),v=ee(()=>({uniqueId:n,descriptor:a,callbacks:g}),[g,a,n]);gt(()=>(l.current=v.descriptor,s.droppable.register(v),()=>{t.current&&b(),s.droppable.unregister(v)}),[g,a,b,v,i,s.droppable]),gt(()=>{t.current&&i.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),gt(()=>{t.current&&i.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function gu(){}const tg={width:0,height:0,margin:IC},E2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?tg:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},P2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=E2({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Yi.placeholder:null}},j2=e=>{const t=w.useRef(null),r=q(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:i,contextId:o}=e,[a,l]=w.useState(e.animate==="open");w.useEffect(()=>a?n!=="open"?(r(),l(!1),gu):t.current?gu:(t.current=setTimeout(()=>{t.current=null,l(!1)}),r):gu,[n,a,r]);const u=q(f=>{f.propertyName==="height"&&(s(),n==="close"&&i())},[n,i,s]),d=P2({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return j.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})};var T2=j.memo(j2);class O2 extends j.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const R2=e=>{const t=w.useContext(dc);t||L();const{contextId:r,isMovementAllowed:n}=t,s=w.useRef(null),i=w.useRef(null),{children:o,droppableId:a,type:l,mode:u,direction:d,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:x,updateViewportMaxScroll:b,getContainerForClone:y}=e,g=q(()=>s.current,[]),v=q((I=null)=>{s.current=I},[]);q(()=>i.current,[]);const _=q((I=null)=>{i.current=I},[]),S=q(()=>{n()&&b({maxScroll:Mx()})},[n,b]);C2({droppableId:a,type:l,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:g});const k=ee(()=>j.createElement(O2,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:I,data:F,animate:O})=>j.createElement(T2,{placeholder:F,onClose:I,innerRef:_,animate:O,contextId:r,onTransitionEnd:S})),[r,S,e.placeholder,e.shouldAnimatePlaceholder,_]),D=ee(()=>({innerRef:v,placeholder:k,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,k,v]),C=x?x.dragging.draggableId:null,E=ee(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function P(){if(!x)return null;const{dragging:I,render:F}=x,O=j.createElement(Xx,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(A,B)=>F(A,B,I));return oy.createPortal(O,y())}return j.createElement(Ch.Provider,{value:E},o(D,m),P())};function I2(){return document.body||L(),document.body}const rg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:I2},rb=e=>{let t={...e},r;for(r in rg)e[r]===void 0&&(t={...t,[r]:rg[r]});return t},vu=(e,t)=>e===t.droppable.type,ng=(e,t)=>t.draggables[e.draggable.id],M2=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Me(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),n=Me((i,o,a,l,u,d)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===i){const m=d?{render:d,dragging:r(u.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:m}}if(!o)return t;if(!l)return e;const p={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(i,o)=>{const a=rb(o),l=a.droppableId,u=a.type,d=!a.isDropDisabled,f=a.renderClone;if(yo(i)){const h=i.critical;if(!vu(u,h))return t;const p=ng(h,i.dimensions),m=mt(i.impact)===l;return n(l,d,m,m,p,f)}if(i.phase==="DROP_ANIMATING"){const h=i.completed;if(!vu(u,h.critical))return t;const p=ng(h.critical,i.dimensions);return n(l,d,Qx(h.result)===l,mt(h.impact)===l,p,f)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const h=i.completed;if(!vu(u,h.critical))return t;const p=mt(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),x=h.critical.droppable.id===l;return p?m?e:t:x?e:t}return t}},L2={updateViewportMaxScroll:VE},A2=ex(M2,L2,(e,t,r)=>({...rb(r),...e,...t}),{context:kh,areStatePropsEqual:Kx})(R2);function F2(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0);return w.useEffect(()=>{(async()=>{try{console.log(" Fetching kanban data (safe version)...");const{data:a,error:l}=await V.from("deal_stage").select("id, label, description, sort_order, active").eq("active",!0).order("sort_order",{ascending:!0});if(console.log(" Stages:",a),l)throw console.error(" Stage error:",l),l;const{data:u,error:d}=await V.from("deal").select("id, deal_name, fee, deal_value, closed_date, stage_id, kanban_position, client_id, created_at").order("kanban_position",{ascending:!0});if(console.log(" Deals:",(u==null?void 0:u.length)||0,"deals fetched"),d)throw console.error(" Deal error:",d),d;const{data:f,error:h}=await V.from("client").select("id, client_name");console.log(" Clients:",(f==null?void 0:f.length)||0,"clients fetched"),h&&console.warn(" Client error (non-fatal):",h);const p=new Map;f==null||f.forEach(v=>{p.set(v.id,v.client_name)});const m=u.map(v=>({id:v.id,deal_name:v.deal_name,fee:v.fee,deal_value:v.deal_value,closed_date:v.closed_date,stage_id:v.stage_id,kanban_position:v.kanban_position,client_name:v.client_id&&p.get(v.client_id)||null,created_at:v.created_at})),x=new Map;a.forEach(v=>{x.set(v.id,v.label)});const b=new Set(a.map(v=>v.id)),y=new Date;y.setFullYear(y.getFullYear()-2);const g=m.filter(v=>!v.stage_id||!b.has(v.stage_id)?!1:x.get(v.stage_id)==="Lost"?v.created_at?new Date(v.created_at)>=y:!1:!0);console.log(" Final cards:",g.length),console.log(" Final columns:",a.length),t(a||[]),n(g)}catch(a){console.error(" Error:",a)}finally{i(!1)}})()},[]),{columns:e,cards:r,loading:s}}function $2(){const{columns:e,cards:t,loading:r}=F2(),[n,s]=w.useState([]);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{document.title="Master Pipeline"},[]);const i=async l=>{const{destination:u,draggableId:d}=l;if(!u)return;const f=u.droppableId,h=[...n],p=h.find(b=>b.id===d);if(!p)return;p.stage_id=f;const m=h.filter(b=>b.stage_id===f&&b.id!==d).sort((b,y)=>(b.kanban_position??0)-(y.kanban_position??0));m.splice(u.index,0,p),m.forEach((b,y)=>{b.kanban_position=y}),s(h);const x=m.map(b=>V.from("deal").update({stage_id:b.stage_id,kanban_position:b.kanban_position}).eq("id",b.id));await Promise.all(x)},o=(l,u=0)=>typeof l=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:u,maximumFractionDigits:u}).format(l):"--",a=new Date().getFullYear();return r?c.jsx("div",{className:"p-4",children:"Loading..."}):c.jsxs("div",{className:"p-4 overflow-x-auto bg-gray-100 min-h-screen",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Master Pipeline"}),c.jsx("div",{className:"flex min-w-max gap-[2px]",children:c.jsx(Jj,{onDragEnd:i,children:e.map((l,u)=>{let d=n.filter(m=>m.stage_id===l.id).sort((m,x)=>(m.kanban_position??0)-(x.kanban_position??0));l.label==="Closed Paid"&&(d=d.filter(m=>m.closed_date?new Date(m.closed_date).getFullYear()===a:!1));const f=d.reduce((m,x)=>m+(x.fee??0),0),h=u===e.length-1,p=u===0;return c.jsx(A2,{droppableId:l.id,children:(m,x)=>c.jsxs("div",{ref:m.innerRef,...m.droppableProps,className:`relative min-w-[240px] max-w-[280px] bg-white shadow-sm flex flex-col ${x.isDraggingOver?"bg-blue-50":""}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`chevron-header ${p?"first":""} ${h?"last":""} flex items-center justify-center`,children:c.jsxs("div",{className:"text-center font-semibold text-sm",children:[l.label," (",d.length,")"]})}),c.jsx("div",{className:"bg-white text-center py-2 border-b",children:c.jsx("div",{className:"text-green-600 text-lg font-bold",children:o(f)})})]}),c.jsxs("div",{className:"p-2 flex-1",children:[d.map((b,y)=>c.jsx(g2,{draggableId:b.id,index:y,children:(g,v)=>c.jsxs("div",{ref:g.innerRef,...g.draggableProps,...g.dragHandleProps,className:`bg-white p-2 rounded shadow mb-2 border text-sm ${v.isDragging?"bg-yellow-100":""}`,children:[c.jsx("div",{className:"font-semibold",children:c.jsx(co,{to:`/deal/${b.id}`,className:"text-blue-600 hover:underline",children:b.deal_name||"Untitled Deal"})}),c.jsx("div",{className:"text-gray-700",children:o(b.fee)}),c.jsx("div",{className:"text-gray-500 text-xs",children:b.client_name||"No Client"}),c.jsx("div",{className:"text-gray-800",children:o(b.deal_value)})]})},b.id)),m.placeholder]})]})},l.id)})})})]})}function yu(e,t=0){return e==null||isNaN(e)?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function B2(e,t=2){return typeof e!="number"||isNaN(e)?"":`${e.toFixed(t)}%`}function U2(e){return typeof e!="number"?"":Math.round(e)+"%"}function ca({label:e,value:t,onChange:r,format:n,editingField:s,setEditingField:i,fieldKey:o}){const a=s===o,l=w.useRef(null);w.useEffect(()=>{a&&l.current&&l.current.focus()},[a]);const u=()=>{i(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a?c.jsx("input",{ref:l,type:"number",value:t??"",onChange:d=>r(d.target.value),onBlur:u,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):c.jsx("div",{onClick:()=>i(o),className:"mt-1 p-2 bg-gray-100 rounded text-sm cursor-pointer",children:t==null||t===""?"":n(t)})]})}function nb(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=nb(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Be(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=nb(e))&&(n&&(n+=" "),n+=t);return n}const sb=6048e5,W2=864e5,hc=6e4,pc=36e5,H2=1e3,sg=Symbol.for("constructDateFrom");function ce(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&sg in e?e[sg](t):e instanceof Date?new e.constructor(t):new Date(t)}function G(e,t){return ce(t||e,e)}function zt(e,t,r){const n=G(e,r==null?void 0:r.in);return isNaN(t)?ce((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function qt(e,t,r){const n=G(e,r==null?void 0:r.in);if(isNaN(t))return ce((r==null?void 0:r.in)||e,NaN);if(!t)return n;const s=n.getDate(),i=ce((r==null?void 0:r.in)||e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function ib(e,t,r){return ce((r==null?void 0:r.in)||e,+G(e)+t)}function Y2(e,t,r){return ib(e,t*pc,r)}let z2={};function Kn(){return z2}function Or(e,t){var a,l,u,d;const r=Kn(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=G(e,t==null?void 0:t.in),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Bs(e,t){return Or(e,{...t,weekStartsOn:1})}function ob(e,t){const r=G(e,t==null?void 0:t.in),n=r.getFullYear(),s=ce(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Bs(s),o=ce(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Bs(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=a.getTime()?n:n-1}function wl(e){const t=G(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Mr(e,...t){const r=ce.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function Hn(e,t){const r=G(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Us(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t),i=Hn(n),o=Hn(s),a=+i-wl(i),l=+o-wl(o);return Math.round((a-l)/W2)}function V2(e,t){const r=ob(e,t),n=ce((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Bs(n)}function Yd(e,t,r){const n=G(e,r==null?void 0:r.in);return n.setTime(n.getTime()+t*hc),n}function Eh(e,t,r){return qt(e,t*3,r)}function G2(e,t,r){return ib(e,t*1e3,r)}function _l(e,t,r){return zt(e,t*7,r)}function _r(e,t,r){return qt(e,t*12,r)}function ig(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ce.bind(null,s));const i=G(s,n);(!r||r<i||isNaN(+i))&&(r=i)}),ce(n,r||NaN)}function og(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ce.bind(null,s));const i=G(s,n);(!r||r>i||isNaN(+i))&&(r=i)}),ce(n,r||NaN)}function q2(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t);return+Hn(n)==+Hn(s)}function Sr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Sl(e){return!(!Sr(e)&&typeof e!="number"||isNaN(+G(e)))}function kl(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function In(e,t){const r=G(e,t==null?void 0:t.in);return Math.trunc(r.getMonth()/3)+1}function Dl(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t),i=n.getFullYear()-s.getFullYear(),o=In(n)-In(s);return i*4+o}function Nl(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t);return n.getFullYear()-s.getFullYear()}function K2(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t),i=ag(n,s),o=Math.abs(Us(n,s));n.setDate(n.getDate()-i*o);const a=+(ag(n,s)===-i),l=i*(o-a);return l===0?0:l}function ag(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function ab(e,t){const r=G(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function lb(e,t){const r=G(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function zd(e,t){const r=G(e,t==null?void 0:t.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function cb(e,t){const r=G(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function ub(e,t){const r=G(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function mc(e,t){const r=G(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Q2(e,t){var a,l,u,d;const r=Kn(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=G(e,t==null?void 0:t.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const J2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},X2=(e,t,r)=>{let n;const s=J2[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Z2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rT={date:xu({formats:Z2,defaultWidth:"full"}),time:xu({formats:eT,defaultWidth:"full"}),dateTime:xu({formats:tT,defaultWidth:"full"})},nT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sT=(e,t,r,n)=>nT[e];function bi(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):o;s=e.formattingValues[a]||e.formattingValues[o]}else{const o=e.defaultWidth,a=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[a]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const iT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dT=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},fT={ordinalNumber:dT,era:bi({values:iT,defaultWidth:"wide"}),quarter:bi({values:oT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bi({values:aT,defaultWidth:"wide"}),day:bi({values:lT,defaultWidth:"wide"}),dayPeriod:bi({values:cT,defaultWidth:"wide",formattingValues:uT,defaultFormattingWidth:"wide"})};function wi(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?pT(a,f=>f.test(o)):hT(a,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function hT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function pT(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function mT(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const a=t.slice(s.length);return{value:o,rest:a}}}const gT=/^(\d+)(th|st|nd|rd)?/i,vT=/\d+/i,yT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xT={any:[/^b/i,/^(a|c)/i]},bT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wT={any:[/1/i,/2/i,/3/i,/4/i]},_T={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ST={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ET={ordinalNumber:mT({matchPattern:gT,parsePattern:vT,valueCallback:e=>parseInt(e,10)}),era:wi({matchPatterns:yT,defaultMatchWidth:"wide",parsePatterns:xT,defaultParseWidth:"any"}),quarter:wi({matchPatterns:bT,defaultMatchWidth:"wide",parsePatterns:wT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wi({matchPatterns:_T,defaultMatchWidth:"wide",parsePatterns:ST,defaultParseWidth:"any"}),day:wi({matchPatterns:kT,defaultMatchWidth:"wide",parsePatterns:DT,defaultParseWidth:"any"}),dayPeriod:wi({matchPatterns:NT,defaultMatchWidth:"any",parsePatterns:CT,defaultParseWidth:"any"})},db={code:"en-US",formatDistance:X2,formatLong:rT,formatRelative:sT,localize:fT,match:ET,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PT(e,t){const r=G(e,t==null?void 0:t.in);return Us(r,mc(r))+1}function Ph(e,t){const r=G(e,t==null?void 0:t.in),n=+Bs(r)-+V2(r);return Math.round(n/sb)+1}function jh(e,t){var d,f,h,p;const r=G(e,t==null?void 0:t.in),n=r.getFullYear(),s=Kn(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=ce((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const a=Or(o,t),l=ce((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=Or(l,t);return+r>=+a?n+1:+r>=+u?n:n-1}function jT(e,t){var a,l,u,d;const r=Kn(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=jh(e,t),i=ce((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Or(i,t)}function fb(e,t){const r=G(e,t==null?void 0:t.in),n=+Or(r,t)-+jT(r,t);return Math.round(n/sb)+1}function ae(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Fr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ae(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ae(r+1,2)},d(e,t){return ae(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ae(e.getHours()%12||12,t.length)},H(e,t){return ae(e.getHours(),t.length)},m(e,t){return ae(e.getMinutes(),t.length)},s(e,t){return ae(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return ae(s,t.length)}},rs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lg={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Fr.y(e,t)},Y:function(e,t,r,n){const s=jh(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return ae(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):ae(i,t.length)},R:function(e,t){const r=ob(e);return ae(r,t.length)},u:function(e,t){const r=e.getFullYear();return ae(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ae(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ae(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Fr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ae(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=fb(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):ae(s,t.length)},I:function(e,t,r){const n=Ph(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ae(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Fr.d(e,t)},D:function(e,t,r){const n=PT(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ae(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ae(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ae(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return ae(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=rs.noon:n===0?s=rs.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=rs.evening:n>=12?s=rs.afternoon:n>=4?s=rs.morning:s=rs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Fr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Fr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ae(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ae(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Fr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Fr.s(e,t)},S:function(e,t){return Fr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return ug(n);case"XXXX":case"XX":return Dn(n);case"XXXXX":case"XXX":default:return Dn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return ug(n);case"xxxx":case"xx":return Dn(n);case"xxxxx":case"xxx":default:return Dn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+cg(n,":");case"OOOO":default:return"GMT"+Dn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+cg(n,":");case"zzzz":default:return"GMT"+Dn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return ae(n,t.length)},T:function(e,t,r){return ae(+e,t.length)}};function cg(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+ae(i,2)}function ug(e,t){return e%60===0?(e>0?"-":"+")+ae(Math.abs(e)/60,2):Dn(e,t)}function Dn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=ae(Math.trunc(n/60),2),i=ae(n%60,2);return r+s+t+i}const dg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},hb=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},TT=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return dg(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",dg(n,t)).replace("{{time}}",hb(s,t))},Vd={p:hb,P:TT},OT=/^D+$/,RT=/^Y+$/,IT=["D","DD","YY","YYYY"];function pb(e){return OT.test(e)}function mb(e){return RT.test(e)}function Gd(e,t,r){const n=MT(e,t,r);if(console.warn(n),IT.includes(e))throw new RangeError(n)}function MT(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FT=/^'([^]*?)'?$/,$T=/''/g,BT=/[a-zA-Z]/;function qd(e,t,r){var d,f,h,p,m,x,b,y;const n=Kn(),s=(r==null?void 0:r.locale)??n.locale??db,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,a=G(e,r==null?void 0:r.in);if(!Sl(a))throw new RangeError("Invalid time value");let l=t.match(AT).map(g=>{const v=g[0];if(v==="p"||v==="P"){const _=Vd[v];return _(g,s.formatLong)}return g}).join("").match(LT).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:UT(g)};if(lg[v])return{isToken:!0,value:g};if(v.match(BT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(g=>{if(!g.isToken)return g.value;const v=g.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&mb(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&pb(v))&&Gd(v,t,String(e));const _=lg[v[0]];return _(a,v,s.localize,u)}).join("")}function UT(e){const t=e.match(FT);return t?t[1].replace($T,"'"):e}function fg(e,t){return G(e,t==null?void 0:t.in).getDate()}function WT(e,t){return G(e,t==null?void 0:t.in).getDay()}function HT(e,t){const r=G(e,t==null?void 0:t.in),n=r.getFullYear(),s=r.getMonth(),i=ce(r,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}function YT(){return Object.assign({},Kn())}function kr(e,t){return G(e,t==null?void 0:t.in).getHours()}function zT(e,t){const r=G(e,t==null?void 0:t.in).getDay();return r===0?7:r}function Dr(e,t){return G(e,t==null?void 0:t.in).getMinutes()}function Ge(e,t){return G(e,t==null?void 0:t.in).getMonth()}function sn(e){return G(e).getSeconds()}function Kd(e){return+G(e)}function J(e,t){return G(e,t==null?void 0:t.in).getFullYear()}function un(e,t){return+G(e)>+G(t)}function Yn(e,t){return+G(e)<+G(t)}function VT(e,t){return+G(e)==+G(t)}function GT(e,t){const r=qT(t)?new t(0):ce(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function qT(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const KT=10;class gb{constructor(){W(this,"subPriority",0)}validate(t,r){return!0}}class QT extends gb{constructor(t,r,n,s,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class JT extends gb{constructor(r,n){super();W(this,"priority",KT);W(this,"subPriority",-1);this.context=r||(s=>ce(n,s))}set(r,n){return n.timestampIsSet?r:ce(r,GT(r,this.context))}}class se{run(t,r,n,s){const i=this.parse(t,r,n,s);return i?{setter:new QT(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class XT extends se{constructor(){super(...arguments);W(this,"priority",140);W(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}const ke={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},nr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function De(e,t){return e&&{value:t(e.value),rest:e.rest}}function ye(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function sr(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*pc+i*hc+o*H2),rest:t.slice(r[0].length)}}function vb(e){return ye(ke.anyDigitsSigned,e)}function _e(e,t){switch(e){case 1:return ye(ke.singleDigit,t);case 2:return ye(ke.twoDigits,t);case 3:return ye(ke.threeDigits,t);case 4:return ye(ke.fourDigits,t);default:return ye(new RegExp("^\\d{1,"+e+"}"),t)}}function Cl(e,t){switch(e){case 1:return ye(ke.singleDigitSigned,t);case 2:return ye(ke.twoDigitsSigned,t);case 3:return ye(ke.threeDigitsSigned,t);case 4:return ye(ke.fourDigitsSigned,t);default:return ye(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Th(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function yb(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const i=n+50,o=Math.trunc(i/100)*100,a=e>=i%100;s=e+o-(a?100:0)}return r?s:1-s}function xb(e){return e%400===0||e%4===0&&e%100!==0}class ZT extends se{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,s){const i=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return De(_e(4,r),i);case"yo":return De(s.ordinalNumber(r,{unit:"year"}),i);default:return De(_e(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const i=r.getFullYear();if(s.isTwoDigitYear){const a=yb(s.year,i);return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class eO extends se{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,s){const i=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return De(_e(4,r),i);case"Yo":return De(s.ordinalNumber(r,{unit:"year"}),i);default:return De(_e(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,i){const o=jh(r,i);if(s.isTwoDigitYear){const l=yb(s.year,o);return r.setFullYear(l,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Or(r,i)}const a=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(a,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Or(r,i)}}class tO extends se{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return Cl(n==="R"?4:n.length,r)}set(r,n,s){const i=ce(r,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Bs(i)}}class rO extends se{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return Cl(n==="u"?4:n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}class nO extends se{constructor(){super(...arguments);W(this,"priority",120);W(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"Q":case"QQ":return _e(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class sO extends se{constructor(){super(...arguments);W(this,"priority",120);W(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"q":case"qq":return _e(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class iO extends se{constructor(){super(...arguments);W(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);W(this,"priority",110)}parse(r,n,s){const i=o=>o-1;switch(n){case"M":return De(ye(ke.month,r),i);case"MM":return De(_e(2,r),i);case"Mo":return De(s.ordinalNumber(r,{unit:"month"}),i);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}class oO extends se{constructor(){super(...arguments);W(this,"priority",110);W(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,s){const i=o=>o-1;switch(n){case"L":return De(ye(ke.month,r),i);case"LL":return De(_e(2,r),i);case"Lo":return De(s.ordinalNumber(r,{unit:"month"}),i);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}function aO(e,t,r){const n=G(e,r==null?void 0:r.in),s=fb(n,r)-t;return n.setDate(n.getDate()-s*7),G(n,r==null?void 0:r.in)}class lO extends se{constructor(){super(...arguments);W(this,"priority",100);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,s){switch(n){case"w":return ye(ke.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,i){return Or(aO(r,s,i),i)}}function cO(e,t,r){const n=G(e,r==null?void 0:r.in),s=Ph(n,r)-t;return n.setDate(n.getDate()-s*7),n}class uO extends se{constructor(){super(...arguments);W(this,"priority",100);W(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,s){switch(n){case"I":return ye(ke.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return Bs(cO(r,s))}}const dO=[31,28,31,30,31,30,31,31,30,31,30,31],fO=[31,29,31,30,31,30,31,31,30,31,30,31];class hO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"subPriority",1);W(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"d":return ye(ke.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return _e(n.length,r)}}validate(r,n){const s=r.getFullYear(),i=xb(s),o=r.getMonth();return i?n>=1&&n<=fO[o]:n>=1&&n<=dO[o]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}}class pO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"subpriority",1);W(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,s){switch(n){case"D":case"DD":return ye(ke.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return _e(n.length,r)}}validate(r,n){const s=r.getFullYear();return xb(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}}function Oh(e,t,r){var f,h,p,m;const n=Kn(),s=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,i=G(e,r==null?void 0:r.in),o=i.getDay(),l=(t%7+7)%7,u=7-s,d=t<0||t>6?t-(o+u)%7:(l+u)%7-(o+u)%7;return zt(i,d,r)}class mO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=Oh(r,s,i),r.setHours(0,0,0,0),r}}class gO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return De(_e(n.length,r),o);case"eo":return De(s.ordinalNumber(r,{unit:"day"}),o);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=Oh(r,s,i),r.setHours(0,0,0,0),r}}class vO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return De(_e(n.length,r),o);case"co":return De(s.ordinalNumber(r,{unit:"day"}),o);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=Oh(r,s,i),r.setHours(0,0,0,0),r}}function yO(e,t,r){const n=G(e,r==null?void 0:r.in),s=zT(n,r),i=t-s;return zt(n,i,r)}class xO extends se{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,s){const i=o=>o===0?7:o;switch(n){case"i":case"ii":return _e(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return De(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return De(s.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return De(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return De(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=yO(r,s),r.setHours(0,0,0,0),r}}class bO extends se{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Th(s),0,0,0),r}}class wO extends se{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Th(s),0,0,0),r}}class _O extends se{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Th(s),0,0,0),r}}class SO extends se{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,s){switch(n){case"h":return ye(ke.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const i=r.getHours()>=12;return i&&s<12?r.setHours(s+12,0,0,0):!i&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}}class kO extends se{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,s){switch(n){case"H":return ye(ke.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}}class DO extends se{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,s){switch(n){case"K":return ye(ke.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}}class NO extends se{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,s){switch(n){case"k":return ye(ke.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const i=s<=24?s%24:s;return r.setHours(i,0,0,0),r}}class CO extends se{constructor(){super(...arguments);W(this,"priority",60);W(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"m":return ye(ke.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}}class EO extends se{constructor(){super(...arguments);W(this,"priority",50);W(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"s":return ye(ke.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}}class PO extends se{constructor(){super(...arguments);W(this,"priority",30);W(this,"incompatibleTokens",["t","T"])}parse(r,n){const s=i=>Math.trunc(i*Math.pow(10,-n.length+3));return De(_e(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}}class jO extends se{constructor(){super(...arguments);W(this,"priority",10);W(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return sr(nr.basicOptionalMinutes,r);case"XX":return sr(nr.basic,r);case"XXXX":return sr(nr.basicOptionalSeconds,r);case"XXXXX":return sr(nr.extendedOptionalSeconds,r);case"XXX":default:return sr(nr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:ce(r,r.getTime()-wl(r)-s)}}class TO extends se{constructor(){super(...arguments);W(this,"priority",10);W(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return sr(nr.basicOptionalMinutes,r);case"xx":return sr(nr.basic,r);case"xxxx":return sr(nr.basicOptionalSeconds,r);case"xxxxx":return sr(nr.extendedOptionalSeconds,r);case"xxx":default:return sr(nr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:ce(r,r.getTime()-wl(r)-s)}}class OO extends se{constructor(){super(...arguments);W(this,"priority",40);W(this,"incompatibleTokens","*")}parse(r){return vb(r)}set(r,n,s){return[ce(r,s*1e3),{timestampIsSet:!0}]}}class RO extends se{constructor(){super(...arguments);W(this,"priority",20);W(this,"incompatibleTokens","*")}parse(r){return vb(r)}set(r,n,s){return[ce(r,s),{timestampIsSet:!0}]}}const IO={G:new XT,y:new ZT,Y:new eO,R:new tO,u:new rO,Q:new nO,q:new sO,M:new iO,L:new oO,w:new lO,I:new uO,d:new hO,D:new pO,E:new mO,e:new gO,c:new vO,i:new xO,a:new bO,b:new wO,B:new _O,h:new SO,H:new kO,K:new DO,k:new NO,m:new CO,s:new EO,S:new PO,X:new jO,x:new TO,t:new OO,T:new RO},MO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,AO=/^'([^]*?)'?$/,FO=/''/g,$O=/\S/,BO=/[a-zA-Z]/;function UO(e,t,r,n){var b,y,g,v,_,S,k,D;const s=()=>ce((n==null?void 0:n.in)||r,NaN),i=YT(),o=(n==null?void 0:n.locale)??i.locale??db,a=(n==null?void 0:n.firstWeekContainsDate)??((y=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(g=i.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((S=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??i.weekStartsOn??((D=(k=i.locale)==null?void 0:k.options)==null?void 0:D.weekStartsOn)??0;if(!t)return e?s():G(r,n==null?void 0:n.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new JT(n==null?void 0:n.in,r)],f=t.match(LO).map(C=>{const E=C[0];if(E in Vd){const P=Vd[E];return P(C,o.formatLong)}return C}).join("").match(MO),h=[];for(let C of f){!(n!=null&&n.useAdditionalWeekYearTokens)&&mb(C)&&Gd(C,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&pb(C)&&Gd(C,t,e);const E=C[0],P=IO[E];if(P){const{incompatibleTokens:I}=P;if(Array.isArray(I)){const O=h.find(A=>I.includes(A.token)||A.token===E);if(O)throw new RangeError(`The format string mustn't contain \`${O.fullToken}\` and \`${C}\` at the same time`)}else if(P.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);h.push({token:E,fullToken:C});const F=P.run(e,C,o.match,u);if(!F)return s();d.push(F.setter),e=F.rest}else{if(E.match(BO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(C==="''"?C="'":E==="'"&&(C=WO(C)),e.indexOf(C)===0)e=e.slice(C.length);else return s()}}if(e.length>0&&$O.test(e))return s();const p=d.map(C=>C.priority).sort((C,E)=>E-C).filter((C,E,P)=>P.indexOf(C)===E).map(C=>d.filter(E=>E.priority===C).sort((E,P)=>P.subPriority-E.subPriority)).map(C=>C[0]);let m=G(r,n==null?void 0:n.in);if(isNaN(+m))return s();const x={};for(const C of p){if(!C.validate(m,u))return s();const E=C.set(m,x,u);Array.isArray(E)?(m=E[0],Object.assign(x,E[1])):m=E}return m}function WO(e){return e.match(AO)[1].replace(FO,"'")}function HO(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function YO(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t);return+zd(n)==+zd(s)}function zO(e,t,r){const[n,s]=Mr(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()}function xo(e,t,r){const n=+G(e,r==null?void 0:r.in),[s,i]=[+G(t.start,r==null?void 0:r.in),+G(t.end,r==null?void 0:r.in)].sort((o,a)=>o-a);return n>=s&&n<=i}function VO(e,t,r){return zt(e,-t,r)}function bb(e,t){const r=()=>ce(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,s=QO(e);let i;if(s.date){const u=JO(s.date,n);i=XO(u.restDateString,u.year)}if(!i||isNaN(+i))return r();const o=+i;let a=0,l;if(s.time&&(a=ZO(s.time),isNaN(a)))return r();if(s.timezone){if(l=eR(s.timezone),isNaN(l))return r()}else{const u=new Date(o+a),d=G(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return G(o+a+l,t==null?void 0:t.in)}const ua={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},GO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,qO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,KO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function QO(e){const t={},r=e.split(ua.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ua.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ua.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=ua.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function JO(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function XO(e,t){if(t===null)return new Date(NaN);const r=e.match(GO);if(!r)return new Date(NaN);const n=!!r[4],s=_i(r[1]),i=_i(r[2])-1,o=_i(r[3]),a=_i(r[4]),l=_i(r[5])-1;if(n)return iR(t,a,l)?tR(t,a,l):new Date(NaN);{const u=new Date(0);return!nR(t,i,o)||!sR(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,o)),u)}}function _i(e){return e?parseInt(e):1}function ZO(e){const t=e.match(qO);if(!t)return NaN;const r=bu(t[1]),n=bu(t[2]),s=bu(t[3]);return oR(r,n,s)?r*pc+n*hc+s*1e3:NaN}function bu(e){return e&&parseFloat(e.replace(",","."))||0}function eR(e){if(e==="Z")return 0;const t=e.match(KO);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return aR(n,s)?r*(n*pc+s*hc):NaN}function tR(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const rR=[31,null,31,30,31,30,31,31,30,31,30,31];function wb(e){return e%400===0||e%4===0&&e%100!==0}function nR(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(rR[t]||(wb(e)?29:28))}function sR(e,t){return t>=1&&t<=(wb(e)?366:365)}function iR(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function oR(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function aR(e,t){return t>=0&&t<=59}function kt(e,t,r){const n=G(e,r==null?void 0:r.in),s=n.getFullYear(),i=n.getDate(),o=ce((r==null?void 0:r.in)||e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const a=HT(o);return n.setMonth(t,Math.min(i,a)),n}function Ra(e,t,r){const n=G(e,r==null?void 0:r.in);return n.setHours(t),n}function Ia(e,t,r){const n=G(e,r==null?void 0:r.in);return n.setMinutes(t),n}function os(e,t,r){const n=G(e,r==null?void 0:r.in),s=Math.trunc(n.getMonth()/3)+1,i=t-s;return kt(n,n.getMonth()+i*3)}function Ma(e,t,r){const n=G(e,r==null?void 0:r.in);return n.setSeconds(t),n}function er(e,t,r){const n=G(e,r==null?void 0:r.in);return isNaN(+n)?ce((r==null?void 0:r.in)||e,NaN):(n.setFullYear(t),n)}function Mn(e,t,r){return qt(e,-t,r)}function _b(e,t,r){return Eh(e,-t,r)}function hg(e,t,r){return _l(e,-t,r)}function Ws(e,t,r){return _r(e,-t,r)}function gc(){return typeof window<"u"}function ii(e){return Sb(e)?(e.nodeName||"").toLowerCase():"#document"}function vt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ur(e){var t;return(t=(Sb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Sb(e){return gc()?e instanceof Node||e instanceof vt(e).Node:!1}function Ze(e){return gc()?e instanceof Element||e instanceof vt(e).Element:!1}function cr(e){return gc()?e instanceof HTMLElement||e instanceof vt(e).HTMLElement:!1}function pg(e){return!gc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vt(e).ShadowRoot}const lR=new Set(["inline","contents"]);function Io(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Mt(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!lR.has(s)}const cR=new Set(["table","td","th"]);function uR(e){return cR.has(ii(e))}const dR=[":popover-open",":modal"];function vc(e){return dR.some(t=>{try{return e.matches(t)}catch{return!1}})}const fR=["transform","translate","scale","rotate","perspective"],hR=["transform","translate","scale","rotate","perspective","filter"],pR=["paint","layout","strict","content"];function Rh(e){const t=Ih(),r=Ze(e)?Mt(e):e;return fR.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||hR.some(n=>(r.willChange||"").includes(n))||pR.some(n=>(r.contain||"").includes(n))}function mR(e){let t=dn(e);for(;cr(t)&&!Hs(t);){if(Rh(t))return t;if(vc(t))return null;t=dn(t)}return null}function Ih(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gR=new Set(["html","body","#document"]);function Hs(e){return gR.has(ii(e))}function Mt(e){return vt(e).getComputedStyle(e)}function yc(e){return Ze(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dn(e){if(ii(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pg(e)&&e.host||ur(e);return pg(t)?t.host:t}function kb(e){const t=dn(e);return Hs(t)?e.ownerDocument?e.ownerDocument.body:e.body:cr(t)&&Io(t)?t:kb(t)}function bo(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=kb(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=vt(s);if(i){const a=Qd(o);return t.concat(o,o.visualViewport||[],Io(s)?s:[],a&&r?bo(a):[])}return t.concat(s,bo(s,[],r))}function Qd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Ys=Math.min,Ln=Math.max,El=Math.round,da=Math.floor,lr=e=>({x:e,y:e}),vR={left:"right",right:"left",bottom:"top",top:"bottom"},yR={start:"end",end:"start"};function xR(e,t,r){return Ln(e,Ys(t,r))}function xc(e,t){return typeof e=="function"?e(t):e}function zs(e){return e.split("-")[0]}function Mo(e){return e.split("-")[1]}function bR(e){return e==="x"?"y":"x"}function Mh(e){return e==="y"?"height":"width"}const wR=new Set(["top","bottom"]);function jn(e){return wR.has(zs(e))?"y":"x"}function Lh(e){return bR(jn(e))}function _R(e,t,r){r===void 0&&(r=!1);const n=Mo(e),s=Lh(e),i=Mh(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Pl(o)),[o,Pl(o)]}function SR(e){const t=Pl(e);return[Jd(e),t,Jd(t)]}function Jd(e){return e.replace(/start|end/g,t=>yR[t])}const mg=["left","right"],gg=["right","left"],kR=["top","bottom"],DR=["bottom","top"];function NR(e,t,r){switch(e){case"top":case"bottom":return r?t?gg:mg:t?mg:gg;case"left":case"right":return t?kR:DR;default:return[]}}function CR(e,t,r,n){const s=Mo(e);let i=NR(zs(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Jd)))),i}function Pl(e){return e.replace(/left|right|bottom|top/g,t=>vR[t])}function ER(e){return{top:0,right:0,bottom:0,left:0,...e}}function Db(e){return typeof e!="number"?ER(e):{top:e,right:e,bottom:e,left:e}}function jl(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}var PR=typeof document<"u",jR=function(){},Tl=PR?w.useLayoutEffect:jR;const TR={...n0},OR=TR.useInsertionEffect,RR=OR||(e=>e());function IR(e){const t=w.useRef(()=>{});return RR(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function vg(e,t,r){let{reference:n,floating:s}=e;const i=jn(t),o=Lh(t),a=Mh(o),l=zs(t),u=i==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Mo(t)){case"start":p[o]-=h*(r&&u?-1:1);break;case"end":p[o]+=h*(r&&u?-1:1);break}return p}const MR=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=vg(u,n,l),h=n,p={},m=0;for(let x=0;x<a.length;x++){const{name:b,fn:y}=a[x],{x:g,y:v,data:_,reset:S}=await y({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=g??d,f=v??f,p={...p,[b]:{...p[b],..._}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:f}=vg(u,h,l)),x=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function LR(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=xc(t,e),m=Db(p),b=a[h?f==="floating"?"reference":"floating":f],y=jl(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),g=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},S=jl(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:v,strategy:l}):g);return{top:(y.top-S.top+m.top)/_.y,bottom:(S.bottom-y.bottom+m.bottom)/_.y,left:(y.left-S.left+m.left)/_.x,right:(S.right-y.right+m.right)/_.x}}const AR=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=xc(e,t)||{};if(u==null)return{};const f=Db(d),h={x:r,y:n},p=Lh(s),m=Mh(p),x=await o.getDimensions(u),b=p==="y",y=b?"top":"left",g=b?"bottom":"right",v=b?"clientHeight":"clientWidth",_=i.reference[m]+i.reference[p]-h[p]-i.floating[m],S=h[p]-i.reference[p],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let D=k?k[v]:0;(!D||!await(o.isElement==null?void 0:o.isElement(k)))&&(D=a.floating[v]||i.floating[m]);const C=_/2-S/2,E=D/2-x[m]/2-1,P=Ys(f[y],E),I=Ys(f[g],E),F=P,O=D-x[m]-I,A=D/2-x[m]/2+C,B=xR(F,A,O),$=!l.arrow&&Mo(s)!=null&&A!==B&&i.reference[m]/2-(A<F?P:I)-x[m]/2<0,z=$?A<F?A-F:A-O:0;return{[p]:h[p]+z,data:{[p]:B,centerOffset:A-B-z,...$&&{alignmentOffset:z}},reset:$}}}),FR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:x=!0,...b}=xc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=zs(s),g=jn(a),v=zs(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(v||!x?[Pl(a)]:SR(a)),k=m!=="none";!h&&k&&S.push(...CR(a,x,m,_));const D=[a,...S],C=await LR(t,b),E=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&E.push(C[y]),f){const A=_R(s,o,_);E.push(C[A[0]],C[A[1]])}if(P=[...P,{placement:s,overflows:E}],!E.every(A=>A<=0)){var I,F;const A=(((I=i.flip)==null?void 0:I.index)||0)+1,B=D[A];if(B&&(!(f==="alignment"?g!==jn(B):!1)||P.every(N=>jn(N.placement)===g?N.overflows[0]>0:!0)))return{data:{index:A,overflows:P},reset:{placement:B}};let $=(F=P.filter(z=>z.overflows[0]<=0).sort((z,N)=>z.overflows[1]-N.overflows[1])[0])==null?void 0:F.placement;if(!$)switch(p){case"bestFit":{var O;const z=(O=P.filter(N=>{if(k){const T=jn(N.placement);return T===g||T==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(T=>T>0).reduce((T,M)=>T+M,0)]).sort((N,T)=>N[1]-T[1])[0])==null?void 0:O[0];z&&($=z);break}case"initialPlacement":$=a;break}if(s!==$)return{reset:{placement:$}}}return{}}}},$R=new Set(["left","top"]);async function BR(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=zs(r),a=Mo(r),l=jn(r)==="y",u=$R.has(o)?-1:1,d=i&&l?-1:1,f=xc(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const UR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await BR(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}};function Nb(e){const t=Mt(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=cr(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=El(r)!==i||El(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function Ah(e){return Ze(e)?e:e.contextElement}function Ns(e){const t=Ah(e);if(!cr(t))return lr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=Nb(t);let o=(i?El(r.width):r.width)/n,a=(i?El(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WR=lr(0);function Cb(e){const t=vt(e);return!Ih()||!t.visualViewport?WR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function HR(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==vt(e)?!1:t}function zn(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=Ah(e);let o=lr(1);t&&(n?Ze(n)&&(o=Ns(n)):o=Ns(e));const a=HR(i,r,n)?Cb(i):lr(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const h=vt(i),p=n&&Ze(n)?vt(n):n;let m=h,x=Qd(m);for(;x&&n&&p!==m;){const b=Ns(x),y=x.getBoundingClientRect(),g=Mt(x),v=y.left+(x.clientLeft+parseFloat(g.paddingLeft))*b.x,_=y.top+(x.clientTop+parseFloat(g.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,f*=b.y,l+=v,u+=_,m=vt(x),x=Qd(m)}}return jl({width:d,height:f,x:l,y:u})}function Fh(e,t){const r=yc(e).scrollLeft;return t?t.left+r:zn(ur(e)).left+r}function Eb(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Fh(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function YR(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=ur(n),a=t?vc(t.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},u=lr(1);const d=lr(0),f=cr(n);if((f||!f&&!i)&&((ii(n)!=="body"||Io(o))&&(l=yc(n)),cr(n))){const p=zn(n);u=Ns(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=o&&!f&&!i?Eb(o,l,!0):lr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-l.scrollTop*u.y+d.y+h.y}}function zR(e){return Array.from(e.getClientRects())}function VR(e){const t=ur(e),r=yc(e),n=e.ownerDocument.body,s=Ln(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Ln(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Fh(e);const a=-r.scrollTop;return Mt(n).direction==="rtl"&&(o+=Ln(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function GR(e,t){const r=vt(e),n=ur(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=Ih();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const qR=new Set(["absolute","fixed"]);function KR(e,t){const r=zn(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=cr(e)?Ns(e):lr(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,u=n*i.y;return{width:o,height:a,x:l,y:u}}function yg(e,t,r){let n;if(t==="viewport")n=GR(e,r);else if(t==="document")n=VR(ur(e));else if(Ze(t))n=KR(t,r);else{const s=Cb(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return jl(n)}function Pb(e,t){const r=dn(e);return r===t||!Ze(r)||Hs(r)?!1:Mt(r).position==="fixed"||Pb(r,t)}function QR(e,t){const r=t.get(e);if(r)return r;let n=bo(e,[],!1).filter(a=>Ze(a)&&ii(a)!=="body"),s=null;const i=Mt(e).position==="fixed";let o=i?dn(e):e;for(;Ze(o)&&!Hs(o);){const a=Mt(o),l=Rh(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&qR.has(s.position)||Io(o)&&!l&&Pb(e,o))?n=n.filter(d=>d!==o):s=a,o=dn(o)}return t.set(e,n),n}function JR(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?vc(t)?[]:QR(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((u,d)=>{const f=yg(t,d,s);return u.top=Ln(f.top,u.top),u.right=Ys(f.right,u.right),u.bottom=Ys(f.bottom,u.bottom),u.left=Ln(f.left,u.left),u},yg(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function XR(e){const{width:t,height:r}=Nb(e);return{width:t,height:r}}function ZR(e,t,r){const n=cr(t),s=ur(t),i=r==="fixed",o=zn(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=lr(0);function u(){l.x=Fh(s)}if(n||!n&&!i)if((ii(t)!=="body"||Io(s))&&(a=yc(t)),n){const p=zn(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?Eb(s,a):lr(0),f=o.left+a.scrollLeft-l.x-d.x,h=o.top+a.scrollTop-l.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function wu(e){return Mt(e).position==="static"}function xg(e,t){if(!cr(e)||Mt(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ur(e)===r&&(r=r.ownerDocument.body),r}function jb(e,t){const r=vt(e);if(vc(e))return r;if(!cr(e)){let s=dn(e);for(;s&&!Hs(s);){if(Ze(s)&&!wu(s))return s;s=dn(s)}return r}let n=xg(e,t);for(;n&&uR(n)&&wu(n);)n=xg(n,t);return n&&Hs(n)&&wu(n)&&!Rh(n)?r:n||mR(e)||r}const eI=async function(e){const t=this.getOffsetParent||jb,r=this.getDimensions,n=await r(e.floating);return{reference:ZR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function tI(e){return Mt(e).direction==="rtl"}const rI={convertOffsetParentRelativeRectToViewportRelativeRect:YR,getDocumentElement:ur,getClippingRect:JR,getOffsetParent:jb,getElementRects:eI,getClientRects:zR,getDimensions:XR,getScale:Ns,isElement:Ze,isRTL:tI};function Tb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nI(e,t){let r=null,n;const s=ur(e);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;const m=da(f),x=da(s.clientWidth-(d+h)),b=da(s.clientHeight-(f+p)),y=da(d),v={rootMargin:-m+"px "+-x+"px "+-b+"px "+-y+"px",threshold:Ln(0,Ys(1,l))||1};let _=!0;function S(k){const D=k[0].intersectionRatio;if(D!==l){if(!_)return o();D?o(!1,D):n=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!Tb(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(S,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,v)}r.observe(e)}return o(!0),i}function sI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Ah(e),d=s||i?[...u?bo(u):[],...bo(t)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const f=u&&a?nI(u,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(y=>{let[g]=y;g&&g.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let m,x=l?zn(e):null;l&&b();function b(){const y=zn(e);x&&!Tb(x,y)&&r(),x=y,m=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(g=>{s&&g.removeEventListener("scroll",r),i&&g.removeEventListener("resize",r)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const iI=UR,oI=FR,bg=AR,aI=(e,t,r)=>{const n=new Map,s={platform:rI,...r},i={...s.platform,_c:n};return MR(e,t,{...s,platform:i})};var lI=typeof document<"u",cI=function(){},La=lI?w.useLayoutEffect:cI;function Ol(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Ol(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Ol(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ob(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wg(e,t){const r=Ob(e);return Math.round(t*r)/r}function _u(e){const t=w.useRef(e);return La(()=>{t.current=e}),t}function uI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(n);Ol(h,n)||p(n);const[m,x]=w.useState(null),[b,y]=w.useState(null),g=w.useCallback(N=>{N!==k.current&&(k.current=N,x(N))},[]),v=w.useCallback(N=>{N!==D.current&&(D.current=N,y(N))},[]),_=i||m,S=o||b,k=w.useRef(null),D=w.useRef(null),C=w.useRef(d),E=l!=null,P=_u(l),I=_u(s),F=_u(u),O=w.useCallback(()=>{if(!k.current||!D.current)return;const N={placement:t,strategy:r,middleware:h};I.current&&(N.platform=I.current),aI(k.current,D.current,N).then(T=>{const M={...T,isPositioned:F.current!==!1};A.current&&!Ol(C.current,M)&&(C.current=M,No.flushSync(()=>{f(M)}))})},[h,t,r,I,F]);La(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(N=>({...N,isPositioned:!1})))},[u]);const A=w.useRef(!1);La(()=>(A.current=!0,()=>{A.current=!1}),[]),La(()=>{if(_&&(k.current=_),S&&(D.current=S),_&&S){if(P.current)return P.current(_,S,O);O()}},[_,S,O,P,E]);const B=w.useMemo(()=>({reference:k,floating:D,setReference:g,setFloating:v}),[g,v]),$=w.useMemo(()=>({reference:_,floating:S}),[_,S]),z=w.useMemo(()=>{const N={position:r,left:0,top:0};if(!$.floating)return N;const T=wg($.floating,d.x),M=wg($.floating,d.y);return a?{...N,transform:"translate("+T+"px, "+M+"px)",...Ob($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:M}},[r,a,$.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:O,refs:B,elements:$,floatingStyles:z}),[d,O,B,$,z])}const dI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?bg({element:n.current,padding:s}).fn(r):{}:n?bg({element:n,padding:s}).fn(r):{}}}},fI=(e,t)=>({...iI(e),options:[e,t]}),hI=(e,t)=>({...oI(e),options:[e,t]}),pI=(e,t)=>({...dI(e),options:[e,t]}),mI={...n0};let _g=!1,gI=0;const Sg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+gI++;function vI(){const[e,t]=w.useState(()=>_g?Sg():void 0);return Tl(()=>{e==null&&t(Sg())},[]),w.useEffect(()=>{_g=!0},[]),e}const yI=mI.useId,Rb=yI||vI,xI=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:a=14,height:l=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:f,stroke:h,d:p,style:{transform:m,...x}={},...b}=t,y=Rb(),[g,v]=w.useState(!1);if(Tl(()=>{if(!s)return;Mt(s).direction==="rtl"&&v(!0)},[s]),!s)return null;const[_,S]=n.split("-"),k=_==="top"||_==="bottom";let D=f;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(D=null);const C=d*2,E=C/2,P=a/2*(u/-8+1),I=l/2*u/4,F=!!p,O=D&&S==="end"?"bottom":"top";let A=D&&S==="end"?"right":"left";D&&g&&(A=S==="end"?"left":"right");const B=(i==null?void 0:i.x)!=null?D||i.x:"",$=(i==null?void 0:i.y)!=null?D||i.y:"",z=p||"M0,0"+(" H"+a)+(" L"+(a-P)+","+(l-I))+(" Q"+a/2+","+l+" "+P+","+(l-I))+" Z",N={top:F?"rotate(180deg)":"",left:F?"rotate(90deg)":"rotate(-90deg)",bottom:F?"":"rotate(180deg)",right:F?"rotate(-90deg)":"rotate(90deg)"}[_];return c.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:F?a:a+C,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[A]:B,[O]:$,[_]:k||F?"100%":"calc(100% - "+C/2+"px)",transform:[N,m].filter(T=>!!T).join(" "),...x},children:[C>0&&c.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:h,strokeWidth:C+(p?0:1),d:z}),c.jsx("path",{stroke:C&&!p?b.fill:"none",d:z}),c.jsx("clipPath",{id:y,children:c.jsx("rect",{x:-E,y:E*(F?-1:1),width:a+C,height:a})})]})});function bI(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const wI=w.createContext(null),_I=w.createContext(null),SI=()=>{var e;return((e=w.useContext(wI))==null?void 0:e.id)||null},kI=()=>w.useContext(_I);function DI(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=Rb(),i=w.useRef({}),[o]=w.useState(()=>bI()),a=SI()!=null,[l,u]=w.useState(n.reference),d=IR((p,m,x)=>{i.current.openEvent=p?m:void 0,o.emit("openchange",{open:p,event:m,reason:x,nested:a}),r==null||r(p,m,x)}),f=w.useMemo(()=>({setPositionReference:u}),[]),h=w.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return w.useMemo(()=>({dataRef:i,open:t,onOpenChange:d,elements:h,events:o,floatingId:s,refs:f}),[t,d,h,o,s,f])}function NI(e){e===void 0&&(e={});const{nodeId:t}=e,r=DI({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[i,o]=w.useState(null),[a,l]=w.useState(null),d=(s==null?void 0:s.domReference)||i,f=w.useRef(null),h=kI();Tl(()=>{d&&(f.current=d)},[d]);const p=uI({...e,elements:{...s,...a&&{reference:a}}}),m=w.useCallback(v=>{const _=Ze(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;l(_),p.refs.setReference(_)},[p.refs]),x=w.useCallback(v=>{(Ze(v)||v===null)&&(f.current=v,o(v)),(Ze(p.refs.reference.current)||p.refs.reference.current===null||v!==null&&!Ze(v))&&p.refs.setReference(v)},[p.refs]),b=w.useMemo(()=>({...p.refs,setReference:x,setPositionReference:m,domReference:f}),[p.refs,x,m]),y=w.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),g=w.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return Tl(()=>{n.dataRef.current.floatingContext=g;const v=h==null?void 0:h.nodesRef.current.find(_=>_.id===t);v&&(v.context=g)}),w.useMemo(()=>({...p,context:g,refs:b,elements:y}),[p,b,y,g])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Xd=function(t,r){return Xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},Xd(t,r)};function Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var re=function(){return re=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},re.apply(this,arguments)};function ir(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var CI=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,i=e.className,o=e.children,a=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return j.createElement("div",{className:i,role:"dialog","aria-label":a,"aria-modal":"true"},o)},EI=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(i){var o,a=i.composed&&i.composedPath&&i.composedPath().find(function(l){return l instanceof Node})||i.target;r.current&&!r.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(o=n.current)===null||o===void 0||o.call(n,i))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},bc=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,a=EI(r,o);return j.createElement("div",{className:n,style:i,ref:function(l){a.current=l,s&&(s.current=l)}},t)},U;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(U||(U={}));function Ib(){var e=typeof window<"u"?window:globalThis;return e}var Lo=12;function ie(e){if(e==null)return new Date;var t=typeof e=="string"?bb(e):G(e);return wc(t)?t:new Date}function Su(e,t,r,n,s){s===void 0&&(s=ie());for(var i=Vs(r)||Vs($h()),o=Array.isArray(t)?t:[t],a=0,l=o;a<l.length;a++){var u=l[a],d=UO(e,u,s,{locale:i,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(wc(d)&&(!n||e===me(d,u,r)))return d}return null}function wc(e,t){return Sl(e)&&!Yn(e,new Date("1/1/1800"))}function me(e,t,r){if(r==="en")return qd(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?Vs(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||Vs($h()),qd(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function St(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&me(e,s,n)||""}var Mb=" - ";function PI(e,t,r){if(!e)return"";var n=St(e,r),s=t?St(t,r):"";return"".concat(n).concat(Mb).concat(s)}function jI(e,t){if(!(e!=null&&e.length))return"";var r=e[0]?St(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=St(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function ku(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,a=o===void 0?0:o;return Ra(Ia(Ma(e,a),i),n)}function TI(e){return Ph(e)}function OI(e,t){return me(e,"ddd",t)}function Aa(e){return Hn(e)}function on(e,t,r){var n=Vs(t||$h());return Or(e,{locale:n,weekStartsOn:r})}function Nr(e){return cb(e)}function ji(e){return mc(e)}function kg(e){return zd(e)}function Dg(){return Hn(ie())}function Ng(e){return ab(e)}function RI(e){return Q2(e)}function II(e){return lb(e)}function tr(e,t){return e&&t?zO(e,t):!e&&!t}function Xe(e,t){return e&&t?HO(e,t):!e&&!t}function Rl(e,t){return e&&t?YO(e,t):!e&&!t}function te(e,t){return e&&t?q2(e,t):!e&&!t}function Tn(e,t){return e&&t?VT(e,t):!e&&!t}function Ti(e,t,r){var n,s=Hn(t),i=ab(r);try{n=xo(e,{start:s,end:i})}catch{n=!1}return n}function $h(){var e=Ib();return e.__localeId__}function Vs(e){if(typeof e=="string"){var t=Ib();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function MI(e,t,r){return t(me(e,"EEEE",r))}function LI(e,t){return me(e,"EEEEEE",t)}function AI(e,t){return me(e,"EEE",t)}function Bh(e,t){return me(kt(ie(),e),"LLLL",t)}function Lb(e,t){return me(kt(ie(),e),"LLL",t)}function FI(e,t){return me(os(ie(),e),"QQQ",t)}function Ct(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,a=r.includeDates,l=r.includeDateIntervals,u=r.filterDate;return Ao(e,{minDate:n,maxDate:s})||i&&i.some(function(d){return d instanceof Date?te(e,d):te(e,d.date)})||o&&o.some(function(d){var f=d.start,h=d.end;return xo(e,{start:f,end:h})})||a&&!a.some(function(d){return te(e,d)})||l&&!l.some(function(d){var f=d.start,h=d.end;return xo(e,{start:f,end:h})})||u&&!u(ie(e))||!1}function Uh(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,a=i.end;return xo(e,{start:o,end:a})}):n&&n.some(function(i){var o;return i instanceof Date?te(e,i):te(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function Ab(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,a=r.filterDate;return Ao(e,{minDate:n?cb(n):void 0,maxDate:s?lb(s):void 0})||(i==null?void 0:i.some(function(l){return Xe(e,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return Xe(e,l)})||a&&!a(ie(e))||!1}function fa(e,t,r,n){var s=J(e),i=Ge(e),o=J(t),a=Ge(t),l=J(n);return s===o&&s===l?i<=r&&r<=a:s<o?l===s&&i<=r||l===o&&a>=r||l<o&&l>s:!1}function $I(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return Ao(e,{minDate:n,maxDate:s})||i&&i.some(function(a){return Xe(a instanceof Date?a:a.date,e)})||o&&!o.some(function(a){return Xe(a,e)})||!1}function ha(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,a=r.filterDate;return Ao(e,{minDate:n,maxDate:s})||(i==null?void 0:i.some(function(l){return Rl(e,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return Rl(e,l)})||a&&!a(ie(e))||!1}function pa(e,t,r){if(!t||!r||!Sl(t)||!Sl(r))return!1;var n=J(t),s=J(r);return n<=e&&s>=e}function Fa(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,a=r.filterDate,l=new Date(e,0,1);return Ao(l,{minDate:n?mc(n):void 0,maxDate:s?ub(s):void 0})||(i==null?void 0:i.some(function(u){return tr(l,u instanceof Date?u:u.date)}))||o&&!o.some(function(u){return tr(l,u)})||a&&!a(ie(l))||!1}function ma(e,t,r,n){var s=J(e),i=In(e),o=J(t),a=In(t),l=J(n);return s===o&&s===l?i<=r&&r<=a:s<o?l===s&&i<=r||l===o&&a>=r||l<o&&l>s:!1}function Ao(e,t){var r,n=t===void 0?{}:t,s=n.minDate,i=n.maxDate;return(r=s&&Us(e,s)<0||i&&Us(e,i)>0)!==null&&r!==void 0?r:!1}function Cg(e,t){return t.some(function(r){return kr(r)===kr(e)&&Dr(r)===Dr(e)&&sn(r)===sn(e)})}function Eg(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return n&&Cg(e,n)||s&&!Cg(e,s)||i&&!i(e)||!1}function Pg(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=ie();s=Ra(s,kr(e)),s=Ia(s,Dr(e)),s=Ma(s,sn(e));var i=ie();i=Ra(i,kr(r)),i=Ia(i,Dr(r)),i=Ma(i,sn(r));var o=ie();o=Ra(o,kr(n)),o=Ia(o,Dr(n)),o=Ma(o,sn(n));var a;try{a=!xo(s,{start:i,end:o})}catch{a=!1}return a}function jg(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=Mn(e,1);return n&&kl(n,i)>0||s&&s.every(function(o){return kl(o,i)>0})||!1}function Tg(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=qt(e,1);return n&&kl(i,n)>0||s&&s.every(function(o){return kl(i,o)>0})||!1}function BI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=mc(e),o=_b(i,1);return n&&Dl(n,o)>0||s&&s.every(function(a){return Dl(a,o)>0})||!1}function UI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=ub(e),o=Eh(i,1);return n&&Dl(o,n)>0||s&&s.every(function(a){return Dl(o,a)>0})||!1}function Og(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=Ws(e,1);return n&&Nl(n,i)>0||s&&s.every(function(o){return Nl(o,i)>0})||!1}function WI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,i=s===void 0?Lo:s,o=ji(Ws(e,i)),a=Gr(o,i).endPeriod,l=n&&J(n);return l&&l>a||!1}function Rg(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=_r(e,1);return n&&Nl(i,n)>0||s&&s.every(function(o){return Nl(i,o)>0})||!1}function HI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,i=s===void 0?Lo:s,o=_r(e,i),a=Gr(o,i).startPeriod,l=n&&J(n);return l&&l<a||!1}function Fb(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Us(s,t)>=0});return og(n)}else return r?og(r):t}function $b(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Us(s,t)<=0});return ig(n)}else return r?ig(r):t}function Ig(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(Sr(o)){var a=me(o,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(t)||(l.push(t),n.set(a,l))}else if(typeof o=="object"){var u=Object.keys(o),d=(r=u[0])!==null&&r!==void 0?r:"",f=o[d];if(typeof d=="string"&&Array.isArray(f))for(var h=0,p=f.length;h<p;h++){var m=f[h];if(m){var a=me(m,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(d)||(l.push(d),n.set(a,l))}}}}return n}function YI(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function zI(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,i=n.holidayName;if(Sr(s)){var o=me(s,"MM.dd.yyyy"),a=r.get(o)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&YI(a.holidayNames,[i]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?ir(ir([],l,!0),[i],!1):[i],r.set(o,a)}}}),r}function VI(e,t,r,n,s){for(var i=s.length,o=[],a=0;a<i;a++){var l=e,u=s[a];u&&(l=Y2(l,kr(u)),l=Yd(l,Dr(u)),l=G2(l,sn(u)));var d=Yd(e,(r+1)*n);un(l,t)&&Yn(l,d)&&u!=null&&o.push(u)}return o}function Mg(e){return e<10?"0".concat(e):"".concat(e)}function Gr(e,t){t===void 0&&(t=Lo);var r=Math.ceil(J(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function GI(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function Lg(e){var t=e.getSeconds(),r=e.getMilliseconds();return G(e.getTime()-t*1e3-r)}function qI(e,t){return Lg(e).getTime()===Lg(t).getTime()}function Ag(e){if(!Sr(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function Fg(e,t){if(!Sr(e)||!Sr(t))throw new Error("Invalid date received");var r=Ag(e),n=Ag(t);return Yn(r,n)}function Bb(e){return e.key===U.Space}var KI=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=j.createRef(),n.onTimeChange=function(s){var i,o;n.setState({time:s});var a=n.props.date,l=a instanceof Date&&!isNaN(+a),u=l?a:new Date;if(s!=null&&s.includes(":")){var d=s.split(":"),f=d[0],h=d[1];u.setHours(Number(f)),u.setMinutes(Number(h))}(o=(i=n.props).onChange)===null||o===void 0||o.call(i,u)},n.renderTimeInput=function(){var s=n.state.time,i=n.props,o=i.date,a=i.timeString,l=i.customTimeInput;return l?w.cloneElement(l,{date:o,value:s,onChange:n.onTimeChange}):j.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var u;(u=n.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){n.onTimeChange(u.target.value||a)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return j.createElement("div",{className:"react-datepicker__input-time-container"},j.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),j.createElement("div",{className:"react-datepicker-time__input-container"},j.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),QI=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===U.Space&&(n.preventDefault(),n.key=U.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isSameDay=function(n){return te(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Ct(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return Uh(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return te(r.props.day,on(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&te(n,on(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,i=n.highlightDates;if(!i)return!1;var o=me(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var n,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var a=me(i,"MM.dd.yyyy");return o.has(a)?[(n=o.get(a))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Ti(s,i,o)},r.isInSelectingRange=function(){var n,s=r.props,i=s.day,o=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,u=s.selectsDisabledDaysInRange,d=s.startDate,f=s.endDate,h=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(o||a||l)||!h||!u&&r.isDisabled()?!1:o&&f&&(Yn(h,f)||Tn(h,f))?Ti(i,h,f):a&&d&&(un(h,d)||Tn(h,d))||l&&d&&!f&&(un(h,d)||Tn(h,d))?Ti(i,d,h):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,a=s.selectsStart,l=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a?te(i,l):te(i,o)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,a=s.selectsEnd,l=s.selectsRange,u=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a||l?te(i,u):te(i,o)},r.isRangeStart=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:te(i,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:te(o,s)},r.isWeekend=function(){var n=WT(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Ge(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Ge(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(ie())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return Be("react-datepicker__day",s,"react-datepicker__day--"+OI(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,i=n.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,a=n.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,u=r.isDisabled()||r.isExcluded()?l:o;return"".concat(u," ").concat(me(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,i=n.holidays,o=i===void 0?new Map:i,a=n.excludeDates,l=me(s,"MM.dd.yyyy"),u=[];return o.has(l)&&u.push.apply(u,o.get(l).holidayNames),r.isExcluded()&&u.push(a==null?void 0:a.filter(function(d){return d instanceof Date?te(d,s):te(d==null?void 0:d.date,s)}).map(function(d){if(!(d instanceof Date))return d==null?void 0:d.message})),u.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&te(s,n))?0:-1;return i},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(fg(r.props.day),r.props.day):fg(r.props.day)},r.render=function(){return j.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&j.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),JI=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===U.Space&&(n.preventDefault(),n.key=U.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!te(r.props.date,r.props.selected)&&te(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||te(r.props.date,r.props.selected)&&te(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&te(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,a=r.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&te(this.props.date,this.props.selected)};return j.createElement("div",{ref:this.weekNumberEl,className:Be(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),XI=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Ct(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,i){for(var o,a,l,u=new Date(n),d=0;d<7;d++){var f=new Date(n);f.setDate(f.getDate()+d);var h=!r.isDisabled(f);if(h){u=f;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(u,s,i),r.props.showWeekPicker&&r.handleDayClick(u,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((l=(a=r.props).setOpen)===null||l===void 0||l.call(a,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):TI(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=zt(n,6),i=new Date(n);i<=s;){if(!r.isDisabled(i))return!1;i=zt(i,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],i=r.formatWeekNumber(n);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,i):void 0;s.push(j.createElement(JI,re({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=zt(n,a);return j.createElement(QI,re({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:r.handleDayClick.bind(r,l),onMouseEnter:r.handleDayMouseEnter.bind(r,l)}))}))},r.startOfWeek=function(){return on(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!te(r.startOfWeek(),r.props.selected)&&te(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":te(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return j.createElement("div",{className:Be(r)},this.renderDays())},t}(w.Component),Si,ZI=6,Cs={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Du=(Si={},Si[Cs.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Si[Cs.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Si[Cs.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Si),ga=1;function $g(e,t){return e?Cs.FOUR_COLUMNS:t?Cs.TWO_COLUMNS:Cs.THREE_COLUMNS}var eM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=ir([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=ir([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Ct(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return Uh(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Xe(kt(i,n),o)},r.isRangeStartQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Rl(os(i,n),o)},r.isRangeEndMonth=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Xe(kt(i,n),a)},r.isRangeEndQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Rl(os(i,n),a)},r.isInSelectingRangeMonth=function(n){var s,i=r.props,o=i.day,a=i.selectsStart,l=i.selectsEnd,u=i.selectsRange,d=i.startDate,f=i.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?fa(h,f,n,o):l&&d||u&&d&&!f?fa(d,h,n,o):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,a=i.startDate,l=i.selectsStart,u=kt(o,n),d=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l?Xe(u,d):Xe(u,a)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,a=i.endDate,l=i.selectsEnd,u=i.selectsRange,d=kt(o,n),f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l||u?Xe(d,f):Xe(d,a)},r.isInSelectingRangeQuarter=function(n){var s,i=r.props,o=i.day,a=i.selectsStart,l=i.selectsEnd,u=i.selectsRange,d=i.startDate,f=i.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?ma(h,f,n,o):l&&d||u&&d&&!f?ma(d,h,n,o):!1},r.isWeekInMonth=function(n){var s=r.props.day,i=zt(n,6);return Xe(n,s)||Xe(i,s)},r.isCurrentMonth=function(n,s){return J(n)===J(ie())&&s===Ge(ie())},r.isCurrentQuarter=function(n,s){return J(n)===J(ie())&&s===In(ie())},r.isSelectedMonth=function(n,s,i){return Ge(i)===s&&J(n)===J(i)},r.isSelectMonthInList=function(n,s,i){return i.some(function(o){return r.isSelectedMonth(n,s,o)})},r.isSelectedQuarter=function(n,s,i){return In(n)===s&&J(n)===J(i)},r.isMonthSelected=function(){var n=r.props,s=n.day,i=n.selected,o=n.selectedDates,a=n.selectsMultiple,l=Ge(s);return a?o==null?void 0:o.some(function(u){return r.isSelectedMonth(s,l,u)}):!!i&&r.isSelectedMonth(s,l,i)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,i=0,o=!1,a=on(Nr(r.props.day),r.props.locale,r.props.calendarStartDay),l=function(m){return r.props.showWeekPicker?on(m,r.props.locale,r.props.calendarStartDay):r.props.preSelection},u=function(m){return r.props.showWeekPicker?on(m,r.props.locale,r.props.calendarStartDay):r.props.selected},d=r.props.selected?u(r.props.selected):void 0,f=r.props.preSelection?l(r.props.preSelection):void 0;n.push(j.createElement(XI,re({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:a,month:Ge(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:d,preSelection:f,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,a=_l(a,1);var h=s&&i>=ZI,p=!s&&!r.isWeekInMonth(a);if(h||p)if(r.props.peekNextMonth)o=!0;else break}return n},r.onMonthClick=function(n,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,a=i.labelDate;o||r.handleDayClick(Nr(a),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(Nr(o))},r.handleMonthNavigation=function(n,s){var i,o,a,l;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(l=(a=r.MONTH_REFS[n])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},r.handleKeyboardNavigation=function(n,s,i){var o,a=r.props,l=a.selected,u=a.preSelection,d=a.setPreSelection,f=a.minDate,h=a.maxDate,p=a.showFourColumnMonthYearPicker,m=a.showTwoColumnMonthYearPicker;if(u){var x=$g(p,m),b=r.getVerticalOffset(x),y=(o=Du[x])===null||o===void 0?void 0:o.grid,g=function(D,C,E){var P,I,F=C,O=E;switch(D){case U.ArrowRight:F=qt(C,ga),O=E===11?0:E+ga;break;case U.ArrowLeft:F=Mn(C,ga),O=E===0?11:E-ga;break;case U.ArrowUp:F=Mn(C,b),O=!((P=y==null?void 0:y[0])===null||P===void 0)&&P.includes(E)?E+12-b:E-b;break;case U.ArrowDown:F=qt(C,b),O=!((I=y==null?void 0:y[y.length-1])===null||I===void 0)&&I.includes(E)?E-12+b:E+b;break}return{newCalculatedDate:F,newCalculatedMonth:O}},v=function(D,C,E){for(var P=40,I=D,F=!1,O=0,A=g(I,C,E),B=A.newCalculatedDate,$=A.newCalculatedMonth;!F;){if(O>=P){B=C,$=E;break}if(f&&B<f){I=U.ArrowRight;var z=g(I,B,$);B=z.newCalculatedDate,$=z.newCalculatedMonth}if(h&&B>h){I=U.ArrowLeft;var z=g(I,B,$);B=z.newCalculatedDate,$=z.newCalculatedMonth}if($I(B,r.props)){var z=g(I,B,$);B=z.newCalculatedDate,$=z.newCalculatedMonth}else F=!0;O++}return{newCalculatedDate:B,newCalculatedMonth:$}};if(s===U.Enter){r.isMonthDisabled(i)||(r.onMonthClick(n,i),d==null||d(l));return}var _=v(s,u,i),S=_.newCalculatedDate,k=_.newCalculatedMonth;switch(s){case U.ArrowRight:case U.ArrowLeft:case U.ArrowUp:case U.ArrowDown:r.handleMonthNavigation(k,S);break}}},r.getVerticalOffset=function(n){var s,i;return(i=(s=Du[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(n,s){var i=r.props,o=i.disabledKeyboardNavigation,a=i.handleOnMonthKeyDown,l=n.key;l!==U.Tab&&n.preventDefault(),o||r.handleKeyboardNavigation(n,l,s),a&&a(n)},r.onQuarterClick=function(n,s){var i=os(r.props.day,s);ha(i,r.props)||r.handleDayClick(kg(i),n)},r.onQuarterMouseEnter=function(n){var s=os(r.props.day,n);ha(s,r.props)||r.handleDayMouseEnter(kg(s))},r.handleQuarterNavigation=function(n,s){var i,o,a,l;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(l=(a=r.QUARTER_REFS[n-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},r.onQuarterKeyDown=function(n,s){var i,o,a=n.key;if(!r.props.disabledKeyboardNavigation)switch(a){case U.Enter:r.onQuarterClick(n,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case U.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,Eh(r.props.preSelection,1));break;case U.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,_b(r.props.preSelection,1));break}},r.isMonthDisabledForLabelDate=function(n){var s,i=r.props,o=i.day,a=i.minDate,l=i.maxDate,u=i.excludeDates,d=i.includeDates,f=kt(o,n);return{isDisabled:(s=(a||l||u||d)&&Ab(f,r.props))!==null&&s!==void 0?s:!1,labelDate:f}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate,l=s.preSelection,u=s.monthClassName,d=u?u(kt(i,n)):void 0,f=r.getSelection();return Be("react-datepicker__month-text","react-datepicker__month-".concat(n),d,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":f?r.isSelectMonthInList(i,n,f):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&l&&r.isSelectedMonth(i,n,l)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":o&&a?fa(o,a,n,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(i,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=Ge(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=In(r.props.preSelection),i=ha(r.props.day,r.props),o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(n){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,u=s.day,d=s.locale,f=kt(u,n),h=r.isDisabled(f)||r.isExcluded(f)?l:o;return"".concat(h," ").concat(me(f,"MMMM yyyy",d))},r.getQuarterClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,a=s.endDate,l=s.selected,u=s.minDate,d=s.maxDate,f=s.excludeDates,h=s.includeDates,p=s.filterDate,m=s.preSelection,x=s.disabledKeyboardNavigation,b=(u||d||f||h||p)&&ha(os(i,n),r.props);return Be("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":l?r.isSelectedQuarter(i,n,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!x&&m&&r.isSelectedQuarter(i,n,m)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":o&&a?ma(o,a,n,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,n)})},r.getMonthContent=function(n){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,a=s.locale,l=s.day,u=Lb(n,a),d=Bh(n,a);return o?o(n,u,d,l):i?d:u},r.getQuarterContent=function(n){var s,i=r.props,o=i.renderQuarterContent,a=i.locale,l=FI(n,a);return(s=o==null?void 0:o(n,l))!==null&&s!==void 0?s:l},r.renderMonths=function(){var n,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,u=(n=Du[$g(o,i)])===null||n===void 0?void 0:n.grid;return u==null?void 0:u.map(function(d,f){return j.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(h,p){return j.createElement("div",{ref:r.MONTH_REFS[h],key:p,onClick:function(m){r.onMonthClick(m,h)},onKeyDown:function(m){Bb(m)&&(m.preventDefault(),m.key=U.Enter),r.onMonthKeyDown(m,h)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(h)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(h)}:void 0,tabIndex:Number(r.getTabIndex(h)),className:r.getMonthClassNames(h),"aria-disabled":r.isMonthDisabled(h),role:"option","aria-label":r.getAriaLabel(h),"aria-current":r.isCurrentMonth(a,h)?"date":void 0,"aria-selected":l?r.isSelectedMonth(a,h,l):void 0},r.getMonthContent(h))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,i=n.selected,o=[1,2,3,4];return j.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(a,l){return j.createElement("div",{key:l,ref:r.QUARTER_REFS[l],role:"option",onClick:function(u){r.onQuarterClick(u,a)},onKeyDown:function(u){r.onQuarterKeyDown(u,a)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(a)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(a)}:void 0,className:r.getQuarterClassNames(a),"aria-selected":i?r.isSelectedQuarter(s,a,i):void 0,tabIndex:Number(r.getQuarterTabIndex(a)),"aria-current":r.isCurrentQuarter(s,a)?"date":void 0},r.getQuarterContent(a))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,i=n.selectsStart,o=n.selectsEnd,a=n.showMonthYearPicker,l=n.showQuarterYearPicker,u=n.showWeekPicker;return Be("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":u})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,a=o===void 0?"Month ":o,l=a?a.trim()+" ":"";return j.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(me(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),tM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return j.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?j.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return j.createElement(bc,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),rM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,i){return j.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(n){return j.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return j.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},j.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),j.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return j.createElement(tM,re({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,n)];return s&&i.unshift(r.renderDropdown(n)),i},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return Lb(i,r.props.locale)}:function(i){return Bh(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return j.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function nM(e,t){for(var r=[],n=Nr(e),s=Nr(t);!un(n,s);)r.push(ie(n)),n=qt(n,1);return r}var sM=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var i=Kd(s),o=tr(n.props.date,s)&&Xe(n.props.date,s);return j.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":o?"true":void 0},o?j.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",me(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:nM(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=Be({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return j.createElement(bc,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),iM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Nr(r.props.minDate),s=Nr(r.props.maxDate),i=[];!un(n,s);){var o=Kd(n);i.push(j.createElement("option",{key:o,value:o},me(n,r.props.dateFormat,r.props.locale))),n=qt(n,1)}return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return j.createElement("select",{value:Kd(Nr(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=me(r.props.date,r.props.dateFormat,r.props.locale);return j.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},j.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),j.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return j.createElement(sM,re({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=ie(n);tr(r.props.date,s)&&Xe(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return j.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),oM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(n){var s,i;(r.props.minTime||r.props.maxTime)&&Pg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Eg(n,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&qI(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&Pg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Eg(n,r.props)},r.liClasses=function(n){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(kr(n)*3600+Dr(n)*60+sn(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(n,s){var i,o;n.key===U.Space&&(n.preventDefault(),n.key=U.Enter),(n.key===U.ArrowUp||n.key===U.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===U.ArrowDown||n.key===U.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===U.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,n)},r.renderTimes=function(){for(var n,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,a=r.props.selected||r.props.openToDate||ie(),l=Aa(a),u=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),d=60*GI(a),f=d/o,h=0;h<f;h++){var p=Yd(l,h*o);if(s.push(p),u){var m=VI(l,p,h,o,u);s=s.concat(m)}}var x=s.reduce(function(b,y){return y.getTime()<=a.getTime()?y:b},s[0]);return s.map(function(b){return j.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===x&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===x?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},me(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?j.createElement(j.Fragment,null):j.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},j.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return j.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),j.createElement("div",{className:"react-datepicker__time"},j.createElement("div",{className:"react-datepicker__time-box"},j.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),Bg=3,aM=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=ir([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Ct(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Uh(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var i=function(){var o,a;(a=(o=n.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(s,i){n.props.onDayClick&&n.props.onDayClick(s,i)},n.handleYearNavigation=function(s,i){var o,a,l,u,d=n.props,f=d.date,h=d.yearItemNumber;if(!(f===void 0||h===void 0)){var p=Gr(f,h).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((a=(o=n.props).setPreSelection)===null||a===void 0||a.call(o,i),s-p<0?n.updateFocusOnPaginate(h-(p-s)):s-p>=h?n.updateFocusOnPaginate(Math.abs(h-(s-p))):(u=(l=n.YEAR_REFS[s-p])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus())}},n.isSameDay=function(s,i){return te(s,i)},n.isCurrentYear=function(s){return s===J(ie())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&tr(er(ie(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&tr(er(ie(),s),n.props.endDate)},n.isInRange=function(s){return pa(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var i=n.props,o=i.selectsStart,a=i.selectsEnd,l=i.selectsRange,u=i.startDate,d=i.endDate;return!(o||a||l)||!n.selectingDate()?!1:o&&d?pa(s,n.selectingDate(),d):a&&u||l&&u&&!d?pa(s,u,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,a=o.startDate,l=o.selectsStart,u=er(ie(),s);return l?tr(u,(i=n.selectingDate())!==null&&i!==void 0?i:null):tr(u,a??null)},n.isSelectingRangeEnd=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,a=o.endDate,l=o.selectsEnd,u=o.selectsRange,d=er(ie(),s);return l||u?tr(d,(i=n.selectingDate())!==null&&i!==void 0?i:null):tr(d,a??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,o=i.minDate,a=i.maxDate,l=i.excludeDates,u=i.includeDates,d=i.filterDate,f=ji(er(n.props.date,s)),h=(o||a||l||u||d)&&Fa(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!te(f,ji(n.props.selected))&&te(f,ji(n.props.preSelection))&&!h}},n.isSelectedYear=function(s){var i=n.props,o=i.selectsMultiple,a=i.selected,l=i.selectedDates;return o?l==null?void 0:l.some(function(u){return s===J(u)}):!!a&&s===J(a)},n.onYearClick=function(s,i){var o=n.props.date;o!==void 0&&n.handleYearClick(ji(er(o,i)),s)},n.onYearKeyDown=function(s,i){var o,a,l=s.key,u=n.props,d=u.date,f=u.yearItemNumber,h=u.handleOnKeyDown;if(l!==U.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case U.Enter:if(n.props.selected==null)break;n.onYearClick(s,i),(a=(o=n.props).setPreSelection)===null||a===void 0||a.call(o,n.props.selected);break;case U.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,_r(n.props.preSelection,1));break;case U.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,Ws(n.props.preSelection,1));break;case U.ArrowUp:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var p=Gr(d,f).startPeriod,m=Bg,x=i-m;if(x<p){var b=f%m;i>=p&&i<p+b?m=b:m+=b,x=i-m}n.handleYearNavigation(x,Ws(n.props.preSelection,m));break}case U.ArrowDown:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var y=Gr(d,f).endPeriod,m=Bg,x=i+m;if(x>y){var b=f%m;i<=y&&i>y-b?m=b:m+=b,x=i+m}n.handleYearNavigation(x,_r(n.props.preSelection,m));break}}h&&h(s)},n.getYearClassNames=function(s){var i=n.props,o=i.date,a=i.minDate,l=i.maxDate,u=i.excludeDates,d=i.includeDates,f=i.filterDate,h=i.yearClassName;return Be("react-datepicker__year-text","react-datepicker__year-".concat(s),o?h==null?void 0:h(er(o,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(a||l||u||d||f)&&Fa(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=J(n.props.preSelection),o=Fa(s,n.props);return s===i&&!o?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,i=s.date,o=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(i===void 0)return null;for(var u=Gr(i,o),d=u.startPeriod,f=u.endPeriod,h=function(x){n.push(j.createElement("div",{ref:p.YEAR_REFS[x-d],onClick:function(b){r.onYearClick(b,x)},onKeyDown:function(b){Bb(b)&&(b.preventDefault(),b.key=U.Enter),r.onYearKeyDown(b,x)},tabIndex:Number(p.getYearTabIndex(x)),className:p.getYearClassNames(x),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return a(b,x)},onPointerEnter:p.props.usePointerEvent?function(b){return a(b,x)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return l(b,x)},onPointerLeave:p.props.usePointerEvent?function(b){return l(b,x)}:void 0,key:x,"aria-current":p.isCurrentYear(x)?"date":void 0},p.getYearContent(x)))},p=this,m=d;m<=f;m++)h(m);return j.createElement("div",{className:"react-datepicker__year"},j.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function lM(e,t,r,n){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,a=!0;r&&(a=J(r)<=o),n&&a&&(a=J(n)>=o),a&&s.push(o)}return s}var cM=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var a=n.props.year,l=n.state.yearsList.map(function(f){return j.createElement("div",{className:a===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:n.onChange.bind(n,f),"aria-selected":a===f?"true":void 0},a===f?j.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",f)}),u=n.props.minDate?J(n.props.minDate):null,d=n.props.maxDate?J(n.props.maxDate):null;return(!d||!n.state.yearsList.find(function(f){return f===d}))&&l.unshift(j.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},j.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!n.state.yearsList.find(function(f){return f===u}))&&l.push(j.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},j.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(a){n.props.onChange(a)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(a){var l=n.state.yearsList.map(function(u){return u+a});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return n.state={yearsList:lM(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=Be({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return j.createElement(bc,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),uM=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?J(r.props.minDate):1900,s=r.props.maxDate?J(r.props.maxDate):2100,i=[],o=n;o<=s;o++)i.push(j.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return j.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return j.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},j.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),j.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return j.createElement(cM,re({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return j.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),dM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],fM=function(e){var t=(e.className||"").split(/\s+/);return dM.some(function(r){return t.indexOf(r)>=0})},hM=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var i,o;fM(s.target)&&((o=(i=n.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},n.getDateInView=function(){var s=n.props,i=s.preSelection,o=s.selected,a=s.openToDate,l=Fb(n.props),u=$b(n.props),d=ie(),f=a||o||i;return f||(l&&Yn(d,l)?l:u&&un(d,u)?u:d)},n.increaseMonth=function(){n.setState(function(s){var i=s.date;return{date:qt(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var i=s.date;return{date:Mn(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,i,o){n.props.onSelect(s,i,o),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,i){n.setState({selectingDate:er(ie(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,i)},n.handleYearMouseLeave=function(s,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,i)},n.handleYearChange=function(s){var i,o,a,l;(o=(i=n.props).onYearChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Ct(s,n.props))return s;for(var i=Nr(s),o=II(s),a=K2(o,i),l=null,u=0;u<=a;u++){var d=zt(i,u);if(!Ct(d,n.props)){l=d;break}}return l},n.handleMonthChange=function(s){var i,o,a,l=(i=n.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(a=(o=n.props).setOpen)===null||a===void 0||a.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(s){var i,o;(o=(i=n.props).onMonthChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(i){var o=i.date;return{date:er(o,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(i){var o=i.date;return{date:kt(o,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(i){var o=i.date;return{date:er(kt(o,Ge(s)),J(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var i=on(s,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(j.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(a){var l=zt(i,a),u=n.formatWeekday(l,n.props.locale),d=n.props.weekDayClassName?n.props.weekDayClassName(l):void 0;return j.createElement("div",{key:a,"aria-label":me(l,"EEEE",n.props.locale),className:Be("react-datepicker__day-name",d)},u)}))},n.formatWeekday=function(s,i){return n.props.formatWeekDay?MI(s,n.props.formatWeekDay,i):n.props.useWeekdaysShort?AI(s,i):LI(s,i)},n.decreaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:Ws(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,i,o;if(!n.props.renderCustomHeader){var a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:l,d=Mn(n.state.date,u),f;switch(!0){case n.props.showMonthYearPicker:f=Og(n.state.date,n.props);break;case n.props.showYearPicker:f=WI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:f=BI(n.state.date,n.props);break;default:f=jg(d,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&f||n.props.showTimeSelectOnly)){var h=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],m=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(m=n.decreaseYear),f&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),m=void 0);var x=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,g=y===void 0?t.defaultProps.previousMonthButtonLabel:y,v=b.previousYearButtonLabel,_=v===void 0?t.defaultProps.previousYearButtonLabel:v,S=n.props,k=S.previousMonthAriaLabel,D=k===void 0?typeof g=="string"?g:"Previous Month":k,C=S.previousYearAriaLabel,E=C===void 0?typeof _=="string"?_:"Previous Year":C;return j.createElement("button",{type:"button",className:p.join(" "),onClick:m,onKeyDown:n.props.handleOnKeyDown,"aria-label":x?E:D},j.createElement("span",{className:h.join(" ")},x?_:g))}}},n.increaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:_r(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=Rg(n.state.date,n.props);break;case n.props.showYearPicker:i=HI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=UI(n.state.date,n.props);break;default:i=Tg(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=void 0);var u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,d=n.props,f=d.nextMonthButtonLabel,h=f===void 0?t.defaultProps.nextMonthButtonLabel:f,p=d.nextYearButtonLabel,m=p===void 0?t.defaultProps.nextYearButtonLabel:p,x=n.props,b=x.nextMonthAriaLabel,y=b===void 0?typeof h=="string"?h:"Next Month":b,g=x.nextYearAriaLabel,v=g===void 0?typeof m=="string"?m:"Next Year":g;return j.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":u?v:y},j.createElement("span",{className:a.join(" ")},u?m:h))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),j.createElement("h2",{className:i.join(" ")},me(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return j.createElement(uM,re({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:J(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return j.createElement(rM,re({},t.defaultProps,n.props,{month:Ge(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return j.createElement(iM,re({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(Dg(),s),n.props.setPreSelection&&n.props.setPreSelection(Dg())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return j.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return j.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),j.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(o!==0),n.renderMonthYearDropdown(o!==0),n.renderYearDropdown(o!==0)),j.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(s){var i,o,a=s.monthDate,l=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var u=jg(n.state.date,n.props),d=Tg(n.state.date,n.props),f=Og(n.state.date,n.props),h=Rg(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return j.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(o=(i=n.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,re(re({},n.state),{customHeaderCount:l,monthDate:a,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:d,prevYearButtonDisabled:f,nextYearButtonDisabled:h})),p&&j.createElement("div",{className:"react-datepicker__day-names"},n.header(a)))},n.renderYearHeader=function(s){var i=s.monthDate,o=n.props,a=o.showYearPicker,l=o.yearItemNumber,u=l===void 0?t.defaultProps.yearItemNumber:l,d=Gr(i,u),f=d.startPeriod,h=d.endPeriod;return j.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(f," - ").concat(h):J(i))},n.renderHeader=function(s){var i=s.monthDate,o=s.i,a=o===void 0?0:o,l={monthDate:i,i:a};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var s,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var o=[],a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?_r(n.state.date,l):Mn(n.state.date,l),d=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:l,f=0;f<a;++f){var h=f-d+l,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?_r(u,h):qt(u,h),m="month-".concat(f),x=f<a-1,b=f>0;o.push(j.createElement("div",{key:m,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:f}),j.createElement(eM,re({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:f,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:x,monthShowsDuplicateDaysStart:b}))))}return o}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return j.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),j.createElement(aM,re({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return j.createElement(oM,re({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,i=s&&wc(s)&&!!n.props.selected,o=i?"".concat(Mg(s.getHours()),":").concat(Mg(s.getMinutes())):"";if(n.props.showTimeInput)return j.createElement(KI,re({},t.defaultProps,n.props,{date:s,timeString:o,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,i=Gr(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,a=i.endPeriod,l;return n.props.showYearPicker?l="".concat(o," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=J(n.state.date):l="".concat(Bh(Ge(n.state.date),n.props.locale)," ").concat(J(n.state.date)),j.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return j.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Lo}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!te(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Xe(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!te(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||CI;return j.createElement(bc,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},j.createElement("div",{style:{display:"contents"},ref:this.containerRef},j.createElement(r,{className:Be("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),pM=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return j.createElement("i",{className:"".concat(i," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(j.isValidElement(t)){var o=t;return j.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(n),onClick:function(a){typeof o.props.onClick=="function"&&o.props.onClick(a),typeof s=="function"&&s(a)}})}return j.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},j.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Ub=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return oy.createPortal(this.props.children,this.el)},t}(w.Component),mM="[tabindex], a, button, input, select, textarea",gM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Wb=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(mM),1,-1).filter(gM)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?j.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},j.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,j.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function vM(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=w.useRef(null),o=NI(re({open:!s,whileElementsMounted:sI,placement:r.popperPlacement,middleware:ir([hI({padding:15}),fI(10),pI({element:i})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),a=re(re({},r),{hidePopper:s,popperProps:re(re({},o),{arrowRef:i})});return j.createElement(e,re({},a))};return t}var yM=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,a=r.popperComponent,l=r.targetComponent,u=r.enableTabLoop,d=r.popperOnKeyDown,f=r.portalId,h=r.portalHost,p=r.popperProps,m=r.showArrow,x=void 0;if(!o){var b=Be("react-datepicker-popper",n);x=j.createElement(Wb,{enableTabLoop:u},j.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:d},a,m&&j.createElement(xI,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(x=w.createElement(this.props.popperContainer,{},x)),f&&!o&&(x=j.createElement(Ub,{portalId:f,portalHost:h},x));var y=Be("react-datepicker-wrapper",s);return j.createElement(j.Fragment,null,j.createElement("div",{ref:p.refs.setReference,className:y},l),x)},t}(w.Component),xM=vM(yM),Ug="react-datepicker-ignore-onclickoutside";function bM(e,t){return e&&t?Ge(e)!==Ge(t)||J(e)!==J(t):e!==t}var Nu="Date input not valid.",wM=function(e){Ae(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:ie()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var a=new Date(o.date);return wc(a)?ir(ir([],i,!0),[re(re({},o),{date:a})],!1):i},[])},n.calcInitialState=function(){var s,i=n.getPreSelection(),o=Fb(n.props),a=$b(n.props),l=o&&Yn(i,Aa(o))?o:a&&un(i,Ng(a))?a:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:l,highlightDates:Ig(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(re(re({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(re(re({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},n.setBlur=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,i){i===void 0&&(i=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Cu},function(){s||n.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Sr(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var i,o,a=n.state.wasHidden,l=a?n.state.open:!0;a&&n.resetHiddenStatus(),n.state.preventFocus||((o=(i=n.props).onFocus)===null||o===void 0||o.call(i,s),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var i,o;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((o=(i=n.props).onBlur)===null||o===void 0||o.call(i,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var i,o;n.props.inline||n.setOpen(!1),(o=(i=n.props).onClickOutside)===null||o===void 0||o.call(i,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,i,o,a,l,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var f=u[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,u),!f||typeof f.isDefaultPrevented!="function"||f.isDefaultPrevented()))){n.setState({inputValue:(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:null,lastPreSelectChange:_M});var h=n.props,p=h.selectsRange,m=h.startDate,x=h.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=n.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,g=(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:"";if(p){var v=g.split(b.includes("-")?Mb:"-",2).map(function(I){return I.trim()}),_=v[0],S=v[1],k=Su(_??"",b,n.props.locale,y),D=Su(S??"",b,n.props.locale,y),C=(m==null?void 0:m.getTime())!==(k==null?void 0:k.getTime()),E=(x==null?void 0:x.getTime())!==(D==null?void 0:D.getTime());if(!C&&!E||k&&Ct(k,n.props)||D&&Ct(D,n.props))return;(a=(o=n.props).onChange)===null||a===void 0||a.call(o,[k,D],f)}else{var P=Su(g,b,n.props.locale,y,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(P||!g)&&n.setSelected(P,f,!0)}}},n.handleSelect=function(s,i,o){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(s,i,!1,o),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var a=n.props,l=a.startDate,u=a.endDate;l&&!u&&(n.props.swapRange||!Fg(s,l))&&n.setOpen(!1)}}},n.setSelected=function(s,i,o,a){var l,u,d=s;if(n.props.showYearPicker){if(d!==null&&Fa(J(d),n.props))return}else if(n.props.showMonthYearPicker){if(d!==null&&Ab(d,n.props))return}else if(d!==null&&Ct(d,n.props))return;var f=n.props,h=f.onChange,p=f.selectsRange,m=f.startDate,x=f.endDate,b=f.selectsMultiple,y=f.selectedDates,g=f.minTime,v=f.swapRange;if(!Tn(n.props.selected,d)||n.props.allowSameDay||p||b)if(d!==null&&(n.props.selected&&(!o||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(d=ku(d,{hour:kr(n.props.selected),minute:Dr(n.props.selected),second:sn(n.props.selected)})),!o&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&g&&(d=ku(d,{hour:g.getHours(),minute:g.getMinutes(),second:g.getSeconds()})),n.props.inline||n.setState({preSelection:d}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),p){var _=!m&&!x,S=m&&!x,k=m&&x;_?h==null||h([d,null],i):S&&(d===null?h==null||h([null,null],i):Fg(d,m)?v?h==null||h([d,m],i):h==null||h([d,null],i):h==null||h([m,d],i)),k&&(h==null||h([d,null],i))}else if(b){if(d!==null)if(!(y!=null&&y.length))h==null||h([d],i);else{var D=y.some(function(E){return te(E,d)});if(D){var C=y.filter(function(E){return!te(E,d)});h==null||h(C,i)}else h==null||h(ir(ir([],y,!0),[d],!1),i)}}else h==null||h(d,i);o||((u=(l=n.props).onSelect)===null||u===void 0||u.call(l,d,i),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var i=Sr(n.props.minDate),o=Sr(n.props.maxDate),a=!0;if(s){var l=Aa(s);if(i&&o)a=Ti(s,n.props.minDate,n.props.maxDate);else if(i){var u=Aa(n.props.minDate);a=un(s,u)||Tn(l,u)}else if(o){var d=Ng(n.props.maxDate);a=Yn(s,d)||Tn(l,d)}}a&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var i,o;if(!(n.props.selectsRange||n.props.selectsMultiple)){var a=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?s:ku(a,{hour:kr(s),minute:Dr(s)});n.setState({preSelection:l}),(o=(i=n.props).onChange)===null||o===void 0||o.call(i,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(s=n.props).onInputClick)===null||i===void 0||i.call(s)},n.onInputKeyDown=function(s){var i,o,a,l,u,d;(o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s);var f=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(f===U.ArrowDown||f===U.ArrowUp||f===U.Enter)&&((a=n.onInputClick)===null||a===void 0||a.call(n));return}if(n.state.open){if(f===U.ArrowDown||f===U.ArrowUp){s.preventDefault();var h=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(h);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var m=ie(n.state.preSelection);f===U.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Cu?(n.handleSelect(m,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(m)):n.setOpen(!1)):f===U.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):f===U.Tab&&n.setOpen(!1),n.inputOk()||(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Nu})}},n.onPortalKeyDown=function(s){var i=s.key;i===U.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var i,o,a,l,u,d,f=n.props,h=f.minDate,p=f.maxDate,m=f.disabledKeyboardNavigation,x=f.showWeekPicker,b=f.shouldCloseOnSelect,y=f.locale,g=f.calendarStartDay,v=f.adjustDateOnChange,_=f.inline;if((o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s),!m){var S=s.key,k=s.shiftKey,D=ie(n.state.preSelection),C=function(B,$){var z=$;switch(B){case U.ArrowRight:z=x?_l($,1):zt($,1);break;case U.ArrowLeft:z=x?hg($,1):VO($,1);break;case U.ArrowUp:z=hg($,1);break;case U.ArrowDown:z=_l($,1);break;case U.PageUp:z=k?Ws($,1):Mn($,1);break;case U.PageDown:z=k?_r($,1):qt($,1);break;case U.Home:z=on($,y,g);break;case U.End:z=RI($);break}return z},E=function(B,$){for(var z=40,N=B,T=!1,M=0,H=C(B,$);!T;){if(M>=z){H=$;break}h&&H<h&&(N=U.ArrowRight,H=Ct(h,n.props)?C(N,H):h),p&&H>p&&(N=U.ArrowLeft,H=Ct(p,n.props)?C(N,H):p),Ct(H,n.props)?((N===U.PageUp||N===U.Home)&&(N=U.ArrowRight),(N===U.PageDown||N===U.End)&&(N=U.ArrowLeft),H=C(N,H)):T=!0,M++}return H};if(S===U.Enter){s.preventDefault(),n.handleSelect(D,s),!b&&n.setPreSelection(D);return}else if(S===U.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(a=n.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:Nu});return}var P=null;switch(S){case U.ArrowLeft:case U.ArrowRight:case U.ArrowUp:case U.ArrowDown:case U.PageUp:case U.PageDown:case U.Home:case U.End:P=E(S,D);break}if(!P){(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Nu});return}if(s.preventDefault(),n.setState({lastPreSelectChange:Cu}),v&&n.setSelected(P),n.setPreSelection(P),_){var I=Ge(D),F=Ge(P),O=J(D),A=J(P);I!==F||O!==A?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var i=s.key;i===U.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var i=n.props,o=i.selectsRange,a=i.onChange;o?a==null||a([null,null],s):a==null||a(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,i;return!n.props.inline&&!n.isCalendarOpen()?null:j.createElement(hM,re({showMonthYearDropdown:void 0,ref:function(o){n.calendar=o}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:zI(n.modifyHolidays()),outsideClickIgnoreClass:Ug,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,a=s.locale,l=n.props.showTimeInput||n.props.showTimeSelect,u=l?"PPPPp":"PPPP",d;return n.props.selectsRange?d="Selected start date: ".concat(St(n.props.startDate,{dateFormat:u,locale:a}),". ").concat(n.props.endDate?"End date: "+St(n.props.endDate,{dateFormat:u,locale:a}):""):n.props.showTimeSelectOnly?d="Selected time: ".concat(St(n.props.selected,{dateFormat:o,locale:a})):n.props.showYearPicker?d="Selected year: ".concat(St(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?d="Selected month: ".concat(St(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?d="Selected quarter: ".concat(St(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):d="Selected date: ".concat(St(n.props.selected,{dateFormat:u,locale:a})),j.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},n.renderDateInput=function(){var s,i,o,a=Be(n.props.className,(s={},s[Ug]=n.state.open,s)),l=n.props.customInput||j.createElement("input",{type:"text"}),u=n.props.customInputRef||"ref",d=n.props,f=d.dateFormat,h=f===void 0?t.defaultProps.dateFormat:f,p=d.locale,m=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?PI(n.props.startDate,n.props.endDate,{dateFormat:h,locale:p}):n.props.selectsMultiple?jI((o=n.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:h,locale:p}):St(n.props.selected,{dateFormat:h,locale:p});return w.cloneElement(l,(i={},i[u]=function(x){n.input=x},i.value=m,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=Be(l.props.className,a),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var s=n.props,i=s.isClearable,o=s.disabled,a=s.selected,l=s.startDate,u=s.endDate,d=s.clearButtonTitle,f=s.clearButtonClassName,h=f===void 0?"":f,p=s.ariaLabelClose,m=p===void 0?"Close":p,x=s.selectedDates,b=s.readOnly;return i&&!b&&(a!=null||l!=null||u!=null||x!=null&&x.length)?j.createElement("button",{type:"button",className:Be("react-datepicker__close-icon",h,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":m,onClick:n.onClearClick,title:d,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Lo,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,i,o,a;r.inline&&bM(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Ig(this.props.highlightDates)}),!n.focused&&!Tn(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),n.open===!0&&this.state.open===!1&&((a=(o=this.props).onCalendarClose)===null||a===void 0||a.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,a=r.toggleCalendarOnIconClick,l=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),j.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&j.createElement(pM,re({icon:s,className:Be(o,!o&&i,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?j.createElement(Wb,{enableTabLoop:this.props.enableTabLoop},j.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=j.createElement(Ub,re({portalId:this.props.portalId},this.props),n)),j.createElement("div",null,this.renderInputContainer(),n)}return j.createElement(xM,re({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),_M="input",Cu="navigate";function SM({value:e,onChange:t,label:r="Site Submit"}){const[n,s]=w.useState(""),[i,o]=w.useState([]),[a,l]=w.useState(null),[u,d]=w.useState(!1),f=w.useRef(null),h=w.useRef(null);w.useEffect(()=>{e?V.from("site_submit").select("*").eq("id",e).single().then(({data:b})=>{b&&(l(b),s(b.code||""))}):(l(null),s(""))},[e]),w.useEffect(()=>{const y=setTimeout(async()=>{if(n.length===0){o([]);return}const{data:g}=await V.from("site_submit").select("*").or(`site_submit_name.ilike.%${n}%,code.ilike.%${n}%`).limit(10).order("site_submit_name");g&&o(g)},300);return()=>clearTimeout(y)},[n]),w.useEffect(()=>{const b=y=>{h.current&&!h.current.contains(y.target)&&f.current&&!f.current.contains(y.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{l(b),s(b.code||""),t(b.id),d(!1),o([])},m=b=>{s(b.target.value),d(!0),b.target.value===""&&(t(null),l(null))},x=()=>{f.current&&f.current.select(),n.length>0&&d(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:f,type:"text",value:n,onChange:m,onFocus:x,placeholder:"Search by site submit name...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),u&&i.length>0&&c.jsx("div",{ref:h,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:i.map(b=>c.jsxs("div",{onClick:()=>p(b),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:b.code}),b.site_submit_name&&c.jsx("div",{className:"text-xs text-gray-500",children:b.site_submit_name})]},b.id))})]}),a&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View site submit:",a.id)},children:"View Site Submit Details "})})]})}function kM({value:e,onChange:t,propertyId:r,label:n="Property Unit"}){const[s,i]=w.useState(""),[o,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{e?V.from("property_unit").select("*").eq("id",e).single().then(({data:g})=>{g&&(u(g),i(g.property_unit_name||""))}):(u(null),i(""))},[e]),w.useEffect(()=>{const v=setTimeout(async()=>{if(!r){a([]);return}let _=V.from("property_unit").select("*").eq("property_id",r);s.length>0&&(_=_.ilike("property_unit_name",`%${s}%`));const{data:S}=await _.limit(20).order("property_unit_name");S&&a(S)},300);return()=>clearTimeout(v)},[s,r,d]),w.useEffect(()=>{const g=v=>{p.current&&!p.current.contains(v.target)&&h.current&&!h.current.contains(v.target)&&f(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const m=g=>{u(g),i(g.property_unit_name||""),t(g.id),f(!1)},x=g=>{i(g.target.value),f(!0),g.target.value===""&&(t(null),u(null))},b=()=>{r&&(h.current&&h.current.select(),f(!0))},y=g=>{const v=[];g.sqft&&v.push(`${Number(g.sqft).toLocaleString()} sqft`),g.rent&&v.push(`$${Number(g.rent).toLocaleString()}/mo`);const _=[];return g.inline===!0&&_.push("Inline"),g.end_cap===!0&&_.push("End Cap"),g.patio===!0&&_.push("Patio"),_.length>0&&v.push(_.join(", ")),v.join("  ")};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:h,type:"text",value:s,onChange:x,onFocus:b,placeholder:r?"Search or select unit...":"Select a property first",disabled:!r,className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),d&&o.length>0&&r&&c.jsx("div",{ref:p,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:o.map(g=>c.jsxs("div",{onClick:()=>m(g),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:g.property_unit_name}),c.jsx("div",{className:"text-xs text-gray-500",children:y(g)})]},g.id))}),d&&o.length===0&&r&&s.length>0&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2 text-sm text-gray-500",children:"No units found for this property"})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property unit:",l.id)},children:"View Property Unit Details "})})]})}function DM({value:e,onChange:t,label:r="Property"}){const n=Jl(),[s,i]=w.useState(""),[o,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),[h,p]=w.useState(!1),m=w.useRef(null),x=w.useRef(null);w.useEffect(()=>{e?V.from("property").select("*").eq("id",e).single().then(({data:v})=>{v&&(u(v),i(v.property_name||""))}):(u(null),i(""))},[e]),w.useEffect(()=>{const _=setTimeout(async()=>{if(!s||s.trim().length===0){a([]);return}p(!0),console.log("Searching for:",s);const{data:S,error:k}=await V.from("property").select("*").ilike("property_name",`%${s}%`).limit(10).order("property_name");a(S||[]),p(!1)},300);return()=>clearTimeout(_)},[s]),w.useEffect(()=>{const v=_=>{x.current&&!x.current.contains(_.target)&&m.current&&!m.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const b=v=>{u(v),i(v.property_name||""),t(v.id),f(!1),a([])},y=v=>{const _=v.target.value;i(_),_.length>0&&f(!0),l&&_!==l.property_name&&(u(null),t(null)),_===""&&(t(null),u(null),a([]),f(!1))},g=()=>{m.current&&m.current.select(),o.length>0&&f(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:m,type:"text",value:s,onChange:y,onFocus:g,placeholder:"Type to search properties...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),d&&c.jsx("div",{ref:x,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:h?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}):o.length>0?o.map(v=>{var _,S,k,D;return c.jsxs("div",{onClick:()=>b(v),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:v.property_name}),(((_=v.property_type)==null?void 0:_.label)||((S=v.property_stage)==null?void 0:S.label))&&c.jsx("div",{className:"text-xs text-gray-500",children:[(k=v.property_type)==null?void 0:k.label,(D=v.property_stage)==null?void 0:D.label].filter(Boolean).join("  ")})]},v.id)}):s.length>0?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No properties found"}):null})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>{n(`/property/${l.id}`)},children:"View Property Details "})})]})}const NM={"Negotiating LOI":50,"At Lease/PSA":75,"Under Contract / Contingent":85,Booked:90,"Executed Payable":95,"Closed Paid":100,Lost:0};function CM({deal:e,onSave:t}){const[r,n]=w.useState(e),[s,i]=w.useState(!1),[o,a]=w.useState(null),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(""),[m,x]=w.useState(""),[b,y]=w.useState([]),[g,v]=w.useState({}),[_,S]=w.useState(!1),[k,D]=w.useState(!1),C=w.useRef(null),E=w.useRef(!0);w.useEffect(()=>{n(e),v({}),D(!1),C.current=e.stage_id??null,E.current=!0},[e]),w.useEffect(()=>{V.from("deal_stage").select("id, label").then(({data:N})=>N&&u(N)),V.from("deal_team").select("id, label").then(({data:N})=>N&&f(N)),e.updated_by_id&&V.from("user").select("name").eq("id",e.updated_by_id).maybeSingle().then(({data:N})=>(N==null?void 0:N.name)&&p(N.name)),e.client_id?V.from("client").select("client_name").eq("id",e.client_id).maybeSingle().then(({data:N})=>(N==null?void 0:N.client_name)&&x(N.client_name)):x("")},[e.client_id,e.property_id]),w.useEffect(()=>{const T=setTimeout(async()=>{const M=m.trim();if(!M)return y([]);const{data:H}=await V.from("client").select("id, client_name").ilike("client_name",`%${M}%`).order("client_name",{ascending:!0}).limit(5);H&&y(H.map(K=>({id:K.id,label:K.client_name})))},150);return()=>clearTimeout(T)},[m]);const P=(N,T)=>{N==="probability"&&D(!0);const M={...r,[N]:T};if(n(M),["deal_name","deal_value","commission_percent"].includes(N)){const H=O(N,T);v(K=>{const Ne={...K},Te=H[N];return Te?Ne[N]=Te:delete Ne[N],Ne})}if(N==="commission_percent"){const H=M.flat_fee_override??(M.deal_value??0)*((T??0)/100);(async()=>{const{data:Ne,error:Te}=await V.from("deal").update({commission_percent:T,fee:H}).eq("id",r.id).select().single();Te?console.error("Error auto-saving commission:",Te):Ne&&t(Ne)})()}},I=r.flat_fee_override??(r.deal_value??0)*((r.commission_percent??0)/100),F=()=>{var N;return(N=l.find(T=>T.id===r.stage_id))==null?void 0:N.label};w.useEffect(()=>{if(!r.stage_id||l.length===0)return;const N=F();if(!N)return;const T=NM[N];if(E.current){if(E.current=!1,r.probability==null&&typeof T=="number"){n(K=>({...K,probability:T})),S(!0);const H=setTimeout(()=>S(!1),800);return()=>clearTimeout(H)}return}if(C.current!==r.stage_id&&typeof T=="number"){n(K=>({...K,probability:T})),D(!1),S(!0);const H=setTimeout(()=>S(!1),800);return C.current=r.stage_id,()=>clearTimeout(H)}C.current=r.stage_id},[r.stage_id,l]);const O=(N,T)=>{const M={};if(N==="deal_name"&&(!T||String(T).trim().length===0)&&(M.deal_name="Opportunity Name is required."),N==="deal_value"&&(T===null||T===""||isNaN(Number(T))?M.deal_value="Enter a number.":Number(T)<0&&(M.deal_value="Must be  0.")),N==="commission_percent"){const H=Number(T);T===null||T===""||isNaN(H)?M.commission_percent="Enter a percent.":(H<0||H>100)&&(M.commission_percent="0100 only.")}return M},A=N=>{const T={};return Object.assign(T,O("deal_name",N.deal_name)),Object.assign(T,O("deal_value",N.deal_value)),Object.assign(T,O("commission_percent",N.commission_percent)),T},B=async()=>{const N=A(r);if(v(N),Object.keys(N).length>0)return;i(!0);const T={deal_name:r.deal_name,client_id:r.client_id,property_id:r.property_id,property_unit_id:r.property_unit_id,site_submit_id:r.site_submit_id,deal_value:r.deal_value,commission_percent:r.commission_percent,flat_fee_override:r.flat_fee_override,fee:I,target_close_date:r.target_close_date,loi_signed_date:r.loi_signed_date,closed_date:r.closed_date,probability:r.probability,deal_team_id:r.deal_team_id,stage_id:r.stage_id,updated_at:new Date().toISOString()},{data:M,error:H}=await V.from("deal").update(T).eq("id",r.id).select().single();i(!1),H?alert("Error saving: "+H.message):M&&t(M)},$=F(),z=$==="Closed Paid";return c.jsxs("div",{className:"relative",children:[c.jsx(va,{title:"Deal Context",help:"Name the opportunity, choose the client, property, and deal team.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(EM,{label:"Opportunity Name",value:r.deal_name,onChange:N=>P("deal_name",N)}),c.jsx(PM,{label:"Client",search:m,setSearch:x,suggestions:b,onSelect:(N,T)=>{P("client_id",N),x(T),y([])}}),c.jsx(DM,{value:r.property_id,onChange:N=>P("property_id",N),label:"Property"}),c.jsx(kM,{value:r.property_unit_id,onChange:N=>P("property_unit_id",N),propertyId:r.property_id,label:"Property Unit"}),c.jsx(SM,{value:r.site_submit_id,onChange:N=>P("site_submit_id",N),label:"Site Submit"}),c.jsx(Wg,{label:"Deal Team",value:r.deal_team_id,onChange:N=>P("deal_team_id",N),options:d}),g.deal_name&&c.jsx(Eu,{msg:g.deal_name,className:"col-span-2"})]})}),c.jsx(va,{title:"Financials",help:"Set value and commission. Fee auto-calculates unless a flat fee is set.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(ca,{label:"Deal Value",value:r.deal_value,onChange:N=>P("deal_value",N===""?null:parseFloat(N)),format:N=>yu(N,2),editingField:o,setEditingField:a,fieldKey:"deal_value"}),g.deal_value&&c.jsx(Eu,{msg:g.deal_value}),c.jsx(ca,{label:"Commission %",value:r.commission_percent,onChange:N=>P("commission_percent",N===""?null:parseFloat(N)),format:N=>B2(N,2),editingField:o,setEditingField:a,fieldKey:"commission_percent"}),g.commission_percent&&c.jsx(Eu,{msg:g.commission_percent}),c.jsx(ca,{label:"Flat Fee Override",value:r.flat_fee_override,onChange:N=>P("flat_fee_override",N===""?null:parseFloat(N)),format:N=>N===null?"":yu(N,2),editingField:o,setEditingField:a,fieldKey:"flat_fee_override"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Calculated Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:isNaN(I)?"":yu(I,2)})]})]})}),c.jsx(va,{title:"Stage & Probability",help:"Choosing a stage will set a default probability. You can override it.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Wg,{label:"Stage",value:r.stage_id,onChange:N=>P("stage_id",N),options:l}),c.jsx("div",{className:"rounded transition-colors duration-700 "+(_?"bg-yellow-50":"bg-transparent"),children:c.jsx(ca,{label:"Probability %",value:r.probability,onChange:N=>P("probability",N===""?null:parseFloat(N)),format:N=>U2(N),editingField:o,setEditingField:a,fieldKey:"probability"})})]})}),c.jsx(va,{title:"Timeline",help:"Target and actual dates. Closed Date enabled only at Closed Paid.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Pu,{label:"Target Close Date",value:r.target_close_date,onChange:N=>P("target_close_date",N)}),c.jsx(Pu,{label:"LOI Signed Date",value:r.loi_signed_date,onChange:N=>P("loi_signed_date",N)}),c.jsx(Pu,{label:"Closed Date",value:r.closed_date,onChange:N=>P("closed_date",N),disabled:!z,tooltip:z?void 0:"Set Stage to 'Closed Paid' to enable"})]})}),c.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t mt-6 p-3 flex items-center justify-between shadow-sm",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:r.updated_at?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Last Updated by"}),c.jsx("span",{className:"font-medium",children:h||"Unknown"}),c.jsxs("span",{children:[new Date(r.updated_at).toLocaleDateString()," ",new Date(r.updated_at).toLocaleTimeString()]})]}):c.jsx("span",{children:"Not yet saved"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xs text-gray-500",children:$?`Stage: ${$}`:"No stage selected"}),c.jsx("button",{onClick:B,disabled:s||Object.keys(g).length>0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:s?"Saving...":"Save Deal"})]})]})]})}function va({title:e,help:t,children:r}){return c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]})}function Eu({msg:e,className:t=""}){return c.jsx("p",{className:"text-xs text-red-600 mt-1 "+t,children:e})}function EM({label:e,value:t,onChange:r,type:n="text",className:s=""}){return c.jsxs("div",{className:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{type:n,value:t??"",onChange:i=>r(i.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})}function Pu({label:e,value:t,onChange:r,disabled:n,tooltip:s}){const i=t?bb(t):null;return c.jsxs("div",{title:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx(wM,{selected:i,onChange:o=>r(o?qd(o,"yyyy-MM-dd"):null),className:`mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${n?"bg-gray-100 cursor-not-allowed":""}`,dateFormat:"MM/dd/yyyy",isClearable:!0,disabled:n})]})}function Wg({label:e,value:t,onChange:r,options:n}){return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsxs("select",{value:t??"",onChange:s=>r(s.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"",children:"-- Select --"}),n.map(s=>c.jsx("option",{value:s.id,children:s.label},s.id))]})]})}function PM({label:e,search:t,setSearch:r,suggestions:n,onSelect:s}){const i=w.useRef(null),o=()=>{i.current&&i.current.select()};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{ref:i,type:"text",value:t,onChange:a=>r(a.target.value),onFocus:o,placeholder:`Search ${e.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),n.filter(a=>a.label!==t).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:n.filter(a=>a.label!==t).map(a=>c.jsx("li",{onClick:()=>s(a.id,a.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:a.label},a.id))})]})}const Hb=w.createContext(null),Yb=()=>{const e=w.useContext(Hb);if(!e)throw new Error("usePanelManager must be used within a FloatingPanelManager");return e},jM=({children:e})=>{const[t,r]=w.useState(null),n=o=>{r(o)},s=()=>{r(null)},i=o=>{t===o?s():n(o)};return c.jsx(Hb.Provider,{value:{activePanel:t,openPanel:n,closePanel:s,togglePanel:i},children:e})},ki=({type:e,icon:t,count:r,label:n,position:s})=>{const{activePanel:i,togglePanel:o}=Yb(),a=i===e;return c.jsxs("div",{className:"relative group",children:[c.jsxs("button",{onClick:()=>o(e),className:`
          relative flex items-center justify-center w-10 h-10 rounded-full shadow-md
          transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg
          backdrop-blur-sm border
          ${a?"bg-blue-600 text-white border-blue-500 shadow-blue-200":"bg-white/90 text-gray-600 hover:bg-white border-gray-200 hover:text-gray-800"}
        `,title:n,children:[c.jsx("span",{className:"text-sm",children:t}),r!==void 0&&r>0&&c.jsx("span",{className:`
            absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full
            border-2 border-white
            ${a?"bg-white text-blue-600":"bg-red-500 text-white"}
          `,children:r>99?"99+":r})]}),c.jsxs("div",{className:"absolute right-full mr-3 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[n,r!==void 0&&c.jsxs("span",{className:"ml-1 text-gray-300",children:["(",r,")"]}),c.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]})},TM=({children:e,contactCount:t=0,notesCount:r=0,filesCount:n=0,activityCount:s=0,paymentsCount:i=0})=>c.jsxs("div",{className:"relative",children:[e,c.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 space-y-3",style:{zIndex:50},children:[c.jsx(ki,{type:"contacts",icon:"",count:t,label:"Contact Roles",position:0}),c.jsx(ki,{type:"notes",icon:"",count:r,label:"Notes",position:1}),c.jsx(ki,{type:"files",icon:"",count:n,label:"Files",position:2}),c.jsx(ki,{type:"activity",icon:"",count:s,label:"Activity",position:3}),c.jsx(ki,{type:"payments",icon:"",count:i,label:"Payments",position:4})]})]}),zb=e=>{const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!e){r([]),s(!1);return}try{s(!0),o(null);const{data:l,error:u}=await V.from("deal_contact").select("id, contact_id, role_id, primary_contact").eq("deal_id",e);if(u)throw u;if(!l||l.length===0){r([]),s(!1);return}const d=[...new Set(l.map(v=>v.contact_id).filter(Boolean))],f=[...new Set(l.map(v=>v.role_id).filter(Boolean))],{data:h,error:p}=await V.from("contact").select("id, first_name, last_name, email, phone, mobile_phone").in("id",d);if(p)throw p;const{data:m,error:x}=await V.from("contact_role").select("role_id, label").in("role_id",f);if(x)throw x;const b=new Map;h==null||h.forEach(v=>{b.set(v.id,v)});const y=new Map;m==null||m.forEach(v=>{y.set(v.role_id,v)});const g=l.map(v=>{const _=b.get(v.contact_id),S=y.get(v.role_id);let k="Unknown Contact";if(_){const D=_.first_name||"",C=_.last_name||"";D&&C?k=`${D} ${C}`:D?k=D:C&&(k=C)}return{id:v.id,contact_name:k,contact_email:(_==null?void 0:_.email)||null,contact_phone:(_==null?void 0:_.phone)||null,contact_mobile:(_==null?void 0:_.mobile_phone)||null,role_label:(S==null?void 0:S.label)||"No Role",primary_contact:v.primary_contact||!1,contact_id:v.contact_id}});g.sort((v,_)=>v.primary_contact&&!_.primary_contact?-1:!v.primary_contact&&_.primary_contact?1:v.role_label.localeCompare(_.role_label)),r(g)}catch(l){console.error("Error fetching deal contacts:",l),o("Failed to load contacts")}finally{s(!1)}})()},[e]),{contacts:t,loading:n,error:i,refetch:()=>{e&&s(!0)}}},OM=({dealId:e})=>{const{activePanel:t,closePanel:r}=Yb(),{contacts:n,loading:s,error:i}=zb(e),o=t==="contacts",a=u=>{const d=u.split(" ");return d.length>=2?`${d[0].charAt(0)}${d[d.length-1].charAt(0)}`.toUpperCase():u.charAt(0).toUpperCase()||"?"},l=(u,d)=>{u&&window.open(`tel:${u}`,"_self")};return o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/10 transition-all duration-300 z-40",onClick:r}),c.jsxs("div",{className:`
        fixed right-0 top-0 h-full w-80 bg-white shadow-2xl border-l border-gray-200
        transform transition-all duration-300 ease-out z-50
        ${o?"translate-x-0":"translate-x-full"}
        flex flex-col
      `,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white shrink-0",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),c.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," contact",n.length!==1?"s":""," on this deal"]})]})]}),c.jsx("button",{onClick:r,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:s?c.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((u,d)=>c.jsx("div",{className:"animate-pulse",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):i?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx("span",{className:"text-red-500 text-lg",children:""})}),c.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Contacts"}),c.jsx("p",{className:"text-sm text-gray-500",children:i})]}):n.length===0?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-300 text-2xl",children:""})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Contacts Yet"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add contacts to this deal to see them here"}),c.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Contact"})]}):c.jsx("div",{className:"divide-y divide-gray-50",children:n.map(u=>c.jsx("div",{className:"p-4 hover:bg-gray-25 transition-colors",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white font-medium text-sm",children:a(u.contact_name)})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("button",{className:"text-sm font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate",onClick:()=>{console.log("View contact:",u.contact_id)},children:u.contact_name}),u.primary_contact&&c.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:"Primary"})]}),c.jsx("p",{className:"text-xs font-medium text-blue-600 mb-2",children:u.role_label}),c.jsxs("div",{className:"space-y-1",children:[u.contact_email&&c.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[" ",u.contact_email]}),u.contact_phone&&c.jsxs("button",{onClick:()=>l(u.contact_phone,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer",children:[" ",u.contact_phone]}),u.contact_mobile&&c.jsxs("button",{onClick:()=>l(u.contact_mobile,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer block",children:[" ",u.contact_mobile]})]})]})]})},u.id))})}),c.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 shrink-0",children:c.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[c.jsx("span",{className:"mr-2",children:"+"}),"Add Contact Role"]})})]})]}):null},vr=({label:e,value:t,onChange:r,disabled:n=!1})=>{const[s,i]=w.useState(!1),[o,a]=w.useState(""),l=t?`${t.toFixed(1)}%`:"0.0%",u=()=>{n||(i(!0),a((t==null?void 0:t.toString())||""))},d=()=>{const p=parseFloat(o);r(isNaN(p)?null:p),i(!1)},f=()=>{i(!1),a("")},h=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),d()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),f())};return s?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"number",step:"0.1",value:o,onChange:p=>a(p.target.value),onBlur:d,onKeyDown:h,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",autoFocus:!0})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:u,className:`mt-1 block w-full rounded border-gray-300 shadow-sm px-3 py-2 transition-colors border text-sm ${n?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200"}`,title:n?"Not editable":"Click to edit",children:l})]})},RM=({value:e,onChange:t,label:r="Referral Payee"})=>{const[n,s]=w.useState(""),[i,o]=w.useState([]),a=w.useRef(null);w.useEffect(()=>{(async()=>{if(e){const{data:h}=await V.from("client").select("client_name").eq("id",e).single();h!=null&&h.client_name&&s(h.client_name)}else s("")})()},[e]),w.useEffect(()=>{const h=setTimeout(async()=>{const p=n.trim();if(!p)return o([]);const{data:m}=await V.from("client").select("id, client_name").ilike("client_name",`%${p}%`).order("client_name",{ascending:!0}).limit(5);m&&o(m.map(x=>({id:x.id,label:x.client_name})))},150);return()=>clearTimeout(h)},[n]);const l=()=>{a.current&&a.current.select()},u=(f,h)=>{t(f),s(h),o([])},d=f=>{const h=f.target.value;s(h),h===""&&t(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsx("input",{ref:a,type:"text",value:n,onChange:d,onFocus:l,placeholder:`Search ${r.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),i.filter(f=>f.label!==n).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:i.filter(f=>f.label!==n).map(f=>c.jsx("li",{onClick:()=>u(f.id,f.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:f.label},f.id))})]})},Wh=(e,t=[])=>w.useMemo(()=>{const r=(e==null?void 0:e.fee)||0,n=(e==null?void 0:e.referral_fee_usd)||0,s=(e==null?void 0:e.house_usd)||0,i=r-n-s,o=(e==null?void 0:e.origination_percent)||0,a=(e==null?void 0:e.site_percent)||0,l=(e==null?void 0:e.deal_percent)||0,u=o/100*i,d=a/100*i,f=l/100*i,h=u+d+f,p=t.map(g=>{const v=(g==null?void 0:g.split_origination_percent)||0,_=(g==null?void 0:g.split_site_percent)||0,S=(g==null?void 0:g.split_deal_percent)||0,k=v/100*u,D=_/100*d,C=S/100*f,E=k+D+C;return{...g,calculatedOriginationUSD:k,calculatedSiteUSD:D,calculatedDealUSD:C,calculatedTotalUSD:E}}),m=p.reduce((g,v)=>g+(v.split_origination_percent||0),0),x=p.reduce((g,v)=>g+(v.split_site_percent||0),0),b=p.reduce((g,v)=>g+(v.split_deal_percent||0),0),y=p.reduce((g,v)=>g+v.calculatedTotalUSD,0);return{baseAmounts:{gci:r,referralFeeUsd:n,houseUsd:s,agci:i,originationPercent:o,sitePercent:a,dealPercent:l,originationUSD:u,siteUSD:d,dealUSD:f,totalDealUSD:h},brokerSplits:p,totals:{originationPercent:m,sitePercent:x,dealPercent:b,brokerUSD:y},validation:{isOriginationValid:m<=100,isSiteValid:x<=100,isDealValid:b<=100,areAllValid:m<=100&&x<=100&&b<=100}}},[e,t]),IM=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),MM=({deal:e,onFieldUpdate:t})=>{const{baseAmounts:r}=Wh(e),n=i=>i==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i),s=i=>i==null?"0.0%":`${i.toFixed(1)}%`;return c.jsx(IM,{title:"Commission Details",help:"Set commission percentages and amounts. Click any percentage to edit.",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.fee)})]}),c.jsx(vr,{label:"Commission Rate %",value:e.commission_percent,onChange:i=>t("commission_percent",i)}),c.jsx(vr,{label:"Referral Fee %",value:e.referral_fee_percent,onChange:i=>t("referral_fee_percent",i)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referral Fee $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.referral_fee_usd)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of Payments"}),c.jsx("input",{type:"number",step:"1",min:"1",value:e.number_of_payments||1,onChange:i=>t("number_of_payments",parseInt(i.target.value)||1),className:"mt-1 block w-full rounded border-gray-300 shadow-sm cursor-pointer hover:bg-blue-50 px-3 py-2 transition-colors border border-transparent hover:border-blue-200 text-sm"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(RM,{value:e.referral_payee_client_id,onChange:i=>t("referral_payee_client_id",i),label:"Referral Payee"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.gci)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AGCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.agci)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(vr,{label:"House %",value:e.house_percent,onChange:i=>t("house_percent",i)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.house_usd)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(vr,{label:"Origination %",value:e.origination_percent,onChange:i=>t("origination_percent",i)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origination $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.originationUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(vr,{label:"Site %",value:e.site_percent,onChange:i=>t("site_percent",i)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Site $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.siteUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(vr,{label:"Deal %",value:e.deal_percent,onChange:i=>t("deal_percent",i)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.dealUSD)})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Broker Split Summary (Origination + Site + Deal)"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Origination:"})," ",s(e.origination_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Site:"})," ",s(e.site_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Deal:"})," ",s(e.deal_percent)]}),c.jsxs("div",{className:"font-semibold",children:[c.jsx("span",{className:"text-blue-700",children:"Total:"})," ",s((e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0))]})]}),c.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"House % is separate and not included in the 100% split validation."})]})]})})},Vb=({isOpen:e,onClose:t,onConfirm:r,title:n,itemName:s,message:i})=>e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",c.jsx("strong",{children:s}),"?"]}),i&&c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:i})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})}):null,dr=e=>e==null||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ju=({value:e,onChange:t,label:r})=>{const[n,s]=w.useState(!1),[i,o]=w.useState(""),a=e?`${e.toFixed(1)}%`:"0.0%",l=()=>{s(!0),o((e==null?void 0:e.toString())||"0")},u=()=>{const h=parseFloat(i);t(isNaN(h)?null:h),s(!1)},d=()=>{s(!1),o("")},f=h=>{h.key==="Enter"?u():h.key==="Escape"&&d()};return n?c.jsx("input",{type:"number",step:"0.1",value:i,onChange:h=>o(h.target.value),onBlur:u,onKeyDown:f,className:"w-16 px-1 py-0.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}):c.jsx("span",{onClick:l,className:"cursor-pointer hover:bg-blue-50 px-1 py-0.5 rounded text-sm",title:`Click to edit ${r||"percentage"}`,children:a})},LM=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,i]=w.useState([]),[o,a]=w.useState(!0),[l,u]=w.useState(null),[d,f]=w.useState({isOpen:!1,splitId:"",brokerName:""}),{baseAmounts:h}=Wh(e,r),p=S=>{const k=s.find(D=>D.id===S);return k?k.name:"Unknown Broker"};w.useEffect(()=>{(async()=>{if(e.id)try{a(!0);const{data:k,error:D}=await V.from("commission_split").select("*").eq("deal_id",e.id).order("created_at");if(D)throw D;const{data:C,error:E}=await V.from("broker").select("*").order("name");if(E)throw E;n(k||[]),i(C||[])}catch(k){console.error("Error fetching commission data:",k),u("Failed to load commission splits")}finally{a(!1)}})()},[e.id]);const m=async(S,k,D)=>{console.log(" updateCommissionSplit called:",{splitId:S,field:k,value:D});try{const C=r.find(I=>I.id===S);if(!C)return;const E={...C};k==="split_origination_percent"?(E.split_origination_percent=D||0,E.split_origination_usd=(D||0)/100*h.originationUSD):k==="split_site_percent"?(E.split_site_percent=D||0,E.split_site_usd=(D||0)/100*h.siteUSD):k==="split_deal_percent"&&(E.split_deal_percent=D||0,E.split_deal_usd=(D||0)/100*h.dealUSD),E.split_broker_total=(E.split_origination_usd||0)+(E.split_site_usd||0)+(E.split_deal_usd||0);const{error:P}=await V.from("commission_split").update({split_origination_percent:E.split_origination_percent,split_origination_usd:E.split_origination_usd,split_site_percent:E.split_site_percent,split_site_usd:E.split_site_usd,split_deal_percent:E.split_deal_percent,split_deal_usd:E.split_deal_usd,split_broker_total:E.split_broker_total}).eq("id",S);if(P)throw P;n(I=>I.map(F=>F.id===S?E:F)),console.log(" Commission split updated successfully")}catch(C){console.error("Error updating commission split:",C),u("Failed to update commission split")}},x=async S=>{if(e.id)try{if(!s.find(P=>P.id===S))return;const D={deal_id:e.id,broker_id:S,split_origination_percent:0,split_origination_usd:0,split_site_percent:0,split_site_usd:0,split_deal_percent:0,split_deal_usd:0,split_broker_total:0},{data:C,error:E}=await V.from("commission_split").insert(D).select("*").single();if(E)throw E;n([...r,C])}catch(k){console.error("Error adding broker split:",k),u("Failed to add broker split")}},b=async S=>{try{const{error:k}=await V.from("commission_split").delete().eq("id",S);if(k){if(k.code==="23503"&&k.message.includes("payment_split")){u("Cannot delete this broker split because it has related payments. You must delete the payments first, or contact support to safely remove this split.");return}throw k}n(D=>D.filter(C=>C.id!==S)),u(null),f({isOpen:!1,splitId:"",brokerName:""})}catch(k){console.error("Error deleting broker split:",k),u("Failed to delete broker split: "+(k instanceof Error?k.message:"Unknown error")),f({isOpen:!1,splitId:"",brokerName:""})}},y=(S,k)=>{f({isOpen:!0,splitId:S,brokerName:k})},g=()=>{b(d.splitId)},v=()=>{f({isOpen:!1,splitId:"",brokerName:""})},_=s.filter(S=>!r.some(k=>k.broker_id===S.id));return o?c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Broker Commission Splits"}),c.jsx("div",{className:"text-gray-500",children:"Loading..."})]}):c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Broker Commission Splits"}),_.length>0&&c.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:S=>{S.target.value&&(x(S.target.value),S.target.value="")},defaultValue:"",children:[c.jsx("option",{value:"",children:"+ Add Broker"}),_.map(S=>c.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:c.jsx("p",{className:"text-red-600 text-sm",children:l})}),r.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"No broker splits configured for this deal."}),_.length>0&&c.jsx("p",{className:"text-sm mt-2",children:"Use the dropdown above to add brokers."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-left py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Broker"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal $"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total $"}),c.jsx("th",{className:"w-16 text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.map(S=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsx("td",{className:"py-3 px-3 w-48 whitespace-nowrap",children:c.jsx("div",{className:"text-xs text-gray-900 font-medium",children:p(S.broker_id)})}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(ju,{value:S.split_origination_percent,onChange:k=>m(S.id,"split_origination_percent",k),label:"Origination %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:dr((S.split_origination_percent||0)/100*h.originationUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(ju,{value:S.split_site_percent,onChange:k=>m(S.id,"split_site_percent",k),label:"Site %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:dr((S.split_site_percent||0)/100*h.siteUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(ju,{value:S.split_deal_percent,onChange:k=>m(S.id,"split_deal_percent",k),label:"Deal %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:dr((S.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-medium text-gray-900",children:dr((S.split_origination_percent||0)/100*h.originationUSD+(S.split_site_percent||0)/100*h.siteUSD+(S.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx("button",{onClick:()=>y(S.id,p(S.broker_id)),className:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Delete broker split",children:""})})]},S.id))}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[c.jsx("td",{className:"py-3 px-3 text-sm text-gray-900",children:"TOTALS"}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=r.reduce((D,C)=>D+(Number(C.split_origination_percent)||0),0),k=Math.abs(S-100)<.1;return c.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:dr(r.reduce((S,k)=>S+(k.split_origination_percent||0)/100*h.originationUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=r.reduce((D,C)=>D+(Number(C.split_site_percent)||0),0),k=Math.abs(S-100)<.1;return c.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:dr(r.reduce((S,k)=>S+(k.split_site_percent||0)/100*h.siteUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=r.reduce((D,C)=>D+(Number(C.split_deal_percent)||0),0),k=Math.abs(S-100)<.1;return c.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:dr(r.reduce((S,k)=>S+(k.split_deal_percent||0)/100*h.dealUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-semibold text-blue-600",children:dr(r.reduce((S,k)=>{const D=(k.split_origination_percent||0)/100*h.originationUSD,C=(k.split_site_percent||0)/100*h.siteUSD,E=(k.split_deal_percent||0)/100*h.dealUSD;return S+D+C+E},0))}),c.jsx("td",{className:"py-3 px-3"})]})})]})}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[c.jsxs("p",{children:[" Split percentages are applied to AGCI: ",dr(Number(e.agci||0))]}),c.jsx("p",{children:" These splits serve as templates for payment generation"}),c.jsx("p",{children:" Click on percentage values to edit them directly"})]}),c.jsx(Vb,{isOpen:d.isOpen,onClose:v,onConfirm:g,title:"Delete Broker Split",itemName:d.brokerName,message:"This action cannot be undone. If this broker has related payments, the deletion will be blocked."})]})},Hg=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),AM=({dealId:e,deal:t,onDealUpdate:r})=>{const[n,s]=w.useState(t),[i,o]=w.useState([]),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState(!0),[p,m]=w.useState(null),[x,b]=w.useState(!1);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{y()},[e]);const y=async()=>{try{h(!0);const{data:E,error:P}=await V.from("commission_split").select("*").eq("deal_id",e);if(P)throw P;const{data:I,error:F}=await V.from("broker").select("*");if(F)throw F;l(I.filter($=>$.active));const O=E.map($=>{const z=I.find(N=>N.id===$.broker_id);return{...$,broker_name:z?z.name:"Unknown Broker"}});o(O);const{data:A,error:B}=await V.from("payment").select("*").eq("deal_id",e);if(B)throw B;console.log(" CommissionTab fetchCommissionData - payments found:",{dealId:e,paymentsCount:(A==null?void 0:A.length)||0,payments:A==null?void 0:A.map($=>({id:$.id,sequence:$.payment_sequence,amount:$.payment_amount,estimated_date:$.payment_date_estimated,actual_date:$.payment_date_actual}))}),d(A)}catch(E){m(E instanceof Error?E.message:"An error occurred")}finally{h(!1)}},g=E=>{const P=E.deal_value||0,I=E.commission_percent||0,F=E.referral_fee_percent||0,O=E.flat_fee_override??P*(I/100),A=O*(F/100),B=O-A,$=B*((E.house_percent||0)/100),z=B-$,N=z*((E.origination_percent||0)/100),T=z*((E.site_percent||0)/100),M=z*((E.deal_percent||0)/100);return{...E,fee:Math.round(O*100)/100,gci:Math.round(B*100)/100,referral_fee_usd:Math.round(A*100)/100,agci:Math.round(z*100)/100,house_usd:Math.round($*100)/100,origination_usd:Math.round(N*100)/100,site_usd:Math.round(T*100)/100,deal_usd:Math.round(M*100)/100}},v=async(E,P)=>{if(!n)return;const I={...n,[E]:P},F=["commission_percent","referral_fee_percent","house_percent","origination_percent","site_percent","deal_percent"];let O=I;F.includes(E)&&(O=g(I));const A={commission_percent:O.commission_percent,referral_fee_percent:O.referral_fee_percent,house_percent:O.house_percent,origination_percent:O.origination_percent,site_percent:O.site_percent,deal_percent:O.deal_percent,number_of_payments:O.number_of_payments,fee:O.fee,updated_at:new Date().toISOString()};O.gci!==void 0&&(A.gci=O.gci),O.referral_fee_usd!==void 0&&(A.referral_fee_usd=O.referral_fee_usd),O.agci!==void 0&&(A.agci=O.agci),O.house_usd!==void 0&&(A.house_usd=O.house_usd),O.origination_usd!==void 0&&(A.origination_usd=O.origination_usd),O.site_usd!==void 0&&(A.site_usd=O.site_usd),O.deal_usd!==void 0&&(A.deal_usd=O.deal_usd),E==="referral_payee_client_id"&&O.referral_payee_client_id!==void 0&&(A.referral_payee_client_id=O.referral_payee_client_id);try{console.log("Updating field:",E,"with value:",P),console.log("Update payload:",A);const{data:B,error:$}=await V.from("deal").update(A).eq("id",e).select().single();if($)throw console.error("Supabase error:",$),$;console.log("Update successful:",B),s(B),r(B)}catch(B){console.error("Error saving:",B),alert(`Error saving: ${B instanceof Error?B.message:"Failed to save"}`)}},_=async()=>{try{b(!0);const{data:E,error:P}=await V.rpc("generate_payments_for_deal",{deal_uuid:e});if(P)throw P;await y()}catch(E){alert(`Error: ${E instanceof Error?E.message:"Failed to generate payments"}`)}finally{b(!1)}},S=E=>E==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),k=E=>{const P=[],I=Number(E.origination_percent)||0,F=Number(E.site_percent)||0,O=Number(E.deal_percent)||0,A=Number(E.commission_percent)||0,B=Number(E.referral_fee_percent)||0,$=I+F+O;return $>100&&P.push("Broker split percentages total "+$.toFixed(1)+"% (over 100%)"),A>50&&P.push("Commission rate "+A.toFixed(1)+"% seems high"),B>100&&P.push("Referral fee "+B.toFixed(1)+"% cannot exceed 100%"),P};if(f)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-sm text-gray-600",children:"Loading commission data..."})});if(p)return c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Loading Commission Data"}),c.jsx("p",{className:"text-sm text-red-600",children:p}),c.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Try Again"})]});if(!n)return c.jsx("div",{className:"text-center text-gray-600 py-8",children:c.jsx("p",{className:"text-sm",children:"Deal not found"})});const D=u.length>0,C=k(n);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-blue-800 mb-1",children:"Deal Fee"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:S(n.fee)})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-purple-800 mb-1",children:"Number of Payments"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:n.number_of_payments})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-orange-800 mb-1",children:"Commission Rate"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.commission_percent?`${n.commission_percent.toFixed(1)}%`:"0%"})]})]}),C.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:C.map((E,P)=>c.jsx("li",{children:E},P))})]})]})}),D&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payments Already Generated"}),c.jsxs("p",{className:"mt-1 text-xs text-yellow-700",children:["This deal already has ",u.length," payment",u.length!==1?"s":""," generated. To regenerate payments, you would need to delete the existing ones first."]})]})]})}),i.length===0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"No Commission Splits Found"}),c.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Commission splits are imported from Salesforce. If this deal should have commission data, check that it exists in Salesforce and run the migration again."})]})]})}),c.jsx(MM,{deal:n,onFieldUpdate:v}),c.jsx(LM,{deal:n,onDealUpdate:r}),c.jsxs(Hg,{title:"Payment Generation",help:"Generate payments based on commission splits",children:[c.jsx("div",{className:"flex justify-end mb-3",children:c.jsx("button",{onClick:_,disabled:i.length===0||D||x,className:`px-4 py-2 rounded font-medium text-sm ${i.length>0&&!D&&!x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:x?"Generating...":"Generate Payments"})}),i.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-4",children:c.jsx("p",{className:"text-sm",children:"No commission splits available for payment generation."})})]}),i.length>0&&c.jsx(Hg,{title:"Quick Summary",help:"Overview of commission allocation",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-green-800 mb-1",children:"Total Commission Splits"}),c.jsx("p",{className:"text-lg font-bold text-green-900",children:i.length})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Total Broker Amount"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:S(i.reduce((E,P)=>E+(P.split_broker_total||0),0))})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-purple-800 mb-1",children:"Payments Status"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:D?`${u.length} Generated`:"Not Generated"})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-orange-800 mb-1",children:"Per Payment Amount"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.number_of_payments&&n.fee?S(n.fee/n.number_of_payments):"$0.00"})]})]})})]})},Gb=(e,t=[],r=[])=>{const n=w.useMemo(()=>{const l=e.fee||0,u=e.number_of_payments||1,d=u>0?l/u:0,f=d*u;return{calculatedPaymentAmount:d,totalCalculatedPayments:f}},[e.fee,e.number_of_payments]),s=w.useMemo(()=>{const l=n.calculatedPaymentAmount,u=e.referral_fee_usd||0,d=e.number_of_payments||1,f=u/d,p=(e.house_usd||0)/d,m=l-f-p,x=e.origination_percent||0,b=e.site_percent||0,y=e.deal_percent||0,g=x/100*m,v=b/100*m,_=y/100*m;return{gci:l,referral_fee_usd:f,house_usd:p,agci:m,origination_percent:x,origination_usd:g,site_percent:b,site_usd:v,deal_percent:y,deal_usd:_}},[n.calculatedPaymentAmount,e.fee,e.referral_fee_usd,e.house_usd,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),i=w.useMemo(()=>l=>l.map(u=>{const d=(u.split_origination_percent||0)/100*s.origination_usd,f=(u.split_site_percent||0)/100*s.site_usd,h=(u.split_deal_percent||0)/100*s.deal_usd,p=d+f+h;return{broker_id:u.broker_id||"",origination_amount:d,site_amount:f,deal_amount:h,total_amount:p}}),[s]),o=w.useMemo(()=>{const l=[];let u=!0;return(!e.fee||e.fee<=0)&&(l.push("Commission fee is not set"),u=!1),(!e.number_of_payments||e.number_of_payments<1)&&(l.push("Number of payments must be at least 1"),u=!1),e.number_of_payments&&e.number_of_payments>10&&(l.push("Number of payments cannot exceed 10"),u=!1),(e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0)===0&&l.push("Commission split percentages are not configured"),{canGeneratePayments:u,validationMessages:l}},[e.fee,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),a=w.useMemo(()=>t.map(l=>({payment_id:l.payment_id,calculated_amount:n.calculatedPaymentAmount,database_amount:l.payment_amount||0,needs_update:Math.abs((l.payment_amount||0)-n.calculatedPaymentAmount)>.01})),[t,n.calculatedPaymentAmount]);return{calculatedPaymentAmount:n.calculatedPaymentAmount,totalCalculatedPayments:n.totalCalculatedPayments,paymentCommissionBreakdown:s,calculateBrokerSplitsForPayment:i,canGeneratePayments:o.canGeneratePayments,validationMessages:o.validationMessages,paymentComparisons:a}},FM=({deal:e,hasPayments:t,existingPayments:r=[],commissionSplits:n=[],onGeneratePayments:s,onUpdatePaymentAmounts:i,generatingPayments:o})=>{const{calculatedPaymentAmount:a,totalCalculatedPayments:l,paymentCommissionBreakdown:u,canGeneratePayments:d,validationMessages:f,paymentComparisons:h}=Gb(e,r,n),p=e.number_of_payments||1,m=y=>y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),x=h.some(y=>y.needs_update);r.length<p;const b=r.length===p;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Generation"}),t&&c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.length," of ",p," Payments Created"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Actions"}),c.jsxs("div",{className:"space-y-3",children:[b?c.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:" All Payments Created"}),c.jsxs("div",{children:["All ",p," payments have been created for this deal."]})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:s,disabled:!d||o,className:`w-full px-4 py-3 rounded-md font-medium transition-colors ${d&&!o?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating Additional Payments...":"Generating Payments..."]}):t?`Create Remaining ${p-r.length} Payments`:`Generate ${p} Payment${p>1?"s":""}`}),t&&c.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:" Safe Generation"}),c.jsx("div",{children:"This will create the remaining payments without affecting existing payment records or their associated invoice data."})]})]}),t&&x&&i&&c.jsx("button",{onClick:i,disabled:o,className:"w-full px-4 py-2 border border-amber-300 bg-amber-50 text-amber-700 rounded-md font-medium hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Payment Amounts"}),!d&&c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:"Configuration Required"}),c.jsx("div",{children:"Complete commission configuration in the Commission tab before generating payments."})]})]}),d&&p>1||t&&h.length>0?c.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d&&p>1&&c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Payment Schedule Preview"}),c.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[Array.from({length:p},(y,g)=>{const v=r.find(_=>_.payment_sequence===g+1);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{children:["Payment ",g+1,":"]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:`font-medium ${v?"text-green-600":""}`,children:["$",m(a),v&&" "]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75",children:["AGCI: $",m(u.agci)]})]})]},g)}),c.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[c.jsx("span",{children:"Total:"}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{children:["$",m(l)]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75 font-normal",children:["Total AGCI: $",m(u.agci*p)]})]})]})]})]}),t&&h.length>0&&c.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Current vs Calculated"}),c.jsx("div",{className:"text-sm text-gray-700 space-y-1",children:h.map((y,g)=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Payment ",g+1,":"]}),c.jsxs("span",{className:y.needs_update?"text-amber-700 font-medium":"text-gray-600",children:["$",m(y.database_amount),"  $",m(y.calculated_amount),y.needs_update&&" "]})]},g))})]})]}):null]})]})};function $M({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const BM=w.forwardRef($M),qb=BM;function UM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const WM=w.forwardRef(UM),Kb=WM,Qb=e=>{if(!e)return"Unknown";const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n).toLocaleDateString()},bn=(e,t="Not set")=>e?Qb(e):t,HM=e=>e||"",YM=({payment:e,totalPayments:t,isExpanded:r,onToggleExpansion:n,onUpdatePayment:s,onDeletePayment:i})=>(console.log(" PaymentSummaryRow payment dates:",{id:e.id,payment_sequence:e.payment_sequence,payment_date_estimated:e.payment_date_estimated,payment_received_date:e.payment_received_date}),c.jsxs("div",{className:"p-4 grid grid-cols-12 items-center gap-4",children:[c.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded flex-shrink-0",children:r?c.jsx(qb,{className:"h-4 w-4 text-gray-500"}):c.jsx(Kb,{className:"h-4 w-4 text-gray-500"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:["Payment ",e.payment_sequence," of ",t]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["$",(e.payment_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("div",{className:"text-xs text-gray-500",children:"Invoice #"}),c.jsx("div",{className:"text-sm text-gray-900",children:e.orep_invoice||"-"})]}),c.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:e.payment_received||!1,onChange:o=>s({payment_received:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e.payment_received?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.payment_received?"Received":"Pending"})]}),c.jsx("div",{className:"col-span-3",children:e.payment_received?c.jsx("div",{className:"w-full px-2 py-1 text-sm",children:c.jsxs("div",{className:"font-medium text-green-800",children:["Paid Date: ",Qb(e.payment_received_date)]})}):c.jsxs("div",{children:[e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Estimated Pmt Date"}),c.jsx("input",{type:"date",value:e.payment_date_estimated||"",onChange:o=>s({payment_date_estimated:o.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",placeholder:"Estimated payment date"}),!e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Set estimated payment date"})]})}),c.jsx("div",{className:"col-span-2 text-right",children:c.jsx("button",{onClick:i,className:"text-red-600 hover:text-red-900 text-sm whitespace-nowrap",children:"Delete"})})]})),zM=({split:e,brokerName:t,paymentAmount:r,onPercentageChange:n,validationTotals:s})=>c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{children:c.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t})}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2})]})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Origination"}),c.jsx(vr,{label:"",value:e.split_origination_percent||0,onChange:i=>n("split_origination_percent",i)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_origination_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Site"}),c.jsx(vr,{label:"",value:e.split_site_percent||0,onChange:i=>n("split_site_percent",i)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_site_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Deal"}),c.jsx(vr,{label:"",value:e.split_deal_percent||0,onChange:i=>n("split_deal_percent",i)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_deal_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Total"}),c.jsxs("div",{className:`text-sm font-semibold ${s&&!s.isValid?"text-red-600":"text-blue-600"}`,children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s&&!s.isValid&&c.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Check totals"})]})]})]}),xs=e=>e==null||isNaN(e)?"$0.00":`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Yg=({payeeName:e,amount:t,paid:r,onTogglePaid:n,disabled:s=!1})=>{const i=()=>{s||n(!r)};return c.jsxs("div",{className:`
        flex items-center justify-between p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer
        ${r?"bg-green-50 border-green-200 hover:border-green-300":"bg-white border-gray-200 hover:border-gray-300"}
        ${s?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
      `,onClick:i,role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&!s&&(o.preventDefault(),i())},"aria-label":`${r?"Mark as unpaid":"Mark as paid"} - ${e} - ${xs(t)}`,children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsx("div",{className:`
          flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200
          ${r?"bg-green-500 border-green-500":"bg-white border-gray-300 hover:border-green-400"}
        `,children:r&&c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`
            text-sm font-medium truncate transition-colors duration-200
            ${r?"text-green-900":"text-gray-900"}
          `,children:e}),c.jsx("p",{className:`
            text-xs transition-colors duration-200
            ${r?"text-green-700":"text-gray-500"}
          `,children:r?"Check written":"Pending payment"})]})]}),c.jsxs("div",{className:"flex-shrink-0 text-right",children:[c.jsx("p",{className:`
          text-lg font-semibold transition-colors duration-200
          ${r?"text-green-900":"text-gray-900"}
        `,children:xs(t)}),r&&c.jsxs("div",{className:"flex items-center justify-end mt-1",children:[c.jsx("svg",{className:"w-3 h-3 text-green-600 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Paid"})]})]})]})},VM=({isOpen:e,onClose:t,payment:r,deal:n,clients:s,brokers:i,paymentSplits:o,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const v=[];if(n.referral_payee_client_id&&n.referral_fee_usd&&n.referral_fee_usd>0){const _=s.find(C=>C.id===n.referral_payee_client_id),S=n.fee||n.deal_usd||0,k=r.payment_amount||0,D=S>0?n.referral_fee_usd*(k/S):0;D>0&&v.push({id:`referral-${r.id}`,type:"referral",payeeName:(_==null?void 0:_.client_name)||"Unknown Referral Client",amount:D,paid:r.referral_fee_paid||!1})}console.log(" Payment splits for disbursement modal:",o),o.forEach(_=>{const S=i.find(D=>D.id===_.broker_id),k=_.paid||!1;console.log(" Processing split:",{paymentSplitId:_.id,brokerName:S==null?void 0:S.name,brokerPaid:k,amount:_.split_broker_total}),_.split_broker_total&&_.split_broker_total>0&&v.push({id:_.id,type:"broker",payeeName:(S==null?void 0:S.name)||"Unknown Broker",amount:_.split_broker_total,paid:k})}),d(v)}},[e,r,n,s,i,o]);const p=async(v,_)=>{h(!0);try{v.type==="referral"?await a(r.id,_):await l(v.id,_),d(S=>S.map(k=>k.id===v.id?{...k,paid:_}:k))}catch(S){console.error("Error updating disbursement status:",S)}finally{h(!1)}},m=r.payment_amount||0,x=u.reduce((v,_)=>v+(_.paid?_.amount:0),0),b=m-x,y=u.filter(v=>v.paid).length,g=u.length;return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Disbursement"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment ",r.payment_sequence," - ",xs(m)]})]})]}),c.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",disabled:f,children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Disbursement Progress: ",y," of ",g," checks written"]}),c.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(y/Math.max(g,1)*100),"% Complete"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${y/Math.max(g,1)*100}%`}})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Disbursements Required"}),c.jsx("p",{className:"text-sm text-gray-500",children:"This payment has no referral fees or broker commissions to disburse."})]}):c.jsxs("div",{className:"space-y-4",children:[u.some(v=>v.type==="referral")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Referral Payments"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="referral").map(v=>c.jsx(Yg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]}),u.some(v=>v.type==="broker")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Broker Commissions"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="broker").map(v=>c.jsx(Yg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]})]})}),u.length>0&&c.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Payment Received:"}),c.jsx("p",{className:"font-semibold text-gray-900",children:xs(m)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Disbursed:"}),c.jsx("p",{className:"font-semibold text-green-600",children:xs(x)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Remaining:"}),c.jsx("p",{className:`font-semibold ${b>=0?"text-gray-900":"text-red-600"}`,children:xs(b)})]})]})})]})}):null},GM=({payment:e,deal:t,clients:r,brokers:n,paymentSplits:s,commissionSplits:i,onUpdatePayment:o,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState(!1),f=()=>{if(!t.referral_payee_client_id)return"No referral payee set";if(!r||r.length===0)return"Client data not available";const x=r.find(b=>b.id===t.referral_payee_client_id);return x?x.client_name||"Unknown Client":"Client not found"},h=()=>{if(!t.referral_fee_usd||t.referral_fee_usd===0)return 0;const x=t.fee||t.deal_usd||0,b=e.payment_amount||0;return x===0?0:t.referral_fee_usd*(b/x)},p=(x,b,y=!1)=>{const g=e[b];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),y&&g&&c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:bn(g)}),c.jsx("input",{type:"date",value:HM(g),onChange:v=>o({[b]:v.target.value||null}),className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})},m=(x,b,y)=>{const g=e[b];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),c.jsx("input",{type:"text",value:g||"",onChange:v=>o({[b]:v.target.value||null}),placeholder:y,className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})};return c.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"p-4 md:p-6",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Details"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Payment Dates & Tracking"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6",children:[p("Estimated Payment Date","payment_date_estimated"),p("Payment Received Date","payment_received_date"),p("Invoice Date","payment_invoice_date"),m("OREP Invoice","orep_invoice","Enter OREP Invoice number")]})]}),(t.referral_payee_client_id||t.referral_fee_usd||t.referral_fee_percent)&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Referral Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Payee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:f()})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Fee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:(()=>{const x=h(),b=t.referral_fee_usd||0;return x===0?"No referral fee for this payment":c.jsxs(c.Fragment,{children:["$",x.toLocaleString("en-US",{minimumFractionDigits:2}),c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["($",b.toLocaleString("en-US",{minimumFractionDigits:2})," total)"]}),t.referral_fee_percent&&c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.referral_fee_percent,"%)"]})]})})()})]})]})]}),(e.sf_payment_date_est||e.sf_payment_date_actual||e.sf_payment_date_received||e.sf_payment_invoice_date)&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Salesforce Date Fields (Read-only)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-xs",children:[e.sf_payment_date_est&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Est Date:"})," ",c.jsx("span",{className:"text-gray-500",children:bn(e.sf_payment_date_est)})]}),e.sf_payment_date_actual&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Actual Date:"})," ",c.jsx("span",{className:"text-gray-500",children:bn(e.sf_payment_date_actual)})]}),e.sf_payment_date_received&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Received Date:"})," ",c.jsx("span",{className:"text-gray-500",children:bn(e.sf_payment_date_received)})]}),e.sf_payment_invoice_date&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Invoice Date:"})," ",c.jsx("span",{className:"text-gray-500",children:bn(e.sf_payment_invoice_date)})]})]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-gray-500",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Payment Received:"})," ",e.payment_received?"Yes":"No",e.payment_received_date&&c.jsxs("span",{className:"ml-1",children:["(",bn(e.payment_received_date),")"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"SF Payment Status:"})," ",e.sf_payment_status||"Not set"]}),e.qb_sync_status&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"QB Sync Status:"})," ",e.qb_sync_status]}),e.qb_last_sync&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Last QB Sync:"})," ",bn(e.qb_last_sync)]})]})}),c.jsx("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"checkbox",id:`payment-received-${e.id}`,checked:e.payment_received||!1,onChange:async x=>{const b=x.target.checked;await o({payment_received:b}),b&&(t.referral_fee_usd&&t.referral_fee_usd>0||s&&s.some(y=>(y.split_broker_total||0)>0))&&d(!0)},className:"h-5 w-5 text-blue-600 rounded border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`payment-received-${e.id}`,className:"text-sm font-semibold text-blue-900 cursor-pointer",children:"Payment Received"}),c.jsx("p",{className:"text-xs text-blue-700",children:e.payment_received?"Payment has been received - manage disbursements below":"Check when payment is received to manage disbursements"})]})]}),e.payment_received&&c.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Manage Disbursements"})]})})]}),u&&c.jsx(VM,{isOpen:u,onClose:()=>d(!1),payment:e,deal:t,clients:r||[],brokers:n||[],paymentSplits:s||[],onUpdateReferralPaid:a||(async()=>{}),onUpdatePaymentSplitPaid:l||(async()=>{})})]})},qM=e=>{const t={deal:0,site:0,origination:0,isValid:!0};return e.forEach(r=>{t.deal+=r.split_deal_percent||0,t.site+=r.split_site_percent||0,t.origination+=r.split_origination_percent||0}),t.isValid=t.deal===100&&t.site===100&&t.origination===100,t},KM=(e,t,r,n)=>e.map(s=>{let i=s.split_origination_usd||0,o=s.split_site_usd||0,a=s.split_deal_usd||0,l=s.split_broker_total||0;if(r&&n){const u=r.number_of_payments||1,d=(r.referral_fee_usd||0)/u,f=(r.house_usd||0)/u,h=n-d-f,p=(r.origination_percent||0)/100*h,m=(r.site_percent||0)/100*h,x=(r.deal_percent||0)/100*h;i=p*(s.split_origination_percent||0)/100,o=m*(s.split_site_percent||0)/100,a=x*(s.split_deal_percent||0)/100,l=i+o+a}return{...s,split_origination_usd:i,split_site_usd:o,split_deal_usd:a,split_broker_total:l}}),QM=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(async d=>{t(!0),n(null);try{const{data:f,error:h}=await V.from("payment").select("*").eq("id",d).single();if(h)throw h;const{data:p,error:m}=await V.from("payment_split").select("*").eq("payment_id",d);if(m)throw m;return{payment:f,paymentSplits:p||[]}}catch(f){const h=f instanceof Error?f.message:"Failed to load disbursement data";return n(h),console.error("Error loading disbursement data:",f),null}finally{t(!1)}},[]),i=w.useCallback(async(d,f)=>{t(!0),n(null);try{const{error:h}=await V.from("payment").update({referral_fee_paid:f}).eq("id",d);if(h)throw h}catch(h){const p=h instanceof Error?h.message:"Failed to update referral payment status";throw n(p),console.error("Error updating referral paid status:",h),h}finally{t(!1)}},[]),o=w.useCallback(async(d,f)=>{t(!0),n(null),console.log(" Updating payment split paid status:",{splitId:d,paid:f});try{const{error:h,data:p}=await V.from("payment_split").update({paid:f}).eq("id",d).select();if(h)throw console.error(" Supabase error updating payment split:",h),h;console.log(" Payment split updated successfully:",p)}catch(h){const p=h instanceof Error?h.message:"Failed to update payment split status";throw n(p),console.error("Error updating payment split paid status:",h),h}finally{t(!1)}},[]),a=w.useCallback((d,f,h)=>{const p=d.payment_amount||0,m=h||0,x=d.referral_fee_paid&&m>0?m:0,b=f.reduce((E,P)=>E+(P.paid&&P.split_broker_total||0),0),y=x+b,g=p-y,v=m>0?1:0,_=f.filter(E=>(E.split_broker_total||0)>0).length,S=v+_,k=d.referral_fee_paid&&m>0?1:0,D=f.filter(E=>E.paid&&(E.split_broker_total||0)>0).length,C=k+D;return{paymentAmount:p,referralAmount:m,referralDisbursed:x,brokerDisbursed:b,totalDisbursed:y,remainingBalance:g,totalItems:S,paidItems:C,completionPercentage:S>0?Math.round(C/S*100):0,isOverDisbursed:y>p,isFullyDisbursed:C===S&&S>0}},[]),l=w.useCallback((d,f)=>f>d?{isValid:!1,message:`Disbursements exceed payment by $${(f-d).toLocaleString("en-US",{minimumFractionDigits:2})}`}:{isValid:!0},[]),u=w.useCallback(()=>{n(null)},[]);return{loading:e,error:r,loadDisbursementData:s,updateReferralPaid:i,updatePaymentSplitPaid:o,calculateDisbursementTotals:a,validateDisbursement:l,clearError:u}},JM=({payment:e,splits:t,brokers:r,clients:n,commissionSplits:s,dealAmounts:i,deal:o,onSplitPercentageChange:a,onUpdatePayment:l,onUpdatePaymentSplit:u})=>{const[d,f]=w.useState(!1),h=S=>{const k=r.find(D=>D.id===S);return k?k.name:"Unknown Broker"},m=(()=>{const S=e.payment_amount||0,k=o.number_of_payments||1,D=(o.referral_fee_usd||0)/k,C=(o.house_usd||0)/k;return S-D-C})(),x=KM(t,i,o,e.payment_amount||0),b=qM(x),{updateReferralPaid:y,updatePaymentSplitPaid:g}=QM(),v=async(S,k)=>{try{await y(S,k)}catch(D){console.error("Error updating referral payment status:",D)}},_=async(S,k)=>{try{await g(S,k),u&&(await u(S,{paid:k}),console.log(" Payment split paid status updated, parent state refreshed"))}catch(D){console.error("Error updating payment split status:",D)}};return c.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Commission Breakdown"}),c.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Payment #",e.payment_sequence,"  AGCI: $",m.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsx("div",{className:"space-y-4",children:x.map(S=>c.jsx(zM,{split:S,brokerName:h(S.broker_id),paymentAmount:e.payment_amount||0,onPercentageChange:(k,D)=>a(S.id,k,D),validationTotals:b},S.id))}),!b.isValid&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[c.jsx("div",{className:"text-sm font-medium text-red-800",children:"Percentage Validation Errors:"}),c.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[b.origination!==100&&`Origination: ${b.origination}% `,b.site!==100&&`Site: ${b.site}% `,b.deal!==100&&`Deal: ${b.deal}% `,"(must equal 100% each)"]})]})]}),c.jsxs("div",{className:"border-t border-gray-200",children:[c.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>f(!d),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Dates, tracking, and referral information"})]}),c.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:d?c.jsx(qb,{className:"h-4 w-4 text-gray-500"}):c.jsx(Kb,{className:"h-4 w-4 text-gray-500"})})]})}),d&&c.jsx(GM,{payment:e,deal:o,clients:n,brokers:r,paymentSplits:t,commissionSplits:s,onUpdatePayment:l,onUpdateReferralPaid:v,onUpdatePaymentSplitPaid:_})]})]})},XM=({payments:e,paymentSplits:t,brokers:r,clients:n,commissionSplits:s,deal:i,onUpdatePayment:o,onDeletePayment:a,onUpdatePaymentSplit:l})=>{const[u,d]=w.useState(new Set),[f,h]=w.useState(!1),[p,m]=w.useState(null),x=_=>{d(S=>{const k=new Set(S);return k.has(_)?k.delete(_):k.add(_),k})},b=_=>t.filter(S=>S.payment_id===_),y=_=>{m(_),h(!0)},g=async()=>{if(p)try{await a(p.id),h(!1),m(null)}catch(_){console.error("Error deleting payment:",_)}},v=async(_,S,k)=>{try{const{error:D}=await V.from("payment_split").update({[S]:k||0}).eq("id",_);if(D)throw console.error("Supabase error:",D),D;l&&await l(_,S,k)}catch(D){console.error("Error updating payment split:",D),alert("Failed to update split percentage. Please try again.")}};return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Management"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage individual payments and track their status"})]}),c.jsx("div",{className:"space-y-3",children:e.map(_=>{const S=b(_.id),k=u.has(_.id);return c.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white",children:[c.jsx(YM,{payment:_,totalPayments:e.length,isExpanded:k,onToggleExpansion:()=>x(_.id),onUpdatePayment:D=>o(_.id,D),onDeletePayment:()=>y(_)}),k&&c.jsx(JM,{payment:_,splits:S,brokers:r,clients:n,commissionSplits:s,dealAmounts:{origination_usd:i.origination_usd||0,site_usd:i.site_usd||0,deal_usd:i.deal_usd||0},deal:i,onSplitPercentageChange:v,onUpdatePayment:D=>o(_.id,D),onUpdatePaymentSplit:async(D,C)=>{l&&C.paid!==void 0&&await l(D,"paid",C.paid)}})]},_.id)})}),c.jsx(Vb,{isOpen:f,onClose:()=>h(!1),onConfirm:g,title:"Delete Payment",itemName:p?`Payment ${p.payment_sequence} of ${e.length}`:"",message:"This will permanently delete the payment and all associated commission splits. This action cannot be undone."})]})},ZM=({statusSummary:e,hasOverdue:t,completionRate:r})=>c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Payment Status"}),e.total>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(r),"% complete)"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.received>0&&c.jsx("div",{className:"px-2 py-1 bg-green-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-green-800 font-bold",children:[" Received ",e.received]})}),e.sent>0&&c.jsx("div",{className:"px-2 py-1 bg-blue-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-blue-800 font-bold",children:[" Sent ",e.sent]})}),e.pending>0&&c.jsx("div",{className:"px-2 py-1 bg-yellow-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-yellow-800 font-bold",children:[" Pending ",e.pending]})}),e.overdue>0&&c.jsx("div",{className:"px-2 py-1 bg-red-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-red-800 font-bold",children:[" Overdue ",e.overdue]})})]}),t&&c.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[c.jsx("strong",{children:"Action needed:"})," ",e.overdue," payment",e.overdue!==1?"s":"",e.overdue===1?" is":" are"," overdue and require",e.overdue===1?"s":""," attention."]}),e.total>0&&c.jsx("div",{className:"mt-3",children:c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})})]}),eL=({deal:e,commissionSplits:t=[],onEditClick:r,className:n=""})=>{const{baseAmounts:s}=Wh(e,t),{gci:i,houseUsd:o,agci:a,originationPercent:l,sitePercent:u,dealPercent:d,originationUSD:f,siteUSD:h,dealUSD:p,totalDealUSD:m}=s,x=e.fee||0,b=e.referral_fee_percent||0,y=e.referral_fee_usd||b/100*x,g=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(P),v=x>0?o/x*100:0,_=x>0?y/x*100:0,S=x>0?o/x*100:0,k=x>0?f/x*100:0,D=x>0?h/x*100:0,C=x>0?p/x*100:0,E=_>0||S>0||k>0||D>0||C>0;return!e.fee||e.fee===0?c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Commission breakdown will appear when commission fee is set"}),r&&c.jsx("button",{onClick:r,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Set Commission Details "})]}):c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm",children:[c.jsxs("span",{className:"font-medium text-gray-900",children:["Total Commission: ",c.jsx("span",{className:"text-green-600",children:g(x)})]}),y>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["Referral: ",c.jsx("span",{className:"text-orange-600",children:g(y)})]})]}),o>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["House: ",c.jsx("span",{className:"text-gray-600",children:g(o)})]})]}),c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["AGCI: ",c.jsx("span",{className:"text-blue-600 font-medium",children:g(a)})]})]}),r&&c.jsx("button",{onClick:r,className:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Edit Commission"})]}),E&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex h-8 bg-gray-200 rounded-lg overflow-hidden",children:[_>0&&c.jsx("div",{className:"bg-orange-500 flex items-center justify-center relative group",style:{width:`${_}%`},title:`Referral: ${b}% of total - ${g(y)}`,children:_>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[b.toFixed(1),"%"]})}),S>0&&c.jsx("div",{className:"bg-gray-500 flex items-center justify-center relative group",style:{width:`${S}%`},title:`House: ${v.toFixed(1)}% of total - ${g(o)}`,children:S>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[v.toFixed(1),"%"]})}),k>0&&c.jsx("div",{className:"bg-blue-500 flex items-center justify-center relative group",style:{width:`${k}%`},title:`Origination: ${l}% of AGCI - ${g(f)}`,children:k>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[l,"%"]})}),D>0&&c.jsx("div",{className:"bg-green-500 flex items-center justify-center relative group",style:{width:`${D}%`},title:`Site: ${u}% of AGCI - ${g(h)}`,children:D>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[u,"%"]})}),C>0&&c.jsx("div",{className:"bg-purple-500 flex items-center justify-center relative group",style:{width:`${C}%`},title:`Deal: ${d}% of AGCI - ${g(p)}`,children:C>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[d,"%"]})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2",children:[y>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Referral"})," ",g(y)]})]}),o>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"House"})," ",g(o)]})]}),l>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Origination"})," ",g(f)]})]}),u>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Site"})," ",g(h)]})]}),d>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Deal"})," ",g(p)]})]})]}),m!==a&&a>0&&c.jsx("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:" Commission percentages don't total to 100% of AGCI"})]}),!E&&c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Commission breakdown percentages not configured"}),r&&c.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Configure Commission Splits "})]})]})},tL=e=>{const t=o=>{if(o.payment_received)return"received";if(o.invoice_sent&&!o.payment_received){if(o.payment_date_estimated){const a=new Date(o.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"sent"}if(o.payment_date_estimated&&!o.invoice_sent){const a=new Date(o.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"pending"},r=e.reduce((o,a)=>{const l=t(a);return o[l]=(o[l]||0)+1,o.total++,o},{pending:0,sent:0,overdue:0,received:0,total:0}),n=r.overdue>0,s=r.overdue>0||r.sent>0,i=r.total>0?r.received/r.total*100:0;return{getPaymentStatus:t,statusSummary:r,hasOverdue:n,hasActionItems:s,completionRate:i}},rL=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,i]=w.useState([]),[o,a]=w.useState([]),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(!0),[m,x]=w.useState(null),[b,y]=w.useState(!1),{calculatedPaymentAmount:g,totalCalculatedPayments:v,paymentCommissionBreakdown:_,canGeneratePayments:S,validationMessages:k}=Gb(e,r,o),D=async()=>{if(e.id)try{p(!0),x(null);const{data:N,error:T}=await V.from("payment").select("*, payment_date_estimated").eq("deal_id",e.id).order("payment_sequence",{ascending:!0});if(T)throw T;console.log(" PaymentTab fetchPaymentData - payments found:",{dealId:e.id,paymentsCount:(N==null?void 0:N.length)||0,payments:N==null?void 0:N.map(Ce=>({id:Ce.id,sequence:Ce.payment_sequence,amount:Ce.payment_amount,estimated_date:Ce.payment_date_estimated}))});const M=(N==null?void 0:N.map(Ce=>Ce.id))||[];let H=[];if(M.length>0){const{data:Ce,error:gn}=await V.from("payment_split").select("*").in("payment_id",M);if(gn)throw gn;H=Ce||[]}const{data:K,error:Ne}=await V.from("commission_split").select("*").eq("deal_id",e.id);if(Ne)throw Ne;const{data:Te,error:Jt}=await V.from("broker").select("*").order("name");if(Jt)throw Jt;let nt=[];try{const{data:Ce,error:gn}=await V.from("client").select("*").order("client_name");gn?console.warn("Client table not available:",gn.message):nt=Ce||[]}catch(Ce){console.warn("Error fetching clients (table may not exist):",Ce)}n(N||[]),i(H),a(K||[]),u(Te||[]),f(nt||[])}catch(N){console.error("Error fetching payment data:",N),x(N instanceof Error?N.message:"Failed to load payment data")}finally{p(!1)}},C=async()=>{if(e.id)try{y(!0),x(null);const{data:N,error:T}=await V.rpc("generate_payments_for_deal",{deal_uuid:e.id});if(T)throw T;await D()}catch(N){console.error("Error generating payments:",N),x(N instanceof Error?N.message:"Failed to generate payments")}finally{y(!1)}},E=async(N,T)=>{try{const{error:M}=await V.from("payment").update(T).eq("id",N);if(M)throw M;n(H=>H.map(K=>K.id===N?{...K,...T}:K))}catch(M){console.error("Error updating payment:",M),x(M instanceof Error?M.message:"Failed to update payment")}},P=async N=>{try{const{error:T}=await V.from("payment_split").delete().eq("payment_id",N);if(T)throw T;const{error:M}=await V.from("payment").delete().eq("id",N);if(M)throw M;n(H=>H.filter(K=>K.id!==N)),i(H=>H.filter(K=>K.payment_id!==N))}catch(T){console.error("Error deleting payment:",T),x(T instanceof Error?T.message:"Failed to delete payment")}};if(w.useEffect(()=>{D()},[e.id]),h)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})});const I=r.length>0;r.reduce((N,T)=>N+(T.payment_amount||0),0);const F=e.fee||0,{statusSummary:O,hasOverdue:A,hasActionItems:B,completionRate:$}=tL(r),z=N=>N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return c.jsxs("div",{className:"space-y-6",children:[m&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsx("div",{className:"text-red-700",children:m})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Commission"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",z(F)]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-green-600",children:"Calculated Payments"}),c.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["$",z(v)]}),c.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.number_of_payments||1,"  $",z(g)]})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-purple-600",children:"AGCI Available"}),c.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",z(e.agci||0)]}),c.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"After house & referral fees"})]}),c.jsx(ZM,{statusSummary:O,hasOverdue:A,completionRate:$})]}),c.jsx(eL,{deal:e,commissionSplits:o,className:"mb-6"}),c.jsx(FM,{deal:e,hasPayments:I,existingPayments:r,commissionSplits:o,onGeneratePayments:C,generatingPayments:b}),I?c.jsx("div",{className:"space-y-6",children:c.jsx(XM,{payments:r,paymentSplits:s,brokers:l,clients:d,commissionSplits:o,deal:e,onUpdatePayment:E,onDeletePayment:P,onUpdatePaymentSplit:async(N,T,M)=>{i(H=>H.map(K=>K.id===N?{...K,[T]:M!==null?M:T==="paid"?!1:0}:K))}})}):c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No payments generated yet"}),c.jsx("div",{className:"text-gray-400 text-sm",children:S?'Click "Generate Payments" above to create payment records':"Complete commission configuration to enable payment generation"}),k.length>0&&c.jsxs("div",{className:"mt-4 text-left max-w-md mx-auto",children:[c.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Required configuration:"}),c.jsx("ul",{className:"text-sm text-gray-500 space-y-1",children:k.map((N,T)=>c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:""}),N]},T))})]})]})]})},nL=({deal:e})=>{const[t,r]=w.useState(null),[n,s]=w.useState(null),[i,o]=w.useState(!0);w.useEffect(()=>{(async()=>{try{if(e.client_id){const{data:f}=await V.from("client").select("id, client_name").eq("id",e.client_id).single();f&&r(f)}if(e.stage_id){const{data:f}=await V.from("deal_stage").select("id, label").eq("id",e.stage_id).single();f&&s(f)}}catch(f){console.error("Error fetching header data:",f)}finally{o(!1)}})()},[e.client_id,e.stage_id]);const a=d=>d==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),l=d=>{if(!d)return"Not set";try{return new Date(d).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},u=()=>c.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}),c.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"21",cy:"7",r:"1",fill:"currentColor"})]});return i?c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:c.jsx(u,{})}),c.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Loading..."})]})})})}):c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(u,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Deal"})]}),c.jsx("h1",{className:"text-xl font-bold leading-tight",children:e.deal_name||"Unnamed Deal"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Account Name"}),c.jsx("div",{className:"text-white",children:(t==null?void 0:t.client_name)||"No Client"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Stage"}),c.jsx("div",{className:"text-white font-semibold",children:(n==null?void 0:n.label)||"No Stage"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Probability"}),c.jsx("div",{className:"text-white font-semibold",children:e.probability!==null?`${e.probability}%`:"0%"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Target Close Date"}),c.jsx("div",{className:"text-white",children:l(e.target_close_date)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Deal Value"}),c.jsx("div",{className:"text-white font-bold text-base",children:a(e.deal_value)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Fee"}),c.jsx("div",{className:"text-emerald-400 font-bold text-base",children:a(e.fee)})]})]})]})})};function sL(){const{dealId:e}=py(),[t,r]=w.useState(null),[n,s]=w.useState("overview"),{contacts:i}=zb(e||null);w.useEffect(()=>{e&&(async()=>{const{data:u,error:d}=await V.from("deal").select("*").eq("id",e).single();!d&&u&&r(u)})()},[e]);const o=l=>{r(l)},a=async l=>{const u={...t,...l};return r(u),Promise.resolve()};return t?c.jsxs(jM,{children:[c.jsxs(TM,{contactCount:i.length,notesCount:0,filesCount:0,activityCount:0,paymentsCount:0,children:[c.jsx(nL,{deal:t}),c.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsx("button",{onClick:()=>s("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),c.jsx("button",{onClick:()=>s("commission"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="commission"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Commission"}),c.jsx("button",{onClick:()=>s("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payments"})]})}),n==="overview"&&c.jsx(CM,{deal:t,onSave:o}),n==="commission"&&c.jsx(AM,{dealId:e,deal:t,onDealUpdate:a}),n==="payments"&&c.jsx(rL,{deal:t,onDealUpdate:a})]})]}),e&&c.jsx(OM,{dealId:e})]}):c.jsx("div",{className:"p-4",children:"Loading..."})}const iL=e=>{const[t,r]=w.useState(null),[n,s]=w.useState(!0),[i,o]=w.useState(null),a=w.useCallback(async()=>{if(!e){r(null),s(!1);return}try{s(!0),o(null);const{data:f,error:h}=await V.from("property").select(`
          *,
          property_type:property_type_id (
            id,
            label,
            description,
            active
          ),
          property_stage:property_stage_id (
            id,
            label,
            description,
            active
          )
        `).eq("id",e).single();if(h)throw h;r(f)}catch(f){console.error("Error fetching property:",f),o(f instanceof Error?f.message:"Failed to fetch property")}finally{s(!1)}},[e]);w.useEffect(()=>{a()},[a]);const l=w.useCallback(async f=>{if(!e)throw new Error("No property ID provided");try{o(null);const h={...f,updated_at:new Date().toISOString()},{data:p,error:m}=await V.from("property").update(h).eq("id",e).select(`
          *,
          property_type:property_type_id (
            id,
            label,
            description,
            active
          ),
          property_stage:property_stage_id (
            id,
            label,
            description,
            active
          )
        `).single();if(m)throw m;r(p)}catch(h){throw console.error("Error updating property:",h),o(h instanceof Error?h.message:"Failed to update property"),h}},[e]),u=w.useCallback(async f=>{try{o(null);const{data:h,error:p}=await V.from("property").insert([{...f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw p;return h}catch(h){throw console.error("Error creating property:",h),o(h instanceof Error?h.message:"Failed to create property"),h}},[]),d=w.useCallback(async()=>{await a()},[a]);return{property:t,loading:n,error:i,updateProperty:l,createProperty:u,refreshProperty:d}},oL=e=>{const[t,r]=w.useState(e||{}),[n,s]=w.useState(e||{}),i=w.useCallback(d=>{r(d)},[]),o=w.useCallback((d,f)=>{r(h=>({...h,[d]:f}))},[]),a=w.useCallback(d=>{const f=d||{};r(f),s(f)},[]),l=(()=>{var S,k,D,C;const d={},f=[];(S=t.property_name)!=null&&S.trim()||(d.property_name="Property name is required"),(k=t.address)!=null&&k.trim()||(d.address="Address is required"),(D=t.city)!=null&&D.trim()||(d.city="City is required"),(C=t.state)!=null&&C.trim()||(d.state="State is required");const h=Number(t.asking_lease_price),p=Number(t.asking_purchase_price);h<0&&(d.asking_lease_price="Lease price cannot be negative"),p<0&&(d.asking_purchase_price="Purchase price cannot be negative");const m=Number(t.rent_psf),x=Number(t.nnn_psf);m<0&&(d.rent_psf="Rent PSF cannot be negative"),x<0&&(d.nnn_psf="NNN PSF cannot be negative");const b=Number(t.building_sqft),y=Number(t.available_sqft);b<0&&(d.building_sqft="Building square footage cannot be negative"),y<0&&(d.available_sqft="Available square footage cannot be negative"),y>0&&b>0&&y>b&&f.push("Available square footage exceeds building square footage"),Number(t.traffic_count)<0&&(d.traffic_count="Traffic count cannot be negative");const v=Number(t.latitude),_=Number(t.longitude);return v&&(v<-90||v>90)&&(d.latitude="Latitude must be between -90 and 90"),_&&(_<-180||_>180)&&(d.longitude="Longitude must be between -180 and 180"),t.property_type_id||f.push("Property type is not set"),t.property_stage_id||f.push("Property stage is not set"),t.contact_id||f.push("No contact assigned to this property"),h===0&&p===0&&f.push("No pricing information available"),{isValid:Object.keys(d).length===0,errors:d,warnings:f}})(),u=JSON.stringify(t)!==JSON.stringify(n);return{formData:t,setFormData:i,updateField:o,validation:l,resetForm:a,isDirty:u}},aL=({property:e,isEditing:t,onToggleEdit:r,onBack:n,onGetLocation:s,onCallContact:i})=>{var l;const o=u=>u&&{Prospecting:"bg-blue-100 text-blue-800 border-blue-200",Qualified:"bg-yellow-100 text-yellow-800 border-yellow-200","Under Contract":"bg-purple-100 text-purple-800 border-purple-200",Closed:"bg-green-100 text-green-800 border-green-200",Lost:"bg-red-100 text-red-800 border-red-200"}[u]||"bg-gray-100 text-gray-800 border-gray-200",a=()=>c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});return c.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white shadow-sm",children:c.jsxs("div",{className:"px-4 sm:px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(a,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Property"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[s&&c.jsx("button",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",title:"Get current location",children:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i&&e.contact_id&&c.jsx("button",{onClick:i,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-600 hover:bg-green-500 transition-colors",title:"Call contact",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold leading-tight mb-2",children:e.property_name||e.address||"Unnamed Property"}),e.address&&e.property_name&&c.jsx("p",{className:"text-slate-300 text-sm",children:e.address})]}),e.property_stage&&c.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${o(e.property_stage.label)}`,children:e.property_stage.label})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Type"}),c.jsx("div",{className:"text-white",children:((l=e.property_type)==null?void 0:l.label)||"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Building Size"}),c.jsx("div",{className:"text-white",children:e.building_sqft?`${e.building_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Available Size"}),c.jsx("div",{className:"text-white",children:e.available_sqft?`${e.available_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Contact Made"}),c.jsx("div",{className:"text-white",children:e.contact_made?c.jsx("span",{className:"text-green-400 font-semibold",children:"Yes"}):c.jsx("span",{className:"text-yellow-400",children:"No"})})]})]})]})})},lL=({property:e,isEditing:t,onFieldUpdate:r,onGetCurrentLocation:n})=>{const[s,i]=w.useState(!1),o=async()=>{if(n)try{i(!0);const l=await n();r("latitude",l.lat),r("longitude",l.lng)}catch(l){console.error("Error getting current location:",l)}finally{i(!1)}},a=(l,u)=>{if(!l)return"Not set";const d=u==="lat"?l>=0?"N":"S":l>=0?"E":"W";return`${Math.abs(l).toFixed(6)} ${d}`};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Location & Contact"})]}),t&&n&&c.jsxs("button",{onClick:o,disabled:s,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm disabled:opacity-50",children:[s?c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Use Current Location"]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address*"}),t?c.jsx("input",{type:"text",value:e.address||"",onChange:l=>r("address",l.target.value),placeholder:"123 Main Street",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.address||"Not set"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City*"}),t?c.jsx("input",{type:"text",value:e.city||"",onChange:l=>r("city",l.target.value),placeholder:"San Francisco",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.city||"Not set"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State*"}),t?c.jsx("input",{type:"text",value:e.state||"",onChange:l=>r("state",l.target.value),placeholder:"CA",maxLength:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.state||"Not set"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),t?c.jsx("input",{type:"text",value:e.zip||"",onChange:l=>r("zip",l.target.value),placeholder:"94105",maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.zip||"Not set"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"County"}),t?c.jsx("input",{type:"text",value:e.county||"",onChange:l=>r("county",l.target.value),placeholder:"San Francisco County",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.county||"Not set"})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"GPS Coordinates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Latitude"}),t?c.jsx("input",{type:"number",step:"any",value:e.latitude||"",onChange:l=>r("latitude",parseFloat(l.target.value)||null),placeholder:"37.7749",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md text-sm",children:a(e.latitude,"lat")})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Longitude"}),t?c.jsx("input",{type:"number",step:"any",value:e.longitude||"",onChange:l=>r("longitude",parseFloat(l.target.value)||null),placeholder:"-122.4194",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md text-sm",children:a(e.longitude,"lng")})]})]})]}),e.latitude&&e.longitude&&c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"bg-gray-100 rounded-md p-6 text-center",children:[c.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),c.jsx("p",{className:"text-sm text-gray-600",children:"Map Preview"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a(e.latitude,"lat"),", ",a(e.longitude,"lng")]}),c.jsx("button",{className:"mt-2 text-xs text-blue-600 hover:text-blue-800",onClick:()=>{const l=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;window.open(l,"_blank")},children:"View in Google Maps "})]})})]})},cL=({property:e,isEditing:t,onFieldUpdate:r})=>{const n=a=>a==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),s=a=>a==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a),i=(a,l)=>{const u=parseFloat(l.replace(/[^0-9.-]/g,""))||0;r(a,u)},o=(a,l)=>{const u=parseFloat(l.replace(/[^0-9.-]/g,""))||0;r(a,u)};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asking Lease Price"}),t?c.jsx("input",{type:"text",inputMode:"decimal",value:e.asking_lease_price?e.asking_lease_price.toString():"",onChange:a=>r("asking_lease_price",a.target.value),onBlur:a=>i("asking_lease_price",a.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center text-lg font-semibold text-green-700",children:n(e.asking_lease_price)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Annual lease amount"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asking Purchase Price"}),t?c.jsx("input",{type:"text",inputMode:"decimal",value:e.asking_purchase_price?e.asking_purchase_price.toString():"",onChange:a=>r("asking_purchase_price",a.target.value),onBlur:a=>i("asking_purchase_price",a.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center text-lg font-semibold text-blue-700",children:n(e.asking_purchase_price)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total purchase price"})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rent PSF"}),t?c.jsx("input",{type:"text",inputMode:"decimal",value:e.rent_psf?e.rent_psf.toString():"",onChange:a=>r("rent_psf",a.target.value),onBlur:a=>o("rent_psf",a.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsxs("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center font-medium",children:[s(e.rent_psf)," / SF"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Base rent per square foot"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NNN PSF"}),t?c.jsx("input",{type:"text",inputMode:"decimal",value:e.nnn_psf?e.nnn_psf.toString():"",onChange:a=>r("nnn_psf",a.target.value),onBlur:a=>o("nnn_psf",a.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsxs("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center font-medium",children:[s(e.nnn_psf)," / SF"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Triple net charges per square foot"})]})]}),e.rent_psf&&e.nnn_psf&&e.available_sqft&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"All-In Rent Calculation"}),c.jsxs("div",{className:"text-lg font-bold text-blue-700",children:[s(e.rent_psf+e.nnn_psf)," / SF"]}),c.jsxs("div",{className:"text-sm text-blue-600",children:["Total annual: ",n((e.rent_psf+e.nnn_psf)*e.available_sqft)]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Square Footage"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Building Size"}),t?c.jsx("input",{type:"number",value:e.building_sqft||"",onChange:a=>r("building_sqft",parseInt(a.target.value)||null),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.building_sqft?`${e.building_sqft.toLocaleString()} SF`:"Not set"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total building square footage"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Size"}),t?c.jsx("input",{type:"number",value:e.available_sqft||"",onChange:a=>r("available_sqft",parseInt(a.target.value)||null),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}):c.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded-md min-h-[44px] flex items-center",children:e.available_sqft?`${e.available_sqft.toLocaleString()} SF`:"Not set"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Available square footage for lease"})]})]}),e.building_sqft&&e.available_sqft&&c.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded-md",children:c.jsxs("div",{className:"text-sm text-gray-600",children:["Occupancy: ",((e.building_sqft-e.available_sqft)/e.building_sqft*100).toFixed(1),"% (",e.building_sqft-e.available_sqft," SF occupied)"]})})]})]})},Es=({label:e,value:t,onChange:r,type:n="text",placeholder:s,disabled:i=!1,multiline:o=!1,rows:a=1,inputMode:l})=>{const[u,d]=w.useState(!1),[f,h]=w.useState(""),p=t||"Not set",m=()=>{i||(d(!0),h((t==null?void 0:t.toString())||""))},x=()=>{if(n==="number"){const g=parseFloat(f);r(isNaN(g)?null:g)}else r(f.trim()||null);d(!1)},b=()=>{d(!1),h("")},y=g=>{g.key==="Enter"&&!o?(g.preventDefault(),g.stopPropagation(),x()):g.key==="Escape"&&(g.preventDefault(),g.stopPropagation(),b())};if(u){const g=o?"textarea":"input";return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx(g,{type:o?void 0:n,inputMode:l,value:f,onChange:v=>h(v.target.value),onBlur:x,onKeyDown:y,placeholder:s,rows:o?a:void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px] resize-none",autoFocus:!0})]})}return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:m,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-start transition-colors ${i?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:i?"Not editable":"Click to edit",children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:o?c.jsx("div",{className:"whitespace-pre-wrap",children:p}):p})})]})},uL=({label:e,value:t,onChange:r,options:n,placeholder:s="Select...",disabled:i=!1})=>{const[o,a]=w.useState(!1),l=n.find(m=>m.id===t),u=(l==null?void 0:l.label)||"Not set",d=()=>{i||a(!0)},f=m=>{r(m||null),a(!1)},h=()=>{a(!1)},p=m=>{m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),h())};return o?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsxs("select",{value:t||"",onChange:m=>f(m.target.value),onBlur:h,onKeyDown:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",autoFocus:!0,children:[c.jsx("option",{value:"",children:s}),n.map(m=>c.jsx("option",{value:m.id,children:m.label},m.id))]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:d,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors ${i?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:i?"Not editable":"Click to edit",children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:u})})]})},dL=({property:e,isEditing:t,onFieldUpdate:r,propertyTypes:n=[]})=>{const[s,i]=w.useState(!0);return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>i(!s),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(uL,{label:"Property Type",value:e.property_type_id,onChange:o=>r("property_type_id",o),options:n.map(o=>({id:o.id,label:o.label})),placeholder:"Select property type..."}),c.jsx(Es,{label:"Property Name",value:e.property_name,onChange:o=>r("property_name",o),placeholder:"Property name or identifier"})]}),c.jsx(Es,{label:"Property Description",value:e.description,onChange:o=>r("description",o),placeholder:"Brief description of the property...",multiline:!0,rows:3}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Location Details"}),c.jsx(Es,{label:"Trade Area",value:e.trade_area,onChange:o=>r("trade_area",o),placeholder:"Downtown, Suburb, etc."})]})]})]})},fL=({property:e,onFieldUpdate:t})=>{const[r,n]=w.useState(!1);return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Analysis"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Traffic Data"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Es,{label:"Traffic Count",value:e.traffic_count,onChange:s=>t("traffic_count",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Daily vehicle count"})]}),c.jsxs("div",{children:[c.jsx(Es,{label:"Secondary Traffic Count",value:e.traffic_count_2nd,onChange:s=>t("traffic_count_2nd",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secondary road/access point"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Demographics"}),c.jsx(Es,{label:"Demographic Information",value:e.demographics,onChange:s=>t("demographics",s),placeholder:"Population, income levels, age groups, household composition, etc.",multiline:!0,rows:4})]}),(e["1_mile_pop"]||e["3_mile_pop"])&&c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Population Radius Data"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-blue-800",children:"1-Mile Population"}),c.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e["1_mile_pop"]?e["1_mile_pop"].toLocaleString():"N/A"})]}),c.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-green-800",children:"3-Mile Population"}),c.jsx("div",{className:"text-2xl font-bold text-green-900",children:e["3_mile_pop"]?e["3_mile_pop"].toLocaleString():"N/A"})]}),c.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})})]}),e["1_mile_pop"]&&e["3_mile_pop"]&&c.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("strong",{children:"Population Density Analysis:"}),c.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[" 1-mile radius: ~",Math.round(e["1_mile_pop"]/3.14).toLocaleString()," people per sq mile",c.jsx("br",{})," 3-mile radius: ~",Math.round(e["3_mile_pop"]/28.27).toLocaleString()," people per sq mile",c.jsx("br",{})," Inner ring density: ",e["1_mile_pop"]>e["3_mile_pop"]/9?"High urban concentration":"Suburban spread pattern"]})]})})]}),e.total_traffic&&c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Total Traffic Volume"})]}),c.jsxs("div",{className:"text-lg font-bold text-orange-900",children:[e.total_traffic.toLocaleString()," vehicles/day"]}),c.jsx("div",{className:"text-xs text-orange-700 mt-1",children:"Combined traffic from all access points and nearby roads"})]})})]})]})},hL=({property:e,isEditing:t,onFieldUpdate:r})=>{const n=[{key:"costar_link",label:"CoStar",description:"Commercial real estate database",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),color:"blue"},{key:"reonomy_link",label:"Reonomy",description:"Property intelligence platform",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),color:"purple"},{key:"tax_url",label:"Tax Records",description:"Property tax information",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),color:"green"},{key:"map_link",label:"Map View",description:"Interactive map link",icon:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"orange"}],s=(o,a)=>{const l={blue:a?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",purple:a?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100",green:a?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",orange:a?"bg-orange-600 hover:bg-orange-700 text-white border-orange-600":"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100"};return l[o]||l.blue},i=o=>{try{return new URL(o),!0}catch{return!1}};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Links"})]}),t?c.jsx("div",{className:"space-y-4",children:n.map(o=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o.label}),c.jsx("input",{type:"url",value:e[o.key]||"",onChange:a=>r(o.key,a.target.value),placeholder:`https://example.com/${o.label.toLowerCase()}-link`,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.description})]},o.key))}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(o=>{const a=e[o.key],l=a&&a.trim()!=="",u=l&&i(a);return c.jsx("button",{onClick:()=>{l&&u&&window.open(a,"_blank","noopener,noreferrer")},disabled:!l||!u,className:`w-full p-3 border rounded-lg text-left transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s(o.color,l&&u)}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:o.icon}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("div",{className:"font-medium text-sm",children:o.label}),c.jsx("div",{className:`text-xs opacity-75 truncate ${l&&u?"text-current":"text-gray-500"}`,children:l?u?"Click to open":"Invalid URL":o.description})]}),l&&u&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})},o.key)})}),t&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{if(e.latitude&&e.longitude){const o=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;r("map_link",o)}},disabled:!e.latitude||!e.longitude,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate Map Link"}),c.jsx("button",{onClick:()=>{if(e.address&&e.city&&e.state){const a=`https://www.costar.com/search?q=${encodeURIComponent(`${e.address} ${e.city} ${e.state}`)}`;r("costar_link",a)}},disabled:!e.address||!e.city||!e.state,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate CoStar Search"})]}),c.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Quick generation requires property address and coordinates to be set."})]})]})},pL=({property:e,isEditing:t,onFieldUpdate:r})=>{const[n,s]=w.useState(e.property_notes||""),[i,o]=w.useState(null),[a,l]=w.useState(!1),u=w.useRef(null),d=w.useRef(),f=()=>{u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")};w.useEffect(()=>{f()},[n,t]);const h=m=>{s(m),t&&(d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{try{l(!0),await r("property_notes",m),o(new Date)}catch(x){console.error("Auto-save failed:",x)}finally{l(!1)}},1e3))};w.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const p=m=>{const b=new Date().getTime()-m.getTime(),y=Math.floor(b/6e4);return y<1?"just now":y===1?"1 minute ago":y<60?`${y} minutes ago`:m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Notes"})]}),t&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}),!a&&i&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsxs("span",{children:["Saved ",p(i)]})]})]})]}),t?c.jsxs("div",{className:"space-y-3",children:[c.jsx("textarea",{ref:u,value:n,onChange:m=>h(m.target.value),placeholder:"Add notes about this property, market conditions, tenant information, lease details, or any other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none overflow-hidden min-h-[120px]",style:{maxHeight:"400px"}}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[n.length," characters"]}),c.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border rounded text-xs",children:"Cmd+S"}),c.jsx("span",{children:"to save manually"})]})]}),c.jsx("div",{className:"text-right",children:"Auto-saves after 1 second"})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{const m=`Property visit completed on [DATE]
- Condition: 
- Tenant activity: 
- Market comparison: 
- Next steps: `;h(n+(n?`

`:"")+m)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Site Visit"}),c.jsx("button",{onClick:()=>{const m=`Market analysis as of [DATE]
- Comparable properties: 
- Pricing trends: 
- Occupancy rates: 
- Notable developments: `;h(n+(n?`

`:"")+m)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Market Update"}),c.jsx("button",{onClick:()=>{const m=`Contact follow-up [DATE]
- Person contacted: 
- Response: 
- Action items: 
- Next contact date: `;h(n+(n?`

`:"")+m)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Follow-up"})]})]})]}):c.jsx("div",{children:n?c.jsx("div",{className:"prose prose-sm max-w-none",children:c.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:n})}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-sm",children:"No notes added yet"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click Edit to add property notes"})]})}),t&&c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18.5a5.5 5.5 0 100-11 5.5 5.5 0 000 11z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2a10 10 0 100 20 10 10 0 000-20z"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Voice-to-Text Coming Soon"}),c.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Future enhancement will allow voice dictation for faster note-taking during property visits."})]})]})})]})},mL=({propertyId:e,mode:t="view",initialLocation:r,onSave:n,onBack:s=()=>window.history.back()})=>{const[i,o]=w.useState(!1),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState("idle"),{property:p,loading:m,error:x,updateProperty:b,createProperty:y,refreshProperty:g}=iL(e),{formData:v,updateField:_,validation:S,isDirty:k,resetForm:D}=oL(p||void 0);w.useEffect(()=>{(async()=>{try{const[A,B]=await Promise.all([V.from("property_type").select("*").eq("active",!0).order("sort_order"),V.from("property_stage").select("*").eq("active",!0).order("sort_order")]);A.data&&l(A.data),B.data&&d(B.data)}catch(A){console.error("Error loading dropdown data:",A)}})()},[]),w.useEffect(()=>{t==="create"&&r&&!v.latitude&&!v.longitude&&(_("latitude",r.lat),_("longitude",r.lng))},[t,r,v.latitude,v.longitude,_]),w.useEffect(()=>{p&&D(p)},[p,D]);const C=async()=>{},E=async(O,A)=>{if(_(O,A),e&&t!=="create")try{h("saving"),await b({[O]:A}),h("saved"),setTimeout(()=>h("idle"),2e3)}catch(B){console.error("Auto-save failed:",B),h("error")}},P=()=>new Promise((O,A)=>{if(!navigator.geolocation){A(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(B=>{O({lat:B.coords.latitude,lng:B.coords.longitude})},B=>{A(new Error("Failed to get current location: "+B.message))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),I=()=>{console.log("Call contact for property:",e)};if(m)return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"bg-slate-800 h-32"}),c.jsx("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})]})});if(x&&t!=="create")return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Property"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x}),c.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})});const F=t==="create"?v:p||v;return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(aL,{property:{...F,property_type:a.find(O=>O.id===F.property_type_id),property_stage:u.find(O=>O.id===F.property_stage_id)},isEditing:i,onToggleEdit:C,onBack:s,onGetLocation:()=>P().then(O=>{E("latitude",O.lat),E("longitude",O.lng)}),onCallContact:I}),c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-8",children:[i&&S.warnings.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Recommendations"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:S.warnings.map((O,A)=>c.jsx("li",{children:O},A))})]})]})}),i&&f!=="idle"&&c.jsxs("div",{className:`p-2 rounded-md text-sm mb-4 ${f==="saving"?"bg-blue-50 text-blue-700":f==="saved"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[f==="saving"&&"Saving changes...",f==="saved"&&"Changes saved successfully",f==="error"&&"Error saving changes"]}),c.jsx(dL,{property:F,isEditing:i,onFieldUpdate:E,propertyTypes:a}),c.jsx(lL,{property:F,isEditing:i,onFieldUpdate:E,onGetCurrentLocation:P}),c.jsx(cL,{property:F,isEditing:i,onFieldUpdate:E}),c.jsx(fL,{property:F,onFieldUpdate:E}),c.jsx(hL,{property:F,isEditing:i,onFieldUpdate:E}),c.jsx(pL,{property:F,isEditing:i,onFieldUpdate:E}),i&&!S.isValid&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please fix these errors:"}),c.jsx("ul",{className:"mt-1 text-xs text-red-700 list-disc list-inside",children:Object.entries(S.errors).map(([O,A])=>c.jsxs("li",{children:[c.jsxs("strong",{children:[O,":"]})," ",A]},O))})]})]})})]})]})};function zg(){const{propertyId:e}=py(),t=Jl(),[r,n]=w.useState(null),[s,i]=w.useState(!0),[o,a]=w.useState(null),l=e==="create";w.useEffect(()=>{(async()=>{if(!e||l){i(!1);return}try{i(!0);const{data:h,error:p}=await V.from("property").select("*").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching property:",h),a(h instanceof Error?h.message:"Failed to load property")}finally{i(!1)}})()},[e,l]);const u=()=>{t(-1)},d=f=>{n(f),l&&t(`/property/${f.id}`)};return s?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Loading property..."})]})}):o&&!l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Property Not Found"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})}):c.jsx(mL,{propertyId:l?void 0:e,mode:l?"create":"view",onSave:d,onBack:u})}function gL(){const e=Ir(),{user:t,signOut:r}=fN(),n=i=>`px-4 py-2 rounded hover:bg-blue-100 ${e.pathname===i?"bg-blue-200 font-semibold":""}`,s=async()=>{await r()};return c.jsxs("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex space-x-4",children:[c.jsx(co,{to:"/master-pipeline",className:n("/master-pipeline"),children:"Master Pipeline"}),c.jsx(co,{to:"/property/create",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"+ New Property"})]}),t&&c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:t.email}),c.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})}function vL(){return c.jsx(hN,{children:c.jsx(pN,{children:c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx(gL,{}),c.jsxs(yS,{children:[c.jsx(ns,{path:"/",element:c.jsx(gS,{to:"/master-pipeline",replace:!0})}),c.jsx(ns,{path:"/master-pipeline",element:c.jsx($2,{})}),c.jsx(ns,{path:"/deal/:dealId",element:c.jsx(sL,{})}),c.jsx(ns,{path:"/property/create",element:c.jsx(zg,{})}),c.jsx(ns,{path:"/property/:propertyId",element:c.jsx(zg,{})})]})]})})})}Tu.createRoot(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(WS,{children:c.jsx(vL,{})})}));
