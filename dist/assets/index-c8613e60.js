var Vx=Object.defineProperty;var Gx=(e,t,n)=>t in e?Vx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>(Gx(e,typeof t!="symbol"?t+"":t,n),n);function qx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ug(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Kx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Wg={exports:{}},Ol={},Yg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),Qx=Symbol.for("react.portal"),Jx=Symbol.for("react.fragment"),Xx=Symbol.for("react.strict_mode"),Zx=Symbol.for("react.profiler"),eb=Symbol.for("react.provider"),tb=Symbol.for("react.context"),nb=Symbol.for("react.forward_ref"),rb=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),ib=Symbol.for("react.lazy"),Bh=Symbol.iterator;function ob(e){return e===null||typeof e!="object"?null:(e=Bh&&e[Bh]||e["@@iterator"],typeof e=="function"?e:null)}var Hg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zg=Object.assign,Vg={};function Hs(e,t,n){this.props=e,this.context=t,this.refs=Vg,this.updater=n||Hg}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gg(){}Gg.prototype=Hs.prototype;function Qd(e,t,n){this.props=e,this.context=t,this.refs=Vg,this.updater=n||Hg}var Jd=Qd.prototype=new Gg;Jd.constructor=Qd;zg(Jd,Hs.prototype);Jd.isPureReactComponent=!0;var Uh=Array.isArray,qg=Object.prototype.hasOwnProperty,Xd={current:null},Kg={key:!0,ref:!0,__self:!0,__source:!0};function Qg(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qg.call(t,r)&&!Kg.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:vo,type:e,key:i,ref:o,props:s,_owner:Xd.current}}function ab(e,t){return{$$typeof:vo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zd(e){return typeof e=="object"&&e!==null&&e.$$typeof===vo}function lb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wh=/\/+/g;function xc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lb(""+e.key):t.toString(36)}function pa(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vo:case Qx:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+xc(o,0):r,Uh(s)?(n="",e!=null&&(n=e.replace(Wh,"$&/")+"/"),pa(s,t,n,"",function(c){return c})):s!=null&&(Zd(s)&&(s=ab(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Uh(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+xc(i,a);o+=pa(i,t,n,l,s)}else if(l=ob(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+xc(i,a++),o+=pa(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Mo(e,t,n){if(e==null)return e;var r=[],s=0;return pa(e,r,"","",function(i){return t.call(n,i,s++)}),r}function cb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},ma={transition:null},ub={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:ma,ReactCurrentOwner:Xd};function Jg(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Mo,forEach:function(e,t,n){Mo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mo(e,function(){t++}),t},toArray:function(e){return Mo(e,function(t){return t})||[]},only:function(e){if(!Zd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Hs;Z.Fragment=Jx;Z.Profiler=Zx;Z.PureComponent=Qd;Z.StrictMode=Xx;Z.Suspense=rb;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;Z.act=Jg;Z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zg({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Xd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)qg.call(t,l)&&!Kg.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:vo,type:e.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(e){return e={$$typeof:tb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eb,_context:e},e.Consumer=e};Z.createElement=Qg;Z.createFactory=function(e){var t=Qg.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:nb,render:e}};Z.isValidElement=Zd;Z.lazy=function(e){return{$$typeof:ib,_payload:{_status:-1,_result:e},_init:cb}};Z.memo=function(e,t){return{$$typeof:sb,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=ma.transition;ma.transition={};try{e()}finally{ma.transition=t}};Z.unstable_act=Jg;Z.useCallback=function(e,t){return tt.current.useCallback(e,t)};Z.useContext=function(e){return tt.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};Z.useEffect=function(e,t){return tt.current.useEffect(e,t)};Z.useId=function(){return tt.current.useId()};Z.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};Z.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return tt.current.useMemo(e,t)};Z.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};Z.useRef=function(e){return tt.current.useRef(e)};Z.useState=function(e){return tt.current.useState(e)};Z.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};Z.useTransition=function(){return tt.current.useTransition()};Z.version="18.3.1";Yg.exports=Z;var b=Yg.exports;const T=Ug(b),Xg=qx({__proto__:null,default:T},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=b,fb=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),pb=Object.prototype.hasOwnProperty,mb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gb={key:!0,ref:!0,__self:!0,__source:!0};function Zg(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)pb.call(t,r)&&!gb.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:fb,type:e,key:i,ref:o,props:s,_owner:mb.current}}Ol.Fragment=hb;Ol.jsx=Zg;Ol.jsxs=Zg;Wg.exports=Ol;var h=Wg.exports,Nu={},ev={exports:{}},wt={},tv={exports:{}},nv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,O){var j=D.length;D.push(O);e:for(;0<j;){var W=j-1>>>1,K=D[W];if(0<s(K,O))D[W]=O,D[j]=K,j=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var O=D[0],j=D.pop();if(j!==O){D[0]=j;e:for(var W=0,K=D.length,Ce=K>>>1;W<Ce;){var Oe=2*(W+1)-1,Jt=D[Oe],rt=Oe+1,Ee=D[rt];if(0>s(Jt,j))rt<K&&0>s(Ee,Jt)?(D[W]=Ee,D[rt]=j,W=rt):(D[W]=Jt,D[Oe]=j,W=Oe);else if(rt<K&&0>s(Ee,j))D[W]=Ee,D[rt]=j,W=rt;else break e}}return O}function s(D,O){var j=D.sortIndex-O.sortIndex;return j!==0?j:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=D)r(c),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(c)}}function _(D){if(w=!1,v(D),!g)if(n(l)!==null)g=!0,L(S);else{var O=n(c);O!==null&&z(_,O.startTime-D)}}function S(D,O){g=!1,w&&(w=!1,y(E),E=-1),p=!0;var j=f;try{for(v(O),d=n(l);d!==null&&(!(d.expirationTime>O)||D&&!I());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var K=W(d.expirationTime<=O);O=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),v(O)}else r(l);d=n(l)}if(d!==null)var Ce=!0;else{var Oe=n(c);Oe!==null&&z(_,Oe.startTime-O),Ce=!1}return Ce}finally{d=null,f=j,p=!1}}var k=!1,C=null,E=-1,N=5,P=-1;function I(){return!(e.unstable_now()-P<N)}function $(){if(C!==null){var D=e.unstable_now();P=D;var O=!0;try{O=C(!0,D)}finally{O?M():(k=!1,C=null)}}else k=!1}var M;if(typeof m=="function")M=function(){m($)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=$,M=function(){H.postMessage(null)}}else M=function(){x($,0)};function L(D){C=D,k||(k=!0,M())}function z(D,O){E=x(function(){D(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var j=f;f=O;try{return D()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=f;f=D;try{return O()}finally{f=j}},e.unstable_scheduleCallback=function(D,O,j){var W=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?W+j:W):j=W,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=j+K,D={id:u++,callback:O,priorityLevel:D,startTime:j,expirationTime:K,sortIndex:-1},j>W?(D.sortIndex=j,t(c,D),n(l)===null&&D===n(c)&&(w?(y(E),E=-1):w=!0,z(_,j-W))):(D.sortIndex=K,t(l,D),g||p||(g=!0,L(S))),D},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(D){var O=f;return function(){var j=f;f=O;try{return D.apply(this,arguments)}finally{f=j}}}})(nv);tv.exports=nv;var vb=tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=b,yt=vb;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rv=new Set,Wi={};function Vr(e,t){Cs(e,t),Cs(e+"Capture",t)}function Cs(e,t){for(Wi[e]=t,e=0;e<t.length;e++)rv.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=Object.prototype.hasOwnProperty,wb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yh={},Hh={};function xb(e){return Pu.call(Hh,e)?!0:Pu.call(Yh,e)?!1:wb.test(e)?Hh[e]=!0:(Yh[e]=!0,!1)}function bb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _b(e,t,n,r){if(t===null||typeof t>"u"||bb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ef=/[\-:]([a-z])/g;function tf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ef,tf);We[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ef,tf);We[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ef,tf);We[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function nf(e,t,n,r){var s=We.hasOwnProperty(t)?We[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_b(t,n,s,r)&&(n=null),r||s===null?xb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ao=Symbol.for("react.element"),os=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),rf=Symbol.for("react.strict_mode"),Tu=Symbol.for("react.profiler"),sv=Symbol.for("react.provider"),iv=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),Ou=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),of=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),ov=Symbol.for("react.offscreen"),zh=Symbol.iterator;function si(e){return e===null||typeof e!="object"?null:(e=zh&&e[zh]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,bc;function _i(e){if(bc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bc=t&&t[1]||""}return`
`+bc+e}var _c=!1;function Sc(e,t){if(!e||_c)return"";_c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{_c=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_i(e):""}function Sb(e){switch(e.tag){case 5:return _i(e.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return e=Sc(e.type,!1),e;case 11:return e=Sc(e.type.render,!1),e;case 1:return e=Sc(e.type,!0),e;default:return""}}function ju(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case os:return"Portal";case Tu:return"Profiler";case rf:return"StrictMode";case Ou:return"Suspense";case Ru:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iv:return(e.displayName||"Context")+".Consumer";case sv:return(e._context.displayName||"Context")+".Provider";case sf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case of:return t=e.displayName||null,t!==null?t:ju(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return ju(e(t))}catch{}}return null}function kb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ju(t);case 8:return t===rf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function av(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Db(e){var t=av(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lo(e){e._valueTracker||(e._valueTracker=Db(e))}function lv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=av(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Aa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Iu(e,t){var n=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cv(e,t){t=t.checked,t!=null&&nf(e,"checked",t,!1)}function Mu(e,t){cv(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Au(e,t.type,n):t.hasOwnProperty("defaultValue")&&Au(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Au(e,t,n){(t!=="number"||Aa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Si=Array.isArray;function ys(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Lu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(Si(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function uv(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Kh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fo,fv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cb=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(e){Cb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pi[t]=Pi[e]})});function hv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pi.hasOwnProperty(e)&&Pi[e]?(""+t).trim():t+"px"}function pv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Eb=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(e,t){if(t){if(Eb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Bu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function af(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wu=null,ws=null,xs=null;function Qh(e){if(e=xo(e)){if(typeof Wu!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Al(t),Wu(e.stateNode,e.type,t))}}function mv(e){ws?xs?xs.push(e):xs=[e]:ws=e}function gv(){if(ws){var e=ws,t=xs;if(xs=ws=null,Qh(e),t)for(e=0;e<t.length;e++)Qh(t[e])}}function vv(e,t){return e(t)}function yv(){}var kc=!1;function wv(e,t,n){if(kc)return e(t,n);kc=!0;try{return vv(e,t,n)}finally{kc=!1,(ws!==null||xs!==null)&&(yv(),gv())}}function Hi(e,t){var n=e.stateNode;if(n===null)return null;var r=Al(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Yu=!1;if(Nn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Yu=!1}function Nb(e,t,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ti=!1,La=null,Fa=!1,Hu=null,Pb={onError:function(e){Ti=!0,La=e}};function Tb(e,t,n,r,s,i,o,a,l){Ti=!1,La=null,Nb.apply(Pb,arguments)}function Ob(e,t,n,r,s,i,o,a,l){if(Tb.apply(this,arguments),Ti){if(Ti){var c=La;Ti=!1,La=null}else throw Error(R(198));Fa||(Fa=!0,Hu=c)}}function Gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jh(e){if(Gr(e)!==e)throw Error(R(188))}function Rb(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jh(s),e;if(i===r)return Jh(s),t;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function bv(e){return e=Rb(e),e!==null?_v(e):null}function _v(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_v(e);if(t!==null)return t;e=e.sibling}return null}var Sv=yt.unstable_scheduleCallback,Xh=yt.unstable_cancelCallback,jb=yt.unstable_shouldYield,Ib=yt.unstable_requestPaint,Se=yt.unstable_now,Mb=yt.unstable_getCurrentPriorityLevel,lf=yt.unstable_ImmediatePriority,kv=yt.unstable_UserBlockingPriority,$a=yt.unstable_NormalPriority,Ab=yt.unstable_LowPriority,Dv=yt.unstable_IdlePriority,Rl=null,an=null;function Lb(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Rl,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Bb,Fb=Math.log,$b=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(Fb(e)/$b|0)|0}var $o=64,Bo=4194304;function ki(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ba(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ki(a):(i&=o,i!==0&&(r=ki(i)))}else o=n&~s,o!==0?r=ki(o):i!==0&&(r=ki(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yt(t),s=1<<n,r|=e[n],t&=~s;return r}function Ub(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Yt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Ub(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function zu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cv(){var e=$o;return $o<<=1,!($o&4194240)&&($o=64),e}function Dc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=n}function Yb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function cf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var le=0;function Ev(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nv,uf,Pv,Tv,Ov,Vu=!1,Uo=[],Kn=null,Qn=null,Jn=null,zi=new Map,Vi=new Map,Yn=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zh(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":zi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(t.pointerId)}}function oi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=xo(t),t!==null&&uf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function zb(e,t,n,r,s){switch(t){case"focusin":return Kn=oi(Kn,e,t,n,r,s),!0;case"dragenter":return Qn=oi(Qn,e,t,n,r,s),!0;case"mouseover":return Jn=oi(Jn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return zi.set(i,oi(zi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vi.set(i,oi(Vi.get(i)||null,e,t,n,r,s)),!0}return!1}function Rv(e){var t=Er(e.target);if(t!==null){var n=Gr(t);if(n!==null){if(t=n.tag,t===13){if(t=xv(n),t!==null){e.blockedOn=t,Ov(e.priority,function(){Pv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Uu=r,n.target.dispatchEvent(r),Uu=null}else return t=xo(n),t!==null&&uf(t),e.blockedOn=n,!1;t.shift()}return!0}function ep(e,t,n){ga(e)&&n.delete(t)}function Vb(){Vu=!1,Kn!==null&&ga(Kn)&&(Kn=null),Qn!==null&&ga(Qn)&&(Qn=null),Jn!==null&&ga(Jn)&&(Jn=null),zi.forEach(ep),Vi.forEach(ep)}function ai(e,t){e.blockedOn===t&&(e.blockedOn=null,Vu||(Vu=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Vb)))}function Gi(e){function t(s){return ai(s,e)}if(0<Uo.length){ai(Uo[0],e);for(var n=1;n<Uo.length;n++){var r=Uo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kn!==null&&ai(Kn,e),Qn!==null&&ai(Qn,e),Jn!==null&&ai(Jn,e),zi.forEach(t),Vi.forEach(t),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Rv(n),n.blockedOn===null&&Yn.shift()}var bs=In.ReactCurrentBatchConfig,Ua=!0;function Gb(e,t,n,r){var s=le,i=bs.transition;bs.transition=null;try{le=1,df(e,t,n,r)}finally{le=s,bs.transition=i}}function qb(e,t,n,r){var s=le,i=bs.transition;bs.transition=null;try{le=4,df(e,t,n,r)}finally{le=s,bs.transition=i}}function df(e,t,n,r){if(Ua){var s=Gu(e,t,n,r);if(s===null)Mc(e,t,r,Wa,n),Zh(e,r);else if(zb(s,e,t,n,r))r.stopPropagation();else if(Zh(e,r),t&4&&-1<Hb.indexOf(e)){for(;s!==null;){var i=xo(s);if(i!==null&&Nv(i),i=Gu(e,t,n,r),i===null&&Mc(e,t,r,Wa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mc(e,t,r,null,n)}}var Wa=null;function Gu(e,t,n,r){if(Wa=null,e=af(r),e=Er(e),e!==null)if(t=Gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wa=e,null}function jv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mb()){case lf:return 1;case kv:return 4;case $a:case Ab:return 16;case Dv:return 536870912;default:return 16}default:return 16}}var Vn=null,ff=null,va=null;function Iv(){if(va)return va;var e,t=ff,n=t.length,r,s="value"in Vn?Vn.value:Vn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return va=s.slice(e,1<r?1-r:void 0)}function ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wo(){return!0}function tp(){return!1}function xt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wo:tp,this.isPropagationStopped=tp,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),t}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=xt(zs),wo=xe({},zs,{view:0,detail:0}),Kb=xt(wo),Cc,Ec,li,jl=xe({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&e.type==="mousemove"?(Cc=e.screenX-li.screenX,Ec=e.screenY-li.screenY):Ec=Cc=0,li=e),Cc)},movementY:function(e){return"movementY"in e?e.movementY:Ec}}),np=xt(jl),Qb=xe({},jl,{dataTransfer:0}),Jb=xt(Qb),Xb=xe({},wo,{relatedTarget:0}),Nc=xt(Xb),Zb=xe({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),e_=xt(Zb),t_=xe({},zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n_=xt(t_),r_=xe({},zs,{data:0}),rp=xt(r_),s_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o_[e])?!!t[e]:!1}function pf(){return a_}var l_=xe({},wo,{key:function(e){if(e.key){var t=s_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pf,charCode:function(e){return e.type==="keypress"?ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c_=xt(l_),u_=xe({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sp=xt(u_),d_=xe({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pf}),f_=xt(d_),h_=xe({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=xt(h_),m_=xe({},jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=xt(m_),v_=[9,13,27,32],mf=Nn&&"CompositionEvent"in window,Oi=null;Nn&&"documentMode"in document&&(Oi=document.documentMode);var y_=Nn&&"TextEvent"in window&&!Oi,Mv=Nn&&(!mf||Oi&&8<Oi&&11>=Oi),ip=String.fromCharCode(32),op=!1;function Av(e,t){switch(e){case"keyup":return v_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function w_(e,t){switch(e){case"compositionend":return Lv(t);case"keypress":return t.which!==32?null:(op=!0,ip);case"textInput":return e=t.data,e===ip&&op?null:e;default:return null}}function x_(e,t){if(ls)return e==="compositionend"||!mf&&Av(e,t)?(e=Iv(),va=ff=Vn=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mv&&t.locale!=="ko"?null:t.data;default:return null}}var b_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b_[e.type]:t==="textarea"}function Fv(e,t,n,r){mv(r),t=Ya(t,"onChange"),0<t.length&&(n=new hf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ri=null,qi=null;function __(e){Kv(e,0)}function Il(e){var t=ds(e);if(lv(t))return e}function S_(e,t){if(e==="change")return t}var $v=!1;if(Nn){var Pc;if(Nn){var Tc="oninput"in document;if(!Tc){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),Tc=typeof lp.oninput=="function"}Pc=Tc}else Pc=!1;$v=Pc&&(!document.documentMode||9<document.documentMode)}function cp(){Ri&&(Ri.detachEvent("onpropertychange",Bv),qi=Ri=null)}function Bv(e){if(e.propertyName==="value"&&Il(qi)){var t=[];Fv(t,qi,e,af(e)),wv(__,t)}}function k_(e,t,n){e==="focusin"?(cp(),Ri=t,qi=n,Ri.attachEvent("onpropertychange",Bv)):e==="focusout"&&cp()}function D_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Il(qi)}function C_(e,t){if(e==="click")return Il(t)}function E_(e,t){if(e==="input"||e==="change")return Il(t)}function N_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:N_;function Ki(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pu.call(t,s)||!Vt(e[s],t[s]))return!1}return!0}function up(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dp(e,t){var n=up(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function Uv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wv(){for(var e=window,t=Aa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Aa(e.document)}return t}function gf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P_(e){var t=Wv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Uv(n.ownerDocument.documentElement,n)){if(r!==null&&gf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dp(n,i);var o=dp(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T_=Nn&&"documentMode"in document&&11>=document.documentMode,cs=null,qu=null,ji=null,Ku=!1;function fp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||cs==null||cs!==Aa(r)||(r=cs,"selectionStart"in r&&gf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ji&&Ki(ji,r)||(ji=r,r=Ya(qu,"onSelect"),0<r.length&&(t=new hf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cs)))}function Yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var us={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Oc={},Yv={};Nn&&(Yv=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function Ml(e){if(Oc[e])return Oc[e];if(!us[e])return e;var t=us[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yv)return Oc[e]=t[n];return e}var Hv=Ml("animationend"),zv=Ml("animationiteration"),Vv=Ml("animationstart"),Gv=Ml("transitionend"),qv=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){qv.set(e,t),Vr(t,[e])}for(var Rc=0;Rc<hp.length;Rc++){var jc=hp[Rc],O_=jc.toLowerCase(),R_=jc[0].toUpperCase()+jc.slice(1);fr(O_,"on"+R_)}fr(Hv,"onAnimationEnd");fr(zv,"onAnimationIteration");fr(Vv,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Gv,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function pp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ob(r,t,void 0,e),e.currentTarget=null}function Kv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;pp(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;pp(s,a,c),i=l}}}if(Fa)throw e=Hu,Fa=!1,Hu=null,e}function fe(e,t){var n=t[ed];n===void 0&&(n=t[ed]=new Set);var r=e+"__bubble";n.has(r)||(Qv(t,e,2,!1),n.add(r))}function Ic(e,t,n){var r=0;t&&(r|=4),Qv(n,e,r,t)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Qi(e){if(!e[Ho]){e[Ho]=!0,rv.forEach(function(n){n!=="selectionchange"&&(j_.has(n)||Ic(n,!1,e),Ic(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ho]||(t[Ho]=!0,Ic("selectionchange",!1,t))}}function Qv(e,t,n,r){switch(jv(t)){case 1:var s=Gb;break;case 4:s=qb;break;default:s=df}n=s.bind(null,t,n,e),s=void 0,!Yu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mc(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Er(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}wv(function(){var c=i,u=af(n),d=[];e:{var f=qv.get(e);if(f!==void 0){var p=hf,g=e;switch(e){case"keypress":if(ya(n)===0)break e;case"keydown":case"keyup":p=c_;break;case"focusin":g="focus",p=Nc;break;case"focusout":g="blur",p=Nc;break;case"beforeblur":case"afterblur":p=Nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f_;break;case Hv:case zv:case Vv:p=e_;break;case Gv:p=p_;break;case"scroll":p=Kb;break;case"wheel":p=g_;break;case"copy":case"cut":case"paste":p=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sp}var w=(t&4)!==0,x=!w&&e==="scroll",y=w?f!==null?f+"Capture":null:f;w=[];for(var m=c,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=Hi(m,y),_!=null&&w.push(Ji(m,_,v)))),x)break;m=m.return}0<w.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Uu&&(g=n.relatedTarget||n.fromElement)&&(Er(g)||g[Pn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Er(g):null,g!==null&&(x=Gr(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(w=np,_="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=sp,_="onPointerLeave",y="onPointerEnter",m="pointer"),x=p==null?f:ds(p),v=g==null?f:ds(g),f=new w(_,m+"leave",p,n,u),f.target=x,f.relatedTarget=v,_=null,Er(u)===c&&(w=new w(y,m+"enter",g,n,u),w.target=v,w.relatedTarget=x,_=w),x=_,p&&g)t:{for(w=p,y=g,m=0,v=w;v;v=Qr(v))m++;for(v=0,_=y;_;_=Qr(_))v++;for(;0<m-v;)w=Qr(w),m--;for(;0<v-m;)y=Qr(y),v--;for(;m--;){if(w===y||y!==null&&w===y.alternate)break t;w=Qr(w),y=Qr(y)}w=null}else w=null;p!==null&&mp(d,f,p,w,!1),g!==null&&x!==null&&mp(d,x,g,w,!0)}}e:{if(f=c?ds(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=S_;else if(ap(f))if($v)S=E_;else{S=D_;var k=k_}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=C_);if(S&&(S=S(e,c))){Fv(d,S,n,u);break e}k&&k(e,f,c),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Au(f,"number",f.value)}switch(k=c?ds(c):window,e){case"focusin":(ap(k)||k.contentEditable==="true")&&(cs=k,qu=c,ji=null);break;case"focusout":ji=qu=cs=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,fp(d,n,u);break;case"selectionchange":if(T_)break;case"keydown":case"keyup":fp(d,n,u)}var C;if(mf)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ls?Av(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Mv&&n.locale!=="ko"&&(ls||E!=="onCompositionStart"?E==="onCompositionEnd"&&ls&&(C=Iv()):(Vn=u,ff="value"in Vn?Vn.value:Vn.textContent,ls=!0)),k=Ya(c,E),0<k.length&&(E=new rp(E,e,null,n,u),d.push({event:E,listeners:k}),C?E.data=C:(C=Lv(n),C!==null&&(E.data=C)))),(C=y_?w_(e,n):x_(e,n))&&(c=Ya(c,"onBeforeInput"),0<c.length&&(u=new rp("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}Kv(d,t)})}function Ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ya(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hi(e,n),i!=null&&r.unshift(Ji(e,i,s)),i=Hi(e,t),i!=null&&r.push(Ji(e,i,s))),e=e.return}return r}function Qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mp(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Hi(n,i),l!=null&&o.unshift(Ji(n,l,a))):s||(l=Hi(n,i),l!=null&&o.push(Ji(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var I_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function gp(e){return(typeof e=="string"?e:""+e).replace(I_,`
`).replace(M_,"")}function zo(e,t,n){if(t=gp(t),gp(e)!==t&&n)throw Error(R(425))}function Ha(){}var Qu=null,Ju=null;function Xu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,A_=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,L_=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(e){return vp.resolve(null).then(e).catch(F_)}:Zu;function F_(e){setTimeout(function(){throw e})}function Ac(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Gi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gi(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),nn="__reactFiber$"+Vs,Xi="__reactProps$"+Vs,Pn="__reactContainer$"+Vs,ed="__reactEvents$"+Vs,$_="__reactListeners$"+Vs,B_="__reactHandles$"+Vs;function Er(e){var t=e[nn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[nn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yp(e);e!==null;){if(n=e[nn])return n;e=yp(e)}return t}e=n,n=e.parentNode}return null}function xo(e){return e=e[nn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ds(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Al(e){return e[Xi]||null}var td=[],fs=-1;function hr(e){return{current:e}}function he(e){0>fs||(e.current=td[fs],td[fs]=null,fs--)}function de(e,t){fs++,td[fs]=e.current,e.current=t}var lr={},qe=hr(lr),lt=hr(!1),Lr=lr;function Es(e,t){var n=e.type.contextTypes;if(!n)return lr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ct(e){return e=e.childContextTypes,e!=null}function za(){he(lt),he(qe)}function wp(e,t,n){if(qe.current!==lr)throw Error(R(168));de(qe,t),de(lt,n)}function Jv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,kb(e)||"Unknown",s));return xe({},n,r)}function Va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,Lr=qe.current,de(qe,e),de(lt,lt.current),!0}function xp(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=Jv(e,t,Lr),r.__reactInternalMemoizedMergedChildContext=e,he(lt),he(qe),de(qe,e)):he(lt),de(lt,n)}var vn=null,Ll=!1,Lc=!1;function Xv(e){vn===null?vn=[e]:vn.push(e)}function U_(e){Ll=!0,Xv(e)}function pr(){if(!Lc&&vn!==null){Lc=!0;var e=0,t=le;try{var n=vn;for(le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vn=null,Ll=!1}catch(s){throw vn!==null&&(vn=vn.slice(e+1)),Sv(lf,pr),s}finally{le=t,Lc=!1}}return null}var hs=[],ps=0,Ga=null,qa=0,Dt=[],Ct=0,Fr=null,wn=1,xn="";function br(e,t){hs[ps++]=qa,hs[ps++]=Ga,Ga=e,qa=t}function Zv(e,t,n){Dt[Ct++]=wn,Dt[Ct++]=xn,Dt[Ct++]=Fr,Fr=e;var r=wn;e=xn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,wn=1<<32-Yt(t)+s|n<<s|r,xn=i+e}else wn=1<<i|n<<s|r,xn=e}function vf(e){e.return!==null&&(br(e,1),Zv(e,1,0))}function yf(e){for(;e===Ga;)Ga=hs[--ps],hs[ps]=null,qa=hs[--ps],hs[ps]=null;for(;e===Fr;)Fr=Dt[--Ct],Dt[Ct]=null,xn=Dt[--Ct],Dt[Ct]=null,wn=Dt[--Ct],Dt[Ct]=null}var pt=null,ft=null,pe=!1,Ut=null;function e0(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,ft=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fr!==null?{id:wn,overflow:xn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pt=e,ft=null,!0):!1;default:return!1}}function nd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rd(e){if(pe){var t=ft;if(t){var n=t;if(!bp(e,t)){if(nd(e))throw Error(R(418));t=Xn(n.nextSibling);var r=pt;t&&bp(e,t)?e0(r,n):(e.flags=e.flags&-4097|2,pe=!1,pt=e)}}else{if(nd(e))throw Error(R(418));e.flags=e.flags&-4097|2,pe=!1,pt=e}}}function _p(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function Vo(e){if(e!==pt)return!1;if(!pe)return _p(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xu(e.type,e.memoizedProps)),t&&(t=ft)){if(nd(e))throw t0(),Error(R(418));for(;t;)e0(e,t),t=Xn(t.nextSibling)}if(_p(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ft=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=pt?Xn(e.stateNode.nextSibling):null;return!0}function t0(){for(var e=ft;e;)e=Xn(e.nextSibling)}function Ns(){ft=pt=null,pe=!1}function wf(e){Ut===null?Ut=[e]:Ut.push(e)}var W_=In.ReactCurrentBatchConfig;function ci(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sp(e){var t=e._init;return t(e._payload)}function n0(e){function t(y,m){if(e){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=nr(y,m),y.index=0,y.sibling=null,y}function i(y,m,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,_){return m===null||m.tag!==6?(m=Hc(v,y.mode,_),m.return=y,m):(m=s(m,v),m.return=y,m)}function l(y,m,v,_){var S=v.type;return S===as?u(y,m,v.props.children,_,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Un&&Sp(S)===m.type)?(_=s(m,v.props),_.ref=ci(y,m,v),_.return=y,_):(_=Da(v.type,v.key,v.props,null,y.mode,_),_.ref=ci(y,m,v),_.return=y,_)}function c(y,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=zc(v,y.mode,_),m.return=y,m):(m=s(m,v.children||[]),m.return=y,m)}function u(y,m,v,_,S){return m===null||m.tag!==7?(m=jr(v,y.mode,_,S),m.return=y,m):(m=s(m,v),m.return=y,m)}function d(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Hc(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ao:return v=Da(m.type,m.key,m.props,null,y.mode,v),v.ref=ci(y,null,m),v.return=y,v;case os:return m=zc(m,y.mode,v),m.return=y,m;case Un:var _=m._init;return d(y,_(m._payload),v)}if(Si(m)||si(m))return m=jr(m,y.mode,v,null),m.return=y,m;Go(y,m)}return null}function f(y,m,v,_){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(y,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ao:return v.key===S?l(y,m,v,_):null;case os:return v.key===S?c(y,m,v,_):null;case Un:return S=v._init,f(y,m,S(v._payload),_)}if(Si(v)||si(v))return S!==null?null:u(y,m,v,_,null);Go(y,v)}return null}function p(y,m,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(m,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ao:return y=y.get(_.key===null?v:_.key)||null,l(m,y,_,S);case os:return y=y.get(_.key===null?v:_.key)||null,c(m,y,_,S);case Un:var k=_._init;return p(y,m,v,k(_._payload),S)}if(Si(_)||si(_))return y=y.get(v)||null,u(m,y,_,S,null);Go(m,_)}return null}function g(y,m,v,_){for(var S=null,k=null,C=m,E=m=0,N=null;C!==null&&E<v.length;E++){C.index>E?(N=C,C=null):N=C.sibling;var P=f(y,C,v[E],_);if(P===null){C===null&&(C=N);break}e&&C&&P.alternate===null&&t(y,C),m=i(P,m,E),k===null?S=P:k.sibling=P,k=P,C=N}if(E===v.length)return n(y,C),pe&&br(y,E),S;if(C===null){for(;E<v.length;E++)C=d(y,v[E],_),C!==null&&(m=i(C,m,E),k===null?S=C:k.sibling=C,k=C);return pe&&br(y,E),S}for(C=r(y,C);E<v.length;E++)N=p(C,y,E,v[E],_),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?E:N.key),m=i(N,m,E),k===null?S=N:k.sibling=N,k=N);return e&&C.forEach(function(I){return t(y,I)}),pe&&br(y,E),S}function w(y,m,v,_){var S=si(v);if(typeof S!="function")throw Error(R(150));if(v=S.call(v),v==null)throw Error(R(151));for(var k=S=null,C=m,E=m=0,N=null,P=v.next();C!==null&&!P.done;E++,P=v.next()){C.index>E?(N=C,C=null):N=C.sibling;var I=f(y,C,P.value,_);if(I===null){C===null&&(C=N);break}e&&C&&I.alternate===null&&t(y,C),m=i(I,m,E),k===null?S=I:k.sibling=I,k=I,C=N}if(P.done)return n(y,C),pe&&br(y,E),S;if(C===null){for(;!P.done;E++,P=v.next())P=d(y,P.value,_),P!==null&&(m=i(P,m,E),k===null?S=P:k.sibling=P,k=P);return pe&&br(y,E),S}for(C=r(y,C);!P.done;E++,P=v.next())P=p(C,y,E,P.value,_),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?E:P.key),m=i(P,m,E),k===null?S=P:k.sibling=P,k=P);return e&&C.forEach(function($){return t(y,$)}),pe&&br(y,E),S}function x(y,m,v,_){if(typeof v=="object"&&v!==null&&v.type===as&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ao:e:{for(var S=v.key,k=m;k!==null;){if(k.key===S){if(S=v.type,S===as){if(k.tag===7){n(y,k.sibling),m=s(k,v.props.children),m.return=y,y=m;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Un&&Sp(S)===k.type){n(y,k.sibling),m=s(k,v.props),m.ref=ci(y,k,v),m.return=y,y=m;break e}n(y,k);break}else t(y,k);k=k.sibling}v.type===as?(m=jr(v.props.children,y.mode,_,v.key),m.return=y,y=m):(_=Da(v.type,v.key,v.props,null,y.mode,_),_.ref=ci(y,m,v),_.return=y,y=_)}return o(y);case os:e:{for(k=v.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(y,m.sibling),m=s(m,v.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=zc(v,y.mode,_),m.return=y,y=m}return o(y);case Un:return k=v._init,x(y,m,k(v._payload),_)}if(Si(v))return g(y,m,v,_);if(si(v))return w(y,m,v,_);Go(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,v),m.return=y,y=m):(n(y,m),m=Hc(v,y.mode,_),m.return=y,y=m),o(y)):n(y,m)}return x}var Ps=n0(!0),r0=n0(!1),Ka=hr(null),Qa=null,ms=null,xf=null;function bf(){xf=ms=Qa=null}function _f(e){var t=Ka.current;he(Ka),e._currentValue=t}function sd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _s(e,t){Qa=e,xf=ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(at=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(xf!==e)if(e={context:e,memoizedValue:t,next:null},ms===null){if(Qa===null)throw Error(R(308));ms=e,Qa.dependencies={lanes:0,firstContext:e}}else ms=ms.next=e;return t}var Nr=null;function Sf(e){Nr===null?Nr=[e]:Nr.push(e)}function s0(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Sf(t)):(n.next=s.next,s.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function kf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Tn(e,n)}return s=r.interleaved,s===null?(t.next=t,Sf(r)):(t.next=s.next,s.next=t),r.interleaved=t,Tn(e,n)}function wa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cf(e,n)}}function kp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ja(e,t,n,r){var s=e.updateQueue;Wn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,w=a;switch(f=t,p=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=xe({},d,f);break e;case 2:Wn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Br|=o,e.lanes=o,e.memoizedState=d}}function Dp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var bo={},ln=hr(bo),Zi=hr(bo),eo=hr(bo);function Pr(e){if(e===bo)throw Error(R(174));return e}function Df(e,t){switch(de(eo,t),de(Zi,e),de(ln,bo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fu(t,e)}he(ln),de(ln,t)}function Ts(){he(ln),he(Zi),he(eo)}function o0(e){Pr(eo.current);var t=Pr(ln.current),n=Fu(t,e.type);t!==n&&(de(Zi,e),de(ln,n))}function Cf(e){Zi.current===e&&(he(ln),he(Zi))}var ve=hr(0);function Xa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fc=[];function Ef(){for(var e=0;e<Fc.length;e++)Fc[e]._workInProgressVersionPrimary=null;Fc.length=0}var xa=In.ReactCurrentDispatcher,$c=In.ReactCurrentBatchConfig,$r=0,we=null,Pe=null,je=null,Za=!1,Ii=!1,to=0,Y_=0;function Ye(){throw Error(R(321))}function Nf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Pf(e,t,n,r,s,i){if($r=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xa.current=e===null||e.memoizedState===null?G_:q_,e=n(r,s),Ii){i=0;do{if(Ii=!1,to=0,25<=i)throw Error(R(301));i+=1,je=Pe=null,t.updateQueue=null,xa.current=K_,e=n(r,s)}while(Ii)}if(xa.current=el,t=Pe!==null&&Pe.next!==null,$r=0,je=Pe=we=null,Za=!1,t)throw Error(R(300));return e}function Tf(){var e=to!==0;return to=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?we.memoizedState=je=e:je=je.next=e,je}function It(){if(Pe===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=je===null?we.memoizedState:je.next;if(t!==null)je=t,Pe=e;else{if(e===null)throw Error(R(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},je===null?we.memoizedState=je=e:je=je.next=e}return je}function no(e,t){return typeof t=="function"?t(e):t}function Bc(e){var t=It(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Pe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if(($r&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,we.lanes|=u,Br|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Vt(r,t.memoizedState)||(at=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,we.lanes|=i,Br|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Uc(e){var t=It(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Vt(i,t.memoizedState)||(at=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function a0(){}function l0(e,t){var n=we,r=It(),s=t(),i=!Vt(r.memoizedState,s);if(i&&(r.memoizedState=s,at=!0),r=r.queue,Of(d0.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,ro(9,u0.bind(null,n,r,s,t),void 0,null),Ie===null)throw Error(R(349));$r&30||c0(n,t,s)}return s}function c0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function u0(e,t,n,r){t.value=n,t.getSnapshot=r,f0(t)&&h0(e)}function d0(e,t,n){return n(function(){f0(t)&&h0(e)})}function f0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function h0(e){var t=Tn(e,1);t!==null&&Ht(t,e,1,-1)}function Cp(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:e},t.queue=e,e=e.dispatch=V_.bind(null,we,e),[t.memoizedState,e]}function ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function p0(){return It().memoizedState}function ba(e,t,n,r){var s=Zt();we.flags|=e,s.memoizedState=ro(1|t,n,void 0,r===void 0?null:r)}function Fl(e,t,n,r){var s=It();r=r===void 0?null:r;var i=void 0;if(Pe!==null){var o=Pe.memoizedState;if(i=o.destroy,r!==null&&Nf(r,o.deps)){s.memoizedState=ro(t,n,i,r);return}}we.flags|=e,s.memoizedState=ro(1|t,n,i,r)}function Ep(e,t){return ba(8390656,8,e,t)}function Of(e,t){return Fl(2048,8,e,t)}function m0(e,t){return Fl(4,2,e,t)}function g0(e,t){return Fl(4,4,e,t)}function v0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function y0(e,t,n){return n=n!=null?n.concat([e]):null,Fl(4,4,v0.bind(null,t,e),n)}function Rf(){}function w0(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function x0(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function b0(e,t,n){return $r&21?(Vt(n,t)||(n=Cv(),we.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=n)}function H_(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var r=$c.transition;$c.transition={};try{e(!1),t()}finally{le=n,$c.transition=r}}function _0(){return It().memoizedState}function z_(e,t,n){var r=tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},S0(e))k0(t,n);else if(n=s0(e,t,n,r),n!==null){var s=et();Ht(n,e,r,s),D0(n,t,r)}}function V_(e,t,n){var r=tr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(S0(e))k0(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vt(a,o)){var l=t.interleaved;l===null?(s.next=s,Sf(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=s0(e,t,s,r),n!==null&&(s=et(),Ht(n,e,r,s),D0(n,t,r))}}function S0(e){var t=e.alternate;return e===we||t!==null&&t===we}function k0(e,t){Ii=Za=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function D0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cf(e,n)}}var el={readContext:jt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},G_={readContext:jt,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:Ep,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ba(4194308,4,v0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=z_.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Cp,useDebugValue:Rf,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Cp(!1),t=e[0];return e=H_.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,s=Zt();if(pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Ie===null)throw Error(R(349));$r&30||c0(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ep(d0.bind(null,r,i,e),[e]),r.flags|=2048,ro(9,u0.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zt(),t=Ie.identifierPrefix;if(pe){var n=xn,r=wn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=to++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Y_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},q_={readContext:jt,useCallback:w0,useContext:jt,useEffect:Of,useImperativeHandle:y0,useInsertionEffect:m0,useLayoutEffect:g0,useMemo:x0,useReducer:Bc,useRef:p0,useState:function(){return Bc(no)},useDebugValue:Rf,useDeferredValue:function(e){var t=It();return b0(t,Pe.memoizedState,e)},useTransition:function(){var e=Bc(no)[0],t=It().memoizedState;return[e,t]},useMutableSource:a0,useSyncExternalStore:l0,useId:_0,unstable_isNewReconciler:!1},K_={readContext:jt,useCallback:w0,useContext:jt,useEffect:Of,useImperativeHandle:y0,useInsertionEffect:m0,useLayoutEffect:g0,useMemo:x0,useReducer:Uc,useRef:p0,useState:function(){return Uc(no)},useDebugValue:Rf,useDeferredValue:function(e){var t=It();return Pe===null?t.memoizedState=e:b0(t,Pe.memoizedState,e)},useTransition:function(){var e=Uc(no)[0],t=It().memoizedState;return[e,t]},useMutableSource:a0,useSyncExternalStore:l0,useId:_0,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function id(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $l={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=et(),s=tr(e),i=bn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Zn(e,i,s),t!==null&&(Ht(t,e,s,r),wa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=et(),s=tr(e),i=bn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zn(e,i,s),t!==null&&(Ht(t,e,s,r),wa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),r=tr(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Zn(e,s,r),t!==null&&(Ht(t,e,r,n),wa(t,e,r))}};function Np(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ki(n,r)||!Ki(s,i):!0}function C0(e,t,n){var r=!1,s=lr,i=t.contextType;return typeof i=="object"&&i!==null?i=jt(i):(s=ct(t)?Lr:qe.current,r=t.contextTypes,i=(r=r!=null)?Es(e,s):lr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$l,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Pp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$l.enqueueReplaceState(t,t.state,null)}function od(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},kf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=jt(i):(i=ct(t)?Lr:qe.current,s.context=Es(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(id(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&$l.enqueueReplaceState(s,s.state,null),Ja(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Os(e,t){try{var n="",r=t;do n+=Sb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Wc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ad(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Q_=typeof WeakMap=="function"?WeakMap:Map;function E0(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nl||(nl=!0,vd=r),ad(e,t)},n}function N0(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ad(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ad(e,t),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Tp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Q_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=uS.bind(null,e,t,n),t.then(e,e))}function Op(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,Zn(n,t,1))),n.lanes|=1),e)}var J_=In.ReactCurrentOwner,at=!1;function Je(e,t,n,r){t.child=e===null?r0(t,null,n,r):Ps(t,e.child,n,r)}function jp(e,t,n,r,s){n=n.render;var i=t.ref;return _s(t,s),r=Pf(e,t,n,r,i,s),n=Tf(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(pe&&n&&vf(t),t.flags|=1,Je(e,t,r,s),t.child)}function Ip(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Bf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,P0(e,t,i,r,s)):(e=Da(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ki,n(o,r)&&e.ref===t.ref)return On(e,t,s)}return t.flags|=1,e=nr(i,r),e.ref=t.ref,e.return=t,t.child=e}function P0(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ki(i,r)&&e.ref===t.ref)if(at=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(at=!0);else return t.lanes=e.lanes,On(e,t,s)}return ld(e,t,n,r,s)}function T0(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(vs,dt),dt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(vs,dt),dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(vs,dt),dt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,de(vs,dt),dt|=r;return Je(e,t,s,n),t.child}function O0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ld(e,t,n,r,s){var i=ct(n)?Lr:qe.current;return i=Es(t,i),_s(t,s),n=Pf(e,t,n,r,i,s),r=Tf(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(pe&&r&&vf(t),t.flags|=1,Je(e,t,n,s),t.child)}function Mp(e,t,n,r,s){if(ct(n)){var i=!0;Va(t)}else i=!1;if(_s(t,s),t.stateNode===null)_a(e,t),C0(t,n,r),od(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jt(c):(c=ct(n)?Lr:qe.current,c=Es(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Pp(t,o,r,c),Wn=!1;var f=t.memoizedState;o.state=f,Ja(t,r,o,s),l=t.memoizedState,a!==r||f!==l||lt.current||Wn?(typeof u=="function"&&(id(t,n,u,r),l=t.memoizedState),(a=Wn||Np(t,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,i0(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ft(t.type,a),o.props=c,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=ct(n)?Lr:qe.current,l=Es(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Pp(t,o,r,l),Wn=!1,f=t.memoizedState,o.state=f,Ja(t,r,o,s);var g=t.memoizedState;a!==d||f!==g||lt.current||Wn?(typeof p=="function"&&(id(t,n,p,r),g=t.memoizedState),(c=Wn||Np(t,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return cd(e,t,n,r,i,s)}function cd(e,t,n,r,s,i){O0(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&xp(t,n,!1),On(e,t,i);r=t.stateNode,J_.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ps(t,e.child,null,i),t.child=Ps(t,null,a,i)):Je(e,t,a,i),t.memoizedState=r.state,s&&xp(t,n,!0),t.child}function R0(e){var t=e.stateNode;t.pendingContext?wp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wp(e,t.context,!1),Df(e,t.containerInfo)}function Ap(e,t,n,r,s){return Ns(),wf(s),t.flags|=256,Je(e,t,n,r),t.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function dd(e){return{baseLanes:e,cachePool:null,transitions:null}}function j0(e,t,n){var r=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ve,s&1),e===null)return rd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wl(o,r,0,null),e=jr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dd(n),t.memoizedState=ud,e):jf(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return X_(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=nr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=nr(a,i):(i=jr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ud,r}return i=e.child,e=i.sibling,r=nr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jf(e,t){return t=Wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qo(e,t,n,r){return r!==null&&wf(r),Ps(t,e.child,null,n),e=jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function X_(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Wc(Error(R(422))),qo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Wl({mode:"visible",children:r.children},s,0,null),i=jr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ps(t,e.child,null,o),t.child.memoizedState=dd(o),t.memoizedState=ud,i);if(!(t.mode&1))return qo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(R(419)),r=Wc(i,r,void 0),qo(e,t,o,r)}if(a=(o&e.childLanes)!==0,at||a){if(r=Ie,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(e,s),Ht(r,e,s,-1))}return $f(),r=Wc(Error(R(421))),qo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=dS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ft=Xn(s.nextSibling),pt=t,pe=!0,Ut=null,e!==null&&(Dt[Ct++]=wn,Dt[Ct++]=xn,Dt[Ct++]=Fr,wn=e.id,xn=e.overflow,Fr=t),t=jf(t,r.children),t.flags|=4096,t)}function Lp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sd(e.return,t,n)}function Yc(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function I0(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Je(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lp(e,n,t);else if(e.tag===19)Lp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(ve,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xa(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yc(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xa(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yc(t,!0,n,null,i);break;case"together":Yc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _a(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z_(e,t,n){switch(t.tag){case 3:R0(t),Ns();break;case 5:o0(t);break;case 1:ct(t.type)&&Va(t);break;case 4:Df(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;de(Ka,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?j0(e,t,n):(de(ve,ve.current&1),e=On(e,t,n),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return I0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,T0(e,t,n)}return On(e,t,n)}var M0,fd,A0,L0;M0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fd=function(){};A0=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Pr(ln.current);var i=null;switch(n){case"input":s=Iu(e,s),r=Iu(e,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Lu(e,s),r=Lu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ha)}$u(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&fe("scroll",e),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};L0=function(e,t,n,r){n!==r&&(t.flags|=4)};function ui(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function eS(e,t,n){var r=t.pendingProps;switch(yf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return ct(t.type)&&za(),He(t),null;case 3:return r=t.stateNode,Ts(),he(lt),he(qe),Ef(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(xd(Ut),Ut=null))),fd(e,t),He(t),null;case 5:Cf(t);var s=Pr(eo.current);if(n=t.type,e!==null&&t.stateNode!=null)A0(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return He(t),null}if(e=Pr(ln.current),Vo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[nn]=t,r[Xi]=i,e=(t.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<Di.length;s++)fe(Di[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Vh(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":qh(r,i),fe("invalid",r)}$u(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,e),s=["children",""+a]):Wi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":Lo(r),Gh(r,i,!0);break;case"textarea":Lo(r),Kh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ha)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[nn]=t,e[Xi]=r,M0(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bu(n,r),n){case"dialog":fe("cancel",e),fe("close",e),s=r;break;case"iframe":case"object":case"embed":fe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Di.length;s++)fe(Di[s],e);s=r;break;case"source":fe("error",e),s=r;break;case"img":case"image":case"link":fe("error",e),fe("load",e),s=r;break;case"details":fe("toggle",e),s=r;break;case"input":Vh(e,r),s=Iu(e,r),fe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),fe("invalid",e);break;case"textarea":qh(e,r),s=Lu(e,r),fe("invalid",e);break;default:s=r}$u(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?pv(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fv(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yi(e,l):typeof l=="number"&&Yi(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&fe("scroll",e):l!=null&&nf(e,i,l,o))}switch(n){case"input":Lo(e),Gh(e,r,!1);break;case"textarea":Lo(e),Kh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ys(e,!!r.multiple,i,!1):r.defaultValue!=null&&ys(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)L0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=Pr(eo.current),Pr(ln.current),Vo(t)){if(r=t.stateNode,n=t.memoizedProps,r[nn]=t,(i=r.nodeValue!==n)&&(e=pt,e!==null))switch(e.tag){case 3:zo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=t,t.stateNode=r}return He(t),null;case 13:if(he(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&ft!==null&&t.mode&1&&!(t.flags&128))t0(),Ns(),t.flags|=98560,i=!1;else if(i=Vo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[nn]=t}else Ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),i=!1}else Ut!==null&&(xd(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Te===0&&(Te=3):$f())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return Ts(),fd(e,t),e===null&&Qi(t.stateNode.containerInfo),He(t),null;case 10:return _f(t.type._context),He(t),null;case 17:return ct(t.type)&&za(),He(t),null;case 19:if(he(ve),i=t.memoizedState,i===null)return He(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ui(i,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xa(e),o!==null){for(t.flags|=128,ui(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>Rs&&(t.flags|=128,r=!0,ui(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xa(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return He(t),null}else 2*Se()-i.renderingStartTime>Rs&&n!==1073741824&&(t.flags|=128,r=!0,ui(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=ve.current,de(ve,r?n&1|2:n&1),t):(He(t),null);case 22:case 23:return Ff(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?dt&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function tS(e,t){switch(yf(t),t.tag){case 1:return ct(t.type)&&za(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ts(),he(lt),he(qe),Ef(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cf(t),null;case 13:if(he(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ve),null;case 4:return Ts(),null;case 10:return _f(t.type._context),null;case 22:case 23:return Ff(),null;case 24:return null;default:return null}}var Ko=!1,Ve=!1,nS=typeof WeakSet=="function"?WeakSet:Set,Y=null;function gs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function hd(e,t,n){try{n()}catch(r){be(e,t,r)}}var Fp=!1;function rS(e,t){if(Qu=Ua,e=Wv(),gf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ju={focusedElem:e,selectionRange:n},Ua=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,x=g.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ft(t.type,w),x);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){be(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return g=Fp,Fp=!1,g}function Mi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hd(t,n,i)}s=s.next}while(s!==r)}}function Bl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function F0(e){var t=e.alternate;t!==null&&(e.alternate=null,F0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nn],delete t[Xi],delete t[ed],delete t[$_],delete t[B_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $0(e){return e.tag===5||e.tag===3||e.tag===4}function $p(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function md(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ha));else if(r!==4&&(e=e.child,e!==null))for(md(e,t,n),e=e.sibling;e!==null;)md(e,t,n),e=e.sibling}function gd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}var Fe=null,$t=!1;function Ln(e,t,n){for(n=n.child;n!==null;)B0(e,t,n),n=n.sibling}function B0(e,t,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:Ve||gs(n,t);case 6:var r=Fe,s=$t;Fe=null,Ln(e,t,n),Fe=r,$t=s,Fe!==null&&($t?(e=Fe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&($t?(e=Fe,n=n.stateNode,e.nodeType===8?Ac(e.parentNode,n):e.nodeType===1&&Ac(e,n),Gi(e)):Ac(Fe,n.stateNode));break;case 4:r=Fe,s=$t,Fe=n.stateNode.containerInfo,$t=!0,Ln(e,t,n),Fe=r,$t=s;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hd(n,t,o),s=s.next}while(s!==r)}Ln(e,t,n);break;case 1:if(!Ve&&(gs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){be(n,t,a)}Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,Ln(e,t,n),Ve=r):Ln(e,t,n);break;default:Ln(e,t,n)}}function Bp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nS),t.forEach(function(r){var s=fS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function At(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fe=a.stateNode,$t=!1;break e;case 3:Fe=a.stateNode.containerInfo,$t=!0;break e;case 4:Fe=a.stateNode.containerInfo,$t=!0;break e}a=a.return}if(Fe===null)throw Error(R(160));B0(i,o,s),Fe=null,$t=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){be(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)U0(t,e),t=t.sibling}function U0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Xt(e),r&4){try{Mi(3,e,e.return),Bl(3,e)}catch(w){be(e,e.return,w)}try{Mi(5,e,e.return)}catch(w){be(e,e.return,w)}}break;case 1:At(t,e),Xt(e),r&512&&n!==null&&gs(n,n.return);break;case 5:if(At(t,e),Xt(e),r&512&&n!==null&&gs(n,n.return),e.flags&32){var s=e.stateNode;try{Yi(s,"")}catch(w){be(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&cv(s,i),Bu(a,o);var c=Bu(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?pv(s,d):u==="dangerouslySetInnerHTML"?fv(s,d):u==="children"?Yi(s,d):nf(s,u,d,c)}switch(a){case"input":Mu(s,i);break;case"textarea":uv(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ys(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ys(s,!!i.multiple,i.defaultValue,!0):ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xi]=i}catch(w){be(e,e.return,w)}}break;case 6:if(At(t,e),Xt(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){be(e,e.return,w)}}break;case 3:if(At(t,e),Xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gi(t.containerInfo)}catch(w){be(e,e.return,w)}break;case 4:At(t,e),Xt(e);break;case 13:At(t,e),Xt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Af=Se())),r&4&&Bp(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ve=(c=Ve)||u,At(t,e),Ve=c):At(t,e),Xt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Y=e,u=e.child;u!==null;){for(d=Y=u;Y!==null;){switch(f=Y,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mi(4,f,f.return);break;case 1:gs(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){be(r,n,w)}}break;case 5:gs(f,f.return);break;case 22:if(f.memoizedState!==null){Wp(d);continue}}p!==null?(p.return=f,Y=p):Wp(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hv("display",o))}catch(w){be(e,e.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){be(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:At(t,e),Xt(e),r&4&&Bp(e);break;case 21:break;default:At(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($0(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yi(s,""),r.flags&=-33);var i=$p(e);gd(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$p(e);md(e,a,o);break;default:throw Error(R(161))}}catch(l){be(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sS(e,t,n){Y=e,W0(e)}function W0(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ko;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ve;a=Ko;var c=Ve;if(Ko=o,(Ve=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?Yp(s):l!==null?(l.return=o,Y=l):Yp(s);for(;i!==null;)Y=i,W0(i),i=i.sibling;Y=s,Ko=a,Ve=c}Up(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Up(e)}}function Up(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||Bl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dp(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Dp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Gi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ve||t.flags&512&&pd(t)}catch(f){be(t,t.return,f)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Wp(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Yp(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bl(4,t)}catch(l){be(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){be(t,s,l)}}var i=t.return;try{pd(t)}catch(l){be(t,i,l)}break;case 5:var o=t.return;try{pd(t)}catch(l){be(t,o,l)}}}catch(l){be(t,t.return,l)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var iS=Math.ceil,tl=In.ReactCurrentDispatcher,If=In.ReactCurrentOwner,Tt=In.ReactCurrentBatchConfig,re=0,Ie=null,Ne=null,Ue=0,dt=0,vs=hr(0),Te=0,so=null,Br=0,Ul=0,Mf=0,Ai=null,it=null,Af=0,Rs=1/0,pn=null,nl=!1,vd=null,er=null,Qo=!1,Gn=null,rl=0,Li=0,yd=null,Sa=-1,ka=0;function et(){return re&6?Se():Sa!==-1?Sa:Sa=Se()}function tr(e){return e.mode&1?re&2&&Ue!==0?Ue&-Ue:W_.transition!==null?(ka===0&&(ka=Cv()),ka):(e=le,e!==0||(e=window.event,e=e===void 0?16:jv(e.type)),e):1}function Ht(e,t,n,r){if(50<Li)throw Li=0,yd=null,Error(R(185));yo(e,n,r),(!(re&2)||e!==Ie)&&(e===Ie&&(!(re&2)&&(Ul|=n),Te===4&&Hn(e,Ue)),ut(e,r),n===1&&re===0&&!(t.mode&1)&&(Rs=Se()+500,Ll&&pr()))}function ut(e,t){var n=e.callbackNode;Wb(e,t);var r=Ba(e,e===Ie?Ue:0);if(r===0)n!==null&&Xh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xh(n),t===1)e.tag===0?U_(Hp.bind(null,e)):Xv(Hp.bind(null,e)),L_(function(){!(re&6)&&pr()}),n=null;else{switch(Ev(r)){case 1:n=lf;break;case 4:n=kv;break;case 16:n=$a;break;case 536870912:n=Dv;break;default:n=$a}n=Q0(n,Y0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Y0(e,t){if(Sa=-1,ka=0,re&6)throw Error(R(327));var n=e.callbackNode;if(Ss()&&e.callbackNode!==n)return null;var r=Ba(e,e===Ie?Ue:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=sl(e,r);else{t=r;var s=re;re|=2;var i=z0();(Ie!==e||Ue!==t)&&(pn=null,Rs=Se()+500,Rr(e,t));do try{lS();break}catch(a){H0(e,a)}while(1);bf(),tl.current=i,re=s,Ne!==null?t=0:(Ie=null,Ue=0,t=Te)}if(t!==0){if(t===2&&(s=zu(e),s!==0&&(r=s,t=wd(e,s))),t===1)throw n=so,Rr(e,0),Hn(e,r),ut(e,Se()),n;if(t===6)Hn(e,r);else{if(s=e.current.alternate,!(r&30)&&!oS(s)&&(t=sl(e,r),t===2&&(i=zu(e),i!==0&&(r=i,t=wd(e,i))),t===1))throw n=so,Rr(e,0),Hn(e,r),ut(e,Se()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:_r(e,it,pn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Af+500-Se(),10<t)){if(Ba(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zu(_r.bind(null,e,it,pn),t);break}_r(e,it,pn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iS(r/1960))-r,10<r){e.timeoutHandle=Zu(_r.bind(null,e,it,pn),r);break}_r(e,it,pn);break;case 5:_r(e,it,pn);break;default:throw Error(R(329))}}}return ut(e,Se()),e.callbackNode===n?Y0.bind(null,e):null}function wd(e,t){var n=Ai;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=sl(e,t),e!==2&&(t=it,it=n,t!==null&&xd(t)),e}function xd(e){it===null?it=e:it.push.apply(it,e)}function oS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Vt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Mf,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yt(t),r=1<<n;e[n]=-1,t&=~r}}function Hp(e){if(re&6)throw Error(R(327));Ss();var t=Ba(e,0);if(!(t&1))return ut(e,Se()),null;var n=sl(e,t);if(e.tag!==0&&n===2){var r=zu(e);r!==0&&(t=r,n=wd(e,r))}if(n===1)throw n=so,Rr(e,0),Hn(e,t),ut(e,Se()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_r(e,it,pn),ut(e,Se()),null}function Lf(e,t){var n=re;re|=1;try{return e(t)}finally{re=n,re===0&&(Rs=Se()+500,Ll&&pr())}}function Ur(e){Gn!==null&&Gn.tag===0&&!(re&6)&&Ss();var t=re;re|=1;var n=Tt.transition,r=le;try{if(Tt.transition=null,le=1,e)return e()}finally{le=r,Tt.transition=n,re=t,!(re&6)&&pr()}}function Ff(){dt=vs.current,he(vs)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,A_(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:Ts(),he(lt),he(qe),Ef();break;case 5:Cf(r);break;case 4:Ts();break;case 13:he(ve);break;case 19:he(ve);break;case 10:_f(r.type._context);break;case 22:case 23:Ff()}n=n.return}if(Ie=e,Ne=e=nr(e.current,null),Ue=dt=t,Te=0,so=null,Mf=Ul=Br=0,it=Ai=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Nr=null}return e}function H0(e,t){do{var n=Ne;try{if(bf(),xa.current=el,Za){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Za=!1}if($r=0,je=Pe=we=null,Ii=!1,to=0,If.current=null,n===null||n.return===null){Te=1,so=t,Ne=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=Ue,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Op(o);if(p!==null){p.flags&=-257,Rp(p,o,a,i,t),p.mode&1&&Tp(i,c,t),t=p,l=c;var g=t.updateQueue;if(g===null){var w=new Set;w.add(l),t.updateQueue=w}else g.add(l);break e}else{if(!(t&1)){Tp(i,c,t),$f();break e}l=Error(R(426))}}else if(pe&&a.mode&1){var x=Op(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Rp(x,o,a,i,t),wf(Os(l,a));break e}}i=l=Os(l,a),Te!==4&&(Te=2),Ai===null?Ai=[i]:Ai.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=E0(i,l,t);kp(i,y);break e;case 1:a=l;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(er===null||!er.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=N0(i,a,t);kp(i,_);break e}}i=i.return}while(i!==null)}G0(n)}catch(S){t=S,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(1)}function z0(){var e=tl.current;return tl.current=el,e===null?el:e}function $f(){(Te===0||Te===3||Te===2)&&(Te=4),Ie===null||!(Br&268435455)&&!(Ul&268435455)||Hn(Ie,Ue)}function sl(e,t){var n=re;re|=2;var r=z0();(Ie!==e||Ue!==t)&&(pn=null,Rr(e,t));do try{aS();break}catch(s){H0(e,s)}while(1);if(bf(),re=n,tl.current=r,Ne!==null)throw Error(R(261));return Ie=null,Ue=0,Te}function aS(){for(;Ne!==null;)V0(Ne)}function lS(){for(;Ne!==null&&!jb();)V0(Ne)}function V0(e){var t=K0(e.alternate,e,dt);e.memoizedProps=e.pendingProps,t===null?G0(e):Ne=t,If.current=null}function G0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tS(n,t),n!==null){n.flags&=32767,Ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Ne=null;return}}else if(n=eS(n,t,dt),n!==null){Ne=n;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Te===0&&(Te=5)}function _r(e,t,n){var r=le,s=Tt.transition;try{Tt.transition=null,le=1,cS(e,t,n,r)}finally{Tt.transition=s,le=r}return null}function cS(e,t,n,r){do Ss();while(Gn!==null);if(re&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Yb(e,i),e===Ie&&(Ne=Ie=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,Q0($a,function(){return Ss(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var o=le;le=1;var a=re;re|=4,If.current=null,rS(e,n),U0(n,e),P_(Ju),Ua=!!Qu,Ju=Qu=null,e.current=n,sS(n),Ib(),re=a,le=o,Tt.transition=i}else e.current=n;if(Qo&&(Qo=!1,Gn=e,rl=s),i=e.pendingLanes,i===0&&(er=null),Lb(n.stateNode),ut(e,Se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nl)throw nl=!1,e=vd,vd=null,e;return rl&1&&e.tag!==0&&Ss(),i=e.pendingLanes,i&1?e===yd?Li++:(Li=0,yd=e):Li=0,pr(),null}function Ss(){if(Gn!==null){var e=Ev(rl),t=Tt.transition,n=le;try{if(Tt.transition=null,le=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,rl=0,re&6)throw Error(R(331));var s=re;for(re|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:Mi(8,u,i)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var f=u.sibling,p=u.return;if(F0(u),u===c){Y=null;break}if(f!==null){f.return=p,Y=f;break}Y=p}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var m=e.current;for(Y=m;Y!==null;){o=Y;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Y=v;else e:for(o=m;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bl(9,a)}}catch(S){be(a,a.return,S)}if(a===o){Y=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Y=_;break e}Y=a.return}}if(re=s,pr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Rl,e)}catch{}r=!0}return r}finally{le=n,Tt.transition=t}}return!1}function zp(e,t,n){t=Os(n,t),t=E0(e,t,1),e=Zn(e,t,1),t=et(),e!==null&&(yo(e,1,t),ut(e,t))}function be(e,t,n){if(e.tag===3)zp(e,e,n);else for(;t!==null;){if(t.tag===3){zp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){e=Os(n,e),e=N0(t,e,1),t=Zn(t,e,1),e=et(),t!==null&&(yo(t,1,e),ut(t,e));break}}t=t.return}}function uS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,Ie===e&&(Ue&n)===n&&(Te===4||Te===3&&(Ue&130023424)===Ue&&500>Se()-Af?Rr(e,0):Mf|=n),ut(e,t)}function q0(e,t){t===0&&(e.mode&1?(t=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):t=1);var n=et();e=Tn(e,t),e!==null&&(yo(e,t,n),ut(e,n))}function dS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),q0(e,n)}function fS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),q0(e,n)}var K0;K0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)at=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return at=!1,Z_(e,t,n);at=!!(e.flags&131072)}else at=!1,pe&&t.flags&1048576&&Zv(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_a(e,t),e=t.pendingProps;var s=Es(t,qe.current);_s(t,n),s=Pf(null,t,r,e,s,n);var i=Tf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(i=!0,Va(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kf(t),s.updater=$l,t.stateNode=s,s._reactInternals=t,od(t,r,e,n),t=cd(null,t,r,!0,i,n)):(t.tag=0,pe&&i&&vf(t),Je(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_a(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=pS(r),e=Ft(r,e),s){case 0:t=ld(null,t,r,e,n);break e;case 1:t=Mp(null,t,r,e,n);break e;case 11:t=jp(null,t,r,e,n);break e;case 14:t=Ip(null,t,r,Ft(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),ld(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),Mp(e,t,r,s,n);case 3:e:{if(R0(t),e===null)throw Error(R(387));r=t.pendingProps,i=t.memoizedState,s=i.element,i0(e,t),Ja(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Os(Error(R(423)),t),t=Ap(e,t,r,n,s);break e}else if(r!==s){s=Os(Error(R(424)),t),t=Ap(e,t,r,n,s);break e}else for(ft=Xn(t.stateNode.containerInfo.firstChild),pt=t,pe=!0,Ut=null,n=r0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ns(),r===s){t=On(e,t,n);break e}Je(e,t,r,n)}t=t.child}return t;case 5:return o0(t),e===null&&rd(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Xu(r,s)?o=null:i!==null&&Xu(r,i)&&(t.flags|=32),O0(e,t),Je(e,t,o,n),t.child;case 6:return e===null&&rd(t),null;case 13:return j0(e,t,n);case 4:return Df(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ps(t,null,r,n):Je(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),jp(e,t,r,s,n);case 7:return Je(e,t,t.pendingProps,n),t.child;case 8:return Je(e,t,t.pendingProps.children,n),t.child;case 12:return Je(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,de(Ka,r._currentValue),r._currentValue=o,i!==null)if(Vt(i.value,o)){if(i.children===s.children&&!lt.current){t=On(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),sd(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sd(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Je(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_s(t,n),s=jt(s),r=r(s),t.flags|=1,Je(e,t,r,n),t.child;case 14:return r=t.type,s=Ft(r,t.pendingProps),s=Ft(r.type,s),Ip(e,t,r,s,n);case 15:return P0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),_a(e,t),t.tag=1,ct(r)?(e=!0,Va(t)):e=!1,_s(t,n),C0(t,r,s),od(t,r,s,n),cd(null,t,r,!0,e,n);case 19:return I0(e,t,n);case 22:return T0(e,t,n)}throw Error(R(156,t.tag))};function Q0(e,t){return Sv(e,t)}function hS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,r){return new hS(e,t,n,r)}function Bf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pS(e){if(typeof e=="function")return Bf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sf)return 11;if(e===of)return 14}return 2}function nr(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Da(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Bf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case as:return jr(n.children,s,i,t);case rf:o=8,s|=8;break;case Tu:return e=Nt(12,n,t,s|2),e.elementType=Tu,e.lanes=i,e;case Ou:return e=Nt(13,n,t,s),e.elementType=Ou,e.lanes=i,e;case Ru:return e=Nt(19,n,t,s),e.elementType=Ru,e.lanes=i,e;case ov:return Wl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sv:o=10;break e;case iv:o=9;break e;case sf:o=11;break e;case of:o=14;break e;case Un:o=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Nt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function jr(e,t,n,r){return e=Nt(7,e,r,t),e.lanes=n,e}function Wl(e,t,n,r){return e=Nt(22,e,r,t),e.elementType=ov,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function zc(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(e,t,n,r,s,i,o,a,l){return e=new mS(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Nt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kf(i),e}function gS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function J0(e){if(!e)return lr;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(ct(n))return Jv(e,n,t)}return t}function X0(e,t,n,r,s,i,o,a,l){return e=Uf(n,r,!0,e,s,i,o,a,l),e.context=J0(null),n=e.current,r=et(),s=tr(n),i=bn(r,s),i.callback=t??null,Zn(n,i,s),e.current.lanes=s,yo(e,s,r),ut(e,r),e}function Yl(e,t,n,r){var s=t.current,i=et(),o=tr(s);return n=J0(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zn(s,t,o),e!==null&&(Ht(e,s,o,i),wa(e,s,o)),o}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wf(e,t){Vp(e,t),(e=e.alternate)&&Vp(e,t)}function vS(){return null}var Z0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yf(e){this._internalRoot=e}Hl.prototype.render=Yf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Yl(e,t,null,null)};Hl.prototype.unmount=Yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){Yl(null,e,null,null)}),t[Pn]=null}};function Hl(e){this._internalRoot=e}Hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yn.length&&t!==0&&t<Yn[n].priority;n++);Yn.splice(n,0,e),n===0&&Rv(e)}};function Hf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function yS(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=il(o);i.call(c)}}var o=X0(t,r,e,0,null,!1,!1,"",Gp);return e._reactRootContainer=o,e[Pn]=o.current,Qi(e.nodeType===8?e.parentNode:e),Ur(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=il(l);a.call(c)}}var l=Uf(e,0,!1,null,null,!1,!1,"",Gp);return e._reactRootContainer=l,e[Pn]=l.current,Qi(e.nodeType===8?e.parentNode:e),Ur(function(){Yl(t,l,n,r)}),l}function Vl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=il(o);a.call(l)}}Yl(t,o,e,s)}else o=yS(n,t,e,s,r);return il(o)}Nv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ki(t.pendingLanes);n!==0&&(cf(t,n|1),ut(t,Se()),!(re&6)&&(Rs=Se()+500,pr()))}break;case 13:Ur(function(){var r=Tn(e,1);if(r!==null){var s=et();Ht(r,e,1,s)}}),Wf(e,1)}};uf=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=et();Ht(t,e,134217728,n)}Wf(e,134217728)}};Pv=function(e){if(e.tag===13){var t=tr(e),n=Tn(e,t);if(n!==null){var r=et();Ht(n,e,t,r)}Wf(e,t)}};Tv=function(){return le};Ov=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};Wu=function(e,t,n){switch(t){case"input":if(Mu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Al(r);if(!s)throw Error(R(90));lv(r),Mu(r,s)}}}break;case"textarea":uv(e,n);break;case"select":t=n.value,t!=null&&ys(e,!!n.multiple,t,!1)}};vv=Lf;yv=Ur;var wS={usingClientEntryPoint:!1,Events:[xo,ds,Al,mv,gv,Lf]},di={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xS={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bv(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||vS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Rl=Jo.inject(xS),an=Jo}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hf(t))throw Error(R(200));return gS(e,t,null,n)};wt.createRoot=function(e,t){if(!Hf(e))throw Error(R(299));var n=!1,r="",s=Z0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Uf(e,1,!1,null,null,n,!1,r,s),e[Pn]=t.current,Qi(e.nodeType===8?e.parentNode:e),new Yf(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=bv(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return Ur(e)};wt.hydrate=function(e,t,n){if(!zl(t))throw Error(R(200));return Vl(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!Hf(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Z0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=X0(t,null,e,1,n??null,s,!1,i,o),e[Pn]=t.current,Qi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Hl(t)};wt.render=function(e,t,n){if(!zl(t))throw Error(R(200));return Vl(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!zl(e))throw Error(R(40));return e._reactRootContainer?(Ur(function(){Vl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};wt.unstable_batchedUpdates=Lf;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zl(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Vl(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function ey(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ey)}catch(e){console.error(e)}}ey(),ev.exports=wt;var _o=ev.exports;const ty=Ug(_o);var qp=_o;Nu.createRoot=qp.createRoot,Nu.hydrateRoot=qp.hydrateRoot;const bS="modulepreload",_S=function(e){return"/"+e},Kp={},Gs=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=_S(i),i in Kp)return;Kp[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":bS,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Qp="popstate";function SS(e={}){function t(r,s){let{pathname:i,search:o,hash:a}=r.location;return bd("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:io(s)}return DS(t,n,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kS(){return Math.random().toString(36).substring(2,10)}function Jp(e,t){return{usr:e.state,key:e.key,idx:t}}function bd(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qs(t):t,state:n,key:t&&t.key||r||kS()}}function io({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function DS(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let x=u(),y=x==null?null:x-c;c=x,l&&l({action:a,location:w.location,delta:y})}function f(x,y){a="PUSH";let m=bd(w.location,x,y);n&&n(m,x),c=u()+1;let v=Jp(m,c),_=w.createHref(m);try{o.pushState(v,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:w.location,delta:1})}function p(x,y){a="REPLACE";let m=bd(w.location,x,y);n&&n(m,x),c=u();let v=Jp(m,c),_=w.createHref(m);o.replaceState(v,"",_),i&&l&&l({action:a,location:w.location,delta:0})}function g(x){return CS(x)}let w={get action(){return a},get location(){return e(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Qp,d),l=x,()=>{s.removeEventListener(Qp,d),l=null}},createHref(x){return t(s,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(x){return o.go(x)}};return w}function CS(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ge(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:io(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function ny(e,t,n="/"){return ES(e,t,n,!1)}function ES(e,t,n,r){let s=typeof t=="string"?qs(t):t,i=Rn(s.pathname||"/",n);if(i==null)return null;let o=ry(e);NS(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=$S(i);a=LS(o[l],c,r)}return a}function ry(e,t=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=_n([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ge(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),ry(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:MS(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of sy(i.path))s(i,o,l)}),t}function sy(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=sy(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function NS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:AS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PS=/^:[\w-]+$/,TS=3,OS=2,RS=1,jS=10,IS=-2,Xp=e=>e==="*";function MS(e,t){let n=e.split("/"),r=n.length;return n.some(Xp)&&(r+=IS),t&&(r+=OS),n.filter(s=>!Xp(s)).reduce((s,i)=>s+(PS.test(i)?TS:i===""?RS:jS),r)}function AS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function LS(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",d=ol({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ol({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:_n([i,d.pathname]),pathnameBase:YS(_n([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=_n([i,d.pathnameBase]))}return o}function ol(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FS(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let g=a[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function FS(e,t=!1,n=!0){Gt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function $S(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function BS(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?qs(e):e;return{pathname:n?n.startsWith("/")?n:US(n,t):t,search:HS(r),hash:zS(s)}}function US(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vc(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zf(e){let t=WS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Vf(e,t,n,r=!1){let s;typeof e=="string"?s=qs(e):(s={...e},ge(!s.pathname||!s.pathname.includes("?"),Vc("?","pathname","search",s)),ge(!s.pathname||!s.pathname.includes("#"),Vc("#","pathname","hash",s)),ge(!s.search||!s.search.includes("#"),Vc("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=BS(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var _n=e=>e.join("/").replace(/\/\/+/g,"/"),YS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var iy=["POST","PUT","PATCH","DELETE"];new Set(iy);var GS=["GET",...iy];new Set(GS);var Ks=b.createContext(null);Ks.displayName="DataRouter";var Gl=b.createContext(null);Gl.displayName="DataRouterState";b.createContext(!1);var oy=b.createContext({isTransitioning:!1});oy.displayName="ViewTransition";var qS=b.createContext(new Map);qS.displayName="Fetchers";var KS=b.createContext(null);KS.displayName="Await";var Kt=b.createContext(null);Kt.displayName="Navigation";var So=b.createContext(null);So.displayName="Location";var Qt=b.createContext({outlet:null,matches:[],isDataRoute:!1});Qt.displayName="Route";var Gf=b.createContext(null);Gf.displayName="RouteError";function QS(e,{relative:t}={}){ge(Qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(Kt),{hash:s,pathname:i,search:o}=ko(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:_n([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Qs(){return b.useContext(So)!=null}function Mn(){return ge(Qs(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(So).location}var ay="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ly(e){b.useContext(Kt).static||b.useLayoutEffect(e)}function cy(){let{isDataRoute:e}=b.useContext(Qt);return e?uk():JS()}function JS(){ge(Qs(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Ks),{basename:t,navigator:n}=b.useContext(Kt),{matches:r}=b.useContext(Qt),{pathname:s}=Mn(),i=JSON.stringify(zf(r)),o=b.useRef(!1);return ly(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(Gt(o.current,ay),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=Vf(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:_n([t,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[t,n,i,s,e])}b.createContext(null);function XS(){let{matches:e}=b.useContext(Qt),t=e[e.length-1];return t?t.params:{}}function ko(e,{relative:t}={}){let{matches:n}=b.useContext(Qt),{pathname:r}=Mn(),s=JSON.stringify(zf(n));return b.useMemo(()=>Vf(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function ZS(e,t){return uy(e,t)}function uy(e,t,n,r){var y;ge(Qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=b.useContext(Kt),{matches:i}=b.useContext(Qt),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let m=u&&u.path||"";dy(l,!u||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let d=Mn(),f;if(t){let m=typeof t=="string"?qs(t):t;ge(c==="/"||((y=m.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${m.pathname}" was given in the \`location\` prop.`),f=m}else f=d;let p=f.pathname||"/",g=p;if(c!=="/"){let m=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=ny(e,{pathname:g});Gt(u||w!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Gt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=sk(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:_n([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:_n([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return t&&x?b.createElement(So.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function ek(){let e=ck(),t=VS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:s},n):null,o)}var tk=b.createElement(ek,null),nk=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(Qt.Provider,{value:this.props.routeContext},b.createElement(Gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rk({routeContext:e,match:t,children:n}){let r=b.useContext(Ks);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Qt.Provider,{value:e},n)}function sk(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);ge(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let d,f=!1,p=null,g=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||tk,o&&(a<0&&u===0?(dy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):a===u&&(f=!0,g=c.route.hydrateFallbackElement||null)));let w=t.concat(s.slice(0,u+1)),x=()=>{let y;return d?y=p:f?y=g:c.route.Component?y=b.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,b.createElement(rk,{match:c,routeContext:{outlet:l,matches:w,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?b.createElement(nk,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}function qf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ik(e){let t=b.useContext(Ks);return ge(t,qf(e)),t}function ok(e){let t=b.useContext(Gl);return ge(t,qf(e)),t}function ak(e){let t=b.useContext(Qt);return ge(t,qf(e)),t}function Kf(e){let t=ak(e),n=t.matches[t.matches.length-1];return ge(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function lk(){return Kf("useRouteId")}function ck(){var r;let e=b.useContext(Gf),t=ok("useRouteError"),n=Kf("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function uk(){let{router:e}=ik("useNavigate"),t=Kf("useNavigate"),n=b.useRef(!1);return ly(()=>{n.current=!0}),b.useCallback(async(s,i={})=>{Gt(n.current,ay),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Zp={};function dy(e,t,n){!t&&!Zp[e]&&(Zp[e]=!0,Gt(!1,n))}b.memo(dk);function dk({routes:e,future:t,state:n}){return uy(e,void 0,n,t)}function fk({to:e,replace:t,state:n,relative:r}){ge(Qs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=b.useContext(Kt);Gt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(Qt),{pathname:o}=Mn(),a=cy(),l=Vf(e,zf(i),o,r==="path"),c=JSON.stringify(l);return b.useEffect(()=>{a(JSON.parse(c),{replace:t,state:n,relative:r})},[a,c,r,t,n]),null}function Ca(e){ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hk({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ge(!Qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=qs(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,p=b.useMemo(()=>{let g=Rn(l,o);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:f},navigationType:r}},[o,l,c,u,d,f,r]);return Gt(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:b.createElement(Kt.Provider,{value:a},b.createElement(So.Provider,{children:t,value:p}))}function pk({children:e,location:t}){return ZS(_d(e),t)}function _d(e,t=[]){let n=[];return b.Children.forEach(e,(r,s)=>{if(!b.isValidElement(r))return;let i=[...t,s];if(r.type===b.Fragment){n.push.apply(n,_d(r.props.children,i));return}ge(r.type===Ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ge(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_d(r.props.children,i)),n.push(o)}),n}var Ea="get",Na="application/x-www-form-urlencoded";function ql(e){return e!=null&&typeof e.tagName=="string"}function mk(e){return ql(e)&&e.tagName.toLowerCase()==="button"}function gk(e){return ql(e)&&e.tagName.toLowerCase()==="form"}function vk(e){return ql(e)&&e.tagName.toLowerCase()==="input"}function yk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wk(e,t){return e.button===0&&(!t||t==="_self")&&!yk(e)}var Xo=null;function xk(){if(Xo===null)try{new FormData(document.createElement("form"),0),Xo=!1}catch{Xo=!0}return Xo}var bk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gc(e){return e!=null&&!bk.has(e)?(Gt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Na}"`),null):e}function _k(e,t){let n,r,s,i,o;if(gk(e)){let a=e.getAttribute("action");r=a?Rn(a,t):null,n=e.getAttribute("method")||Ea,s=Gc(e.getAttribute("enctype"))||Na,i=new FormData(e)}else if(mk(e)||vk(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Rn(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ea,s=Gc(e.getAttribute("formenctype"))||Gc(a.getAttribute("enctype"))||Na,i=new FormData(a,e),!xk()){let{name:c,type:u,value:d}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,d)}}else{if(ql(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ea,r=null,s=Na,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sk(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Rn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function kk(e,t){if(e.id in t)return t[e.id];try{let n=await Gs(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dk(e){return e!=null&&typeof e.page=="string"}function Ck(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ek(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await kk(i,n);return o.links?o.links():[]}return[]}));return Ok(r.flat(1).filter(Ck).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function em(e,t,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Nk(e,t,{includeHydrateFallback:n}={}){return Pk(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Pk(e){return[...new Set(e)]}function Tk(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Ok(e,t){let n=new Set,r=new Set(t);return e.reduce((s,i)=>{if(t&&!Dk(i)&&i.as==="script"&&i.href&&r.has(i.href))return s;let a=JSON.stringify(Tk(i));return n.has(a)||(n.add(a),s.push({key:a,link:i})),s},[])}function fy(){let e=b.useContext(Ks);return Qf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Rk(){let e=b.useContext(Gl);return Qf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Jf=b.createContext(void 0);Jf.displayName="FrameworkContext";function hy(){let e=b.useContext(Jf);return Qf(e,"You must render this element inside a <HydratedRouter> element"),e}function jk(e,t){let n=b.useContext(Jf),[r,s]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,f=b.useRef(null);b.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=y=>{y.forEach(m=>{o(m.isIntersecting)})},x=new IntersectionObserver(w,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),b.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let p=()=>{s(!0)},g=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,f,{}]:[i,f,{onFocus:fi(a,p),onBlur:fi(l,g),onMouseEnter:fi(c,p),onMouseLeave:fi(u,g),onTouchStart:fi(d,p)}]:[!1,f,{}]}function fi(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ik({page:e,...t}){let{router:n}=fy(),r=b.useMemo(()=>ny(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(Ak,{page:e,matches:r,...t}):null}function Mk(e){let{manifest:t,routeModules:n}=hy(),[r,s]=b.useState([]);return b.useEffect(()=>{let i=!1;return Ek(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function Ak({page:e,matches:t,...n}){let r=Mn(),{manifest:s,routeModules:i}=hy(),{basename:o}=fy(),{loaderData:a,matches:l}=Rk(),c=b.useMemo(()=>em(e,t,l,s,r,"data"),[e,t,l,s,r]),u=b.useMemo(()=>em(e,t,l,s,r,"assets"),[e,t,l,s,r]),d=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let g=new Set,w=!1;if(t.forEach(y=>{var v;let m=s.routes[y.route.id];!m||!m.hasLoader||(!c.some(_=>_.route.id===y.route.id)&&y.route.id in a&&((v=i[y.route.id])!=null&&v.shouldRevalidate)||m.hasClientLoader?w=!0:g.add(y.route.id))}),g.size===0)return[];let x=Sk(e,o,"data");return w&&g.size>0&&x.searchParams.set("_routes",t.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,c,t,e,i]),f=b.useMemo(()=>Nk(u,s),[u,s]),p=Mk(u);return b.createElement(b.Fragment,null,d.map(g=>b.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>b.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:w})=>b.createElement("link",{key:g,...w})))}function Lk(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var py=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{py&&(window.__reactRouterVersion="7.7.1")}catch{}function Fk({basename:e,children:t,window:n}){let r=b.useRef();r.current==null&&(r.current=SS({window:n,v5Compat:!0}));let s=r.current,[i,o]=b.useState({action:s.action,location:s.location}),a=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>s.listen(a),[s,a]),b.createElement(hk,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kl=b.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},p){let{basename:g}=b.useContext(Kt),w=typeof c=="string"&&my.test(c),x,y=!1;if(typeof c=="string"&&w&&(x=c,py))try{let N=new URL(window.location.href),P=c.startsWith("//")?new URL(N.protocol+c):new URL(c),I=Rn(P.pathname,g);P.origin===N.origin&&I!=null?c=I+P.search+P.hash:y=!0}catch{Gt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=QS(c,{relative:s}),[v,_,S]=jk(r,f),k=Wk(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function C(N){t&&t(N),N.defaultPrevented||k(N)}let E=b.createElement("a",{...f,...S,href:x||m,onClick:y||i?t:C,ref:Lk(p,_),target:l,"data-discover":!w&&n==="render"?"true":void 0});return v&&!w?b.createElement(b.Fragment,null,E,b.createElement(Ik,{page:m})):E});Kl.displayName="Link";var $k=b.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let d=ko(o,{relative:c.relative}),f=Mn(),p=b.useContext(Gl),{navigator:g,basename:w}=b.useContext(Kt),x=p!=null&&Gk(d)&&a===!0,y=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,m=f.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(m=m.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&w&&(v=Rn(v,w)||v);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=m===y||!s&&m.startsWith(y)&&m.charAt(_)==="/",k=v!=null&&(v===y||!s&&v.startsWith(y)&&v.charAt(y.length)==="/"),C={isActive:S,isPending:k,isTransitioning:x},E=S?t:void 0,N;typeof r=="function"?N=r(C):N=[r,S?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(C):i;return b.createElement(Kl,{...c,"aria-current":E,className:N,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(C):l)});$k.displayName="NavLink";var Bk=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Ea,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},p)=>{let g=zk(),w=Vk(a,{relative:c}),x=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&my.test(a),m=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let _=v.nativeEvent.submitter,S=(_==null?void 0:_.getAttribute("formmethod"))||o;g(_||v.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:d})};return b.createElement("form",{ref:p,method:x,action:w,onSubmit:r?l:m,...f,"data-discover":!y&&e==="render"?"true":void 0})});Bk.displayName="Form";function Uk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gy(e){let t=b.useContext(Ks);return ge(t,Uk(e)),t}function Wk(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=cy(),l=Mn(),c=ko(e,{relative:i});return b.useCallback(u=>{if(wk(u,t)){u.preventDefault();let d=n!==void 0?n:io(l)===io(c);a(e,{replace:d,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,n,r,t,e,s,i,o])}var Yk=0,Hk=()=>`__${String(++Yk)}__`;function zk(){let{router:e}=gy("useSubmit"),{basename:t}=b.useContext(Kt),n=lk();return b.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=_k(r,t);if(s.navigate===!1){let u=s.fetcherKey||Hk();await e.fetch(u,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function Vk(e,{relative:t}={}){let{basename:n}=b.useContext(Kt),r=b.useContext(Qt);ge(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ko(e||".",{relative:t})},o=Mn();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:_n([n,i.pathname])),io(i)}function Gk(e,{relative:t}={}){let n=b.useContext(oy);ge(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gy("useViewTransitionState"),s=ko(e,{relative:t});if(!n.isTransitioning)return!1;let i=Rn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Rn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ol(s.pathname,o)!=null||ol(s.pathname,i)!=null}const qk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Gs(()=>Promise.resolve().then(()=>Js),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Xf extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Kk extends Xf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class tm extends Xf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class nm extends Xf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sd||(Sd={}));var Qk=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class Jk{constructor(t,{headers:n={},customFetch:r,region:s=Sd.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=qk(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Qk(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(w=>{throw new Kk(w)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new tm(d);if(!d.ok)throw new nm(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield d.json():p==="application/octet-stream"?g=yield d.blob():p==="text/event-stream"?g=d:p==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof nm||s instanceof tm?s.context:void 0}}})}}var ot={},Zf={},Ql={},Do={},Jl={},Xl={},Xk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},js=Xk();const Zk=js.fetch,vy=js.fetch.bind(js),yy=js.Headers,eD=js.Request,tD=js.Response,Js=Object.freeze(Object.defineProperty({__proto__:null,Headers:yy,Request:eD,Response:tD,default:vy,fetch:Zk},Symbol.toStringTag,{value:"Module"})),nD=Kx(Js);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});let rD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Zl.default=rD;var wy=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xl,"__esModule",{value:!0});const sD=wy(nD),iD=wy(Zl);let oD=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=sD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,d=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const w=await i.text();try{c=JSON.parse(w),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&w===""?(f=204,p="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new iD.default(c)}return{error:c,data:u,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Xl.default=oD;var aD=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jl,"__esModule",{value:!0});const lD=aD(Xl);let cD=class extends lD.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Jl.default=cD;var uD=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Do,"__esModule",{value:!0});const dD=uD(Jl);let fD=class extends dD.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Do.default=fD;var hD=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ql,"__esModule",{value:!0});const hi=hD(Do);let pD=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new hi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new hi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new hi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new hi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new hi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ql.default=pD;var ec={},tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.version=void 0;tc.version="0.0.0-automated";Object.defineProperty(ec,"__esModule",{value:!0});ec.DEFAULT_HEADERS=void 0;const mD=tc;ec.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${mD.version}`};var xy=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zf,"__esModule",{value:!0});const gD=xy(Ql),vD=xy(Do),yD=ec;let wD=class by{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},yD.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new gD.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new by(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new vD.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Zf.default=wD;var Xs=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ot,"__esModule",{value:!0});ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;const _y=Xs(Zf);ot.PostgrestClient=_y.default;const Sy=Xs(Ql);ot.PostgrestQueryBuilder=Sy.default;const ky=Xs(Do);ot.PostgrestFilterBuilder=ky.default;const Dy=Xs(Jl);ot.PostgrestTransformBuilder=Dy.default;const Cy=Xs(Xl);ot.PostgrestBuilder=Cy.default;const Ey=Xs(Zl);ot.PostgrestError=Ey.default;var xD=ot.default={PostgrestClient:_y.default,PostgrestQueryBuilder:Sy.default,PostgrestFilterBuilder:ky.default,PostgrestTransformBuilder:Dy.default,PostgrestBuilder:Cy.default,PostgrestError:Ey.default};const{PostgrestClient:bD,PostgrestQueryBuilder:lL,PostgrestFilterBuilder:cL,PostgrestTransformBuilder:uL,PostgrestBuilder:dL,PostgrestError:fL}=xD;function _D(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const SD=_D(),kD="2.11.15",DD=`realtime-js/${kD}`,CD="1.0.0",Ny=1e4,ED=1e3;var Fi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fi||(Fi={}));var ze;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ze||(ze={}));var Bt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bt||(Bt={}));var kd;(function(e){e.websocket="websocket"})(kd||(kd={}));var Cr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cr||(Cr={}));class ND{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Py{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const rm=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=PD(o,e,t,s),i),{})},PD=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Ty(i,o):Dd(o)},Ty=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return jD(t,n)}switch(e){case ue.bool:return TD(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return OD(t);case ue.json:case ue.jsonb:return RD(t);case ue.timestamp:return ID(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Dd(t);default:return Dd(t)}},Dd=e=>e,TD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},OD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},RD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},jD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Ty(t,a))}return e},ID=e=>typeof e=="string"?e.replace(" ","T"):e,Oy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class qc{constructor(t,n,r={},s=Ny){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sm||(sm={}));class $i{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$i.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=$i.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=$i.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(x=>x.presence_ref),p=d.map(x=>x.presence_ref),g=u.filter(x=>p.indexOf(x.presence_ref)<0),w=d.filter(x=>f.indexOf(x.presence_ref)<0);g.length>0&&(a[c]=g),w.length>0&&(l[c]=w)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var im;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(im||(im={}));var om;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(om||(om={}));var mn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mn||(mn={}));class eh{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qc(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new Py(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new $i(this),this.broadcastEndpointURL=Oy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t==null?void 0:t(mn.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(mn.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){t==null||t(mn.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,g=[];for(let w=0;w<p;w++){const x=f[w],{filter:{event:y,schema:m,table:v,filter:_}}=x,S=u&&u[w];if(S&&S.event===y&&S.schema===m&&S.table===v&&S.filter===_)g.push(Object.assign(Object.assign({},x),{id:S.id}));else{this.unsubscribe(),this.state=ze.errored,t==null||t(mn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(mn.SUBSCRIBED);return}}).receive("error",u=>{this.state=ze.errored,t==null||t(mn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qc(this,Bt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qc(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Bt;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,w,x;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(w=p.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,w,x,y,m,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((w=n.ids)===null||w===void 0?void 0:w.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:x,commit_timestamp:y,type:m,errors:v}=g;f=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:y,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(f,r)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&eh.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bt.close,{},t)}_onError(t){this._on(Bt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=rm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=rm(t.columns,t.old_record)),n}}const am=()=>{},MD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AD{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ny,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=am,this.ref=0,this.logger=am,this.conn=null,this.sendBuffer=[],this.serializer=new ND,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Gs(()=>Promise.resolve().then(()=>Js),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${kd.websocket}`,this.httpEndpoint=Oy(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Py(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=SD),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CD}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fi.connecting:return Cr.Connecting;case Fi.open:return Cr.Open;case Fi.closing:return Cr.Closing;default:return Cr.Closed}}isConnected(){return this.connectionState()===Cr.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new eh(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:DD};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Bt.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(ED,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([MD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class th extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Re(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class LD extends th{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cd extends th{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var FD=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const Ry=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Gs(()=>Promise.resolve().then(()=>Js),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},$D=()=>FD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gs(()=>Promise.resolve().then(()=>Js),void 0)).Response:Response}),Ed=e=>{if(Array.isArray(e))return e.map(n=>Ed(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ed(r)}),t},BD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var qr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const Kc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),UD=(e,t,n)=>qr(void 0,void 0,void 0,function*(){const r=yield $D();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new LD(Kc(s),i,o))}).catch(s=>{t(new Cd(Kc(s),s))}):t(new Cd(Kc(e),e))}),WD=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(BD(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n))};function Co(e,t,n,r,s,i){return qr(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,WD(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>UD(l,a,r))})})}function al(e,t,n,r){return qr(this,void 0,void 0,function*(){return Co(e,"GET",t,n,r)})}function gn(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return Co(e,"POST",t,r,s,n)})}function Nd(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return Co(e,"PUT",t,r,s,n)})}function YD(e,t,n,r){return qr(this,void 0,void 0,function*(){return Co(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jy(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return Co(e,"DELETE",t,r,s,n)})}var st=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const HD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zD{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Ry(s)}uploadOrUpdate(t,n,r,s){return st(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},lm),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield(t=="PUT"?Nd:gn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}})}upload(t,n,r){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return st(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:lm.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield Nd(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(Re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return st(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new th("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}update(t,n,r){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return st(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}copy(t,n,r){return st(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return st(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield gn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return st(this,void 0,void 0,function*(){try{const s=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}download(t,n){return st(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield al(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}info(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield al(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ed(r),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}exists(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield YD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Re(r)&&r instanceof Cd){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return st(this,void 0,void 0,function*(){try{return{data:yield jy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}list(t,n,r){return st(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},HD),n),{prefix:t||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const VD="2.10.4",GD={"X-Client-Info":`storage-js/${VD}`};var Jr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class qD{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},GD),n),this.fetch=Ry(r)}listBuckets(){return Jr(this,void 0,void 0,function*(){try{return{data:yield al(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}})}getBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield al(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Jr(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Jr(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Jr(this,void 0,void 0,function*(){try{return{data:yield jy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}}class KD extends qD{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new zD(this.url,this.headers,t,this.fetch)}}const QD="2.53.0";let Ci="";typeof Deno<"u"?Ci="deno":typeof document<"u"?Ci="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ci="react-native":Ci="node";const JD={"X-Client-Info":`supabase-js-${Ci}/${QD}`},XD={headers:JD},ZD={schema:"public"},e1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t1={};var n1=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const r1=e=>{let t;return e?t=e:typeof fetch>"u"?t=vy:t=fetch,(...n)=>t(...n)},s1=()=>typeof Headers>"u"?yy:Headers,i1=(e,t,n)=>{const r=r1(n),s=s1();return(i,o)=>n1(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var o1=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};function a1(e){return e.endsWith("/")?e:e+"/"}function l1(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>o1(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Iy="2.71.1",rs=30*1e3,Pd=3,Qc=Pd*rs,c1="http://localhost:9999",u1="supabase.auth.token",d1={"X-Client-Info":`gotrue-js/${Iy}`},Td="X-Supabase-Api-Version",My={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},f1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h1=10*60*1e3;class nh extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class p1 extends nh{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function m1(e){return Q(e)&&e.name==="AuthApiError"}class Ay extends nh{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class mr extends nh{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Bn extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g1(e){return Q(e)&&e.name==="AuthSessionMissingError"}class Zo extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ea extends mr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ta extends mr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v1(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class cm extends mr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Od extends mr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Jc(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class um extends mr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Rd extends mr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dm=` 	
\r=`.split(""),y1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dm.length;t+=1)e[dm[t].charCodeAt(0)]=-2;for(let t=0;t<ll.length;t+=1)e[ll[t].charCodeAt(0)]=t;return e})();function fm(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ll[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ll[r]),t.queuedBits-=6}}function Ly(e,t,n){const r=y1[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hm(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{b1(o,r,n)};for(let o=0;o<e.length;o+=1)Ly(e.charCodeAt(o),s,i);return t.join("")}function w1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function x1(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}w1(r,t)}}function b1(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function _1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Ly(e.charCodeAt(s),n,r);return new Uint8Array(t)}function S1(e){const t=[];return x1(e,n=>t.push(n)),new Uint8Array(t)}function k1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>fm(s,n,r)),fm(null,n,r),t.join("")}function D1(e){return Math.round(Date.now()/1e3)+e}function C1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Lt=()=>typeof window<"u"&&typeof document<"u",vr={tested:!1,writable:!1},Fy=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vr.tested)return vr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vr.tested=!0,vr.writable=!0}catch{vr.tested=!0,vr.writable=!1}return vr.writable};function E1(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const $y=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Gs(()=>Promise.resolve().then(()=>Js),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},N1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ss=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},yr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fn=async(e,t)=>{await e.removeItem(t)};class nc{constructor(){this.promise=new nc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}nc.promiseConstructor=Promise;function Xc(e){const t=e.split(".");if(t.length!==3)throw new Rd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!f1.test(t[r]))throw new Rd("JWT not in base64url format");return{header:JSON.parse(hm(t[0])),payload:JSON.parse(hm(t[1])),signature:_1(t[2]),raw:{header:t[0],payload:t[1]}}}async function P1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function T1(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function O1(e){return("0"+e.toString(16)).substr(-2)}function R1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,O1).join("")}async function j1(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function I1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await j1(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xr(e,t,n=!1){const r=R1();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ss(e,`${t}-code-verifier`,s);const i=await I1(r);return[i,r===i?"plain":"s256"]}const M1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function A1(e){const t=e.headers.get(Td);if(!t||!t.match(M1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function L1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function F1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zr(e){if(!$1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pm(e){return JSON.parse(JSON.stringify(e))}var B1=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U1=[502,503,504];async function mm(e){var t;if(!N1(e))throw new Od(Sr(e),0);if(U1.includes(e.status))throw new Od(Sr(e),e.status);let n;try{n=await e.json()}catch(i){throw new Ay(Sr(i),i)}let r;const s=A1(e);if(s&&s.getTime()>=My["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new um(Sr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new um(Sr(n),e.status,n.weak_password.reasons);throw new p1(Sr(n),e.status||500,r)}const W1=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function X(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Td]||(i[Td]=My["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Y1(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Y1(e,t,n,r,s,i){const o=W1(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Od(Sr(l),0)}if(a.ok||await mm(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await mm(l)}}function hn(e){var t;let n=null;G1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=D1(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function gm(e){const t=hn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function H1(e){return{data:e,error:null}}function z1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=B1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function V1(e){return e}function G1(e){return e.access_token&&e.refresh_token&&e.expires_in}const eu=["global","local","others"];var q1=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class K1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=$y(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=eu[0]){if(eu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eu.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=q1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:z1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:V1});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);c[`${x}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Zr(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Zr(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:zn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Zr(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:zn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Zr(t.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Zr(t.userId),Zr(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}function vm(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Q1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const es={debug:!!(globalThis&&Fy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class By extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class J1 extends By{}async function X1(e,t,n){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),es.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{es.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw es.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new J1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(es.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Q1();const Z1={url:c1,storageKey:u1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ym(e,t,n){return await n()}const ts={};class oo{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=oo.nextInstanceID,oo.nextInstanceID+=1,this.instanceID>0&&Lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Z1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new K1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$y(s.fetch),this.lock=s.lock||ym,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Lt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=X1:this.lock=ym,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Fy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vm(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=ts[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ts[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Iy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=E1(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Lt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),v1(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?{error:n}:{error:new Ay("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:hn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:d,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Xr(this.storage,this.storageKey)),i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:hn})}else if("phone"in t){const{phone:u,password:d,options:f}=t;i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:hn})}else throw new ea("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gm})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gm})}else throw new ea("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,c,u,d,f,p;let g,w;if("message"in t)g=t.message,w=t.signature;else{const{chain:x,wallet:y,statement:m,options:v}=t;let _;if(Lt())if(typeof y=="object")_=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const S=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),w=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:x,error:y}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:k1(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:hn});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Zo}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(Q(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await yr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:hn});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Zo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:hn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Zo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Xr(this.storage,this.storageKey));const{error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ea("You must provide either an email or phone number.")}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:hn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xr(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:H1})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Bn;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ea("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Qc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await yr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Zc()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zn})})}catch(n){if(Q(n))return g1(n)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Bn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Xr(this.storage,this.storageKey));const{data:c,error:u}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:zn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Xc(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Bn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Lt())throw new ta("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ta(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new cm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ta("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cm("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new ta("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=f-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await yr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(m1(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=C1(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Xr(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Lt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Q(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await T1(async s=>(s>0&&await P1(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:hn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Jc(i)&&Date.now()+o-r<rs})}catch(r){if(this._debug(n,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Lt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await yr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await yr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ss(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Zc()}else if(s&&!s.user&&!s.user){const o=await yr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Fn(this.storage,this.storageKey+"-user"),await ss(this.storage,this.storageKey,s)):s.user=Zc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qc;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Qc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Jc(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new nc;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Bn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return Jc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ss(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=pm(s);await ss(this.storage,this.storageKey,i)}else{const s=pm(n);await ss(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rs}ms, refresh threshold is ${Pd} ticks`),s<=Pd&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof By)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await X(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Xc(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+h1>s)return r;const{data:i,error:o}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Xc(r);n!=null&&n.allowExpired||L1(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=F1(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,S1(`${a}.${l}`)))throw new Rd("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}oo.nextInstanceID=0;const eC=oo;class tC extends eC{constructor(t){super(t)}}var nC=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class rC{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=a1(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:ZD,realtime:t1,auth:Object.assign(Object.assign({},e1),{storageKey:c}),global:XD},d=l1(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=i1(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new bD(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new KD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Jk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return nC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tC({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new AD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sC=(e,t,n)=>new rC(e,t,n);function iC(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}iC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oC="https://rqbvcvwbziilnycqtmnc.supabase.co",aC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxYnZjdndiemlpbG55Y3F0bW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyMzk5ODIsImV4cCI6MjA2NTgxNTk4Mn0.819LDXCnlu2dgCPw91oMbZIojeFom-UxqJn2hA5yjBM",q=sC(oC,aC),Uy=b.createContext(void 0);function lC(){const e=b.useContext(Uy);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function cC({children:e}){const[t,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{q.auth.getSession().then(({data:{session:f}})=>{s(f),n((f==null?void 0:f.user)??null),o(!1)});const{data:{subscription:d}}=q.auth.onAuthStateChange(async(f,p)=>{s(p),n((p==null?void 0:p.user)??null),o(!1)});return()=>d.unsubscribe()},[]);const u={user:t,session:r,loading:i,signIn:async(d,f)=>await q.auth.signInWithPassword({email:d,password:f}),signUp:async(d,f)=>await q.auth.signUp({email:d,password:f}),signOut:async()=>{await q.auth.signOut()}};return h.jsx(Uy.Provider,{value:u,children:e})}function uC({children:e}){return h.jsx(h.Fragment,{children:e})}function Qe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dC=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),wm=dC,tu=()=>Math.random().toString(36).substring(7).split("").join("."),fC={INIT:`@@redux/INIT${tu()}`,REPLACE:`@@redux/REPLACE${tu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tu()}`},xm=fC;function hC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Wy(e,t,n){if(typeof e!="function")throw new Error(Qe(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Qe(1));return n(Wy)(e,t)}let r=e,s=t,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((x,y)=>{o.set(y,x)}))}function u(){if(l)throw new Error(Qe(3));return s}function d(x){if(typeof x!="function")throw new Error(Qe(4));if(l)throw new Error(Qe(5));let y=!0;c();const m=a++;return o.set(m,x),function(){if(y){if(l)throw new Error(Qe(6));y=!1,c(),o.delete(m),i=null}}}function f(x){if(!hC(x))throw new Error(Qe(7));if(typeof x.type>"u")throw new Error(Qe(8));if(typeof x.type!="string")throw new Error(Qe(17));if(l)throw new Error(Qe(9));try{l=!0,s=r(s,x)}finally{l=!1}return(i=o).forEach(m=>{m()}),x}function p(x){if(typeof x!="function")throw new Error(Qe(10));r=x,f({type:xm.REPLACE})}function g(){const x=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Qe(11));function m(){const _=y;_.next&&_.next(u())}return m(),{unsubscribe:x(m)}},[wm](){return this}}}return f({type:xm.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:p,[wm]:g}}function bm(e,t){return function(...n){return t(e.apply(this,n))}}function _m(e,t){if(typeof e=="function")return bm(e,t);if(typeof e!="object"||e===null)throw new Error(Qe(16));const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=bm(s,t))}return n}function Yy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function pC(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(Qe(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=e.map(l=>l(o));return i=Yy(...a)(s.dispatch),{...s,dispatch:i}}}var mC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=b;function gC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vC=typeof Object.is=="function"?Object.is:gC,yC=Eo.useSyncExternalStore,wC=Eo.useRef,xC=Eo.useEffect,bC=Eo.useMemo,_C=Eo.useDebugValue;mC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=wC(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=bC(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var g=o.value;if(s(g,p))return d=g}return d=p}if(g=d,vC(u,p))return g;var w=r(p);return s!==void 0&&s(g,w)?(u=p,g):(u=p,d=w)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,s]);var a=yC(e,i[0],i[1]);return xC(function(){o.hasValue=!0,o.value=a},[a]),_C(a),a};var SC=b.version.startsWith("19"),kC=Symbol.for(SC?"react.transitional.element":"react.element"),DC=Symbol.for("react.portal"),CC=Symbol.for("react.fragment"),EC=Symbol.for("react.strict_mode"),NC=Symbol.for("react.profiler"),PC=Symbol.for("react.consumer"),TC=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),OC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),jC=Symbol.for("react.lazy"),IC=Hy,MC=rh;function AC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case kC:switch(e=e.type,e){case CC:case NC:case EC:case OC:case RC:return e;default:switch(e=e&&e.$$typeof,e){case TC:case Hy:case jC:case rh:return e;case PC:return e;default:return t}}case DC:return t}}}function LC(e){return AC(e)===rh}function FC(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let a=!1,l,c,u,d,f;function p(m,v){return l=m,c=v,u=e(l,c),d=t(r,c),f=n(u,d,c),a=!0,f}function g(){return u=e(l,c),t.dependsOnOwnProps&&(d=t(r,c)),f=n(u,d,c),f}function w(){return e.dependsOnOwnProps&&(u=e(l,c)),t.dependsOnOwnProps&&(d=t(r,c)),f=n(u,d,c),f}function x(){const m=e(l,c),v=!o(m,u);return u=m,v&&(f=n(u,d,c)),f}function y(m,v){const _=!i(v,c),S=!s(m,l,v,c);return l=m,c=v,_&&S?g():_?w():S?x():f}return function(v,_){return a?y(v,_):p(v,_)}}function $C(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=t(e,s),o=n(e,s),a=r(e,s);return FC(i,o,a,e,s)}function BC(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...i)=>t(s(...i)))}return n}function jd(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function Sm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function zy(e,t){return function(r,{displayName:s}){const i=function(a,l){return i.dependsOnOwnProps?i.mapToProps(a,l):i.mapToProps(a,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(a,l){i.mapToProps=e,i.dependsOnOwnProps=Sm(e);let c=i(a,l);return typeof c=="function"&&(i.mapToProps=c,i.dependsOnOwnProps=Sm(c),c=i(a,l)),c},i}}function sh(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function UC(e){return e&&typeof e=="object"?jd(t=>BC(e,t)):e?typeof e=="function"?zy(e):sh(e,"mapDispatchToProps"):jd(t=>({dispatch:t}))}function WC(e){return e?typeof e=="function"?zy(e):sh(e,"mapStateToProps"):jd(()=>({}))}function YC(e,t,n){return{...n,...e,...t}}function HC(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,o;return function(l,c,u){const d=e(l,c,u);return i?s(d,o)||(o=d):(i=!0,o=d),o}}}function zC(e){return e?typeof e=="function"?HC(e):sh(e,"mergeProps"):()=>YC}function VC(e){e()}function GC(){let e=null,t=null;return{clear(){e=null,t=null},notify(){VC(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var km={notify(){},get:()=>[]};function Vy(e,t){let n,r=km,s=0,i=!1;function o(w){u();const x=r.subscribe(w);let y=!1;return()=>{y||(y=!0,x(),d())}}function a(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return i}function u(){s++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=GC())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=km)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,d())}const g={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return g}var qC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KC=qC(),QC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JC=QC(),XC=()=>KC||JC?b.useLayoutEffect:b.useEffect,cl=XC();function Dm(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function nu(e,t){if(Dm(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!Dm(e[n[s]],t[n[s]]))return!1;return!0}var ZC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},eE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},tE={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nE={[IC]:tE,[MC]:Gy};function Cm(e){return LC(e)?Gy:nE[e.$$typeof]||ZC}var rE=Object.defineProperty,sE=Object.getOwnPropertyNames,Em=Object.getOwnPropertySymbols,iE=Object.getOwnPropertyDescriptor,oE=Object.getPrototypeOf,Nm=Object.prototype;function Id(e,t){if(typeof t!="string"){if(Nm){const i=oE(t);i&&i!==Nm&&Id(e,i)}let n=sE(t);Em&&(n=n.concat(Em(t)));const r=Cm(e),s=Cm(t);for(let i=0;i<n.length;++i){const o=n[i];if(!eE[o]&&!(s&&s[o])&&!(r&&r[o])){const a=iE(t,o);try{rE(e,o,a)}catch{}}}}return e}var ru=Symbol.for("react-redux-context"),su=typeof globalThis<"u"?globalThis:{};function aE(){if(!b.createContext)return{};const e=su[ru]??(su[ru]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var qy=aE(),lE=[null,null];function cE(e,t,n){cl(()=>e(...t),n)}function uE(e,t,n,r,s,i){e.current=r,n.current=!1,s.current&&(s.current=null,i())}function dE(e,t,n,r,s,i,o,a,l,c,u){if(!e)return()=>{};let d=!1,f=null;const p=()=>{if(d||!a.current)return;const w=t.getState();let x,y;try{x=r(w,s.current)}catch(m){y=m,f=m}y||(f=null),x===i.current?o.current||c():(i.current=x,l.current=x,o.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function fE(e,t){return e===t}function hE(e,t,n,{pure:r,areStatesEqual:s=fE,areOwnPropsEqual:i=nu,areStatePropsEqual:o=nu,areMergedPropsEqual:a=nu,forwardRef:l=!1,context:c=qy}={}){const u=c,d=WC(e),f=UC(t),p=zC(n),g=!!e;return x=>{const y=x.displayName||x.name||"Component",m=`Connect(${y})`,v={shouldHandleStateChanges:g,displayName:m,wrappedComponentName:y,WrappedComponent:x,initMapStateToProps:d,initMapDispatchToProps:f,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:a};function _(C){const[E,N,P]=b.useMemo(()=>{const{reactReduxForwardedRef:bt,...ri}=C;return[C.context,bt,ri]},[C]),I=b.useMemo(()=>{let bt=u;return E!=null&&E.Consumer,bt},[E,u]),$=b.useContext(I),M=!!C.store&&!!C.store.getState&&!!C.store.dispatch,U=!!$&&!!$.store,H=M?C.store:$.store,L=U?$.getServerState:H.getState,z=b.useMemo(()=>$C(H.dispatch,v),[H]),[D,O]=b.useMemo(()=>{if(!g)return lE;const bt=Vy(H,M?void 0:$.subscription),ri=bt.notifyNestedSubs.bind(bt);return[bt,ri]},[H,M,$]),j=b.useMemo(()=>M?$:{...$,subscription:D},[M,$,D]),W=b.useRef(void 0),K=b.useRef(P),Ce=b.useRef(void 0),Oe=b.useRef(!1),Jt=b.useRef(!1),rt=b.useRef(void 0);cl(()=>(Jt.current=!0,()=>{Jt.current=!1}),[]);const Ee=b.useMemo(()=>()=>Ce.current&&P===K.current?Ce.current:z(H.getState(),P),[H,P]),gr=b.useMemo(()=>ri=>D?dE(g,H,D,z,K,W,Oe,Jt,Ce,O,ri):()=>{},[D]);cE(uE,[K,W,Oe,P,Ce,O]);let Io;try{Io=b.useSyncExternalStore(gr,Ee,L?()=>z(L(),P):Ee)}catch(bt){throw rt.current&&(bt.message+=`
The error may be correlated with this previous error:
${rt.current.stack}

`),bt}cl(()=>{rt.current=void 0,Ce.current=void 0,W.current=Io});const wc=b.useMemo(()=>b.createElement(x,{...Io,ref:N}),[N,x,Io]);return b.useMemo(()=>g?b.createElement(I.Provider,{value:j},wc):wc,[I,wc,j])}const k=b.memo(_);if(k.WrappedComponent=x,k.displayName=_.displayName=m,l){const E=b.forwardRef(function(P,I){return b.createElement(k,{...P,reactReduxForwardedRef:I})});return E.displayName=m,E.WrappedComponent=x,Id(E,x)}return Id(k,x)}}var Ky=hE;function pE(e){const{children:t,context:n,serverState:r,store:s}=e,i=b.useMemo(()=>{const l=Vy(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),o=b.useMemo(()=>s.getState(),[s]);cl(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=n||qy;return b.createElement(a.Provider,{value:i},t)}var mE=pE,gE=!0,iu="Invariant failed";function vE(e,t){if(!e){if(gE)throw new Error(iu);var n=typeof t=="function"?t():t,r=n?"".concat(iu,": ").concat(n):iu;throw new Error(r)}}var Wt=function(t){var n=t.top,r=t.right,s=t.bottom,i=t.left,o=r-i,a=s-n,l={top:n,right:r,bottom:s,left:i,width:o,height:a,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return l},ih=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Pm=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},yE=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},ou={top:0,right:0,bottom:0,left:0},oh=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?ou:r,i=t.border,o=i===void 0?ou:i,a=t.padding,l=a===void 0?ou:a,c=Wt(ih(n,s)),u=Wt(Pm(n,o)),d=Wt(Pm(u,l));return{marginBox:c,borderBox:Wt(n),paddingBox:u,contentBox:d,margin:s,border:o,padding:l}},_t=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&vE(!1),s},wE=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ul=function(t,n){var r=t.borderBox,s=t.border,i=t.margin,o=t.padding,a=yE(r,n);return oh({borderBox:a,border:s,margin:i,padding:o})},dl=function(t,n){return n===void 0&&(n=wE()),ul(t,n)},Qy=function(t,n){var r={top:_t(n.marginTop),right:_t(n.marginRight),bottom:_t(n.marginBottom),left:_t(n.marginLeft)},s={top:_t(n.paddingTop),right:_t(n.paddingRight),bottom:_t(n.paddingBottom),left:_t(n.paddingLeft)},i={top:_t(n.borderTopWidth),right:_t(n.borderRightWidth),bottom:_t(n.borderBottomWidth),left:_t(n.borderLeftWidth)};return oh({borderBox:t,margin:r,padding:s,border:i})},Jy=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return Qy(n,r)},xE=function(t){var n=[],r=null,s=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};const ao=xE;function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fl.apply(null,arguments)}function Xy(e,t){}Xy.bind(null,"warn");Xy.bind(null,"error");function rr(){}function bE(e,t){return{...e,...t}}function Pt(e,t,n){const r=t.map(s=>{const i=bE(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const _E="Invariant failed";class hl extends Error{}hl.prototype.toString=function(){return this.message};function A(e,t){throw new hl(_E)}class SE extends T.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=rr,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof hl&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Pt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof hl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const kE=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,pl=e=>e+1,DE=e=>`
  You have lifted an item in position ${pl(e.source.index)}
`,Zy=(e,t)=>{const n=e.droppableId===t.droppableId,r=pl(e.index),s=pl(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},ew=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,CE=e=>{const t=e.destination;if(t)return Zy(e.source,t);const n=e.combine;return n?ew(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Tm=e=>`
  The item has returned to its starting position
  of ${pl(e.index)}
`,EE=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Tm(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Zy(e.source,t)}
    `:n?`
      You have dropped the item.
      ${ew(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Tm(e.source)}
  `},Pa={dragHandleUsageInstructions:kE,onDragStart:DE,onDragUpdate:CE,onDragEnd:EE};function NE(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function tw(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!NE(e[n],t[n]))return!1;return!0}function ee(e,t){const n=b.useState(()=>({inputs:t,result:e()}))[0],r=b.useRef(!0),s=b.useRef(n),o=r.current||!!(t&&s.current.inputs&&tw(t,s.current.inputs))?s.current:{inputs:t,result:e()};return b.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function G(e,t){return ee(()=>e,t)}const Ae={x:0,y:0},$e=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ht=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),sr=(e,t)=>e.x===t.x&&e.y===t.y,Zs=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Wr=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},lo=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Om=(e,t)=>Math.min(...t.map(n=>lo(e,n))),nw=e=>t=>({x:e(t.x),y:e(t.y)});var PE=(e,t)=>{const n=Wt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const No=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Rm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],TE={top:0,right:0,bottom:0,left:0},OE=(e,t)=>t?No(e,t.scroll.diff.displacement):e,RE=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,jE=(e,t)=>t&&t.shouldClipSubject?PE(t.pageMarginBox,e):Wt(e);var Is=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=OE(e.marginBox,r),i=RE(s,n,t),o=jE(i,r);return{page:e,withPlaceholder:t,active:o}},ah=(e,t)=>{e.frame||A();const n=e.frame,r=ht(t,n.scroll.initial),s=Zs(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},o=Is({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function Me(e,t=tw){let n=null;function r(...s){if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;const i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const rw=Me(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),sw=Me(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),rc=Me(e=>Object.values(e)),IE=Me(e=>Object.values(e));var ei=Me((e,t)=>IE(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function lh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function sc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ic=Me((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),ME=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!lh(s))return null;function o(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...s,at:g}}const a=s.displaced.all,l=a.length?a[0]:null;if(e)return l?o(l):null;const c=ic(t,r);if(!l){if(!c.length)return null;const p=c[c.length-1];return o(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&A();const d=u-1;if(d<0)return null;const f=c[d];return o(f.descriptor.id)},ti=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const iw={point:Ae,value:0},co={invisible:{},visible:{},all:[]},AE={displaced:co,displacedBy:iw,at:null};var Ot=(e,t)=>n=>e<=n&&n<=t,ow=e=>{const t=Ot(e.top,e.bottom),n=Ot(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;const l=r.top<e.top&&r.bottom>e.bottom,c=r.left<e.left&&r.right>e.right;return l&&c?!0:l&&o||c&&i}},LE=e=>{const t=Ot(e.top,e.bottom),n=Ot(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const ch={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},aw={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var FE=e=>t=>{const n=Ot(t.top,t.bottom),r=Ot(t.left,t.right);return s=>e===ch?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const $E=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Ae;return No(e,n)},BE=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,UE=(e,t,n)=>n(t)(e),uh=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?$E(e,t):e;return BE(i,t,s)&&UE(i,n,s)},WE=e=>uh({...e,isVisibleThroughFrameFn:ow}),lw=e=>uh({...e,isVisibleThroughFrameFn:LE}),YE=e=>uh({...e,isVisibleThroughFrameFn:FE(e.destination.axis)}),HE=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function zE(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Wt(ih(n,r))}function uo({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return e.reduce(function(a,l){const c=zE(l,n),u=l.descriptor.id;if(a.all.push(u),!WE({target:c,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const f=HE(u,i,s),p={draggableId:u,shouldAnimate:f};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function VE(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function jm({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=VE(e,{inHomeList:t});return{displaced:co,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function ml({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:i,index:o,forceShouldAnimate:a}){const l=ti(e,n);if(o==null)return jm({insideDestination:t,inHomeList:l,displacedBy:s,destination:n});const c=t.find(g=>g.descriptor.index===o);if(!c)return jm({insideDestination:t,inHomeList:l,displacedBy:s,destination:n});const u=ic(e,t),d=t.indexOf(c),f=u.slice(d);return{displaced:uo({afterDragging:f,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function cr(e,t){return!!t.effected[e]}var GE=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,a=n[i].descriptor.index;return cr(i,s)?e?a:a-1:e?a+1:a},qE=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=e?s+1:s-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=t?a:a+1;return i<o||i>l?null:i},KE=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:o,viewport:a,afterCritical:l})=>{const c=o.at;if(c||A(),c.type==="REORDER"){const d=qE({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:i});return d==null?null:ml({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:d})}const u=GE({isMovingForward:e,destination:s,displaced:o.displaced,draggables:r,combine:c.combine,afterCritical:l});return u==null?null:ml({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:u})},QE=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return cr(n,t)?s?Ae:Zs(r.point):s?r.point:Ae},JE=({afterCritical:e,impact:t,draggables:n})=>{const r=sc(t);r||A();const s=r.draggableId,i=n[s].page.borderBox.center,o=QE({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return $e(i,o)};const cw=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,XE=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,dh=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Im=({axis:e,moveRelativeTo:t,isMoving:n})=>Wr(e.line,t.marginBox[e.end]+cw(e,n),dh(e,t.marginBox,n)),Mm=({axis:e,moveRelativeTo:t,isMoving:n})=>Wr(e.line,t.marginBox[e.start]-XE(e,n),dh(e,t.marginBox,n)),ZE=({axis:e,moveInto:t,isMoving:n})=>Wr(e.line,t.contentBox[e.start]+cw(e,n),dh(e,t.contentBox,n));var eN=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const i=ei(r.descriptor.id,n),o=t.page,a=r.axis;if(!i.length)return ZE({axis:a,moveInto:r.page,isMoving:o});const{displaced:l,displacedBy:c}=e,u=l.all[0];if(u){const f=n[u];if(cr(u,s))return Mm({axis:a,moveRelativeTo:f.page,isMoving:o});const p=ul(f.page,c.point);return Mm({axis:a,moveRelativeTo:p,isMoving:o})}const d=i[i.length-1];if(d.descriptor.id===t.descriptor.id)return o.borderBox.center;if(cr(d.descriptor.id,s)){const f=ul(d.page,Zs(s.displacedBy.point));return Im({axis:a,moveRelativeTo:f,isMoving:o})}return Im({axis:a,moveRelativeTo:d.page,isMoving:o})},Md=(e,t)=>{const n=e.frame;return n?$e(t,n.scroll.diff.displacement):t};const tN=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?eN({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):JE({impact:e,draggables:r,afterCritical:s})};var oc=e=>{const t=tN(e),n=e.droppable;return n?Md(n,t):t},uw=(e,t)=>{const n=ht(t,e.scroll.initial),r=Zs(n);return{frame:Wt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Am(e,t){return e.map(n=>t[n])}function nN(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var rN=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const i=uw(t,$e(t.scroll.current,s)),o=n.frame?ah(n,$e(n.frame.scroll.current,s)):n,a=e.displaced,l=uo({afterDragging:Am(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:a,forceShouldAnimate:!1}),c=uo({afterDragging:Am(a.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),u={},d={},f=[a,l,c];return a.all.forEach(g=>{const w=nN(g,f);if(w){d[g]=w;return}u[g]=!0}),{...e,displaced:{all:a.all,invisible:u,visible:d}}},sN=(e,t)=>$e(e.scroll.diff.displacement,t),fh=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=sN(n,e),s=ht(r,t.page.borderBox.center);return $e(t.client.borderBox.center,s)},dw=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=ht(n,e.page.borderBox.center),l={target:No(e.page.borderBox,o),destination:t,withDroppableDisplacement:s,viewport:r};return i?YE(l):lw(l)},iN=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const c=ei(n.descriptor.id,r),u=ti(t,n),d=ME({isMovingForward:e,draggable:t,destination:n,insideDestination:c,previousImpact:s})||KE({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:c,previousImpact:s,viewport:i,afterCritical:l});if(!d)return null;const f=oc({impact:d,draggable:t,droppable:n,draggables:r,afterCritical:l});if(dw({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:fh({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:d,scrollJumpRequest:null};const g=ht(f,o),w=rN({impact:d,viewport:i,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:a,impact:w,scrollJumpRequest:g}};const Ke=e=>{const t=e.subject.active;return t||A(),t};var oN=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,a=Ot(i[o.start],i[o.end]),l=rc(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>ow(s.frame)(Ke(u))).filter(u=>{const d=Ke(u);return e?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(u=>{const d=Ke(u),f=Ot(d[o.start],d[o.end]);return a(d[o.start])||a(d[o.end])||f(i[o.start])||f(i[o.end])}).sort((u,d)=>{const f=Ke(u)[o.crossAxisStart],p=Ke(d)[o.crossAxisStart];return e?f-p:p-f}).filter((u,d,f)=>Ke(u)[o.crossAxisStart]===Ke(f[0])[o.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>Ot(Ke(u)[o.start],Ke(u)[o.end])(t[o.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>Ke(u)[o.start]-Ke(d)[o.start])[0]:l.sort((u,d)=>{const f=Om(t,Rm(Ke(u))),p=Om(t,Rm(Ke(d)));return f!==p?f-p:Ke(u)[o.start]-Ke(d)[o.start]})[0]};const Lm=(e,t)=>{const n=e.page.borderBox.center;return cr(e.descriptor.id,t)?ht(n,t.displacedBy.point):n},aN=(e,t)=>{const n=e.page.borderBox;return cr(e.descriptor.id,t)?No(n,Zs(t.displacedBy.point)):n};var lN=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>lw({target:aN(o,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const l=lo(e,Md(n,Lm(o,s))),c=lo(e,Md(n,Lm(a,s)));return l<c?-1:c<l?1:o.descriptor.index-a.descriptor.index})[0]||null,Po=Me(function(t,n){const r=n[t.line];return{value:r,point:Wr(t.line,r)}});const cN=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Wr(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],l=ei(e.descriptor.id,n).reduce((c,u)=>c+u.client.marginBox[r.size],0)+t[r.line]-s;return l<=0?null:Wr(r.line,l)},fw=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),hw=(e,t,n)=>{const r=e.frame;ti(t,e)&&A(),e.subject.withPlaceholder&&A();const s=Po(e.axis,t.displaceBy).point,i=cN(e,s,n),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const u=Is({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:u}}const a=i?$e(r.scroll.max,i):r.scroll.max,l=fw(r,a),c=Is({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l});return{...e,subject:c,frame:l}},uN=e=>{const t=e.subject.withPlaceholder;t||A();const n=e.frame;if(!n){const o=Is({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||A();const s=fw(n,r),i=Is({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var dN=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:o,afterCritical:a})=>{if(!t){if(n.length)return null;const d={displaced:co,displacedBy:iw,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=oc({impact:d,draggable:r,droppable:i,draggables:s,afterCritical:a}),p=ti(r,i)?i:hw(i,r,s);return dw({draggable:r,destination:p,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],c=(()=>{const d=t.descriptor.index;return t.descriptor.id===r.descriptor.id||l?d:d+1})(),u=Po(i.axis,r.displaceBy);return ml({draggable:r,insideDestination:n,destination:i,viewport:o,displacedBy:u,last:co,index:c})},fN=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:i,viewport:o,afterCritical:a})=>{const l=oN({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:o});if(!l)return null;const c=ei(l.descriptor.id,s),u=lN({pageBorderBoxCenter:t,viewport:o,destination:l,insideDestination:c,afterCritical:a}),d=dN({previousPageBorderBoxCenter:t,destination:l,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:c,viewport:o,afterCritical:a});if(!d)return null;const f=oc({impact:d,draggable:n,droppable:l,draggables:s,afterCritical:a});return{clientSelection:fh({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},mt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const hN=(e,t)=>{const n=mt(e);return n?t[n]:null};var pN=({state:e,type:t})=>{const n=hN(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],i=n||s,o=i.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",c=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:f}=e.dimensions;return a?iN({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:i,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):fN({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:i,draggables:d,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function kr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function pw(e){const t=Ot(e.top,e.bottom),n=Ot(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function mN(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function gN({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(i=>{const o=i.axis,a=Wr(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:lo(r,a)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function vN({pageBorderBox:e,draggable:t,droppables:n}){const r=rc(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!mN(e,i))return!1;if(pw(i)(e.center))return!0;const o=s.axis,a=i.center[o.crossAxisLine],l=e[o.crossAxisStart],c=e[o.crossAxisEnd],u=Ot(i[o.crossAxisStart],i[o.crossAxisEnd]),d=u(l),f=u(c);return!d&&!f?!0:d?l<a:c>a});return r.length?r.length===1?r[0].descriptor.id:gN({pageBorderBox:e,draggable:t,candidates:r}):null}const mw=(e,t)=>Wt(No(e,t));var yN=(e,t)=>{const n=e.frame;return n?mw(t,n.scroll.diff.value):t};function gw({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function wN({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var xN=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:o})=>{const a=n.axis,l=Po(n.axis,t.displaceBy),c=l.value,u=e[a.start],d=e[a.end],p=ic(t,r).find(w=>{const x=w.descriptor.id,y=w.page.borderBox.center[a.line],m=cr(x,o),v=gw({displaced:s,id:x});return m?v?d<=y:u<y-c:v?d<=y+c:u<y})||null,g=wN({draggable:t,closest:p,inHomeList:ti(t,n)});return ml({draggable:t,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:l,index:g})};const bN=4;var _N=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=Po(r.axis,e.displaceBy),l=a.value,c=t[o.start],u=t[o.end],f=ic(e,s).find(g=>{const w=g.descriptor.id,x=g.page.borderBox,m=x[o.size]/bN,v=cr(w,i),_=gw({displaced:n.displaced,id:w});return v?_?u>x[o.start]+m&&u<x[o.end]-m:c>x[o.start]-l+m&&c<x[o.end]-l-m:_?u>x[o.start]+l+m&&u<x[o.end]+l-m:c>x[o.start]+m&&c<x[o.end]-m});return f?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},vw=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:o})=>{const a=mw(t.page.borderBox,e),l=vN({pageBorderBox:a,draggable:t,droppables:r});if(!l)return AE;const c=r[l],u=ei(c.descriptor.id,n),d=yN(c,a);return _N({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:s,destination:c,insideDestination:u,afterCritical:o})||xN({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:c,insideDestination:u,last:s.displaced,viewport:i,afterCritical:o})},hh=(e,t)=>({...e,[t.descriptor.id]:t});const SN=({previousImpact:e,impact:t,droppables:n})=>{const r=mt(e),s=mt(t);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const o=uN(i);return hh(n,o)};var kN=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const i=SN({previousImpact:r,impact:s,droppables:n}),o=mt(s);if(!o)return i;const a=n[o];if(ti(e,a)||a.subject.withPlaceholder)return i;const l=hw(a,e,t);return hh(i,l)},Bi=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const o=r||e.viewport,a=n||e.dimensions,l=t||e.current.client.selection,c=ht(l,e.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:$e(e.initial.client.borderBoxCenter,c)},d={selection:$e(u.selection,o.scroll.current),borderBoxCenter:$e(u.borderBoxCenter,o.scroll.current),offset:$e(u.offset,o.scroll.diff.value)},f={client:u,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:f};const p=a.draggables[e.critical.draggable.id],g=s||vw({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),w=kN({draggable:p,impact:g,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:f,dimensions:{draggables:a.draggables,droppables:w},impact:g,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function DN(e,t){return e.map(n=>t[n])}var yw=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=e.displaced,o=DN(i.all,n),a=uo({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:a}},ww=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const o=oc({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return fh({pageBorderBoxCenter:o,draggable:t,viewport:s})},xw=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&A();const r=e.impact,s=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:a}=i,l=o[e.critical.draggable.id],c=mt(r);c||A();const u=a[c],d=yw({impact:r,viewport:s,destination:u,draggables:o}),f=ww({impact:d,draggable:l,droppable:u,draggables:o,viewport:s,afterCritical:e.afterCritical});return Bi({impact:d,clientSelection:f,state:e,dimensions:i,viewport:s})},CN=e=>({index:e.index,droppableId:e.droppableId}),bw=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=Po(t.axis,e.displaceBy),i=ei(t.descriptor.id,n),o=i.indexOf(e);o===-1&&A();const a=i.slice(o+1),l=a.reduce((f,p)=>(f[p.descriptor.id]=!0,f),{}),c={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:uo({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:CN(e.descriptor)}},afterCritical:c}},EN=(e,t)=>({draggables:e.draggables,droppables:hh(e.droppables,t)}),NN=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=ul(e.client,t),s=dl(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},PN=e=>{const t=e.frame;return t||A(),t},TN=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,o=t[i],l=PN(o).scroll.diff.value,c=$e(r,l);return NN({draggable:s,offset:c,initialWindowScroll:n.scroll.initial})})},ON=({state:e,published:t})=>{const n=t.modified.map(y=>{const m=e.dimensions.droppables[y.droppableId];return ah(m,y.scroll)}),r={...e.dimensions.droppables,...rw(n)},s=sw(TN({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(y=>{delete i[y]});const o={droppables:r,draggables:i},a=mt(e.impact),l=a?o.droppables[a]:null,c=o.draggables[e.critical.draggable.id],u=o.droppables[e.critical.droppable.id],{impact:d,afterCritical:f}=bw({draggable:c,home:u,draggables:i,viewport:e.viewport}),p=l&&l.isCombineEnabled?e.impact:d,g=vw({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:e.viewport,afterCritical:f}),w={...e,phase:"DRAGGING",impact:g,onLiftImpact:d,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?w:{...w,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Ad=e=>e.movementMode==="SNAP",au=(e,t,n)=>{const r=EN(e.dimensions,t);return!Ad(e)||n?Bi({state:e,dimensions:r}):xw({state:e,dimensions:r})};function lu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Fm={phase:"IDLE",completed:null,shouldFlush:!1};var RN=(e=Fm,t)=>{if(t.type==="FLUSH")return{...Fm,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&A();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:o}=t.payload,a=i.draggables[n.draggable.id],l=i.droppables[n.droppable.id],c={selection:r,borderBoxCenter:a.client.borderBox.center,offset:Ae},u={client:c,page:{selection:$e(c.selection,s.scroll.initial),borderBoxCenter:$e(c.selection,s.scroll.initial),offset:$e(c.selection,s.scroll.diff.value)}},d=rc(i.droppables).every(w=>!w.isFixedOnPage),{impact:f,afterCritical:p}=bw({draggable:a,home:l,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:u,current:u,isWindowScrollAllowed:d,impact:f,afterCritical:p,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&A(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||A(),ON({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;kr(e)||A();const{client:n}=t.payload;return sr(n,e.current.client.selection)?e:Bi({state:e,clientSelection:n,impact:Ad(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return lu(e);kr(e)||A();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const i=ah(s,r);return au(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;kr(e)||A();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||A(),s.isEnabled===r&&A();const i={...s,isEnabled:r};return au(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;kr(e)||A();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||A(),s.isCombineEnabled===r&&A();const i={...s,isCombineEnabled:r};return au(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;kr(e)||A(),e.isWindowScrollAllowed||A();const n=t.payload.newScroll;if(sr(e.viewport.scroll.current,n))return lu(e);const r=uw(e.viewport,n);return Ad(e)?xw({state:e,viewport:r}):Bi({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!kr(e))return e;const n=t.payload.maxScroll;if(sr(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&A();const n=pN({state:e,type:t.type});return n?Bi({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&A(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||A(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function oe(e,t){return e instanceof Object&&"type"in e&&e.type===t}const jN=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),IN=e=>({type:"LIFT",payload:e}),MN=e=>({type:"INITIAL_PUBLISH",payload:e}),AN=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),LN=()=>({type:"COLLECTION_STARTING",payload:null}),FN=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),$N=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),BN=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),_w=e=>({type:"MOVE",payload:e}),UN=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),WN=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),YN=()=>({type:"MOVE_UP",payload:null}),HN=()=>({type:"MOVE_DOWN",payload:null}),zN=()=>({type:"MOVE_RIGHT",payload:null}),VN=()=>({type:"MOVE_LEFT",payload:null}),ph=()=>({type:"FLUSH",payload:null}),GN=e=>({type:"DROP_ANIMATE",payload:e}),mh=e=>({type:"DROP_COMPLETE",payload:e}),Sw=e=>({type:"DROP",payload:e}),qN=e=>({type:"DROP_PENDING",payload:e}),kw=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var KN=e=>({getState:t,dispatch:n})=>r=>s=>{if(!oe(s,"LIFT")){r(s);return}const{id:i,clientSelection:o,movementMode:a}=s.payload,l=t();l.phase==="DROP_ANIMATING"&&n(mh({completed:l.completed})),t().phase!=="IDLE"&&A(),n(ph()),n(jN({draggableId:i,movementMode:a}));const u={draggableId:i,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:f,viewport:p}=e.startPublishing(u);n(MN({critical:d,dimensions:f,clientSelection:o,movementMode:a,viewport:p}))},QN=e=>()=>t=>n=>{oe(n,"INITIAL_PUBLISH")&&e.dragging(),oe(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(oe(n,"FLUSH")||oe(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const gh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},fo={opacity:{drop:0,combining:.7},scale:{drop:.75}},Dw={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},wr=`${Dw.outOfTheWay}s ${gh.outOfTheWay}`,Ui={fluid:`opacity ${wr}`,snap:`transform ${wr}, opacity ${wr}`,drop:e=>{const t=`${e}s ${gh.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${wr}`,placeholder:`height ${wr}, width ${wr}, margin ${wr}`},$m=e=>sr(e,Ae)?void 0:`translate(${e.x}px, ${e.y}px)`,Ld={moveTo:$m,drop:(e,t)=>{const n=$m(e);if(n)return t?`${n} scale(${fo.scale.drop})`:n}},{minDropTime:Fd,maxDropTime:Cw}=Dw,JN=Cw-Fd,Bm=1500,XN=.6;var ZN=({current:e,destination:t,reason:n})=>{const r=lo(e,t);if(r<=0)return Fd;if(r>=Bm)return Cw;const s=r/Bm,i=Fd+JN*s,o=n==="CANCEL"?i*XN:i;return Number(o.toFixed(2))},eP=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:o}=n,a=mt(e),l=a?o[a]:null,c=o[t.descriptor.droppableId],u=ww({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:l||c,viewport:r});return ht(u,t.client.borderBox.center)},tP=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:yw({draggables:e,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:co},didDropInsideDroppable:!0};const nP=({getState:e,dispatch:t})=>n=>r=>{if(!oe(r,"DROP")){n(r);return}const s=e(),i=r.payload.reason;if(s.phase==="COLLECTING"){t(qN({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&A(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||A();const a=s.critical,l=s.dimensions,c=l.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=tP({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),f=d?lh(u):null,p=d?sc(u):null,g={index:a.draggable.index,droppableId:a.droppable.id},w={draggableId:c.descriptor.id,type:c.descriptor.type,source:g,reason:i,mode:s.movementMode,destination:f,combine:p},x=eP({impact:u,draggable:c,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:w,impact:u};if(!(!sr(s.current.client.offset,x)||!!w.combine)){t(mh({completed:y}));return}const v=ZN({current:s.current.client.offset,destination:x,reason:i});t(GN({newHomeClientOffset:x,dropDuration:v,completed:y}))};var Ew=()=>({x:window.pageXOffset,y:window.pageYOffset});function rP(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function sP({onWindowScroll:e}){function t(){e(Ew())}const n=ao(t),r=rP(n);let s=rr;function i(){return s!==rr}function o(){i()&&A(),s=Pt(window,[r])}function a(){i()||A(),n.cancel(),s(),s=rr}return{start:o,stop:a,isActive:i}}const iP=e=>oe(e,"DROP_COMPLETE")||oe(e,"DROP_ANIMATE")||oe(e,"FLUSH"),oP=e=>{const t=sP({onWindowScroll:n=>{e.dispatch(UN({newScroll:n}))}});return n=>r=>{!t.isActive()&&oe(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&iP(r)&&t.stop(),n(r)}};var aP=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return s.wasCalled=()=>t,s},lP=()=>{const e=[],t=s=>{const i=e.findIndex(a=>a.timerId===s);i===-1&&A();const[o]=e.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:s};e.push(o)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const cP=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,uP=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,dP=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},pi=(e,t)=>{t()},na=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function cu(e,t,n,r){if(!e){n(r(t));return}const s=aP(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var fP=(e,t)=>{const n=lP();let r=null;const s=(d,f)=>{r&&A(),pi("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:d,mode:f})})},i=(d,f)=>{r&&A(),pi("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(na(d,f))})},o=(d,f)=>{r&&A();const p=na(d,f);r={mode:f,lastCritical:d,lastLocation:p.source,lastCombine:null},n.add(()=>{pi("onDragStart",()=>cu(e().onDragStart,p,t,Pa.onDragStart))})},a=(d,f)=>{const p=lh(f),g=sc(f);r||A();const w=!dP(d,r.lastCritical);w&&(r.lastCritical=d);const x=!cP(r.lastLocation,p);x&&(r.lastLocation=p);const y=!uP(r.lastCombine,g);if(y&&(r.lastCombine=g),!w&&!x&&!y)return;const m={...na(d,r.mode),combine:g,destination:p};n.add(()=>{pi("onDragUpdate",()=>cu(e().onDragUpdate,m,t,Pa.onDragUpdate))})},l=()=>{r||A(),n.flush()},c=d=>{r||A(),r=null,pi("onDragEnd",()=>cu(e().onDragEnd,d,t,Pa.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:a,flush:l,drop:c,abort:()=>{if(!r)return;const d={...na(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},hP=(e,t)=>{const n=fP(e,t);return r=>s=>i=>{if(oe(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(oe(i,"INITIAL_PUBLISH")){const a=i.payload.critical;n.beforeStart(a,i.payload.movementMode),s(i),n.start(a,i.payload.movementMode);return}if(oe(i,"DROP_COMPLETE")){const a=i.payload.completed.result;n.flush(),s(i),n.drop(a);return}if(s(i),oe(i,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const pP=e=>t=>n=>{if(!oe(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&A(),e.dispatch(mh({completed:r.completed}))},mP=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>i=>{if((oe(i,"FLUSH")||oe(i,"DROP_COMPLETE")||oe(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!oe(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(kw())}};n=requestAnimationFrame(()=>{n=null,t=Pt(window,[o])})}};var gP=e=>()=>t=>n=>{(oe(n,"DROP_COMPLETE")||oe(n,"FLUSH")||oe(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},vP=e=>{let t=!1;return()=>n=>r=>{if(oe(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(oe(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(oe(r,"DROP_COMPLETE")){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const yP=e=>oe(e,"DROP_COMPLETE")||oe(e,"DROP_ANIMATE")||oe(e,"FLUSH");var wP=e=>t=>n=>r=>{if(yP(r)){e.stop(),n(r);return}if(oe(r,"INITIAL_PUBLISH")){n(r);const s=t.getState();s.phase!=="DRAGGING"&&A(),e.start(s);return}n(r),e.scroll(t.getState())};const xP=e=>t=>n=>{if(t(n),!oe(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Sw({reason:r.reason})))},bP=Yy;var _P=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>Wy(RN,bP(pC(QN(n),gP(e),KN(e),nP,pP,mP,xP,wP(i),oP,vP(t),hP(r,s))));const uu=()=>({additions:{},removals:{},modified:{}});function SP({registry:e,callbacks:t}){let n=uu(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:c,modified:u}=n,d=Object.keys(l).map(g=>e.draggable.getById(g).getDimension(Ae)).sort((g,w)=>g.descriptor.index-w.descriptor.index),f=Object.keys(u).map(g=>{const x=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:x}}),p={additions:d,removals:Object.keys(c),modified:f};n=uu(),t.publish(p)}))};return{add:l=>{const c=l.descriptor.id;n.additions[c]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],s()},remove:l=>{const c=l.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=uu())}}}var Nw=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=ht({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Pw=()=>{const e=document.documentElement;return e||A(),e},Tw=()=>{const e=Pw();return Nw({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},kP=()=>{const e=Ew(),t=Tw(),n=e.y,r=e.x,s=Pw(),i=s.clientWidth,o=s.clientHeight,a=r+i,l=n+o;return{frame:Wt({top:n,left:r,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:Ae,displacement:Ae}}}},DP=({critical:e,scrollOptions:t,registry:n})=>{const r=kP(),s=r.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,t)),a=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:sw(a),droppables:rw(o)},critical:e,viewport:r}};function Um(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var CP=(e,t)=>{let n=null;const r=SP({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(f,p)=>{e.droppable.exists(f)||A(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:p})},i=(f,p)=>{n&&(e.droppable.exists(f)||A(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:p}))},o=(f,p)=>{n&&(e.droppable.exists(f)||A(),t.updateDroppableScroll({id:f,newScroll:p}))},a=(f,p)=>{n&&e.droppable.getById(f).callbacks.scroll(p)},l=()=>{if(!n)return;r.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},c=f=>{n||A();const p=n.critical.draggable;f.type==="ADDITION"&&Um(e,p,f.value)&&r.add(f.value),f.type==="REMOVAL"&&Um(e,p,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:a,updateDroppableScroll:o,startPublishing:f=>{n&&A();const p=e.draggable.getById(f.draggableId),g=e.droppable.getById(p.descriptor.droppableId),w={draggable:p.descriptor,droppable:g.descriptor},x=e.subscribe(c);return n={critical:w,unsubscribe:x},DP({critical:w,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:l}},Ow=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",EP=e=>{window.scrollBy(e.x,e.y)};const NP=Me(e=>rc(e).filter(t=>!(!t.isEnabled||!t.frame))),PP=(e,t)=>NP(t).find(r=>(r.frame||A(),pw(r.frame.pageMarginBox)(e)))||null;var TP=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return PP(e,n)};const ho={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var OP=(e,t,n=()=>ho)=>{const r=n(),s=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},Rw=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},vh=1,RP=(e,t,n=()=>ho)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return vh;const i=1-Rw({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},jP=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=t,a=i,c=Date.now()-o;if(c>=i)return e;if(c<s)return vh;const u=Rw({startOfRange:s,endOfRange:a,current:c}),d=e*r.ease(u);return Math.ceil(d)},Wm=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=RP(e,t,s);return i===0?0:r?Math.max(jP(i,n,s),vh):i},Ym=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=OP(e,r,i);return t[r.end]<t[r.start]?Wm({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*Wm({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},IP=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const MP=nw(e=>e===0?0:e);var jw=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=Ym({container:t,distanceToEdges:o,dragStartTime:e,axis:ch,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),l=Ym({container:t,distanceToEdges:o,dragStartTime:e,axis:aw,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=MP({x:l,y:a});if(sr(c,Ae))return null;const u=IP({container:t,subject:n,proposedScroll:c});return u?sr(u,Ae)?null:u:null};const AP=nw(e=>e===0?0:e>0?1:-1),yh=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=$e(t,r),i={x:e(s.x,n.x),y:e(s.y,n.y)};return sr(i,Ae)?null:i}})(),Iw=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=AP(n),i=yh({max:r,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},wh=(e,t)=>Iw({current:e.scroll.current,max:e.scroll.max,change:t}),LP=(e,t)=>{if(!wh(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return yh({current:r,max:n,change:t})},xh=(e,t)=>{const n=e.frame;return n?Iw({current:n.scroll.current,max:n.scroll.max,change:t}):!1},FP=(e,t)=>{const n=e.frame;return!n||!xh(e,t)?null:yh({current:n.scroll.current,max:n.scroll.max,change:t})};var $P=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=jw({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&wh(e,o)?o:null},BP=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const a=jw({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&xh(e,a)?a:null},Hm=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,f=$P({dragStartTime:t,viewport:d,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){r(f);return}}const c=TP({center:o,destination:mt(e.impact),droppables:e.dimensions.droppables});if(!c)return;const u=BP({dragStartTime:t,droppable:c,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});u&&s(c.descriptor.id,u)},UP=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ho})=>{const r=ao(e),s=ao(t);let i=null;const o=c=>{i||A();const{shouldUseTimeDampening:u,dragStartTime:d}=i;Hm({state:c,scrollWindow:r,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:c=>{i&&A();const u=Date.now();let d=!1;const f=()=>{d=!0};Hm({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:u,shouldUseTimeDampening:d},d&&o(c)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:o}},WP=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,l)=>{const c=$e(a.current.client.selection,l);e({client:c})},s=(a,l)=>{if(!xh(a,l))return l;const c=FP(a,l);if(!c)return t(a.descriptor.id,l),null;const u=ht(l,c);return t(a.descriptor.id,u),ht(l,u)},i=(a,l,c)=>{if(!a||!wh(l,c))return c;const u=LP(l,c);if(!u)return n(c),null;const d=ht(c,u);return n(d),ht(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=mt(a.impact);c||A();const u=s(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,f=i(a.isWindowScrollAllowed,d,u);f&&r(a,f)}},YP=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=UP({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=WP({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&i(l)}},start:s.start,stop:s.stop}};const Ms="data-rfd",As=(()=>{const e=`${Ms}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),$d=(()=>{const e=`${Ms}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),HP=(()=>{const e=`${Ms}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),zm={contextId:`${Ms}-scroll-container-context-id`},zP=e=>t=>`[${t}="${e}"]`,mi=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),VP="pointer-events: none;";var GP=e=>{const t=zP(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(As.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:VP,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${Ui.outOfTheWay};
    `;return{selector:t($d.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(HP.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:mi(o,"always"),resting:mi(o,"resting"),dragging:mi(o,"dragging"),dropAnimating:mi(o,"dropAnimating"),userCancel:mi(o,"userCancel")}};const gt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,du=()=>{const e=document.querySelector("head");return e||A(),e},Vm=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function qP(e,t){const n=ee(()=>GP(e),[e]),r=b.useRef(null),s=b.useRef(null),i=G(Me(d=>{const f=s.current;f||A(),f.textContent=d}),[]),o=G(d=>{const f=r.current;f||A(),f.textContent=d},[]);gt(()=>{!r.current&&!s.current||A();const d=Vm(t),f=Vm(t);return r.current=d,s.current=f,d.setAttribute(`${Ms}-always`,e),f.setAttribute(`${Ms}-dynamic`,e),du().appendChild(d),du().appendChild(f),o(n.always),i(n.resting),()=>{const p=g=>{const w=g.current;w||A(),du().removeChild(w),g.current=null};p(r),p(s)}},[t,o,i,n.always,n.resting,e]);const a=G(()=>i(n.dragging),[i,n.dragging]),l=G(d=>{if(d==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),c=G(()=>{s.current&&i(n.resting)},[i,n.resting]);return ee(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function Mw(e,t){return Array.from(e.querySelectorAll(t))}var Aw=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ac(e){return e instanceof Aw(e).HTMLElement}function KP(e,t){const n=`[${As.contextId}="${e}"]`,r=Mw(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(As.draggableId)===t);return!s||!ac(s)?null:s}function QP(e){const t=b.useRef({}),n=b.useRef(null),r=b.useRef(null),s=b.useRef(!1),i=G(function(f,p){const g={id:f,focus:p};return t.current[f]=g,function(){const x=t.current;x[f]!==g&&delete x[f]}},[]),o=G(function(f){const p=KP(e,f);p&&p!==document.activeElement&&p.focus()},[e]),a=G(function(f,p){n.current===f&&(n.current=p)},[]),l=G(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=n.current;f&&o(f)}))},[o]),c=G(function(f){n.current=null;const p=document.activeElement;p&&p.getAttribute(As.draggableId)===f&&(n.current=f)},[]);return gt(()=>(s.current=!0,function(){s.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),ee(()=>({register:i,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[i,c,l,a])}function JP(){const e={draggables:{},droppables:{}},t=[];function n(d){return t.push(d),function(){const p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function r(d){t.length&&t.forEach(f=>f(d))}function s(d){return e.draggables[d]||null}function i(d){const f=s(d);return f||A(),f}const o={register:d=>{e.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,f)=>{const p=e.draggables[f.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const f=d.descriptor.id,p=s(f);p&&d.uniqueId===p.uniqueId&&(delete e.draggables[f],e.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:i,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(e.draggables).filter(f=>f.descriptor.type===d)};function a(d){return e.droppables[d]||null}function l(d){const f=a(d);return f||A(),f}const c={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const f=a(d.descriptor.id);f&&d.uniqueId===f.uniqueId&&delete e.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(e.droppables).filter(f=>f.descriptor.type===d)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:c,subscribe:n,clean:u}}function XP(){const e=ee(JP,[]);return b.useEffect(()=>function(){e.clean()},[e]),e}var bh=T.createContext(null),gl=()=>{const e=document.body;return e||A(),e};const ZP={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},eT=e=>`rfd-announcement-${e}`;function tT(e){const t=ee(()=>eT(e),[e]),n=b.useRef(null);return b.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),fl(i.style,ZP),gl().appendChild(i),function(){setTimeout(function(){const l=gl();l.contains(i)&&l.removeChild(i),i===n.current&&(n.current=null)})}},[t]),G(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const nT={separator:"::"};function _h(e,t=nT){const n=T.useId();return ee(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function rT({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function sT({contextId:e,text:t}){const n=_h("hidden-text",{separator:"-"}),r=ee(()=>rT({contextId:e,uniqueId:n}),[n,e]);return b.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",gl().appendChild(i),function(){const a=gl();a.contains(i)&&a.removeChild(i)}},[r,t]),r}var lc=T.createContext(null);function Lw(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),t}function iT(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&A();const a={abandon:o};return e=a,a}function s(){e||A(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:i}}function po(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const oT=9,aT=13,Sh=27,Fw=32,lT=33,cT=34,uT=35,dT=36,fT=37,hT=38,pT=39,mT=40,gT={[aT]:!0,[oT]:!0};var $w=e=>{gT[e.keyCode]&&e.preventDefault()};const cc=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),Bw=0,Gm=5;function vT(e,t){return Math.abs(t.x-e.x)>=Gm||Math.abs(t.y-e.y)>=Gm}const qm={type:"IDLE"};function yT({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:a}=s;if(i!==Bw)return;const l={x:o,y:a},c=n();if(c.type==="DRAGGING"){s.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&A();const u=c.point;if(!vT(u,l))return;s.preventDefault();const d=c.actions.fluidLift(l);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===Sh){s.preventDefault(),e();return}$w(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&A(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:cc,fn:e}]}function wT(e){const t=b.useRef(qm),n=b.useRef(rr),r=ee(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==Bw||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const f=e.findClosestDraggableId(d);if(!f)return;const p=e.tryGetLock(f,o,{sourceEvent:d});if(!p)return;d.preventDefault();const g={x:d.clientX,y:d.clientY};n.current(),c(p,g)}}),[e]),s=ee(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=e.findClosestDraggableId(u);if(!d)return;const f=e.findOptionsForDraggable(d);f&&(f.shouldRespectForcePress||e.canGetLock(d)&&u.preventDefault())}}),[e]),i=G(function(){const d={passive:!1,capture:!0};n.current=Pt(window,[s,r],d)},[s,r]),o=G(()=>{t.current.type!=="IDLE"&&(t.current=qm,n.current(),i())},[i]),a=G(()=>{const u=t.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),l=G(function(){const d={capture:!0,passive:!1},f=yT({cancel:a,completed:o,getPhase:()=>t.current,setPhase:p=>{t.current=p}});n.current=Pt(window,f,d)},[a,o]),c=G(function(d,f){t.current.type!=="IDLE"&&A(),t.current={type:"PENDING",point:f,actions:d},l()},[l]);gt(function(){return i(),function(){n.current()}},[i])}function xT(){}const bT={[cT]:!0,[lT]:!0,[dT]:!0,[uT]:!0};function _T(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Sh){s.preventDefault(),n();return}if(s.keyCode===Fw){s.preventDefault(),r();return}if(s.keyCode===mT){s.preventDefault(),e.moveDown();return}if(s.keyCode===hT){s.preventDefault(),e.moveUp();return}if(s.keyCode===pT){s.preventDefault(),e.moveRight();return}if(s.keyCode===fT){s.preventDefault(),e.moveLeft();return}if(bT[s.keyCode]){s.preventDefault();return}$w(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:cc,fn:n}]}function ST(e){const t=b.useRef(xT),n=ee(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Fw)return;const o=e.findClosestDraggableId(i);if(!o)return;const a=e.tryGetLock(o,u,{sourceEvent:i});if(!a)return;i.preventDefault();let l=!0;const c=a.snapLift();t.current();function u(){l||A(),l=!1,t.current(),r()}t.current=Pt(window,_T(c,u),{capture:!0,passive:!1})}}),[e]),r=G(function(){const i={passive:!1,capture:!0};t.current=Pt(window,[n],i)},[n]);gt(function(){return r(),function(){t.current()}},[r])}const fu={type:"IDLE"},kT=120,DT=.15;function CT({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Sh&&n.preventDefault(),e()}},{eventName:cc,fn:e}]}function ET({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],a={x:i,y:o};r.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&A();const i=r.touches[0];if(!i||!(i.force>=DT))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:cc,fn:e}]}function NT(e){const t=b.useRef(fu),n=b.useRef(rr),r=G(function(){return t.current},[]),s=G(function(p){t.current=p},[]),i=ee(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const w=e.tryGetLock(g,a,{sourceEvent:p});if(!w)return;const x=p.touches[0],{clientX:y,clientY:m}=x,v={x:y,y:m};n.current(),d(w,v)}}),[e]),o=G(function(){const p={capture:!0,passive:!1};n.current=Pt(window,[i],p)},[i]),a=G(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(fu),n.current(),o())},[o,s]),l=G(()=>{const f=t.current;a(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[a]),c=G(function(){const p={capture:!0,passive:!1},g={cancel:l,completed:a,getPhase:r},w=Pt(window,ET(g),p),x=Pt(window,CT(g),p);n.current=function(){w(),x()}},[l,r,a]),u=G(function(){const p=r();p.type!=="PENDING"&&A();const g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[r,s]),d=G(function(p,g){r().type!=="IDLE"&&A();const w=setTimeout(u,kT);s({type:"PENDING",point:g,actions:p,longPressTimerId:w}),c()},[c,r,s,u]);gt(function(){return o(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(fu))}},[r,o,s]),gt(function(){return Pt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const PT=["input","button","textarea","select","option","optgroup","video","audio"];function Uw(e,t){if(t==null)return!1;if(PT.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:Uw(e,t.parentElement)}function TT(e,t){const n=t.target;return ac(n)?Uw(e,n):!1}var OT=e=>Wt(e.getBoundingClientRect()).center;function RT(e){return e instanceof Aw(e).Element}const jT=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function Ww(e,t){return e==null?null:e[jT](t)?e:Ww(e.parentElement,t)}function IT(e,t){return e.closest?e.closest(t):Ww(e,t)}function MT(e){return`[${As.contextId}="${e}"]`}function AT(e,t){const n=t.target;if(!RT(n))return null;const r=MT(e),s=IT(n,r);return!s||!ac(s)?null:s}function LT(e,t){const n=AT(e,t);return n?n.getAttribute(As.draggableId):null}function FT(e,t){const n=`[${$d.contextId}="${e}"]`,s=Mw(document,n).find(i=>i.getAttribute($d.id)===t);return!s||!ac(s)?null:s}function $T(e){e.preventDefault()}function ra({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function Yw({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!Ow(t.getState(),r))}function BT({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!Yw({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const l=r.draggable.getById(s),c=FT(t,l.descriptor.id);if(!c||o&&!l.options.canDragInteractiveElements&&TT(c,o))return null;const u=e.claim(i||rr);let d="PRE_DRAG";function f(){return l.options.shouldRespectForcePress}function p(){return e.isActive(u)}function g(S,k){ra({expected:S,phase:d,isLockActive:p,shouldWarn:!0})&&n.dispatch(k())}const w=g.bind(null,"DRAGGING");function x(S){function k(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(k(),A()),n.dispatch(IN(S.liftActionArgs)),d="DRAGGING";function C(E,N={shouldBlockNextClick:!1}){if(S.cleanup(),N.shouldBlockNextClick){const P=Pt(window,[{eventName:"click",fn:$T,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}k(),n.dispatch(Sw({reason:E}))}return{isActive:()=>ra({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:f,drop:E=>C("DROP",E),cancel:E=>C("CANCEL",E),...S.actions}}function y(S){const k=ao(E=>{w(()=>_w({client:E}))});return{...x({liftActionArgs:{id:s,clientSelection:S,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function m(){const S={moveUp:()=>w(YN),moveRight:()=>w(zN),moveDown:()=>w(HN),moveLeft:()=>w(VN)};return x({liftActionArgs:{id:s,clientSelection:OT(c),movementMode:"SNAP"},cleanup:rr,actions:S})}function v(){ra({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>ra({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:y,snapLift:m,abort:v}}const UT=[wT,ST,NT];function WT({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?UT:[],...r||[]],o=b.useState(()=>iT())[0],a=G(function(x,y){po(x)&&!po(y)&&o.tryAbandon()},[o]);gt(function(){let x=t.getState();return t.subscribe(()=>{const m=t.getState();a(x,m),x=m})},[o,t,a]),gt(()=>o.tryAbandon,[o.tryAbandon]);const l=G(w=>Yw({lockAPI:o,registry:n,store:t,draggableId:w}),[o,n,t]),c=G((w,x,y)=>BT({lockAPI:o,registry:n,contextId:e,store:t,draggableId:w,forceSensorStop:x||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,o,n,t]),u=G(w=>LT(e,w),[e]),d=G(w=>{const x=n.draggable.findById(w);return x?x.options:null},[n.draggable]),f=G(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(ph()))},[o,t]),p=G(()=>o.isClaimed(),[o]),g=ee(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:p}),[l,c,u,d,f,p]);for(let w=0;w<i.length;w++)i[w](g)}const YT=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};_o.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),HT=e=>({...ho,...e.autoScrollerOptions,durationDampening:{...ho.durationDampening,...e.autoScrollerOptions}});function gi(e){return e.current||A(),e.current}function zT(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=e,o=b.useRef(null),a=Lw(e),l=G(()=>YT(a.current),[a]),c=G(()=>HT(a.current),[a]),u=tT(t),d=sT({contextId:t,text:i}),f=qP(t,s),p=G(P=>{gi(o).dispatch(P)},[]),g=ee(()=>_m({publishWhileDragging:AN,updateDroppableScroll:FN,updateDroppableIsEnabled:$N,updateDroppableIsCombineEnabled:BN,collectionStarting:LN},p),[p]),w=XP(),x=ee(()=>CP(w,g),[w,g]),y=ee(()=>YP({scrollWindow:EP,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:c,..._m({move:_w},p)}),[x.scrollDroppable,p,c]),m=QP(t),v=ee(()=>_P({announce:u,autoScroller:y,dimensionMarshal:x,focusMarshal:m,getResponders:l,styleMarshal:f}),[u,y,x,m,l,f]);o.current=v;const _=G(()=>{const P=gi(o);P.getState().phase!=="IDLE"&&P.dispatch(ph())},[]),S=G(()=>{const P=gi(o).getState();return P.phase==="DROP_ANIMATING"?!0:P.phase==="IDLE"?!1:P.isDragging},[]),k=ee(()=>({isDragging:S,tryAbort:_}),[S,_]);n(k);const C=G(P=>Ow(gi(o).getState(),P),[]),E=G(()=>kr(gi(o).getState()),[]),N=ee(()=>({marshal:x,focus:m,contextId:t,canLift:C,isMovementAllowed:E,dragHandleUsageInstructionsId:d,registry:w}),[t,x,d,m,C,E,w]);return WT({contextId:t,store:v,registry:w,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(()=>_,[_]),T.createElement(lc.Provider,{value:N},T.createElement(mE,{context:bh,store:v},e.children))}function VT(){return T.useId()}function GT(e){const t=VT(),n=e.dragHandleUsageInstructions||Pa.dragHandleUsageInstructions;return T.createElement(SE,null,r=>T.createElement(zT,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Km={dragging:5e3,dropAnimating:4500},qT=(e,t)=>t?Ui.drop(t.duration):e?Ui.snap:Ui.fluid,KT=(e,t)=>{if(e)return t?fo.opacity.drop:fo.opacity.combining},QT=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function JT(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:i}=e,o=!!s,a=QT(e),l=!!i,c=l?Ld.drop(r,o):Ld.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:qT(a,i),transform:c,opacity:KT(o,l),zIndex:l?Km.dropAnimating:Km.dragging,pointerEvents:"none"}}function XT(e){return{transform:Ld.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function ZT(e){return e.type==="DRAGGING"?JT(e):XT(e)}function eO(e,t,n=Ae){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=Qy(s,r),o=dl(i,n),a={client:i,tagName:t.tagName.toLowerCase(),display:r.display},l={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:i,page:o}}function tO(e){const t=_h("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}=e,l=ee(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}),[i,a,o]),c=G(p=>{const g=s();return g||A(),eO(n,g,p)},[n,s]),u=ee(()=>({uniqueId:t,descriptor:n,options:l,getDimension:c}),[n,c,l,t]),d=b.useRef(u),f=b.useRef(!0);gt(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),gt(()=>{if(f.current){f.current=!1;return}const p=d.current;d.current=u,r.draggable.update(u,p)},[u,r.draggable])}var kh=T.createContext(null);function vl(e){const t=b.useContext(e);return t||A(),t}function nO(e){e.preventDefault()}const rO=e=>{const t=b.useRef(null),n=G((k=null)=>{t.current=k},[]),r=G(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=vl(lc),{type:a,droppableId:l}=vl(kh),c=ee(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:u,draggableId:d,isEnabled:f,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:w,mapped:x,dropAnimationFinished:y}=e;if(!w){const k=ee(()=>({descriptor:c,registry:o,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:f}),[c,o,r,g,p,f]);tO(k)}const m=ee(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:nO}:null,[s,i,d,f]),v=G(k=>{x.type==="DRAGGING"&&x.dropping&&k.propertyName==="transform"&&_o.flushSync(y)},[y,x]),_=ee(()=>{const k=ZT(x),C=x.type==="DRAGGING"&&x.dropping?v:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:k,onTransitionEnd:C},dragHandleProps:m}},[s,m,d,x,v,n]),S=ee(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return T.createElement(T.Fragment,null,u(_,x.snapshot,S))};var Hw=(e,t)=>e===t,zw=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const sO=e=>e.combine?e.combine.draggableId:null,iO=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function oO(){const e=Me((s,i)=>({x:s,y:i})),t=Me((s,i,o=null,a=null,l=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:o,combineWith:a,combineTargetFor:null})),n=Me((s,i,o,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:i,offset:s,dimension:o,forceShouldAnimate:u,snapshot:t(i,a,l,c,null)}}));return(s,i)=>{if(po(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,a=s.dimensions.draggables[i.draggableId],l=mt(s.impact),c=iO(s.impact),u=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,a,i.isClone,l,c,u)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const a=i.isClone,l=s.dimensions.draggables[i.draggableId],c=o.result,u=c.mode,d=zw(c),f=sO(c),g={duration:s.dropDuration,curve:gh.drop,moveTo:s.newHomeClientOffset,opacity:f?fo.opacity.drop:null,scale:f?fo.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:g,draggingOver:d,combineWith:f,mode:u,forceShouldAnimate:null,snapshot:t(u,a,d,f,g)}}}return null}}function Vw(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const aO={mapped:{type:"SECONDARY",offset:Ae,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Vw(null)}};function lO(){const e=Me((o,a)=>({x:o,y:a})),t=Me(Vw),n=Me((o,a=null,l)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),r=o=>o?n(Ae,o,!0):null,s=(o,a,l,c)=>{const u=l.displaced.visible[o],d=!!(c.inVirtualList&&c.effected[o]),f=sc(l),p=f&&f.draggableId===o?a:null;if(!u){if(!d)return r(p);if(l.displaced.invisible[o])return null;const x=Zs(c.displacedBy.point),y=e(x.x,x.y);return n(y,p,!0)}if(d)return r(p);const g=l.displacedBy.point,w=e(g.x,g.y);return n(w,p,u.shouldAnimate)};return(o,a)=>{if(po(o))return o.critical.draggable.id===a.draggableId?null:s(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const l=o.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const cO=()=>{const e=oO(),t=lO();return(r,s)=>e(r,s)||t(r,s)||aO},uO={dropAnimationFinished:kw},dO=Ky(cO,uO,null,{context:bh,areStatePropsEqual:Hw})(rO);function Gw(e){return vl(kh).isUsingCloneFor===e.draggableId&&!e.isClone?null:T.createElement(dO,e)}function fO(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return T.createElement(Gw,fl({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const qw=e=>t=>e===t,hO=qw("scroll"),pO=qw("auto"),Qm=(e,t)=>t(e.overflowX)||t(e.overflowY),mO=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Qm(n,hO)||Qm(n,pO)},gO=()=>!1,Kw=e=>e==null?null:e===document.body?gO()?e:null:e===document.documentElement?null:mO(e)?e:Kw(e.parentElement);var Bd=e=>({x:e.scrollLeft,y:e.scrollTop});const Qw=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Qw(e.parentElement):!1;var vO=e=>{const t=Kw(e),n=Qw(e);return{closestScrollable:t,isFixedOnPage:n}},yO=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:o,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:f,client:p}=a,g=Nw({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:f,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:g,diff:{value:Ae,displacement:Ae}}}})(),c=s==="vertical"?ch:aw,u=Is({page:o,withPlaceholder:null,axis:c,frame:l});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:t,client:i,page:o,frame:l,subject:u}};const wO=(e,t)=>{const n=Jy(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,o=s+t.scrollWidth,l=ih({top:r,right:o,bottom:i,left:s},n.border);return oh({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var xO=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:a})=>{const l=n.closestScrollable,c=wO(e,l),u=dl(c,r),d=(()=>{if(!l)return null;const p=Jy(l),g={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:dl(p,r),scroll:Bd(l),scrollSize:g,shouldClipSubject:a}})();return yO({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:c,page:u,closest:d})};const bO={passive:!1},_O={passive:!0};var Jm=e=>e.shouldPublishImmediately?bO:_O;const sa=e=>e&&e.env.closestScrollable||null;function SO(e){const t=b.useRef(null),n=vl(lc),r=_h("droppable"),{registry:s,marshal:i}=n,o=Lw(e),a=ee(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=b.useRef(a),c=ee(()=>Me((_,S)=>{t.current||A();const k={x:_,y:S};i.updateDroppableScroll(a.id,k)}),[a.id,i]),u=G(()=>{const _=t.current;return!_||!_.env.closestScrollable?Ae:Bd(_.env.closestScrollable)},[]),d=G(()=>{const _=u();c(_.x,_.y)},[u,c]),f=ee(()=>ao(d),[d]),p=G(()=>{const _=t.current,S=sa(_);if(_&&S||A(),_.scrollOptions.shouldPublishImmediately){d();return}f()},[f,d]),g=G((_,S)=>{t.current&&A();const k=o.current,C=k.getDroppableRef();C||A();const E=vO(C),N={ref:C,descriptor:a,env:E,scrollOptions:S};t.current=N;const P=xO({ref:C,descriptor:a,env:E,windowScroll:_,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),I=E.closestScrollable;return I&&(I.setAttribute(zm.contextId,n.contextId),I.addEventListener("scroll",p,Jm(N.scrollOptions))),P},[n.contextId,a,p,o]),w=G(()=>{const _=t.current,S=sa(_);return _&&S||A(),Bd(S)},[]),x=G(()=>{const _=t.current;_||A();const S=sa(_);t.current=null,S&&(f.cancel(),S.removeAttribute(zm.contextId),S.removeEventListener("scroll",p,Jm(_.scrollOptions)))},[p,f]),y=G(_=>{const S=t.current;S||A();const k=sa(S);k||A(),k.scrollTop+=_.y,k.scrollLeft+=_.x},[]),m=ee(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:w,dragStopped:x,scroll:y}),[x,g,w,y]),v=ee(()=>({uniqueId:r,descriptor:a,callbacks:m}),[m,a,r]);gt(()=>(l.current=v.descriptor,s.droppable.register(v),()=>{t.current&&x(),s.droppable.unregister(v)}),[m,a,x,v,i,s.droppable]),gt(()=>{t.current&&i.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),gt(()=>{t.current&&i.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function hu(){}const Xm={width:0,height:0,margin:TE},kO=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Xm:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},DO=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=kO({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ui.placeholder:null}},CO=e=>{const t=b.useRef(null),n=G(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:o}=e,[a,l]=b.useState(e.animate==="open");b.useEffect(()=>a?r!=="open"?(n(),l(!1),hu):t.current?hu:(t.current=setTimeout(()=>{t.current=null,l(!1)}),n):hu,[r,a,n]);const c=G(d=>{d.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),u=DO({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return T.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:c,ref:e.innerRef})};var EO=T.memo(CO);class NO extends T.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const PO=e=>{const t=b.useContext(lc);t||A();const{contextId:n,isMovementAllowed:r}=t,s=b.useRef(null),i=b.useRef(null),{children:o,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:f,isCombineEnabled:p,snapshot:g,useClone:w,updateViewportMaxScroll:x,getContainerForClone:y}=e,m=G(()=>s.current,[]),v=G((I=null)=>{s.current=I},[]);G(()=>i.current,[]);const _=G((I=null)=>{i.current=I},[]),S=G(()=>{r()&&x({maxScroll:Tw()})},[r,x]);SO({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:m});const k=ee(()=>T.createElement(NO,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:I,data:$,animate:M})=>T.createElement(EO,{placeholder:$,onClose:I,innerRef:_,animate:M,contextId:n,onTransitionEnd:S})),[n,S,e.placeholder,e.shouldAnimatePlaceholder,_]),C=ee(()=>({innerRef:v,placeholder:k,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,k,v]),E=w?w.dragging.draggableId:null,N=ee(()=>({droppableId:a,type:l,isUsingCloneFor:E}),[a,E,l]);function P(){if(!w)return null;const{dragging:I,render:$}=w,M=T.createElement(Gw,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(U,H)=>$(U,H,I));return ty.createPortal(M,y())}return T.createElement(kh.Provider,{value:N},o(C,g),P())};function TO(){return document.body||A(),document.body}const Zm={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:TO},Jw=e=>{let t={...e},n;for(n in Zm)e[n]===void 0&&(t={...t,[n]:Zm[n]});return t},pu=(e,t)=>e===t.droppable.type,eg=(e,t)=>t.draggables[e.draggable.id],OO=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Me(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=Me((i,o,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===i){const g=u?{render:u,dragging:n(c.descriptor)}:null,w={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:w,useClone:g}}if(!o)return t;if(!l)return e;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(i,o)=>{const a=Jw(o),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if(po(i)){const f=i.critical;if(!pu(c,f))return t;const p=eg(f,i.dimensions),g=mt(i.impact)===l;return r(l,u,g,g,p,d)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!pu(c,f.critical))return t;const p=eg(f.critical,i.dimensions);return r(l,u,zw(f.result)===l,mt(f.impact)===l,p,d)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!pu(c,f.critical))return t;const p=mt(f.impact)===l,g=!!(f.impact.at&&f.impact.at.type==="COMBINE"),w=f.critical.droppable.id===l;return p?g?e:t:w?e:t}return t}},RO={updateViewportMaxScroll:WN},jO=Ky(OO,RO,(e,t,n)=>({...Jw(n),...e,...t}),{context:bh,areStatePropsEqual:Hw})(PO);function IO(){const[e,t]=b.useState([]),[n,r]=b.useState([]),[s,i]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{console.log(" Fetching kanban data (safe version)...");const{data:a,error:l}=await q.from("deal_stage").select("id, label, description, sort_order, active").eq("active",!0).order("sort_order",{ascending:!0});if(console.log(" Stages:",a),l)throw console.error(" Stage error:",l),l;const{data:c,error:u}=await q.from("deal").select("id, deal_name, fee, deal_value, closed_date, stage_id, kanban_position, client_id, created_at").order("kanban_position",{ascending:!0});if(console.log(" Deals:",(c==null?void 0:c.length)||0,"deals fetched"),u)throw console.error(" Deal error:",u),u;const{data:d,error:f}=await q.from("client").select("id, client_name");console.log(" Clients:",(d==null?void 0:d.length)||0,"clients fetched"),f&&console.warn(" Client error (non-fatal):",f);const p=new Map;d==null||d.forEach(v=>{p.set(v.id,v.client_name)});const g=c.map(v=>({id:v.id,deal_name:v.deal_name,fee:v.fee,deal_value:v.deal_value,closed_date:v.closed_date,stage_id:v.stage_id,kanban_position:v.kanban_position,client_name:v.client_id&&p.get(v.client_id)||null,created_at:v.created_at})),w=new Map;a.forEach(v=>{w.set(v.id,v.label)});const x=new Set(a.map(v=>v.id)),y=new Date;y.setFullYear(y.getFullYear()-2);const m=g.filter(v=>!v.stage_id||!x.has(v.stage_id)?!1:w.get(v.stage_id)==="Lost"?v.created_at?new Date(v.created_at)>=y:!1:!0);console.log(" Final cards:",m.length),console.log(" Final columns:",a.length),t(a||[]),r(m)}catch(a){console.error(" Error:",a)}finally{i(!1)}})()},[]),{columns:e,cards:n,loading:s}}function MO(){const{columns:e,cards:t,loading:n}=IO(),[r,s]=b.useState([]);b.useEffect(()=>{s(t)},[t]),b.useEffect(()=>{document.title="Master Pipeline"},[]);const i=async l=>{const{destination:c,draggableId:u}=l;if(!c)return;const d=c.droppableId,f=[...r],p=f.find(x=>x.id===u);if(!p)return;p.stage_id=d;const g=f.filter(x=>x.stage_id===d&&x.id!==u).sort((x,y)=>(x.kanban_position??0)-(y.kanban_position??0));g.splice(c.index,0,p),g.forEach((x,y)=>{x.kanban_position=y}),s(f);const w=g.map(x=>q.from("deal").update({stage_id:x.stage_id,kanban_position:x.kanban_position}).eq("id",x.id));await Promise.all(w)},o=(l,c=0)=>typeof l=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:c,maximumFractionDigits:c}).format(l):"--",a=new Date().getFullYear();return n?h.jsx("div",{className:"p-4",children:"Loading..."}):h.jsxs("div",{className:"p-4 overflow-x-auto bg-gray-100 min-h-screen",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Master Pipeline"}),h.jsx("div",{className:"flex min-w-max gap-[2px]",children:h.jsx(GT,{onDragEnd:i,children:e.map((l,c)=>{let u=r.filter(g=>g.stage_id===l.id).sort((g,w)=>(g.kanban_position??0)-(w.kanban_position??0));l.label==="Closed Paid"&&(u=u.filter(g=>g.closed_date?new Date(g.closed_date).getFullYear()===a:!1));const d=u.reduce((g,w)=>g+(w.fee??0),0),f=c===e.length-1,p=c===0;return h.jsx(jO,{droppableId:l.id,children:(g,w)=>h.jsxs("div",{ref:g.innerRef,...g.droppableProps,className:`relative min-w-[240px] max-w-[280px] bg-white shadow-sm flex flex-col ${w.isDraggingOver?"bg-blue-50":""}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`chevron-header ${p?"first":""} ${f?"last":""} flex items-center justify-center`,children:h.jsxs("div",{className:"text-center font-semibold text-sm",children:[l.label," (",u.length,")"]})}),h.jsx("div",{className:"bg-white text-center py-2 border-b",children:h.jsx("div",{className:"text-green-600 text-lg font-bold",children:o(d)})})]}),h.jsxs("div",{className:"p-2 flex-1",children:[u.map((x,y)=>h.jsx(fO,{draggableId:x.id,index:y,children:(m,v)=>h.jsxs("div",{ref:m.innerRef,...m.draggableProps,...m.dragHandleProps,className:`bg-white p-2 rounded shadow mb-2 border text-sm ${v.isDragging?"bg-yellow-100":""}`,children:[h.jsx("div",{className:"font-semibold",children:h.jsx(Kl,{to:`/deal/${x.id}`,className:"text-blue-600 hover:underline",children:x.deal_name||"Untitled Deal"})}),h.jsx("div",{className:"text-gray-700",children:o(x.fee)}),h.jsx("div",{className:"text-gray-500 text-xs",children:x.client_name||"No Client"}),h.jsx("div",{className:"text-gray-800",children:o(x.deal_value)})]})},x.id)),g.placeholder]})]})},l.id)})})})]})}function mu(e,t=0){return e==null||isNaN(e)?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function AO(e,t=2){return typeof e!="number"||isNaN(e)?"":`${e.toFixed(t)}%`}function LO(e){return typeof e!="number"?"":Math.round(e)+"%"}function ia({label:e,value:t,onChange:n,format:r,editingField:s,setEditingField:i,fieldKey:o}){const a=s===o,l=b.useRef(null);b.useEffect(()=>{a&&l.current&&l.current.focus()},[a]);const c=()=>{i(null)};return h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a?h.jsx("input",{ref:l,type:"number",value:t??"",onChange:u=>n(u.target.value),onBlur:c,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):h.jsx("div",{onClick:()=>i(o),className:"mt-1 p-2 bg-gray-100 rounded text-sm cursor-pointer",children:t==null||t===""?"":r(t)})]})}function Xw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Xw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Be(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Xw(e))&&(r&&(r+=" "),r+=t);return r}const Zw=6048e5,FO=864e5,uc=6e4,dc=36e5,$O=1e3,tg=Symbol.for("constructDateFrom");function ce(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&tg in e?e[tg](t):e instanceof Date?new e.constructor(t):new Date(t)}function V(e,t){return ce(t||e,e)}function zt(e,t,n){const r=V(e,n==null?void 0:n.in);return isNaN(t)?ce((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function qt(e,t,n){const r=V(e,n==null?void 0:n.in);if(isNaN(t))return ce((n==null?void 0:n.in)||e,NaN);if(!t)return r;const s=r.getDate(),i=ce((n==null?void 0:n.in)||e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function ex(e,t,n){return ce((n==null?void 0:n.in)||e,+V(e)+t)}function BO(e,t,n){return ex(e,t*dc,n)}let UO={};function Kr(){return UO}function jn(e,t){var a,l,c,u;const n=Kr(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=V(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Ls(e,t){return jn(e,{...t,weekStartsOn:1})}function tx(e,t){const n=V(e,t==null?void 0:t.in),r=n.getFullYear(),s=ce(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Ls(s),o=ce(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Ls(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function yl(e){const t=V(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function An(e,...t){const n=ce.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Yr(e,t){const n=V(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Fs(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t),i=Yr(r),o=Yr(s),a=+i-yl(i),l=+o-yl(o);return Math.round((a-l)/FO)}function WO(e,t){const n=tx(e,t),r=ce((t==null?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ls(r)}function Ud(e,t,n){const r=V(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*uc),r}function Dh(e,t,n){return qt(e,t*3,n)}function YO(e,t,n){return ex(e,t*1e3,n)}function wl(e,t,n){return zt(e,t*7,n)}function Sn(e,t,n){return qt(e,t*12,n)}function ng(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=ce.bind(null,s));const i=V(s,r);(!n||n<i||isNaN(+i))&&(n=i)}),ce(r,n||NaN)}function rg(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=ce.bind(null,s));const i=V(s,r);(!n||n>i||isNaN(+i))&&(n=i)}),ce(r,n||NaN)}function HO(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t);return+Yr(r)==+Yr(s)}function kn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xl(e){return!(!kn(e)&&typeof e!="number"||isNaN(+V(e)))}function bl(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function Ir(e,t){const n=V(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function _l(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=Ir(r)-Ir(s);return i*4+o}function Sl(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t);return r.getFullYear()-s.getFullYear()}function zO(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t),i=sg(r,s),o=Math.abs(Fs(r,s));r.setDate(r.getDate()-i*o);const a=+(sg(r,s)===-i),l=i*(o-a);return l===0?0:l}function sg(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function nx(e,t){const n=V(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function rx(e,t){const n=V(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Wd(e,t){const n=V(e,t==null?void 0:t.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function sx(e,t){const n=V(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function ix(e,t){const n=V(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function fc(e,t){const n=V(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function VO(e,t){var a,l,c,u;const n=Kr(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=V(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const GO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qO=(e,t,n)=>{let r;const s=GO[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const KO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XO={date:gu({formats:KO,defaultWidth:"full"}),time:gu({formats:QO,defaultWidth:"full"}),dateTime:gu({formats:JO,defaultWidth:"full"})},ZO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eR=(e,t,n,r)=>ZO[e];function vi(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=e.formattingValues[a]||e.formattingValues[o]}else{const o=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const tR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},lR={ordinalNumber:aR,era:vi({values:tR,defaultWidth:"wide"}),quarter:vi({values:nR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vi({values:rR,defaultWidth:"wide"}),day:vi({values:sR,defaultWidth:"wide"}),dayPeriod:vi({values:iR,defaultWidth:"wide",formattingValues:oR,defaultFormattingWidth:"wide"})};function yi(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?uR(a,d=>d.test(o)):cR(a,d=>d.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(o.length);return{value:c,rest:u}}}function cR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function uR(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function dR(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=t.slice(s.length);return{value:o,rest:a}}}const fR=/^(\d+)(th|st|nd|rd)?/i,hR=/\d+/i,pR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mR={any:[/^b/i,/^(a|c)/i]},gR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vR={any:[/1/i,/2/i,/3/i,/4/i]},yR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_R={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},SR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kR={ordinalNumber:dR({matchPattern:fR,parsePattern:hR,valueCallback:e=>parseInt(e,10)}),era:yi({matchPatterns:pR,defaultMatchWidth:"wide",parsePatterns:mR,defaultParseWidth:"any"}),quarter:yi({matchPatterns:gR,defaultMatchWidth:"wide",parsePatterns:vR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yi({matchPatterns:yR,defaultMatchWidth:"wide",parsePatterns:wR,defaultParseWidth:"any"}),day:yi({matchPatterns:xR,defaultMatchWidth:"wide",parsePatterns:bR,defaultParseWidth:"any"}),dayPeriod:yi({matchPatterns:_R,defaultMatchWidth:"any",parsePatterns:SR,defaultParseWidth:"any"})},ox={code:"en-US",formatDistance:qO,formatLong:XO,formatRelative:eR,localize:lR,match:kR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DR(e,t){const n=V(e,t==null?void 0:t.in);return Fs(n,fc(n))+1}function Ch(e,t){const n=V(e,t==null?void 0:t.in),r=+Ls(n)-+WO(n);return Math.round(r/Zw)+1}function Eh(e,t){var u,d,f,p;const n=V(e,t==null?void 0:t.in),r=n.getFullYear(),s=Kr(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=ce((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=jn(o,t),l=ce((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=jn(l,t);return+n>=+a?r+1:+n>=+c?r:r-1}function CR(e,t){var a,l,c,u;const n=Kr(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=Eh(e,t),i=ce((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),jn(i,t)}function ax(e,t){const n=V(e,t==null?void 0:t.in),r=+jn(n,t)-+CR(n,t);return Math.round(r/Zw)+1}function ae(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const $n={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ae(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ae(n+1,2)},d(e,t){return ae(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ae(e.getHours()%12||12,t.length)},H(e,t){return ae(e.getHours(),t.length)},m(e,t){return ae(e.getMinutes(),t.length)},s(e,t){return ae(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ae(s,t.length)}},ns={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ig={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return $n.y(e,t)},Y:function(e,t,n,r){const s=Eh(e,r),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return ae(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ae(i,t.length)},R:function(e,t){const n=tx(e);return ae(n,t.length)},u:function(e,t){const n=e.getFullYear();return ae(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ae(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ae(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return $n.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ae(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=ax(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ae(s,t.length)},I:function(e,t,n){const r=Ch(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ae(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):$n.d(e,t)},D:function(e,t,n){const r=DR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ae(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ae(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ae(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return ae(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=ns.noon:r===0?s=ns.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=ns.evening:r>=12?s=ns.afternoon:r>=4?s=ns.morning:s=ns.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $n.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):$n.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):$n.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):$n.s(e,t)},S:function(e,t){return $n.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return ag(r);case"XXXX":case"XX":return Dr(r);case"XXXXX":case"XXX":default:return Dr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ag(r);case"xxxx":case"xx":return Dr(r);case"xxxxx":case"xxx":default:return Dr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+og(r,":");case"OOOO":default:return"GMT"+Dr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+og(r,":");case"zzzz":default:return"GMT"+Dr(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return ae(r,t.length)},T:function(e,t,n){return ae(+e,t.length)}};function og(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+ae(i,2)}function ag(e,t){return e%60===0?(e>0?"-":"+")+ae(Math.abs(e)/60,2):Dr(e,t)}function Dr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=ae(Math.trunc(r/60),2),i=ae(r%60,2);return n+s+t+i}const lg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lx=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ER=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return lg(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",lg(r,t)).replace("{{time}}",lx(s,t))},Yd={p:lx,P:ER},NR=/^D+$/,PR=/^Y+$/,TR=["D","DD","YY","YYYY"];function cx(e){return NR.test(e)}function ux(e){return PR.test(e)}function Hd(e,t,n){const r=OR(e,t,n);if(console.warn(r),TR.includes(e))throw new RangeError(r)}function OR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,IR=/^'([^]*?)'?$/,MR=/''/g,AR=/[a-zA-Z]/;function zd(e,t,n){var u,d,f,p,g,w,x,y;const r=Kr(),s=(n==null?void 0:n.locale)??r.locale??ox,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,a=V(e,n==null?void 0:n.in);if(!xl(a))throw new RangeError("Invalid time value");let l=t.match(jR).map(m=>{const v=m[0];if(v==="p"||v==="P"){const _=Yd[v];return _(m,s.formatLong)}return m}).join("").match(RR).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:LR(m)};if(ig[v])return{isToken:!0,value:m};if(v.match(AR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&ux(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&cx(v))&&Hd(v,t,String(e));const _=ig[v[0]];return _(a,v,s.localize,c)}).join("")}function LR(e){const t=e.match(IR);return t?t[1].replace(MR,"'"):e}function cg(e,t){return V(e,t==null?void 0:t.in).getDate()}function FR(e,t){return V(e,t==null?void 0:t.in).getDay()}function $R(e,t){const n=V(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),i=ce(n,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function BR(){return Object.assign({},Kr())}function Dn(e,t){return V(e,t==null?void 0:t.in).getHours()}function UR(e,t){const n=V(e,t==null?void 0:t.in).getDay();return n===0?7:n}function Cn(e,t){return V(e,t==null?void 0:t.in).getMinutes()}function Ge(e,t){return V(e,t==null?void 0:t.in).getMonth()}function ir(e){return V(e).getSeconds()}function Vd(e){return+V(e)}function J(e,t){return V(e,t==null?void 0:t.in).getFullYear()}function ur(e,t){return+V(e)>+V(t)}function Hr(e,t){return+V(e)<+V(t)}function WR(e,t){return+V(e)==+V(t)}function YR(e,t){const n=HR(t)?new t(0):ce(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function HR(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const zR=10;class dx{constructor(){B(this,"subPriority",0)}validate(t,n){return!0}}class VR extends dx{constructor(t,n,r,s,i){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class GR extends dx{constructor(n,r){super();B(this,"priority",zR);B(this,"subPriority",-1);this.context=n||(s=>ce(r,s))}set(n,r){return r.timestampIsSet?n:ce(n,YR(n,this.context))}}class se{run(t,n,r,s){const i=this.parse(t,n,r,s);return i?{setter:new VR(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,n,r){return!0}}class qR extends se{constructor(){super(...arguments);B(this,"priority",140);B(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const ke={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},rn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function De(e,t){return e&&{value:t(e.value),rest:e.rest}}function ye(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function sn(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*dc+i*uc+o*$O),rest:t.slice(n[0].length)}}function fx(e){return ye(ke.anyDigitsSigned,e)}function _e(e,t){switch(e){case 1:return ye(ke.singleDigit,t);case 2:return ye(ke.twoDigits,t);case 3:return ye(ke.threeDigits,t);case 4:return ye(ke.fourDigits,t);default:return ye(new RegExp("^\\d{1,"+e+"}"),t)}}function kl(e,t){switch(e){case 1:return ye(ke.singleDigitSigned,t);case 2:return ye(ke.twoDigitsSigned,t);case 3:return ye(ke.threeDigitsSigned,t);case 4:return ye(ke.fourDigitsSigned,t);default:return ye(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Nh(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function hx(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=e>=i%100;s=e+o-(a?100:0)}return n?s:1-s}function px(e){return e%400===0||e%4===0&&e%100!==0}class KR extends se{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return De(_e(4,n),i);case"yo":return De(s.ordinalNumber(n,{unit:"year"}),i);default:return De(_e(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const a=hx(s.year,i);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class QR extends se{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return De(_e(4,n),i);case"Yo":return De(s.ordinalNumber(n,{unit:"year"}),i);default:return De(_e(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=Eh(n,i);if(s.isTwoDigitYear){const l=hx(s.year,o);return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),jn(n,i)}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),jn(n,i)}}class JR extends se{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return kl(r==="R"?4:r.length,n)}set(n,r,s){const i=ce(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Ls(i)}}class XR extends se{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return kl(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class ZR extends se{constructor(){super(...arguments);B(this,"priority",120);B(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return _e(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class ej extends se{constructor(){super(...arguments);B(this,"priority",120);B(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return _e(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class tj extends se{constructor(){super(...arguments);B(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);B(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return De(ye(ke.month,n),i);case"MM":return De(_e(2,n),i);case"Mo":return De(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class nj extends se{constructor(){super(...arguments);B(this,"priority",110);B(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return De(ye(ke.month,n),i);case"LL":return De(_e(2,n),i);case"Lo":return De(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function rj(e,t,n){const r=V(e,n==null?void 0:n.in),s=ax(r,n)-t;return r.setDate(r.getDate()-s*7),V(r,n==null?void 0:n.in)}class sj extends se{constructor(){super(...arguments);B(this,"priority",100);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return ye(ke.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return _e(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return jn(rj(n,s,i),i)}}function ij(e,t,n){const r=V(e,n==null?void 0:n.in),s=Ch(r,n)-t;return r.setDate(r.getDate()-s*7),r}class oj extends se{constructor(){super(...arguments);B(this,"priority",100);B(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return ye(ke.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return _e(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Ls(ij(n,s))}}const aj=[31,28,31,30,31,30,31,31,30,31,30,31],lj=[31,29,31,30,31,30,31,31,30,31,30,31];class cj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"subPriority",1);B(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return ye(ke.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return _e(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=px(s),o=n.getMonth();return i?r>=1&&r<=lj[o]:r>=1&&r<=aj[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class uj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"subpriority",1);B(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return ye(ke.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return _e(r.length,n)}}validate(n,r){const s=n.getFullYear();return px(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function Ph(e,t,n){var d,f,p,g;const r=Kr(),s=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,i=V(e,n==null?void 0:n.in),o=i.getDay(),l=(t%7+7)%7,c=7-s,u=t<0||t>6?t-(o+c)%7:(l+c)%7-(o+c)%7;return zt(i,u,n)}class dj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Ph(n,s,i),n.setHours(0,0,0,0),n}}class fj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return De(_e(r.length,n),o);case"eo":return De(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Ph(n,s,i),n.setHours(0,0,0,0),n}}class hj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return De(_e(r.length,n),o);case"co":return De(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Ph(n,s,i),n.setHours(0,0,0,0),n}}function pj(e,t,n){const r=V(e,n==null?void 0:n.in),s=UR(r,n),i=t-s;return zt(r,i,n)}class mj extends se{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return _e(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return De(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return De(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return De(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return De(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=pj(n,s),n.setHours(0,0,0,0),n}}class gj extends se{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Nh(s),0,0,0),n}}class vj extends se{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Nh(s),0,0,0),n}}class yj extends se{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Nh(s),0,0,0),n}}class wj extends se{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return ye(ke.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return _e(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class xj extends se{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return ye(ke.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return _e(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class bj extends se{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return ye(ke.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return _e(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class _j extends se{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return ye(ke.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return _e(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class Sj extends se{constructor(){super(...arguments);B(this,"priority",60);B(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return ye(ke.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return _e(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class kj extends se{constructor(){super(...arguments);B(this,"priority",50);B(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return ye(ke.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return _e(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class Dj extends se{constructor(){super(...arguments);B(this,"priority",30);B(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return De(_e(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class Cj extends se{constructor(){super(...arguments);B(this,"priority",10);B(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return sn(rn.basicOptionalMinutes,n);case"XX":return sn(rn.basic,n);case"XXXX":return sn(rn.basicOptionalSeconds,n);case"XXXXX":return sn(rn.extendedOptionalSeconds,n);case"XXX":default:return sn(rn.extended,n)}}set(n,r,s){return r.timestampIsSet?n:ce(n,n.getTime()-yl(n)-s)}}class Ej extends se{constructor(){super(...arguments);B(this,"priority",10);B(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return sn(rn.basicOptionalMinutes,n);case"xx":return sn(rn.basic,n);case"xxxx":return sn(rn.basicOptionalSeconds,n);case"xxxxx":return sn(rn.extendedOptionalSeconds,n);case"xxx":default:return sn(rn.extended,n)}}set(n,r,s){return r.timestampIsSet?n:ce(n,n.getTime()-yl(n)-s)}}class Nj extends se{constructor(){super(...arguments);B(this,"priority",40);B(this,"incompatibleTokens","*")}parse(n){return fx(n)}set(n,r,s){return[ce(n,s*1e3),{timestampIsSet:!0}]}}class Pj extends se{constructor(){super(...arguments);B(this,"priority",20);B(this,"incompatibleTokens","*")}parse(n){return fx(n)}set(n,r,s){return[ce(n,s),{timestampIsSet:!0}]}}const Tj={G:new qR,y:new KR,Y:new QR,R:new JR,u:new XR,Q:new ZR,q:new ej,M:new tj,L:new nj,w:new sj,I:new oj,d:new cj,D:new uj,E:new dj,e:new fj,c:new hj,i:new mj,a:new gj,b:new vj,B:new yj,h:new wj,H:new xj,K:new bj,k:new _j,m:new Sj,s:new kj,S:new Dj,X:new Cj,x:new Ej,t:new Nj,T:new Pj},Oj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jj=/^'([^]*?)'?$/,Ij=/''/g,Mj=/\S/,Aj=/[a-zA-Z]/;function Lj(e,t,n,r){var x,y,m,v,_,S,k,C;const s=()=>ce((r==null?void 0:r.in)||n,NaN),i=BR(),o=(r==null?void 0:r.locale)??i.locale??ox,a=(r==null?void 0:r.firstWeekContainsDate)??((y=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((S=(_=r==null?void 0:r.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??i.weekStartsOn??((C=(k=i.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??0;if(!t)return e?s():V(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},u=[new GR(r==null?void 0:r.in,n)],d=t.match(Rj).map(E=>{const N=E[0];if(N in Yd){const P=Yd[N];return P(E,o.formatLong)}return E}).join("").match(Oj),f=[];for(let E of d){!(r!=null&&r.useAdditionalWeekYearTokens)&&ux(E)&&Hd(E,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&cx(E)&&Hd(E,t,e);const N=E[0],P=Tj[N];if(P){const{incompatibleTokens:I}=P;if(Array.isArray(I)){const M=f.find(U=>I.includes(U.token)||U.token===N);if(M)throw new RangeError(`The format string mustn't contain \`${M.fullToken}\` and \`${E}\` at the same time`)}else if(P.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);f.push({token:N,fullToken:E});const $=P.run(e,E,o.match,c);if(!$)return s();u.push($.setter),e=$.rest}else{if(N.match(Aj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(E==="''"?E="'":N==="'"&&(E=Fj(E)),e.indexOf(E)===0)e=e.slice(E.length);else return s()}}if(e.length>0&&Mj.test(e))return s();const p=u.map(E=>E.priority).sort((E,N)=>N-E).filter((E,N,P)=>P.indexOf(E)===N).map(E=>u.filter(N=>N.priority===E).sort((N,P)=>P.subPriority-N.subPriority)).map(E=>E[0]);let g=V(n,r==null?void 0:r.in);if(isNaN(+g))return s();const w={};for(const E of p){if(!E.validate(g,c))return s();const N=E.set(g,w,c);Array.isArray(N)?(g=N[0],Object.assign(w,N[1])):g=N}return g}function Fj(e){return e.match(jj)[1].replace(Ij,"'")}function $j(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function Bj(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t);return+Wd(r)==+Wd(s)}function Uj(e,t,n){const[r,s]=An(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function mo(e,t,n){const r=+V(e,n==null?void 0:n.in),[s,i]=[+V(t.start,n==null?void 0:n.in),+V(t.end,n==null?void 0:n.in)].sort((o,a)=>o-a);return r>=s&&r<=i}function Wj(e,t,n){return zt(e,-t,n)}function mx(e,t){const n=()=>ce(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,s=Vj(e);let i;if(s.date){const c=Gj(s.date,r);i=qj(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const o=+i;let a=0,l;if(s.time&&(a=Kj(s.time),isNaN(a)))return n();if(s.timezone){if(l=Qj(s.timezone),isNaN(l))return n()}else{const c=new Date(o+a),u=V(0,t==null?void 0:t.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return V(o+a+l,t==null?void 0:t.in)}const oa={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Hj=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,zj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Vj(e){const t={},n=e.split(oa.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],oa.timeZoneDelimiter.test(t.date)&&(t.date=e.split(oa.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=oa.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function Gj(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function qj(e,t){if(t===null)return new Date(NaN);const n=e.match(Yj);if(!n)return new Date(NaN);const r=!!n[4],s=wi(n[1]),i=wi(n[2])-1,o=wi(n[3]),a=wi(n[4]),l=wi(n[5])-1;if(r)return tI(t,a,l)?Jj(t,a,l):new Date(NaN);{const c=new Date(0);return!Zj(t,i,o)||!eI(t,s)?new Date(NaN):(c.setUTCFullYear(t,i,Math.max(s,o)),c)}}function wi(e){return e?parseInt(e):1}function Kj(e){const t=e.match(Hj);if(!t)return NaN;const n=vu(t[1]),r=vu(t[2]),s=vu(t[3]);return nI(n,r,s)?n*dc+r*uc+s*1e3:NaN}function vu(e){return e&&parseFloat(e.replace(",","."))||0}function Qj(e){if(e==="Z")return 0;const t=e.match(zj);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return rI(r,s)?n*(r*dc+s*uc):NaN}function Jj(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const Xj=[31,null,31,30,31,30,31,31,30,31,30,31];function gx(e){return e%400===0||e%4===0&&e%100!==0}function Zj(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Xj[t]||(gx(e)?29:28))}function eI(e,t){return t>=1&&t<=(gx(e)?366:365)}function tI(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function nI(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function rI(e,t){return t>=0&&t<=59}function kt(e,t,n){const r=V(e,n==null?void 0:n.in),s=r.getFullYear(),i=r.getDate(),o=ce((n==null?void 0:n.in)||e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const a=$R(o);return r.setMonth(t,Math.min(i,a)),r}function Ta(e,t,n){const r=V(e,n==null?void 0:n.in);return r.setHours(t),r}function Oa(e,t,n){const r=V(e,n==null?void 0:n.in);return r.setMinutes(t),r}function is(e,t,n){const r=V(e,n==null?void 0:n.in),s=Math.trunc(r.getMonth()/3)+1,i=t-s;return kt(r,r.getMonth()+i*3)}function Ra(e,t,n){const r=V(e,n==null?void 0:n.in);return r.setSeconds(t),r}function en(e,t,n){const r=V(e,n==null?void 0:n.in);return isNaN(+r)?ce((n==null?void 0:n.in)||e,NaN):(r.setFullYear(t),r)}function Mr(e,t,n){return qt(e,-t,n)}function vx(e,t,n){return Dh(e,-t,n)}function ug(e,t,n){return wl(e,-t,n)}function $s(e,t,n){return Sn(e,-t,n)}function hc(){return typeof window<"u"}function ni(e){return yx(e)?(e.nodeName||"").toLowerCase():"#document"}function vt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dn(e){var t;return(t=(yx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yx(e){return hc()?e instanceof Node||e instanceof vt(e).Node:!1}function Ze(e){return hc()?e instanceof Element||e instanceof vt(e).Element:!1}function un(e){return hc()?e instanceof HTMLElement||e instanceof vt(e).HTMLElement:!1}function dg(e){return!hc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vt(e).ShadowRoot}const sI=new Set(["inline","contents"]);function To(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Mt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!sI.has(s)}const iI=new Set(["table","td","th"]);function oI(e){return iI.has(ni(e))}const aI=[":popover-open",":modal"];function pc(e){return aI.some(t=>{try{return e.matches(t)}catch{return!1}})}const lI=["transform","translate","scale","rotate","perspective"],cI=["transform","translate","scale","rotate","perspective","filter"],uI=["paint","layout","strict","content"];function Th(e){const t=Oh(),n=Ze(e)?Mt(e):e;return lI.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||cI.some(r=>(n.willChange||"").includes(r))||uI.some(r=>(n.contain||"").includes(r))}function dI(e){let t=dr(e);for(;un(t)&&!Bs(t);){if(Th(t))return t;if(pc(t))return null;t=dr(t)}return null}function Oh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fI=new Set(["html","body","#document"]);function Bs(e){return fI.has(ni(e))}function Mt(e){return vt(e).getComputedStyle(e)}function mc(e){return Ze(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dr(e){if(ni(e)==="html")return e;const t=e.assignedSlot||e.parentNode||dg(e)&&e.host||dn(e);return dg(t)?t.host:t}function wx(e){const t=dr(e);return Bs(t)?e.ownerDocument?e.ownerDocument.body:e.body:un(t)&&To(t)?t:wx(t)}function go(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=wx(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=vt(s);if(i){const a=Gd(o);return t.concat(o,o.visualViewport||[],To(s)?s:[],a&&n?go(a):[])}return t.concat(s,go(s,[],n))}function Gd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Us=Math.min,Ar=Math.max,Dl=Math.round,aa=Math.floor,cn=e=>({x:e,y:e}),hI={left:"right",right:"left",bottom:"top",top:"bottom"},pI={start:"end",end:"start"};function mI(e,t,n){return Ar(e,Us(t,n))}function gc(e,t){return typeof e=="function"?e(t):e}function Ws(e){return e.split("-")[0]}function Oo(e){return e.split("-")[1]}function gI(e){return e==="x"?"y":"x"}function Rh(e){return e==="y"?"height":"width"}const vI=new Set(["top","bottom"]);function Tr(e){return vI.has(Ws(e))?"y":"x"}function jh(e){return gI(Tr(e))}function yI(e,t,n){n===void 0&&(n=!1);const r=Oo(e),s=jh(e),i=Rh(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Cl(o)),[o,Cl(o)]}function wI(e){const t=Cl(e);return[qd(e),t,qd(t)]}function qd(e){return e.replace(/start|end/g,t=>pI[t])}const fg=["left","right"],hg=["right","left"],xI=["top","bottom"],bI=["bottom","top"];function _I(e,t,n){switch(e){case"top":case"bottom":return n?t?hg:fg:t?fg:hg;case"left":case"right":return t?xI:bI;default:return[]}}function SI(e,t,n,r){const s=Oo(e);let i=_I(Ws(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(qd)))),i}function Cl(e){return e.replace(/left|right|bottom|top/g,t=>hI[t])}function kI(e){return{top:0,right:0,bottom:0,left:0,...e}}function xx(e){return typeof e!="number"?kI(e):{top:e,right:e,bottom:e,left:e}}function El(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}var DI=typeof document<"u",CI=function(){},Nl=DI?b.useLayoutEffect:CI;const EI={...Xg},NI=EI.useInsertionEffect,PI=NI||(e=>e());function TI(e){const t=b.useRef(()=>{});return PI(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function pg(e,t,n){let{reference:r,floating:s}=e;const i=Tr(t),o=jh(t),a=Rh(o),l=Ws(t),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Oo(t)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const OI=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=pg(c,r,l),f=r,p={},g=0;for(let w=0;w<a.length;w++){const{name:x,fn:y}=a[w],{x:m,y:v,data:_,reset:S}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=m??u,d=v??d,p={...p,[x]:{...p[x],..._}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:d}=pg(c,f,l)),w=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:p}};async function RI(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=gc(t,e),g=xx(p),x=a[f?d==="floating"?"reference":"floating":d],y=El(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),m=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},S=El(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:v,strategy:l}):m);return{top:(y.top-S.top+g.top)/_.y,bottom:(S.bottom-y.bottom+g.bottom)/_.y,left:(y.left-S.left+g.left)/_.x,right:(S.right-y.right+g.right)/_.x}}const jI=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=gc(e,t)||{};if(c==null)return{};const d=xx(u),f={x:n,y:r},p=jh(s),g=Rh(p),w=await o.getDimensions(c),x=p==="y",y=x?"top":"left",m=x?"bottom":"right",v=x?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[p]-f[p]-i.floating[g],S=f[p]-i.reference[p],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=k?k[v]:0;(!C||!await(o.isElement==null?void 0:o.isElement(k)))&&(C=a.floating[v]||i.floating[g]);const E=_/2-S/2,N=C/2-w[g]/2-1,P=Us(d[y],N),I=Us(d[m],N),$=P,M=C-w[g]-I,U=C/2-w[g]/2+E,H=mI($,U,M),L=!l.arrow&&Oo(s)!=null&&U!==H&&i.reference[g]/2-(U<$?P:I)-w[g]/2<0,z=L?U<$?U-$:U-M:0;return{[p]:f[p]+z,data:{[p]:H,centerOffset:U-H-z,...L&&{alignmentOffset:z}},reset:L}}}),II=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...x}=gc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Ws(s),m=Tr(a),v=Ws(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(v||!w?[Cl(a)]:wI(a)),k=g!=="none";!f&&k&&S.push(...SI(a,w,g,_));const C=[a,...S],E=await RI(t,x),N=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&N.push(E[y]),d){const U=yI(s,o,_);N.push(E[U[0]],E[U[1]])}if(P=[...P,{placement:s,overflows:N}],!N.every(U=>U<=0)){var I,$;const U=(((I=i.flip)==null?void 0:I.index)||0)+1,H=C[U];if(H&&(!(d==="alignment"?m!==Tr(H):!1)||P.every(D=>Tr(D.placement)===m?D.overflows[0]>0:!0)))return{data:{index:U,overflows:P},reset:{placement:H}};let L=($=P.filter(z=>z.overflows[0]<=0).sort((z,D)=>z.overflows[1]-D.overflows[1])[0])==null?void 0:$.placement;if(!L)switch(p){case"bestFit":{var M;const z=(M=P.filter(D=>{if(k){const O=Tr(D.placement);return O===m||O==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(O=>O>0).reduce((O,j)=>O+j,0)]).sort((D,O)=>D[1]-O[1])[0])==null?void 0:M[0];z&&(L=z);break}case"initialPlacement":L=a;break}if(s!==L)return{reset:{placement:L}}}return{}}}},MI=new Set(["left","top"]);async function AI(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ws(n),a=Oo(n),l=Tr(n)==="y",c=MI.has(o)?-1:1,u=i&&l?-1:1,d=gc(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const LI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await AI(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}};function bx(e){const t=Mt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=un(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=Dl(n)!==i||Dl(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Ih(e){return Ze(e)?e:e.contextElement}function ks(e){const t=Ih(e);if(!un(t))return cn(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=bx(t);let o=(i?Dl(n.width):n.width)/r,a=(i?Dl(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const FI=cn(0);function _x(e){const t=vt(e);return!Oh()||!t.visualViewport?FI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $I(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vt(e)?!1:t}function zr(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=Ih(e);let o=cn(1);t&&(r?Ze(r)&&(o=ks(r)):o=ks(e));const a=$I(i,n,r)?_x(i):cn(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=vt(i),p=r&&Ze(r)?vt(r):r;let g=f,w=Gd(g);for(;w&&r&&p!==g;){const x=ks(w),y=w.getBoundingClientRect(),m=Mt(w),v=y.left+(w.clientLeft+parseFloat(m.paddingLeft))*x.x,_=y.top+(w.clientTop+parseFloat(m.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=v,c+=_,g=vt(w),w=Gd(g)}}return El({width:u,height:d,x:l,y:c})}function Mh(e,t){const n=mc(e).scrollLeft;return t?t.left+n:zr(dn(e)).left+n}function Sx(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Mh(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function BI(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=dn(r),a=t?pc(t.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=cn(1);const u=cn(0),d=un(r);if((d||!d&&!i)&&((ni(r)!=="body"||To(o))&&(l=mc(r)),un(r))){const p=zr(r);c=ks(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!d&&!i?Sx(o,l,!0):cn(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function UI(e){return Array.from(e.getClientRects())}function WI(e){const t=dn(e),n=mc(e),r=e.ownerDocument.body,s=Ar(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Ar(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Mh(e);const a=-n.scrollTop;return Mt(r).direction==="rtl"&&(o+=Ar(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function YI(e,t){const n=vt(e),r=dn(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Oh();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const HI=new Set(["absolute","fixed"]);function zI(e,t){const n=zr(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=un(e)?ks(e):cn(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function mg(e,t,n){let r;if(t==="viewport")r=YI(e,n);else if(t==="document")r=WI(dn(e));else if(Ze(t))r=zI(t,n);else{const s=_x(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return El(r)}function kx(e,t){const n=dr(e);return n===t||!Ze(n)||Bs(n)?!1:Mt(n).position==="fixed"||kx(n,t)}function VI(e,t){const n=t.get(e);if(n)return n;let r=go(e,[],!1).filter(a=>Ze(a)&&ni(a)!=="body"),s=null;const i=Mt(e).position==="fixed";let o=i?dr(e):e;for(;Ze(o)&&!Bs(o);){const a=Mt(o),l=Th(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&HI.has(s.position)||To(o)&&!l&&kx(e,o))?r=r.filter(u=>u!==o):s=a,o=dr(o)}return t.set(e,r),r}function GI(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?pc(t)?[]:VI(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=mg(t,u,s);return c.top=Ar(d.top,c.top),c.right=Us(d.right,c.right),c.bottom=Us(d.bottom,c.bottom),c.left=Ar(d.left,c.left),c},mg(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function qI(e){const{width:t,height:n}=bx(e);return{width:t,height:n}}function KI(e,t,n){const r=un(t),s=dn(t),i=n==="fixed",o=zr(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=cn(0);function c(){l.x=Mh(s)}if(r||!r&&!i)if((ni(t)!=="body"||To(s))&&(a=mc(t)),r){const p=zr(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?Sx(s,a):cn(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function yu(e){return Mt(e).position==="static"}function gg(e,t){if(!un(e)||Mt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return dn(e)===n&&(n=n.ownerDocument.body),n}function Dx(e,t){const n=vt(e);if(pc(e))return n;if(!un(e)){let s=dr(e);for(;s&&!Bs(s);){if(Ze(s)&&!yu(s))return s;s=dr(s)}return n}let r=gg(e,t);for(;r&&oI(r)&&yu(r);)r=gg(r,t);return r&&Bs(r)&&yu(r)&&!Th(r)?n:r||dI(e)||n}const QI=async function(e){const t=this.getOffsetParent||Dx,n=this.getDimensions,r=await n(e.floating);return{reference:KI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function JI(e){return Mt(e).direction==="rtl"}const XI={convertOffsetParentRelativeRectToViewportRelativeRect:BI,getDocumentElement:dn,getClippingRect:GI,getOffsetParent:Dx,getElementRects:QI,getClientRects:UI,getDimensions:qI,getScale:ks,isElement:Ze,isRTL:JI};function Cx(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZI(e,t){let n=null,r;const s=dn(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||t(),!f||!p)return;const g=aa(d),w=aa(s.clientWidth-(u+f)),x=aa(s.clientHeight-(d+p)),y=aa(u),v={rootMargin:-g+"px "+-w+"px "+-x+"px "+-y+"px",threshold:Ar(0,Us(1,l))||1};let _=!0;function S(k){const C=k[0].intersectionRatio;if(C!==l){if(!_)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Cx(c,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(S,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return o(!0),i}function eM(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Ih(e),u=s||i?[...c?go(c):[],...go(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=c&&a?ZI(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[m]=y;m&&m.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let g,w=l?zr(e):null;l&&x();function x(){const y=zr(e);w&&!Cx(w,y)&&n(),w=y,g=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(m=>{s&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const tM=LI,nM=II,vg=jI,rM=(e,t,n)=>{const r=new Map,s={platform:XI,...n},i={...s.platform,_c:r};return OI(e,t,{...s,platform:i})};var sM=typeof document<"u",iM=function(){},ja=sM?b.useLayoutEffect:iM;function Pl(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Pl(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Pl(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ex(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yg(e,t){const n=Ex(e);return Math.round(t*n)/n}function wu(e){const t=b.useRef(e);return ja(()=>{t.current=e}),t}function oM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(r);Pl(f,r)||p(r);const[g,w]=b.useState(null),[x,y]=b.useState(null),m=b.useCallback(D=>{D!==k.current&&(k.current=D,w(D))},[]),v=b.useCallback(D=>{D!==C.current&&(C.current=D,y(D))},[]),_=i||g,S=o||x,k=b.useRef(null),C=b.useRef(null),E=b.useRef(u),N=l!=null,P=wu(l),I=wu(s),$=wu(c),M=b.useCallback(()=>{if(!k.current||!C.current)return;const D={placement:t,strategy:n,middleware:f};I.current&&(D.platform=I.current),rM(k.current,C.current,D).then(O=>{const j={...O,isPositioned:$.current!==!1};U.current&&!Pl(E.current,j)&&(E.current=j,_o.flushSync(()=>{d(j)}))})},[f,t,n,I,$]);ja(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(D=>({...D,isPositioned:!1})))},[c]);const U=b.useRef(!1);ja(()=>(U.current=!0,()=>{U.current=!1}),[]),ja(()=>{if(_&&(k.current=_),S&&(C.current=S),_&&S){if(P.current)return P.current(_,S,M);M()}},[_,S,M,P,N]);const H=b.useMemo(()=>({reference:k,floating:C,setReference:m,setFloating:v}),[m,v]),L=b.useMemo(()=>({reference:_,floating:S}),[_,S]),z=b.useMemo(()=>{const D={position:n,left:0,top:0};if(!L.floating)return D;const O=yg(L.floating,u.x),j=yg(L.floating,u.y);return a?{...D,transform:"translate("+O+"px, "+j+"px)",...Ex(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:j}},[n,a,L.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:M,refs:H,elements:L,floatingStyles:z}),[u,M,H,L,z])}const aM=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?vg({element:r.current,padding:s}).fn(n):{}:r?vg({element:r,padding:s}).fn(n):{}}}},lM=(e,t)=>({...tM(e),options:[e,t]}),cM=(e,t)=>({...nM(e),options:[e,t]}),uM=(e,t)=>({...aM(e),options:[e,t]}),dM={...Xg};let wg=!1,fM=0;const xg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+fM++;function hM(){const[e,t]=b.useState(()=>wg?xg():void 0);return Nl(()=>{e==null&&t(xg())},[]),b.useEffect(()=>{wg=!0},[]),e}const pM=dM.useId,Nx=pM||hM,mM=b.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:f,d:p,style:{transform:g,...w}={},...x}=t,y=Nx(),[m,v]=b.useState(!1);if(Nl(()=>{if(!s)return;Mt(s).direction==="rtl"&&v(!0)},[s]),!s)return null;const[_,S]=r.split("-"),k=_==="top"||_==="bottom";let C=d;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(C=null);const E=u*2,N=E/2,P=a/2*(c/-8+1),I=l/2*c/4,$=!!p,M=C&&S==="end"?"bottom":"top";let U=C&&S==="end"?"right":"left";C&&m&&(U=S==="end"?"left":"right");const H=(i==null?void 0:i.x)!=null?C||i.x:"",L=(i==null?void 0:i.y)!=null?C||i.y:"",z=p||"M0,0"+(" H"+a)+(" L"+(a-P)+","+(l-I))+(" Q"+a/2+","+l+" "+P+","+(l-I))+" Z",D={top:$?"rotate(180deg)":"",left:$?"rotate(90deg)":"rotate(-90deg)",bottom:$?"":"rotate(180deg)",right:$?"rotate(-90deg)":"rotate(90deg)"}[_];return h.jsxs("svg",{...x,"aria-hidden":!0,ref:n,width:$?a:a+E,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[U]:H,[M]:L,[_]:k||$?"100%":"calc(100% - "+E/2+"px)",transform:[D,g].filter(O=>!!O).join(" "),...w},children:[E>0&&h.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:f,strokeWidth:E+(p?0:1),d:z}),h.jsx("path",{stroke:E&&!p?x.fill:"none",d:z}),h.jsx("clipPath",{id:y,children:h.jsx("rect",{x:-N,y:N*($?-1:1),width:a+E,height:a})})]})});function gM(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const vM=b.createContext(null),yM=b.createContext(null),wM=()=>{var e;return((e=b.useContext(vM))==null?void 0:e.id)||null},xM=()=>b.useContext(yM);function bM(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=Nx(),i=b.useRef({}),[o]=b.useState(()=>gM()),a=wM()!=null,[l,c]=b.useState(r.reference),u=TI((p,g,w)=>{i.current.openEvent=p?g:void 0,o.emit("openchange",{open:p,event:g,reason:w,nested:a}),n==null||n(p,g,w)}),d=b.useMemo(()=>({setPositionReference:c}),[]),f=b.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return b.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:o,floatingId:s,refs:d}),[t,u,f,o,s,d])}function _M(e){e===void 0&&(e={});const{nodeId:t}=e,n=bM({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=b.useState(null),[a,l]=b.useState(null),u=(s==null?void 0:s.domReference)||i,d=b.useRef(null),f=xM();Nl(()=>{u&&(d.current=u)},[u]);const p=oM({...e,elements:{...s,...a&&{reference:a}}}),g=b.useCallback(v=>{const _=Ze(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;l(_),p.refs.setReference(_)},[p.refs]),w=b.useCallback(v=>{(Ze(v)||v===null)&&(d.current=v,o(v)),(Ze(p.refs.reference.current)||p.refs.reference.current===null||v!==null&&!Ze(v))&&p.refs.setReference(v)},[p.refs]),x=b.useMemo(()=>({...p.refs,setReference:w,setPositionReference:g,domReference:d}),[p.refs,w,g]),y=b.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),m=b.useMemo(()=>({...p,...r,refs:x,elements:y,nodeId:t}),[p,x,y,t,r]);return Nl(()=>{r.dataRef.current.floatingContext=m;const v=f==null?void 0:f.nodesRef.current.find(_=>_.id===t);v&&(v.context=m)}),b.useMemo(()=>({...p,context:m,refs:x,elements:y}),[p,x,y,m])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Kd=function(t,n){return Kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},Kd(t,n)};function Le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Kd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ne=function(){return ne=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},ne.apply(this,arguments)};function on(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var SM=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,s=r===void 0?!1:r,i=e.className,o=e.children,a=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return T.createElement("div",{className:i,role:"dialog","aria-label":a,"aria-modal":"true"},o)},kM=function(e,t){var n=b.useRef(null),r=b.useRef(e);r.current=e;var s=b.useCallback(function(i){var o,a=i.composed&&i.composedPath&&i.composedPath().find(function(l){return l instanceof Node})||i.target;n.current&&!n.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(o=r.current)===null||o===void 0||o.call(r,i))},[t]);return b.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},vc=function(e){var t=e.children,n=e.onClickOutside,r=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,a=kM(n,o);return T.createElement("div",{className:r,style:i,ref:function(l){a.current=l,s&&(s.current=l)}},t)},F;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(F||(F={}));function Px(){var e=typeof window<"u"?window:globalThis;return e}var Ro=12;function ie(e){if(e==null)return new Date;var t=typeof e=="string"?mx(e):V(e);return yc(t)?t:new Date}function xu(e,t,n,r,s){s===void 0&&(s=ie());for(var i=Ys(n)||Ys(Ah()),o=Array.isArray(t)?t:[t],a=0,l=o;a<l.length;a++){var c=l[a],u=Lj(e,c,s,{locale:i,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(yc(u)&&(!r||e===me(u,c,n)))return u}return null}function yc(e,t){return xl(e)&&!Hr(e,new Date("1/1/1800"))}function me(e,t,n){if(n==="en")return zd(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Ys(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Ys(Ah()),zd(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function St(e,t){var n=t.dateFormat,r=t.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return e&&me(e,s,r)||""}var Tx=" - ";function DM(e,t,n){if(!e)return"";var r=St(e,n),s=t?St(t,n):"";return"".concat(r).concat(Tx).concat(s)}function CM(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?St(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=St(e[1],t);return"".concat(n,", ").concat(r)}var s=e.length-1;return"".concat(n," (+").concat(s,")")}function bu(e,t){var n=t.hour,r=n===void 0?0:n,s=t.minute,i=s===void 0?0:s,o=t.second,a=o===void 0?0:o;return Ta(Oa(Ra(e,a),i),r)}function EM(e){return Ch(e)}function NM(e,t){return me(e,"ddd",t)}function Ia(e){return Yr(e)}function or(e,t,n){var r=Ys(t||Ah());return jn(e,{locale:r,weekStartsOn:n})}function En(e){return sx(e)}function Ei(e){return fc(e)}function bg(e){return Wd(e)}function _g(){return Yr(ie())}function Sg(e){return nx(e)}function PM(e){return VO(e)}function TM(e){return rx(e)}function tn(e,t){return e&&t?Uj(e,t):!e&&!t}function Xe(e,t){return e&&t?$j(e,t):!e&&!t}function Tl(e,t){return e&&t?Bj(e,t):!e&&!t}function te(e,t){return e&&t?HO(e,t):!e&&!t}function Or(e,t){return e&&t?WR(e,t):!e&&!t}function Ni(e,t,n){var r,s=Yr(t),i=nx(n);try{r=mo(e,{start:s,end:i})}catch{r=!1}return r}function Ah(){var e=Px();return e.__localeId__}function Ys(e){if(typeof e=="string"){var t=Px();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function OM(e,t,n){return t(me(e,"EEEE",n))}function RM(e,t){return me(e,"EEEEEE",t)}function jM(e,t){return me(e,"EEE",t)}function Lh(e,t){return me(kt(ie(),e),"LLLL",t)}function Ox(e,t){return me(kt(ie(),e),"LLL",t)}function IM(e,t){return me(is(ie(),e),"QQQ",t)}function Et(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.excludeDateIntervals,a=n.includeDates,l=n.includeDateIntervals,c=n.filterDate;return jo(e,{minDate:r,maxDate:s})||i&&i.some(function(u){return u instanceof Date?te(e,u):te(e,u.date)})||o&&o.some(function(u){var d=u.start,f=u.end;return mo(e,{start:d,end:f})})||a&&!a.some(function(u){return te(e,u)})||l&&!l.some(function(u){var d=u.start,f=u.end;return mo(e,{start:d,end:f})})||c&&!c(ie(e))||!1}function Fh(e,t){var n=t===void 0?{}:t,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,a=i.end;return mo(e,{start:o,end:a})}):r&&r.some(function(i){var o;return i instanceof Date?te(e,i):te(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function Rx(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,a=n.filterDate;return jo(e,{minDate:r?sx(r):void 0,maxDate:s?rx(s):void 0})||(i==null?void 0:i.some(function(l){return Xe(e,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return Xe(e,l)})||a&&!a(ie(e))||!1}function la(e,t,n,r){var s=J(e),i=Ge(e),o=J(t),a=Ge(t),l=J(r);return s===o&&s===l?i<=n&&n<=a:s<o?l===s&&i<=n||l===o&&a>=n||l<o&&l>s:!1}function MM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates;return jo(e,{minDate:r,maxDate:s})||i&&i.some(function(a){return Xe(a instanceof Date?a:a.date,e)})||o&&!o.some(function(a){return Xe(a,e)})||!1}function ca(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,a=n.filterDate;return jo(e,{minDate:r,maxDate:s})||(i==null?void 0:i.some(function(l){return Tl(e,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return Tl(e,l)})||a&&!a(ie(e))||!1}function ua(e,t,n){if(!t||!n||!xl(t)||!xl(n))return!1;var r=J(t),s=J(n);return r<=e&&s>=e}function Ma(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,a=n.filterDate,l=new Date(e,0,1);return jo(l,{minDate:r?fc(r):void 0,maxDate:s?ix(s):void 0})||(i==null?void 0:i.some(function(c){return tn(l,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return tn(l,c)})||a&&!a(ie(l))||!1}function da(e,t,n,r){var s=J(e),i=Ir(e),o=J(t),a=Ir(t),l=J(r);return s===o&&s===l?i<=n&&n<=a:s<o?l===s&&i<=n||l===o&&a>=n||l<o&&l>s:!1}function jo(e,t){var n,r=t===void 0?{}:t,s=r.minDate,i=r.maxDate;return(n=s&&Fs(e,s)<0||i&&Fs(e,i)>0)!==null&&n!==void 0?n:!1}function kg(e,t){return t.some(function(n){return Dn(n)===Dn(e)&&Cn(n)===Cn(e)&&ir(n)===ir(e)})}function Dg(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,s=n.includeTimes,i=n.filterTime;return r&&kg(e,r)||s&&!kg(e,s)||i&&!i(e)||!1}function Cg(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=ie();s=Ta(s,Dn(e)),s=Oa(s,Cn(e)),s=Ra(s,ir(e));var i=ie();i=Ta(i,Dn(n)),i=Oa(i,Cn(n)),i=Ra(i,ir(n));var o=ie();o=Ta(o,Dn(r)),o=Oa(o,Cn(r)),o=Ra(o,ir(r));var a;try{a=!mo(s,{start:i,end:o})}catch{a=!1}return a}function Eg(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=Mr(e,1);return r&&bl(r,i)>0||s&&s.every(function(o){return bl(o,i)>0})||!1}function Ng(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=qt(e,1);return r&&bl(i,r)>0||s&&s.every(function(o){return bl(i,o)>0})||!1}function AM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=fc(e),o=vx(i,1);return r&&_l(r,o)>0||s&&s.every(function(a){return _l(a,o)>0})||!1}function LM(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=ix(e),o=Dh(i,1);return r&&_l(o,r)>0||s&&s.every(function(a){return _l(o,a)>0})||!1}function Pg(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=$s(e,1);return r&&Sl(r,i)>0||s&&s.every(function(o){return Sl(o,i)>0})||!1}function FM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.yearItemNumber,i=s===void 0?Ro:s,o=Ei($s(e,i)),a=qn(o,i).endPeriod,l=r&&J(r);return l&&l>a||!1}function Tg(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=Sn(e,1);return r&&Sl(i,r)>0||s&&s.every(function(o){return Sl(i,o)>0})||!1}function $M(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.yearItemNumber,i=s===void 0?Ro:s,o=Sn(e,i),a=qn(o,i).startPeriod,l=r&&J(r);return l&&l<a||!1}function jx(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Fs(s,t)>=0});return rg(r)}else return n?rg(n):t}function Ix(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Fs(s,t)<=0});return ng(r)}else return n?ng(n):t}function Og(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(kn(o)){var a=me(o,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(t)||(l.push(t),r.set(a,l))}else if(typeof o=="object"){var c=Object.keys(o),u=(n=c[0])!==null&&n!==void 0?n:"",d=o[u];if(typeof u=="string"&&Array.isArray(d))for(var f=0,p=d.length;f<p;f++){var g=d[f];if(g){var a=me(g,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(u)||(l.push(u),r.set(a,l))}}}}return r}function BM(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function UM(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var s=r.date,i=r.holidayName;if(kn(s)){var o=me(s,"MM.dd.yyyy"),a=n.get(o)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&BM(a.holidayNames,[i]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?on(on([],l,!0),[i],!1):[i],n.set(o,a)}}}),n}function WM(e,t,n,r,s){for(var i=s.length,o=[],a=0;a<i;a++){var l=e,c=s[a];c&&(l=BO(l,Dn(c)),l=Ud(l,Cn(c)),l=YO(l,ir(c)));var u=Ud(e,(n+1)*r);ur(l,t)&&Hr(l,u)&&c!=null&&o.push(c)}return o}function Rg(e){return e<10?"0".concat(e):"".concat(e)}function qn(e,t){t===void 0&&(t=Ro);var n=Math.ceil(J(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function YM(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function jg(e){var t=e.getSeconds(),n=e.getMilliseconds();return V(e.getTime()-t*1e3-n)}function HM(e,t){return jg(e).getTime()===jg(t).getTime()}function Ig(e){if(!kn(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function Mg(e,t){if(!kn(e)||!kn(t))throw new Error("Invalid date received");var n=Ig(e),r=Ig(t);return Hr(n,r)}function Mx(e){return e.key===F.Space}var zM=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=T.createRef(),r.onTimeChange=function(s){var i,o;r.setState({time:s});var a=r.props.date,l=a instanceof Date&&!isNaN(+a),c=l?a:new Date;if(s!=null&&s.includes(":")){var u=s.split(":"),d=u[0],f=u[1];c.setHours(Number(d)),c.setMinutes(Number(f))}(o=(i=r.props).onChange)===null||o===void 0||o.call(i,c)},r.renderTimeInput=function(){var s=r.state.time,i=r.props,o=i.date,a=i.timeString,l=i.customTimeInput;return l?b.cloneElement(l,{date:o,value:s,onChange:r.onTimeChange}):T.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var c;(c=r.inputRef.current)===null||c===void 0||c.focus()},required:!0,value:s,onChange:function(c){r.onTimeChange(c.target.value||a)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return T.createElement("div",{className:"react-datepicker__input-time-container"},T.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),T.createElement("div",{className:"react-datepicker-time__input-container"},T.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(b.Component),VM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=b.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===F.Space&&(r.preventDefault(),r.key=F.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isSameDay=function(r){return te(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Et(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return Fh(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return te(n.props.day,or(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&te(r,or(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,i=r.highlightDates;if(!i)return!1;var o=me(s,"MM.dd.yyyy");return i.get(o)},n.getHolidaysClass=function(){var r,s=n.props,i=s.day,o=s.holidays;if(!o)return[void 0];var a=me(i,"MM.dd.yyyy");return o.has(a)?[(r=o.get(a))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:Ni(s,i,o)},n.isInSelectingRange=function(){var r,s=n.props,i=s.day,o=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,c=s.selectsDisabledDaysInRange,u=s.startDate,d=s.endDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(o||a||l)||!f||!c&&n.isDisabled()?!1:o&&d&&(Hr(f,d)||Or(f,d))?Ni(i,f,d):a&&u&&(ur(f,u)||Or(f,u))||l&&u&&!d&&(ur(f,u)||Or(f,u))?Ni(i,u,f):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.startDate,a=s.selectsStart,l=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a?te(i,l):te(i,o)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.endDate,a=s.selectsEnd,l=s.selectsRange,c=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a||l?te(i,c):te(i,o)},n.isRangeStart=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:te(i,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:te(o,s)},n.isWeekend=function(){var r=FR(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Ge(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Ge(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(ie())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return Be("react-datepicker__day",s,"react-datepicker__day--"+NM(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,i=r.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,a=r.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,c=n.isDisabled()||n.isExcluded()?l:o;return"".concat(c," ").concat(me(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,i=r.holidays,o=i===void 0?new Map:i,a=r.excludeDates,l=me(s,"MM.dd.yyyy"),c=[];return o.has(l)&&c.push.apply(c,o.get(l).holidayNames),n.isExcluded()&&c.push(a==null?void 0:a.filter(function(u){return u instanceof Date?te(u,s):te(u==null?void 0:u.date,s)}).map(function(u){if(!(u instanceof Date))return u==null?void 0:u.message})),c.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&te(s,r))?0:-1;return i},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(cg(n.props.day),n.props.day):cg(n.props.day)},n.render=function(){return T.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&T.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(b.Component),GM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=b.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===F.Space&&(r.preventDefault(),r.key=F.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!te(n.props.date,n.props.selected)&&te(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||te(n.props.date,n.props.selected)&&te(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&te(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,i=n.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,a=n.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&te(this.props.date,this.props.selected)};return T.createElement("div",{ref:this.weekNumberEl,className:Be(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(b.Component),qM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return Et(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,i){for(var o,a,l,c=new Date(r),u=0;u<7;u++){var d=new Date(r);d.setDate(d.getDate()+u);var f=!n.isDisabled(d);if(f){c=d;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(c,s,i),n.props.showWeekPicker&&n.handleDayClick(c,i),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):EM(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=zt(r,6),i=new Date(r);i<=s;){if(!n.isDisabled(i))return!1;i=zt(i,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],i=n.formatWeekNumber(r);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,i):void 0;s.push(T.createElement(GM,ne({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=zt(r,a);return T.createElement(VM,ne({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:n.handleDayClick.bind(n,l),onMouseEnter:n.handleDayMouseEnter.bind(n,l)}))}))},n.startOfWeek=function(){return or(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!te(n.startOfWeek(),n.props.selected)&&te(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":te(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return T.createElement("div",{className:Be(n)},this.renderDays())},t}(b.Component),xi,KM=6,Ds={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},_u=(xi={},xi[Ds.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},xi[Ds.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},xi[Ds.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},xi),fa=1;function Ag(e,t){return e?Ds.FOUR_COLUMNS:t?Ds.TWO_COLUMNS:Ds.THREE_COLUMNS}var QM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=on([],Array(12),!0).map(function(){return b.createRef()}),n.QUARTER_REFS=on([],Array(4),!0).map(function(){return b.createRef()}),n.isDisabled=function(r){return Et(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return Fh(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var i,o;(o=(i=n.props).onDayClick)===null||o===void 0||o.call(i,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,i;(i=(s=n.props).onDayMouseEnter)===null||i===void 0||i.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Xe(kt(i,r),o)},n.isRangeStartQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Tl(is(i,r),o)},n.isRangeEndMonth=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Xe(kt(i,r),a)},n.isRangeEndQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate;return!o||!a?!1:Tl(is(i,r),a)},n.isInSelectingRangeMonth=function(r){var s,i=n.props,o=i.day,a=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,d=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(a||l||c)||!f?!1:a&&d?la(f,d,r,o):l&&u||c&&u&&!d?la(u,f,r,o):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,a=i.startDate,l=i.selectsStart,c=kt(o,r),u=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return l?Xe(c,u):Xe(c,a)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,a=i.endDate,l=i.selectsEnd,c=i.selectsRange,u=kt(o,r),d=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return l||c?Xe(u,d):Xe(u,a)},n.isInSelectingRangeQuarter=function(r){var s,i=n.props,o=i.day,a=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,d=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(a||l||c)||!f?!1:a&&d?da(f,d,r,o):l&&u||c&&u&&!d?da(u,f,r,o):!1},n.isWeekInMonth=function(r){var s=n.props.day,i=zt(r,6);return Xe(r,s)||Xe(i,s)},n.isCurrentMonth=function(r,s){return J(r)===J(ie())&&s===Ge(ie())},n.isCurrentQuarter=function(r,s){return J(r)===J(ie())&&s===Ir(ie())},n.isSelectedMonth=function(r,s,i){return Ge(i)===s&&J(r)===J(i)},n.isSelectMonthInList=function(r,s,i){return i.some(function(o){return n.isSelectedMonth(r,s,o)})},n.isSelectedQuarter=function(r,s,i){return Ir(r)===s&&J(r)===J(i)},n.isMonthSelected=function(){var r=n.props,s=r.day,i=r.selected,o=r.selectedDates,a=r.selectsMultiple,l=Ge(s);return a?o==null?void 0:o.some(function(c){return n.isSelectedMonth(s,l,c)}):!!i&&n.isSelectedMonth(s,l,i)},n.renderWeeks=function(){for(var r=[],s=n.props.fixedHeight,i=0,o=!1,a=or(En(n.props.day),n.props.locale,n.props.calendarStartDay),l=function(g){return n.props.showWeekPicker?or(g,n.props.locale,n.props.calendarStartDay):n.props.preSelection},c=function(g){return n.props.showWeekPicker?or(g,n.props.locale,n.props.calendarStartDay):n.props.selected},u=n.props.selected?c(n.props.selected):void 0,d=n.props.preSelection?l(n.props.preSelection):void 0;r.push(T.createElement(qM,ne({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:a,month:Ge(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:u,preSelection:d,showWeekNumber:n.props.showWeekNumbers}))),!o;){i++,a=wl(a,1);var f=s&&i>=KM,p=!s&&!n.isWeekInMonth(a);if(f||p)if(n.props.peekNextMonth)o=!0;else break}return r},n.onMonthClick=function(r,s){var i=n.isMonthDisabledForLabelDate(s),o=i.isDisabled,a=i.labelDate;o||n.handleDayClick(En(a),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),i=s.isDisabled,o=s.labelDate;i||n.handleDayMouseEnter(En(o))},n.handleMonthNavigation=function(r,s){var i,o,a,l;(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(l=(a=n.MONTH_REFS[r])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},n.handleKeyboardNavigation=function(r,s,i){var o,a=n.props,l=a.selected,c=a.preSelection,u=a.setPreSelection,d=a.minDate,f=a.maxDate,p=a.showFourColumnMonthYearPicker,g=a.showTwoColumnMonthYearPicker;if(c){var w=Ag(p,g),x=n.getVerticalOffset(w),y=(o=_u[w])===null||o===void 0?void 0:o.grid,m=function(C,E,N){var P,I,$=E,M=N;switch(C){case F.ArrowRight:$=qt(E,fa),M=N===11?0:N+fa;break;case F.ArrowLeft:$=Mr(E,fa),M=N===0?11:N-fa;break;case F.ArrowUp:$=Mr(E,x),M=!((P=y==null?void 0:y[0])===null||P===void 0)&&P.includes(N)?N+12-x:N-x;break;case F.ArrowDown:$=qt(E,x),M=!((I=y==null?void 0:y[y.length-1])===null||I===void 0)&&I.includes(N)?N-12+x:N+x;break}return{newCalculatedDate:$,newCalculatedMonth:M}},v=function(C,E,N){for(var P=40,I=C,$=!1,M=0,U=m(I,E,N),H=U.newCalculatedDate,L=U.newCalculatedMonth;!$;){if(M>=P){H=E,L=N;break}if(d&&H<d){I=F.ArrowRight;var z=m(I,H,L);H=z.newCalculatedDate,L=z.newCalculatedMonth}if(f&&H>f){I=F.ArrowLeft;var z=m(I,H,L);H=z.newCalculatedDate,L=z.newCalculatedMonth}if(MM(H,n.props)){var z=m(I,H,L);H=z.newCalculatedDate,L=z.newCalculatedMonth}else $=!0;M++}return{newCalculatedDate:H,newCalculatedMonth:L}};if(s===F.Enter){n.isMonthDisabled(i)||(n.onMonthClick(r,i),u==null||u(l));return}var _=v(s,c,i),S=_.newCalculatedDate,k=_.newCalculatedMonth;switch(s){case F.ArrowRight:case F.ArrowLeft:case F.ArrowUp:case F.ArrowDown:n.handleMonthNavigation(k,S);break}}},n.getVerticalOffset=function(r){var s,i;return(i=(s=_u[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(r,s){var i=n.props,o=i.disabledKeyboardNavigation,a=i.handleOnMonthKeyDown,l=r.key;l!==F.Tab&&r.preventDefault(),o||n.handleKeyboardNavigation(r,l,s),a&&a(r)},n.onQuarterClick=function(r,s){var i=is(n.props.day,s);ca(i,n.props)||n.handleDayClick(bg(i),r)},n.onQuarterMouseEnter=function(r){var s=is(n.props.day,r);ca(s,n.props)||n.handleDayMouseEnter(bg(s))},n.handleQuarterNavigation=function(r,s){var i,o,a,l;n.isDisabled(s)||n.isExcluded(s)||((o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(l=(a=n.QUARTER_REFS[r-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},n.onQuarterKeyDown=function(r,s){var i,o,a=r.key;if(!n.props.disabledKeyboardNavigation)switch(a){case F.Enter:n.onQuarterClick(r,s),(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,n.props.selected);break;case F.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,Dh(n.props.preSelection,1));break;case F.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,vx(n.props.preSelection,1));break}},n.isMonthDisabledForLabelDate=function(r){var s,i=n.props,o=i.day,a=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,d=kt(o,r);return{isDisabled:(s=(a||l||c||u)&&Rx(d,n.props))!==null&&s!==void 0?s:!1,labelDate:d}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate,l=s.preSelection,c=s.monthClassName,u=c?c(kt(i,r)):void 0,d=n.getSelection();return Be("react-datepicker__month-text","react-datepicker__month-".concat(r),u,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":d?n.isSelectMonthInList(i,r,d):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&l&&n.isSelectedMonth(i,r,l)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&a?la(o,a,r,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(i,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Ge(n.props.preSelection),i=n.isMonthDisabledForLabelDate(s).isDisabled,o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Ir(n.props.preSelection),i=ca(n.props.day,n.props),o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(r){var s=n.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,c=s.day,u=s.locale,d=kt(c,r),f=n.isDisabled(d)||n.isExcluded(d)?l:o;return"".concat(f," ").concat(me(d,"MMMM yyyy",u))},n.getQuarterClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,a=s.endDate,l=s.selected,c=s.minDate,u=s.maxDate,d=s.excludeDates,f=s.includeDates,p=s.filterDate,g=s.preSelection,w=s.disabledKeyboardNavigation,x=(c||u||d||f||p)&&ca(is(i,r),n.props);return Be("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":x,"react-datepicker__quarter-text--selected":l?n.isSelectedQuarter(i,r,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!w&&g&&n.isSelectedQuarter(i,r,g)&&!x,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&a?da(o,a,r,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(i,r)})},n.getMonthContent=function(r){var s=n.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,a=s.locale,l=s.day,c=Ox(r,a),u=Lh(r,a);return o?o(r,c,u,l):i?u:c},n.getQuarterContent=function(r){var s,i=n.props,o=i.renderQuarterContent,a=i.locale,l=IM(r,a);return(s=o==null?void 0:o(r,l))!==null&&s!==void 0?s:l},n.renderMonths=function(){var r,s=n.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,c=(r=_u[Ag(o,i)])===null||r===void 0?void 0:r.grid;return c==null?void 0:c.map(function(u,d){return T.createElement("div",{className:"react-datepicker__month-wrapper",key:d},u.map(function(f,p){return T.createElement("div",{ref:n.MONTH_REFS[f],key:p,onClick:function(g){n.onMonthClick(g,f)},onKeyDown:function(g){Mx(g)&&(g.preventDefault(),g.key=F.Enter),n.onMonthKeyDown(g,f)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(f)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(f)}:void 0,tabIndex:Number(n.getTabIndex(f)),className:n.getMonthClassNames(f),"aria-disabled":n.isMonthDisabled(f),role:"option","aria-label":n.getAriaLabel(f),"aria-current":n.isCurrentMonth(a,f)?"date":void 0,"aria-selected":l?n.isSelectedMonth(a,f,l):void 0},n.getMonthContent(f))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,i=r.selected,o=[1,2,3,4];return T.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(a,l){return T.createElement("div",{key:l,ref:n.QUARTER_REFS[l],role:"option",onClick:function(c){n.onQuarterClick(c,a)},onKeyDown:function(c){n.onQuarterKeyDown(c,a)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(a)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(a)}:void 0,className:n.getQuarterClassNames(a),"aria-selected":i?n.isSelectedQuarter(s,a,i):void 0,tabIndex:Number(n.getQuarterTabIndex(a)),"aria-current":n.isCurrentQuarter(s,a)?"date":void 0},n.getQuarterContent(a))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,i=r.selectsStart,o=r.selectsEnd,a=r.showMonthYearPicker,l=r.showQuarterYearPicker,c=r.showWeekPicker;return Be("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,i=n.selectsMultiple;if(i)return s;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,i=n.day,o=n.ariaLabelPrefix,a=o===void 0?"Month ":o,l=a?a.trim()+" ":"";return T.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(me(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(b.Component),JM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,s){return T.createElement("div",{className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?T.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return T.createElement(vc,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(b.Component),XM=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,i){return T.createElement("option",{key:s,value:i},s)})},n.renderSelectMode=function(r){return T.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return T.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},T.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),T.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return T.createElement(JM,ne({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,i=[n.renderReadView(!s,r)];return s&&i.unshift(n.renderDropdown(r)),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return Ox(i,n.props.locale)}:function(i){return Lh(i,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return T.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(b.Component);function ZM(e,t){for(var n=[],r=En(e),s=En(t);!ur(r,s);)n.push(ie(r)),r=qt(r,1);return n}var eA=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var i=Vd(s),o=tn(r.props.date,s)&&Xe(r.props.date,s);return T.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?T.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",me(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:ZM(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=Be({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return T.createElement(vc,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(b.Component),tA=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=En(n.props.minDate),s=En(n.props.maxDate),i=[];!ur(r,s);){var o=Vd(r);i.push(T.createElement("option",{key:o,value:o},me(r,n.props.dateFormat,n.props.locale))),r=qt(r,1)}return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return T.createElement("select",{value:Vd(En(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=me(n.props.date,n.props.dateFormat,n.props.locale);return T.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},T.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),T.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return T.createElement(eA,ne({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=ie(r);tn(n.props.date,s)&&Xe(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return T.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(b.Component),nA=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(r){var s,i;(n.props.minTime||n.props.maxTime)&&Cg(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Dg(r,n.props)||(i=(s=n.props).onChange)===null||i===void 0||i.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&HM(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&Cg(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Dg(r,n.props)},n.liClasses=function(r){var s,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Dn(r)*3600+Cn(r)*60+ir(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(r,s){var i,o;r.key===F.Space&&(r.preventDefault(),r.key=F.Enter),(r.key===F.ArrowUp||r.key===F.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===F.ArrowDown||r.key===F.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===F.Enter&&n.handleClick(s),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.renderTimes=function(){for(var r,s=[],i=typeof n.props.format=="string"?n.props.format:"p",o=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,a=n.props.selected||n.props.openToDate||ie(),l=Ia(a),c=n.props.injectTimes&&n.props.injectTimes.sort(function(x,y){return x.getTime()-y.getTime()}),u=60*YM(a),d=u/o,f=0;f<d;f++){var p=Ud(l,f*o);if(s.push(p),c){var g=WM(l,p,f,o,c);s=s.concat(g)}}var w=s.reduce(function(x,y){return y.getTime()<=a.getTime()?y:x},s[0]);return s.map(function(x){return T.createElement("li",{key:x.valueOf(),onClick:n.handleClick.bind(n,x),className:n.liClasses(x),ref:function(y){x===w&&(n.centerLi=y)},onKeyDown:function(y){n.handleOnKeyDown(y,x)},tabIndex:x===w?0:-1,role:"option","aria-selected":n.isSelectedTime(x)?"true":void 0,"aria-disabled":n.isDisabledTime(x)?"true":void 0},me(x,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?T.createElement(T.Fragment,null):T.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},T.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,s=this.state.height;return T.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),T.createElement("div",{className:"react-datepicker__time"},T.createElement("div",{className:"react-datepicker__time-box"},T.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(b.Component),Lg=3,rA=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=on([],Array(r.props.yearItemNumber),!0).map(function(){return b.createRef()}),r.isDisabled=function(s){return Et(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return Fh(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var i=function(){var o,a;(a=(o=r.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(s,i){r.props.onDayClick&&r.props.onDayClick(s,i)},r.handleYearNavigation=function(s,i){var o,a,l,c,u=r.props,d=u.date,f=u.yearItemNumber;if(!(d===void 0||f===void 0)){var p=qn(d,f).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((a=(o=r.props).setPreSelection)===null||a===void 0||a.call(o,i),s-p<0?r.updateFocusOnPaginate(f-(p-s)):s-p>=f?r.updateFocusOnPaginate(Math.abs(f-(s-p))):(c=(l=r.YEAR_REFS[s-p])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},r.isSameDay=function(s,i){return te(s,i)},r.isCurrentYear=function(s){return s===J(ie())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&tn(en(ie(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&tn(en(ie(),s),r.props.endDate)},r.isInRange=function(s){return ua(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var i=r.props,o=i.selectsStart,a=i.selectsEnd,l=i.selectsRange,c=i.startDate,u=i.endDate;return!(o||a||l)||!r.selectingDate()?!1:o&&u?ua(s,r.selectingDate(),u):a&&c||l&&c&&!u?ua(s,c,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,a=o.startDate,l=o.selectsStart,c=en(ie(),s);return l?tn(c,(i=r.selectingDate())!==null&&i!==void 0?i:null):tn(c,a??null)},r.isSelectingRangeEnd=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,a=o.endDate,l=o.selectsEnd,c=o.selectsRange,u=en(ie(),s);return l||c?tn(u,(i=r.selectingDate())!==null&&i!==void 0?i:null):tn(u,a??null)},r.isKeyboardSelected=function(s){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var i=r.props,o=i.minDate,a=i.maxDate,l=i.excludeDates,c=i.includeDates,u=i.filterDate,d=Ei(en(r.props.date,s)),f=(o||a||l||c||u)&&Ma(s,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!te(d,Ei(r.props.selected))&&te(d,Ei(r.props.preSelection))&&!f}},r.isSelectedYear=function(s){var i=r.props,o=i.selectsMultiple,a=i.selected,l=i.selectedDates;return o?l==null?void 0:l.some(function(c){return s===J(c)}):!!a&&s===J(a)},r.onYearClick=function(s,i){var o=r.props.date;o!==void 0&&r.handleYearClick(Ei(en(o,i)),s)},r.onYearKeyDown=function(s,i){var o,a,l=s.key,c=r.props,u=c.date,d=c.yearItemNumber,f=c.handleOnKeyDown;if(l!==F.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(l){case F.Enter:if(r.props.selected==null)break;r.onYearClick(s,i),(a=(o=r.props).setPreSelection)===null||a===void 0||a.call(o,r.props.selected);break;case F.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,Sn(r.props.preSelection,1));break;case F.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,$s(r.props.preSelection,1));break;case F.ArrowUp:{if(u===void 0||d===void 0||r.props.preSelection==null)break;var p=qn(u,d).startPeriod,g=Lg,w=i-g;if(w<p){var x=d%g;i>=p&&i<p+x?g=x:g+=x,w=i-g}r.handleYearNavigation(w,$s(r.props.preSelection,g));break}case F.ArrowDown:{if(u===void 0||d===void 0||r.props.preSelection==null)break;var y=qn(u,d).endPeriod,g=Lg,w=i+g;if(w>y){var x=d%g;i<=y&&i>y-x?g=x:g+=x,w=i+g}r.handleYearNavigation(w,Sn(r.props.preSelection,g));break}}f&&f(s)},r.getYearClassNames=function(s){var i=r.props,o=i.date,a=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,d=i.filterDate,f=i.yearClassName;return Be("react-datepicker__year-text","react-datepicker__year-".concat(s),o?f==null?void 0:f(en(o,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(a||l||c||u||d)&&Ma(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=J(r.props.preSelection),o=Ma(s,r.props);return s===i&&!o?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return t.prototype.render=function(){var n=this,r=[],s=this.props,i=s.date,o=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(i===void 0)return null;for(var c=qn(i,o),u=c.startPeriod,d=c.endPeriod,f=function(w){r.push(T.createElement("div",{ref:p.YEAR_REFS[w-u],onClick:function(x){n.onYearClick(x,w)},onKeyDown:function(x){Mx(x)&&(x.preventDefault(),x.key=F.Enter),n.onYearKeyDown(x,w)},tabIndex:Number(p.getYearTabIndex(w)),className:p.getYearClassNames(w),onMouseEnter:p.props.usePointerEvent?void 0:function(x){return a(x,w)},onPointerEnter:p.props.usePointerEvent?function(x){return a(x,w)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(x){return l(x,w)},onPointerLeave:p.props.usePointerEvent?function(x){return l(x,w)}:void 0,key:w,"aria-current":p.isCurrentYear(w)?"date":void 0},p.getYearContent(w)))},p=this,g=u;g<=d;g++)f(g);return T.createElement("div",{className:"react-datepicker__year"},T.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(b.Component);function sA(e,t,n,r){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,a=!0;n&&(a=J(n)<=o),r&&a&&(a=J(r)>=o),a&&s.push(o)}return s}var iA=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var a=r.props.year,l=r.state.yearsList.map(function(d){return T.createElement("div",{className:a===d?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:d,onClick:r.onChange.bind(r,d),"aria-selected":a===d?"true":void 0},a===d?T.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",d)}),c=r.props.minDate?J(r.props.minDate):null,u=r.props.maxDate?J(r.props.maxDate):null;return(!u||!r.state.yearsList.find(function(d){return d===u}))&&l.unshift(T.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},T.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!r.state.yearsList.find(function(d){return d===c}))&&l.push(T.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},T.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},r.onChange=function(a){r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(a){var l=r.state.yearsList.map(function(c){return c+a});r.setState({yearsList:l})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=s||(i?10:5);return r.state={yearsList:sA(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=b.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(i){return i.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=Be({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return T.createElement(vc,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(b.Component),oA=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?J(n.props.minDate):1900,s=n.props.maxDate?J(n.props.maxDate):2100,i=[],o=r;o<=s;o++)i.push(T.createElement("option",{key:o,value:o},o));return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return T.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return T.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return n.toggleDropdown(s)}},T.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),T.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return T.createElement(iA,ne({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var i;(i=n.onSelect)===null||i===void 0||i.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var i,o;(o=(i=n.props).onSelect)===null||o===void 0||o.call(i,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return T.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(b.Component),aA=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],lA=function(e){var t=(e.className||"").split(/\s+/);return aA.some(function(n){return t.indexOf(n)>=0})},cA=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var i,o;lA(s.target)&&((o=(i=r.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},r.getDateInView=function(){var s=r.props,i=s.preSelection,o=s.selected,a=s.openToDate,l=jx(r.props),c=Ix(r.props),u=ie(),d=a||o||i;return d||(l&&Hr(u,l)?l:c&&ur(u,c)?c:u)},r.increaseMonth=function(){r.setState(function(s){var i=s.date;return{date:qt(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var i=s.date;return{date:Mr(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,i,o){r.props.onSelect(s,i,o),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,i){r.setState({selectingDate:en(ie(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,i)},r.handleYearMouseLeave=function(s,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,i)},r.handleYearChange=function(s){var i,o,a,l;(o=(i=r.props).onYearChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(l=(a=r.props).setOpen)===null||l===void 0||l.call(a,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!Et(s,r.props))return s;for(var i=En(s),o=TM(s),a=zO(o,i),l=null,c=0;c<=a;c++){var u=zt(i,c);if(!Et(u,r.props)){l=u;break}}return l},r.handleMonthChange=function(s){var i,o,a,l=(i=r.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;r.handleCustomMonthChange(l),r.props.adjustDateOnChange&&(r.props.onSelect(l),(a=(o=r.props).setOpen)===null||a===void 0||a.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(l)},r.handleCustomMonthChange=function(s){var i,o;(o=(i=r.props).onMonthChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(i){var o=i.date;return{date:en(o,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(i){var o=i.date;return{date:kt(o,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(i){var o=i.date;return{date:en(kt(o,Ge(s)),J(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){s===void 0&&(s=r.state.date);var i=or(s,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(T.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(a){var l=zt(i,a),c=r.formatWeekday(l,r.props.locale),u=r.props.weekDayClassName?r.props.weekDayClassName(l):void 0;return T.createElement("div",{key:a,"aria-label":me(l,"EEEE",r.props.locale),className:Be("react-datepicker__day-name",u)},c)}))},r.formatWeekday=function(s,i){return r.props.formatWeekDay?OM(s,r.props.formatWeekDay,i):r.props.useWeekdaysShort?jM(s,i):RM(s,i)},r.decreaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:$s(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,i,o;if(!r.props.renderCustomHeader){var a=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=r.props.showPreviousMonths?a-1:0,c=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:l,u=Mr(r.state.date,c),d;switch(!0){case r.props.showMonthYearPicker:d=Pg(r.state.date,r.props);break;case r.props.showYearPicker:d=FM(r.state.date,r.props);break;case r.props.showQuarterYearPicker:d=AM(r.state.date,r.props);break;default:d=Eg(u,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&d||r.props.showTimeSelectOnly)){var f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],g=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(g=r.decreaseYear),d&&r.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),g=void 0);var w=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,x=r.props,y=x.previousMonthButtonLabel,m=y===void 0?t.defaultProps.previousMonthButtonLabel:y,v=x.previousYearButtonLabel,_=v===void 0?t.defaultProps.previousYearButtonLabel:v,S=r.props,k=S.previousMonthAriaLabel,C=k===void 0?typeof m=="string"?m:"Previous Month":k,E=S.previousYearAriaLabel,N=E===void 0?typeof _=="string"?_:"Previous Year":E;return T.createElement("button",{type:"button",className:p.join(" "),onClick:g,onKeyDown:r.props.handleOnKeyDown,"aria-label":w?N:C},T.createElement("span",{className:f.join(" ")},w?_:m))}}},r.increaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:Sn(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.showMonthYearPicker:i=Tg(r.state.date,r.props);break;case r.props.showYearPicker:i=$M(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=LM(r.state.date,r.props);break;default:i=Ng(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,d=u.nextMonthButtonLabel,f=d===void 0?t.defaultProps.nextMonthButtonLabel:d,p=u.nextYearButtonLabel,g=p===void 0?t.defaultProps.nextYearButtonLabel:p,w=r.props,x=w.nextMonthAriaLabel,y=x===void 0?typeof f=="string"?f:"Next Month":x,m=w.nextYearAriaLabel,v=m===void 0?typeof g=="string"?g:"Next Year":m;return T.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?v:y},T.createElement("span",{className:a.join(" ")},c?g:f))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),T.createElement("h2",{className:i.join(" ")},me(s,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return T.createElement(oA,ne({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:J(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return T.createElement(XM,ne({},t.defaultProps,r.props,{month:Ge(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return T.createElement(tA,ne({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(_g(),s),r.props.setPreSelection&&r.props.setPreSelection(_g())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return T.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return T.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),T.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),T.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))},r.renderCustomHeader=function(s){var i,o,a=s.monthDate,l=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var c=Eg(r.state.date,r.props),u=Ng(r.state.date,r.props),d=Pg(r.state.date,r.props),f=Tg(r.state.date,r.props),p=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return T.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(i=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,ne(ne({},r.state),{customHeaderCount:l,monthDate:a,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:c,nextMonthButtonDisabled:u,prevYearButtonDisabled:d,nextYearButtonDisabled:f})),p&&T.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderYearHeader=function(s){var i=s.monthDate,o=r.props,a=o.showYearPicker,l=o.yearItemNumber,c=l===void 0?t.defaultProps.yearItemNumber:l,u=qn(i,c),d=u.startPeriod,f=u.endPeriod;return T.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(d," - ").concat(f):J(i))},r.renderHeader=function(s){var i=s.monthDate,o=s.i,a=o===void 0?0:o,l={monthDate:i,i:a};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(l);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(l);default:return r.renderDefaultHeader(l)}},r.renderMonths=function(){var s,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],a=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=r.props.showPreviousMonths?a-1:0,c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Sn(r.state.date,l):Mr(r.state.date,l),u=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:l,d=0;d<a;++d){var f=d-u+l,p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Sn(c,f):qt(c,f),g="month-".concat(d),w=d<a-1,x=d>0;o.push(T.createElement("div",{key:g,ref:function(y){r.monthContainer=y??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:p,i:d}),T.createElement(QM,ne({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:p,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:d,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:w,monthShowsDuplicateDaysStart:x}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return T.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),T.createElement(rA,ne({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return T.createElement(nA,ne({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,i=s&&yc(s)&&!!r.props.selected,o=i?"".concat(Rg(s.getHours()),":").concat(Rg(s.getMinutes())):"";if(r.props.showTimeInput)return T.createElement(zM,ne({},t.defaultProps,r.props,{date:s,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s,i=qn(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,a=i.endPeriod,l;return r.props.showYearPicker?l="".concat(o," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?l=J(r.state.date):l="".concat(Lh(Ge(r.state.date),r.props.locale)," ").concat(J(r.state.date)),T.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&l)},r.renderChildren=function(){if(r.props.children)return T.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=b.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Ro}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!te(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!Xe(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!te(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||SM;return T.createElement(vc,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},T.createElement("div",{style:{display:"contents"},ref:this.containerRef},T.createElement(n,{className:Be("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(b.Component),uA=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return T.createElement("i",{className:"".concat(i," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:s});if(T.isValidElement(t)){var o=t;return T.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(r),onClick:function(a){typeof o.props.onClick=="function"&&o.props.onClick(a),typeof s=="function"&&s(a)}})}return T.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},T.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Ax=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ty.createPortal(this.props.children,this.el)},t}(b.Component),dA="[tabindex], a, button, input, select, textarea",fA=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Lx=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(dA),1,-1).filter(fA)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=b.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?T.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},T.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,T.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(b.Component);function hA(e){var t=function(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=b.useRef(null),o=_M(ne({open:!s,whileElementsMounted:eM,placement:n.popperPlacement,middleware:on([cM({padding:15}),lM(10),uM({element:i})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),a=ne(ne({},n),{hidePopper:s,popperProps:ne(ne({},o),{arrowRef:i})});return T.createElement(e,ne({},a))};return t}var pA=function(e){Le(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,s=n.wrapperClassName,i=n.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,a=n.popperComponent,l=n.targetComponent,c=n.enableTabLoop,u=n.popperOnKeyDown,d=n.portalId,f=n.portalHost,p=n.popperProps,g=n.showArrow,w=void 0;if(!o){var x=Be("react-datepicker-popper",r);w=T.createElement(Lx,{enableTabLoop:c},T.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:x,"data-placement":p.placement,onKeyDown:u},a,g&&T.createElement(mM,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(w=b.createElement(this.props.popperContainer,{},w)),d&&!o&&(w=T.createElement(Ax,{portalId:d,portalHost:f},w));var y=Be("react-datepicker-wrapper",s);return T.createElement(T.Fragment,null,T.createElement("div",{ref:p.refs.setReference,className:y},l),w)},t}(b.Component),mA=hA(pA),Fg="react-datepicker-ignore-onclickoutside";function gA(e,t){return e&&t?Ge(e)!==Ge(t)||J(e)!==J(t):e!==t}var Su="Date input not valid.",vA=function(e){Le(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ie()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var a=new Date(o.date);return yc(a)?on(on([],i,!0),[ne(ne({},o),{date:a})],!1):i},[])},r.calcInitialState=function(){var s,i=r.getPreSelection(),o=jx(r.props),a=Ix(r.props),l=o&&Hr(i,Ia(o))?o:a&&ur(i,Sg(a))?a:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:l,highlightDates:Og(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(ne(ne({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ne(ne({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},r.setBlur=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,i){i===void 0&&(i=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:ku},function(){s||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return kn(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var i,o,a=r.state.wasHidden,l=a?r.state.open:!0;a&&r.resetHiddenStatus(),r.state.preventFocus||((o=(i=r.props).onFocus)===null||o===void 0||o.call(i,s),l&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(s){var i,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(i=r.props).onBlur)===null||o===void 0||o.call(i,s)),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var i,o;r.props.inline||r.setOpen(!1),(o=(i=r.props).onClickOutside)===null||o===void 0||o.call(i,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,i,o,a,l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=c[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,c),!d||typeof d.isDefaultPrevented!="function"||d.isDefaultPrevented()))){r.setState({inputValue:(d==null?void 0:d.target)instanceof HTMLInputElement?d.target.value:null,lastPreSelectChange:yA});var f=r.props,p=f.selectsRange,g=f.startDate,w=f.endDate,x=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=r.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,m=(d==null?void 0:d.target)instanceof HTMLInputElement?d.target.value:"";if(p){var v=m.split(x.includes("-")?Tx:"-",2).map(function(I){return I.trim()}),_=v[0],S=v[1],k=xu(_??"",x,r.props.locale,y),C=xu(S??"",x,r.props.locale,y),E=(g==null?void 0:g.getTime())!==(k==null?void 0:k.getTime()),N=(w==null?void 0:w.getTime())!==(C==null?void 0:C.getTime());if(!E&&!N||k&&Et(k,r.props)||C&&Et(C,r.props))return;(a=(o=r.props).onChange)===null||a===void 0||a.call(o,[k,C],d)}else{var P=xu(m,x,r.props.locale,y,(l=r.props.selected)!==null&&l!==void 0?l:void 0);(P||!m)&&r.setSelected(P,d,!0)}}},r.handleSelect=function(s,i,o){if(!r.props.readOnly){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(s,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(s);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,l=a.startDate,c=a.endDate;l&&!c&&(r.props.swapRange||!Mg(s,l))&&r.setOpen(!1)}}},r.setSelected=function(s,i,o,a){var l,c,u=s;if(r.props.showYearPicker){if(u!==null&&Ma(J(u),r.props))return}else if(r.props.showMonthYearPicker){if(u!==null&&Rx(u,r.props))return}else if(u!==null&&Et(u,r.props))return;var d=r.props,f=d.onChange,p=d.selectsRange,g=d.startDate,w=d.endDate,x=d.selectsMultiple,y=d.selectedDates,m=d.minTime,v=d.swapRange;if(!Or(r.props.selected,u)||r.props.allowSameDay||p||x)if(u!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(u=bu(u,{hour:Dn(r.props.selected),minute:Cn(r.props.selected),second:ir(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&m&&(u=bu(u,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),r.props.inline||r.setState({preSelection:u}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),p){var _=!g&&!w,S=g&&!w,k=g&&w;_?f==null||f([u,null],i):S&&(u===null?f==null||f([null,null],i):Mg(u,g)?v?f==null||f([u,g],i):f==null||f([u,null],i):f==null||f([g,u],i)),k&&(f==null||f([u,null],i))}else if(x){if(u!==null)if(!(y!=null&&y.length))f==null||f([u],i);else{var C=y.some(function(N){return te(N,u)});if(C){var E=y.filter(function(N){return!te(N,u)});f==null||f(E,i)}else f==null||f(on(on([],y,!0),[u],!1),i)}}else f==null||f(u,i);o||((c=(l=r.props).onSelect)===null||c===void 0||c.call(l,u,i),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var i=kn(r.props.minDate),o=kn(r.props.maxDate),a=!0;if(s){var l=Ia(s);if(i&&o)a=Ni(s,r.props.minDate,r.props.maxDate);else if(i){var c=Ia(r.props.minDate);a=ur(s,c)||Or(l,c)}else if(o){var u=Sg(r.props.maxDate);a=Hr(s,u)||Or(l,u)}}a&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var i,o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var a=r.props.selected?r.props.selected:r.getPreSelection(),l=r.props.selected?s:bu(a,{hour:Dn(s),minute:Cn(s)});r.setState({preSelection:l}),(o=(i=r.props).onChange)===null||o===void 0||o.call(i,l),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(s=r.props).onInputClick)===null||i===void 0||i.call(s)},r.onInputKeyDown=function(s){var i,o,a,l,c,u;(o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s);var d=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(d===F.ArrowDown||d===F.ArrowUp||d===F.Enter)&&((a=r.onInputClick)===null||a===void 0||a.call(r));return}if(r.state.open){if(d===F.ArrowDown||d===F.ArrowUp){s.preventDefault();var f=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((l=r.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(f);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var g=ie(r.state.preSelection);d===F.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===ku?(r.handleSelect(g,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(g)):r.setOpen(!1)):d===F.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):d===F.Tab&&r.setOpen(!1),r.inputOk()||(u=(c=r.props).onInputError)===null||u===void 0||u.call(c,{code:1,msg:Su})}},r.onPortalKeyDown=function(s){var i=s.key;i===F.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var i,o,a,l,c,u,d=r.props,f=d.minDate,p=d.maxDate,g=d.disabledKeyboardNavigation,w=d.showWeekPicker,x=d.shouldCloseOnSelect,y=d.locale,m=d.calendarStartDay,v=d.adjustDateOnChange,_=d.inline;if((o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s),!g){var S=s.key,k=s.shiftKey,C=ie(r.state.preSelection),E=function(H,L){var z=L;switch(H){case F.ArrowRight:z=w?wl(L,1):zt(L,1);break;case F.ArrowLeft:z=w?ug(L,1):Wj(L,1);break;case F.ArrowUp:z=ug(L,1);break;case F.ArrowDown:z=wl(L,1);break;case F.PageUp:z=k?$s(L,1):Mr(L,1);break;case F.PageDown:z=k?Sn(L,1):qt(L,1);break;case F.Home:z=or(L,y,m);break;case F.End:z=PM(L);break}return z},N=function(H,L){for(var z=40,D=H,O=!1,j=0,W=E(H,L);!O;){if(j>=z){W=L;break}f&&W<f&&(D=F.ArrowRight,W=Et(f,r.props)?E(D,W):f),p&&W>p&&(D=F.ArrowLeft,W=Et(p,r.props)?E(D,W):p),Et(W,r.props)?((D===F.PageUp||D===F.Home)&&(D=F.ArrowRight),(D===F.PageDown||D===F.End)&&(D=F.ArrowLeft),W=E(D,W)):O=!0,j++}return W};if(S===F.Enter){s.preventDefault(),r.handleSelect(C,s),!x&&r.setPreSelection(C);return}else if(S===F.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(l=(a=r.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:Su});return}var P=null;switch(S){case F.ArrowLeft:case F.ArrowRight:case F.ArrowUp:case F.ArrowDown:case F.PageUp:case F.PageDown:case F.Home:case F.End:P=N(S,C);break}if(!P){(u=(c=r.props).onInputError)===null||u===void 0||u.call(c,{code:1,msg:Su});return}if(s.preventDefault(),r.setState({lastPreSelectChange:ku}),v&&r.setSelected(P),r.setPreSelection(P),_){var I=Ge(C),$=Ge(P),M=J(C),U=J(P);I!==$||M!==U?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var i=s.key;i===F.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var i=r.props,o=i.selectsRange,a=i.onChange;o?a==null||a([null,null],s):a==null||a(null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,i;return!r.props.inline&&!r.isCalendarOpen()?null:T.createElement(cA,ne({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:UM(r.modifyHolidays()),outsideClickIgnoreClass:Fg,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s=r.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,a=s.locale,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",u;return r.props.selectsRange?u="Selected start date: ".concat(St(r.props.startDate,{dateFormat:c,locale:a}),". ").concat(r.props.endDate?"End date: "+St(r.props.endDate,{dateFormat:c,locale:a}):""):r.props.showTimeSelectOnly?u="Selected time: ".concat(St(r.props.selected,{dateFormat:o,locale:a})):r.props.showYearPicker?u="Selected year: ".concat(St(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?u="Selected month: ".concat(St(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?u="Selected quarter: ".concat(St(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):u="Selected date: ".concat(St(r.props.selected,{dateFormat:c,locale:a})),T.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},r.renderDateInput=function(){var s,i,o,a=Be(r.props.className,(s={},s[Fg]=r.state.open,s)),l=r.props.customInput||T.createElement("input",{type:"text"}),c=r.props.customInputRef||"ref",u=r.props,d=u.dateFormat,f=d===void 0?t.defaultProps.dateFormat:d,p=u.locale,g=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?DM(r.props.startDate,r.props.endDate,{dateFormat:f,locale:p}):r.props.selectsMultiple?CM((o=r.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:f,locale:p}):St(r.props.selected,{dateFormat:f,locale:p});return b.cloneElement(l,(i={},i[c]=function(w){r.input=w},i.value=g,i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=Be(l.props.className,a),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i["aria-describedby"]=r.props.ariaDescribedBy,i["aria-invalid"]=r.props.ariaInvalid,i["aria-labelledby"]=r.props.ariaLabelledBy,i["aria-required"]=r.props.ariaRequired,i))},r.renderClearButton=function(){var s=r.props,i=s.isClearable,o=s.disabled,a=s.selected,l=s.startDate,c=s.endDate,u=s.clearButtonTitle,d=s.clearButtonClassName,f=d===void 0?"":d,p=s.ariaLabelClose,g=p===void 0?"Close":p,w=s.selectedDates,x=s.readOnly;return i&&!x&&(a!=null||l!=null||c!=null||w!=null&&w.length)?T.createElement("button",{type:"button",className:Be("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":g,onClick:r.onClearClick,title:u,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ro,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var s,i,o,a;n.inline&&gA(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Og(this.props.highlightDates)}),!r.focused&&!Or(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),r.open===!0&&this.state.open===!1&&((a=(o=this.props).onCalendarClose)===null||a===void 0||a.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,i=n.calendarIconClassname,o=n.calendarIconClassName,a=n.toggleCalendarOnIconClick,l=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),T.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&T.createElement(uA,ne({icon:s,className:Be(o,!o&&i,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?T.createElement(Lx,{enableTabLoop:this.props.enableTabLoop},T.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=T.createElement(Ax,ne({portalId:this.props.portalId},this.props),r)),T.createElement("div",null,this.renderInputContainer(),r)}return T.createElement(mA,ne({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(b.Component),yA="input",ku="navigate";function wA({value:e,onChange:t,label:n="Site Submit"}){const[r,s]=b.useState(""),[i,o]=b.useState([]),[a,l]=b.useState(null),[c,u]=b.useState(!1),d=b.useRef(null),f=b.useRef(null);b.useEffect(()=>{e?q.from("site_submit").select("*").eq("id",e).single().then(({data:x})=>{x&&(l(x),s(x.code||""))}):(l(null),s(""))},[e]),b.useEffect(()=>{const y=setTimeout(async()=>{if(r.length===0){o([]);return}const{data:m}=await q.from("site_submit").select("*").or(`site_submit_name.ilike.%${r}%,code.ilike.%${r}%`).limit(10).order("site_submit_name");m&&o(m)},300);return()=>clearTimeout(y)},[r]),b.useEffect(()=>{const x=y=>{f.current&&!f.current.contains(y.target)&&d.current&&!d.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const p=x=>{l(x),s(x.code||""),t(x.id),u(!1),o([])},g=x=>{s(x.target.value),u(!0),x.target.value===""&&(t(null),l(null))},w=()=>{d.current&&d.current.select(),r.length>0&&u(!0)};return h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("input",{ref:d,type:"text",value:r,onChange:g,onFocus:w,placeholder:"Search by site submit name...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),c&&i.length>0&&h.jsx("div",{ref:f,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:i.map(x=>h.jsxs("div",{onClick:()=>p(x),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[h.jsx("div",{className:"font-medium",children:x.code}),x.site_submit_name&&h.jsx("div",{className:"text-xs text-gray-500",children:x.site_submit_name})]},x.id))})]}),a&&h.jsx("div",{className:"mt-1",children:h.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View site submit:",a.id)},children:"View Site Submit Details "})})]})}function xA({value:e,onChange:t,propertyId:n,label:r="Property Unit"}){const[s,i]=b.useState(""),[o,a]=b.useState([]),[l,c]=b.useState(null),[u,d]=b.useState(!1),f=b.useRef(null),p=b.useRef(null);b.useEffect(()=>{e?q.from("property_unit").select("*").eq("id",e).single().then(({data:m})=>{m&&(c(m),i(m.property_unit_name||""))}):(c(null),i(""))},[e]),b.useEffect(()=>{const v=setTimeout(async()=>{if(!n){a([]);return}let _=q.from("property_unit").select("*").eq("property_id",n);s.length>0&&(_=_.ilike("property_unit_name",`%${s}%`));const{data:S}=await _.limit(20).order("property_unit_name");S&&a(S)},300);return()=>clearTimeout(v)},[s,n,u]),b.useEffect(()=>{const m=v=>{p.current&&!p.current.contains(v.target)&&f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=m=>{c(m),i(m.property_unit_name||""),t(m.id),d(!1)},w=m=>{i(m.target.value),d(!0),m.target.value===""&&(t(null),c(null))},x=()=>{n&&(f.current&&f.current.select(),d(!0))},y=m=>{const v=[];m.sqft&&v.push(`${Number(m.sqft).toLocaleString()} sqft`),m.rent&&v.push(`$${Number(m.rent).toLocaleString()}/mo`);const _=[];return m.inline===!0&&_.push("Inline"),m.end_cap===!0&&_.push("End Cap"),m.patio===!0&&_.push("Patio"),_.length>0&&v.push(_.join(", ")),v.join("  ")};return h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("input",{ref:f,type:"text",value:s,onChange:w,onFocus:x,placeholder:n?"Search or select unit...":"Select a property first",disabled:!n,className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),u&&o.length>0&&n&&h.jsx("div",{ref:p,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:o.map(m=>h.jsxs("div",{onClick:()=>g(m),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[h.jsx("div",{className:"font-medium",children:m.property_unit_name}),h.jsx("div",{className:"text-xs text-gray-500",children:y(m)})]},m.id))}),u&&o.length===0&&n&&s.length>0&&h.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2 text-sm text-gray-500",children:"No units found for this property"})]}),l&&h.jsx("div",{className:"mt-1",children:h.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property unit:",l.id)},children:"View Property Unit Details "})})]})}function bA({value:e,onChange:t,label:n="Property"}){const[r,s]=b.useState(""),[i,o]=b.useState([]),[a,l]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState(!1),p=b.useRef(null),g=b.useRef(null);b.useEffect(()=>{e?q.from("property").select("*").eq("id",e).single().then(({data:m})=>{m&&(l(m),s(m.property_name||""))}):(l(null),s(""))},[e]),b.useEffect(()=>{const v=setTimeout(async()=>{if(!r||r.trim().length===0){o([]);return}f(!0),console.log("Searching for:",r);const{data:_,error:S}=await q.from("property").select("*").ilike("property_name",`%${r}%`).limit(10).order("property_name");o(_||[]),f(!1)},300);return()=>clearTimeout(v)},[r]),b.useEffect(()=>{const m=v=>{g.current&&!g.current.contains(v.target)&&p.current&&!p.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const w=m=>{l(m),s(m.property_name||""),t(m.id),u(!1),o([])},x=m=>{const v=m.target.value;s(v),v.length>0&&u(!0),a&&v!==a.property_name&&(l(null),t(null)),v===""&&(t(null),l(null),o([]),u(!1))},y=()=>{p.current&&p.current.select(),i.length>0&&u(!0)};return h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("input",{ref:p,type:"text",value:r,onChange:x,onFocus:y,placeholder:"Type to search properties...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),c&&h.jsx("div",{ref:g,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:d?h.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}):i.length>0?i.map(m=>{var v,_,S,k;return h.jsxs("div",{onClick:()=>w(m),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[h.jsx("div",{className:"font-medium",children:m.property_name}),(((v=m.property_type)==null?void 0:v.label)||((_=m.property_stage)==null?void 0:_.label))&&h.jsx("div",{className:"text-xs text-gray-500",children:[(S=m.property_type)==null?void 0:S.label,(k=m.property_stage)==null?void 0:k.label].filter(Boolean).join("  ")})]},m.id)}):r.length>0?h.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No properties found"}):null})]}),a&&h.jsx("div",{className:"mt-1",children:h.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property:",a.id)},children:"View Property Details "})})]})}const _A={"Negotiating LOI":50,"At Lease/PSA":75,"Under Contract / Contingent":85,Booked:90,"Executed Payable":95,"Closed Paid":100,Lost:0};function SA({deal:e,onSave:t}){const[n,r]=b.useState(e),[s,i]=b.useState(!1),[o,a]=b.useState(null),[l,c]=b.useState([]),[u,d]=b.useState([]),[f,p]=b.useState(""),[g,w]=b.useState(""),[x,y]=b.useState([]),[m,v]=b.useState({}),[_,S]=b.useState(!1),[k,C]=b.useState(!1),E=b.useRef(null),N=b.useRef(!0);b.useEffect(()=>{r(e),v({}),C(!1),E.current=e.stage_id??null,N.current=!0},[e]),b.useEffect(()=>{q.from("deal_stage").select("id, label").then(({data:D})=>D&&c(D)),q.from("deal_team").select("id, label").then(({data:D})=>D&&d(D)),e.updated_by_id&&q.from("user").select("name").eq("id",e.updated_by_id).maybeSingle().then(({data:D})=>(D==null?void 0:D.name)&&p(D.name)),e.client_id?q.from("client").select("client_name").eq("id",e.client_id).maybeSingle().then(({data:D})=>(D==null?void 0:D.client_name)&&w(D.client_name)):w("")},[e.client_id,e.property_id]),b.useEffect(()=>{const O=setTimeout(async()=>{const j=g.trim();if(!j)return y([]);const{data:W}=await q.from("client").select("id, client_name").ilike("client_name",`%${j}%`).order("client_name",{ascending:!0}).limit(5);W&&y(W.map(K=>({id:K.id,label:K.client_name})))},150);return()=>clearTimeout(O)},[g]);const P=(D,O)=>{D==="probability"&&C(!0);const j={...n,[D]:O};if(r(j),["deal_name","deal_value","commission_percent"].includes(D)){const W=M(D,O);v(K=>{const Ce={...K},Oe=W[D];return Oe?Ce[D]=Oe:delete Ce[D],Ce})}if(D==="commission_percent"){const W=j.flat_fee_override??(j.deal_value??0)*((O??0)/100);(async()=>{const{data:Ce,error:Oe}=await q.from("deal").update({commission_percent:O,fee:W}).eq("id",n.id).select().single();Oe?console.error("Error auto-saving commission:",Oe):Ce&&t(Ce)})()}},I=n.flat_fee_override??(n.deal_value??0)*((n.commission_percent??0)/100),$=()=>{var D;return(D=l.find(O=>O.id===n.stage_id))==null?void 0:D.label};b.useEffect(()=>{if(!n.stage_id||l.length===0)return;const D=$();if(!D)return;const O=_A[D];if(N.current){if(N.current=!1,n.probability==null&&typeof O=="number"){r(K=>({...K,probability:O})),S(!0);const W=setTimeout(()=>S(!1),800);return()=>clearTimeout(W)}return}if(E.current!==n.stage_id&&typeof O=="number"){r(K=>({...K,probability:O})),C(!1),S(!0);const W=setTimeout(()=>S(!1),800);return E.current=n.stage_id,()=>clearTimeout(W)}E.current=n.stage_id},[n.stage_id,l]);const M=(D,O)=>{const j={};if(D==="deal_name"&&(!O||String(O).trim().length===0)&&(j.deal_name="Opportunity Name is required."),D==="deal_value"&&(O===null||O===""||isNaN(Number(O))?j.deal_value="Enter a number.":Number(O)<0&&(j.deal_value="Must be  0.")),D==="commission_percent"){const W=Number(O);O===null||O===""||isNaN(W)?j.commission_percent="Enter a percent.":(W<0||W>100)&&(j.commission_percent="0100 only.")}return j},U=D=>{const O={};return Object.assign(O,M("deal_name",D.deal_name)),Object.assign(O,M("deal_value",D.deal_value)),Object.assign(O,M("commission_percent",D.commission_percent)),O},H=async()=>{const D=U(n);if(v(D),Object.keys(D).length>0)return;i(!0);const O={deal_name:n.deal_name,client_id:n.client_id,property_id:n.property_id,property_unit_id:n.property_unit_id,site_submit_id:n.site_submit_id,deal_value:n.deal_value,commission_percent:n.commission_percent,flat_fee_override:n.flat_fee_override,fee:I,target_close_date:n.target_close_date,loi_signed_date:n.loi_signed_date,closed_date:n.closed_date,probability:n.probability,deal_team_id:n.deal_team_id,stage_id:n.stage_id,updated_at:new Date().toISOString()},{data:j,error:W}=await q.from("deal").update(O).eq("id",n.id).select().single();i(!1),W?alert("Error saving: "+W.message):j&&t(j)},L=$(),z=L==="Closed Paid";return h.jsxs("div",{className:"relative",children:[h.jsx(ha,{title:"Deal Context",help:"Name the opportunity, choose the client, property, and deal team.",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(kA,{label:"Opportunity Name",value:n.deal_name,onChange:D=>P("deal_name",D)}),h.jsx(DA,{label:"Client",search:g,setSearch:w,suggestions:x,onSelect:(D,O)=>{P("client_id",D),w(O),y([])}}),h.jsx(bA,{value:n.property_id,onChange:D=>P("property_id",D),label:"Property"}),h.jsx(xA,{value:n.property_unit_id,onChange:D=>P("property_unit_id",D),propertyId:n.property_id,label:"Property Unit"}),h.jsx(wA,{value:n.site_submit_id,onChange:D=>P("site_submit_id",D),label:"Site Submit"}),h.jsx($g,{label:"Deal Team",value:n.deal_team_id,onChange:D=>P("deal_team_id",D),options:u}),m.deal_name&&h.jsx(Du,{msg:m.deal_name,className:"col-span-2"})]})}),h.jsx(ha,{title:"Financials",help:"Set value and commission. Fee auto-calculates unless a flat fee is set.",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(ia,{label:"Deal Value",value:n.deal_value,onChange:D=>P("deal_value",D===""?null:parseFloat(D)),format:D=>mu(D,2),editingField:o,setEditingField:a,fieldKey:"deal_value"}),m.deal_value&&h.jsx(Du,{msg:m.deal_value}),h.jsx(ia,{label:"Commission %",value:n.commission_percent,onChange:D=>P("commission_percent",D===""?null:parseFloat(D)),format:D=>AO(D,2),editingField:o,setEditingField:a,fieldKey:"commission_percent"}),m.commission_percent&&h.jsx(Du,{msg:m.commission_percent}),h.jsx(ia,{label:"Flat Fee Override",value:n.flat_fee_override,onChange:D=>P("flat_fee_override",D===""?null:parseFloat(D)),format:D=>D===null?"":mu(D,2),editingField:o,setEditingField:a,fieldKey:"flat_fee_override"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium",children:"Calculated Fee"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:isNaN(I)?"":mu(I,2)})]})]})}),h.jsx(ha,{title:"Stage & Probability",help:"Choosing a stage will set a default probability. You can override it.",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx($g,{label:"Stage",value:n.stage_id,onChange:D=>P("stage_id",D),options:l}),h.jsx("div",{className:"rounded transition-colors duration-700 "+(_?"bg-yellow-50":"bg-transparent"),children:h.jsx(ia,{label:"Probability %",value:n.probability,onChange:D=>P("probability",D===""?null:parseFloat(D)),format:D=>LO(D),editingField:o,setEditingField:a,fieldKey:"probability"})})]})}),h.jsx(ha,{title:"Timeline",help:"Target and actual dates. Closed Date enabled only at Closed Paid.",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Cu,{label:"Target Close Date",value:n.target_close_date,onChange:D=>P("target_close_date",D)}),h.jsx(Cu,{label:"LOI Signed Date",value:n.loi_signed_date,onChange:D=>P("loi_signed_date",D)}),h.jsx(Cu,{label:"Closed Date",value:n.closed_date,onChange:D=>P("closed_date",D),disabled:!z,tooltip:z?void 0:"Set Stage to 'Closed Paid' to enable"})]})}),h.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t mt-6 p-3 flex items-center justify-between shadow-sm",children:[h.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:n.updated_at?h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Last Updated by"}),h.jsx("span",{className:"font-medium",children:f||"Unknown"}),h.jsxs("span",{children:[new Date(n.updated_at).toLocaleDateString()," ",new Date(n.updated_at).toLocaleTimeString()]})]}):h.jsx("span",{children:"Not yet saved"})}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-xs text-gray-500",children:L?`Stage: ${L}`:"No stage selected"}),h.jsx("button",{onClick:H,disabled:s||Object.keys(m).length>0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:s?"Saving...":"Save Deal"})]})]})]})}function ha({title:e,help:t,children:n}){return h.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&h.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),n]})}function Du({msg:e,className:t=""}){return h.jsx("p",{className:"text-xs text-red-600 mt-1 "+t,children:e})}function kA({label:e,value:t,onChange:n,type:r="text",className:s=""}){return h.jsxs("div",{className:s,children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsx("input",{type:r,value:t??"",onChange:i=>n(i.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})}function Cu({label:e,value:t,onChange:n,disabled:r,tooltip:s}){const i=t?mx(t):null;return h.jsxs("div",{title:s,children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsx(vA,{selected:i,onChange:o=>n(o?zd(o,"yyyy-MM-dd"):null),className:`mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${r?"bg-gray-100 cursor-not-allowed":""}`,dateFormat:"MM/dd/yyyy",isClearable:!0,disabled:r})]})}function $g({label:e,value:t,onChange:n,options:r}){return h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsxs("select",{value:t??"",onChange:s=>n(s.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[h.jsx("option",{value:"",children:"-- Select --"}),r.map(s=>h.jsx("option",{value:s.id,children:s.label},s.id))]})]})}function DA({label:e,search:t,setSearch:n,suggestions:r,onSelect:s}){const i=b.useRef(null),o=()=>{i.current&&i.current.select()};return h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsx("input",{ref:i,type:"text",value:t,onChange:a=>n(a.target.value),onFocus:o,placeholder:`Search ${e.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),r.filter(a=>a.label!==t).length>0&&h.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:r.filter(a=>a.label!==t).map(a=>h.jsx("li",{onClick:()=>s(a.id,a.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:a.label},a.id))})]})}const Fx=b.createContext(null),$x=()=>{const e=b.useContext(Fx);if(!e)throw new Error("usePanelManager must be used within a FloatingPanelManager");return e},CA=({children:e})=>{const[t,n]=b.useState(null),r=o=>{n(o)},s=()=>{n(null)},i=o=>{t===o?s():r(o)};return h.jsx(Fx.Provider,{value:{activePanel:t,openPanel:r,closePanel:s,togglePanel:i},children:e})},bi=({type:e,icon:t,count:n,label:r,position:s})=>{const{activePanel:i,togglePanel:o}=$x(),a=i===e;return h.jsxs("div",{className:"relative group",children:[h.jsxs("button",{onClick:()=>o(e),className:`
          relative flex items-center justify-center w-10 h-10 rounded-full shadow-md
          transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg
          backdrop-blur-sm border
          ${a?"bg-blue-600 text-white border-blue-500 shadow-blue-200":"bg-white/90 text-gray-600 hover:bg-white border-gray-200 hover:text-gray-800"}
        `,title:r,children:[h.jsx("span",{className:"text-sm",children:t}),n!==void 0&&n>0&&h.jsx("span",{className:`
            absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full
            border-2 border-white
            ${a?"bg-white text-blue-600":"bg-red-500 text-white"}
          `,children:n>99?"99+":n})]}),h.jsxs("div",{className:"absolute right-full mr-3 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[r,n!==void 0&&h.jsxs("span",{className:"ml-1 text-gray-300",children:["(",n,")"]}),h.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]})},EA=({children:e,contactCount:t=0,notesCount:n=0,filesCount:r=0,activityCount:s=0,paymentsCount:i=0})=>h.jsxs("div",{className:"relative",children:[e,h.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 space-y-3",style:{zIndex:50},children:[h.jsx(bi,{type:"contacts",icon:"",count:t,label:"Contact Roles",position:0}),h.jsx(bi,{type:"notes",icon:"",count:n,label:"Notes",position:1}),h.jsx(bi,{type:"files",icon:"",count:r,label:"Files",position:2}),h.jsx(bi,{type:"activity",icon:"",count:s,label:"Activity",position:3}),h.jsx(bi,{type:"payments",icon:"",count:i,label:"Payments",position:4})]})]}),Bx=e=>{const[t,n]=b.useState([]),[r,s]=b.useState(!0),[i,o]=b.useState(null);return b.useEffect(()=>{(async()=>{if(!e){n([]),s(!1);return}try{s(!0),o(null);const{data:l,error:c}=await q.from("deal_contact").select("id, contact_id, role_id, primary_contact").eq("deal_id",e);if(c)throw c;if(!l||l.length===0){n([]),s(!1);return}const u=[...new Set(l.map(v=>v.contact_id).filter(Boolean))],d=[...new Set(l.map(v=>v.role_id).filter(Boolean))],{data:f,error:p}=await q.from("contact").select("id, first_name, last_name, email, phone, mobile_phone").in("id",u);if(p)throw p;const{data:g,error:w}=await q.from("contact_role").select("role_id, label").in("role_id",d);if(w)throw w;const x=new Map;f==null||f.forEach(v=>{x.set(v.id,v)});const y=new Map;g==null||g.forEach(v=>{y.set(v.role_id,v)});const m=l.map(v=>{const _=x.get(v.contact_id),S=y.get(v.role_id);let k="Unknown Contact";if(_){const C=_.first_name||"",E=_.last_name||"";C&&E?k=`${C} ${E}`:C?k=C:E&&(k=E)}return{id:v.id,contact_name:k,contact_email:(_==null?void 0:_.email)||null,contact_phone:(_==null?void 0:_.phone)||null,contact_mobile:(_==null?void 0:_.mobile_phone)||null,role_label:(S==null?void 0:S.label)||"No Role",primary_contact:v.primary_contact||!1,contact_id:v.contact_id}});m.sort((v,_)=>v.primary_contact&&!_.primary_contact?-1:!v.primary_contact&&_.primary_contact?1:v.role_label.localeCompare(_.role_label)),n(m)}catch(l){console.error("Error fetching deal contacts:",l),o("Failed to load contacts")}finally{s(!1)}})()},[e]),{contacts:t,loading:r,error:i,refetch:()=>{e&&s(!0)}}},NA=({dealId:e})=>{const{activePanel:t,closePanel:n}=$x(),{contacts:r,loading:s,error:i}=Bx(e),o=t==="contacts",a=c=>{const u=c.split(" ");return u.length>=2?`${u[0].charAt(0)}${u[u.length-1].charAt(0)}`.toUpperCase():c.charAt(0).toUpperCase()||"?"},l=(c,u)=>{c&&window.open(`tel:${c}`,"_self")};return o?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/10 transition-all duration-300 z-40",onClick:n}),h.jsxs("div",{className:`
        fixed right-0 top-0 h-full w-80 bg-white shadow-2xl border-l border-gray-200
        transform transition-all duration-300 ease-out z-50
        ${o?"translate-x-0":"translate-x-full"}
        flex flex-col
      `,children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white shrink-0",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:h.jsx("span",{className:"text-white text-sm",children:""})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),h.jsxs("p",{className:"text-xs text-gray-500",children:[r.length," contact",r.length!==1?"s":""," on this deal"]})]})]}),h.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto",children:s?h.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((c,u)=>h.jsx("div",{className:"animate-pulse",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},u))}):i?h.jsxs("div",{className:"p-6 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:h.jsx("span",{className:"text-red-500 text-lg",children:""})}),h.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Contacts"}),h.jsx("p",{className:"text-sm text-gray-500",children:i})]}):r.length===0?h.jsxs("div",{className:"p-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-gray-300 text-2xl",children:""})}),h.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Contacts Yet"}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add contacts to this deal to see them here"}),h.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Contact"})]}):h.jsx("div",{className:"divide-y divide-gray-50",children:r.map(c=>h.jsx("div",{className:"p-4 hover:bg-gray-25 transition-colors",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-sm",children:h.jsx("span",{className:"text-white font-medium text-sm",children:a(c.contact_name)})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx("button",{className:"text-sm font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate",onClick:()=>{console.log("View contact:",c.contact_id)},children:c.contact_name}),c.primary_contact&&h.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:"Primary"})]}),h.jsx("p",{className:"text-xs font-medium text-blue-600 mb-2",children:c.role_label}),h.jsxs("div",{className:"space-y-1",children:[c.contact_email&&h.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[" ",c.contact_email]}),c.contact_phone&&h.jsxs("button",{onClick:()=>l(c.contact_phone,c.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer",children:[" ",c.contact_phone]}),c.contact_mobile&&h.jsxs("button",{onClick:()=>l(c.contact_mobile,c.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer block",children:[" ",c.contact_mobile]})]})]})]})},c.id))})}),h.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 shrink-0",children:h.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[h.jsx("span",{className:"mr-2",children:"+"}),"Add Contact Role"]})})]})]}):null},yn=({label:e,value:t,onChange:n,disabled:r=!1})=>{const[s,i]=b.useState(!1),[o,a]=b.useState(""),l=t?`${t.toFixed(1)}%`:"0.0%",c=()=>{r||(i(!0),a((t==null?void 0:t.toString())||""))},u=()=>{const p=parseFloat(o);n(isNaN(p)?null:p),i(!1)},d=()=>{i(!1),a("")},f=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),u()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),d())};return s?h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),h.jsx("input",{type:"number",step:"0.1",value:o,onChange:p=>a(p.target.value),onBlur:u,onKeyDown:f,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",autoFocus:!0})]}):h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsx("div",{onClick:c,className:`mt-1 block w-full rounded border-gray-300 shadow-sm px-3 py-2 transition-colors border text-sm ${r?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200"}`,title:r?"Not editable":"Click to edit",children:l})]})},PA=({value:e,onChange:t,label:n="Referral Payee"})=>{const[r,s]=b.useState(""),[i,o]=b.useState([]),a=b.useRef(null);b.useEffect(()=>{(async()=>{if(e){const{data:f}=await q.from("client").select("client_name").eq("id",e).single();f!=null&&f.client_name&&s(f.client_name)}else s("")})()},[e]),b.useEffect(()=>{const f=setTimeout(async()=>{const p=r.trim();if(!p)return o([]);const{data:g}=await q.from("client").select("id, client_name").ilike("client_name",`%${p}%`).order("client_name",{ascending:!0}).limit(5);g&&o(g.map(w=>({id:w.id,label:w.client_name})))},150);return()=>clearTimeout(f)},[r]);const l=()=>{a.current&&a.current.select()},c=(d,f)=>{t(d),s(f),o([])},u=d=>{const f=d.target.value;s(f),f===""&&t(null)};return h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),h.jsx("input",{ref:a,type:"text",value:r,onChange:u,onFocus:l,placeholder:`Search ${n.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),i.filter(d=>d.label!==r).length>0&&h.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:i.filter(d=>d.label!==r).map(d=>h.jsx("li",{onClick:()=>c(d.id,d.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:d.label},d.id))})]})},$h=(e,t=[])=>b.useMemo(()=>{const n=(e==null?void 0:e.fee)||0,r=(e==null?void 0:e.referral_fee_usd)||0,s=(e==null?void 0:e.house_usd)||0,i=n-r-s,o=(e==null?void 0:e.origination_percent)||0,a=(e==null?void 0:e.site_percent)||0,l=(e==null?void 0:e.deal_percent)||0,c=o/100*i,u=a/100*i,d=l/100*i,f=c+u+d,p=t.map(m=>{const v=(m==null?void 0:m.split_origination_percent)||0,_=(m==null?void 0:m.split_site_percent)||0,S=(m==null?void 0:m.split_deal_percent)||0,k=v/100*c,C=_/100*u,E=S/100*d,N=k+C+E;return{...m,calculatedOriginationUSD:k,calculatedSiteUSD:C,calculatedDealUSD:E,calculatedTotalUSD:N}}),g=p.reduce((m,v)=>m+(v.split_origination_percent||0),0),w=p.reduce((m,v)=>m+(v.split_site_percent||0),0),x=p.reduce((m,v)=>m+(v.split_deal_percent||0),0),y=p.reduce((m,v)=>m+v.calculatedTotalUSD,0);return{baseAmounts:{gci:n,referralFeeUsd:r,houseUsd:s,agci:i,originationPercent:o,sitePercent:a,dealPercent:l,originationUSD:c,siteUSD:u,dealUSD:d,totalDealUSD:f},brokerSplits:p,totals:{originationPercent:g,sitePercent:w,dealPercent:x,brokerUSD:y},validation:{isOriginationValid:g<=100,isSiteValid:w<=100,isDealValid:x<=100,areAllValid:g<=100&&w<=100&&x<=100}}},[e,t]),TA=({title:e,help:t,children:n})=>h.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&h.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),n]}),OA=({deal:e,onFieldUpdate:t})=>{const{baseAmounts:n}=$h(e),r=i=>i==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i),s=i=>i==null?"0.0%":`${i.toFixed(1)}%`;return h.jsx(TA,{title:"Commission Details",help:"Set commission percentages and amounts. Click any percentage to edit.",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Fee"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(e.fee)})]}),h.jsx(yn,{label:"Commission Rate %",value:e.commission_percent,onChange:i=>t("commission_percent",i)}),h.jsx(yn,{label:"Referral Fee %",value:e.referral_fee_percent,onChange:i=>t("referral_fee_percent",i)}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referral Fee $"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(e.referral_fee_usd)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of Payments"}),h.jsx("input",{type:"number",step:"1",min:"1",value:e.number_of_payments||1,onChange:i=>t("number_of_payments",parseInt(i.target.value)||1),className:"mt-1 block w-full rounded border-gray-300 shadow-sm cursor-pointer hover:bg-blue-50 px-3 py-2 transition-colors border border-transparent hover:border-blue-200 text-sm"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(PA,{value:e.referral_payee_client_id,onChange:i=>t("referral_payee_client_id",i),label:"Referral Payee"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GCI"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(e.gci)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AGCI"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(e.agci)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(yn,{label:"House %",value:e.house_percent,onChange:i=>t("house_percent",i)}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House $"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(e.house_usd)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(yn,{label:"Origination %",value:e.origination_percent,onChange:i=>t("origination_percent",i)}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origination $"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(n.originationUSD)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(yn,{label:"Site %",value:e.site_percent,onChange:i=>t("site_percent",i)}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Site $"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(n.siteUSD)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(yn,{label:"Deal %",value:e.deal_percent,onChange:i=>t("deal_percent",i)}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal $"}),h.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:r(n.dealUSD)})]})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Broker Split Summary (Origination + Site + Deal)"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-blue-700",children:"Origination:"})," ",s(e.origination_percent)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-blue-700",children:"Site:"})," ",s(e.site_percent)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-blue-700",children:"Deal:"})," ",s(e.deal_percent)]}),h.jsxs("div",{className:"font-semibold",children:[h.jsx("span",{className:"text-blue-700",children:"Total:"})," ",s((e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0))]})]}),h.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"House % is separate and not included in the 100% split validation."})]})]})})},Ux=({isOpen:e,onClose:t,onConfirm:n,title:r,itemName:s,message:i})=>e?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),h.jsx("div",{className:"ml-3",children:h.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r})})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",h.jsx("strong",{children:s}),"?"]}),i&&h.jsx("p",{className:"text-sm text-gray-600 mt-2",children:i})]}),h.jsxs("div",{className:"flex justify-end space-x-3",children:[h.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})}):null,fn=e=>e==null||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Eu=({value:e,onChange:t,label:n})=>{const[r,s]=b.useState(!1),[i,o]=b.useState(""),a=e?`${e.toFixed(1)}%`:"0.0%",l=()=>{s(!0),o((e==null?void 0:e.toString())||"0")},c=()=>{const f=parseFloat(i);t(isNaN(f)?null:f),s(!1)},u=()=>{s(!1),o("")},d=f=>{f.key==="Enter"?c():f.key==="Escape"&&u()};return r?h.jsx("input",{type:"number",step:"0.1",value:i,onChange:f=>o(f.target.value),onBlur:c,onKeyDown:d,className:"w-16 px-1 py-0.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}):h.jsx("span",{onClick:l,className:"cursor-pointer hover:bg-blue-50 px-1 py-0.5 rounded text-sm",title:`Click to edit ${n||"percentage"}`,children:a})},RA=({deal:e,onDealUpdate:t})=>{const[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState(!0),[l,c]=b.useState(null),[u,d]=b.useState({isOpen:!1,splitId:"",brokerName:""}),{baseAmounts:f}=$h(e,n),p=S=>{const k=s.find(C=>C.id===S);return k?k.name:"Unknown Broker"};b.useEffect(()=>{(async()=>{if(e.id)try{a(!0);const{data:k,error:C}=await q.from("commission_split").select("*").eq("deal_id",e.id).order("created_at");if(C)throw C;const{data:E,error:N}=await q.from("broker").select("*").order("name");if(N)throw N;r(k||[]),i(E||[])}catch(k){console.error("Error fetching commission data:",k),c("Failed to load commission splits")}finally{a(!1)}})()},[e.id]);const g=async(S,k,C)=>{console.log(" updateCommissionSplit called:",{splitId:S,field:k,value:C});try{const E=n.find(I=>I.id===S);if(!E)return;const N={...E};k==="split_origination_percent"?(N.split_origination_percent=C||0,N.split_origination_usd=(C||0)/100*f.originationUSD):k==="split_site_percent"?(N.split_site_percent=C||0,N.split_site_usd=(C||0)/100*f.siteUSD):k==="split_deal_percent"&&(N.split_deal_percent=C||0,N.split_deal_usd=(C||0)/100*f.dealUSD),N.split_broker_total=(N.split_origination_usd||0)+(N.split_site_usd||0)+(N.split_deal_usd||0);const{error:P}=await q.from("commission_split").update({split_origination_percent:N.split_origination_percent,split_origination_usd:N.split_origination_usd,split_site_percent:N.split_site_percent,split_site_usd:N.split_site_usd,split_deal_percent:N.split_deal_percent,split_deal_usd:N.split_deal_usd,split_broker_total:N.split_broker_total}).eq("id",S);if(P)throw P;r(I=>I.map($=>$.id===S?N:$)),console.log(" Commission split updated successfully")}catch(E){console.error("Error updating commission split:",E),c("Failed to update commission split")}},w=async S=>{if(e.id)try{if(!s.find(P=>P.id===S))return;const C={deal_id:e.id,broker_id:S,split_origination_percent:0,split_origination_usd:0,split_site_percent:0,split_site_usd:0,split_deal_percent:0,split_deal_usd:0,split_broker_total:0},{data:E,error:N}=await q.from("commission_split").insert(C).select("*").single();if(N)throw N;r([...n,E])}catch(k){console.error("Error adding broker split:",k),c("Failed to add broker split")}},x=async S=>{try{const{error:k}=await q.from("commission_split").delete().eq("id",S);if(k){if(k.code==="23503"&&k.message.includes("payment_split")){c("Cannot delete this broker split because it has related payments. You must delete the payments first, or contact support to safely remove this split.");return}throw k}r(C=>C.filter(E=>E.id!==S)),c(null),d({isOpen:!1,splitId:"",brokerName:""})}catch(k){console.error("Error deleting broker split:",k),c("Failed to delete broker split: "+(k instanceof Error?k.message:"Unknown error")),d({isOpen:!1,splitId:"",brokerName:""})}},y=(S,k)=>{d({isOpen:!0,splitId:S,brokerName:k})},m=()=>{x(u.splitId)},v=()=>{d({isOpen:!1,splitId:"",brokerName:""})},_=s.filter(S=>!n.some(k=>k.broker_id===S.id));return o?h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Broker Commission Splits"}),h.jsx("div",{className:"text-gray-500",children:"Loading..."})]}):h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Broker Commission Splits"}),_.length>0&&h.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:S=>{S.target.value&&(w(S.target.value),S.target.value="")},defaultValue:"",children:[h.jsx("option",{value:"",children:"+ Add Broker"}),_.map(S=>h.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:h.jsx("p",{className:"text-red-600 text-sm",children:l})}),n.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx("p",{children:"No broker splits configured for this deal."}),_.length>0&&h.jsx("p",{className:"text-sm mt-2",children:"Use the dropdown above to add brokers."})]}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-gray-200",children:[h.jsx("th",{className:"text-left py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Broker"}),h.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination %"}),h.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination $"}),h.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site %"}),h.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site $"}),h.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal %"}),h.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal $"}),h.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total $"}),h.jsx("th",{className:"w-16 text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{children:n.map(S=>h.jsxs("tr",{className:"border-b border-gray-100",children:[h.jsx("td",{className:"py-3 px-3 w-48 whitespace-nowrap",children:h.jsx("div",{className:"text-xs text-gray-900 font-medium",children:p(S.broker_id)})}),h.jsx("td",{className:"py-3 px-3 text-center",children:h.jsx(Eu,{value:S.split_origination_percent,onChange:k=>g(S.id,"split_origination_percent",k),label:"Origination %"})}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fn((S.split_origination_percent||0)/100*f.originationUSD)}),h.jsx("td",{className:"py-3 px-3 text-center",children:h.jsx(Eu,{value:S.split_site_percent,onChange:k=>g(S.id,"split_site_percent",k),label:"Site %"})}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fn((S.split_site_percent||0)/100*f.siteUSD)}),h.jsx("td",{className:"py-3 px-3 text-center",children:h.jsx(Eu,{value:S.split_deal_percent,onChange:k=>g(S.id,"split_deal_percent",k),label:"Deal %"})}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fn((S.split_deal_percent||0)/100*f.dealUSD)}),h.jsx("td",{className:"py-3 px-3 text-right text-sm font-medium text-gray-900",children:fn((S.split_origination_percent||0)/100*f.originationUSD+(S.split_site_percent||0)/100*f.siteUSD+(S.split_deal_percent||0)/100*f.dealUSD)}),h.jsx("td",{className:"py-3 px-3 text-center",children:h.jsx("button",{onClick:()=>y(S.id,p(S.broker_id)),className:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Delete broker split",children:""})})]},S.id))}),h.jsx("tfoot",{children:h.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[h.jsx("td",{className:"py-3 px-3 text-sm text-gray-900",children:"TOTALS"}),h.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=n.reduce((C,E)=>C+(Number(E.split_origination_percent)||0),0),k=Math.abs(S-100)<.1;return h.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fn(n.reduce((S,k)=>S+(k.split_origination_percent||0)/100*f.originationUSD,0))}),h.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=n.reduce((C,E)=>C+(Number(E.split_site_percent)||0),0),k=Math.abs(S-100)<.1;return h.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fn(n.reduce((S,k)=>S+(k.split_site_percent||0)/100*f.siteUSD,0))}),h.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const S=n.reduce((C,E)=>C+(Number(E.split_deal_percent)||0),0),k=Math.abs(S-100)<.1;return h.jsxs("span",{className:`text-sm ${k?"text-blue-600":"text-red-600"}`,children:[S.toFixed(1),"%"]})})()}),h.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fn(n.reduce((S,k)=>S+(k.split_deal_percent||0)/100*f.dealUSD,0))}),h.jsx("td",{className:"py-3 px-3 text-right text-sm font-semibold text-blue-600",children:fn(n.reduce((S,k)=>{const C=(k.split_origination_percent||0)/100*f.originationUSD,E=(k.split_site_percent||0)/100*f.siteUSD,N=(k.split_deal_percent||0)/100*f.dealUSD;return S+C+E+N},0))}),h.jsx("td",{className:"py-3 px-3"})]})})]})}),h.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[h.jsxs("p",{children:[" Split percentages are applied to AGCI: ",fn(Number(e.agci||0))]}),h.jsx("p",{children:" These splits serve as templates for payment generation"}),h.jsx("p",{children:" Click on percentage values to edit them directly"})]}),h.jsx(Ux,{isOpen:u.isOpen,onClose:v,onConfirm:m,title:"Delete Broker Split",itemName:u.brokerName,message:"This action cannot be undone. If this broker has related payments, the deletion will be blocked."})]})},Bg=({title:e,help:t,children:n})=>h.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&h.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),n]}),jA=({dealId:e,deal:t,onDealUpdate:n})=>{const[r,s]=b.useState(t),[i,o]=b.useState([]),[a,l]=b.useState([]),[c,u]=b.useState([]),[d,f]=b.useState(!0),[p,g]=b.useState(null),[w,x]=b.useState(!1);b.useEffect(()=>{s(t)},[t]),b.useEffect(()=>{y()},[e]);const y=async()=>{try{f(!0);const{data:N,error:P}=await q.from("commission_split").select("*").eq("deal_id",e);if(P)throw P;const{data:I,error:$}=await q.from("broker").select("*");if($)throw $;l(I.filter(L=>L.active));const M=N.map(L=>{const z=I.find(D=>D.id===L.broker_id);return{...L,broker_name:z?z.name:"Unknown Broker"}});o(M);const{data:U,error:H}=await q.from("payment").select("*").eq("deal_id",e);if(H)throw H;console.log(" CommissionTab fetchCommissionData - payments found:",{dealId:e,paymentsCount:(U==null?void 0:U.length)||0,payments:U==null?void 0:U.map(L=>({id:L.id,sequence:L.payment_sequence,amount:L.payment_amount,estimated_date:L.payment_date_estimated,actual_date:L.payment_date_actual}))}),u(U)}catch(N){g(N instanceof Error?N.message:"An error occurred")}finally{f(!1)}},m=N=>{const P=N.deal_value||0,I=N.commission_percent||0,$=N.referral_fee_percent||0,M=N.flat_fee_override??P*(I/100),U=M*($/100),H=M-U,L=H*((N.house_percent||0)/100),z=H-L,D=z*((N.origination_percent||0)/100),O=z*((N.site_percent||0)/100),j=z*((N.deal_percent||0)/100);return{...N,fee:Math.round(M*100)/100,gci:Math.round(H*100)/100,referral_fee_usd:Math.round(U*100)/100,agci:Math.round(z*100)/100,house_usd:Math.round(L*100)/100,origination_usd:Math.round(D*100)/100,site_usd:Math.round(O*100)/100,deal_usd:Math.round(j*100)/100}},v=async(N,P)=>{if(!r)return;const I={...r,[N]:P},$=["commission_percent","referral_fee_percent","house_percent","origination_percent","site_percent","deal_percent"];let M=I;$.includes(N)&&(M=m(I));const U={commission_percent:M.commission_percent,referral_fee_percent:M.referral_fee_percent,house_percent:M.house_percent,origination_percent:M.origination_percent,site_percent:M.site_percent,deal_percent:M.deal_percent,number_of_payments:M.number_of_payments,fee:M.fee,updated_at:new Date().toISOString()};M.gci!==void 0&&(U.gci=M.gci),M.referral_fee_usd!==void 0&&(U.referral_fee_usd=M.referral_fee_usd),M.agci!==void 0&&(U.agci=M.agci),M.house_usd!==void 0&&(U.house_usd=M.house_usd),M.origination_usd!==void 0&&(U.origination_usd=M.origination_usd),M.site_usd!==void 0&&(U.site_usd=M.site_usd),M.deal_usd!==void 0&&(U.deal_usd=M.deal_usd),N==="referral_payee_client_id"&&M.referral_payee_client_id!==void 0&&(U.referral_payee_client_id=M.referral_payee_client_id);try{console.log("Updating field:",N,"with value:",P),console.log("Update payload:",U);const{data:H,error:L}=await q.from("deal").update(U).eq("id",e).select().single();if(L)throw console.error("Supabase error:",L),L;console.log("Update successful:",H),s(H),n(H)}catch(H){console.error("Error saving:",H),alert(`Error saving: ${H instanceof Error?H.message:"Failed to save"}`)}},_=async()=>{try{x(!0);const{data:N,error:P}=await q.rpc("generate_payments_for_deal",{deal_uuid:e});if(P)throw P;await y()}catch(N){alert(`Error: ${N instanceof Error?N.message:"Failed to generate payments"}`)}finally{x(!1)}},S=N=>N==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),k=N=>{const P=[],I=Number(N.origination_percent)||0,$=Number(N.site_percent)||0,M=Number(N.deal_percent)||0,U=Number(N.commission_percent)||0,H=Number(N.referral_fee_percent)||0,L=I+$+M;return L>100&&P.push("Broker split percentages total "+L.toFixed(1)+"% (over 100%)"),U>50&&P.push("Commission rate "+U.toFixed(1)+"% seems high"),H>100&&P.push("Referral fee "+H.toFixed(1)+"% cannot exceed 100%"),P};if(d)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"text-sm text-gray-600",children:"Loading commission data..."})});if(p)return h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[h.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Loading Commission Data"}),h.jsx("p",{className:"text-sm text-red-600",children:p}),h.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Try Again"})]});if(!r)return h.jsx("div",{className:"text-center text-gray-600 py-8",children:h.jsx("p",{className:"text-sm",children:"Deal not found"})});const C=c.length>0,E=k(r);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("h3",{className:"text-xs font-medium text-blue-800 mb-1",children:"Deal Fee"}),h.jsx("p",{className:"text-lg font-bold text-blue-900",children:S(r.fee)})]}),h.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[h.jsx("h3",{className:"text-xs font-medium text-purple-800 mb-1",children:"Number of Payments"}),h.jsx("p",{className:"text-lg font-bold text-purple-900",children:r.number_of_payments})]}),h.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[h.jsx("h3",{className:"text-xs font-medium text-orange-800 mb-1",children:"Commission Rate"}),h.jsx("p",{className:"text-lg font-bold text-orange-900",children:r.commission_percent?`${r.commission_percent.toFixed(1)}%`:"0%"})]})]}),E.length>0&&h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),h.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:E.map((N,P)=>h.jsx("li",{children:N},P))})]})]})}),C&&h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payments Already Generated"}),h.jsxs("p",{className:"mt-1 text-xs text-yellow-700",children:["This deal already has ",c.length," payment",c.length!==1?"s":""," generated. To regenerate payments, you would need to delete the existing ones first."]})]})]})}),i.length===0&&h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"ml-3",children:[h.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"No Commission Splits Found"}),h.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Commission splits are imported from Salesforce. If this deal should have commission data, check that it exists in Salesforce and run the migration again."})]})]})}),h.jsx(OA,{deal:r,onFieldUpdate:v}),h.jsx(RA,{deal:r,onDealUpdate:n}),h.jsxs(Bg,{title:"Payment Generation",help:"Generate payments based on commission splits",children:[h.jsx("div",{className:"flex justify-end mb-3",children:h.jsx("button",{onClick:_,disabled:i.length===0||C||w,className:`px-4 py-2 rounded font-medium text-sm ${i.length>0&&!C&&!w?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:w?"Generating...":"Generate Payments"})}),i.length===0&&h.jsx("div",{className:"text-center text-gray-500 py-4",children:h.jsx("p",{className:"text-sm",children:"No commission splits available for payment generation."})})]}),i.length>0&&h.jsx(Bg,{title:"Quick Summary",help:"Overview of commission allocation",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[h.jsx("h4",{className:"text-xs font-medium text-green-800 mb-1",children:"Total Commission Splits"}),h.jsx("p",{className:"text-lg font-bold text-green-900",children:i.length})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[h.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Total Broker Amount"}),h.jsx("p",{className:"text-lg font-bold text-blue-900",children:S(i.reduce((N,P)=>N+(P.split_broker_total||0),0))})]}),h.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[h.jsx("h4",{className:"text-xs font-medium text-purple-800 mb-1",children:"Payments Status"}),h.jsx("p",{className:"text-lg font-bold text-purple-900",children:C?`${c.length} Generated`:"Not Generated"})]}),h.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[h.jsx("h4",{className:"text-xs font-medium text-orange-800 mb-1",children:"Per Payment Amount"}),h.jsx("p",{className:"text-lg font-bold text-orange-900",children:r.number_of_payments&&r.fee?S(r.fee/r.number_of_payments):"$0.00"})]})]})})]})},Wx=(e,t=[],n=[])=>{const r=b.useMemo(()=>{const l=e.fee||0,c=e.number_of_payments||1,u=c>0?l/c:0,d=u*c;return{calculatedPaymentAmount:u,totalCalculatedPayments:d}},[e.fee,e.number_of_payments]),s=b.useMemo(()=>{const l=r.calculatedPaymentAmount,c=e.referral_fee_usd||0,u=e.number_of_payments||1,d=c/u,p=(e.house_usd||0)/u,g=l-d-p,w=e.origination_percent||0,x=e.site_percent||0,y=e.deal_percent||0,m=w/100*g,v=x/100*g,_=y/100*g;return{gci:l,referral_fee_usd:d,house_usd:p,agci:g,origination_percent:w,origination_usd:m,site_percent:x,site_usd:v,deal_percent:y,deal_usd:_}},[r.calculatedPaymentAmount,e.fee,e.referral_fee_usd,e.house_usd,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),i=b.useMemo(()=>l=>l.map(c=>{const u=(c.split_origination_percent||0)/100*s.origination_usd,d=(c.split_site_percent||0)/100*s.site_usd,f=(c.split_deal_percent||0)/100*s.deal_usd,p=u+d+f;return{broker_id:c.broker_id||"",origination_amount:u,site_amount:d,deal_amount:f,total_amount:p}}),[s]),o=b.useMemo(()=>{const l=[];let c=!0;return(!e.fee||e.fee<=0)&&(l.push("Commission fee is not set"),c=!1),(!e.number_of_payments||e.number_of_payments<1)&&(l.push("Number of payments must be at least 1"),c=!1),e.number_of_payments&&e.number_of_payments>10&&(l.push("Number of payments cannot exceed 10"),c=!1),(e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0)===0&&l.push("Commission split percentages are not configured"),{canGeneratePayments:c,validationMessages:l}},[e.fee,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),a=b.useMemo(()=>t.map(l=>({payment_id:l.payment_id,calculated_amount:r.calculatedPaymentAmount,database_amount:l.payment_amount||0,needs_update:Math.abs((l.payment_amount||0)-r.calculatedPaymentAmount)>.01})),[t,r.calculatedPaymentAmount]);return{calculatedPaymentAmount:r.calculatedPaymentAmount,totalCalculatedPayments:r.totalCalculatedPayments,paymentCommissionBreakdown:s,calculateBrokerSplitsForPayment:i,canGeneratePayments:o.canGeneratePayments,validationMessages:o.validationMessages,paymentComparisons:a}},IA=({deal:e,hasPayments:t,existingPayments:n=[],commissionSplits:r=[],onGeneratePayments:s,onUpdatePaymentAmounts:i,generatingPayments:o})=>{const{calculatedPaymentAmount:a,totalCalculatedPayments:l,paymentCommissionBreakdown:c,canGeneratePayments:u,validationMessages:d,paymentComparisons:f}=Wx(e,n,r),p=e.number_of_payments||1,g=y=>y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),w=f.some(y=>y.needs_update);n.length<p;const x=n.length===p;return h.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Generation"}),t&&h.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.length," of ",p," Payments Created"]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Actions"}),h.jsxs("div",{className:"space-y-3",children:[x?h.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3",children:[h.jsx("div",{className:"font-medium mb-1",children:" All Payments Created"}),h.jsxs("div",{children:["All ",p," payments have been created for this deal."]})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:s,disabled:!u||o,className:`w-full px-4 py-3 rounded-md font-medium transition-colors ${u&&!o?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating Additional Payments...":"Generating Payments..."]}):t?`Create Remaining ${p-n.length} Payments`:`Generate ${p} Payment${p>1?"s":""}`}),t&&h.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-3",children:[h.jsx("div",{className:"font-medium mb-1",children:" Safe Generation"}),h.jsx("div",{children:"This will create the remaining payments without affecting existing payment records or their associated invoice data."})]})]}),t&&w&&i&&h.jsx("button",{onClick:i,disabled:o,className:"w-full px-4 py-2 border border-amber-300 bg-amber-50 text-amber-700 rounded-md font-medium hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Payment Amounts"}),!u&&h.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3",children:[h.jsx("div",{className:"font-medium mb-1",children:"Configuration Required"}),h.jsx("div",{children:"Complete commission configuration in the Commission tab before generating payments."})]})]}),u&&p>1||t&&f.length>0?h.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u&&p>1&&h.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[h.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Payment Schedule Preview"}),h.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[Array.from({length:p},(y,m)=>{const v=n.find(_=>_.payment_sequence===m+1);return h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("span",{children:["Payment ",m+1,":"]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:`font-medium ${v?"text-green-600":""}`,children:["$",g(a),v&&" "]}),h.jsxs("div",{className:"text-xs text-green-600 opacity-75",children:["AGCI: $",g(c.agci)]})]})]},m)}),h.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[h.jsx("span",{children:"Total:"}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{children:["$",g(l)]}),h.jsxs("div",{className:"text-xs text-green-600 opacity-75 font-normal",children:["Total AGCI: $",g(c.agci*p)]})]})]})]})]}),t&&f.length>0&&h.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[h.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Current vs Calculated"}),h.jsx("div",{className:"text-sm text-gray-700 space-y-1",children:f.map((y,m)=>h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{children:["Payment ",m+1,":"]}),h.jsxs("span",{className:y.needs_update?"text-amber-700 font-medium":"text-gray-600",children:["$",g(y.database_amount),"  $",g(y.calculated_amount),y.needs_update&&" "]})]},m))})]})]}):null]})]})};function MA({title:e,titleId:t,...n},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const AA=b.forwardRef(MA),Yx=AA;function LA({title:e,titleId:t,...n},r){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const FA=b.forwardRef(LA),Hx=FA,zx=e=>{if(!e)return"Unknown";const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r).toLocaleDateString()},xr=(e,t="Not set")=>e?zx(e):t,$A=e=>e||"",BA=({payment:e,totalPayments:t,isExpanded:n,onToggleExpansion:r,onUpdatePayment:s,onDeletePayment:i})=>(console.log(" PaymentSummaryRow payment dates:",{id:e.id,payment_sequence:e.payment_sequence,payment_date_estimated:e.payment_date_estimated,payment_received_date:e.payment_received_date}),h.jsxs("div",{className:"p-4 grid grid-cols-12 items-center gap-4",children:[h.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[h.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded flex-shrink-0",children:n?h.jsx(Yx,{className:"h-4 w-4 text-gray-500"}):h.jsx(Hx,{className:"h-4 w-4 text-gray-500"})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:["Payment ",e.payment_sequence," of ",t]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["$",(e.payment_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsx("div",{className:"text-xs text-gray-500",children:"Invoice #"}),h.jsx("div",{className:"text-sm text-gray-900",children:e.orep_invoice||"-"})]}),h.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:e.payment_received||!1,onChange:o=>s({payment_received:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"}),h.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e.payment_received?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.payment_received?"Received":"Pending"})]}),h.jsx("div",{className:"col-span-3",children:e.payment_received?h.jsx("div",{className:"w-full px-2 py-1 text-sm",children:h.jsxs("div",{className:"font-medium text-green-800",children:["Paid Date: ",zx(e.payment_received_date)]})}):h.jsxs("div",{children:[e.payment_date_estimated&&h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Estimated Pmt Date"}),h.jsx("input",{type:"date",value:e.payment_date_estimated||"",onChange:o=>s({payment_date_estimated:o.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",placeholder:"Estimated payment date"}),!e.payment_date_estimated&&h.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Set estimated payment date"})]})}),h.jsx("div",{className:"col-span-2 text-right",children:h.jsx("button",{onClick:i,className:"text-red-600 hover:text-red-900 text-sm whitespace-nowrap",children:"Delete"})})]})),UA=({split:e,brokerName:t,paymentAmount:n,onPercentageChange:r,validationTotals:s})=>h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{children:h.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t})}),h.jsx("div",{className:"text-right",children:h.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2})]})})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[h.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Origination"}),h.jsx(yn,{label:"",value:e.split_origination_percent||0,onChange:i=>r("split_origination_percent",i)}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_origination_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),h.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Site"}),h.jsx(yn,{label:"",value:e.split_site_percent||0,onChange:i=>r("split_site_percent",i)}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_site_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),h.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Deal"}),h.jsx(yn,{label:"",value:e.split_deal_percent||0,onChange:i=>r("split_deal_percent",i)}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_deal_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),h.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Total"}),h.jsxs("div",{className:`text-sm font-semibold ${s&&!s.isValid?"text-red-600":"text-blue-600"}`,children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s&&!s.isValid&&h.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Check totals"})]})]})]}),WA=({payment:e,deal:t,clients:n,onUpdatePayment:r})=>{const s=()=>{if(!t.referral_payee_client_id)return"No referral payee set";if(!n||n.length===0)return"Client data not available";const a=n.find(l=>l.id===t.referral_payee_client_id);return a?a.name||"Unknown Client":"Client not found"},i=(a,l,c=!1)=>{const u=e[l];return h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:a}),c&&u&&h.jsx("div",{className:"text-xs text-gray-500 mb-1",children:xr(u)}),h.jsx("input",{type:"date",value:$A(u),onChange:d=>r({[l]:d.target.value||null}),className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})},o=(a,l,c)=>{const u=e[l];return h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:a}),h.jsx("input",{type:"text",value:u||"",onChange:d=>r({[l]:d.target.value||null}),placeholder:c,className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})};return h.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:h.jsxs("div",{className:"p-4 md:p-6",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Details"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Payment Dates & Tracking"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6",children:[i("Estimated Payment Date","payment_date_estimated"),i("Payment Received Date","payment_received_date"),i("Invoice Date","payment_invoice_date"),o("OREP Invoice","orep_invoice","Enter OREP Invoice number")]})]}),(t.referral_payee_client_id||t.referral_fee_usd||t.referral_fee_percent)&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Referral Information"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Payee"}),h.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:s()})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Fee"}),h.jsxs("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:[t.referral_fee_usd?`$${t.referral_fee_usd.toLocaleString("en-US",{minimumFractionDigits:2})}`:"No referral fee set",t.referral_fee_percent&&h.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.referral_fee_percent,"%)"]})]})]})]})]}),(e.sf_payment_date_est||e.sf_payment_date_actual||e.sf_payment_date_received||e.sf_payment_invoice_date)&&h.jsxs("div",{className:"mt-6",children:[h.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Salesforce Date Fields (Read-only)"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-xs",children:[e.sf_payment_date_est&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"SF Est Date:"})," ",h.jsx("span",{className:"text-gray-500",children:xr(e.sf_payment_date_est)})]}),e.sf_payment_date_actual&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"SF Actual Date:"})," ",h.jsx("span",{className:"text-gray-500",children:xr(e.sf_payment_date_actual)})]}),e.sf_payment_date_received&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"SF Received Date:"})," ",h.jsx("span",{className:"text-gray-500",children:xr(e.sf_payment_date_received)})]}),e.sf_payment_invoice_date&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-600",children:"SF Invoice Date:"})," ",h.jsx("span",{className:"text-gray-500",children:xr(e.sf_payment_invoice_date)})]})]})]}),h.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-gray-500",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Payment Received:"})," ",e.payment_received?"Yes":"No",e.payment_received_date&&h.jsxs("span",{className:"ml-1",children:["(",xr(e.payment_received_date),")"]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"SF Payment Status:"})," ",e.sf_payment_status||"Not set"]}),e.qb_sync_status&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"QB Sync Status:"})," ",e.qb_sync_status]}),e.qb_last_sync&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Last QB Sync:"})," ",xr(e.qb_last_sync)]})]})})]})})},YA=e=>{const t={deal:0,site:0,origination:0,isValid:!0};return e.forEach(n=>{t.deal+=n.split_deal_percent||0,t.site+=n.split_site_percent||0,t.origination+=n.split_origination_percent||0}),t.isValid=t.deal===100&&t.site===100&&t.origination===100,t},HA=(e,t,n,r)=>e.map(s=>{let i=s.split_origination_usd||0,o=s.split_site_usd||0,a=s.split_deal_usd||0,l=s.split_broker_total||0;if(n&&r){const c=n.number_of_payments||1,u=(n.referral_fee_usd||0)/c,d=(n.house_usd||0)/c,f=r-u-d,p=(n.origination_percent||0)/100*f,g=(n.site_percent||0)/100*f,w=(n.deal_percent||0)/100*f;i=p*(s.split_origination_percent||0)/100,o=g*(s.split_site_percent||0)/100,a=w*(s.split_deal_percent||0)/100,l=i+o+a}return{...s,split_origination_usd:i,split_site_usd:o,split_deal_usd:a,split_broker_total:l}}),zA=({payment:e,splits:t,brokers:n,clients:r,dealAmounts:s,deal:i,onSplitPercentageChange:o,onUpdatePayment:a})=>{const[l,c]=b.useState(!1),u=w=>{const x=n.find(y=>y.id===w);return x?x.name:"Unknown Broker"},f=(()=>{const w=e.payment_amount||0,x=i.number_of_payments||1,y=(i.referral_fee_usd||0)/x,m=(i.house_usd||0)/x;return w-y-m})(),p=HA(t,s,i,e.payment_amount||0),g=YA(p);return h.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Commission Breakdown"}),h.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Payment #",e.payment_sequence,"  AGCI: $",f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),h.jsx("div",{className:"space-y-4",children:p.map(w=>h.jsx(UA,{split:w,brokerName:u(w.broker_id),paymentAmount:e.payment_amount||0,onPercentageChange:(x,y)=>o(w.id,x,y),validationTotals:g},w.id))}),!g.isValid&&h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[h.jsx("div",{className:"text-sm font-medium text-red-800",children:"Percentage Validation Errors:"}),h.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[g.origination!==100&&`Origination: ${g.origination}% `,g.site!==100&&`Site: ${g.site}% `,g.deal!==100&&`Deal: ${g.deal}% `,"(must equal 100% each)"]})]})]}),h.jsxs("div",{className:"border-t border-gray-200",children:[h.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>c(!l),children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Dates, tracking, and referral information"})]}),h.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:l?h.jsx(Yx,{className:"h-4 w-4 text-gray-500"}):h.jsx(Hx,{className:"h-4 w-4 text-gray-500"})})]})}),l&&h.jsx(WA,{payment:e,deal:i,clients:r,onUpdatePayment:a})]})]})},VA=({payments:e,paymentSplits:t,brokers:n,clients:r,deal:s,onUpdatePayment:i,onDeletePayment:o,onUpdatePaymentSplit:a})=>{const[l,c]=b.useState(new Set),[u,d]=b.useState(!1),[f,p]=b.useState(null),g=v=>{c(_=>{const S=new Set(_);return S.has(v)?S.delete(v):S.add(v),S})},w=v=>t.filter(_=>_.payment_id===v),x=v=>{p(v),d(!0)},y=async()=>{if(f)try{await o(f.id),d(!1),p(null)}catch(v){console.error("Error deleting payment:",v)}},m=async(v,_,S)=>{try{const{error:k}=await q.from("payment_split").update({[_]:S||0}).eq("id",v);if(k)throw console.error("Supabase error:",k),k;a&&await a(v,_,S)}catch(k){console.error("Error updating payment split:",k),alert("Failed to update split percentage. Please try again.")}};return h.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[h.jsxs("div",{className:"p-6 border-b border-gray-200",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Management"}),h.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage individual payments and track their status"})]}),h.jsx("div",{className:"space-y-3",children:e.map(v=>{const _=w(v.id),S=l.has(v.id);return h.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white",children:[h.jsx(BA,{payment:v,totalPayments:e.length,isExpanded:S,onToggleExpansion:()=>g(v.id),onUpdatePayment:k=>i(v.id,k),onDeletePayment:()=>x(v)}),S&&h.jsx(zA,{payment:v,splits:_,brokers:n,clients:r,dealAmounts:{origination_usd:s.origination_usd||0,site_usd:s.site_usd||0,deal_usd:s.deal_usd||0},deal:s,onSplitPercentageChange:m,onUpdatePayment:k=>i(v.id,k)})]},v.id)})}),h.jsx(Ux,{isOpen:u,onClose:()=>d(!1),onConfirm:y,title:"Delete Payment",itemName:f?`Payment ${f.payment_sequence} of ${e.length}`:"",message:"This will permanently delete the payment and all associated commission splits. This action cannot be undone."})]})},GA=({statusSummary:e,hasOverdue:t,completionRate:n})=>h.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Payment Status"}),e.total>0&&h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(n),"% complete)"]})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.received>0&&h.jsx("div",{className:"px-2 py-1 bg-green-100 rounded whitespace-nowrap",children:h.jsxs("span",{className:"text-green-800 font-bold",children:[" Received ",e.received]})}),e.sent>0&&h.jsx("div",{className:"px-2 py-1 bg-blue-100 rounded whitespace-nowrap",children:h.jsxs("span",{className:"text-blue-800 font-bold",children:[" Sent ",e.sent]})}),e.pending>0&&h.jsx("div",{className:"px-2 py-1 bg-yellow-100 rounded whitespace-nowrap",children:h.jsxs("span",{className:"text-yellow-800 font-bold",children:[" Pending ",e.pending]})}),e.overdue>0&&h.jsx("div",{className:"px-2 py-1 bg-red-100 rounded whitespace-nowrap",children:h.jsxs("span",{className:"text-red-800 font-bold",children:[" Overdue ",e.overdue]})})]}),t&&h.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[h.jsx("strong",{children:"Action needed:"})," ",e.overdue," payment",e.overdue!==1?"s":"",e.overdue===1?" is":" are"," overdue and require",e.overdue===1?"s":""," attention."]}),e.total>0&&h.jsx("div",{className:"mt-3",children:h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})})]}),qA=({deal:e,commissionSplits:t=[],onEditClick:n,className:r=""})=>{const{baseAmounts:s}=$h(e,t),{gci:i,houseUsd:o,agci:a,originationPercent:l,sitePercent:c,dealPercent:u,originationUSD:d,siteUSD:f,dealUSD:p,totalDealUSD:g}=s,w=e.fee||0,x=e.referral_fee_percent||0,y=e.referral_fee_usd||x/100*w,m=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(P),v=w>0?o/w*100:0,_=w>0?y/w*100:0,S=w>0?o/w*100:0,k=w>0?d/w*100:0,C=w>0?f/w*100:0,E=w>0?p/w*100:0,N=_>0||S>0||k>0||C>0||E>0;return!e.fee||e.fee===0?h.jsxs("div",{className:`bg-white rounded-lg border p-4 ${r}`,children:[h.jsx("div",{className:"text-sm text-gray-500",children:"Commission breakdown will appear when commission fee is set"}),n&&h.jsx("button",{onClick:n,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Set Commission Details "})]}):h.jsxs("div",{className:`bg-white rounded-lg border p-4 ${r}`,children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm",children:[h.jsxs("span",{className:"font-medium text-gray-900",children:["Total Commission: ",h.jsx("span",{className:"text-green-600",children:m(w)})]}),y>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-gray-400",children:""}),h.jsxs("span",{className:"text-gray-600",children:["Referral: ",h.jsx("span",{className:"text-orange-600",children:m(y)})]})]}),o>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-gray-400",children:""}),h.jsxs("span",{className:"text-gray-600",children:["House: ",h.jsx("span",{className:"text-gray-600",children:m(o)})]})]}),h.jsx("span",{className:"text-gray-400",children:""}),h.jsxs("span",{className:"text-gray-600",children:["AGCI: ",h.jsx("span",{className:"text-blue-600 font-medium",children:m(a)})]})]}),n&&h.jsx("button",{onClick:n,className:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Edit Commission"})]}),N&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex h-8 bg-gray-200 rounded-lg overflow-hidden",children:[_>0&&h.jsx("div",{className:"bg-orange-500 flex items-center justify-center relative group",style:{width:`${_}%`},title:`Referral: ${x}% of total - ${m(y)}`,children:_>15&&h.jsxs("span",{className:"text-white text-xs font-medium",children:[x.toFixed(1),"%"]})}),S>0&&h.jsx("div",{className:"bg-gray-500 flex items-center justify-center relative group",style:{width:`${S}%`},title:`House: ${v.toFixed(1)}% of total - ${m(o)}`,children:S>15&&h.jsxs("span",{className:"text-white text-xs font-medium",children:[v.toFixed(1),"%"]})}),k>0&&h.jsx("div",{className:"bg-blue-500 flex items-center justify-center relative group",style:{width:`${k}%`},title:`Origination: ${l}% of AGCI - ${m(d)}`,children:k>15&&h.jsxs("span",{className:"text-white text-xs font-medium",children:[l,"%"]})}),C>0&&h.jsx("div",{className:"bg-green-500 flex items-center justify-center relative group",style:{width:`${C}%`},title:`Site: ${c}% of AGCI - ${m(f)}`,children:C>15&&h.jsxs("span",{className:"text-white text-xs font-medium",children:[c,"%"]})}),E>0&&h.jsx("div",{className:"bg-purple-500 flex items-center justify-center relative group",style:{width:`${E}%`},title:`Deal: ${u}% of AGCI - ${m(p)}`,children:E>15&&h.jsxs("span",{className:"text-white text-xs font-medium",children:[u,"%"]})})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2",children:[y>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),h.jsxs("span",{className:"text-sm text-gray-900",children:[h.jsx("span",{className:"font-medium",children:"Referral"})," ",m(y)]})]}),o>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded mr-2"}),h.jsxs("span",{className:"text-sm text-gray-900",children:[h.jsx("span",{className:"font-medium",children:"House"})," ",m(o)]})]}),l>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),h.jsxs("span",{className:"text-sm text-gray-900",children:[h.jsx("span",{className:"font-medium",children:"Origination"})," ",m(d)]})]}),c>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),h.jsxs("span",{className:"text-sm text-gray-900",children:[h.jsx("span",{className:"font-medium",children:"Site"})," ",m(f)]})]}),u>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded mr-2"}),h.jsxs("span",{className:"text-sm text-gray-900",children:[h.jsx("span",{className:"font-medium",children:"Deal"})," ",m(p)]})]})]}),g!==a&&a>0&&h.jsx("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:" Commission percentages don't total to 100% of AGCI"})]}),!N&&h.jsxs("div",{className:"text-center py-4",children:[h.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Commission breakdown percentages not configured"}),n&&h.jsx("button",{onClick:n,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Configure Commission Splits "})]})]})},KA=e=>{const t=o=>{if(o.payment_received)return"received";if(o.invoice_sent&&!o.payment_received){if(o.payment_date_estimated){const a=new Date(o.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"sent"}if(o.payment_date_estimated&&!o.invoice_sent){const a=new Date(o.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"pending"},n=e.reduce((o,a)=>{const l=t(a);return o[l]=(o[l]||0)+1,o.total++,o},{pending:0,sent:0,overdue:0,received:0,total:0}),r=n.overdue>0,s=n.overdue>0||n.sent>0,i=n.total>0?n.received/n.total*100:0;return{getPaymentStatus:t,statusSummary:n,hasOverdue:r,hasActionItems:s,completionRate:i}},QA=({deal:e,onDealUpdate:t})=>{const[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState([]),[f,p]=b.useState(!0),[g,w]=b.useState(null),[x,y]=b.useState(!1),{calculatedPaymentAmount:m,totalCalculatedPayments:v,paymentCommissionBreakdown:_,canGeneratePayments:S,validationMessages:k}=Wx(e,n,o),C=async()=>{if(e.id)try{p(!0),w(null);const{data:D,error:O}=await q.from("payment").select("*, payment_date_estimated").eq("deal_id",e.id).order("payment_sequence",{ascending:!0});if(O)throw O;console.log(" PaymentTab fetchPaymentData - payments found:",{dealId:e.id,paymentsCount:(D==null?void 0:D.length)||0,payments:D==null?void 0:D.map(Ee=>({id:Ee.id,sequence:Ee.payment_sequence,amount:Ee.payment_amount,estimated_date:Ee.payment_date_estimated}))});const j=(D==null?void 0:D.map(Ee=>Ee.id))||[];let W=[];if(j.length>0){const{data:Ee,error:gr}=await q.from("payment_split").select("*").in("payment_id",j);if(gr)throw gr;W=Ee||[]}const{data:K,error:Ce}=await q.from("commission_split").select("*").eq("deal_id",e.id);if(Ce)throw Ce;const{data:Oe,error:Jt}=await q.from("broker").select("*").order("name");if(Jt)throw Jt;let rt=[];try{const{data:Ee,error:gr}=await q.from("client").select("*").order("name");gr?console.warn("Client table not available:",gr.message):rt=Ee||[]}catch(Ee){console.warn("Error fetching clients (table may not exist):",Ee)}r(D||[]),i(W),a(K||[]),c(Oe||[]),d(rt||[])}catch(D){console.error("Error fetching payment data:",D),w(D instanceof Error?D.message:"Failed to load payment data")}finally{p(!1)}},E=async()=>{if(e.id)try{y(!0),w(null);const{data:D,error:O}=await q.rpc("generate_payments_for_deal",{deal_uuid:e.id});if(O)throw O;await C()}catch(D){console.error("Error generating payments:",D),w(D instanceof Error?D.message:"Failed to generate payments")}finally{y(!1)}},N=async(D,O)=>{try{const{error:j}=await q.from("payment").update(O).eq("id",D);if(j)throw j;r(W=>W.map(K=>K.id===D?{...K,...O}:K))}catch(j){console.error("Error updating payment:",j),w(j instanceof Error?j.message:"Failed to update payment")}},P=async D=>{try{const{error:O}=await q.from("payment_split").delete().eq("payment_id",D);if(O)throw O;const{error:j}=await q.from("payment").delete().eq("id",D);if(j)throw j;r(W=>W.filter(K=>K.id!==D)),i(W=>W.filter(K=>K.payment_id!==D))}catch(O){console.error("Error deleting payment:",O),w(O instanceof Error?O.message:"Failed to delete payment")}};if(b.useEffect(()=>{C()},[e.id]),f)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})});const I=n.length>0;n.reduce((D,O)=>D+(O.payment_amount||0),0);const $=e.fee||0,{statusSummary:M,hasOverdue:U,hasActionItems:H,completionRate:L}=KA(n),z=D=>D.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return h.jsxs("div",{className:"space-y-6",children:[g&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:h.jsx("div",{className:"text-red-700",children:g})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Commission"}),h.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",z($)]})]}),h.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[h.jsx("div",{className:"text-sm font-medium text-green-600",children:"Calculated Payments"}),h.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["$",z(v)]}),h.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.number_of_payments||1,"  $",z(m)]})]}),h.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[h.jsx("div",{className:"text-sm font-medium text-purple-600",children:"AGCI Available"}),h.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",z(e.agci||0)]}),h.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"After house & referral fees"})]}),h.jsx(GA,{statusSummary:M,hasOverdue:U,completionRate:L})]}),h.jsx(qA,{deal:e,commissionSplits:o,className:"mb-6"}),h.jsx(IA,{deal:e,hasPayments:I,existingPayments:n,commissionSplits:o,onGeneratePayments:E,generatingPayments:x}),I?h.jsx("div",{className:"space-y-6",children:h.jsx(VA,{payments:n,paymentSplits:s,brokers:l,clients:u,deal:e,onUpdatePayment:N,onDeletePayment:P,onUpdatePaymentSplit:async(D,O,j)=>{i(W=>W.map(K=>K.id===D?{...K,[O]:j||0}:K))}})}):h.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[h.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No payments generated yet"}),h.jsx("div",{className:"text-gray-400 text-sm",children:S?'Click "Generate Payments" above to create payment records':"Complete commission configuration to enable payment generation"}),k.length>0&&h.jsxs("div",{className:"mt-4 text-left max-w-md mx-auto",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Required configuration:"}),h.jsx("ul",{className:"text-sm text-gray-500 space-y-1",children:k.map((D,O)=>h.jsxs("li",{className:"flex items-start",children:[h.jsx("span",{className:"text-gray-400 mr-1",children:""}),D]},O))})]})]})]})},JA=({deal:e})=>{const[t,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{(async()=>{try{if(e.client_id){const{data:d}=await q.from("client").select("id, client_name").eq("id",e.client_id).single();d&&n(d)}if(e.stage_id){const{data:d}=await q.from("deal_stage").select("id, label").eq("id",e.stage_id).single();d&&s(d)}}catch(d){console.error("Error fetching header data:",d)}finally{o(!1)}})()},[e.client_id,e.stage_id]);const a=u=>u==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),l=u=>{if(!u)return"Not set";try{return new Date(u).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},c=()=>h.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}),h.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),h.jsx("circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}),h.jsx("circle",{cx:"21",cy:"7",r:"1",fill:"currentColor"})]});return i?h.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:h.jsx("div",{className:"max-w-7xl mx-auto",children:h.jsx("div",{className:"flex items-center space-x-4",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:h.jsx(c,{})}),h.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Loading..."})]})})})}):h.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[h.jsx(c,{}),h.jsx("span",{className:"text-white text-sm font-medium",children:"Deal"})]}),h.jsx("h1",{className:"text-xl font-bold leading-tight",children:e.deal_name||"Unnamed Deal"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Account Name"}),h.jsx("div",{className:"text-white",children:(t==null?void 0:t.client_name)||"No Client"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Stage"}),h.jsx("div",{className:"text-white font-semibold",children:(r==null?void 0:r.label)||"No Stage"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Probability"}),h.jsx("div",{className:"text-white font-semibold",children:e.probability!==null?`${e.probability}%`:"0%"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Target Close Date"}),h.jsx("div",{className:"text-white",children:l(e.target_close_date)})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Deal Value"}),h.jsx("div",{className:"text-white font-bold text-base",children:a(e.deal_value)})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Fee"}),h.jsx("div",{className:"text-emerald-400 font-bold text-base",children:a(e.fee)})]})]})]})})};function XA(){const{dealId:e}=XS(),[t,n]=b.useState(null),[r,s]=b.useState("overview"),{contacts:i}=Bx(e||null);b.useEffect(()=>{e&&(async()=>{const{data:c,error:u}=await q.from("deal").select("*").eq("id",e).single();!u&&c&&n(c)})()},[e]);const o=l=>{n(l)},a=async l=>{const c={...t,...l};return n(c),Promise.resolve()};return t?h.jsxs(CA,{children:[h.jsxs(EA,{contactCount:i.length,notesCount:0,filesCount:0,activityCount:0,paymentsCount:0,children:[h.jsx(JA,{deal:t}),h.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[h.jsx("div",{className:"border-b border-gray-200 mb-6",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsx("button",{onClick:()=>s("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),h.jsx("button",{onClick:()=>s("commission"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="commission"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Commission"}),h.jsx("button",{onClick:()=>s("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payments"})]})}),r==="overview"&&h.jsx(SA,{deal:t,onSave:o}),r==="commission"&&h.jsx(jA,{dealId:e,deal:t,onDealUpdate:a}),r==="payments"&&h.jsx(QA,{deal:t,onDealUpdate:a})]})]}),e&&h.jsx(NA,{dealId:e})]}):h.jsx("div",{className:"p-4",children:"Loading..."})}function ZA(){const e=Mn(),{user:t,signOut:n}=lC(),r=i=>`px-4 py-2 rounded hover:bg-blue-100 ${e.pathname===i?"bg-blue-200 font-semibold":""}`,s=async()=>{await n()};return h.jsxs("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[h.jsx("div",{className:"flex space-x-4",children:h.jsx(Kl,{to:"/master-pipeline",className:r("/master-pipeline"),children:"Master Pipeline"})}),t&&h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("span",{className:"text-sm text-gray-600",children:t.email}),h.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})}function eL(){return h.jsx(cC,{children:h.jsx(uC,{children:h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx(ZA,{}),h.jsxs(pk,{children:[h.jsx(Ca,{path:"/",element:h.jsx(fk,{to:"/master-pipeline",replace:!0})}),h.jsx(Ca,{path:"/master-pipeline",element:h.jsx(MO,{})}),h.jsx(Ca,{path:"/deal/:dealId",element:h.jsx(XA,{})})]})]})})})}Nu.createRoot(document.getElementById("root")).render(h.jsx(T.StrictMode,{children:h.jsx(Fk,{children:h.jsx(eL,{})})}));
