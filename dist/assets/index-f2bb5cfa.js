var ew=Object.defineProperty;var tw=(e,t,r)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Y=(e,t,r)=>(tw(e,typeof t!="symbol"?t+"":t,r),r);function rw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Qg={exports:{}},Ll={},Jg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=Symbol.for("react.element"),sw=Symbol.for("react.portal"),ow=Symbol.for("react.fragment"),iw=Symbol.for("react.strict_mode"),aw=Symbol.for("react.profiler"),lw=Symbol.for("react.provider"),cw=Symbol.for("react.context"),uw=Symbol.for("react.forward_ref"),dw=Symbol.for("react.suspense"),fw=Symbol.for("react.memo"),hw=Symbol.for("react.lazy"),zh=Symbol.iterator;function pw(e){return e===null||typeof e!="object"?null:(e=zh&&e[zh]||e["@@iterator"],typeof e=="function"?e:null)}var Xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zg=Object.assign,e0={};function qs(e,t,r){this.props=e,this.context=t,this.refs=e0,this.updater=r||Xg}qs.prototype.isReactComponent={};qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function t0(){}t0.prototype=qs.prototype;function tf(e,t,r){this.props=e,this.context=t,this.refs=e0,this.updater=r||Xg}var rf=tf.prototype=new t0;rf.constructor=tf;Zg(rf,qs.prototype);rf.isPureReactComponent=!0;var Vh=Array.isArray,r0=Object.prototype.hasOwnProperty,nf={current:null},n0={key:!0,ref:!0,__self:!0,__source:!0};function s0(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)r0.call(t,n)&&!n0.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:wi,type:e,key:o,ref:i,props:s,_owner:nf.current}}function mw(e,t){return{$$typeof:wi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sf(e){return typeof e=="object"&&e!==null&&e.$$typeof===wi}function gw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var qh=/\/+/g;function Dc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gw(""+e.key):t.toString(36)}function xa(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case wi:case sw:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Dc(i,0):n,Vh(s)?(r="",e!=null&&(r=e.replace(qh,"$&/")+"/"),xa(s,t,r,"",function(u){return u})):s!=null&&(sf(s)&&(s=mw(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(qh,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Vh(e))for(var a=0;a<e.length;a++){o=e[a];var l=n+Dc(o,a);i+=xa(o,t,r,l,s)}else if(l=pw(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=n+Dc(o,a++),i+=xa(o,t,r,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function $i(e,t,r){if(e==null)return e;var n=[],s=0;return xa(e,n,"","",function(o){return t.call(r,o,s++)}),n}function vw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},ba={transition:null},yw={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:ba,ReactCurrentOwner:nf};function o0(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:$i,forEach:function(e,t,r){$i(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $i(e,function(){t++}),t},toArray:function(e){return $i(e,function(t){return t})||[]},only:function(e){if(!sf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=qs;Z.Fragment=ow;Z.Profiler=aw;Z.PureComponent=tf;Z.StrictMode=iw;Z.Suspense=dw;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yw;Z.act=o0;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Zg({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=nf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)r0.call(t,l)&&!n0.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:wi,type:e.type,key:s,ref:o,props:n,_owner:i}};Z.createContext=function(e){return e={$$typeof:cw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lw,_context:e},e.Consumer=e};Z.createElement=s0;Z.createFactory=function(e){var t=s0.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:uw,render:e}};Z.isValidElement=sf;Z.lazy=function(e){return{$$typeof:hw,_payload:{_status:-1,_result:e},_init:vw}};Z.memo=function(e,t){return{$$typeof:fw,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=ba.transition;ba.transition={};try{e()}finally{ba.transition=t}};Z.unstable_act=o0;Z.useCallback=function(e,t){return rt.current.useCallback(e,t)};Z.useContext=function(e){return rt.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};Z.useEffect=function(e,t){return rt.current.useEffect(e,t)};Z.useId=function(){return rt.current.useId()};Z.useImperativeHandle=function(e,t,r){return rt.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return rt.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return rt.current.useReducer(e,t,r)};Z.useRef=function(e){return rt.current.useRef(e)};Z.useState=function(e){return rt.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return rt.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return rt.current.useTransition()};Z.version="18.3.1";Jg.exports=Z;var w=Jg.exports;const P=Kg(w),i0=rw({__proto__:null,default:P},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=w,bw=Symbol.for("react.element"),ww=Symbol.for("react.fragment"),_w=Object.prototype.hasOwnProperty,kw=xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sw={key:!0,ref:!0,__self:!0,__source:!0};function a0(e,t,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)_w.call(t,n)&&!Sw.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:bw,type:e,key:o,ref:i,props:s,_owner:kw.current}}Ll.Fragment=ww;Ll.jsx=a0;Ll.jsxs=a0;Qg.exports=Ll;var c=Qg.exports,Ou={},l0={exports:{}},bt={},c0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,R){var M=C.length;C.push(R);e:for(;0<M;){var W=M-1>>>1,K=C[W];if(0<s(K,R))C[W]=R,C[M]=K,M=W;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var R=C[0],M=C.pop();if(M!==R){C[0]=M;e:for(var W=0,K=C.length,Ce=K>>>1;W<Ce;){var Te=2*(W+1)-1,Xt=C[Te],st=Te+1,Ne=C[st];if(0>s(Xt,M))st<K&&0>s(Ne,Xt)?(C[W]=Ne,C[st]=M,W=st):(C[W]=Xt,C[Te]=M,W=Te);else if(st<K&&0>s(Ne,M))C[W]=Ne,C[st]=M,W=st;else break e}}return R}function s(C,R){var M=C.sortIndex-R.sortIndex;return M!==0?M:C.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(C){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=C)n(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=r(u)}}function _(C){if(b=!1,v(C),!g)if(r(l)!==null)g=!0,O(k);else{var R=r(u);R!==null&&B(_,R.startTime-C)}}function k(C,R){g=!1,b&&(b=!1,x(N),N=-1),p=!0;var M=h;try{for(v(R),f=r(l);f!==null&&(!(f.expirationTime>R)||C&&!I());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var K=W(f.expirationTime<=R);R=e.unstable_now(),typeof K=="function"?f.callback=K:f===r(l)&&n(l),v(R)}else n(l);f=r(l)}if(f!==null)var Ce=!0;else{var Te=r(u);Te!==null&&B(_,Te.startTime-R),Ce=!1}return Ce}finally{f=null,h=M,p=!1}}var S=!1,D=null,N=-1,E=5,j=-1;function I(){return!(e.unstable_now()-j<E)}function U(){if(D!==null){var C=e.unstable_now();j=C;var R=!0;try{R=D(!0,C)}finally{R?A():(S=!1,D=null)}}else S=!1}var A;if(typeof m=="function")A=function(){m(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,T=$.port2;$.port1.onmessage=U,A=function(){T.postMessage(null)}}else A=function(){y(U,0)};function O(C){D=C,S||(S=!0,A())}function B(C,R){N=y(function(){C(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,O(k))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var M=h;h=R;try{return C()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,R){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var M=h;h=C;try{return R()}finally{h=M}},e.unstable_scheduleCallback=function(C,R,M){var W=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?W+M:W):M=W,C){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=M+K,C={id:d++,callback:R,priorityLevel:C,startTime:M,expirationTime:K,sortIndex:-1},M>W?(C.sortIndex=M,t(u,C),r(l)===null&&C===r(u)&&(b?(x(N),N=-1):b=!0,B(_,M-W))):(C.sortIndex=K,t(l,C),g||p||(g=!0,O(k))),C},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(C){var R=h;return function(){var M=h;h=R;try{return C.apply(this,arguments)}finally{h=M}}}})(u0);c0.exports=u0;var Dw=c0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw=w,xt=Dw;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d0=new Set,Vo={};function qn(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Vo[e]=t,e=0;e<t.length;e++)d0.add(t[e])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=Object.prototype.hasOwnProperty,Nw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gh={},Kh={};function Ew(e){return Iu.call(Kh,e)?!0:Iu.call(Gh,e)?!1:Nw.test(e)?Kh[e]=!0:(Gh[e]=!0,!1)}function jw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Pw(e,t,r,n){if(t===null||typeof t>"u"||jw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var of=/[\-:]([a-z])/g;function af(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(of,af);He[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(of,af);He[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(of,af);He[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function lf(e,t,r,n){var s=He.hasOwnProperty(t)?He[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Pw(t,r,s,n)&&(r=null),n||s===null?Ew(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ir=Cw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bi=Symbol.for("react.element"),ls=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),cf=Symbol.for("react.strict_mode"),Mu=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),Au=Symbol.for("react.suspense_list"),df=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),Qh=Symbol.iterator;function ao(e){return e===null||typeof e!="object"?null:(e=Qh&&e[Qh]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,Cc;function Co(e){if(Cc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Cc=t&&t[1]||""}return`
`+Cc+e}var Nc=!1;function Ec(e,t){if(!e||Nc)return"";Nc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{Nc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Co(e):""}function Tw(e){switch(e.tag){case 5:return Co(e.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return e=Ec(e.type,!1),e;case 11:return e=Ec(e.type.render,!1),e;case 1:return e=Ec(e.type,!0),e;default:return""}}function Fu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case ls:return"Portal";case Mu:return"Profiler";case cf:return"StrictMode";case Lu:return"Suspense";case Au:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case h0:return(e.displayName||"Context")+".Consumer";case f0:return(e._context.displayName||"Context")+".Provider";case uf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case df:return t=e.displayName||null,t!==null?t:Fu(e.type)||"Memo";case Ur:t=e._payload,e=e._init;try{return Fu(e(t))}catch{}}return null}function Rw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fu(t);case 8:return t===cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ln(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ow(e){var t=m0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){e._valueTracker||(e._valueTracker=Ow(e))}function g0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=m0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ua(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $u(e,t){var r=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ln(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function v0(e,t){t=t.checked,t!=null&&lf(e,"checked",t,!1)}function Bu(e,t){v0(e,t);var r=ln(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Uu(e,t.type,ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Uu(e,t,r){(t!=="number"||Ua(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var No=Array.isArray;function ws(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ln(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(L(92));if(No(r)){if(1<r.length)throw Error(L(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ln(r)}}function y0(e,t){var r=ln(t.value),n=ln(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ep(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function x0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?x0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wi,b0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wi=Wi||document.createElement("div"),Wi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iw=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(e){Iw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oo[t]=Oo[e]})});function w0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oo.hasOwnProperty(e)&&Oo[e]?(""+t).trim():t+"px"}function _0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=w0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Mw=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yu(e,t){if(t){if(Mw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function zu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=null;function ff(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qu=null,_s=null,ks=null;function tp(e){if(e=Si(e)){if(typeof qu!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Ul(t),qu(e.stateNode,e.type,t))}}function k0(e){_s?ks?ks.push(e):ks=[e]:_s=e}function S0(){if(_s){var e=_s,t=ks;if(ks=_s=null,tp(e),t)for(e=0;e<t.length;e++)tp(t[e])}}function D0(e,t){return e(t)}function C0(){}var jc=!1;function N0(e,t,r){if(jc)return e(t,r);jc=!0;try{return D0(e,t,r)}finally{jc=!1,(_s!==null||ks!==null)&&(C0(),S0())}}function Go(e,t){var r=e.stateNode;if(r===null)return null;var n=Ul(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(L(231,t,typeof r));return r}var Gu=!1;if(Er)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Gu=!1}function Lw(e,t,r,n,s,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Io=!1,Wa=null,Ha=!1,Ku=null,Aw={onError:function(e){Io=!0,Wa=e}};function Fw(e,t,r,n,s,o,i,a,l){Io=!1,Wa=null,Lw.apply(Aw,arguments)}function $w(e,t,r,n,s,o,i,a,l){if(Fw.apply(this,arguments),Io){if(Io){var u=Wa;Io=!1,Wa=null}else throw Error(L(198));Ha||(Ha=!0,Ku=u)}}function Gn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function E0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rp(e){if(Gn(e)!==e)throw Error(L(188))}function Bw(e){var t=e.alternate;if(!t){if(t=Gn(e),t===null)throw Error(L(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return rp(s),e;if(o===n)return rp(s),t;o=o.sibling}throw Error(L(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=o;break}if(a===n){i=!0,n=s,r=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===r){i=!0,r=o,n=s;break}if(a===n){i=!0,n=o,r=s;break}a=a.sibling}if(!i)throw Error(L(189))}}if(r.alternate!==n)throw Error(L(190))}if(r.tag!==3)throw Error(L(188));return r.stateNode.current===r?e:t}function j0(e){return e=Bw(e),e!==null?P0(e):null}function P0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P0(e);if(t!==null)return t;e=e.sibling}return null}var T0=xt.unstable_scheduleCallback,np=xt.unstable_cancelCallback,Uw=xt.unstable_shouldYield,Ww=xt.unstable_requestPaint,ke=xt.unstable_now,Hw=xt.unstable_getCurrentPriorityLevel,hf=xt.unstable_ImmediatePriority,R0=xt.unstable_UserBlockingPriority,Ya=xt.unstable_NormalPriority,Yw=xt.unstable_LowPriority,O0=xt.unstable_IdlePriority,Al=null,ar=null;function zw(e){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Al,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Gw,Vw=Math.log,qw=Math.LN2;function Gw(e){return e>>>=0,e===0?32:31-(Vw(e)/qw|0)|0}var Hi=64,Yi=4194304;function Eo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function za(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=Eo(a):(o&=i,o!==0&&(n=Eo(o)))}else i=r&~s,i!==0?n=Eo(i):o!==0&&(n=Eo(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Yt(t),s=1<<r,n|=e[r],t&=~s;return n}function Kw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Yt(o),a=1<<i,l=s[i];l===-1?(!(a&r)||a&n)&&(s[i]=Kw(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Qu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function I0(){var e=Hi;return Hi<<=1,!(Hi&4194240)&&(Hi=64),e}function Pc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _i(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=r}function Jw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Yt(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function pf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Yt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var le=0;function M0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var L0,mf,A0,F0,$0,Ju=!1,zi=[],Kr=null,Qr=null,Jr=null,Ko=new Map,Qo=new Map,Hr=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sp(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function co(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Si(t),t!==null&&mf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Zw(e,t,r,n,s){switch(t){case"focusin":return Kr=co(Kr,e,t,r,n,s),!0;case"dragenter":return Qr=co(Qr,e,t,r,n,s),!0;case"mouseover":return Jr=co(Jr,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return Ko.set(o,co(Ko.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Qo.set(o,co(Qo.get(o)||null,e,t,r,n,s)),!0}return!1}function B0(e){var t=En(e.target);if(t!==null){var r=Gn(t);if(r!==null){if(t=r.tag,t===13){if(t=E0(r),t!==null){e.blockedOn=t,$0(e.priority,function(){A0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Vu=n,r.target.dispatchEvent(n),Vu=null}else return t=Si(r),t!==null&&mf(t),e.blockedOn=r,!1;t.shift()}return!0}function op(e,t,r){wa(e)&&r.delete(t)}function e_(){Ju=!1,Kr!==null&&wa(Kr)&&(Kr=null),Qr!==null&&wa(Qr)&&(Qr=null),Jr!==null&&wa(Jr)&&(Jr=null),Ko.forEach(op),Qo.forEach(op)}function uo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,e_)))}function Jo(e){function t(s){return uo(s,e)}if(0<zi.length){uo(zi[0],e);for(var r=1;r<zi.length;r++){var n=zi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kr!==null&&uo(Kr,e),Qr!==null&&uo(Qr,e),Jr!==null&&uo(Jr,e),Ko.forEach(t),Qo.forEach(t),r=0;r<Hr.length;r++)n=Hr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hr.length&&(r=Hr[0],r.blockedOn===null);)B0(r),r.blockedOn===null&&Hr.shift()}var Ss=Ir.ReactCurrentBatchConfig,Va=!0;function t_(e,t,r,n){var s=le,o=Ss.transition;Ss.transition=null;try{le=1,gf(e,t,r,n)}finally{le=s,Ss.transition=o}}function r_(e,t,r,n){var s=le,o=Ss.transition;Ss.transition=null;try{le=4,gf(e,t,r,n)}finally{le=s,Ss.transition=o}}function gf(e,t,r,n){if(Va){var s=Xu(e,t,r,n);if(s===null)Bc(e,t,n,qa,r),sp(e,n);else if(Zw(s,e,t,r,n))n.stopPropagation();else if(sp(e,n),t&4&&-1<Xw.indexOf(e)){for(;s!==null;){var o=Si(s);if(o!==null&&L0(o),o=Xu(e,t,r,n),o===null&&Bc(e,t,n,qa,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Bc(e,t,n,null,r)}}var qa=null;function Xu(e,t,r,n){if(qa=null,e=ff(n),e=En(e),e!==null)if(t=Gn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=E0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qa=e,null}function U0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hw()){case hf:return 1;case R0:return 4;case Ya:case Yw:return 16;case O0:return 536870912;default:return 16}default:return 16}}var Vr=null,vf=null,_a=null;function W0(){if(_a)return _a;var e,t=vf,r=t.length,n,s="value"in Vr?Vr.value:Vr.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return _a=s.slice(e,1<n?1-n:void 0)}function ka(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function ip(){return!1}function wt(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vi:ip,this.isPropagationStopped=ip,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=wt(Gs),ki=be({},Gs,{view:0,detail:0}),n_=wt(ki),Tc,Rc,fo,Fl=be({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fo&&(fo&&e.type==="mousemove"?(Tc=e.screenX-fo.screenX,Rc=e.screenY-fo.screenY):Rc=Tc=0,fo=e),Tc)},movementY:function(e){return"movementY"in e?e.movementY:Rc}}),ap=wt(Fl),s_=be({},Fl,{dataTransfer:0}),o_=wt(s_),i_=be({},ki,{relatedTarget:0}),Oc=wt(i_),a_=be({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),l_=wt(a_),c_=be({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),u_=wt(c_),d_=be({},Gs,{data:0}),lp=wt(d_),f_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p_[e])?!!t[e]:!1}function xf(){return m_}var g_=be({},ki,{key:function(e){if(e.key){var t=f_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v_=wt(g_),y_=be({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=wt(y_),x_=be({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),b_=wt(x_),w_=be({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),__=wt(w_),k_=be({},Fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S_=wt(k_),D_=[9,13,27,32],bf=Er&&"CompositionEvent"in window,Mo=null;Er&&"documentMode"in document&&(Mo=document.documentMode);var C_=Er&&"TextEvent"in window&&!Mo,H0=Er&&(!bf||Mo&&8<Mo&&11>=Mo),up=String.fromCharCode(32),dp=!1;function Y0(e,t){switch(e){case"keyup":return D_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function N_(e,t){switch(e){case"compositionend":return z0(t);case"keypress":return t.which!==32?null:(dp=!0,up);case"textInput":return e=t.data,e===up&&dp?null:e;default:return null}}function E_(e,t){if(us)return e==="compositionend"||!bf&&Y0(e,t)?(e=W0(),_a=vf=Vr=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return H0&&t.locale!=="ko"?null:t.data;default:return null}}var j_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!j_[e.type]:t==="textarea"}function V0(e,t,r,n){k0(n),t=Ga(t,"onChange"),0<t.length&&(r=new yf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lo=null,Xo=null;function P_(e){nv(e,0)}function $l(e){var t=hs(e);if(g0(t))return e}function T_(e,t){if(e==="change")return t}var q0=!1;if(Er){var Ic;if(Er){var Mc="oninput"in document;if(!Mc){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),Mc=typeof hp.oninput=="function"}Ic=Mc}else Ic=!1;q0=Ic&&(!document.documentMode||9<document.documentMode)}function pp(){Lo&&(Lo.detachEvent("onpropertychange",G0),Xo=Lo=null)}function G0(e){if(e.propertyName==="value"&&$l(Xo)){var t=[];V0(t,Xo,e,ff(e)),N0(P_,t)}}function R_(e,t,r){e==="focusin"?(pp(),Lo=t,Xo=r,Lo.attachEvent("onpropertychange",G0)):e==="focusout"&&pp()}function O_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $l(Xo)}function I_(e,t){if(e==="click")return $l(t)}function M_(e,t){if(e==="input"||e==="change")return $l(t)}function L_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:L_;function Zo(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Iu.call(t,s)||!qt(e[s],t[s]))return!1}return!0}function mp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gp(e,t){var r=mp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mp(r)}}function K0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q0(){for(var e=window,t=Ua();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ua(e.document)}return t}function wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function A_(e){var t=Q0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&K0(r.ownerDocument.documentElement,r)){if(n!==null&&wf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=gp(r,o);var i=gp(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var F_=Er&&"documentMode"in document&&11>=document.documentMode,ds=null,Zu=null,Ao=null,ed=!1;function vp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ed||ds==null||ds!==Ua(n)||(n=ds,"selectionStart"in n&&wf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ao&&Zo(Ao,n)||(Ao=n,n=Ga(Zu,"onSelect"),0<n.length&&(t=new yf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ds)))}function qi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fs={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Lc={},J0={};Er&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Bl(e){if(Lc[e])return Lc[e];if(!fs[e])return e;var t=fs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in J0)return Lc[e]=t[r];return e}var X0=Bl("animationend"),Z0=Bl("animationiteration"),ev=Bl("animationstart"),tv=Bl("transitionend"),rv=new Map,yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){rv.set(e,t),qn(t,[e])}for(var Ac=0;Ac<yp.length;Ac++){var Fc=yp[Ac],$_=Fc.toLowerCase(),B_=Fc[0].toUpperCase()+Fc.slice(1);hn($_,"on"+B_)}hn(X0,"onAnimationEnd");hn(Z0,"onAnimationIteration");hn(ev,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(tv,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U_=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function xp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,$w(n,t,void 0,e),e.currentTarget=null}function nv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var a=n[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;xp(s,a,u),o=l}else for(i=0;i<n.length;i++){if(a=n[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;xp(s,a,u),o=l}}}if(Ha)throw e=Ku,Ha=!1,Ku=null,e}function fe(e,t){var r=t[od];r===void 0&&(r=t[od]=new Set);var n=e+"__bubble";r.has(n)||(sv(t,e,2,!1),r.add(n))}function $c(e,t,r){var n=0;t&&(n|=4),sv(r,e,n,t)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function ei(e){if(!e[Gi]){e[Gi]=!0,d0.forEach(function(r){r!=="selectionchange"&&(U_.has(r)||$c(r,!1,e),$c(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gi]||(t[Gi]=!0,$c("selectionchange",!1,t))}}function sv(e,t,r,n){switch(U0(t)){case 1:var s=t_;break;case 4:s=r_;break;default:s=gf}r=s.bind(null,t,r,e),s=void 0,!Gu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Bc(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=En(a),i===null)return;if(l=i.tag,l===5||l===6){n=o=i;continue e}a=a.parentNode}}n=n.return}N0(function(){var u=o,d=ff(r),f=[];e:{var h=rv.get(e);if(h!==void 0){var p=yf,g=e;switch(e){case"keypress":if(ka(r)===0)break e;case"keydown":case"keyup":p=v_;break;case"focusin":g="focus",p=Oc;break;case"focusout":g="blur",p=Oc;break;case"beforeblur":case"afterblur":p=Oc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=o_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=b_;break;case X0:case Z0:case ev:p=l_;break;case tv:p=__;break;case"scroll":p=n_;break;case"wheel":p=S_;break;case"copy":case"cut":case"paste":p=u_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cp}var b=(t&4)!==0,y=!b&&e==="scroll",x=b?h!==null?h+"Capture":null:h;b=[];for(var m=u,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,x!==null&&(_=Go(m,x),_!=null&&b.push(ti(m,_,v)))),y)break;m=m.return}0<b.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Vu&&(g=r.relatedTarget||r.fromElement)&&(En(g)||g[jr]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?En(g):null,g!==null&&(y=Gn(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(b=ap,_="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=cp,_="onPointerLeave",x="onPointerEnter",m="pointer"),y=p==null?h:hs(p),v=g==null?h:hs(g),h=new b(_,m+"leave",p,r,d),h.target=y,h.relatedTarget=v,_=null,En(d)===u&&(b=new b(x,m+"enter",g,r,d),b.target=v,b.relatedTarget=y,_=b),y=_,p&&g)t:{for(b=p,x=g,m=0,v=b;v;v=Jn(v))m++;for(v=0,_=x;_;_=Jn(_))v++;for(;0<m-v;)b=Jn(b),m--;for(;0<v-m;)x=Jn(x),v--;for(;m--;){if(b===x||x!==null&&b===x.alternate)break t;b=Jn(b),x=Jn(x)}b=null}else b=null;p!==null&&bp(f,h,p,b,!1),g!==null&&y!==null&&bp(f,y,g,b,!0)}}e:{if(h=u?hs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=T_;else if(fp(h))if(q0)k=M_;else{k=O_;var S=R_}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=I_);if(k&&(k=k(e,u))){V0(f,k,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Uu(h,"number",h.value)}switch(S=u?hs(u):window,e){case"focusin":(fp(S)||S.contentEditable==="true")&&(ds=S,Zu=u,Ao=null);break;case"focusout":Ao=Zu=ds=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,vp(f,r,d);break;case"selectionchange":if(F_)break;case"keydown":case"keyup":vp(f,r,d)}var D;if(bf)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else us?Y0(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(H0&&r.locale!=="ko"&&(us||N!=="onCompositionStart"?N==="onCompositionEnd"&&us&&(D=W0()):(Vr=d,vf="value"in Vr?Vr.value:Vr.textContent,us=!0)),S=Ga(u,N),0<S.length&&(N=new lp(N,e,null,r,d),f.push({event:N,listeners:S}),D?N.data=D:(D=z0(r),D!==null&&(N.data=D)))),(D=C_?N_(e,r):E_(e,r))&&(u=Ga(u,"onBeforeInput"),0<u.length&&(d=new lp("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=D))}nv(f,t)})}function ti(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ga(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Go(e,r),o!=null&&n.unshift(ti(e,o,s)),o=Go(e,t),o!=null&&n.push(ti(e,o,s))),e=e.return}return n}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bp(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=Go(r,o),l!=null&&i.unshift(ti(r,l,a))):s||(l=Go(r,o),l!=null&&i.push(ti(r,l,a)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var W_=/\r\n?/g,H_=/\u0000|\uFFFD/g;function wp(e){return(typeof e=="string"?e:""+e).replace(W_,`
`).replace(H_,"")}function Ki(e,t,r){if(t=wp(t),wp(e)!==t&&r)throw Error(L(425))}function Ka(){}var td=null,rd=null;function nd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sd=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,z_=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(e){return _p.resolve(null).then(e).catch(V_)}:sd;function V_(e){setTimeout(function(){throw e})}function Uc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Jo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Jo(t)}function Xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),nr="__reactFiber$"+Ks,ri="__reactProps$"+Ks,jr="__reactContainer$"+Ks,od="__reactEvents$"+Ks,q_="__reactListeners$"+Ks,G_="__reactHandles$"+Ks;function En(e){var t=e[nr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jr]||r[nr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kp(e);e!==null;){if(r=e[nr])return r;e=kp(e)}return t}e=r,r=e.parentNode}return null}function Si(e){return e=e[nr]||e[jr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Ul(e){return e[ri]||null}var id=[],ps=-1;function pn(e){return{current:e}}function he(e){0>ps||(e.current=id[ps],id[ps]=null,ps--)}function de(e,t){ps++,id[ps]=e.current,e.current=t}var cn={},Ke=pn(cn),ct=pn(!1),Fn=cn;function Ps(e,t){var r=e.type.contextTypes;if(!r)return cn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ut(e){return e=e.childContextTypes,e!=null}function Qa(){he(ct),he(Ke)}function Sp(e,t,r){if(Ke.current!==cn)throw Error(L(168));de(Ke,t),de(ct,r)}function ov(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(L(108,Rw(e)||"Unknown",s));return be({},r,n)}function Ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cn,Fn=Ke.current,de(Ke,e),de(ct,ct.current),!0}function Dp(e,t,r){var n=e.stateNode;if(!n)throw Error(L(169));r?(e=ov(e,t,Fn),n.__reactInternalMemoizedMergedChildContext=e,he(ct),he(Ke),de(Ke,e)):he(ct),de(ct,r)}var vr=null,Wl=!1,Wc=!1;function iv(e){vr===null?vr=[e]:vr.push(e)}function K_(e){Wl=!0,iv(e)}function mn(){if(!Wc&&vr!==null){Wc=!0;var e=0,t=le;try{var r=vr;for(le=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vr=null,Wl=!1}catch(s){throw vr!==null&&(vr=vr.slice(e+1)),T0(hf,mn),s}finally{le=t,Wc=!1}}return null}var ms=[],gs=0,Xa=null,Za=0,Ct=[],Nt=0,$n=null,xr=1,br="";function _n(e,t){ms[gs++]=Za,ms[gs++]=Xa,Xa=e,Za=t}function av(e,t,r){Ct[Nt++]=xr,Ct[Nt++]=br,Ct[Nt++]=$n,$n=e;var n=xr;e=br;var s=32-Yt(n)-1;n&=~(1<<s),r+=1;var o=32-Yt(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,xr=1<<32-Yt(t)+s|r<<s|n,br=o+e}else xr=1<<o|r<<s|n,br=e}function _f(e){e.return!==null&&(_n(e,1),av(e,1,0))}function kf(e){for(;e===Xa;)Xa=ms[--gs],ms[gs]=null,Za=ms[--gs],ms[gs]=null;for(;e===$n;)$n=Ct[--Nt],Ct[Nt]=null,br=Ct[--Nt],Ct[Nt]=null,xr=Ct[--Nt],Ct[Nt]=null}var mt=null,ht=null,pe=!1,Wt=null;function lv(e,t){var r=jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Cp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,ht=Xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$n!==null?{id:xr,overflow:br}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,mt=e,ht=null,!0):!1;default:return!1}}function ad(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ld(e){if(pe){var t=ht;if(t){var r=t;if(!Cp(e,t)){if(ad(e))throw Error(L(418));t=Xr(r.nextSibling);var n=mt;t&&Cp(e,t)?lv(n,r):(e.flags=e.flags&-4097|2,pe=!1,mt=e)}}else{if(ad(e))throw Error(L(418));e.flags=e.flags&-4097|2,pe=!1,mt=e}}}function Np(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Qi(e){if(e!==mt)return!1;if(!pe)return Np(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nd(e.type,e.memoizedProps)),t&&(t=ht)){if(ad(e))throw cv(),Error(L(418));for(;t;)lv(e,t),t=Xr(t.nextSibling)}if(Np(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=Xr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=mt?Xr(e.stateNode.nextSibling):null;return!0}function cv(){for(var e=ht;e;)e=Xr(e.nextSibling)}function Ts(){ht=mt=null,pe=!1}function Sf(e){Wt===null?Wt=[e]:Wt.push(e)}var Q_=Ir.ReactCurrentBatchConfig;function ho(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(L(309));var n=r.stateNode}if(!n)throw Error(L(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(L(284));if(!r._owner)throw Error(L(290,e))}return e}function Ji(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ep(e){var t=e._init;return t(e._payload)}function uv(e){function t(x,m){if(e){var v=x.deletions;v===null?(x.deletions=[m],x.flags|=16):v.push(m)}}function r(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function s(x,m){return x=rn(x,m),x.index=0,x.sibling=null,x}function o(x,m,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<m?(x.flags|=2,m):v):(x.flags|=2,m)):(x.flags|=1048576,m)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,m,v,_){return m===null||m.tag!==6?(m=Kc(v,x.mode,_),m.return=x,m):(m=s(m,v),m.return=x,m)}function l(x,m,v,_){var k=v.type;return k===cs?d(x,m,v.props.children,_,v.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ur&&Ep(k)===m.type)?(_=s(m,v.props),_.ref=ho(x,m,v),_.return=x,_):(_=Pa(v.type,v.key,v.props,null,x.mode,_),_.ref=ho(x,m,v),_.return=x,_)}function u(x,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Qc(v,x.mode,_),m.return=x,m):(m=s(m,v.children||[]),m.return=x,m)}function d(x,m,v,_,k){return m===null||m.tag!==7?(m=In(v,x.mode,_,k),m.return=x,m):(m=s(m,v),m.return=x,m)}function f(x,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Kc(""+m,x.mode,v),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bi:return v=Pa(m.type,m.key,m.props,null,x.mode,v),v.ref=ho(x,null,m),v.return=x,v;case ls:return m=Qc(m,x.mode,v),m.return=x,m;case Ur:var _=m._init;return f(x,_(m._payload),v)}if(No(m)||ao(m))return m=In(m,x.mode,v,null),m.return=x,m;Ji(x,m)}return null}function h(x,m,v,_){var k=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(x,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bi:return v.key===k?l(x,m,v,_):null;case ls:return v.key===k?u(x,m,v,_):null;case Ur:return k=v._init,h(x,m,k(v._payload),_)}if(No(v)||ao(v))return k!==null?null:d(x,m,v,_,null);Ji(x,v)}return null}function p(x,m,v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(v)||null,a(m,x,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bi:return x=x.get(_.key===null?v:_.key)||null,l(m,x,_,k);case ls:return x=x.get(_.key===null?v:_.key)||null,u(m,x,_,k);case Ur:var S=_._init;return p(x,m,v,S(_._payload),k)}if(No(_)||ao(_))return x=x.get(v)||null,d(m,x,_,k,null);Ji(m,_)}return null}function g(x,m,v,_){for(var k=null,S=null,D=m,N=m=0,E=null;D!==null&&N<v.length;N++){D.index>N?(E=D,D=null):E=D.sibling;var j=h(x,D,v[N],_);if(j===null){D===null&&(D=E);break}e&&D&&j.alternate===null&&t(x,D),m=o(j,m,N),S===null?k=j:S.sibling=j,S=j,D=E}if(N===v.length)return r(x,D),pe&&_n(x,N),k;if(D===null){for(;N<v.length;N++)D=f(x,v[N],_),D!==null&&(m=o(D,m,N),S===null?k=D:S.sibling=D,S=D);return pe&&_n(x,N),k}for(D=n(x,D);N<v.length;N++)E=p(D,x,N,v[N],_),E!==null&&(e&&E.alternate!==null&&D.delete(E.key===null?N:E.key),m=o(E,m,N),S===null?k=E:S.sibling=E,S=E);return e&&D.forEach(function(I){return t(x,I)}),pe&&_n(x,N),k}function b(x,m,v,_){var k=ao(v);if(typeof k!="function")throw Error(L(150));if(v=k.call(v),v==null)throw Error(L(151));for(var S=k=null,D=m,N=m=0,E=null,j=v.next();D!==null&&!j.done;N++,j=v.next()){D.index>N?(E=D,D=null):E=D.sibling;var I=h(x,D,j.value,_);if(I===null){D===null&&(D=E);break}e&&D&&I.alternate===null&&t(x,D),m=o(I,m,N),S===null?k=I:S.sibling=I,S=I,D=E}if(j.done)return r(x,D),pe&&_n(x,N),k;if(D===null){for(;!j.done;N++,j=v.next())j=f(x,j.value,_),j!==null&&(m=o(j,m,N),S===null?k=j:S.sibling=j,S=j);return pe&&_n(x,N),k}for(D=n(x,D);!j.done;N++,j=v.next())j=p(D,x,N,j.value,_),j!==null&&(e&&j.alternate!==null&&D.delete(j.key===null?N:j.key),m=o(j,m,N),S===null?k=j:S.sibling=j,S=j);return e&&D.forEach(function(U){return t(x,U)}),pe&&_n(x,N),k}function y(x,m,v,_){if(typeof v=="object"&&v!==null&&v.type===cs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Bi:e:{for(var k=v.key,S=m;S!==null;){if(S.key===k){if(k=v.type,k===cs){if(S.tag===7){r(x,S.sibling),m=s(S,v.props.children),m.return=x,x=m;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ur&&Ep(k)===S.type){r(x,S.sibling),m=s(S,v.props),m.ref=ho(x,S,v),m.return=x,x=m;break e}r(x,S);break}else t(x,S);S=S.sibling}v.type===cs?(m=In(v.props.children,x.mode,_,v.key),m.return=x,x=m):(_=Pa(v.type,v.key,v.props,null,x.mode,_),_.ref=ho(x,m,v),_.return=x,x=_)}return i(x);case ls:e:{for(S=v.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(x,m.sibling),m=s(m,v.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else t(x,m);m=m.sibling}m=Qc(v,x.mode,_),m.return=x,x=m}return i(x);case Ur:return S=v._init,y(x,m,S(v._payload),_)}if(No(v))return g(x,m,v,_);if(ao(v))return b(x,m,v,_);Ji(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(x,m.sibling),m=s(m,v),m.return=x,x=m):(r(x,m),m=Kc(v,x.mode,_),m.return=x,x=m),i(x)):r(x,m)}return y}var Rs=uv(!0),dv=uv(!1),el=pn(null),tl=null,vs=null,Df=null;function Cf(){Df=vs=tl=null}function Nf(e){var t=el.current;he(el),e._currentValue=t}function cd(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ds(e,t){tl=e,Df=vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function It(e){var t=e._currentValue;if(Df!==e)if(e={context:e,memoizedValue:t,next:null},vs===null){if(tl===null)throw Error(L(308));vs=e,tl.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var jn=null;function Ef(e){jn===null?jn=[e]:jn.push(e)}function fv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ef(t)):(r.next=s.next,s.next=r),t.interleaved=r,Pr(e,n)}function Pr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Wr=!1;function jf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ne&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Pr(e,r)}return s=n.interleaved,s===null?(t.next=t,Ef(n)):(t.next=s.next,s.next=t),n.interleaved=t,Pr(e,r)}function Sa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pf(e,r)}}function jp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rl(e,t,r,n){var s=e.updateQueue;Wr=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=s.baseState;i=0,d=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,b=a;switch(h=t,p=r,b.tag){case 1:if(g=b.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=be({},f,h);break e;case 2:Wr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Un|=i,e.lanes=i,e.memoizedState=f}}function Pp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(L(191,s));s.call(n)}}}var Di={},lr=pn(Di),ni=pn(Di),si=pn(Di);function Pn(e){if(e===Di)throw Error(L(174));return e}function Pf(e,t){switch(de(si,t),de(ni,e),de(lr,Di),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hu(t,e)}he(lr),de(lr,t)}function Os(){he(lr),he(ni),he(si)}function pv(e){Pn(si.current);var t=Pn(lr.current),r=Hu(t,e.type);t!==r&&(de(ni,e),de(lr,r))}function Tf(e){ni.current===e&&(he(lr),he(ni))}var ve=pn(0);function nl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hc=[];function Rf(){for(var e=0;e<Hc.length;e++)Hc[e]._workInProgressVersionPrimary=null;Hc.length=0}var Da=Ir.ReactCurrentDispatcher,Yc=Ir.ReactCurrentBatchConfig,Bn=0,xe=null,je=null,Oe=null,sl=!1,Fo=!1,oi=0,J_=0;function Ye(){throw Error(L(321))}function Of(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qt(e[r],t[r]))return!1;return!0}function If(e,t,r,n,s,o){if(Bn=o,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Da.current=e===null||e.memoizedState===null?t1:r1,e=r(n,s),Fo){o=0;do{if(Fo=!1,oi=0,25<=o)throw Error(L(301));o+=1,Oe=je=null,t.updateQueue=null,Da.current=n1,e=r(n,s)}while(Fo)}if(Da.current=ol,t=je!==null&&je.next!==null,Bn=0,Oe=je=xe=null,sl=!1,t)throw Error(L(300));return e}function Mf(){var e=oi!==0;return oi=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?xe.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Mt(){if(je===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=Oe===null?xe.memoizedState:Oe.next;if(t!==null)Oe=t,je=e;else{if(e===null)throw Error(L(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Oe===null?xe.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function ii(e,t){return typeof t=="function"?t(e):t}function zc(e){var t=Mt(),r=t.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=e;var n=je,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var a=i=null,l=null,u=o;do{var d=u.lane;if((Bn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,i=n):l=l.next=f,xe.lanes|=d,Un|=d}u=u.next}while(u!==null&&u!==o);l===null?i=n:l.next=a,qt(n,t.memoizedState)||(lt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,xe.lanes|=o,Un|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vc(e){var t=Mt(),r=t.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);qt(o,t.memoizedState)||(lt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function mv(){}function gv(e,t){var r=xe,n=Mt(),s=t(),o=!qt(n.memoizedState,s);if(o&&(n.memoizedState=s,lt=!0),n=n.queue,Lf(xv.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,ai(9,yv.bind(null,r,n,s,t),void 0,null),Me===null)throw Error(L(349));Bn&30||vv(r,t,s)}return s}function vv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function yv(e,t,r,n){t.value=r,t.getSnapshot=n,bv(t)&&wv(e)}function xv(e,t,r){return r(function(){bv(t)&&wv(e)})}function bv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qt(e,r)}catch{return!0}}function wv(e){var t=Pr(e,1);t!==null&&zt(t,e,1,-1)}function Tp(e){var t=er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:e},t.queue=e,e=e.dispatch=e1.bind(null,xe,e),[t.memoizedState,e]}function ai(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function _v(){return Mt().memoizedState}function Ca(e,t,r,n){var s=er();xe.flags|=e,s.memoizedState=ai(1|t,r,void 0,n===void 0?null:n)}function Hl(e,t,r,n){var s=Mt();n=n===void 0?null:n;var o=void 0;if(je!==null){var i=je.memoizedState;if(o=i.destroy,n!==null&&Of(n,i.deps)){s.memoizedState=ai(t,r,o,n);return}}xe.flags|=e,s.memoizedState=ai(1|t,r,o,n)}function Rp(e,t){return Ca(8390656,8,e,t)}function Lf(e,t){return Hl(2048,8,e,t)}function kv(e,t){return Hl(4,2,e,t)}function Sv(e,t){return Hl(4,4,e,t)}function Dv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cv(e,t,r){return r=r!=null?r.concat([e]):null,Hl(4,4,Dv.bind(null,t,e),r)}function Af(){}function Nv(e,t){var r=Mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Of(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ev(e,t){var r=Mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Of(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function jv(e,t,r){return Bn&21?(qt(r,t)||(r=I0(),xe.lanes|=r,Un|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=r)}function X_(e,t){var r=le;le=r!==0&&4>r?r:4,e(!0);var n=Yc.transition;Yc.transition={};try{e(!1),t()}finally{le=r,Yc.transition=n}}function Pv(){return Mt().memoizedState}function Z_(e,t,r){var n=tn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Tv(e))Rv(t,r);else if(r=fv(e,t,r,n),r!==null){var s=tt();zt(r,e,n,s),Ov(r,t,n)}}function e1(e,t,r){var n=tn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Tv(e))Rv(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,r);if(s.hasEagerState=!0,s.eagerState=a,qt(a,i)){var l=t.interleaved;l===null?(s.next=s,Ef(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=fv(e,t,s,n),r!==null&&(s=tt(),zt(r,e,n,s),Ov(r,t,n))}}function Tv(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Rv(e,t){Fo=sl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ov(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pf(e,r)}}var ol={readContext:It,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},t1={readContext:It,useCallback:function(e,t){return er().memoizedState=[e,t===void 0?null:t],e},useContext:It,useEffect:Rp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ca(4194308,4,Dv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ca(4,2,e,t)},useMemo:function(e,t){var r=er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=er();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Z_.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=er();return e={current:e},t.memoizedState=e},useState:Tp,useDebugValue:Af,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=Tp(!1),t=e[0];return e=X_.bind(null,e[1]),er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xe,s=er();if(pe){if(r===void 0)throw Error(L(407));r=r()}else{if(r=t(),Me===null)throw Error(L(349));Bn&30||vv(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Rp(xv.bind(null,n,o,e),[e]),n.flags|=2048,ai(9,yv.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=er(),t=Me.identifierPrefix;if(pe){var r=br,n=xr;r=(n&~(1<<32-Yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=oi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=J_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},r1={readContext:It,useCallback:Nv,useContext:It,useEffect:Lf,useImperativeHandle:Cv,useInsertionEffect:kv,useLayoutEffect:Sv,useMemo:Ev,useReducer:zc,useRef:_v,useState:function(){return zc(ii)},useDebugValue:Af,useDeferredValue:function(e){var t=Mt();return jv(t,je.memoizedState,e)},useTransition:function(){var e=zc(ii)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:mv,useSyncExternalStore:gv,useId:Pv,unstable_isNewReconciler:!1},n1={readContext:It,useCallback:Nv,useContext:It,useEffect:Lf,useImperativeHandle:Cv,useInsertionEffect:kv,useLayoutEffect:Sv,useMemo:Ev,useReducer:Vc,useRef:_v,useState:function(){return Vc(ii)},useDebugValue:Af,useDeferredValue:function(e){var t=Mt();return je===null?t.memoizedState=e:jv(t,je.memoizedState,e)},useTransition:function(){var e=Vc(ii)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:mv,useSyncExternalStore:gv,useId:Pv,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ud(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:be({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yl={isMounted:function(e){return(e=e._reactInternals)?Gn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tt(),s=tn(e),o=wr(n,s);o.payload=t,r!=null&&(o.callback=r),t=Zr(e,o,s),t!==null&&(zt(t,e,s,n),Sa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tt(),s=tn(e),o=wr(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Zr(e,o,s),t!==null&&(zt(t,e,s,n),Sa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tt(),n=tn(e),s=wr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Zr(e,s,n),t!==null&&(zt(t,e,n,r),Sa(t,e,n))}};function Op(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Zo(r,n)||!Zo(s,o):!0}function Iv(e,t,r){var n=!1,s=cn,o=t.contextType;return typeof o=="object"&&o!==null?o=It(o):(s=ut(t)?Fn:Ke.current,n=t.contextTypes,o=(n=n!=null)?Ps(e,s):cn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ip(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Yl.enqueueReplaceState(t,t.state,null)}function dd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},jf(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=It(o):(o=ut(t)?Fn:Ke.current,s.context=Ps(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ud(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yl.enqueueReplaceState(s,s.state,null),rl(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Is(e,t){try{var r="",n=t;do r+=Tw(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function qc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var s1=typeof WeakMap=="function"?WeakMap:Map;function Mv(e,t,r){r=wr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){al||(al=!0,_d=n),fd(e,t)},r}function Lv(e,t,r){r=wr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){fd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){fd(e,t),typeof n!="function"&&(en===null?en=new Set([this]):en.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Mp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new s1;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=y1.bind(null,e,t,r),t.then(e,e))}function Lp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ap(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wr(-1,1),t.tag=2,Zr(r,t,1))),r.lanes|=1),e)}var o1=Ir.ReactCurrentOwner,lt=!1;function Xe(e,t,r,n){t.child=e===null?dv(t,null,r,n):Rs(t,e.child,r,n)}function Fp(e,t,r,n,s){r=r.render;var o=t.ref;return Ds(t,s),n=If(e,t,r,n,o,s),r=Mf(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tr(e,t,s)):(pe&&r&&_f(t),t.flags|=1,Xe(e,t,n,s),t.child)}function $p(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!zf(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Av(e,t,o,n,s)):(e=Pa(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Zo,r(i,n)&&e.ref===t.ref)return Tr(e,t,s)}return t.flags|=1,e=rn(o,n),e.ref=t.ref,e.return=t,t.child=e}function Av(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(Zo(o,n)&&e.ref===t.ref)if(lt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,Tr(e,t,s)}return hd(e,t,r,n,s)}function Fv(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(xs,ft),ft|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(xs,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,de(xs,ft),ft|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,de(xs,ft),ft|=n;return Xe(e,t,s,r),t.child}function $v(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hd(e,t,r,n,s){var o=ut(r)?Fn:Ke.current;return o=Ps(t,o),Ds(t,s),r=If(e,t,r,n,o,s),n=Mf(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tr(e,t,s)):(pe&&n&&_f(t),t.flags|=1,Xe(e,t,r,s),t.child)}function Bp(e,t,r,n,s){if(ut(r)){var o=!0;Ja(t)}else o=!1;if(Ds(t,s),t.stateNode===null)Na(e,t),Iv(t,r,n),dd(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=It(u):(u=ut(r)?Fn:Ke.current,u=Ps(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Ip(t,i,n,u),Wr=!1;var h=t.memoizedState;i.state=h,rl(t,n,i,s),l=t.memoizedState,a!==n||h!==l||ct.current||Wr?(typeof d=="function"&&(ud(t,r,d,n),l=t.memoizedState),(a=Wr||Op(t,r,a,n,h,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,hv(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:$t(t.type,a),i.props=u,f=t.pendingProps,h=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=It(l):(l=ut(r)?Fn:Ke.current,l=Ps(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Ip(t,i,n,l),Wr=!1,h=t.memoizedState,i.state=h,rl(t,n,i,s);var g=t.memoizedState;a!==f||h!==g||ct.current||Wr?(typeof p=="function"&&(ud(t,r,p,n),g=t.memoizedState),(u=Wr||Op(t,r,u,n,h,g,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return pd(e,t,r,n,o,s)}function pd(e,t,r,n,s,o){$v(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Dp(t,r,!1),Tr(e,t,o);n=t.stateNode,o1.current=t;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Rs(t,e.child,null,o),t.child=Rs(t,null,a,o)):Xe(e,t,a,o),t.memoizedState=n.state,s&&Dp(t,r,!0),t.child}function Bv(e){var t=e.stateNode;t.pendingContext?Sp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sp(e,t.context,!1),Pf(e,t.containerInfo)}function Up(e,t,r,n,s){return Ts(),Sf(s),t.flags|=256,Xe(e,t,r,n),t.child}var md={dehydrated:null,treeContext:null,retryLane:0};function gd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uv(e,t,r){var n=t.pendingProps,s=ve.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ve,s&1),e===null)return ld(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ql(i,n,0,null),e=In(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=gd(r),t.memoizedState=md,e):Ff(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return i1(e,t,i,n,a,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=rn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=rn(a,o):(o=In(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?gd(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=md,n}return o=e.child,e=o.sibling,n=rn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ff(e,t){return t=ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xi(e,t,r,n){return n!==null&&Sf(n),Rs(t,e.child,null,r),e=Ff(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function i1(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=qc(Error(L(422))),Xi(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=ql({mode:"visible",children:n.children},s,0,null),o=In(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Rs(t,e.child,null,i),t.child.memoizedState=gd(i),t.memoizedState=md,o);if(!(t.mode&1))return Xi(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(L(419)),n=qc(o,n,void 0),Xi(e,t,i,n)}if(a=(i&e.childLanes)!==0,lt||a){if(n=Me,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Pr(e,s),zt(n,e,s,-1))}return Yf(),n=qc(Error(L(421))),Xi(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=x1.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ht=Xr(s.nextSibling),mt=t,pe=!0,Wt=null,e!==null&&(Ct[Nt++]=xr,Ct[Nt++]=br,Ct[Nt++]=$n,xr=e.id,br=e.overflow,$n=t),t=Ff(t,n.children),t.flags|=4096,t)}function Wp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cd(e.return,t,r)}function Gc(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Wv(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Xe(e,t,n.children,r),n=ve.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wp(e,r,t);else if(e.tag===19)Wp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ve,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&nl(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Gc(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&nl(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Gc(t,!0,r,null,o);break;case"together":Gc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,r=rn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=rn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function a1(e,t,r){switch(t.tag){case 3:Bv(t),Ts();break;case 5:pv(t);break;case 1:ut(t.type)&&Ja(t);break;case 4:Pf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;de(el,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):r&t.child.childLanes?Uv(e,t,r):(de(ve,ve.current&1),e=Tr(e,t,r),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Wv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ve,ve.current),n)break;return null;case 22:case 23:return t.lanes=0,Fv(e,t,r)}return Tr(e,t,r)}var Hv,vd,Yv,zv;Hv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vd=function(){};Yv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pn(lr.current);var o=null;switch(r){case"input":s=$u(e,s),n=$u(e,n),o=[];break;case"select":s=be({},s,{value:void 0}),n=be({},n,{value:void 0}),o=[];break;case"textarea":s=Wu(e,s),n=Wu(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ka)}Yu(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fe("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};zv=function(e,t,r,n){r!==n&&(t.flags|=4)};function po(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function l1(e,t,r){var n=t.pendingProps;switch(kf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return ut(t.type)&&Qa(),ze(t),null;case 3:return n=t.stateNode,Os(),he(ct),he(Ke),Rf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Dd(Wt),Wt=null))),vd(e,t),ze(t),null;case 5:Tf(t);var s=Pn(si.current);if(r=t.type,e!==null&&t.stateNode!=null)Yv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(L(166));return ze(t),null}if(e=Pn(lr.current),Qi(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[nr]=t,n[ri]=o,e=(t.mode&1)!==0,r){case"dialog":fe("cancel",n),fe("close",n);break;case"iframe":case"object":case"embed":fe("load",n);break;case"video":case"audio":for(s=0;s<jo.length;s++)fe(jo[s],n);break;case"source":fe("error",n);break;case"img":case"image":case"link":fe("error",n),fe("load",n);break;case"details":fe("toggle",n);break;case"input":Jh(n,o),fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},fe("invalid",n);break;case"textarea":Zh(n,o),fe("invalid",n)}Yu(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ki(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ki(n.textContent,a,e),s=["children",""+a]):Vo.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&fe("scroll",n)}switch(r){case"input":Ui(n),Xh(n,o,!0);break;case"textarea":Ui(n),ep(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ka)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=x0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[nr]=t,e[ri]=n,Hv(e,t,!1,!1),t.stateNode=e;e:{switch(i=zu(r,n),r){case"dialog":fe("cancel",e),fe("close",e),s=n;break;case"iframe":case"object":case"embed":fe("load",e),s=n;break;case"video":case"audio":for(s=0;s<jo.length;s++)fe(jo[s],e);s=n;break;case"source":fe("error",e),s=n;break;case"img":case"image":case"link":fe("error",e),fe("load",e),s=n;break;case"details":fe("toggle",e),s=n;break;case"input":Jh(e,n),s=$u(e,n),fe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=be({},n,{value:void 0}),fe("invalid",e);break;case"textarea":Zh(e,n),s=Wu(e,n),fe("invalid",e);break;default:s=n}Yu(r,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?_0(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b0(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&qo(e,l):typeof l=="number"&&qo(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vo.hasOwnProperty(o)?l!=null&&o==="onScroll"&&fe("scroll",e):l!=null&&lf(e,o,l,i))}switch(r){case"input":Ui(e),Xh(e,n,!1);break;case"textarea":Ui(e),ep(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ln(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ws(e,!!n.multiple,o,!1):n.defaultValue!=null&&ws(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ka)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)zv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(L(166));if(r=Pn(si.current),Pn(lr.current),Qi(t)){if(n=t.stateNode,r=t.memoizedProps,n[nr]=t,(o=n.nodeValue!==r)&&(e=mt,e!==null))switch(e.tag){case 3:Ki(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ki(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[nr]=t,t.stateNode=n}return ze(t),null;case 13:if(he(ve),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&ht!==null&&t.mode&1&&!(t.flags&128))cv(),Ts(),t.flags|=98560,o=!1;else if(o=Qi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(L(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(L(317));o[nr]=t}else Ts(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),o=!1}else Wt!==null&&(Dd(Wt),Wt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Pe===0&&(Pe=3):Yf())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Os(),vd(e,t),e===null&&ei(t.stateNode.containerInfo),ze(t),null;case 10:return Nf(t.type._context),ze(t),null;case 17:return ut(t.type)&&Qa(),ze(t),null;case 19:if(he(ve),o=t.memoizedState,o===null)return ze(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)po(o,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=nl(e),i!==null){for(t.flags|=128,po(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}o.tail!==null&&ke()>Ms&&(t.flags|=128,n=!0,po(o,!1),t.lanes=4194304)}else{if(!n)if(e=nl(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),po(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!pe)return ze(t),null}else 2*ke()-o.renderingStartTime>Ms&&r!==1073741824&&(t.flags|=128,n=!0,po(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ke(),t.sibling=null,r=ve.current,de(ve,n?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return Hf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ft&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function c1(e,t){switch(kf(t),t.tag){case 1:return ut(t.type)&&Qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Os(),he(ct),he(Ke),Rf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tf(t),null;case 13:if(he(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ve),null;case 4:return Os(),null;case 10:return Nf(t.type._context),null;case 22:case 23:return Hf(),null;case 24:return null;default:return null}}var Zi=!1,qe=!1,u1=typeof WeakSet=="function"?WeakSet:Set,V=null;function ys(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){we(e,t,n)}else r.current=null}function yd(e,t,r){try{r()}catch(n){we(e,t,n)}}var Hp=!1;function d1(e,t){if(td=Va,e=Q0(),wf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(a=i+s),f!==o||n!==0&&f.nodeType!==3||(l=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(a=i),h===o&&++d===n&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(rd={focusedElem:e,selectionRange:r},Va=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,y=g.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:$t(t.type,b),y);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){we(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return g=Hp,Hp=!1,g}function $o(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&yd(t,r,o)}s=s.next}while(s!==n)}}function zl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function xd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Vv(e){var t=e.alternate;t!==null&&(e.alternate=null,Vv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nr],delete t[ri],delete t[od],delete t[q_],delete t[G_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qv(e){return e.tag===5||e.tag===3||e.tag===4}function Yp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ka));else if(n!==4&&(e=e.child,e!==null))for(bd(e,t,r),e=e.sibling;e!==null;)bd(e,t,r),e=e.sibling}function wd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wd(e,t,r),e=e.sibling;e!==null;)wd(e,t,r),e=e.sibling}var $e=null,Bt=!1;function Ar(e,t,r){for(r=r.child;r!==null;)Gv(e,t,r),r=r.sibling}function Gv(e,t,r){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Al,r)}catch{}switch(r.tag){case 5:qe||ys(r,t);case 6:var n=$e,s=Bt;$e=null,Ar(e,t,r),$e=n,Bt=s,$e!==null&&(Bt?(e=$e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):$e.removeChild(r.stateNode));break;case 18:$e!==null&&(Bt?(e=$e,r=r.stateNode,e.nodeType===8?Uc(e.parentNode,r):e.nodeType===1&&Uc(e,r),Jo(e)):Uc($e,r.stateNode));break;case 4:n=$e,s=Bt,$e=r.stateNode.containerInfo,Bt=!0,Ar(e,t,r),$e=n,Bt=s;break;case 0:case 11:case 14:case 15:if(!qe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&yd(r,t,i),s=s.next}while(s!==n)}Ar(e,t,r);break;case 1:if(!qe&&(ys(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){we(r,t,a)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(qe=(n=qe)||r.memoizedState!==null,Ar(e,t,r),qe=n):Ar(e,t,r);break;default:Ar(e,t,r)}}function zp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new u1),t.forEach(function(n){var s=b1.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function At(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Bt=!1;break e;case 3:$e=a.stateNode.containerInfo,Bt=!0;break e;case 4:$e=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if($e===null)throw Error(L(160));Gv(o,i,s),$e=null,Bt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){we(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kv(t,e),t=t.sibling}function Kv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Zt(e),n&4){try{$o(3,e,e.return),zl(3,e)}catch(b){we(e,e.return,b)}try{$o(5,e,e.return)}catch(b){we(e,e.return,b)}}break;case 1:At(t,e),Zt(e),n&512&&r!==null&&ys(r,r.return);break;case 5:if(At(t,e),Zt(e),n&512&&r!==null&&ys(r,r.return),e.flags&32){var s=e.stateNode;try{qo(s,"")}catch(b){we(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&v0(s,o),zu(a,i);var u=zu(a,o);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?_0(s,f):d==="dangerouslySetInnerHTML"?b0(s,f):d==="children"?qo(s,f):lf(s,d,f,u)}switch(a){case"input":Bu(s,o);break;case"textarea":y0(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?ws(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?ws(s,!!o.multiple,o.defaultValue,!0):ws(s,!!o.multiple,o.multiple?[]:"",!1))}s[ri]=o}catch(b){we(e,e.return,b)}}break;case 6:if(At(t,e),Zt(e),n&4){if(e.stateNode===null)throw Error(L(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(b){we(e,e.return,b)}}break;case 3:if(At(t,e),Zt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(b){we(e,e.return,b)}break;case 4:At(t,e),Zt(e);break;case 13:At(t,e),Zt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Uf=ke())),n&4&&zp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(u=qe)||d,At(t,e),qe=u):At(t,e),Zt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(V=e,d=e.child;d!==null;){for(f=V=d;V!==null;){switch(h=V,p=h.child,h.tag){case 0:case 11:case 14:case 15:$o(4,h,h.return);break;case 1:ys(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(b){we(n,r,b)}}break;case 5:ys(h,h.return);break;case 22:if(h.memoizedState!==null){qp(f);continue}}p!==null?(p.return=h,V=p):qp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w0("display",i))}catch(b){we(e,e.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){we(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:At(t,e),Zt(e),n&4&&zp(e);break;case 21:break;default:At(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qv(r)){var n=r;break e}r=r.return}throw Error(L(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qo(s,""),n.flags&=-33);var o=Yp(e);wd(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=Yp(e);bd(e,a,i);break;default:throw Error(L(161))}}catch(l){we(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function f1(e,t,r){V=e,Qv(e)}function Qv(e,t,r){for(var n=(e.mode&1)!==0;V!==null;){var s=V,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Zi;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||qe;a=Zi;var u=qe;if(Zi=i,(qe=l)&&!u)for(V=s;V!==null;)i=V,l=i.child,i.tag===22&&i.memoizedState!==null?Gp(s):l!==null?(l.return=i,V=l):Gp(s);for(;o!==null;)V=o,Qv(o),o=o.sibling;V=s,Zi=a,qe=u}Vp(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,V=o):Vp(e)}}function Vp(e){for(;V!==null;){var t=V;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||zl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:$t(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Pp(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Pp(t,i,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Jo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}qe||t.flags&512&&xd(t)}catch(h){we(t,t.return,h)}}if(t===e){V=null;break}if(r=t.sibling,r!==null){r.return=t.return,V=r;break}V=t.return}}function qp(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var r=t.sibling;if(r!==null){r.return=t.return,V=r;break}V=t.return}}function Gp(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zl(4,t)}catch(l){we(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){we(t,s,l)}}var o=t.return;try{xd(t)}catch(l){we(t,o,l)}break;case 5:var i=t.return;try{xd(t)}catch(l){we(t,i,l)}}}catch(l){we(t,t.return,l)}if(t===e){V=null;break}var a=t.sibling;if(a!==null){a.return=t.return,V=a;break}V=t.return}}var h1=Math.ceil,il=Ir.ReactCurrentDispatcher,$f=Ir.ReactCurrentOwner,Tt=Ir.ReactCurrentBatchConfig,ne=0,Me=null,Ee=null,We=0,ft=0,xs=pn(0),Pe=0,li=null,Un=0,Vl=0,Bf=0,Bo=null,it=null,Uf=0,Ms=1/0,pr=null,al=!1,_d=null,en=null,ea=!1,qr=null,ll=0,Uo=0,kd=null,Ea=-1,ja=0;function tt(){return ne&6?ke():Ea!==-1?Ea:Ea=ke()}function tn(e){return e.mode&1?ne&2&&We!==0?We&-We:Q_.transition!==null?(ja===0&&(ja=I0()),ja):(e=le,e!==0||(e=window.event,e=e===void 0?16:U0(e.type)),e):1}function zt(e,t,r,n){if(50<Uo)throw Uo=0,kd=null,Error(L(185));_i(e,r,n),(!(ne&2)||e!==Me)&&(e===Me&&(!(ne&2)&&(Vl|=r),Pe===4&&Yr(e,We)),dt(e,n),r===1&&ne===0&&!(t.mode&1)&&(Ms=ke()+500,Wl&&mn()))}function dt(e,t){var r=e.callbackNode;Qw(e,t);var n=za(e,e===Me?We:0);if(n===0)r!==null&&np(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&np(r),t===1)e.tag===0?K_(Kp.bind(null,e)):iv(Kp.bind(null,e)),z_(function(){!(ne&6)&&mn()}),r=null;else{switch(M0(n)){case 1:r=hf;break;case 4:r=R0;break;case 16:r=Ya;break;case 536870912:r=O0;break;default:r=Ya}r=sy(r,Jv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jv(e,t){if(Ea=-1,ja=0,ne&6)throw Error(L(327));var r=e.callbackNode;if(Cs()&&e.callbackNode!==r)return null;var n=za(e,e===Me?We:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=cl(e,n);else{t=n;var s=ne;ne|=2;var o=Zv();(Me!==e||We!==t)&&(pr=null,Ms=ke()+500,On(e,t));do try{g1();break}catch(a){Xv(e,a)}while(1);Cf(),il.current=o,ne=s,Ee!==null?t=0:(Me=null,We=0,t=Pe)}if(t!==0){if(t===2&&(s=Qu(e),s!==0&&(n=s,t=Sd(e,s))),t===1)throw r=li,On(e,0),Yr(e,n),dt(e,ke()),r;if(t===6)Yr(e,n);else{if(s=e.current.alternate,!(n&30)&&!p1(s)&&(t=cl(e,n),t===2&&(o=Qu(e),o!==0&&(n=o,t=Sd(e,o))),t===1))throw r=li,On(e,0),Yr(e,n),dt(e,ke()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(L(345));case 2:kn(e,it,pr);break;case 3:if(Yr(e,n),(n&130023424)===n&&(t=Uf+500-ke(),10<t)){if(za(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){tt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sd(kn.bind(null,e,it,pr),t);break}kn(e,it,pr);break;case 4:if(Yr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Yt(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*h1(n/1960))-n,10<n){e.timeoutHandle=sd(kn.bind(null,e,it,pr),n);break}kn(e,it,pr);break;case 5:kn(e,it,pr);break;default:throw Error(L(329))}}}return dt(e,ke()),e.callbackNode===r?Jv.bind(null,e):null}function Sd(e,t){var r=Bo;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=cl(e,t),e!==2&&(t=it,it=r,t!==null&&Dd(t)),e}function Dd(e){it===null?it=e:it.push.apply(it,e)}function p1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!qt(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t){for(t&=~Bf,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Yt(t),n=1<<r;e[r]=-1,t&=~n}}function Kp(e){if(ne&6)throw Error(L(327));Cs();var t=za(e,0);if(!(t&1))return dt(e,ke()),null;var r=cl(e,t);if(e.tag!==0&&r===2){var n=Qu(e);n!==0&&(t=n,r=Sd(e,n))}if(r===1)throw r=li,On(e,0),Yr(e,t),dt(e,ke()),r;if(r===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kn(e,it,pr),dt(e,ke()),null}function Wf(e,t){var r=ne;ne|=1;try{return e(t)}finally{ne=r,ne===0&&(Ms=ke()+500,Wl&&mn())}}function Wn(e){qr!==null&&qr.tag===0&&!(ne&6)&&Cs();var t=ne;ne|=1;var r=Tt.transition,n=le;try{if(Tt.transition=null,le=1,e)return e()}finally{le=n,Tt.transition=r,ne=t,!(ne&6)&&mn()}}function Hf(){ft=xs.current,he(xs)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Y_(r)),Ee!==null)for(r=Ee.return;r!==null;){var n=r;switch(kf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Qa();break;case 3:Os(),he(ct),he(Ke),Rf();break;case 5:Tf(n);break;case 4:Os();break;case 13:he(ve);break;case 19:he(ve);break;case 10:Nf(n.type._context);break;case 22:case 23:Hf()}r=r.return}if(Me=e,Ee=e=rn(e.current,null),We=ft=t,Pe=0,li=null,Bf=Vl=Un=0,it=Bo=null,jn!==null){for(t=0;t<jn.length;t++)if(r=jn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}jn=null}return e}function Xv(e,t){do{var r=Ee;try{if(Cf(),Da.current=ol,sl){for(var n=xe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sl=!1}if(Bn=0,Oe=je=xe=null,Fo=!1,oi=0,$f.current=null,r===null||r.return===null){Pe=1,li=t,Ee=null;break}e:{var o=e,i=r.return,a=r,l=t;if(t=We,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Lp(i);if(p!==null){p.flags&=-257,Ap(p,i,a,o,t),p.mode&1&&Mp(o,u,t),t=p,l=u;var g=t.updateQueue;if(g===null){var b=new Set;b.add(l),t.updateQueue=b}else g.add(l);break e}else{if(!(t&1)){Mp(o,u,t),Yf();break e}l=Error(L(426))}}else if(pe&&a.mode&1){var y=Lp(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Ap(y,i,a,o,t),Sf(Is(l,a));break e}}o=l=Is(l,a),Pe!==4&&(Pe=2),Bo===null?Bo=[o]:Bo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Mv(o,l,t);jp(o,x);break e;case 1:a=l;var m=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(en===null||!en.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Lv(o,a,t);jp(o,_);break e}}o=o.return}while(o!==null)}ty(r)}catch(k){t=k,Ee===r&&r!==null&&(Ee=r=r.return);continue}break}while(1)}function Zv(){var e=il.current;return il.current=ol,e===null?ol:e}function Yf(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Me===null||!(Un&268435455)&&!(Vl&268435455)||Yr(Me,We)}function cl(e,t){var r=ne;ne|=2;var n=Zv();(Me!==e||We!==t)&&(pr=null,On(e,t));do try{m1();break}catch(s){Xv(e,s)}while(1);if(Cf(),ne=r,il.current=n,Ee!==null)throw Error(L(261));return Me=null,We=0,Pe}function m1(){for(;Ee!==null;)ey(Ee)}function g1(){for(;Ee!==null&&!Uw();)ey(Ee)}function ey(e){var t=ny(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?ty(e):Ee=t,$f.current=null}function ty(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=c1(r,t),r!==null){r.flags&=32767,Ee=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Ee=null;return}}else if(r=l1(r,t,ft),r!==null){Ee=r;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Pe===0&&(Pe=5)}function kn(e,t,r){var n=le,s=Tt.transition;try{Tt.transition=null,le=1,v1(e,t,r,n)}finally{Tt.transition=s,le=n}return null}function v1(e,t,r,n){do Cs();while(qr!==null);if(ne&6)throw Error(L(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Jw(e,o),e===Me&&(Ee=Me=null,We=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ea||(ea=!0,sy(Ya,function(){return Cs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Tt.transition,Tt.transition=null;var i=le;le=1;var a=ne;ne|=4,$f.current=null,d1(e,r),Kv(r,e),A_(rd),Va=!!td,rd=td=null,e.current=r,f1(r),Ww(),ne=a,le=i,Tt.transition=o}else e.current=r;if(ea&&(ea=!1,qr=e,ll=s),o=e.pendingLanes,o===0&&(en=null),zw(r.stateNode),dt(e,ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(al)throw al=!1,e=_d,_d=null,e;return ll&1&&e.tag!==0&&Cs(),o=e.pendingLanes,o&1?e===kd?Uo++:(Uo=0,kd=e):Uo=0,mn(),null}function Cs(){if(qr!==null){var e=M0(ll),t=Tt.transition,r=le;try{if(Tt.transition=null,le=16>e?16:e,qr===null)var n=!1;else{if(e=qr,qr=null,ll=0,ne&6)throw Error(L(331));var s=ne;for(ne|=4,V=e.current;V!==null;){var o=V,i=o.child;if(V.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(V=u;V!==null;){var d=V;switch(d.tag){case 0:case 11:case 15:$o(8,d,o)}var f=d.child;if(f!==null)f.return=d,V=f;else for(;V!==null;){d=V;var h=d.sibling,p=d.return;if(Vv(d),d===u){V=null;break}if(h!==null){h.return=p,V=h;break}V=p}}}var g=o.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var y=b.sibling;b.sibling=null,b=y}while(b!==null)}}V=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,V=i;else e:for(;V!==null;){if(o=V,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$o(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,V=x;break e}V=o.return}}var m=e.current;for(V=m;V!==null;){i=V;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,V=v;else e:for(i=m;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zl(9,a)}}catch(k){we(a,a.return,k)}if(a===i){V=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,V=_;break e}V=a.return}}if(ne=s,mn(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Al,e)}catch{}n=!0}return n}finally{le=r,Tt.transition=t}}return!1}function Qp(e,t,r){t=Is(r,t),t=Mv(e,t,1),e=Zr(e,t,1),t=tt(),e!==null&&(_i(e,1,t),dt(e,t))}function we(e,t,r){if(e.tag===3)Qp(e,e,r);else for(;t!==null;){if(t.tag===3){Qp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(en===null||!en.has(n))){e=Is(r,e),e=Lv(t,e,1),t=Zr(t,e,1),e=tt(),t!==null&&(_i(t,1,e),dt(t,e));break}}t=t.return}}function y1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&r,Me===e&&(We&r)===r&&(Pe===4||Pe===3&&(We&130023424)===We&&500>ke()-Uf?On(e,0):Bf|=r),dt(e,t)}function ry(e,t){t===0&&(e.mode&1?(t=Yi,Yi<<=1,!(Yi&130023424)&&(Yi=4194304)):t=1);var r=tt();e=Pr(e,t),e!==null&&(_i(e,t,r),dt(e,r))}function x1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ry(e,r)}function b1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(L(314))}n!==null&&n.delete(t),ry(e,r)}var ny;ny=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)lt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lt=!1,a1(e,t,r);lt=!!(e.flags&131072)}else lt=!1,pe&&t.flags&1048576&&av(t,Za,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Na(e,t),e=t.pendingProps;var s=Ps(t,Ke.current);Ds(t,r),s=If(null,t,n,e,s,r);var o=Mf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(n)?(o=!0,Ja(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jf(t),s.updater=Yl,t.stateNode=s,s._reactInternals=t,dd(t,n,e,r),t=pd(null,t,n,!0,o,r)):(t.tag=0,pe&&o&&_f(t),Xe(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Na(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=_1(n),e=$t(n,e),s){case 0:t=hd(null,t,n,e,r);break e;case 1:t=Bp(null,t,n,e,r);break e;case 11:t=Fp(null,t,n,e,r);break e;case 14:t=$p(null,t,n,$t(n.type,e),r);break e}throw Error(L(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$t(n,s),hd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$t(n,s),Bp(e,t,n,s,r);case 3:e:{if(Bv(t),e===null)throw Error(L(387));n=t.pendingProps,o=t.memoizedState,s=o.element,hv(e,t),rl(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Is(Error(L(423)),t),t=Up(e,t,n,r,s);break e}else if(n!==s){s=Is(Error(L(424)),t),t=Up(e,t,n,r,s);break e}else for(ht=Xr(t.stateNode.containerInfo.firstChild),mt=t,pe=!0,Wt=null,r=dv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ts(),n===s){t=Tr(e,t,r);break e}Xe(e,t,n,r)}t=t.child}return t;case 5:return pv(t),e===null&&ld(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,nd(n,s)?i=null:o!==null&&nd(n,o)&&(t.flags|=32),$v(e,t),Xe(e,t,i,r),t.child;case 6:return e===null&&ld(t),null;case 13:return Uv(e,t,r);case 4:return Pf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Rs(t,null,n,r):Xe(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$t(n,s),Fp(e,t,n,s,r);case 7:return Xe(e,t,t.pendingProps,r),t.child;case 8:return Xe(e,t,t.pendingProps.children,r),t.child;case 12:return Xe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,de(el,n._currentValue),n._currentValue=i,o!==null)if(qt(o.value,i)){if(o.children===s.children&&!ct.current){t=Tr(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=wr(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),cd(o.return,r,t),a.lanes|=r;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(L(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),cd(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Xe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ds(t,r),s=It(s),n=n(s),t.flags|=1,Xe(e,t,n,r),t.child;case 14:return n=t.type,s=$t(n,t.pendingProps),s=$t(n.type,s),$p(e,t,n,s,r);case 15:return Av(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$t(n,s),Na(e,t),t.tag=1,ut(n)?(e=!0,Ja(t)):e=!1,Ds(t,r),Iv(t,n,s),dd(t,n,s,r),pd(null,t,n,!0,e,r);case 19:return Wv(e,t,r);case 22:return Fv(e,t,r)}throw Error(L(156,t.tag))};function sy(e,t){return T0(e,t)}function w1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,r,n){return new w1(e,t,r,n)}function zf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _1(e){if(typeof e=="function")return zf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===uf)return 11;if(e===df)return 14}return 2}function rn(e,t){var r=e.alternate;return r===null?(r=jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pa(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")zf(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case cs:return In(r.children,s,o,t);case cf:i=8,s|=8;break;case Mu:return e=jt(12,r,t,s|2),e.elementType=Mu,e.lanes=o,e;case Lu:return e=jt(13,r,t,s),e.elementType=Lu,e.lanes=o,e;case Au:return e=jt(19,r,t,s),e.elementType=Au,e.lanes=o,e;case p0:return ql(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case f0:i=10;break e;case h0:i=9;break e;case uf:i=11;break e;case df:i=14;break e;case Ur:i=16,n=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=jt(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function In(e,t,r,n){return e=jt(7,e,n,t),e.lanes=r,e}function ql(e,t,r,n){return e=jt(22,e,n,t),e.elementType=p0,e.lanes=r,e.stateNode={isHidden:!1},e}function Kc(e,t,r){return e=jt(6,e,null,t),e.lanes=r,e}function Qc(e,t,r){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function k1(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pc(0),this.expirationTimes=Pc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vf(e,t,r,n,s,o,i,a,l){return e=new k1(e,t,r,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=jt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jf(o),e}function S1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function oy(e){if(!e)return cn;e=e._reactInternals;e:{if(Gn(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var r=e.type;if(ut(r))return ov(e,r,t)}return t}function iy(e,t,r,n,s,o,i,a,l){return e=Vf(r,n,!0,e,s,o,i,a,l),e.context=oy(null),r=e.current,n=tt(),s=tn(r),o=wr(n,s),o.callback=t??null,Zr(r,o,s),e.current.lanes=s,_i(e,s,n),dt(e,n),e}function Gl(e,t,r,n){var s=t.current,o=tt(),i=tn(s);return r=oy(r),t.context===null?t.context=r:t.pendingContext=r,t=wr(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Zr(s,t,i),e!==null&&(zt(e,s,i,o),Sa(e,s,i)),i}function ul(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qf(e,t){Jp(e,t),(e=e.alternate)&&Jp(e,t)}function D1(){return null}var ay=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gf(e){this._internalRoot=e}Kl.prototype.render=Gf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));Gl(e,t,null,null)};Kl.prototype.unmount=Gf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){Gl(null,e,null,null)}),t[jr]=null}};function Kl(e){this._internalRoot=e}Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=F0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hr.length&&t!==0&&t<Hr[r].priority;r++);Hr.splice(r,0,e),r===0&&B0(e)}};function Kf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xp(){}function C1(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=ul(i);o.call(u)}}var i=iy(t,n,e,0,null,!1,!1,"",Xp);return e._reactRootContainer=i,e[jr]=i.current,ei(e.nodeType===8?e.parentNode:e),Wn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=ul(l);a.call(u)}}var l=Vf(e,0,!1,null,null,!1,!1,"",Xp);return e._reactRootContainer=l,e[jr]=l.current,ei(e.nodeType===8?e.parentNode:e),Wn(function(){Gl(t,l,r,n)}),l}function Jl(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=ul(i);a.call(l)}}Gl(t,i,e,s)}else i=C1(r,t,e,s,n);return ul(i)}L0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Eo(t.pendingLanes);r!==0&&(pf(t,r|1),dt(t,ke()),!(ne&6)&&(Ms=ke()+500,mn()))}break;case 13:Wn(function(){var n=Pr(e,1);if(n!==null){var s=tt();zt(n,e,1,s)}}),qf(e,1)}};mf=function(e){if(e.tag===13){var t=Pr(e,134217728);if(t!==null){var r=tt();zt(t,e,134217728,r)}qf(e,134217728)}};A0=function(e){if(e.tag===13){var t=tn(e),r=Pr(e,t);if(r!==null){var n=tt();zt(r,e,t,n)}qf(e,t)}};F0=function(){return le};$0=function(e,t){var r=le;try{return le=e,t()}finally{le=r}};qu=function(e,t,r){switch(t){case"input":if(Bu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ul(n);if(!s)throw Error(L(90));g0(n),Bu(n,s)}}}break;case"textarea":y0(e,r);break;case"select":t=r.value,t!=null&&ws(e,!!r.multiple,t,!1)}};D0=Wf;C0=Wn;var N1={usingClientEntryPoint:!1,Events:[Si,hs,Ul,k0,S0,Wf]},mo={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E1={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=j0(e),e===null?null:e.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||D1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{Al=ta.inject(E1),ar=ta}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;bt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(t))throw Error(L(200));return S1(e,t,null,r)};bt.createRoot=function(e,t){if(!Kf(e))throw Error(L(299));var r=!1,n="",s=ay;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vf(e,1,!1,null,null,r,!1,n,s),e[jr]=t.current,ei(e.nodeType===8?e.parentNode:e),new Gf(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=j0(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return Wn(e)};bt.hydrate=function(e,t,r){if(!Ql(t))throw Error(L(200));return Jl(null,e,t,!0,r)};bt.hydrateRoot=function(e,t,r){if(!Kf(e))throw Error(L(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=ay;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=iy(t,null,e,1,r??null,s,!1,o,i),e[jr]=t.current,ei(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Kl(t)};bt.render=function(e,t,r){if(!Ql(t))throw Error(L(200));return Jl(null,e,t,!1,r)};bt.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(L(40));return e._reactRootContainer?(Wn(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[jr]=null})}),!0):!1};bt.unstable_batchedUpdates=Wf;bt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ql(r))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Jl(e,t,r,!1,n)};bt.version="18.3.1-next-f1338f8080-20240426";function ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ly)}catch(e){console.error(e)}}ly(),l0.exports=bt;var Ci=l0.exports;const cy=Kg(Ci);var Zp=Ci;Ou.createRoot=Zp.createRoot,Ou.hydrateRoot=Zp.hydrateRoot;const j1="modulepreload",P1=function(e){return"/"+e},em={},Qs=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=P1(o),o in em)return;em[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":j1,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var tm="popstate";function T1(e={}){function t(n,s){let{pathname:o,search:i,hash:a}=n.location;return Cd("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ci(s)}return O1(t,r,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function R1(){return Math.random().toString(36).substring(2,10)}function rm(e,t){return{usr:e.state,key:e.key,idx:t}}function Cd(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Js(t):t,state:r,key:t&&t.key||n||R1()}}function ci({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Js(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function O1(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,a="POP",l=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){a="POP";let y=d(),x=y==null?null:y-u;u=y,l&&l({action:a,location:b.location,delta:x})}function h(y,x){a="PUSH";let m=Cd(b.location,y,x);r&&r(m,y),u=d()+1;let v=rm(m,u),_=b.createHref(m);try{i.pushState(v,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}o&&l&&l({action:a,location:b.location,delta:1})}function p(y,x){a="REPLACE";let m=Cd(b.location,y,x);r&&r(m,y),u=d();let v=rm(m,u),_=b.createHref(m);i.replaceState(v,"",_),o&&l&&l({action:a,location:b.location,delta:0})}function g(y){return I1(y)}let b={get action(){return a},get location(){return e(s,i)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tm,f),l=y,()=>{s.removeEventListener(tm,f),l=null}},createHref(y){return t(s,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(y){return i.go(y)}};return b}function I1(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ge(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ci(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function uy(e,t,r="/"){return M1(e,t,r,!1)}function M1(e,t,r,n){let s=typeof t=="string"?Js(t):t,o=Rr(s.pathname||"/",r);if(o==null)return null;let i=dy(e);L1(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let u=q1(o);a=z1(i[l],u,n)}return a}function dy(e,t=[],r=[],n=""){let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=_r([n,l.relativePath]),d=r.concat(l);o.children&&o.children.length>0&&(ge(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),dy(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:H1(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of fy(o.path))s(o,i,l)}),t}function fy(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=fy(n.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function L1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Y1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var A1=/^:[\w-]+$/,F1=3,$1=2,B1=1,U1=10,W1=-2,nm=e=>e==="*";function H1(e,t){let r=e.split("/"),n=r.length;return r.some(nm)&&(n+=W1),t&&(n+=$1),r.filter(s=>!nm(s)).reduce((s,o)=>s+(A1.test(o)?F1:o===""?B1:U1),n)}function Y1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function z1(e,t,r=!1){let{routesMeta:n}=e,s={},o="/",i=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=dl({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=dl({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:_r([o,f.pathname]),pathnameBase:J1(_r([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=_r([o,f.pathnameBase]))}return i}function dl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=V1(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=a[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function V1(e,t=!1,r=!0){Gt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function q1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function G1(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Js(e):e;return{pathname:r?r.startsWith("/")?r:K1(r,t):t,search:X1(n),hash:Z1(s)}}function K1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Jc(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Qf(e){let t=Q1(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Jf(e,t,r,n=!1){let s;typeof e=="string"?s=Js(e):(s={...e},ge(!s.pathname||!s.pathname.includes("?"),Jc("?","pathname","search",s)),ge(!s.pathname||!s.pathname.includes("#"),Jc("#","pathname","hash",s)),ge(!s.search||!s.search.includes("#"),Jc("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=G1(s,a),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var _r=e=>e.join("/").replace(/\/\/+/g,"/"),J1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ek(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var hy=["POST","PUT","PATCH","DELETE"];new Set(hy);var tk=["GET",...hy];new Set(tk);var Xs=w.createContext(null);Xs.displayName="DataRouter";var Xl=w.createContext(null);Xl.displayName="DataRouterState";w.createContext(!1);var py=w.createContext({isTransitioning:!1});py.displayName="ViewTransition";var rk=w.createContext(new Map);rk.displayName="Fetchers";var nk=w.createContext(null);nk.displayName="Await";var Qt=w.createContext(null);Qt.displayName="Navigation";var Ni=w.createContext(null);Ni.displayName="Location";var Jt=w.createContext({outlet:null,matches:[],isDataRoute:!1});Jt.displayName="Route";var Xf=w.createContext(null);Xf.displayName="RouteError";function sk(e,{relative:t}={}){ge(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(Qt),{hash:s,pathname:o,search:i}=Ei(e,{relative:t}),a=o;return r!=="/"&&(a=o==="/"?r:_r([r,o])),n.createHref({pathname:a,search:i,hash:s})}function Zs(){return w.useContext(Ni)!=null}function Mr(){return ge(Zs(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ni).location}var my="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gy(e){w.useContext(Qt).static||w.useLayoutEffect(e)}function Zl(){let{isDataRoute:e}=w.useContext(Jt);return e?vk():ok()}function ok(){ge(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Xs),{basename:t,navigator:r}=w.useContext(Qt),{matches:n}=w.useContext(Jt),{pathname:s}=Mr(),o=JSON.stringify(Qf(n)),i=w.useRef(!1);return gy(()=>{i.current=!0}),w.useCallback((l,u={})=>{if(Gt(i.current,my),!i.current)return;if(typeof l=="number"){r.go(l);return}let d=Jf(l,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:_r([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,s,e])}w.createContext(null);function vy(){let{matches:e}=w.useContext(Jt),t=e[e.length-1];return t?t.params:{}}function Ei(e,{relative:t}={}){let{matches:r}=w.useContext(Jt),{pathname:n}=Mr(),s=JSON.stringify(Qf(r));return w.useMemo(()=>Jf(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function ik(e,t){return yy(e,t)}function yy(e,t,r,n){var x;ge(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(Qt),{matches:o}=w.useContext(Jt),i=o[o.length-1],a=i?i.params:{},l=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let m=d&&d.path||"";xy(l,!d||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=Mr(),h;if(t){let m=typeof t=="string"?Js(t):t;ge(u==="/"||((x=m.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let m=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let b=uy(e,{pathname:g});Gt(d||b!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Gt(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=dk(b&&b.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:_r([u,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:_r([u,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,r,n);return t&&y?w.createElement(Ni.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function ak(){let e=gk(),t=ek(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,i)}var lk=w.createElement(ak,null),ck=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Jt.Provider,{value:this.props.routeContext},w.createElement(Xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uk({routeContext:e,match:t,children:r}){let n=w.useContext(Xs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Jt.Provider,{value:e},r)}function dk(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=r==null?void 0:r.errors;if(o!=null){let l=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);ge(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,a=-1;if(r)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,d)=>{let f,h=!1,p=null,g=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||lk,i&&(a<0&&d===0?(xy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):a===d&&(h=!0,g=u.route.hydrateFallbackElement||null)));let b=t.concat(s.slice(0,d+1)),y=()=>{let x;return f?x=p:h?x=g:u.route.Component?x=w.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,w.createElement(uk,{match:u,routeContext:{outlet:l,matches:b,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?w.createElement(ck,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}function Zf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fk(e){let t=w.useContext(Xs);return ge(t,Zf(e)),t}function hk(e){let t=w.useContext(Xl);return ge(t,Zf(e)),t}function pk(e){let t=w.useContext(Jt);return ge(t,Zf(e)),t}function eh(e){let t=pk(e),r=t.matches[t.matches.length-1];return ge(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function mk(){return eh("useRouteId")}function gk(){var n;let e=w.useContext(Xf),t=hk("useRouteError"),r=eh("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function vk(){let{router:e}=fk("useNavigate"),t=eh("useNavigate"),r=w.useRef(!1);return gy(()=>{r.current=!0}),w.useCallback(async(s,o={})=>{Gt(r.current,my),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var sm={};function xy(e,t,r){!t&&!sm[e]&&(sm[e]=!0,Gt(!1,r))}w.memo(yk);function yk({routes:e,future:t,state:r}){return yy(e,void 0,r,t)}function xk({to:e,replace:t,state:r,relative:n}){ge(Zs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(Qt);Gt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(Jt),{pathname:i}=Mr(),a=Zl(),l=Jf(e,Qf(o),i,n==="path"),u=JSON.stringify(l);return w.useEffect(()=>{a(JSON.parse(u),{replace:t,state:r,relative:n})},[a,u,n,t,r]),null}function ss(e){ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bk({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:o=!1}){ge(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof r=="string"&&(r=Js(r));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=w.useMemo(()=>{let g=Rr(l,i);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[i,l,u,d,f,h,n]);return Gt(p!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(Qt.Provider,{value:a},w.createElement(Ni.Provider,{children:t,value:p}))}function wk({children:e,location:t}){return ik(Nd(e),t)}function Nd(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let o=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Nd(n.props.children,o));return}ge(n.type===ss,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ge(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Nd(n.props.children,o)),r.push(i)}),r}var Ta="get",Ra="application/x-www-form-urlencoded";function ec(e){return e!=null&&typeof e.tagName=="string"}function _k(e){return ec(e)&&e.tagName.toLowerCase()==="button"}function kk(e){return ec(e)&&e.tagName.toLowerCase()==="form"}function Sk(e){return ec(e)&&e.tagName.toLowerCase()==="input"}function Dk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ck(e,t){return e.button===0&&(!t||t==="_self")&&!Dk(e)}var ra=null;function Nk(){if(ra===null)try{new FormData(document.createElement("form"),0),ra=!1}catch{ra=!0}return ra}var Ek=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xc(e){return e!=null&&!Ek.has(e)?(Gt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ra}"`),null):e}function jk(e,t){let r,n,s,o,i;if(kk(e)){let a=e.getAttribute("action");n=a?Rr(a,t):null,r=e.getAttribute("method")||Ta,s=Xc(e.getAttribute("enctype"))||Ra,o=new FormData(e)}else if(_k(e)||Sk(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Rr(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Ta,s=Xc(e.getAttribute("formenctype"))||Xc(a.getAttribute("enctype"))||Ra,o=new FormData(a,e),!Nk()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";o.append(`${h}x`,"0"),o.append(`${h}y`,"0")}else u&&o.append(u,f)}}else{if(ec(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ta,n=null,s=Ra,i=e}return o&&s==="text/plain"&&(i=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function th(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pk(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Rr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Tk(e,t){if(e.id in t)return t[e.id];try{let r=await Qs(()=>import(e.module),[]);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rk(e){return e!=null&&typeof e.page=="string"}function Ok(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ik(e,t,r){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let i=await Tk(o,r);return i.links?i.links():[]}return[]}));return Fk(n.flat(1).filter(Ok).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function om(e,t,r,n,s,o){let i=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,a=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>i(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Mk(e,t,{includeHydrateFallback:r}={}){return Lk(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Lk(e){return[...new Set(e)]}function Ak(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Fk(e,t){let r=new Set,n=new Set(t);return e.reduce((s,o)=>{if(t&&!Rk(o)&&o.as==="script"&&o.href&&n.has(o.href))return s;let a=JSON.stringify(Ak(o));return r.has(a)||(r.add(a),s.push({key:a,link:o})),s},[])}function by(){let e=w.useContext(Xs);return th(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $k(){let e=w.useContext(Xl);return th(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rh=w.createContext(void 0);rh.displayName="FrameworkContext";function wy(){let e=w.useContext(rh);return th(e,"You must render this element inside a <HydratedRouter> element"),e}function Bk(e,t){let r=w.useContext(rh),[n,s]=w.useState(!1),[o,i]=w.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=w.useRef(null);w.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let b=x=>{x.forEach(m=>{i(m.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[e]),w.useEffect(()=>{if(n){let b=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(b)}}},[n]);let p=()=>{s(!0)},g=()=>{s(!1),i(!1)};return r?e!=="intent"?[o,h,{}]:[o,h,{onFocus:go(a,p),onBlur:go(l,g),onMouseEnter:go(u,p),onMouseLeave:go(d,g),onTouchStart:go(f,p)}]:[!1,h,{}]}function go(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Uk({page:e,...t}){let{router:r}=by(),n=w.useMemo(()=>uy(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(Hk,{page:e,matches:n,...t}):null}function Wk(e){let{manifest:t,routeModules:r}=wy(),[n,s]=w.useState([]);return w.useEffect(()=>{let o=!1;return Ik(e,t,r).then(i=>{o||s(i)}),()=>{o=!0}},[e,t,r]),n}function Hk({page:e,matches:t,...r}){let n=Mr(),{manifest:s,routeModules:o}=wy(),{basename:i}=by(),{loaderData:a,matches:l}=$k(),u=w.useMemo(()=>om(e,t,l,s,n,"data"),[e,t,l,s,n]),d=w.useMemo(()=>om(e,t,l,s,n,"assets"),[e,t,l,s,n]),f=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,b=!1;if(t.forEach(x=>{var v;let m=s.routes[x.route.id];!m||!m.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in a&&((v=o[x.route.id])!=null&&v.shouldRevalidate)||m.hasClientLoader?b=!0:g.add(x.route.id))}),g.size===0)return[];let y=Pk(e,i,"data");return b&&g.size>0&&y.searchParams.set("_routes",t.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[i,a,n,s,u,t,e,o]),h=w.useMemo(()=>Mk(d,s),[d,s]),p=Wk(d);return w.createElement(w.Fragment,null,f.map(g=>w.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>w.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:b})=>w.createElement("link",{key:g,...b})))}function Yk(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var _y=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_y&&(window.__reactRouterVersion="7.7.1")}catch{}function zk({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=T1({window:r,v5Compat:!0}));let s=n.current,[o,i]=w.useState({action:s.action,location:s.location}),a=w.useCallback(l=>{w.startTransition(()=>i(l))},[i]);return w.useLayoutEffect(()=>s.listen(a),[s,a]),w.createElement(bk,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var ky=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ui=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:o,replace:i,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:g}=w.useContext(Qt),b=typeof u=="string"&&ky.test(u),y,x=!1;if(typeof u=="string"&&b&&(y=u,_y))try{let E=new URL(window.location.href),j=u.startsWith("//")?new URL(E.protocol+u):new URL(u),I=Rr(j.pathname,g);j.origin===E.origin&&I!=null?u=I+j.search+j.hash:x=!0}catch{Gt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=sk(u,{relative:s}),[v,_,k]=Bk(n,h),S=Kk(u,{replace:i,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function D(E){t&&t(E),E.defaultPrevented||S(E)}let N=w.createElement("a",{...h,...k,href:y||m,onClick:x||o?t:D,ref:Yk(p,_),target:l,"data-discover":!b&&r==="render"?"true":void 0});return v&&!b?w.createElement(w.Fragment,null,N,w.createElement(Uk,{page:m})):N});ui.displayName="Link";var Vk=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:o,to:i,viewTransition:a,children:l,...u},d){let f=Ei(i,{relative:u.relative}),h=Mr(),p=w.useContext(Xl),{navigator:g,basename:b}=w.useContext(Qt),y=p!=null&&eS(f)&&a===!0,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,m=h.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(m=m.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&b&&(v=Rr(v,b)||v);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=m===x||!s&&m.startsWith(x)&&m.charAt(_)==="/",S=v!=null&&(v===x||!s&&v.startsWith(x)&&v.charAt(x.length)==="/"),D={isActive:k,isPending:S,isTransitioning:y},N=k?t:void 0,E;typeof n=="function"?E=n(D):E=[n,k?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(D):o;return w.createElement(ui,{...u,"aria-current":N,className:E,ref:d,style:j,to:i,viewTransition:a},typeof l=="function"?l(D):l)});Vk.displayName="NavLink";var qk=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:o,method:i=Ta,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let g=Xk(),b=Zk(a,{relative:u}),y=i.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&ky.test(a),m=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let _=v.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||i;g(_||v.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return w.createElement("form",{ref:p,method:y,action:b,onSubmit:n?l:m,...h,"data-discover":!x&&e==="render"?"true":void 0})});qk.displayName="Form";function Gk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sy(e){let t=w.useContext(Xs);return ge(t,Gk(e)),t}function Kk(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:i}={}){let a=Zl(),l=Mr(),u=Ei(e,{relative:o});return w.useCallback(d=>{if(Ck(d,t)){d.preventDefault();let f=r!==void 0?r:ci(l)===ci(u);a(e,{replace:f,state:n,preventScrollReset:s,relative:o,viewTransition:i})}},[l,a,u,r,n,t,e,s,o,i])}var Qk=0,Jk=()=>`__${String(++Qk)}__`;function Xk(){let{router:e}=Sy("useSubmit"),{basename:t}=w.useContext(Qt),r=mk();return w.useCallback(async(n,s={})=>{let{action:o,method:i,encType:a,formData:l,body:u}=jk(n,t);if(s.navigate===!1){let d=s.fetcherKey||Jk();await e.fetch(d,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Zk(e,{relative:t}={}){let{basename:r}=w.useContext(Qt),n=w.useContext(Jt);ge(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Ei(e||".",{relative:t})},i=Mr();if(e==null){o.search=i.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:_r([r,o.pathname])),ci(o)}function eS(e,{relative:t}={}){let r=w.useContext(py);ge(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Sy("useViewTransitionState"),s=Ei(e,{relative:t});if(!r.isTransitioning)return!1;let o=Rr(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Rr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return dl(s.pathname,i)!=null||dl(s.pathname,o)!=null}const tS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>eo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class nh extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class rS extends nh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class im extends nh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class am extends nh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ed;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ed||(Ed={}));var nS=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class sS{constructor(t,{headers:r={},customFetch:n,region:s=Ed.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=tS(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return nS(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let a={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(b=>{throw new rS(b)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new im(f);if(!f.ok)throw new am(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof am||s instanceof im?s.context:void 0}}})}}var at={},sh={},tc={},ji={},rc={},nc={},oS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ls=oS();const iS=Ls.fetch,Dy=Ls.fetch.bind(Ls),Cy=Ls.Headers,aS=Ls.Request,lS=Ls.Response,eo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cy,Request:aS,Response:lS,default:Dy,fetch:iS},Symbol.toStringTag,{value:"Module"})),cS=nw(eo);var sc={};Object.defineProperty(sc,"__esModule",{value:!0});let uS=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};sc.default=uS;var Ny=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nc,"__esModule",{value:!0});const dS=Ny(cS),fS=Ny(sc);let hS=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=dS.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let u=null,d=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const x=await o.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const b=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),y=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await o.text();try{u=JSON.parse(b),Array.isArray(u)&&o.status===404&&(d=[],u=null,h=200,p="OK")}catch{o.status===404&&b===""?(h=204,p="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new fS.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};nc.default=hS;var pS=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rc,"__esModule",{value:!0});const mS=pS(nc);let gS=class extends mS.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rc.default=gS;var vS=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});const yS=vS(rc);let xS=class extends yS.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ji.default=xS;var bS=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tc,"__esModule",{value:!0});const vo=bS(ji);let wS=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new vo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new vo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new vo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new vo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new vo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tc.default=wS;var oc={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.version=void 0;ic.version="0.0.0-automated";Object.defineProperty(oc,"__esModule",{value:!0});oc.DEFAULT_HEADERS=void 0;const _S=ic;oc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${_S.version}`};var Ey=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sh,"__esModule",{value:!0});const kS=Ey(tc),SS=Ey(ji),DS=oc;let CS=class jy{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},DS.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new kS.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jy(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${t}`);let l;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(i="POST",l=r);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new SS.default({method:i,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};sh.default=CS;var to=Ot&&Ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});at.PostgrestError=at.PostgrestBuilder=at.PostgrestTransformBuilder=at.PostgrestFilterBuilder=at.PostgrestQueryBuilder=at.PostgrestClient=void 0;const Py=to(sh);at.PostgrestClient=Py.default;const Ty=to(tc);at.PostgrestQueryBuilder=Ty.default;const Ry=to(ji);at.PostgrestFilterBuilder=Ry.default;const Oy=to(rc);at.PostgrestTransformBuilder=Oy.default;const Iy=to(nc);at.PostgrestBuilder=Iy.default;const My=to(sc);at.PostgrestError=My.default;var NS=at.default={PostgrestClient:Py.default,PostgrestQueryBuilder:Ty.default,PostgrestFilterBuilder:Ry.default,PostgrestTransformBuilder:Oy.default,PostgrestBuilder:Iy.default,PostgrestError:My.default};const{PostgrestClient:ES,PostgrestQueryBuilder:jL,PostgrestFilterBuilder:PL,PostgrestTransformBuilder:TL,PostgrestBuilder:RL,PostgrestError:OL}=NS;function jS(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const PS=jS(),TS="2.11.15",RS=`realtime-js/${TS}`,OS="1.0.0",Ly=1e4,IS=1e3;var Wo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wo||(Wo={}));var Ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ve||(Ve={}));var Ut;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ut||(Ut={}));var jd;(function(e){e.websocket="websocket"})(jd||(jd={}));var Nn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Nn||(Nn={}));class MS{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(t.slice(i,i+s));i=i+s;const l=n.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Ay{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const lm=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=LS(i,e,t,s),o),{})},LS=(e,t,r,n)=>{const s=t.find(a=>a.name===e),o=s==null?void 0:s.type,i=r[e];return o&&!n.includes(o)?Fy(o,i):Pd(i)},Fy=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return BS(t,r)}switch(e){case ue.bool:return AS(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return FS(t);case ue.json:case ue.jsonb:return $S(t);case ue.timestamp:return US(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Pd(t);default:return Pd(t)}},Pd=e=>e,AS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},FS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$S=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BS=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>Fy(t,a))}return e},US=e=>typeof e=="string"?e.replace(" ","T"):e,$y=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Zc{constructor(t,r,n={},s=Ly){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var cm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(cm||(cm={}));class Ho{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ho.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=Ho.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ho.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),a={},l={};return this.map(o,(u,d)=>{i[u]||(l[u]=d)}),this.map(i,(u,d)=>{const f=o[u];if(f){const h=d.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),g=d.filter(y=>p.indexOf(y.presence_ref)<0),b=f.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[u]=g),b.length>0&&(l[u]=b)}else a[u]=d}),this.syncDiff(o,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const f=t[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[a].unshift(...h)}n(a,d,l)}),this.map(i,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var um;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(um||(um={}));var dm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dm||(dm={}));var mr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class oh{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new Ay(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Ho(this),this.broadcastEndpointURL=$y(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(d=>t==null?void 0:t(mr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(mr.CLOSED));const l={},u={broadcast:o,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(mr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let b=0;b<p;b++){const y=h[b],{filter:{event:x,schema:m,table:v,filter:_}}=y,k=d&&d[b];if(k&&k.event===x&&k.schema===m&&k.table===v&&k.filter===_)g.push(Object.assign(Object.assign({},y),{id:k.id}));else{this.unsubscribe(),this.state=Ve.errored,t==null||t(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(mr.SUBSCRIBED);return}}).receive("error",d=>{this.state=Ve.errored,t==null||t(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Zc(this,Ut.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zc(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Ut;if(n&&[a,l,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,b,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(b=p.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,b,y,x,m,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,k=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((b=r.ids)===null||b===void 0?void 0:b.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(m=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:b,table:y,commit_timestamp:x,type:m,errors:v}=g;h=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:x,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&oh.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ut.close,{},t)}_onError(t){this._on(Ut.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lm(t.columns,t.old_record)),r}}const fm=()=>{},WS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HS{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ly,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fm,this.ref=0,this.logger=fm,this.conn=null,this.sendBuffer=[],this.serializer=new MS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Qs(()=>Promise.resolve().then(()=>eo),void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${jd.websocket}`,this.httpEndpoint=$y(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ay(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=PS),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:OS}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wo.connecting:return Nn.Connecting;case Wo.open:return Nn.Open;case Wo.closing:return Nn.Closing;default:return Nn.Closed}}isConnected(){return this.connectionState()===Nn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new oh(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:RS};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ut.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(IS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ut.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([WS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ih extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Re(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YS extends ih{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Td extends ih{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var zS=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const By=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>eo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},VS=()=>zS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>eo),void 0)).Response:Response}),Rd=e=>{if(Array.isArray(e))return e.map(r=>Rd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Rd(n)}),t},qS=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Kn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const eu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GS=(e,t,r)=>Kn(void 0,void 0,void 0,function*(){const n=yield VS();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,i=(s==null?void 0:s.statusCode)||o+"";t(new YS(eu(s),o,i))}).catch(s=>{t(new Td(eu(s),s))}):t(new Td(eu(e),e))}),KS=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(qS(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function Pi(e,t,r,n,s,o){return Kn(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(r,KS(t,n,s,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>GS(l,a,n))})})}function fl(e,t,r,n){return Kn(this,void 0,void 0,function*(){return Pi(e,"GET",t,r,n)})}function gr(e,t,r,n,s){return Kn(this,void 0,void 0,function*(){return Pi(e,"POST",t,n,s,r)})}function Od(e,t,r,n,s){return Kn(this,void 0,void 0,function*(){return Pi(e,"PUT",t,n,s,r)})}function QS(e,t,r,n){return Kn(this,void 0,void 0,function*(){return Pi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Uy(e,t,r,n,s){return Kn(this,void 0,void 0,function*(){return Pi(e,"DELETE",t,n,s,r)})}var ot=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const JS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class XS{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=By(s)}uploadOrUpdate(t,r,n,s){return ot(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},hm),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?Od:gr)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(Re(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ot(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:hm.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Od(this.fetch,a.toString(),l,{headers:d});return{data:{path:o,fullPath:f.Key},error:null}}catch(l){if(Re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield gr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new ih("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}update(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield gr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=yield gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}download(t,r){return ot(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield fl(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}info(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield fl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Rd(n),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}exists(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield QS(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Re(n)&&n instanceof Td){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield Uy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}list(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},JS),r),{prefix:t||""});return{data:yield gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const ZS="2.10.4",eD={"X-Client-Info":`storage-js/${ZS}`};var Xn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class tD{constructor(t,r={},n,s){const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},eD),r),this.fetch=By(n)}listBuckets(){return Xn(this,void 0,void 0,function*(){try{return{data:yield fl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}})}getBucket(t){return Xn(this,void 0,void 0,function*(){try{return{data:yield fl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Xn(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Xn(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Xn(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Xn(this,void 0,void 0,function*(){try{return{data:yield Uy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}}class rD extends tD{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new XS(this.url,this.headers,t,this.fetch)}}const nD="2.53.0";let Po="";typeof Deno<"u"?Po="deno":typeof document<"u"?Po="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Po="react-native":Po="node";const sD={"X-Client-Info":`supabase-js-${Po}/${nD}`},oD={headers:sD},iD={schema:"public"},aD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lD={};var cD=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const uD=e=>{let t;return e?t=e:typeof fetch>"u"?t=Dy:t=fetch,(...r)=>t(...r)},dD=()=>typeof Headers>"u"?Cy:Headers,fD=(e,t,r)=>{const n=uD(r),s=dD();return(o,i)=>cD(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:u}))})};var hD=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};function pD(e){return e.endsWith("/")?e:e+"/"}function mD(e,t){var r,n;const{db:s,auth:o,realtime:i,global:a}=e,{db:l,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>hD(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Wy="2.71.1",os=30*1e3,Id=3,tu=Id*os,gD="http://localhost:9999",vD="supabase.auth.token",yD={"X-Client-Info":`gotrue-js/${Wy}`},Md="X-Supabase-Api-Version",Hy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bD=10*60*1e3;class ah extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wD extends ah{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function _D(e){return Q(e)&&e.name==="AuthApiError"}class Yy extends ah{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class gn extends ah{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Br extends gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kD(e){return Q(e)&&e.name==="AuthSessionMissingError"}class na extends gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sa extends gn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class oa extends gn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SD(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class pm extends gn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ld extends gn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ru(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class mm extends gn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ad extends gn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gm=` 	
\r=`.split(""),DD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gm.length;t+=1)e[gm[t].charCodeAt(0)]=-2;for(let t=0;t<hl.length;t+=1)e[hl[t].charCodeAt(0)]=t;return e})();function vm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hl[n]),t.queuedBits-=6}}function zy(e,t,r){const n=DD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ym(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{ED(i,n,r)};for(let i=0;i<e.length;i+=1)zy(e.charCodeAt(i),s,o);return t.join("")}function CD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ND(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}CD(n,t)}}function ED(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function jD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)zy(e.charCodeAt(s),r,n);return new Uint8Array(t)}function PD(e){const t=[];return ND(e,r=>t.push(r)),new Uint8Array(t)}function TD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>vm(s,r,n)),vm(null,r,n),t.join("")}function RD(e){return Math.round(Date.now()/1e3)+e}function OD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ft=()=>typeof window<"u"&&typeof document<"u",yn={tested:!1,writable:!1},Vy=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yn.tested)return yn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),yn.tested=!0,yn.writable=!0}catch{yn.tested=!0,yn.writable=!1}return yn.writable};function ID(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const qy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qs(()=>Promise.resolve().then(()=>eo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},MD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",is=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},xn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fr=async(e,t)=>{await e.removeItem(t)};class ac{constructor(){this.promise=new ac.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ac.promiseConstructor=Promise;function nu(e){const t=e.split(".");if(t.length!==3)throw new Ad("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!xD.test(t[n]))throw new Ad("JWT not in base64url format");return{header:JSON.parse(ym(t[0])),payload:JSON.parse(ym(t[1])),signature:jD(t[2]),raw:{header:t[0],payload:t[1]}}}async function LD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AD(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function FD(e){return("0"+e.toString(16)).substr(-2)}function $D(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,FD).join("")}async function BD(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function UD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zn(e,t,r=!1){const n=$D();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await is(e,`${t}-code-verifier`,s);const o=await UD(n);return[o,n===o?"plain":"s256"]}const WD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HD(e){const t=e.headers.get(Md);if(!t||!t.match(WD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function YD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function zD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(e){if(!VD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function su(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xm(e){return JSON.parse(JSON.stringify(e))}var qD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Sn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GD=[502,503,504];async function bm(e){var t;if(!MD(e))throw new Ld(Sn(e),0);if(GD.includes(e.status))throw new Ld(Sn(e),e.status);let r;try{r=await e.json()}catch(o){throw new Yy(Sn(o),o)}let n;const s=HD(e);if(s&&s.getTime()>=Hy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mm(Sn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new mm(Sn(r),e.status,r.weak_password.reasons);throw new wD(Sn(r),e.status||500,n)}const KD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function X(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Md]||(o[Md]=Hy["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await QD(e,t,r+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function QD(e,t,r,n,s,o){const i=KD(t,n,s,o);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Ld(Sn(l),0)}if(a.ok||await bm(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await bm(l)}}function hr(e){var t;let r=null;eC(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=RD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function wm(e){const t=hr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function JD(e){return{data:e,error:null}}function XD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=qD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function ZD(e){return e}function eC(e){return e.access_token&&e.refresh_token&&e.expires_in}const ou=["global","local","others"];var tC=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class rC{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=qy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ou[0]){if(ou.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ou.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=tC(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:XD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:ZD});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=b}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Q(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){es(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){es(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:zr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){es(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:zr})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){es(t.userId);try{const{data:r,error:n}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(t){es(t.userId),es(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}function _m(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function nC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ts={debug:!!(globalThis&&Vy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sC extends Gy{}async function oC(e,t,r){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ts.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}nC();const iC={url:gD,storageKey:vD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function km(e,t,r){return await r()}const rs={};class di{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=di.nextInstanceID,di.nextInstanceID+=1,this.instanceID>0&&Ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},iC),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new rC({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qy(s.fetch),this.lock=s.lock||km,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ft()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=oC:this.lock=km,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Vy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_m(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=_m(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=rs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){rs[this.storageKey]=Object.assign(Object.assign({},rs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=rs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rs[this.storageKey]=Object.assign(Object.assign({},rs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=ID(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ft()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),SD(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new Yy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:hr}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(Q(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Zn(this.storage,this.storageKey)),o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:hr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hr})}else throw new sa("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(Q(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:a}=t;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wm})}else if("phone"in t){const{phone:o,password:i,options:a}=t;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wm})}else throw new sa("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new na}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,a,l,u,d,f,h,p;let g,b;if("message"in t)g=t.message,b=t.signature;else{const{chain:y,wallet:x,statement:m,options:v}=t;let _;if(Ft())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const k=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let D;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")D=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)D=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)g=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:y,error:x}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:TD(b)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:hr});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new na}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(Q(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await xn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:hr});if(await Fr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new na}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(Q(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:hr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new na}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Zn(this.storage,this.storageKey));const{error:f}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new sa("You must provide either an email or phone number.")}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:hr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,u=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Zn(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:JD})}catch(o){if(Q(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Br;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await X(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:a}=await X(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new sa("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<tu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await xn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=su()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zr}):await this._useSession(async r=>{var n,s,o;const{data:i,error:a}=r;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Br}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:zr})})}catch(r){if(Q(r))return kD(r)&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Br;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Zn(this.storage,this.storageKey));const{data:u,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:zr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Br;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=nu(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:a}=r;if(a)throw a;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Br;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ft())throw new oa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new oa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pm("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:u}=t;if(!o||!a||!i||!u)throw new oa("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:b,error:y}=await this._getUser(o);if(y)throw y;const x={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await xn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(_D(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=OD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Zn(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Q(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,a,l,u,d;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ft()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Q(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await AD(async s=>(s>0&&await LD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:hr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&ru(o)&&Date.now()+i-n<os})}catch(n){if(this._debug(r,"error",n),Q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ft()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await xn(this.storage,this.storageKey);if(s&&this.userStorage){let i=await xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await is(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:su()}else if(s&&!s.user&&!s.user){const i=await xn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Fr(this.storage,this.storageKey+"-user"),await is(this.storage,this.storageKey,s)):s.user=su()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tu;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${tu}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ru(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ac;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Br;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),Q(o)){const i={session:null,error:o};return ru(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await is(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=xm(s);await is(this.storage,this.storageKey,o)}else{const s=xm(r);await is(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Fr(this.storage,this.storageKey),await Fr(this.storage,this.storageKey+"-code-verifier"),await Fr(this.storage,this.storageKey+"-user"),this.userStorage&&await Fr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),os);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${os}ms, refresh threshold is ${Id} ticks`),s<=Id&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Gy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Zn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await X(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=nu(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+bD>s)return n;const{data:o,error:i}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:l}}=nu(n);r!=null&&r.allowExpired||YD(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=zD(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,PD(`${a}.${l}`)))throw new Ad("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}di.nextInstanceID=0;const aC=di;class lC extends aC{constructor(t){super(t)}}var cC=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class uC{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=pD(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:iD,realtime:lD,auth:Object.assign(Object.assign({},aD),{storageKey:u}),global:oD},f=mD(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=fD(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new ES(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new rD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new sS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return cC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:a,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lC({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new HS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dC=(e,t,r)=>new uC(e,t,r);function fC(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fC()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hC="https://rqbvcvwbziilnycqtmnc.supabase.co",pC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxYnZjdndiemlpbG55Y3F0bW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyMzk5ODIsImV4cCI6MjA2NTgxNTk4Mn0.819LDXCnlu2dgCPw91oMbZIojeFom-UxqJn2hA5yjBM",z=dC(hC,pC),Ky=w.createContext(void 0);function mC(){const e=w.useContext(Ky);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function gC({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{z.auth.getSession().then(({data:{session:h}})=>{s(h),r((h==null?void 0:h.user)??null),i(!1)});const{data:{subscription:f}}=z.auth.onAuthStateChange(async(h,p)=>{s(p),r((p==null?void 0:p.user)??null),i(!1)});return()=>f.unsubscribe()},[]);const d={user:t,session:n,loading:o,signIn:async(f,h)=>await z.auth.signInWithPassword({email:f,password:h}),signUp:async(f,h)=>await z.auth.signUp({email:f,password:h}),signOut:async()=>{await z.auth.signOut()}};return c.jsx(Ky.Provider,{value:d,children:e})}function vC({children:e}){return c.jsx(c.Fragment,{children:e})}function Je(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yC=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Sm=yC,iu=()=>Math.random().toString(36).substring(7).split("").join("."),xC={INIT:`@@redux/INIT${iu()}`,REPLACE:`@@redux/REPLACE${iu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iu()}`},Dm=xC;function bC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Qy(e,t,r){if(typeof e!="function")throw new Error(Je(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Je(1));return r(Qy)(e,t)}let n=e,s=t,o=new Map,i=o,a=0,l=!1;function u(){i===o&&(i=new Map,o.forEach((y,x)=>{i.set(x,y)}))}function d(){if(l)throw new Error(Je(3));return s}function f(y){if(typeof y!="function")throw new Error(Je(4));if(l)throw new Error(Je(5));let x=!0;u();const m=a++;return i.set(m,y),function(){if(x){if(l)throw new Error(Je(6));x=!1,u(),i.delete(m),o=null}}}function h(y){if(!bC(y))throw new Error(Je(7));if(typeof y.type>"u")throw new Error(Je(8));if(typeof y.type!="string")throw new Error(Je(17));if(l)throw new Error(Je(9));try{l=!0,s=n(s,y)}finally{l=!1}return(o=i).forEach(m=>{m()}),y}function p(y){if(typeof y!="function")throw new Error(Je(10));n=y,h({type:Dm.REPLACE})}function g(){const y=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Je(11));function m(){const _=x;_.next&&_.next(d())}return m(),{unsubscribe:y(m)}},[Sm](){return this}}}return h({type:Dm.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[Sm]:g}}function Cm(e,t){return function(...r){return t(e.apply(this,r))}}function Nm(e,t){if(typeof e=="function")return Cm(e,t);if(typeof e!="object"||e===null)throw new Error(Je(16));const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=Cm(s,t))}return r}function Jy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function wC(...e){return t=>(r,n)=>{const s=t(r,n);let o=()=>{throw new Error(Je(15))};const i={getState:s.getState,dispatch:(l,...u)=>o(l,...u)},a=e.map(l=>l(i));return o=Jy(...a)(s.dispatch),{...s,dispatch:o}}}var _C={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ti=w;function kC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var SC=typeof Object.is=="function"?Object.is:kC,DC=Ti.useSyncExternalStore,CC=Ti.useRef,NC=Ti.useEffect,EC=Ti.useMemo,jC=Ti.useDebugValue;_C.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=CC(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=EC(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),s!==void 0&&i.hasValue){var g=i.value;if(s(g,p))return f=g}return f=p}if(g=f,SC(d,p))return g;var b=n(p);return s!==void 0&&s(g,b)?(d=p,g):(d=p,f=b)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,s]);var a=DC(e,o[0],o[1]);return NC(function(){i.hasValue=!0,i.value=a},[a]),jC(a),a};var PC=w.version.startsWith("19"),TC=Symbol.for(PC?"react.transitional.element":"react.element"),RC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),IC=Symbol.for("react.strict_mode"),MC=Symbol.for("react.profiler"),LC=Symbol.for("react.consumer"),AC=Symbol.for("react.context"),Xy=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),$C=Symbol.for("react.suspense_list"),lh=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),UC=Xy,WC=lh;function HC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case TC:switch(e=e.type,e){case OC:case MC:case IC:case FC:case $C:return e;default:switch(e=e&&e.$$typeof,e){case AC:case Xy:case BC:case lh:return e;case LC:return e;default:return t}}case RC:return t}}}function YC(e){return HC(e)===lh}function zC(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:i}){let a=!1,l,u,d,f,h;function p(m,v){return l=m,u=v,d=e(l,u),f=t(n,u),h=r(d,f,u),a=!0,h}function g(){return d=e(l,u),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function b(){return e.dependsOnOwnProps&&(d=e(l,u)),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function y(){const m=e(l,u),v=!i(m,d);return d=m,v&&(h=r(d,f,u)),h}function x(m,v){const _=!o(v,u),k=!s(m,l,v,u);return l=m,u=v,_&&k?g():_?b():k?y():h}return function(v,_){return a?x(v,_):p(v,_)}}function VC(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...s}){const o=t(e,s),i=r(e,s),a=n(e,s);return zC(o,i,a,e,s)}function qC(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function Fd(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function Em(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Zy(e,t){return function(n,{displayName:s}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=e,o.dependsOnOwnProps=Em(e);let u=o(a,l);return typeof u=="function"&&(o.mapToProps=u,o.dependsOnOwnProps=Em(u),u=o(a,l)),u},o}}function ch(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function GC(e){return e&&typeof e=="object"?Fd(t=>qC(e,t)):e?typeof e=="function"?Zy(e):ch(e,"mapDispatchToProps"):Fd(t=>({dispatch:t}))}function KC(e){return e?typeof e=="function"?Zy(e):ch(e,"mapStateToProps"):Fd(()=>({}))}function QC(e,t,r){return{...r,...e,...t}}function JC(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,i;return function(l,u,d){const f=e(l,u,d);return o?s(f,i)||(i=f):(o=!0,i=f),i}}}function XC(e){return e?typeof e=="function"?JC(e):ch(e,"mergeProps"):()=>QC}function ZC(e){e()}function eN(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZC(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var jm={notify(){},get:()=>[]};function ex(e,t){let r,n=jm,s=0,o=!1;function i(b){d();const y=n.subscribe(b);let x=!1;return()=>{x||(x=!0,y(),f())}}function a(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return o}function d(){s++,r||(r=t?t.addNestedSub(l):e.subscribe(l),n=eN())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=jm)}function h(){o||(o=!0,d())}function p(){o&&(o=!1,f())}const g={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var tN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rN=tN(),nN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sN=nN(),oN=()=>rN||sN?w.useLayoutEffect:w.useEffect,pl=oN();function Pm(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function au(e,t){if(Pm(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Pm(e[r[s]],t[r[s]]))return!1;return!0}var iN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cN={[UC]:lN,[WC]:tx};function Tm(e){return YC(e)?tx:cN[e.$$typeof]||iN}var uN=Object.defineProperty,dN=Object.getOwnPropertyNames,Rm=Object.getOwnPropertySymbols,fN=Object.getOwnPropertyDescriptor,hN=Object.getPrototypeOf,Om=Object.prototype;function $d(e,t){if(typeof t!="string"){if(Om){const o=hN(t);o&&o!==Om&&$d(e,o)}let r=dN(t);Rm&&(r=r.concat(Rm(t)));const n=Tm(e),s=Tm(t);for(let o=0;o<r.length;++o){const i=r[o];if(!aN[i]&&!(s&&s[i])&&!(n&&n[i])){const a=fN(t,i);try{uN(e,i,a)}catch{}}}}return e}var lu=Symbol.for("react-redux-context"),cu=typeof globalThis<"u"?globalThis:{};function pN(){if(!w.createContext)return{};const e=cu[lu]??(cu[lu]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var rx=pN(),mN=[null,null];function gN(e,t,r){pl(()=>e(...t),r)}function vN(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function yN(e,t,r,n,s,o,i,a,l,u,d){if(!e)return()=>{};let f=!1,h=null;const p=()=>{if(f||!a.current)return;const b=t.getState();let y,x;try{y=n(b,s.current)}catch(m){x=m,h=m}x||(h=null),y===o.current?i.current||u():(o.current=y,l.current=y,i.current=!0,d())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function xN(e,t){return e===t}function bN(e,t,r,{pure:n,areStatesEqual:s=xN,areOwnPropsEqual:o=au,areStatePropsEqual:i=au,areMergedPropsEqual:a=au,forwardRef:l=!1,context:u=rx}={}){const d=u,f=KC(e),h=GC(t),p=XC(r),g=!!e;return y=>{const x=y.displayName||y.name||"Component",m=`Connect(${x})`,v={shouldHandleStateChanges:g,displayName:m,wrappedComponentName:x,WrappedComponent:y,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:a};function _(D){const[N,E,j]=w.useMemo(()=>{const{reactReduxForwardedRef:_t,...io}=D;return[D.context,_t,io]},[D]),I=w.useMemo(()=>{let _t=d;return N!=null&&N.Consumer,_t},[N,d]),U=w.useContext(I),A=!!D.store&&!!D.store.getState&&!!D.store.dispatch,$=!!U&&!!U.store,T=A?D.store:U.store,O=$?U.getServerState:T.getState,B=w.useMemo(()=>VC(T.dispatch,v),[T]),[C,R]=w.useMemo(()=>{if(!g)return mN;const _t=ex(T,A?void 0:U.subscription),io=_t.notifyNestedSubs.bind(_t);return[_t,io]},[T,A,U]),M=w.useMemo(()=>A?U:{...U,subscription:C},[A,U,C]),W=w.useRef(void 0),K=w.useRef(j),Ce=w.useRef(void 0),Te=w.useRef(!1),Xt=w.useRef(!1),st=w.useRef(void 0);pl(()=>(Xt.current=!0,()=>{Xt.current=!1}),[]);const Ne=w.useMemo(()=>()=>Ce.current&&j===K.current?Ce.current:B(T.getState(),j),[T,j]),vn=w.useMemo(()=>io=>C?yN(g,T,C,B,K,W,Te,Xt,Ce,R,io):()=>{},[C]);gN(vN,[K,W,Te,j,Ce,R]);let Fi;try{Fi=w.useSyncExternalStore(vn,Ne,O?()=>B(O(),j):Ne)}catch(_t){throw st.current&&(_t.message+=`
The error may be correlated with this previous error:
${st.current.stack}

`),_t}pl(()=>{st.current=void 0,Ce.current=void 0,W.current=Fi});const Sc=w.useMemo(()=>w.createElement(y,{...Fi,ref:E}),[E,y,Fi]);return w.useMemo(()=>g?w.createElement(I.Provider,{value:M},Sc):Sc,[I,Sc,M])}const S=w.memo(_);if(S.WrappedComponent=y,S.displayName=_.displayName=m,l){const N=w.forwardRef(function(j,I){return w.createElement(S,{...j,reactReduxForwardedRef:I})});return N.displayName=m,N.WrappedComponent=y,$d(N,y)}return $d(S,y)}}var nx=bN;function wN(e){const{children:t,context:r,serverState:n,store:s}=e,o=w.useMemo(()=>{const l=ex(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),i=w.useMemo(()=>s.getState(),[s]);pl(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,i]);const a=r||rx;return w.createElement(a.Provider,{value:o},t)}var _N=wN,kN=!0,uu="Invariant failed";function SN(e,t){if(!e){if(kN)throw new Error(uu);var r=typeof t=="function"?t():t,n=r?"".concat(uu,": ").concat(r):uu;throw new Error(n)}}var Ht=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,i=n-o,a=s-r,l={top:r,right:n,bottom:s,left:o,width:i,height:a,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return l},uh=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Im=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},DN=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},du={top:0,right:0,bottom:0,left:0},dh=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?du:n,o=t.border,i=o===void 0?du:o,a=t.padding,l=a===void 0?du:a,u=Ht(uh(r,s)),d=Ht(Im(r,i)),f=Ht(Im(d,l));return{marginBox:u,borderBox:Ht(r),paddingBox:d,contentBox:f,margin:s,border:i,padding:l}},kt=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&SN(!1),s},CN=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ml=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,i=t.padding,a=DN(n,r);return dh({borderBox:a,border:s,margin:o,padding:i})},gl=function(t,r){return r===void 0&&(r=CN()),ml(t,r)},sx=function(t,r){var n={top:kt(r.marginTop),right:kt(r.marginRight),bottom:kt(r.marginBottom),left:kt(r.marginLeft)},s={top:kt(r.paddingTop),right:kt(r.paddingRight),bottom:kt(r.paddingBottom),left:kt(r.paddingLeft)},o={top:kt(r.borderTopWidth),right:kt(r.borderRightWidth),bottom:kt(r.borderBottomWidth),left:kt(r.borderLeftWidth)};return dh({borderBox:t,margin:n,padding:s,border:o})},ox=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return sx(r,n)},NN=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const fi=NN;function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(null,arguments)}function ix(e,t){}ix.bind(null,"warn");ix.bind(null,"error");function nn(){}function EN(e,t){return{...e,...t}}function Pt(e,t,r){const n=t.map(s=>{const o=EN(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const jN="Invariant failed";class yl extends Error{}yl.prototype.toString=function(){return this.message};function F(e,t){throw new yl(jN)}class PN extends P.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=nn,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof yl&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Pt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof yl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const TN=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,xl=e=>e+1,RN=e=>`
  You have lifted an item in position ${xl(e.source.index)}
`,ax=(e,t)=>{const r=e.droppableId===t.droppableId,n=xl(e.index),s=xl(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},lx=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,ON=e=>{const t=e.destination;if(t)return ax(e.source,t);const r=e.combine;return r?lx(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Mm=e=>`
  The item has returned to its starting position
  of ${xl(e.index)}
`,IN=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Mm(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${ax(e.source,t)}
    `:r?`
      You have dropped the item.
      ${lx(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Mm(e.source)}
  `},Oa={dragHandleUsageInstructions:TN,onDragStart:RN,onDragUpdate:ON,onDragEnd:IN};function MN(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function cx(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!MN(e[r],t[r]))return!1;return!0}function ee(e,t){const r=w.useState(()=>({inputs:t,result:e()}))[0],n=w.useRef(!0),s=w.useRef(r),i=n.current||!!(t&&s.current.inputs&&cx(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{n.current=!1,s.current=i},[i]),i.result}function G(e,t){return ee(()=>e,t)}const Ae={x:0,y:0},Be=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),pt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),sn=(e,t)=>e.x===t.x&&e.y===t.y,ro=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Hn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},hi=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Lm=(e,t)=>Math.min(...t.map(r=>hi(e,r))),ux=e=>t=>({x:e(t.x),y:e(t.y)});var LN=(e,t)=>{const r=Ht({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Ri=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Am=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],AN={top:0,right:0,bottom:0,left:0},FN=(e,t)=>t?Ri(e,t.scroll.diff.displacement):e,$N=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,BN=(e,t)=>t&&t.shouldClipSubject?LN(t.pageMarginBox,e):Ht(e);var As=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=FN(e.marginBox,n),o=$N(s,r,t),i=BN(o,n);return{page:e,withPlaceholder:t,active:i}},fh=(e,t)=>{e.frame||F();const r=e.frame,n=pt(t,r.scroll.initial),s=ro(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},i=As({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function Le(e,t=cx){let r=null;function n(...s){if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}const dx=Le(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),fx=Le(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),lc=Le(e=>Object.values(e)),UN=Le(e=>Object.values(e));var no=Le((e,t)=>UN(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function hh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function cc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var uc=Le((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),WN=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!hh(s))return null;function i(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...s,at:g}}const a=s.displaced.all,l=a.length?a[0]:null;if(e)return l?i(l):null;const u=uc(t,n);if(!l){if(!u.length)return null;const p=u[u.length-1];return i(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===l);d===-1&&F();const f=d-1;if(f<0)return null;const h=u[f];return i(h.descriptor.id)},so=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const hx={point:Ae,value:0},pi={invisible:{},visible:{},all:[]},HN={displaced:pi,displacedBy:hx,at:null};var Rt=(e,t)=>r=>e<=r&&r<=t,px=e=>{const t=Rt(e.top,e.bottom),r=Rt(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const l=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return l&&u?!0:l&&i||u&&o}},YN=e=>{const t=Rt(e.top,e.bottom),r=Rt(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const ph={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},mx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var zN=e=>t=>{const r=Rt(t.top,t.bottom),n=Rt(t.left,t.right);return s=>e===ph?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const VN=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:Ae;return Ri(e,r)},qN=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,GN=(e,t,r)=>r(t)(e),mh=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?VN(e,t):e;return qN(o,t,s)&&GN(o,r,s)},KN=e=>mh({...e,isVisibleThroughFrameFn:px}),gx=e=>mh({...e,isVisibleThroughFrameFn:YN}),QN=e=>mh({...e,isVisibleThroughFrameFn:zN(e.destination.axis)}),JN=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function XN(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ht(uh(r,n))}function mi({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(a,l){const u=XN(l,r),d=l.descriptor.id;if(a.all.push(d),!KN({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=JN(d,o,s),p={draggableId:d,shouldAnimate:h};return a.visible[d]=p,a},{all:[],visible:{},invisible:{}})}function ZN(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Fm({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=ZN(e,{inHomeList:t});return{displaced:pi,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function bl({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:i,forceShouldAnimate:a}){const l=so(e,r);if(i==null)return Fm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const u=t.find(g=>g.descriptor.index===i);if(!u)return Fm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const d=uc(e,t),f=t.indexOf(u),h=d.slice(f);return{displaced:mi({afterDragging:h,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function un(e,t){return!!t.effected[e]}var eE=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return un(o,s)?e?a:a-1:e?a+1:a},tE=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,i=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=t?a:a+1;return o<i||o>l?null:o},rE=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:i,viewport:a,afterCritical:l})=>{const u=i.at;if(u||F(),u.type==="REORDER"){const f=tE({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:o});return f==null?null:bl({draggable:r,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:f})}const d=eE({isMovingForward:e,destination:s,displaced:i.displaced,draggables:n,combine:u.combine,afterCritical:l});return d==null?null:bl({draggable:r,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:d})},nE=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return un(r,t)?s?Ae:ro(n.point):s?n.point:Ae},sE=({afterCritical:e,impact:t,draggables:r})=>{const n=cc(t);n||F();const s=n.draggableId,o=r[s].page.borderBox.center,i=nE({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return Be(o,i)};const vx=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,oE=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,gh=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,$m=({axis:e,moveRelativeTo:t,isMoving:r})=>Hn(e.line,t.marginBox[e.end]+vx(e,r),gh(e,t.marginBox,r)),Bm=({axis:e,moveRelativeTo:t,isMoving:r})=>Hn(e.line,t.marginBox[e.start]-oE(e,r),gh(e,t.marginBox,r)),iE=({axis:e,moveInto:t,isMoving:r})=>Hn(e.line,t.contentBox[e.start]+vx(e,r),gh(e,t.contentBox,r));var aE=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=no(n.descriptor.id,r),i=t.page,a=n.axis;if(!o.length)return iE({axis:a,moveInto:n.page,isMoving:i});const{displaced:l,displacedBy:u}=e,d=l.all[0];if(d){const h=r[d];if(un(d,s))return Bm({axis:a,moveRelativeTo:h.page,isMoving:i});const p=ml(h.page,u.point);return Bm({axis:a,moveRelativeTo:p,isMoving:i})}const f=o[o.length-1];if(f.descriptor.id===t.descriptor.id)return i.borderBox.center;if(un(f.descriptor.id,s)){const h=ml(f.page,ro(s.displacedBy.point));return $m({axis:a,moveRelativeTo:h,isMoving:i})}return $m({axis:a,moveRelativeTo:f.page,isMoving:i})},Bd=(e,t)=>{const r=e.frame;return r?Be(t,r.scroll.diff.displacement):t};const lE=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?aE({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):sE({impact:e,draggables:n,afterCritical:s})};var dc=e=>{const t=lE(e),r=e.droppable;return r?Bd(r,t):t},yx=(e,t)=>{const r=pt(t,e.scroll.initial),n=ro(r);return{frame:Ht({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Um(e,t){return e.map(r=>t[r])}function cE(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var uE=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=yx(t,Be(t.scroll.current,s)),i=r.frame?fh(r,Be(r.frame.scroll.current,s)):r,a=e.displaced,l=mi({afterDragging:Um(a.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),u=mi({afterDragging:Um(a.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),d={},f={},h=[a,l,u];return a.all.forEach(g=>{const b=cE(g,h);if(b){f[g]=b;return}d[g]=!0}),{...e,displaced:{all:a.all,invisible:d,visible:f}}},dE=(e,t)=>Be(e.scroll.diff.displacement,t),vh=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=dE(r,e),s=pt(n,t.page.borderBox.center);return Be(t.client.borderBox.center,s)},xx=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const i=pt(r,e.page.borderBox.center),l={target:Ri(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:n};return o?QN(l):gx(l)},fE=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const u=no(r.descriptor.id,n),d=so(t,r),f=WN({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||rE({isMovingForward:e,isInHomeList:d,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:l});if(!f)return null;const h=dc({impact:f,draggable:t,droppable:r,draggables:n,afterCritical:l});if(xx({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:vh({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:f,scrollJumpRequest:null};const g=pt(h,i),b=uE({impact:f,viewport:o,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:a,impact:b,scrollJumpRequest:g}};const Qe=e=>{const t=e.subject.active;return t||F(),t};var hE=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,a=Rt(o[i.start],o[i.end]),l=lc(n).filter(d=>d!==r).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>px(s.frame)(Qe(d))).filter(d=>{const f=Qe(d);return e?o[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<o[i.crossAxisStart]}).filter(d=>{const f=Qe(d),h=Rt(f[i.start],f[i.end]);return a(f[i.start])||a(f[i.end])||h(o[i.start])||h(o[i.end])}).sort((d,f)=>{const h=Qe(d)[i.crossAxisStart],p=Qe(f)[i.crossAxisStart];return e?h-p:p-h}).filter((d,f,h)=>Qe(d)[i.crossAxisStart]===Qe(h[0])[i.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const u=l.filter(d=>Rt(Qe(d)[i.start],Qe(d)[i.end])(t[i.line]));return u.length===1?u[0]:u.length>1?u.sort((d,f)=>Qe(d)[i.start]-Qe(f)[i.start])[0]:l.sort((d,f)=>{const h=Lm(t,Am(Qe(d))),p=Lm(t,Am(Qe(f)));return h!==p?h-p:Qe(d)[i.start]-Qe(f)[i.start]})[0]};const Wm=(e,t)=>{const r=e.page.borderBox.center;return un(e.descriptor.id,t)?pt(r,t.displacedBy.point):r},pE=(e,t)=>{const r=e.page.borderBox;return un(e.descriptor.id,t)?Ri(r,ro(t.displacedBy.point)):r};var mE=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(i=>gx({target:pE(i,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const l=hi(e,Bd(r,Wm(i,s))),u=hi(e,Bd(r,Wm(a,s)));return l<u?-1:u<l?1:i.descriptor.index-a.descriptor.index})[0]||null,Oi=Le(function(t,r){const n=r[t.line];return{value:n,point:Hn(t.line,n)}});const gE=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Hn(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],l=no(e.descriptor.id,r).reduce((u,d)=>u+d.client.marginBox[n.size],0)+t[n.line]-s;return l<=0?null:Hn(n.line,l)},bx=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),wx=(e,t,r)=>{const n=e.frame;so(t,e)&&F(),e.subject.withPlaceholder&&F();const s=Oi(e.axis,t.displaceBy).point,o=gE(e,s,r),i={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const d=As({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:d}}const a=o?Be(n.scroll.max,o):n.scroll.max,l=bx(n,a),u=As({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:u,frame:l}},vE=e=>{const t=e.subject.withPlaceholder;t||F();const r=e.frame;if(!r){const i=As({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||F();const s=bx(r,n),o=As({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var yE=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:i,afterCritical:a})=>{if(!t){if(r.length)return null;const f={displaced:pi,displacedBy:hx,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=dc({impact:f,draggable:n,droppable:o,draggables:s,afterCritical:a}),p=so(n,o)?o:wx(o,n,s);return xx({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const l=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],u=(()=>{const f=t.descriptor.index;return t.descriptor.id===n.descriptor.id||l?f:f+1})(),d=Oi(o.axis,n.displaceBy);return bl({draggable:n,insideDestination:r,destination:o,viewport:i,displacedBy:d,last:pi,index:u})},xE=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:i,afterCritical:a})=>{const l=hE({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:i});if(!l)return null;const u=no(l.descriptor.id,s),d=mE({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:u,afterCritical:a}),f=yE({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:i,afterCritical:a});if(!f)return null;const h=dc({impact:f,draggable:r,droppable:l,draggables:s,afterCritical:a});return{clientSelection:vh({pageBorderBoxCenter:h,draggable:r,viewport:i}),impact:f,scrollJumpRequest:null}},gt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const bE=(e,t)=>{const r=gt(e);return r?t[r]:null};var wE=({state:e,type:t})=>{const r=bE(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,i=o.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!n)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:f,droppables:h}=e.dimensions;return a?fE({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):xE({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:f,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function Dn(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function _x(e){const t=Rt(e.top,e.bottom),r=Rt(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function _E(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function kE({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const i=o.axis,a=Hn(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:hi(n,a)}}).sort((o,i)=>i.distance-o.distance);return s[0]?s[0].id:null}function SE({pageBorderBox:e,draggable:t,droppables:r}){const n=lc(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!_E(e,o))return!1;if(_x(o)(e.center))return!0;const i=s.axis,a=o.center[i.crossAxisLine],l=e[i.crossAxisStart],u=e[i.crossAxisEnd],d=Rt(o[i.crossAxisStart],o[i.crossAxisEnd]),f=d(l),h=d(u);return!f&&!h?!0:f?l<a:u>a});return n.length?n.length===1?n[0].descriptor.id:kE({pageBorderBox:e,draggable:t,candidates:n}):null}const kx=(e,t)=>Ht(Ri(e,t));var DE=(e,t)=>{const r=e.frame;return r?kx(t,r.scroll.diff.value):t};function Sx({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function CE({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var NE=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:i})=>{const a=r.axis,l=Oi(r.axis,t.displaceBy),u=l.value,d=e[a.start],f=e[a.end],p=uc(t,n).find(b=>{const y=b.descriptor.id,x=b.page.borderBox.center[a.line],m=un(y,i),v=Sx({displaced:s,id:y});return m?v?f<=x:d<x-u:v?f<=x+u:d<x})||null,g=CE({draggable:t,closest:p,inHomeList:so(t,r)});return bl({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:l,index:g})};const EE=4;var jE=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=n.axis,a=Oi(n.axis,e.displaceBy),l=a.value,u=t[i.start],d=t[i.end],h=uc(e,s).find(g=>{const b=g.descriptor.id,y=g.page.borderBox,m=y[i.size]/EE,v=un(b,o),_=Sx({displaced:r.displaced,id:b});return v?_?d>y[i.start]+m&&d<y[i.end]-m:u>y[i.start]-l+m&&u<y[i.end]-l-m:_?d>y[i.start]+l+m&&d<y[i.end]+l-m:u>y[i.start]+m&&u<y[i.end]-m});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Dx=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:i})=>{const a=kx(t.page.borderBox,e),l=SE({pageBorderBox:a,draggable:t,droppables:n});if(!l)return HN;const u=n[l],d=no(u.descriptor.id,r),f=DE(u,a);return jE({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:i})||NE({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:o,afterCritical:i})},yh=(e,t)=>({...e,[t.descriptor.id]:t});const PE=({previousImpact:e,impact:t,droppables:r})=>{const n=gt(e),s=gt(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const i=vE(o);return yh(r,i)};var TE=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=PE({previousImpact:n,impact:s,droppables:r}),i=gt(s);if(!i)return o;const a=r[i];if(so(e,a)||a.subject.withPlaceholder)return o;const l=wx(a,e,t);return yh(o,l)},Yo=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const i=n||e.viewport,a=r||e.dimensions,l=t||e.current.client.selection,u=pt(l,e.initial.client.selection),d={offset:u,selection:l,borderBoxCenter:Be(e.initial.client.borderBoxCenter,u)},f={selection:Be(d.selection,i.scroll.current),borderBoxCenter:Be(d.borderBoxCenter,i.scroll.current),offset:Be(d.offset,i.scroll.diff.value)},h={client:d,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:h};const p=a.draggables[e.critical.draggable.id],g=s||Dx({pageOffset:f.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),b=TE({draggable:p,impact:g,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:h,dimensions:{draggables:a.draggables,droppables:b},impact:g,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function RE(e,t){return e.map(r=>t[r])}var Cx=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,i=RE(o.all,r),a=mi({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:a}},Nx=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const i=dc({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return vh({pageBorderBoxCenter:i,draggable:t,viewport:s})},Ex=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&F();const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:a}=o,l=i[e.critical.draggable.id],u=gt(n);u||F();const d=a[u],f=Cx({impact:n,viewport:s,destination:d,draggables:i}),h=Nx({impact:f,draggable:l,droppable:d,draggables:i,viewport:s,afterCritical:e.afterCritical});return Yo({impact:f,clientSelection:h,state:e,dimensions:o,viewport:s})},OE=e=>({index:e.index,droppableId:e.droppableId}),jx=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=Oi(t.axis,e.displaceBy),o=no(t.descriptor.id,r),i=o.indexOf(e);i===-1&&F();const a=o.slice(i+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:mi({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:OE(e.descriptor)}},afterCritical:u}},IE=(e,t)=>({draggables:e.draggables,droppables:yh(e.droppables,t)}),ME=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=ml(e.client,t),s=gl(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},LE=e=>{const t=e.frame;return t||F(),t},AE=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,i=t[o],l=LE(i).scroll.diff.value,u=Be(n,l);return ME({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},FE=({state:e,published:t})=>{const r=t.modified.map(x=>{const m=e.dimensions.droppables[x.droppableId];return fh(m,x.scroll)}),n={...e.dimensions.droppables,...dx(r)},s=fx(AE({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(x=>{delete o[x]});const i={droppables:n,draggables:o},a=gt(e.impact),l=a?i.droppables[a]:null,u=i.draggables[e.critical.draggable.id],d=i.droppables[e.critical.droppable.id],{impact:f,afterCritical:h}=jx({draggable:u,home:d,draggables:o,viewport:e.viewport}),p=l&&l.isCombineEnabled?e.impact:f,g=Dx({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:h}),b={...e,phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:i,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?b:{...b,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Ud=e=>e.movementMode==="SNAP",fu=(e,t,r)=>{const n=IE(e.dimensions,t);return!Ud(e)||r?Yo({state:e,dimensions:n}):Ex({state:e,dimensions:n})};function hu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Hm={phase:"IDLE",completed:null,shouldFlush:!1};var $E=(e=Hm,t)=>{if(t.type==="FLUSH")return{...Hm,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&F();const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:i}=t.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],u={selection:n,borderBoxCenter:a.client.borderBox.center,offset:Ae},d={client:u,page:{selection:Be(u.selection,s.scroll.initial),borderBoxCenter:Be(u.selection,s.scroll.initial),offset:Be(u.selection,s.scroll.diff.value)}},f=lc(o.droppables).every(b=>!b.isFixedOnPage),{impact:h,afterCritical:p}=jx({draggable:a,home:l,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:d,current:d,isWindowScrollAllowed:f,impact:h,afterCritical:p,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&F(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||F(),FE({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Dn(e)||F();const{client:r}=t.payload;return sn(r,e.current.client.selection)?e:Yo({state:e,clientSelection:r,impact:Ud(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return hu(e);Dn(e)||F();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=fh(s,n);return fu(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Dn(e)||F();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||F(),s.isEnabled===n&&F();const o={...s,isEnabled:n};return fu(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Dn(e)||F();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||F(),s.isCombineEnabled===n&&F();const o={...s,isCombineEnabled:n};return fu(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Dn(e)||F(),e.isWindowScrollAllowed||F();const r=t.payload.newScroll;if(sn(e.viewport.scroll.current,r))return hu(e);const n=yx(e.viewport,r);return Ud(e)?Ex({state:e,viewport:n}):Yo({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Dn(e))return e;const r=t.payload.maxScroll;if(sn(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&F();const r=wE({state:e,type:t.type});return r?Yo({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&F(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||F(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function ie(e,t){return e instanceof Object&&"type"in e&&e.type===t}const BE=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),UE=e=>({type:"LIFT",payload:e}),WE=e=>({type:"INITIAL_PUBLISH",payload:e}),HE=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),YE=()=>({type:"COLLECTION_STARTING",payload:null}),zE=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),VE=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),qE=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Px=e=>({type:"MOVE",payload:e}),GE=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),KE=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),QE=()=>({type:"MOVE_UP",payload:null}),JE=()=>({type:"MOVE_DOWN",payload:null}),XE=()=>({type:"MOVE_RIGHT",payload:null}),ZE=()=>({type:"MOVE_LEFT",payload:null}),xh=()=>({type:"FLUSH",payload:null}),ej=e=>({type:"DROP_ANIMATE",payload:e}),bh=e=>({type:"DROP_COMPLETE",payload:e}),Tx=e=>({type:"DROP",payload:e}),tj=e=>({type:"DROP_PENDING",payload:e}),Rx=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var rj=e=>({getState:t,dispatch:r})=>n=>s=>{if(!ie(s,"LIFT")){n(s);return}const{id:o,clientSelection:i,movementMode:a}=s.payload,l=t();l.phase==="DROP_ANIMATING"&&r(bh({completed:l.completed})),t().phase!=="IDLE"&&F(),r(xh()),r(BE({draggableId:o,movementMode:a}));const d={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:h,viewport:p}=e.startPublishing(d);r(WE({critical:f,dimensions:h,clientSelection:i,movementMode:a,viewport:p}))},nj=e=>()=>t=>r=>{ie(r,"INITIAL_PUBLISH")&&e.dragging(),ie(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(ie(r,"FLUSH")||ie(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const wh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},gi={opacity:{drop:0,combining:.7},scale:{drop:.75}},Ox={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},bn=`${Ox.outOfTheWay}s ${wh.outOfTheWay}`,zo={fluid:`opacity ${bn}`,snap:`transform ${bn}, opacity ${bn}`,drop:e=>{const t=`${e}s ${wh.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${bn}`,placeholder:`height ${bn}, width ${bn}, margin ${bn}`},Ym=e=>sn(e,Ae)?void 0:`translate(${e.x}px, ${e.y}px)`,Wd={moveTo:Ym,drop:(e,t)=>{const r=Ym(e);if(r)return t?`${r} scale(${gi.scale.drop})`:r}},{minDropTime:Hd,maxDropTime:Ix}=Ox,sj=Ix-Hd,zm=1500,oj=.6;var ij=({current:e,destination:t,reason:r})=>{const n=hi(e,t);if(n<=0)return Hd;if(n>=zm)return Ix;const s=n/zm,o=Hd+sj*s,i=r==="CANCEL"?o*oj:o;return Number(i.toFixed(2))},aj=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:i}=r,a=gt(e),l=a?i[a]:null,u=i[t.descriptor.droppableId],d=Nx({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:l||u,viewport:n});return pt(d,t.client.borderBox.center)},lj=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:Cx({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:pi},didDropInsideDroppable:!0};const cj=({getState:e,dispatch:t})=>r=>n=>{if(!ie(n,"DROP")){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t(tj({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&F(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||F();const a=s.critical,l=s.dimensions,u=l.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=lj({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f?hh(d):null,p=f?cc(d):null,g={index:a.draggable.index,droppableId:a.droppable.id},b={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:s.movementMode,destination:h,combine:p},y=aj({impact:d,draggable:u,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),x={critical:s.critical,afterCritical:s.afterCritical,result:b,impact:d};if(!(!sn(s.current.client.offset,y)||!!b.combine)){t(bh({completed:x}));return}const v=ij({current:s.current.client.offset,destination:y,reason:o});t(ej({newHomeClientOffset:y,dropDuration:v,completed:x}))};var Mx=()=>({x:window.pageXOffset,y:window.pageYOffset});function uj(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function dj({onWindowScroll:e}){function t(){e(Mx())}const r=fi(t),n=uj(r);let s=nn;function o(){return s!==nn}function i(){o()&&F(),s=Pt(window,[n])}function a(){o()||F(),r.cancel(),s(),s=nn}return{start:i,stop:a,isActive:o}}const fj=e=>ie(e,"DROP_COMPLETE")||ie(e,"DROP_ANIMATE")||ie(e,"FLUSH"),hj=e=>{const t=dj({onWindowScroll:r=>{e.dispatch(GE({newScroll:r}))}});return r=>n=>{!t.isActive()&&ie(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&fj(n)&&t.stop(),r(n)}};var pj=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},mj=()=>{const e=[],t=s=>{const o=e.findIndex(a=>a.timerId===s);o===-1&&F();const[i]=e.splice(o,1);i.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const gj=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,vj=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,yj=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},yo=(e,t)=>{t()},ia=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function pu(e,t,r,n){if(!e){r(n(t));return}const s=pj(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var xj=(e,t)=>{const r=mj();let n=null;const s=(f,h)=>{n&&F(),yo("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:h})})},o=(f,h)=>{n&&F(),yo("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(ia(f,h))})},i=(f,h)=>{n&&F();const p=ia(f,h);n={mode:h,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{yo("onDragStart",()=>pu(e().onDragStart,p,t,Oa.onDragStart))})},a=(f,h)=>{const p=hh(h),g=cc(h);n||F();const b=!yj(f,n.lastCritical);b&&(n.lastCritical=f);const y=!gj(n.lastLocation,p);y&&(n.lastLocation=p);const x=!vj(n.lastCombine,g);if(x&&(n.lastCombine=g),!b&&!y&&!x)return;const m={...ia(f,n.mode),combine:g,destination:p};r.add(()=>{yo("onDragUpdate",()=>pu(e().onDragUpdate,m,t,Oa.onDragUpdate))})},l=()=>{n||F(),r.flush()},u=f=>{n||F(),n=null,yo("onDragEnd",()=>pu(e().onDragEnd,f,t,Oa.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:i,update:a,flush:l,drop:u,abort:()=>{if(!n)return;const f={...ia(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(f)}}},bj=(e,t)=>{const r=xj(e,t);return n=>s=>o=>{if(ie(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(ie(o,"INITIAL_PUBLISH")){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),s(o),r.start(a,o.payload.movementMode);return}if(ie(o,"DROP_COMPLETE")){const a=o.payload.completed.result;r.flush(),s(o),r.drop(a);return}if(s(o),ie(o,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const wj=e=>t=>r=>{if(!ie(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&F(),e.dispatch(bh({completed:n.completed}))},_j=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((ie(o,"FLUSH")||ie(o,"DROP_COMPLETE")||ie(o,"DROP_ANIMATION_FINISHED"))&&n(),s(o),!ie(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Rx())}};r=requestAnimationFrame(()=>{r=null,t=Pt(window,[i])})}};var kj=e=>()=>t=>r=>{(ie(r,"DROP_COMPLETE")||ie(r,"FLUSH")||ie(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},Sj=e=>{let t=!1;return()=>r=>n=>{if(ie(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(ie(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(ie(n,"DROP_COMPLETE")){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Dj=e=>ie(e,"DROP_COMPLETE")||ie(e,"DROP_ANIMATE")||ie(e,"FLUSH");var Cj=e=>t=>r=>n=>{if(Dj(n)){e.stop(),r(n);return}if(ie(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();s.phase!=="DRAGGING"&&F(),e.start(s);return}r(n),e.scroll(t.getState())};const Nj=e=>t=>r=>{if(t(r),!ie(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Tx({reason:n.reason})))},Ej=Jy;var jj=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>Qy($E,Ej(wC(nj(r),kj(e),rj(e),cj,wj,_j,Nj,Cj(o),hj,Sj(t),bj(n,s))));const mu=()=>({additions:{},removals:{},modified:{}});function Pj({registry:e,callbacks:t}){let r=mu(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:u,modified:d}=r,f=Object.keys(l).map(g=>e.draggable.getById(g).getDimension(Ae)).sort((g,b)=>g.descriptor.index-b.descriptor.index),h=Object.keys(d).map(g=>{const y=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),p={additions:f,removals:Object.keys(u),modified:h};r=mu(),t.publish(p)}))};return{add:l=>{const u=l.descriptor.id;r.additions[u]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:l=>{const u=l.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=mu())}}}var Lx=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=pt({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Ax=()=>{const e=document.documentElement;return e||F(),e},Fx=()=>{const e=Ax();return Lx({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Tj=()=>{const e=Mx(),t=Fx(),r=e.y,n=e.x,s=Ax(),o=s.clientWidth,i=s.clientHeight,a=n+o,l=r+i;return{frame:Ht({top:r,left:n,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:Ae,displacement:Ae}}}},Rj=({critical:e,scrollOptions:t,registry:r})=>{const n=Tj(),s=n.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),a=r.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:fx(a),droppables:dx(i)},critical:e,viewport:n}};function Vm(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var Oj=(e,t)=>{let r=null;const n=Pj({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,p)=>{e.droppable.exists(h)||F(),r&&t.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(e.droppable.exists(h)||F(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},i=(h,p)=>{r&&(e.droppable.exists(h)||F(),t.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&e.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||F();const p=r.critical.draggable;h.type==="ADDITION"&&Vm(e,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Vm(e,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:i,startPublishing:h=>{r&&F();const p=e.draggable.getById(h.draggableId),g=e.droppable.getById(p.descriptor.droppableId),b={draggable:p.descriptor,droppable:g.descriptor},y=e.subscribe(u);return r={critical:b,unsubscribe:y},Rj({critical:b,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:l}},$x=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Ij=e=>{window.scrollBy(e.x,e.y)};const Mj=Le(e=>lc(e).filter(t=>!(!t.isEnabled||!t.frame))),Lj=(e,t)=>Mj(t).find(n=>(n.frame||F(),_x(n.frame.pageMarginBox)(e)))||null;var Aj=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return Lj(e,r)};const vi={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Fj=(e,t,r=()=>vi)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},Bx=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},_h=1,$j=(e,t,r=()=>vi)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return _h;const o=1-Bx({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)},Bj=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,i=t,a=o,u=Date.now()-i;if(u>=o)return e;if(u<s)return _h;const d=Bx({startOfRange:s,endOfRange:a,current:u}),f=e*n.ease(d);return Math.ceil(f)},qm=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=$j(e,t,s);return o===0?0:n?Math.max(Bj(o,r,s),_h):o},Gm=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Fj(e,n,o);return t[n.end]<t[n.start]?qm({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*qm({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},Uj=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const Wj=ux(e=>e===0?0:e);var Ux=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},a=Gm({container:t,distanceToEdges:i,dragStartTime:e,axis:ph,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),l=Gm({container:t,distanceToEdges:i,dragStartTime:e,axis:mx,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),u=Wj({x:l,y:a});if(sn(u,Ae))return null;const d=Uj({container:t,subject:r,proposedScroll:u});return d?sn(d,Ae)?null:d:null};const Hj=ux(e=>e===0?0:e>0?1:-1),kh=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=Be(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return sn(o,Ae)?null:o}})(),Wx=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=Hj(r),o=kh({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Sh=(e,t)=>Wx({current:e.scroll.current,max:e.scroll.max,change:t}),Yj=(e,t)=>{if(!Sh(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return kh({current:n,max:r,change:t})},Dh=(e,t)=>{const r=e.frame;return r?Wx({current:r.scroll.current,max:r.scroll.max,change:t}):!1},zj=(e,t)=>{const r=e.frame;return!r||!Dh(e,t)?null:kh({current:r.scroll.current,max:r.scroll.max,change:t})};var Vj=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Ux({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return i&&Sh(e,i)?i:null},qj=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const a=Ux({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return a&&Dh(e,a)?a:null},Km=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,h=Vj({dragStartTime:t,viewport:f,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const u=Aj({center:i,destination:gt(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=qj({dragStartTime:t,droppable:u,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});d&&s(u.descriptor.id,d)},Gj=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>vi})=>{const n=fi(e),s=fi(t);let o=null;const i=u=>{o||F();const{shouldUseTimeDampening:d,dragStartTime:f}=o;Km({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:r})};return{start:u=>{o&&F();const d=Date.now();let f=!1;const h=()=>{f=!0};Km({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:d,shouldUseTimeDampening:f},f&&i(u)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:i}},Kj=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(a,l)=>{const u=Be(a.current.client.selection,l);e({client:u})},s=(a,l)=>{if(!Dh(a,l))return l;const u=zj(a,l);if(!u)return t(a.descriptor.id,l),null;const d=pt(l,u);return t(a.descriptor.id,d),pt(l,d)},o=(a,l,u)=>{if(!a||!Sh(l,u))return u;const d=Yj(l,u);if(!d)return r(u),null;const f=pt(u,d);return r(f),pt(u,f)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const u=gt(a.impact);u||F();const d=s(a.dimensions.droppables[u],l);if(!d)return;const f=a.viewport,h=o(a.isWindowScrollAllowed,f,d);h&&n(a,h)}},Qj=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=Gj({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=Kj({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:s.start,stop:s.stop}};const Fs="data-rfd",$s=(()=>{const e=`${Fs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Yd=(()=>{const e=`${Fs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Jj=(()=>{const e=`${Fs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Qm={contextId:`${Fs}-scroll-container-context-id`},Xj=e=>t=>`[${t}="${e}"]`,xo=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),Zj="pointer-events: none;";var eP=e=>{const t=Xj(e),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t($s.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Zj,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${zo.outOfTheWay};
    `;return{selector:t(Yd.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(Jj.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:xo(i,"always"),resting:xo(i,"resting"),dragging:xo(i,"dragging"),dropAnimating:xo(i,"dropAnimating"),userCancel:xo(i,"userCancel")}};const vt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,gu=()=>{const e=document.querySelector("head");return e||F(),e},Jm=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function tP(e,t){const r=ee(()=>eP(e),[e]),n=w.useRef(null),s=w.useRef(null),o=G(Le(f=>{const h=s.current;h||F(),h.textContent=f}),[]),i=G(f=>{const h=n.current;h||F(),h.textContent=f},[]);vt(()=>{!n.current&&!s.current||F();const f=Jm(t),h=Jm(t);return n.current=f,s.current=h,f.setAttribute(`${Fs}-always`,e),h.setAttribute(`${Fs}-dynamic`,e),gu().appendChild(f),gu().appendChild(h),i(r.always),o(r.resting),()=>{const p=g=>{const b=g.current;b||F(),gu().removeChild(b),g.current=null};p(n),p(s)}},[t,i,o,r.always,r.resting,e]);const a=G(()=>o(r.dragging),[o,r.dragging]),l=G(f=>{if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),u=G(()=>{s.current&&o(r.resting)},[o,r.resting]);return ee(()=>({dragging:a,dropping:l,resting:u}),[a,l,u])}function Hx(e,t){return Array.from(e.querySelectorAll(t))}var Yx=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function fc(e){return e instanceof Yx(e).HTMLElement}function rP(e,t){const r=`[${$s.contextId}="${e}"]`,n=Hx(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute($s.draggableId)===t);return!s||!fc(s)?null:s}function nP(e){const t=w.useRef({}),r=w.useRef(null),n=w.useRef(null),s=w.useRef(!1),o=G(function(h,p){const g={id:h,focus:p};return t.current[h]=g,function(){const y=t.current;y[h]!==g&&delete y[h]}},[]),i=G(function(h){const p=rP(e,h);p&&p!==document.activeElement&&p.focus()},[e]),a=G(function(h,p){r.current===h&&(r.current=p)},[]),l=G(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&i(h)}))},[i]),u=G(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute($s.draggableId)===h&&(r.current=h)},[]);return vt(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),ee(()=>({register:o,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,u,l,a])}function sP(){const e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function n(f){t.length&&t.forEach(h=>h(f))}function s(f){return e.draggables[f]||null}function o(f){const h=s(f);return h||F(),h}const i={register:f=>{e.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:(f,h)=>{const p=e.draggables[h.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const h=f.descriptor.id,p=s(h);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[h],e.droppables[f.descriptor.droppableId]&&n({type:"REMOVAL",value:f}))},getById:o,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(e.draggables).filter(h=>h.descriptor.type===f)};function a(f){return e.droppables[f]||null}function l(f){const h=a(f);return h||F(),h}const u={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const h=a(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete e.droppables[f.descriptor.id]},getById:l,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.droppables).filter(h=>h.descriptor.type===f)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:d}}function oP(){const e=ee(sP,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var Ch=P.createContext(null),wl=()=>{const e=document.body;return e||F(),e};const iP={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},aP=e=>`rfd-announcement-${e}`;function lP(e){const t=ee(()=>aP(e),[e]),r=w.useRef(null);return w.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),vl(o.style,iP),wl().appendChild(o),function(){setTimeout(function(){const l=wl();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[t]),G(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}const cP={separator:"::"};function Nh(e,t=cP){const r=P.useId();return ee(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function uP({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function dP({contextId:e,text:t}){const r=Nh("hidden-text",{separator:"-"}),n=ee(()=>uP({contextId:e,uniqueId:r}),[r,e]);return w.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",wl().appendChild(o),function(){const a=wl();a.contains(o)&&a.removeChild(o)}},[n,t]),n}var hc=P.createContext(null);function zx(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function fP(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&F();const a={abandon:i};return e=a,a}function s(){e||F(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function yi(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const hP=9,pP=13,Eh=27,Vx=32,mP=33,gP=34,vP=35,yP=36,xP=37,bP=38,wP=39,_P=40,kP={[pP]:!0,[hP]:!0};var qx=e=>{kP[e.keyCode]&&e.preventDefault()};const pc=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),Gx=0,Xm=5;function SP(e,t){return Math.abs(t.x-e.x)>=Xm||Math.abs(t.y-e.y)>=Xm}const Zm={type:"IDLE"};function DP({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:i,clientY:a}=s;if(o!==Gx)return;const l={x:i,y:a},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(l);return}u.type!=="PENDING"&&F();const d=u.point;if(!SP(d,l))return;s.preventDefault();const f=u.actions.fluidLift(l);n({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===Eh){s.preventDefault(),e();return}qx(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&F(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:pc,fn:e}]}function CP(e){const t=w.useRef(Zm),r=w.useRef(nn),n=ee(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==Gx||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.tryGetLock(h,i,{sourceEvent:f});if(!p)return;f.preventDefault();const g={x:f.clientX,y:f.clientY};r.current(),u(p,g)}}),[e]),s=ee(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=e.findClosestDraggableId(d);if(!f)return;const h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&d.preventDefault())}}),[e]),o=G(function(){const f={passive:!1,capture:!0};r.current=Pt(window,[s,n],f)},[s,n]),i=G(()=>{t.current.type!=="IDLE"&&(t.current=Zm,r.current(),o())},[o]),a=G(()=>{const d=t.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),l=G(function(){const f={capture:!0,passive:!1},h=DP({cancel:a,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=Pt(window,h,f)},[a,i]),u=G(function(f,h){t.current.type!=="IDLE"&&F(),t.current={type:"PENDING",point:h,actions:f},l()},[l]);vt(function(){return o(),function(){r.current()}},[o])}function NP(){}const EP={[gP]:!0,[mP]:!0,[yP]:!0,[vP]:!0};function jP(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Eh){s.preventDefault(),r();return}if(s.keyCode===Vx){s.preventDefault(),n();return}if(s.keyCode===_P){s.preventDefault(),e.moveDown();return}if(s.keyCode===bP){s.preventDefault(),e.moveUp();return}if(s.keyCode===wP){s.preventDefault(),e.moveRight();return}if(s.keyCode===xP){s.preventDefault(),e.moveLeft();return}if(EP[s.keyCode]){s.preventDefault();return}qx(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:pc,fn:r}]}function PP(e){const t=w.useRef(NP),r=ee(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Vx)return;const i=e.findClosestDraggableId(o);if(!i)return;const a=e.tryGetLock(i,d,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const u=a.snapLift();t.current();function d(){l||F(),l=!1,t.current(),n()}t.current=Pt(window,jP(u,d),{capture:!0,passive:!1})}}),[e]),n=G(function(){const o={passive:!1,capture:!0};t.current=Pt(window,[r],o)},[r]);vt(function(){return n(),function(){t.current()}},[n])}const vu={type:"IDLE"},TP=120,RP=.15;function OP({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Eh&&r.preventDefault(),e()}},{eventName:pc,fn:e}]}function IP({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:i}=n.touches[0],a={x:o,y:i};n.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&F();const o=n.touches[0];if(!o||!(o.force>=RP))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:pc,fn:e}]}function MP(e){const t=w.useRef(vu),r=w.useRef(nn),n=G(function(){return t.current},[]),s=G(function(p){t.current=p},[]),o=ee(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const b=e.tryGetLock(g,a,{sourceEvent:p});if(!b)return;const y=p.touches[0],{clientX:x,clientY:m}=y,v={x,y:m};r.current(),f(b,v)}}),[e]),i=G(function(){const p={capture:!0,passive:!1};r.current=Pt(window,[o],p)},[o]),a=G(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(vu),r.current(),i())},[i,s]),l=G(()=>{const h=t.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),u=G(function(){const p={capture:!0,passive:!1},g={cancel:l,completed:a,getPhase:n},b=Pt(window,IP(g),p),y=Pt(window,OP(g),p);r.current=function(){b(),y()}},[l,n,a]),d=G(function(){const p=n();p.type!=="PENDING"&&F();const g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),f=G(function(p,g){n().type!=="IDLE"&&F();const b=setTimeout(d,TP);s({type:"PENDING",point:g,actions:p,longPressTimerId:b}),u()},[u,n,s,d]);vt(function(){return i(),function(){r.current();const g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(vu))}},[n,i,s]),vt(function(){return Pt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const LP=["input","button","textarea","select","option","optgroup","video","audio"];function Kx(e,t){if(t==null)return!1;if(LP.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Kx(e,t.parentElement)}function AP(e,t){const r=t.target;return fc(r)?Kx(e,r):!1}var FP=e=>Ht(e.getBoundingClientRect()).center;function $P(e){return e instanceof Yx(e).Element}const BP=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function Qx(e,t){return e==null?null:e[BP](t)?e:Qx(e.parentElement,t)}function UP(e,t){return e.closest?e.closest(t):Qx(e,t)}function WP(e){return`[${$s.contextId}="${e}"]`}function HP(e,t){const r=t.target;if(!$P(r))return null;const n=WP(e),s=UP(r,n);return!s||!fc(s)?null:s}function YP(e,t){const r=HP(e,t);return r?r.getAttribute($s.draggableId):null}function zP(e,t){const r=`[${Yd.contextId}="${e}"]`,s=Hx(document,r).find(o=>o.getAttribute(Yd.id)===t);return!s||!fc(s)?null:s}function VP(e){e.preventDefault()}function aa({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function Jx({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!$x(t.getState(),n))}function qP({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:i}){if(!Jx({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const l=n.draggable.getById(s),u=zP(t,l.descriptor.id);if(!u||i&&!l.options.canDragInteractiveElements&&AP(u,i))return null;const d=e.claim(o||nn);let f="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return e.isActive(d)}function g(k,S){aa({expected:k,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(S())}const b=g.bind(null,"DRAGGING");function y(k){function S(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(S(),F()),r.dispatch(UE(k.liftActionArgs)),f="DRAGGING";function D(N,E={shouldBlockNextClick:!1}){if(k.cleanup(),E.shouldBlockNextClick){const j=Pt(window,[{eventName:"click",fn:VP,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(j)}S(),r.dispatch(Tx({reason:N}))}return{isActive:()=>aa({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:N=>D("DROP",N),cancel:N=>D("CANCEL",N),...k.actions}}function x(k){const S=fi(N=>{b(()=>Px({client:N}))});return{...y({liftActionArgs:{id:s,clientSelection:k,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function m(){const k={moveUp:()=>b(QE),moveRight:()=>b(XE),moveDown:()=>b(JE),moveLeft:()=>b(ZE)};return y({liftActionArgs:{id:s,clientSelection:FP(u),movementMode:"SNAP"},cleanup:nn,actions:k})}function v(){aa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>aa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:x,snapLift:m,abort:v}}const GP=[CP,PP,MP];function KP({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?GP:[],...n||[]],i=w.useState(()=>fP())[0],a=G(function(y,x){yi(y)&&!yi(x)&&i.tryAbandon()},[i]);vt(function(){let y=t.getState();return t.subscribe(()=>{const m=t.getState();a(y,m),y=m})},[i,t,a]),vt(()=>i.tryAbandon,[i.tryAbandon]);const l=G(b=>Jx({lockAPI:i,registry:r,store:t,draggableId:b}),[i,r,t]),u=G((b,y,x)=>qP({lockAPI:i,registry:r,contextId:e,store:t,draggableId:b,forceSensorStop:y||null,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null}),[e,i,r,t]),d=G(b=>YP(e,b),[e]),f=G(b=>{const y=r.draggable.findById(b);return y?y.options:null},[r.draggable]),h=G(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(xh()))},[i,t]),p=G(()=>i.isClaimed(),[i]),g=ee(()=>({canGetLock:l,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:p}),[l,u,d,f,h,p]);for(let b=0;b<o.length;b++)o[b](g)}const QP=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ci.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),JP=e=>({...vi,...e.autoScrollerOptions,durationDampening:{...vi.durationDampening,...e.autoScrollerOptions}});function bo(e){return e.current||F(),e.current}function XP(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,i=w.useRef(null),a=zx(e),l=G(()=>QP(a.current),[a]),u=G(()=>JP(a.current),[a]),d=lP(t),f=dP({contextId:t,text:o}),h=tP(t,s),p=G(j=>{bo(i).dispatch(j)},[]),g=ee(()=>Nm({publishWhileDragging:HE,updateDroppableScroll:zE,updateDroppableIsEnabled:VE,updateDroppableIsCombineEnabled:qE,collectionStarting:YE},p),[p]),b=oP(),y=ee(()=>Oj(b,g),[b,g]),x=ee(()=>Qj({scrollWindow:Ij,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...Nm({move:Px},p)}),[y.scrollDroppable,p,u]),m=nP(t),v=ee(()=>jj({announce:d,autoScroller:x,dimensionMarshal:y,focusMarshal:m,getResponders:l,styleMarshal:h}),[d,x,y,m,l,h]);i.current=v;const _=G(()=>{const j=bo(i);j.getState().phase!=="IDLE"&&j.dispatch(xh())},[]),k=G(()=>{const j=bo(i).getState();return j.phase==="DROP_ANIMATING"?!0:j.phase==="IDLE"?!1:j.isDragging},[]),S=ee(()=>({isDragging:k,tryAbort:_}),[k,_]);r(S);const D=G(j=>$x(bo(i).getState(),j),[]),N=G(()=>Dn(bo(i).getState()),[]),E=ee(()=>({marshal:y,focus:m,contextId:t,canLift:D,isMovementAllowed:N,dragHandleUsageInstructionsId:f,registry:b}),[t,y,f,m,D,N,b]);return KP({contextId:t,store:v,registry:b,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>_,[_]),P.createElement(hc.Provider,{value:E},P.createElement(_N,{context:Ch,store:v},e.children))}function ZP(){return P.useId()}function e2(e){const t=ZP(),r=e.dragHandleUsageInstructions||Oa.dragHandleUsageInstructions;return P.createElement(PN,null,n=>P.createElement(XP,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const eg={dragging:5e3,dropAnimating:4500},t2=(e,t)=>t?zo.drop(t.duration):e?zo.snap:zo.fluid,r2=(e,t)=>{if(e)return t?gi.opacity.drop:gi.opacity.combining},n2=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function s2(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,i=!!s,a=n2(e),l=!!o,u=l?Wd.drop(n,i):Wd.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:t2(a,o),transform:u,opacity:r2(i,l),zIndex:l?eg.dropAnimating:eg.dragging,pointerEvents:"none"}}function o2(e){return{transform:Wd.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function i2(e){return e.type==="DRAGGING"?s2(e):o2(e)}function a2(e,t,r=Ae){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=sx(s,n),i=gl(o,r),a={client:o,tagName:t.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:o,page:i}}function l2(e){const t=Nh("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}=e,l=ee(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}),[o,a,i]),u=G(p=>{const g=s();return g||F(),a2(r,g,p)},[r,s]),d=ee(()=>({uniqueId:t,descriptor:r,options:l,getDimension:u}),[r,u,l,t]),f=w.useRef(d),h=w.useRef(!0);vt(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),vt(()=>{if(h.current){h.current=!1;return}const p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}var jh=P.createContext(null);function _l(e){const t=w.useContext(e);return t||F(),t}function c2(e){e.preventDefault()}const u2=e=>{const t=w.useRef(null),r=G((S=null)=>{t.current=S},[]),n=G(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:i}=_l(hc),{type:a,droppableId:l}=_l(jh),u=ee(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:d,draggableId:f,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:b,mapped:y,dropAnimationFinished:x}=e;if(!b){const S=ee(()=>({descriptor:u,registry:i,getDraggableRef:n,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:h}),[u,i,n,g,p,h]);l2(S)}const m=ee(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:c2}:null,[s,o,f,h]),v=G(S=>{y.type==="DRAGGING"&&y.dropping&&S.propertyName==="transform"&&Ci.flushSync(x)},[x,y]),_=ee(()=>{const S=i2(y),D=y.type==="DRAGGING"&&y.dropping?v:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:S,onTransitionEnd:D},dragHandleProps:m}},[s,m,f,y,v,r]),k=ee(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return P.createElement(P.Fragment,null,d(_,y.snapshot,k))};var Xx=(e,t)=>e===t,Zx=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const d2=e=>e.combine?e.combine.draggableId:null,f2=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function h2(){const e=Le((s,o)=>({x:s,y:o})),t=Le((s,o,i=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:i,combineWith:a,combineTargetFor:null})),r=Le((s,o,i,a,l=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:o,offset:s,dimension:i,forceShouldAnimate:d,snapshot:t(o,a,l,u,null)}}));return(s,o)=>{if(yi(s)){if(s.critical.draggable.id!==o.draggableId)return null;const i=s.current.client.offset,a=s.dimensions.draggables[o.draggableId],l=gt(s.impact),u=f2(s.impact),d=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,a,o.isClone,l,u,d)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=s.dimensions.draggables[o.draggableId],u=i.result,d=u.mode,f=Zx(u),h=d2(u),g={duration:s.dropDuration,curve:wh.drop,moveTo:s.newHomeClientOffset,opacity:h?gi.opacity.drop:null,scale:h?gi.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:g,draggingOver:f,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:t(d,a,f,h,g)}}}return null}}function eb(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const p2={mapped:{type:"SECONDARY",offset:Ae,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:eb(null)}};function m2(){const e=Le((i,a)=>({x:i,y:a})),t=Le(eb),r=Le((i,a=null,l)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),n=i=>i?r(Ae,i,!0):null,s=(i,a,l,u)=>{const d=l.displaced.visible[i],f=!!(u.inVirtualList&&u.effected[i]),h=cc(l),p=h&&h.draggableId===i?a:null;if(!d){if(!f)return n(p);if(l.displaced.invisible[i])return null;const y=ro(u.displacedBy.point),x=e(y.x,y.y);return r(x,p,!0)}if(f)return n(p);const g=l.displacedBy.point,b=e(g.x,g.y);return r(b,p,d.shouldAnimate)};return(i,a)=>{if(yi(i))return i.critical.draggable.id===a.draggableId?null:s(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const l=i.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const g2=()=>{const e=h2(),t=m2();return(n,s)=>e(n,s)||t(n,s)||p2},v2={dropAnimationFinished:Rx},y2=nx(g2,v2,null,{context:Ch,areStatePropsEqual:Xx})(u2);function tb(e){return _l(jh).isUsingCloneFor===e.draggableId&&!e.isClone?null:P.createElement(y2,e)}function x2(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return P.createElement(tb,vl({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const rb=e=>t=>e===t,b2=rb("scroll"),w2=rb("auto"),tg=(e,t)=>t(e.overflowX)||t(e.overflowY),_2=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return tg(r,b2)||tg(r,w2)},k2=()=>!1,nb=e=>e==null?null:e===document.body?k2()?e:null:e===document.documentElement?null:_2(e)?e:nb(e.parentElement);var zd=e=>({x:e.scrollLeft,y:e.scrollTop});const sb=e=>e?window.getComputedStyle(e).position==="fixed"?!0:sb(e.parentElement):!1;var S2=e=>{const t=nb(e),r=sb(e);return{closestScrollable:t,isFixedOnPage:r}},D2=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:i,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,g=Lx({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:g,diff:{value:Ae,displacement:Ae}}}})(),u=s==="vertical"?ph:mx,d=As({page:i,withPlaceholder:null,axis:u,frame:l});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:o,page:i,frame:l,subject:d}};const C2=(e,t)=>{const r=ox(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,i=s+t.scrollWidth,l=uh({top:n,right:i,bottom:o,left:s},r.border);return dh({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var N2=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:a})=>{const l=r.closestScrollable,u=C2(e,l),d=gl(u,n),f=(()=>{if(!l)return null;const p=ox(l),g={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:gl(p,n),scroll:zd(l),scrollSize:g,shouldClipSubject:a}})();return D2({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:f})};const E2={passive:!1},j2={passive:!0};var rg=e=>e.shouldPublishImmediately?E2:j2;const la=e=>e&&e.env.closestScrollable||null;function P2(e){const t=w.useRef(null),r=_l(hc),n=Nh("droppable"),{registry:s,marshal:o}=r,i=zx(e),a=ee(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=w.useRef(a),u=ee(()=>Le((_,k)=>{t.current||F();const S={x:_,y:k};o.updateDroppableScroll(a.id,S)}),[a.id,o]),d=G(()=>{const _=t.current;return!_||!_.env.closestScrollable?Ae:zd(_.env.closestScrollable)},[]),f=G(()=>{const _=d();u(_.x,_.y)},[d,u]),h=ee(()=>fi(f),[f]),p=G(()=>{const _=t.current,k=la(_);if(_&&k||F(),_.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),g=G((_,k)=>{t.current&&F();const S=i.current,D=S.getDroppableRef();D||F();const N=S2(D),E={ref:D,descriptor:a,env:N,scrollOptions:k};t.current=E;const j=N2({ref:D,descriptor:a,env:N,windowScroll:_,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),I=N.closestScrollable;return I&&(I.setAttribute(Qm.contextId,r.contextId),I.addEventListener("scroll",p,rg(E.scrollOptions))),j},[r.contextId,a,p,i]),b=G(()=>{const _=t.current,k=la(_);return _&&k||F(),zd(k)},[]),y=G(()=>{const _=t.current;_||F();const k=la(_);t.current=null,k&&(h.cancel(),k.removeAttribute(Qm.contextId),k.removeEventListener("scroll",p,rg(_.scrollOptions)))},[p,h]),x=G(_=>{const k=t.current;k||F();const S=la(k);S||F(),S.scrollTop+=_.y,S.scrollLeft+=_.x},[]),m=ee(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:b,dragStopped:y,scroll:x}),[y,g,b,x]),v=ee(()=>({uniqueId:n,descriptor:a,callbacks:m}),[m,a,n]);vt(()=>(l.current=v.descriptor,s.droppable.register(v),()=>{t.current&&y(),s.droppable.unregister(v)}),[m,a,y,v,o,s.droppable]),vt(()=>{t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),vt(()=>{t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function yu(){}const ng={width:0,height:0,margin:AN},T2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?ng:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},R2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=T2({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?zo.placeholder:null}},O2=e=>{const t=w.useRef(null),r=G(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:i}=e,[a,l]=w.useState(e.animate==="open");w.useEffect(()=>a?n!=="open"?(r(),l(!1),yu):t.current?yu:(t.current=setTimeout(()=>{t.current=null,l(!1)}),r):yu,[n,a,r]);const u=G(f=>{f.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),d=R2({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return P.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var I2=P.memo(O2);class M2 extends P.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const L2=e=>{const t=w.useContext(hc);t||F();const{contextId:r,isMovementAllowed:n}=t,s=w.useRef(null),o=w.useRef(null),{children:i,droppableId:a,type:l,mode:u,direction:d,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:p,snapshot:g,useClone:b,updateViewportMaxScroll:y,getContainerForClone:x}=e,m=G(()=>s.current,[]),v=G((I=null)=>{s.current=I},[]);G(()=>o.current,[]);const _=G((I=null)=>{o.current=I},[]),k=G(()=>{n()&&y({maxScroll:Fx()})},[n,y]);P2({droppableId:a,type:l,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:m});const S=ee(()=>P.createElement(M2,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:I,data:U,animate:A})=>P.createElement(I2,{placeholder:U,onClose:I,innerRef:_,animate:A,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,_]),D=ee(()=>({innerRef:v,placeholder:S,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,S,v]),N=b?b.dragging.draggableId:null,E=ee(()=>({droppableId:a,type:l,isUsingCloneFor:N}),[a,N,l]);function j(){if(!b)return null;const{dragging:I,render:U}=b,A=P.createElement(tb,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},($,T)=>U($,T,I));return cy.createPortal(A,x())}return P.createElement(jh.Provider,{value:E},i(D,g),j())};function A2(){return document.body||F(),document.body}const sg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:A2},ob=e=>{let t={...e},r;for(r in sg)e[r]===void 0&&(t={...t,[r]:sg[r]});return t},xu=(e,t)=>e===t.droppable.type,og=(e,t)=>t.draggables[e.draggable.id],F2=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Le(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Le((o,i,a,l,u,d)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===o){const g=d?{render:d,dragging:r(u.descriptor)}:null,b={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:g}}if(!i)return t;if(!l)return e;const p={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const a=ob(i),l=a.droppableId,u=a.type,d=!a.isDropDisabled,f=a.renderClone;if(yi(o)){const h=o.critical;if(!xu(u,h))return t;const p=og(h,o.dimensions),g=gt(o.impact)===l;return n(l,d,g,g,p,f)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!xu(u,h.critical))return t;const p=og(h.critical,o.dimensions);return n(l,d,Zx(h.result)===l,gt(h.impact)===l,p,f)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!xu(u,h.critical))return t;const p=gt(h.impact)===l,g=!!(h.impact.at&&h.impact.at.type==="COMBINE"),b=h.critical.droppable.id===l;return p?g?e:t:b?e:t}return t}},$2={updateViewportMaxScroll:KE},B2=nx(F2,$2,(e,t,r)=>({...ob(r),...e,...t}),{context:Ch,areStatePropsEqual:Xx})(L2);function U2(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,o]=w.useState(!0);return w.useEffect(()=>{(async()=>{try{console.log("🔍 Fetching kanban data (safe version)...");const{data:a,error:l}=await z.from("deal_stage").select("id, label, description, sort_order, active").eq("active",!0).order("sort_order",{ascending:!0});if(console.log("📊 Stages:",a),l)throw console.error("❌ Stage error:",l),l;const{data:u,error:d}=await z.from("deal").select("id, deal_name, fee, deal_value, closed_date, stage_id, kanban_position, client_id, created_at").order("kanban_position",{ascending:!0});if(console.log("💼 Deals:",(u==null?void 0:u.length)||0,"deals fetched"),d)throw console.error("❌ Deal error:",d),d;const{data:f,error:h}=await z.from("client").select("id, client_name");console.log("👥 Clients:",(f==null?void 0:f.length)||0,"clients fetched"),h&&console.warn("⚠️ Client error (non-fatal):",h);const p=new Map;f==null||f.forEach(v=>{p.set(v.id,v.client_name)});const g=u.map(v=>({id:v.id,deal_name:v.deal_name,fee:v.fee,deal_value:v.deal_value,closed_date:v.closed_date,stage_id:v.stage_id,kanban_position:v.kanban_position,client_name:v.client_id&&p.get(v.client_id)||null,created_at:v.created_at})),b=new Map;a.forEach(v=>{b.set(v.id,v.label)});const y=new Set(a.map(v=>v.id)),x=new Date;x.setFullYear(x.getFullYear()-2);const m=g.filter(v=>!v.stage_id||!y.has(v.stage_id)?!1:b.get(v.stage_id)==="Lost"?v.created_at?new Date(v.created_at)>=x:!1:!0);console.log("🃏 Final cards:",m.length),console.log("📊 Final columns:",a.length),t(a||[]),n(m)}catch(a){console.error("💥 Error:",a)}finally{o(!1)}})()},[]),{columns:e,cards:r,loading:s}}function W2(){const{columns:e,cards:t,loading:r}=U2(),[n,s]=w.useState([]);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{document.title="Master Pipeline"},[]);const o=async l=>{const{destination:u,draggableId:d}=l;if(!u)return;const f=u.droppableId,h=[...n],p=h.find(y=>y.id===d);if(!p)return;p.stage_id=f;const g=h.filter(y=>y.stage_id===f&&y.id!==d).sort((y,x)=>(y.kanban_position??0)-(x.kanban_position??0));g.splice(u.index,0,p),g.forEach((y,x)=>{y.kanban_position=x}),s(h);const b=g.map(y=>z.from("deal").update({stage_id:y.stage_id,kanban_position:y.kanban_position}).eq("id",y.id));await Promise.all(b)},i=(l,u=0)=>typeof l=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:u,maximumFractionDigits:u}).format(l):"--",a=new Date().getFullYear();return r?c.jsx("div",{className:"p-4",children:"Loading..."}):c.jsxs("div",{className:"p-4 overflow-x-auto bg-gray-100 min-h-screen",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Master Pipeline"}),c.jsx("div",{className:"flex min-w-max gap-[2px]",children:c.jsx(e2,{onDragEnd:o,children:e.map((l,u)=>{let d=n.filter(g=>g.stage_id===l.id).sort((g,b)=>(g.kanban_position??0)-(b.kanban_position??0));l.label==="Closed Paid"&&(d=d.filter(g=>g.closed_date?new Date(g.closed_date).getFullYear()===a:!1));const f=d.reduce((g,b)=>g+(b.fee??0),0),h=u===e.length-1,p=u===0;return c.jsx(B2,{droppableId:l.id,children:(g,b)=>c.jsxs("div",{ref:g.innerRef,...g.droppableProps,className:`relative min-w-[240px] max-w-[280px] bg-white shadow-sm flex flex-col ${b.isDraggingOver?"bg-blue-50":""}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`chevron-header ${p?"first":""} ${h?"last":""} flex items-center justify-center`,children:c.jsxs("div",{className:"text-center font-semibold text-sm",children:[l.label," (",d.length,")"]})}),c.jsx("div",{className:"bg-white text-center py-2 border-b",children:c.jsx("div",{className:"text-green-600 text-lg font-bold",children:i(f)})})]}),c.jsxs("div",{className:"p-2 flex-1",children:[d.map((y,x)=>c.jsx(x2,{draggableId:y.id,index:x,children:(m,v)=>c.jsxs("div",{ref:m.innerRef,...m.draggableProps,...m.dragHandleProps,className:`bg-white p-2 rounded shadow mb-2 border text-sm ${v.isDragging?"bg-yellow-100":""}`,children:[c.jsx("div",{className:"font-semibold",children:c.jsx(ui,{to:`/deal/${y.id}`,className:"text-blue-600 hover:underline",children:y.deal_name||"Untitled Deal"})}),c.jsx("div",{className:"text-gray-700",children:i(y.fee)}),c.jsx("div",{className:"text-gray-500 text-xs",children:y.client_name||"No Client"}),c.jsx("div",{className:"text-gray-800",children:i(y.deal_value)})]})},y.id)),g.placeholder]})]})},l.id)})})})]})}function bu(e,t=0){return e==null||isNaN(e)?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function H2(e,t=2){return typeof e!="number"||isNaN(e)?"":`${e.toFixed(t)}%`}function Y2(e){return typeof e!="number"?"":Math.round(e)+"%"}function ca({label:e,value:t,onChange:r,format:n,editingField:s,setEditingField:o,fieldKey:i}){const a=s===i,l=w.useRef(null);w.useEffect(()=>{a&&l.current&&l.current.focus()},[a]);const u=()=>{o(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a?c.jsx("input",{ref:l,type:"number",value:t??"",onChange:d=>r(d.target.value),onBlur:u,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):c.jsx("div",{onClick:()=>o(i),className:"mt-1 p-2 bg-gray-100 rounded text-sm cursor-pointer",children:t==null||t===""?"":n(t)})]})}function ib(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=ib(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ue(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=ib(e))&&(n&&(n+=" "),n+=t);return n}const ab=6048e5,z2=864e5,mc=6e4,gc=36e5,V2=1e3,ig=Symbol.for("constructDateFrom");function ce(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&ig in e?e[ig](t):e instanceof Date?new e.constructor(t):new Date(t)}function q(e,t){return ce(t||e,e)}function Vt(e,t,r){const n=q(e,r==null?void 0:r.in);return isNaN(t)?ce((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Kt(e,t,r){const n=q(e,r==null?void 0:r.in);if(isNaN(t))return ce((r==null?void 0:r.in)||e,NaN);if(!t)return n;const s=n.getDate(),o=ce((r==null?void 0:r.in)||e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const i=o.getDate();return s>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function lb(e,t,r){return ce((r==null?void 0:r.in)||e,+q(e)+t)}function q2(e,t,r){return lb(e,t*gc,r)}let G2={};function Qn(){return G2}function Or(e,t){var a,l,u,d;const r=Qn(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=q(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Bs(e,t){return Or(e,{...t,weekStartsOn:1})}function cb(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=ce(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=Bs(s),i=ce(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Bs(i);return r.getTime()>=o.getTime()?n+1:r.getTime()>=a.getTime()?n:n-1}function kl(e){const t=q(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Lr(e,...t){const r=ce.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function Yn(e,t){const r=q(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Us(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t),o=Yn(n),i=Yn(s),a=+o-kl(o),l=+i-kl(i);return Math.round((a-l)/z2)}function K2(e,t){const r=cb(e,t),n=ce((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Bs(n)}function Vd(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setTime(n.getTime()+t*mc),n}function Ph(e,t,r){return Kt(e,t*3,r)}function Q2(e,t,r){return lb(e,t*1e3,r)}function Sl(e,t,r){return Vt(e,t*7,r)}function kr(e,t,r){return Kt(e,t*12,r)}function ag(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ce.bind(null,s));const o=q(s,n);(!r||r<o||isNaN(+o))&&(r=o)}),ce(n,r||NaN)}function lg(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ce.bind(null,s));const o=q(s,n);(!r||r>o||isNaN(+o))&&(r=o)}),ce(n,r||NaN)}function J2(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t);return+Yn(n)==+Yn(s)}function Sr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Dl(e){return!(!Sr(e)&&typeof e!="number"||isNaN(+q(e)))}function Cl(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return o*12+i}function Mn(e,t){const r=q(e,t==null?void 0:t.in);return Math.trunc(r.getMonth()/3)+1}function Nl(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=Mn(n)-Mn(s);return o*4+i}function El(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t);return n.getFullYear()-s.getFullYear()}function X2(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t),o=cg(n,s),i=Math.abs(Us(n,s));n.setDate(n.getDate()-o*i);const a=+(cg(n,s)===-o),l=o*(i-a);return l===0?0:l}function cg(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function ub(e,t){const r=q(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function db(e,t){const r=q(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function qd(e,t){const r=q(e,t==null?void 0:t.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function fb(e,t){const r=q(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function hb(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function vc(e,t){const r=q(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Z2(e,t){var a,l,u,d;const r=Qn(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=q(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const eT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tT=(e,t,r)=>{let n;const s=eT[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function wu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const rT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oT={date:wu({formats:rT,defaultWidth:"full"}),time:wu({formats:nT,defaultWidth:"full"}),dateTime:wu({formats:sT,defaultWidth:"full"})},iT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aT=(e,t,r,n)=>iT[e];function wo(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const lT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pT=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mT={ordinalNumber:pT,era:wo({values:lT,defaultWidth:"wide"}),quarter:wo({values:cT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:wo({values:uT,defaultWidth:"wide"}),day:wo({values:dT,defaultWidth:"wide"}),dayPeriod:wo({values:fT,defaultWidth:"wide",formattingValues:hT,defaultFormattingWidth:"wide"})};function _o(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?vT(a,f=>f.test(i)):gT(a,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function gT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function vT(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function yT(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const xT=/^(\d+)(th|st|nd|rd)?/i,bT=/\d+/i,wT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_T={any:[/^b/i,/^(a|c)/i]},kT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ST={any:[/1/i,/2/i,/3/i,/4/i]},DT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ET={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},TT={ordinalNumber:yT({matchPattern:xT,parsePattern:bT,valueCallback:e=>parseInt(e,10)}),era:_o({matchPatterns:wT,defaultMatchWidth:"wide",parsePatterns:_T,defaultParseWidth:"any"}),quarter:_o({matchPatterns:kT,defaultMatchWidth:"wide",parsePatterns:ST,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_o({matchPatterns:DT,defaultMatchWidth:"wide",parsePatterns:CT,defaultParseWidth:"any"}),day:_o({matchPatterns:NT,defaultMatchWidth:"wide",parsePatterns:ET,defaultParseWidth:"any"}),dayPeriod:_o({matchPatterns:jT,defaultMatchWidth:"any",parsePatterns:PT,defaultParseWidth:"any"})},pb={code:"en-US",formatDistance:tT,formatLong:oT,formatRelative:aT,localize:mT,match:TT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RT(e,t){const r=q(e,t==null?void 0:t.in);return Us(r,vc(r))+1}function Th(e,t){const r=q(e,t==null?void 0:t.in),n=+Bs(r)-+K2(r);return Math.round(n/ab)+1}function Rh(e,t){var d,f,h,p;const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=Qn(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=ce((t==null?void 0:t.in)||e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const a=Or(i,t),l=ce((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const u=Or(l,t);return+r>=+a?n+1:+r>=+u?n:n-1}function OT(e,t){var a,l,u,d;const r=Qn(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Rh(e,t),o=ce((t==null?void 0:t.in)||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Or(o,t)}function mb(e,t){const r=q(e,t==null?void 0:t.in),n=+Or(r,t)-+OT(r,t);return Math.round(n/ab)+1}function ae(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const $r={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ae(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ae(r+1,2)},d(e,t){return ae(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ae(e.getHours()%12||12,t.length)},H(e,t){return ae(e.getHours(),t.length)},m(e,t){return ae(e.getMinutes(),t.length)},s(e,t){return ae(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return ae(s,t.length)}},ns={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ug={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return $r.y(e,t)},Y:function(e,t,r,n){const s=Rh(e,n),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return ae(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):ae(o,t.length)},R:function(e,t){const r=cb(e);return ae(r,t.length)},u:function(e,t){const r=e.getFullYear();return ae(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ae(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ae(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return $r.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ae(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=mb(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):ae(s,t.length)},I:function(e,t,r){const n=Th(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ae(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):$r.d(e,t)},D:function(e,t,r){const n=RT(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ae(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ae(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ae(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return ae(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=ns.noon:n===0?s=ns.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=ns.evening:n>=12?s=ns.afternoon:n>=4?s=ns.morning:s=ns.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return $r.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):$r.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ae(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ae(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):$r.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):$r.s(e,t)},S:function(e,t){return $r.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return fg(n);case"XXXX":case"XX":return Cn(n);case"XXXXX":case"XXX":default:return Cn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return fg(n);case"xxxx":case"xx":return Cn(n);case"xxxxx":case"xxx":default:return Cn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+dg(n,":");case"OOOO":default:return"GMT"+Cn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+dg(n,":");case"zzzz":default:return"GMT"+Cn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return ae(n,t.length)},T:function(e,t,r){return ae(+e,t.length)}};function dg(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+t+ae(o,2)}function fg(e,t){return e%60===0?(e>0?"-":"+")+ae(Math.abs(e)/60,2):Cn(e,t)}function Cn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=ae(Math.trunc(n/60),2),o=ae(n%60,2);return r+s+t+o}const hg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gb=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},IT=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return hg(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",hg(n,t)).replace("{{time}}",gb(s,t))},Gd={p:gb,P:IT},MT=/^D+$/,LT=/^Y+$/,AT=["D","DD","YY","YYYY"];function vb(e){return MT.test(e)}function yb(e){return LT.test(e)}function Kd(e,t,r){const n=FT(e,t,r);if(console.warn(n),AT.includes(e))throw new RangeError(n)}function FT(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UT=/^'([^]*?)'?$/,WT=/''/g,HT=/[a-zA-Z]/;function Qd(e,t,r){var d,f,h,p,g,b,y,x;const n=Qn(),s=(r==null?void 0:r.locale)??n.locale??pb,o=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((b=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((x=(y=n.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,a=q(e,r==null?void 0:r.in);if(!Dl(a))throw new RangeError("Invalid time value");let l=t.match(BT).map(m=>{const v=m[0];if(v==="p"||v==="P"){const _=Gd[v];return _(m,s.formatLong)}return m}).join("").match($T).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:YT(m)};if(ug[v])return{isToken:!0,value:m};if(v.match(HT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&yb(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&vb(v))&&Kd(v,t,String(e));const _=ug[v[0]];return _(a,v,s.localize,u)}).join("")}function YT(e){const t=e.match(UT);return t?t[1].replace(WT,"'"):e}function pg(e,t){return q(e,t==null?void 0:t.in).getDate()}function zT(e,t){return q(e,t==null?void 0:t.in).getDay()}function VT(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=r.getMonth(),o=ce(r,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function qT(){return Object.assign({},Qn())}function Dr(e,t){return q(e,t==null?void 0:t.in).getHours()}function GT(e,t){const r=q(e,t==null?void 0:t.in).getDay();return r===0?7:r}function Cr(e,t){return q(e,t==null?void 0:t.in).getMinutes()}function Ge(e,t){return q(e,t==null?void 0:t.in).getMonth()}function on(e){return q(e).getSeconds()}function Jd(e){return+q(e)}function J(e,t){return q(e,t==null?void 0:t.in).getFullYear()}function dn(e,t){return+q(e)>+q(t)}function zn(e,t){return+q(e)<+q(t)}function KT(e,t){return+q(e)==+q(t)}function QT(e,t){const r=JT(t)?new t(0):ce(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function JT(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const XT=10;class xb{constructor(){Y(this,"subPriority",0)}validate(t,r){return!0}}class ZT extends xb{constructor(t,r,n,s,o){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class eR extends xb{constructor(r,n){super();Y(this,"priority",XT);Y(this,"subPriority",-1);this.context=r||(s=>ce(n,s))}set(r,n){return n.timestampIsSet?r:ce(r,QT(r,this.context))}}class se{run(t,r,n,s){const o=this.parse(t,r,n,s);return o?{setter:new ZT(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,r,n){return!0}}class tR extends se{constructor(){super(...arguments);Y(this,"priority",140);Y(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}const Se={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},sr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function De(e,t){return e&&{value:t(e.value),rest:e.rest}}function ye(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function or(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(s*gc+o*mc+i*V2),rest:t.slice(r[0].length)}}function bb(e){return ye(Se.anyDigitsSigned,e)}function _e(e,t){switch(e){case 1:return ye(Se.singleDigit,t);case 2:return ye(Se.twoDigits,t);case 3:return ye(Se.threeDigits,t);case 4:return ye(Se.fourDigits,t);default:return ye(new RegExp("^\\d{1,"+e+"}"),t)}}function jl(e,t){switch(e){case 1:return ye(Se.singleDigitSigned,t);case 2:return ye(Se.twoDigitsSigned,t);case 3:return ye(Se.threeDigitsSigned,t);case 4:return ye(Se.fourDigitsSigned,t);default:return ye(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Oh(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wb(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const o=n+50,i=Math.trunc(o/100)*100,a=e>=o%100;s=e+i-(a?100:0)}return r?s:1-s}function _b(e){return e%400===0||e%4===0&&e%100!==0}class rR extends se{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return De(_e(4,r),o);case"yo":return De(s.ordinalNumber(r,{unit:"year"}),o);default:return De(_e(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const o=r.getFullYear();if(s.isTwoDigitYear){const a=wb(s.year,o);return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}const i=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(i,0,1),r.setHours(0,0,0,0),r}}class nR extends se{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return De(_e(4,r),o);case"Yo":return De(s.ordinalNumber(r,{unit:"year"}),o);default:return De(_e(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,o){const i=Rh(r,o);if(s.isTwoDigitYear){const l=wb(s.year,i);return r.setFullYear(l,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Or(r,o)}const a=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(a,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Or(r,o)}}class sR extends se{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return jl(n==="R"?4:n.length,r)}set(r,n,s){const o=ce(r,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Bs(o)}}class oR extends se{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return jl(n==="u"?4:n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}class iR extends se{constructor(){super(...arguments);Y(this,"priority",120);Y(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"Q":case"QQ":return _e(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class aR extends se{constructor(){super(...arguments);Y(this,"priority",120);Y(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"q":case"qq":return _e(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class lR extends se{constructor(){super(...arguments);Y(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Y(this,"priority",110)}parse(r,n,s){const o=i=>i-1;switch(n){case"M":return De(ye(Se.month,r),o);case"MM":return De(_e(2,r),o);case"Mo":return De(s.ordinalNumber(r,{unit:"month"}),o);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}class cR extends se{constructor(){super(...arguments);Y(this,"priority",110);Y(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,s){const o=i=>i-1;switch(n){case"L":return De(ye(Se.month,r),o);case"LL":return De(_e(2,r),o);case"Lo":return De(s.ordinalNumber(r,{unit:"month"}),o);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}function uR(e,t,r){const n=q(e,r==null?void 0:r.in),s=mb(n,r)-t;return n.setDate(n.getDate()-s*7),q(n,r==null?void 0:r.in)}class dR extends se{constructor(){super(...arguments);Y(this,"priority",100);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,s){switch(n){case"w":return ye(Se.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,o){return Or(uR(r,s,o),o)}}function fR(e,t,r){const n=q(e,r==null?void 0:r.in),s=Th(n,r)-t;return n.setDate(n.getDate()-s*7),n}class hR extends se{constructor(){super(...arguments);Y(this,"priority",100);Y(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,s){switch(n){case"I":return ye(Se.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return Bs(fR(r,s))}}const pR=[31,28,31,30,31,30,31,31,30,31,30,31],mR=[31,29,31,30,31,30,31,31,30,31,30,31];class gR extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"subPriority",1);Y(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"d":return ye(Se.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return _e(n.length,r)}}validate(r,n){const s=r.getFullYear(),o=_b(s),i=r.getMonth();return o?n>=1&&n<=mR[i]:n>=1&&n<=pR[i]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}}class vR extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"subpriority",1);Y(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,s){switch(n){case"D":case"DD":return ye(Se.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return _e(n.length,r)}}validate(r,n){const s=r.getFullYear();return _b(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}}function Ih(e,t,r){var f,h,p,g;const n=Qn(),s=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,o=q(e,r==null?void 0:r.in),i=o.getDay(),l=(t%7+7)%7,u=7-s,d=t<0||t>6?t-(i+u)%7:(l+u)%7-(i+u)%7;return Vt(o,d,r)}class yR extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ih(r,s,o),r.setHours(0,0,0,0),r}}class xR extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return De(_e(n.length,r),i);case"eo":return De(s.ordinalNumber(r,{unit:"day"}),i);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ih(r,s,o),r.setHours(0,0,0,0),r}}class bR extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return De(_e(n.length,r),i);case"co":return De(s.ordinalNumber(r,{unit:"day"}),i);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ih(r,s,o),r.setHours(0,0,0,0),r}}function wR(e,t,r){const n=q(e,r==null?void 0:r.in),s=GT(n,r),o=t-s;return Vt(n,o,r)}class _R extends se{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,s){const o=i=>i===0?7:i;switch(n){case"i":case"ii":return _e(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return De(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiii":return De(s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiiii":return De(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiii":default:return De(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=wR(r,s),r.setHours(0,0,0,0),r}}class kR extends se{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Oh(s),0,0,0),r}}class SR extends se{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Oh(s),0,0,0),r}}class DR extends se{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Oh(s),0,0,0),r}}class CR extends se{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,s){switch(n){case"h":return ye(Se.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const o=r.getHours()>=12;return o&&s<12?r.setHours(s+12,0,0,0):!o&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}}class NR extends se{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,s){switch(n){case"H":return ye(Se.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}}class ER extends se{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,s){switch(n){case"K":return ye(Se.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}}class jR extends se{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,s){switch(n){case"k":return ye(Se.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return _e(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const o=s<=24?s%24:s;return r.setHours(o,0,0,0),r}}class PR extends se{constructor(){super(...arguments);Y(this,"priority",60);Y(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"m":return ye(Se.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}}class TR extends se{constructor(){super(...arguments);Y(this,"priority",50);Y(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"s":return ye(Se.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return _e(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}}class RR extends se{constructor(){super(...arguments);Y(this,"priority",30);Y(this,"incompatibleTokens",["t","T"])}parse(r,n){const s=o=>Math.trunc(o*Math.pow(10,-n.length+3));return De(_e(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}}class OR extends se{constructor(){super(...arguments);Y(this,"priority",10);Y(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return or(sr.basicOptionalMinutes,r);case"XX":return or(sr.basic,r);case"XXXX":return or(sr.basicOptionalSeconds,r);case"XXXXX":return or(sr.extendedOptionalSeconds,r);case"XXX":default:return or(sr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:ce(r,r.getTime()-kl(r)-s)}}class IR extends se{constructor(){super(...arguments);Y(this,"priority",10);Y(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return or(sr.basicOptionalMinutes,r);case"xx":return or(sr.basic,r);case"xxxx":return or(sr.basicOptionalSeconds,r);case"xxxxx":return or(sr.extendedOptionalSeconds,r);case"xxx":default:return or(sr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:ce(r,r.getTime()-kl(r)-s)}}class MR extends se{constructor(){super(...arguments);Y(this,"priority",40);Y(this,"incompatibleTokens","*")}parse(r){return bb(r)}set(r,n,s){return[ce(r,s*1e3),{timestampIsSet:!0}]}}class LR extends se{constructor(){super(...arguments);Y(this,"priority",20);Y(this,"incompatibleTokens","*")}parse(r){return bb(r)}set(r,n,s){return[ce(r,s),{timestampIsSet:!0}]}}const AR={G:new tR,y:new rR,Y:new nR,R:new sR,u:new oR,Q:new iR,q:new aR,M:new lR,L:new cR,w:new dR,I:new hR,d:new gR,D:new vR,E:new yR,e:new xR,c:new bR,i:new _R,a:new kR,b:new SR,B:new DR,h:new CR,H:new NR,K:new ER,k:new jR,m:new PR,s:new TR,S:new RR,X:new OR,x:new IR,t:new MR,T:new LR},FR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$R=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BR=/^'([^]*?)'?$/,UR=/''/g,WR=/\S/,HR=/[a-zA-Z]/;function YR(e,t,r,n){var y,x,m,v,_,k,S,D;const s=()=>ce((n==null?void 0:n.in)||r,NaN),o=qT(),i=(n==null?void 0:n.locale)??o.locale??pb,a=(n==null?void 0:n.firstWeekContainsDate)??((x=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??o.firstWeekContainsDate??((v=(m=o.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((k=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:k.weekStartsOn)??o.weekStartsOn??((D=(S=o.locale)==null?void 0:S.options)==null?void 0:D.weekStartsOn)??0;if(!t)return e?s():q(r,n==null?void 0:n.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:i},d=[new eR(n==null?void 0:n.in,r)],f=t.match($R).map(N=>{const E=N[0];if(E in Gd){const j=Gd[E];return j(N,i.formatLong)}return N}).join("").match(FR),h=[];for(let N of f){!(n!=null&&n.useAdditionalWeekYearTokens)&&yb(N)&&Kd(N,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&vb(N)&&Kd(N,t,e);const E=N[0],j=AR[E];if(j){const{incompatibleTokens:I}=j;if(Array.isArray(I)){const A=h.find($=>I.includes($.token)||$.token===E);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${N}\` at the same time`)}else if(j.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);h.push({token:E,fullToken:N});const U=j.run(e,N,i.match,u);if(!U)return s();d.push(U.setter),e=U.rest}else{if(E.match(HR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(N==="''"?N="'":E==="'"&&(N=zR(N)),e.indexOf(N)===0)e=e.slice(N.length);else return s()}}if(e.length>0&&WR.test(e))return s();const p=d.map(N=>N.priority).sort((N,E)=>E-N).filter((N,E,j)=>j.indexOf(N)===E).map(N=>d.filter(E=>E.priority===N).sort((E,j)=>j.subPriority-E.subPriority)).map(N=>N[0]);let g=q(r,n==null?void 0:n.in);if(isNaN(+g))return s();const b={};for(const N of p){if(!N.validate(g,u))return s();const E=N.set(g,b,u);Array.isArray(E)?(g=E[0],Object.assign(b,E[1])):g=E}return g}function zR(e){return e.match(BR)[1].replace(UR,"'")}function VR(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function qR(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t);return+qd(n)==+qd(s)}function GR(e,t,r){const[n,s]=Lr(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()}function xi(e,t,r){const n=+q(e,r==null?void 0:r.in),[s,o]=[+q(t.start,r==null?void 0:r.in),+q(t.end,r==null?void 0:r.in)].sort((i,a)=>i-a);return n>=s&&n<=o}function KR(e,t,r){return Vt(e,-t,r)}function kb(e,t){const r=()=>ce(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,s=ZR(e);let o;if(s.date){const u=eO(s.date,n);o=tO(u.restDateString,u.year)}if(!o||isNaN(+o))return r();const i=+o;let a=0,l;if(s.time&&(a=rO(s.time),isNaN(a)))return r();if(s.timezone){if(l=nO(s.timezone),isNaN(l))return r()}else{const u=new Date(i+a),d=q(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return q(i+a+l,t==null?void 0:t.in)}const ua={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},QR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,JR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,XR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ZR(e){const t={},r=e.split(ua.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ua.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ua.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=ua.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function eO(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function tO(e,t){if(t===null)return new Date(NaN);const r=e.match(QR);if(!r)return new Date(NaN);const n=!!r[4],s=ko(r[1]),o=ko(r[2])-1,i=ko(r[3]),a=ko(r[4]),l=ko(r[5])-1;if(n)return lO(t,a,l)?sO(t,a,l):new Date(NaN);{const u=new Date(0);return!iO(t,o,i)||!aO(t,s)?new Date(NaN):(u.setUTCFullYear(t,o,Math.max(s,i)),u)}}function ko(e){return e?parseInt(e):1}function rO(e){const t=e.match(JR);if(!t)return NaN;const r=_u(t[1]),n=_u(t[2]),s=_u(t[3]);return cO(r,n,s)?r*gc+n*mc+s*1e3:NaN}function _u(e){return e&&parseFloat(e.replace(",","."))||0}function nO(e){if(e==="Z")return 0;const t=e.match(XR);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return uO(n,s)?r*(n*gc+s*mc):NaN}function sO(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,o=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const oO=[31,null,31,30,31,30,31,31,30,31,30,31];function Sb(e){return e%400===0||e%4===0&&e%100!==0}function iO(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(oO[t]||(Sb(e)?29:28))}function aO(e,t){return t>=1&&t<=(Sb(e)?366:365)}function lO(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function cO(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function uO(e,t){return t>=0&&t<=59}function Dt(e,t,r){const n=q(e,r==null?void 0:r.in),s=n.getFullYear(),o=n.getDate(),i=ce((r==null?void 0:r.in)||e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const a=VT(i);return n.setMonth(t,Math.min(o,a)),n}function Ia(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setHours(t),n}function Ma(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setMinutes(t),n}function as(e,t,r){const n=q(e,r==null?void 0:r.in),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return Dt(n,n.getMonth()+o*3)}function La(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setSeconds(t),n}function tr(e,t,r){const n=q(e,r==null?void 0:r.in);return isNaN(+n)?ce((r==null?void 0:r.in)||e,NaN):(n.setFullYear(t),n)}function Ln(e,t,r){return Kt(e,-t,r)}function Db(e,t,r){return Ph(e,-t,r)}function mg(e,t,r){return Sl(e,-t,r)}function Ws(e,t,r){return kr(e,-t,r)}function yc(){return typeof window<"u"}function oo(e){return Cb(e)?(e.nodeName||"").toLowerCase():"#document"}function yt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dr(e){var t;return(t=(Cb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cb(e){return yc()?e instanceof Node||e instanceof yt(e).Node:!1}function et(e){return yc()?e instanceof Element||e instanceof yt(e).Element:!1}function ur(e){return yc()?e instanceof HTMLElement||e instanceof yt(e).HTMLElement:!1}function gg(e){return!yc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof yt(e).ShadowRoot}const dO=new Set(["inline","contents"]);function Ii(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Lt(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!dO.has(s)}const fO=new Set(["table","td","th"]);function hO(e){return fO.has(oo(e))}const pO=[":popover-open",":modal"];function xc(e){return pO.some(t=>{try{return e.matches(t)}catch{return!1}})}const mO=["transform","translate","scale","rotate","perspective"],gO=["transform","translate","scale","rotate","perspective","filter"],vO=["paint","layout","strict","content"];function Mh(e){const t=Lh(),r=et(e)?Lt(e):e;return mO.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||gO.some(n=>(r.willChange||"").includes(n))||vO.some(n=>(r.contain||"").includes(n))}function yO(e){let t=fn(e);for(;ur(t)&&!Hs(t);){if(Mh(t))return t;if(xc(t))return null;t=fn(t)}return null}function Lh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xO=new Set(["html","body","#document"]);function Hs(e){return xO.has(oo(e))}function Lt(e){return yt(e).getComputedStyle(e)}function bc(e){return et(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fn(e){if(oo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gg(e)&&e.host||dr(e);return gg(t)?t.host:t}function Nb(e){const t=fn(e);return Hs(t)?e.ownerDocument?e.ownerDocument.body:e.body:ur(t)&&Ii(t)?t:Nb(t)}function bi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Nb(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),i=yt(s);if(o){const a=Xd(i);return t.concat(i,i.visualViewport||[],Ii(s)?s:[],a&&r?bi(a):[])}return t.concat(s,bi(s,[],r))}function Xd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Ys=Math.min,An=Math.max,Pl=Math.round,da=Math.floor,cr=e=>({x:e,y:e}),bO={left:"right",right:"left",bottom:"top",top:"bottom"},wO={start:"end",end:"start"};function _O(e,t,r){return An(e,Ys(t,r))}function wc(e,t){return typeof e=="function"?e(t):e}function zs(e){return e.split("-")[0]}function Mi(e){return e.split("-")[1]}function kO(e){return e==="x"?"y":"x"}function Ah(e){return e==="y"?"height":"width"}const SO=new Set(["top","bottom"]);function Tn(e){return SO.has(zs(e))?"y":"x"}function Fh(e){return kO(Tn(e))}function DO(e,t,r){r===void 0&&(r=!1);const n=Mi(e),s=Fh(e),o=Ah(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Tl(i)),[i,Tl(i)]}function CO(e){const t=Tl(e);return[Zd(e),t,Zd(t)]}function Zd(e){return e.replace(/start|end/g,t=>wO[t])}const vg=["left","right"],yg=["right","left"],NO=["top","bottom"],EO=["bottom","top"];function jO(e,t,r){switch(e){case"top":case"bottom":return r?t?yg:vg:t?vg:yg;case"left":case"right":return t?NO:EO;default:return[]}}function PO(e,t,r,n){const s=Mi(e);let o=jO(zs(e),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(Zd)))),o}function Tl(e){return e.replace(/left|right|bottom|top/g,t=>bO[t])}function TO(e){return{top:0,right:0,bottom:0,left:0,...e}}function Eb(e){return typeof e!="number"?TO(e):{top:e,right:e,bottom:e,left:e}}function Rl(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}var RO=typeof document<"u",OO=function(){},Ol=RO?w.useLayoutEffect:OO;const IO={...i0},MO=IO.useInsertionEffect,LO=MO||(e=>e());function AO(e){const t=w.useRef(()=>{});return LO(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function xg(e,t,r){let{reference:n,floating:s}=e;const o=Tn(t),i=Fh(t),a=Ah(i),l=zs(t),u=o==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Mi(t)){case"start":p[i]-=h*(r&&u?-1:1);break;case"end":p[i]+=h*(r&&u?-1:1);break}return p}const FO=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=xg(u,n,l),h=n,p={},g=0;for(let b=0;b<a.length;b++){const{name:y,fn:x}=a[b],{x:m,y:v,data:_,reset:k}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=m??d,f=v??f,p={...p,[y]:{...p[y],..._}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:d,y:f}=xg(u,h,l)),b=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function $O(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=wc(t,e),g=Eb(p),y=a[h?f==="floating"?"reference":"floating":f],x=Rl(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),m=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},k=Rl(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:v,strategy:l}):m);return{top:(x.top-k.top+g.top)/_.y,bottom:(k.bottom-x.bottom+g.bottom)/_.y,left:(x.left-k.left+g.left)/_.x,right:(k.right-x.right+g.right)/_.x}}const BO=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=wc(e,t)||{};if(u==null)return{};const f=Eb(d),h={x:r,y:n},p=Fh(s),g=Ah(p),b=await i.getDimensions(u),y=p==="y",x=y?"top":"left",m=y?"bottom":"right",v=y?"clientHeight":"clientWidth",_=o.reference[g]+o.reference[p]-h[p]-o.floating[g],k=h[p]-o.reference[p],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let D=S?S[v]:0;(!D||!await(i.isElement==null?void 0:i.isElement(S)))&&(D=a.floating[v]||o.floating[g]);const N=_/2-k/2,E=D/2-b[g]/2-1,j=Ys(f[x],E),I=Ys(f[m],E),U=j,A=D-b[g]-I,$=D/2-b[g]/2+N,T=_O(U,$,A),O=!l.arrow&&Mi(s)!=null&&$!==T&&o.reference[g]/2-($<U?j:I)-b[g]/2<0,B=O?$<U?$-U:$-A:0;return{[p]:h[p]+B,data:{[p]:T,centerOffset:$-T-B,...O&&{alignmentOffset:B}},reset:O}}}),UO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:b=!0,...y}=wc(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const x=zs(s),m=Tn(a),v=zs(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(v||!b?[Tl(a)]:CO(a)),S=g!=="none";!h&&S&&k.push(...PO(a,b,g,_));const D=[a,...k],N=await $O(t,y),E=[];let j=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&E.push(N[x]),f){const $=DO(s,i,_);E.push(N[$[0]],N[$[1]])}if(j=[...j,{placement:s,overflows:E}],!E.every($=>$<=0)){var I,U;const $=(((I=o.flip)==null?void 0:I.index)||0)+1,T=D[$];if(T&&(!(f==="alignment"?m!==Tn(T):!1)||j.every(C=>Tn(C.placement)===m?C.overflows[0]>0:!0)))return{data:{index:$,overflows:j},reset:{placement:T}};let O=(U=j.filter(B=>B.overflows[0]<=0).sort((B,C)=>B.overflows[1]-C.overflows[1])[0])==null?void 0:U.placement;if(!O)switch(p){case"bestFit":{var A;const B=(A=j.filter(C=>{if(S){const R=Tn(C.placement);return R===m||R==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(R=>R>0).reduce((R,M)=>R+M,0)]).sort((C,R)=>C[1]-R[1])[0])==null?void 0:A[0];B&&(O=B);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}},WO=new Set(["left","top"]);async function HO(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=zs(r),a=Mi(r),l=Tn(r)==="y",u=WO.has(i)?-1:1,d=o&&l?-1:1,f=wc(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const YO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await HO(t,e);return i===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}};function jb(e){const t=Lt(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=ur(e),o=s?e.offsetWidth:r,i=s?e.offsetHeight:n,a=Pl(r)!==o||Pl(n)!==i;return a&&(r=o,n=i),{width:r,height:n,$:a}}function $h(e){return et(e)?e:e.contextElement}function Ns(e){const t=$h(e);if(!ur(t))return cr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=jb(t);let i=(o?Pl(r.width):r.width)/n,a=(o?Pl(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const zO=cr(0);function Pb(e){const t=yt(e);return!Lh()||!t.visualViewport?zO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VO(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==yt(e)?!1:t}function Vn(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=$h(e);let i=cr(1);t&&(n?et(n)&&(i=Ns(n)):i=Ns(e));const a=VO(o,r,n)?Pb(o):cr(0);let l=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(o){const h=yt(o),p=n&&et(n)?yt(n):n;let g=h,b=Xd(g);for(;b&&n&&p!==g;){const y=Ns(b),x=b.getBoundingClientRect(),m=Lt(b),v=x.left+(b.clientLeft+parseFloat(m.paddingLeft))*y.x,_=x.top+(b.clientTop+parseFloat(m.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,f*=y.y,l+=v,u+=_,g=yt(b),b=Xd(g)}}return Rl({width:d,height:f,x:l,y:u})}function Bh(e,t){const r=bc(e).scrollLeft;return t?t.left+r:Vn(dr(e)).left+r}function Tb(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Bh(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function qO(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",i=dr(n),a=t?xc(t.floating):!1;if(n===i||a&&o)return r;let l={scrollLeft:0,scrollTop:0},u=cr(1);const d=cr(0),f=ur(n);if((f||!f&&!o)&&((oo(n)!=="body"||Ii(i))&&(l=bc(n)),ur(n))){const p=Vn(n);u=Ns(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=i&&!f&&!o?Tb(i,l,!0):cr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-l.scrollTop*u.y+d.y+h.y}}function GO(e){return Array.from(e.getClientRects())}function KO(e){const t=dr(e),r=bc(e),n=e.ownerDocument.body,s=An(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=An(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Bh(e);const a=-r.scrollTop;return Lt(n).direction==="rtl"&&(i+=An(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:a}}function QO(e,t){const r=yt(e),n=dr(e),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const u=Lh();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}const JO=new Set(["absolute","fixed"]);function XO(e,t){const r=Vn(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=ur(e)?Ns(e):cr(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,u=n*o.y;return{width:i,height:a,x:l,y:u}}function bg(e,t,r){let n;if(t==="viewport")n=QO(e,r);else if(t==="document")n=KO(dr(e));else if(et(t))n=XO(t,r);else{const s=Pb(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Rl(n)}function Rb(e,t){const r=fn(e);return r===t||!et(r)||Hs(r)?!1:Lt(r).position==="fixed"||Rb(r,t)}function ZO(e,t){const r=t.get(e);if(r)return r;let n=bi(e,[],!1).filter(a=>et(a)&&oo(a)!=="body"),s=null;const o=Lt(e).position==="fixed";let i=o?fn(e):e;for(;et(i)&&!Hs(i);){const a=Lt(i),l=Mh(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&JO.has(s.position)||Ii(i)&&!l&&Rb(e,i))?n=n.filter(d=>d!==i):s=a,i=fn(i)}return t.set(e,n),n}function eI(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?xc(t)?[]:ZO(t,this._c):[].concat(r),n],a=i[0],l=i.reduce((u,d)=>{const f=bg(t,d,s);return u.top=An(f.top,u.top),u.right=Ys(f.right,u.right),u.bottom=Ys(f.bottom,u.bottom),u.left=An(f.left,u.left),u},bg(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tI(e){const{width:t,height:r}=jb(e);return{width:t,height:r}}function rI(e,t,r){const n=ur(t),s=dr(t),o=r==="fixed",i=Vn(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=cr(0);function u(){l.x=Bh(s)}if(n||!n&&!o)if((oo(t)!=="body"||Ii(s))&&(a=bc(t)),n){const p=Vn(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?Tb(s,a):cr(0),f=i.left+a.scrollLeft-l.x-d.x,h=i.top+a.scrollTop-l.y-d.y;return{x:f,y:h,width:i.width,height:i.height}}function ku(e){return Lt(e).position==="static"}function wg(e,t){if(!ur(e)||Lt(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return dr(e)===r&&(r=r.ownerDocument.body),r}function Ob(e,t){const r=yt(e);if(xc(e))return r;if(!ur(e)){let s=fn(e);for(;s&&!Hs(s);){if(et(s)&&!ku(s))return s;s=fn(s)}return r}let n=wg(e,t);for(;n&&hO(n)&&ku(n);)n=wg(n,t);return n&&Hs(n)&&ku(n)&&!Mh(n)?r:n||yO(e)||r}const nI=async function(e){const t=this.getOffsetParent||Ob,r=this.getDimensions,n=await r(e.floating);return{reference:rI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function sI(e){return Lt(e).direction==="rtl"}const oI={convertOffsetParentRelativeRectToViewportRelativeRect:qO,getDocumentElement:dr,getClippingRect:eI,getOffsetParent:Ob,getElementRects:nI,getClientRects:GO,getDimensions:tI,getScale:Ns,isElement:et,isRTL:sI};function Ib(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function iI(e,t){let r=null,n;const s=dr(e);function o(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;const g=da(f),b=da(s.clientWidth-(d+h)),y=da(s.clientHeight-(f+p)),x=da(d),v={rootMargin:-g+"px "+-b+"px "+-y+"px "+-x+"px",threshold:An(0,Ys(1,l))||1};let _=!0;function k(S){const D=S[0].intersectionRatio;if(D!==l){if(!_)return i();D?i(!1,D):n=setTimeout(()=>{i(!1,1e-7)},1e3)}D===1&&!Ib(u,e.getBoundingClientRect())&&i(),_=!1}try{r=new IntersectionObserver(k,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,v)}r.observe(e)}return i(!0),o}function aI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=$h(e),d=s||o?[...u?bi(u):[],...bi(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),o&&x.addEventListener("resize",r)});const f=u&&a?iI(u,r):null;let h=-1,p=null;i&&(p=new ResizeObserver(x=>{let[m]=x;m&&m.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let g,b=l?Vn(e):null;l&&y();function y(){const x=Vn(e);b&&!Ib(b,x)&&r(),b=x,g=requestAnimationFrame(y)}return r(),()=>{var x;d.forEach(m=>{s&&m.removeEventListener("scroll",r),o&&m.removeEventListener("resize",r)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const lI=YO,cI=UO,_g=BO,uI=(e,t,r)=>{const n=new Map,s={platform:oI,...r},o={...s.platform,_c:n};return FO(e,t,{...s,platform:o})};var dI=typeof document<"u",fI=function(){},Aa=dI?w.useLayoutEffect:fI;function Il(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Il(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Il(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Mb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kg(e,t){const r=Mb(e);return Math.round(t*r)/r}function Su(e){const t=w.useRef(e);return Aa(()=>{t.current=e}),t}function hI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(n);Il(h,n)||p(n);const[g,b]=w.useState(null),[y,x]=w.useState(null),m=w.useCallback(C=>{C!==S.current&&(S.current=C,b(C))},[]),v=w.useCallback(C=>{C!==D.current&&(D.current=C,x(C))},[]),_=o||g,k=i||y,S=w.useRef(null),D=w.useRef(null),N=w.useRef(d),E=l!=null,j=Su(l),I=Su(s),U=Su(u),A=w.useCallback(()=>{if(!S.current||!D.current)return;const C={placement:t,strategy:r,middleware:h};I.current&&(C.platform=I.current),uI(S.current,D.current,C).then(R=>{const M={...R,isPositioned:U.current!==!1};$.current&&!Il(N.current,M)&&(N.current=M,Ci.flushSync(()=>{f(M)}))})},[h,t,r,I,U]);Aa(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(C=>({...C,isPositioned:!1})))},[u]);const $=w.useRef(!1);Aa(()=>($.current=!0,()=>{$.current=!1}),[]),Aa(()=>{if(_&&(S.current=_),k&&(D.current=k),_&&k){if(j.current)return j.current(_,k,A);A()}},[_,k,A,j,E]);const T=w.useMemo(()=>({reference:S,floating:D,setReference:m,setFloating:v}),[m,v]),O=w.useMemo(()=>({reference:_,floating:k}),[_,k]),B=w.useMemo(()=>{const C={position:r,left:0,top:0};if(!O.floating)return C;const R=kg(O.floating,d.x),M=kg(O.floating,d.y);return a?{...C,transform:"translate("+R+"px, "+M+"px)",...Mb(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:M}},[r,a,O.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:A,refs:T,elements:O,floatingStyles:B}),[d,A,T,O,B])}const pI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?_g({element:n.current,padding:s}).fn(r):{}:n?_g({element:n,padding:s}).fn(r):{}}}},mI=(e,t)=>({...lI(e),options:[e,t]}),gI=(e,t)=>({...cI(e),options:[e,t]}),vI=(e,t)=>({...pI(e),options:[e,t]}),yI={...i0};let Sg=!1,xI=0;const Dg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+xI++;function bI(){const[e,t]=w.useState(()=>Sg?Dg():void 0);return Ol(()=>{e==null&&t(Dg())},[]),w.useEffect(()=>{Sg=!0},[]),e}const wI=yI.useId,Lb=wI||bI,_I=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:i}},width:a=14,height:l=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:f,stroke:h,d:p,style:{transform:g,...b}={},...y}=t,x=Lb(),[m,v]=w.useState(!1);if(Ol(()=>{if(!s)return;Lt(s).direction==="rtl"&&v(!0)},[s]),!s)return null;const[_,k]=n.split("-"),S=_==="top"||_==="bottom";let D=f;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(D=null);const N=d*2,E=N/2,j=a/2*(u/-8+1),I=l/2*u/4,U=!!p,A=D&&k==="end"?"bottom":"top";let $=D&&k==="end"?"right":"left";D&&m&&($=k==="end"?"left":"right");const T=(o==null?void 0:o.x)!=null?D||o.x:"",O=(o==null?void 0:o.y)!=null?D||o.y:"",B=p||"M0,0"+(" H"+a)+(" L"+(a-j)+","+(l-I))+(" Q"+a/2+","+l+" "+j+","+(l-I))+" Z",C={top:U?"rotate(180deg)":"",left:U?"rotate(90deg)":"rotate(-90deg)",bottom:U?"":"rotate(180deg)",right:U?"rotate(-90deg)":"rotate(90deg)"}[_];return c.jsxs("svg",{...y,"aria-hidden":!0,ref:r,width:U?a:a+N,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[$]:T,[A]:O,[_]:S||U?"100%":"calc(100% - "+N/2+"px)",transform:[C,g].filter(R=>!!R).join(" "),...b},children:[N>0&&c.jsx("path",{clipPath:"url(#"+x+")",fill:"none",stroke:h,strokeWidth:N+(p?0:1),d:B}),c.jsx("path",{stroke:N&&!p?y.fill:"none",d:B}),c.jsx("clipPath",{id:x,children:c.jsx("rect",{x:-E,y:E*(U?-1:1),width:a+N,height:a})})]})});function kI(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const SI=w.createContext(null),DI=w.createContext(null),CI=()=>{var e;return((e=w.useContext(SI))==null?void 0:e.id)||null},NI=()=>w.useContext(DI);function EI(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=Lb(),o=w.useRef({}),[i]=w.useState(()=>kI()),a=CI()!=null,[l,u]=w.useState(n.reference),d=AO((p,g,b)=>{o.current.openEvent=p?g:void 0,i.emit("openchange",{open:p,event:g,reason:b,nested:a}),r==null||r(p,g,b)}),f=w.useMemo(()=>({setPositionReference:u}),[]),h=w.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:h,events:i,floatingId:s,refs:f}),[t,d,h,i,s,f])}function jI(e){e===void 0&&(e={});const{nodeId:t}=e,r=EI({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[o,i]=w.useState(null),[a,l]=w.useState(null),d=(s==null?void 0:s.domReference)||o,f=w.useRef(null),h=NI();Ol(()=>{d&&(f.current=d)},[d]);const p=hI({...e,elements:{...s,...a&&{reference:a}}}),g=w.useCallback(v=>{const _=et(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;l(_),p.refs.setReference(_)},[p.refs]),b=w.useCallback(v=>{(et(v)||v===null)&&(f.current=v,i(v)),(et(p.refs.reference.current)||p.refs.reference.current===null||v!==null&&!et(v))&&p.refs.setReference(v)},[p.refs]),y=w.useMemo(()=>({...p.refs,setReference:b,setPositionReference:g,domReference:f}),[p.refs,b,g]),x=w.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),m=w.useMemo(()=>({...p,...n,refs:y,elements:x,nodeId:t}),[p,y,x,t,n]);return Ol(()=>{n.dataRef.current.floatingContext=m;const v=h==null?void 0:h.nodesRef.current.find(_=>_.id===t);v&&(v.context=m)}),w.useMemo(()=>({...p,context:m,refs:y,elements:x}),[p,y,x,m])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var ef=function(t,r){return ef=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},ef(t,r)};function Fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ef(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var re=function(){return re=Object.assign||function(r){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},re.apply(this,arguments)};function ir(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var PI=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,o=e.className,i=e.children,a=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return P.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},i)},TI=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(o){var i,a=o.composed&&o.composedPath&&o.composedPath().find(function(l){return l instanceof Node})||o.target;r.current&&!r.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(i=n.current)===null||i===void 0||i.call(n,o))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},_c=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,o=e.style,i=e.ignoreClass,a=TI(r,i);return P.createElement("div",{className:n,style:o,ref:function(l){a.current=l,s&&(s.current=l)}},t)},H;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(H||(H={}));function Ab(){var e=typeof window<"u"?window:globalThis;return e}var Li=12;function oe(e){if(e==null)return new Date;var t=typeof e=="string"?kb(e):q(e);return kc(t)?t:new Date}function Du(e,t,r,n,s){s===void 0&&(s=oe());for(var o=Vs(r)||Vs(Uh()),i=Array.isArray(t)?t:[t],a=0,l=i;a<l.length;a++){var u=l[a],d=YR(e,u,s,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(kc(d)&&(!n||e===me(d,u,r)))return d}return null}function kc(e,t){return Dl(e)&&!zn(e,new Date("1/1/1800"))}function me(e,t,r){if(r==="en")return Qd(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?Vs(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||Vs(Uh()),Qd(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function St(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&me(e,s,n)||""}var Fb=" - ";function RI(e,t,r){if(!e)return"";var n=St(e,r),s=t?St(t,r):"";return"".concat(n).concat(Fb).concat(s)}function OI(e,t){if(!(e!=null&&e.length))return"";var r=e[0]?St(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=St(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function Cu(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,o=s===void 0?0:s,i=t.second,a=i===void 0?0:i;return Ia(Ma(La(e,a),o),n)}function II(e){return Th(e)}function MI(e,t){return me(e,"ddd",t)}function Fa(e){return Yn(e)}function an(e,t,r){var n=Vs(t||Uh());return Or(e,{locale:n,weekStartsOn:r})}function Nr(e){return fb(e)}function To(e){return vc(e)}function Cg(e){return qd(e)}function Ng(){return Yn(oe())}function Eg(e){return ub(e)}function LI(e){return Z2(e)}function AI(e){return db(e)}function rr(e,t){return e&&t?GR(e,t):!e&&!t}function Ze(e,t){return e&&t?VR(e,t):!e&&!t}function Ml(e,t){return e&&t?qR(e,t):!e&&!t}function te(e,t){return e&&t?J2(e,t):!e&&!t}function Rn(e,t){return e&&t?KT(e,t):!e&&!t}function Ro(e,t,r){var n,s=Yn(t),o=ub(r);try{n=xi(e,{start:s,end:o})}catch{n=!1}return n}function Uh(){var e=Ab();return e.__localeId__}function Vs(e){if(typeof e=="string"){var t=Ab();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function FI(e,t,r){return t(me(e,"EEEE",r))}function $I(e,t){return me(e,"EEEEEE",t)}function BI(e,t){return me(e,"EEE",t)}function Wh(e,t){return me(Dt(oe(),e),"LLLL",t)}function $b(e,t){return me(Dt(oe(),e),"LLL",t)}function UI(e,t){return me(as(oe(),e),"QQQ",t)}function Et(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.excludeDateIntervals,a=r.includeDates,l=r.includeDateIntervals,u=r.filterDate;return Ai(e,{minDate:n,maxDate:s})||o&&o.some(function(d){return d instanceof Date?te(e,d):te(e,d.date)})||i&&i.some(function(d){var f=d.start,h=d.end;return xi(e,{start:f,end:h})})||a&&!a.some(function(d){return te(e,d)})||l&&!l.some(function(d){var f=d.start,h=d.end;return xi(e,{start:f,end:h})})||u&&!u(oe(e))||!1}function Hh(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var i=o.start,a=o.end;return xi(e,{start:i,end:a})}):n&&n.some(function(o){var i;return o instanceof Date?te(e,o):te(e,(i=o.date)!==null&&i!==void 0?i:new Date)})||!1}function Bb(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate;return Ai(e,{minDate:n?fb(n):void 0,maxDate:s?db(s):void 0})||(o==null?void 0:o.some(function(l){return Ze(e,l instanceof Date?l:l.date)}))||i&&!i.some(function(l){return Ze(e,l)})||a&&!a(oe(e))||!1}function fa(e,t,r,n){var s=J(e),o=Ge(e),i=J(t),a=Ge(t),l=J(n);return s===i&&s===l?o<=r&&r<=a:s<i?l===s&&o<=r||l===i&&a>=r||l<i&&l>s:!1}function WI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates;return Ai(e,{minDate:n,maxDate:s})||o&&o.some(function(a){return Ze(a instanceof Date?a:a.date,e)})||i&&!i.some(function(a){return Ze(a,e)})||!1}function ha(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate;return Ai(e,{minDate:n,maxDate:s})||(o==null?void 0:o.some(function(l){return Ml(e,l instanceof Date?l:l.date)}))||i&&!i.some(function(l){return Ml(e,l)})||a&&!a(oe(e))||!1}function pa(e,t,r){if(!t||!r||!Dl(t)||!Dl(r))return!1;var n=J(t),s=J(r);return n<=e&&s>=e}function $a(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate,l=new Date(e,0,1);return Ai(l,{minDate:n?vc(n):void 0,maxDate:s?hb(s):void 0})||(o==null?void 0:o.some(function(u){return rr(l,u instanceof Date?u:u.date)}))||i&&!i.some(function(u){return rr(l,u)})||a&&!a(oe(l))||!1}function ma(e,t,r,n){var s=J(e),o=Mn(e),i=J(t),a=Mn(t),l=J(n);return s===i&&s===l?o<=r&&r<=a:s<i?l===s&&o<=r||l===i&&a>=r||l<i&&l>s:!1}function Ai(e,t){var r,n=t===void 0?{}:t,s=n.minDate,o=n.maxDate;return(r=s&&Us(e,s)<0||o&&Us(e,o)>0)!==null&&r!==void 0?r:!1}function jg(e,t){return t.some(function(r){return Dr(r)===Dr(e)&&Cr(r)===Cr(e)&&on(r)===on(e)})}function Pg(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,o=r.filterTime;return n&&jg(e,n)||s&&!jg(e,s)||o&&!o(e)||!1}function Tg(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=oe();s=Ia(s,Dr(e)),s=Ma(s,Cr(e)),s=La(s,on(e));var o=oe();o=Ia(o,Dr(r)),o=Ma(o,Cr(r)),o=La(o,on(r));var i=oe();i=Ia(i,Dr(n)),i=Ma(i,Cr(n)),i=La(i,on(n));var a;try{a=!xi(s,{start:o,end:i})}catch{a=!1}return a}function Rg(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=Ln(e,1);return n&&Cl(n,o)>0||s&&s.every(function(i){return Cl(i,o)>0})||!1}function Og(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=Kt(e,1);return n&&Cl(o,n)>0||s&&s.every(function(i){return Cl(o,i)>0})||!1}function HI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=vc(e),i=Db(o,1);return n&&Nl(n,i)>0||s&&s.every(function(a){return Nl(a,i)>0})||!1}function YI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=hb(e),i=Ph(o,1);return n&&Nl(i,n)>0||s&&s.every(function(a){return Nl(i,a)>0})||!1}function Ig(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=Ws(e,1);return n&&El(n,o)>0||s&&s.every(function(i){return El(i,o)>0})||!1}function zI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,o=s===void 0?Li:s,i=To(Ws(e,o)),a=Gr(i,o).endPeriod,l=n&&J(n);return l&&l>a||!1}function Mg(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=kr(e,1);return n&&El(o,n)>0||s&&s.every(function(i){return El(o,i)>0})||!1}function VI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,o=s===void 0?Li:s,i=kr(e,o),a=Gr(i,o).startPeriod,l=n&&J(n);return l&&l<a||!1}function Ub(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Us(s,t)>=0});return lg(n)}else return r?lg(r):t}function Wb(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Us(s,t)<=0});return ag(n)}else return r?ag(r):t}function Lg(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=e.length;s<o;s++){var i=e[s];if(Sr(i)){var a=me(i,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(t)||(l.push(t),n.set(a,l))}else if(typeof i=="object"){var u=Object.keys(i),d=(r=u[0])!==null&&r!==void 0?r:"",f=i[d];if(typeof d=="string"&&Array.isArray(f))for(var h=0,p=f.length;h<p;h++){var g=f[h];if(g){var a=me(g,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(d)||(l.push(d),n.set(a,l))}}}}return n}function qI(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function GI(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,o=n.holidayName;if(Sr(s)){var i=me(s,"MM.dd.yyyy"),a=r.get(i)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&qI(a.holidayNames,[o]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?ir(ir([],l,!0),[o],!1):[o],r.set(i,a)}}}),r}function KI(e,t,r,n,s){for(var o=s.length,i=[],a=0;a<o;a++){var l=e,u=s[a];u&&(l=q2(l,Dr(u)),l=Vd(l,Cr(u)),l=Q2(l,on(u)));var d=Vd(e,(r+1)*n);dn(l,t)&&zn(l,d)&&u!=null&&i.push(u)}return i}function Ag(e){return e<10?"0".concat(e):"".concat(e)}function Gr(e,t){t===void 0&&(t=Li);var r=Math.ceil(J(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function QI(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function Fg(e){var t=e.getSeconds(),r=e.getMilliseconds();return q(e.getTime()-t*1e3-r)}function JI(e,t){return Fg(e).getTime()===Fg(t).getTime()}function $g(e){if(!Sr(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function Bg(e,t){if(!Sr(e)||!Sr(t))throw new Error("Invalid date received");var r=$g(e),n=$g(t);return zn(r,n)}function Hb(e){return e.key===H.Space}var XI=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=P.createRef(),n.onTimeChange=function(s){var o,i;n.setState({time:s});var a=n.props.date,l=a instanceof Date&&!isNaN(+a),u=l?a:new Date;if(s!=null&&s.includes(":")){var d=s.split(":"),f=d[0],h=d[1];u.setHours(Number(f)),u.setMinutes(Number(h))}(i=(o=n.props).onChange)===null||i===void 0||i.call(o,u)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,i=o.date,a=o.timeString,l=o.customTimeInput;return l?w.cloneElement(l,{date:i,value:s,onChange:n.onTimeChange}):P.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var u;(u=n.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){n.onTimeChange(u.target.value||a)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return P.createElement("div",{className:"react-datepicker__input-time-container"},P.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),P.createElement("div",{className:"react-datepicker-time__input-container"},P.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),ZI=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===H.Space&&(n.preventDefault(),n.key=H.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isSameDay=function(n){return te(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(i){return r.isSameDayOrWeek(i)}):r.isSameDayOrWeek(r.props.selected),o=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!o},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Et(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return Hh(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return te(r.props.day,an(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&te(n,an(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,o=n.highlightDates;if(!o)return!1;var i=me(s,"MM.dd.yyyy");return o.get(i)},r.getHolidaysClass=function(){var n,s=r.props,o=s.day,i=s.holidays;if(!i)return[void 0];var a=me(o,"MM.dd.yyyy");return i.has(a)?[(n=i.get(a))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:Ro(s,o,i)},r.isInSelectingRange=function(){var n,s=r.props,o=s.day,i=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,u=s.selectsDisabledDaysInRange,d=s.startDate,f=s.endDate,h=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(i||a||l)||!h||!u&&r.isDisabled()?!1:i&&f&&(zn(h,f)||Rn(h,f))?Ro(o,h,f):a&&d&&(dn(h,d)||Rn(h,d))||l&&d&&!f&&(dn(h,d)||Rn(h,d))?Ro(o,d,h):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.startDate,a=s.selectsStart,l=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a?te(o,l):te(o,i)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.endDate,a=s.selectsEnd,l=s.selectsRange,u=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a||l?te(o,u):te(o,i)},r.isRangeStart=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:te(o,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:te(i,s)},r.isWeekend=function(){var n=zT(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Ge(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Ge(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(oe())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return Ue("react-datepicker__day",s,"react-datepicker__day--"+MI(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,i=o===void 0?"Choose":o,a=n.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,u=r.isDisabled()||r.isExcluded()?l:i;return"".concat(u," ").concat(me(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,o=n.holidays,i=o===void 0?new Map:o,a=n.excludeDates,l=me(s,"MM.dd.yyyy"),u=[];return i.has(l)&&u.push.apply(u,i.get(l).holidayNames),r.isExcluded()&&u.push(a==null?void 0:a.filter(function(d){return d instanceof Date?te(d,s):te(d==null?void 0:d.date,s)}).map(function(d){if(!(d instanceof Date))return d==null?void 0:d.message})),u.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,o=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&te(s,n))?0:-1;return o},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(pg(r.props.day),r.props.day):pg(r.props.day)},r.render=function(){return P.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&P.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),eM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===H.Space&&(n.preventDefault(),n.key=H.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!te(r.props.date,r.props.selected)&&te(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||te(r.props.date,r.props.selected)&&te(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&te(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,o=r.ariaLabelPrefix,i=o===void 0?t.defaultProps.ariaLabelPrefix:o,a=r.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&te(this.props.date,this.props.selected)};return P.createElement("div",{ref:this.weekNumberEl,className:Ue(l),"aria-label":"".concat(i," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),tM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Et(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,o){for(var i,a,l,u=new Date(n),d=0;d<7;d++){var f=new Date(n);f.setDate(f.getDate()+d);var h=!r.isDisabled(f);if(h){u=f;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(u,s,o),r.props.showWeekPicker&&r.handleDayClick(u,o),((i=r.props.shouldCloseOnSelect)!==null&&i!==void 0?i:t.defaultProps.shouldCloseOnSelect)&&((l=(a=r.props).setOpen)===null||l===void 0||l.call(a,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):II(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Vt(n,6),o=new Date(n);o<=s;){if(!r.isDisabled(o))return!1;o=Vt(o,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],o=r.formatWeekNumber(n);if(r.props.showWeekNumber){var i=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,o):void 0;s.push(P.createElement(eM,re({key:"W"},t.defaultProps,r.props,{weekNumber:o,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:i})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=Vt(n,a);return P.createElement(ZI,re({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:r.handleDayClick.bind(r,l),onMouseEnter:r.handleDayMouseEnter.bind(r,l)}))}))},r.startOfWeek=function(){return an(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!te(r.startOfWeek(),r.props.selected)&&te(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":te(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return P.createElement("div",{className:Ue(r)},this.renderDays())},t}(w.Component),So,rM=6,Es={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Nu=(So={},So[Es.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},So[Es.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},So[Es.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},So),ga=1;function Ug(e,t){return e?Es.FOUR_COLUMNS:t?Es.TWO_COLUMNS:Es.THREE_COLUMNS}var nM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=ir([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=ir([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Et(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return Hh(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var o,i;(i=(o=r.props).onDayClick)===null||i===void 0||i.call(o,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,o;(o=(s=r.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Ze(Dt(o,n),i)},r.isRangeStartQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Ml(as(o,n),i)},r.isRangeEndMonth=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Ze(Dt(o,n),a)},r.isRangeEndQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Ml(as(o,n),a)},r.isInSelectingRangeMonth=function(n){var s,o=r.props,i=o.day,a=o.selectsStart,l=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?fa(h,f,n,i):l&&d||u&&d&&!f?fa(d,h,n,i):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,a=o.startDate,l=o.selectsStart,u=Dt(i,n),d=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l?Ze(u,d):Ze(u,a)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,a=o.endDate,l=o.selectsEnd,u=o.selectsRange,d=Dt(i,n),f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l||u?Ze(d,f):Ze(d,a)},r.isInSelectingRangeQuarter=function(n){var s,o=r.props,i=o.day,a=o.selectsStart,l=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?ma(h,f,n,i):l&&d||u&&d&&!f?ma(d,h,n,i):!1},r.isWeekInMonth=function(n){var s=r.props.day,o=Vt(n,6);return Ze(n,s)||Ze(o,s)},r.isCurrentMonth=function(n,s){return J(n)===J(oe())&&s===Ge(oe())},r.isCurrentQuarter=function(n,s){return J(n)===J(oe())&&s===Mn(oe())},r.isSelectedMonth=function(n,s,o){return Ge(o)===s&&J(n)===J(o)},r.isSelectMonthInList=function(n,s,o){return o.some(function(i){return r.isSelectedMonth(n,s,i)})},r.isSelectedQuarter=function(n,s,o){return Mn(n)===s&&J(n)===J(o)},r.isMonthSelected=function(){var n=r.props,s=n.day,o=n.selected,i=n.selectedDates,a=n.selectsMultiple,l=Ge(s);return a?i==null?void 0:i.some(function(u){return r.isSelectedMonth(s,l,u)}):!!o&&r.isSelectedMonth(s,l,o)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,o=0,i=!1,a=an(Nr(r.props.day),r.props.locale,r.props.calendarStartDay),l=function(g){return r.props.showWeekPicker?an(g,r.props.locale,r.props.calendarStartDay):r.props.preSelection},u=function(g){return r.props.showWeekPicker?an(g,r.props.locale,r.props.calendarStartDay):r.props.selected},d=r.props.selected?u(r.props.selected):void 0,f=r.props.preSelection?l(r.props.preSelection):void 0;n.push(P.createElement(tM,re({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:o,day:a,month:Ge(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:d,preSelection:f,showWeekNumber:r.props.showWeekNumbers}))),!i;){o++,a=Sl(a,1);var h=s&&o>=rM,p=!s&&!r.isWeekInMonth(a);if(h||p)if(r.props.peekNextMonth)i=!0;else break}return n},r.onMonthClick=function(n,s){var o=r.isMonthDisabledForLabelDate(s),i=o.isDisabled,a=o.labelDate;i||r.handleDayClick(Nr(a),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),o=s.isDisabled,i=s.labelDate;o||r.handleDayMouseEnter(Nr(i))},r.handleMonthNavigation=function(n,s){var o,i,a,l;(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(l=(a=r.MONTH_REFS[n])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},r.handleKeyboardNavigation=function(n,s,o){var i,a=r.props,l=a.selected,u=a.preSelection,d=a.setPreSelection,f=a.minDate,h=a.maxDate,p=a.showFourColumnMonthYearPicker,g=a.showTwoColumnMonthYearPicker;if(u){var b=Ug(p,g),y=r.getVerticalOffset(b),x=(i=Nu[b])===null||i===void 0?void 0:i.grid,m=function(D,N,E){var j,I,U=N,A=E;switch(D){case H.ArrowRight:U=Kt(N,ga),A=E===11?0:E+ga;break;case H.ArrowLeft:U=Ln(N,ga),A=E===0?11:E-ga;break;case H.ArrowUp:U=Ln(N,y),A=!((j=x==null?void 0:x[0])===null||j===void 0)&&j.includes(E)?E+12-y:E-y;break;case H.ArrowDown:U=Kt(N,y),A=!((I=x==null?void 0:x[x.length-1])===null||I===void 0)&&I.includes(E)?E-12+y:E+y;break}return{newCalculatedDate:U,newCalculatedMonth:A}},v=function(D,N,E){for(var j=40,I=D,U=!1,A=0,$=m(I,N,E),T=$.newCalculatedDate,O=$.newCalculatedMonth;!U;){if(A>=j){T=N,O=E;break}if(f&&T<f){I=H.ArrowRight;var B=m(I,T,O);T=B.newCalculatedDate,O=B.newCalculatedMonth}if(h&&T>h){I=H.ArrowLeft;var B=m(I,T,O);T=B.newCalculatedDate,O=B.newCalculatedMonth}if(WI(T,r.props)){var B=m(I,T,O);T=B.newCalculatedDate,O=B.newCalculatedMonth}else U=!0;A++}return{newCalculatedDate:T,newCalculatedMonth:O}};if(s===H.Enter){r.isMonthDisabled(o)||(r.onMonthClick(n,o),d==null||d(l));return}var _=v(s,u,o),k=_.newCalculatedDate,S=_.newCalculatedMonth;switch(s){case H.ArrowRight:case H.ArrowLeft:case H.ArrowUp:case H.ArrowDown:r.handleMonthNavigation(S,k);break}}},r.getVerticalOffset=function(n){var s,o;return(o=(s=Nu[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},r.onMonthKeyDown=function(n,s){var o=r.props,i=o.disabledKeyboardNavigation,a=o.handleOnMonthKeyDown,l=n.key;l!==H.Tab&&n.preventDefault(),i||r.handleKeyboardNavigation(n,l,s),a&&a(n)},r.onQuarterClick=function(n,s){var o=as(r.props.day,s);ha(o,r.props)||r.handleDayClick(Cg(o),n)},r.onQuarterMouseEnter=function(n){var s=as(r.props.day,n);ha(s,r.props)||r.handleDayMouseEnter(Cg(s))},r.handleQuarterNavigation=function(n,s){var o,i,a,l;r.isDisabled(s)||r.isExcluded(s)||((i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(l=(a=r.QUARTER_REFS[n-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},r.onQuarterKeyDown=function(n,s){var o,i,a=n.key;if(!r.props.disabledKeyboardNavigation)switch(a){case H.Enter:r.onQuarterClick(n,s),(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,r.props.selected);break;case H.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,Ph(r.props.preSelection,1));break;case H.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,Db(r.props.preSelection,1));break}},r.isMonthDisabledForLabelDate=function(n){var s,o=r.props,i=o.day,a=o.minDate,l=o.maxDate,u=o.excludeDates,d=o.includeDates,f=Dt(i,n);return{isDisabled:(s=(a||l||u||d)&&Bb(f,r.props))!==null&&s!==void 0?s:!1,labelDate:f}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate,l=s.preSelection,u=s.monthClassName,d=u?u(Dt(o,n)):void 0,f=r.getSelection();return Ue("react-datepicker__month-text","react-datepicker__month-".concat(n),d,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":f?r.isSelectMonthInList(o,n,f):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&l&&r.isSelectedMonth(o,n,l)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":i&&a?fa(i,a,n,o):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(o,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=Ge(r.props.preSelection),o=r.isMonthDisabledForLabelDate(s).isDisabled,i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=Mn(r.props.preSelection),o=ha(r.props.day,r.props),i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getAriaLabel=function(n){var s=r.props,o=s.chooseDayAriaLabelPrefix,i=o===void 0?"Choose":o,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,u=s.day,d=s.locale,f=Dt(u,n),h=r.isDisabled(f)||r.isExcluded(f)?l:i;return"".concat(h," ").concat(me(f,"MMMM yyyy",d))},r.getQuarterClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate,l=s.selected,u=s.minDate,d=s.maxDate,f=s.excludeDates,h=s.includeDates,p=s.filterDate,g=s.preSelection,b=s.disabledKeyboardNavigation,y=(u||d||f||h||p)&&ha(as(o,n),r.props);return Ue("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":y,"react-datepicker__quarter-text--selected":l?r.isSelectedQuarter(o,n,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!b&&g&&r.isSelectedQuarter(o,n,g)&&!y,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":i&&a?ma(i,a,n,o):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(o,n)})},r.getMonthContent=function(n){var s=r.props,o=s.showFullMonthYearPicker,i=s.renderMonthContent,a=s.locale,l=s.day,u=$b(n,a),d=Wh(n,a);return i?i(n,u,d,l):o?d:u},r.getQuarterContent=function(n){var s,o=r.props,i=o.renderQuarterContent,a=o.locale,l=UI(n,a);return(s=i==null?void 0:i(n,l))!==null&&s!==void 0?s:l},r.renderMonths=function(){var n,s=r.props,o=s.showTwoColumnMonthYearPicker,i=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,u=(n=Nu[Ug(i,o)])===null||n===void 0?void 0:n.grid;return u==null?void 0:u.map(function(d,f){return P.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(h,p){return P.createElement("div",{ref:r.MONTH_REFS[h],key:p,onClick:function(g){r.onMonthClick(g,h)},onKeyDown:function(g){Hb(g)&&(g.preventDefault(),g.key=H.Enter),r.onMonthKeyDown(g,h)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(h)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(h)}:void 0,tabIndex:Number(r.getTabIndex(h)),className:r.getMonthClassNames(h),"aria-disabled":r.isMonthDisabled(h),role:"option","aria-label":r.getAriaLabel(h),"aria-current":r.isCurrentMonth(a,h)?"date":void 0,"aria-selected":l?r.isSelectedMonth(a,h,l):void 0},r.getMonthContent(h))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,o=n.selected,i=[1,2,3,4];return P.createElement("div",{className:"react-datepicker__quarter-wrapper"},i.map(function(a,l){return P.createElement("div",{key:l,ref:r.QUARTER_REFS[l],role:"option",onClick:function(u){r.onQuarterClick(u,a)},onKeyDown:function(u){r.onQuarterKeyDown(u,a)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(a)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(a)}:void 0,className:r.getQuarterClassNames(a),"aria-selected":o?r.isSelectedQuarter(s,a,o):void 0,tabIndex:Number(r.getQuarterTabIndex(a)),"aria-current":r.isCurrentQuarter(s,a)?"date":void 0},r.getQuarterContent(a))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,o=n.selectsStart,i=n.selectsEnd,a=n.showMonthYearPicker,l=n.showQuarterYearPicker,u=n.showWeekPicker;return Ue("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||i)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":u})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,o=r.selectsMultiple;if(o)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,o=r.day,i=r.ariaLabelPrefix,a=i===void 0?"Month ":i,l=a?a.trim()+" ":"";return P.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(me(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),sM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return P.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?P.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return P.createElement(_c,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),oM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,o){return P.createElement("option",{key:s,value:o},s)})},r.renderSelectMode=function(n){return P.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return P.createElement(sM,re({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,o=[r.renderReadView(!s,n)];return s&&o.unshift(r.renderDropdown(n)),o},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return $b(o,r.props.locale)}:function(o){return Wh(o,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return P.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function iM(e,t){for(var r=[],n=Nr(e),s=Nr(t);!dn(n,s);)r.push(oe(n)),n=Kt(n,1);return r}var aM=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=Jd(s),i=rr(n.props.date,s)&&Ze(n.props.date,s);return P.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":i?"true":void 0},i?P.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",me(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:iM(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=Ue({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return P.createElement(_c,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),lM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Nr(r.props.minDate),s=Nr(r.props.maxDate),o=[];!dn(n,s);){var i=Jd(n);o.push(P.createElement("option",{key:i,value:i},me(n,r.props.dateFormat,r.props.locale))),n=Kt(n,1)}return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:Jd(Nr(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=me(r.props.date,r.props.dateFormat,r.props.locale);return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return P.createElement(aM,re({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=oe(n);rr(r.props.date,s)&&Ze(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),cM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;r.list&&(r.list.scrollTop=(o=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&o!==void 0?o:0)})},r.handleClick=function(n){var s,o;(r.props.minTime||r.props.maxTime)&&Tg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Pg(n,r.props)||(o=(s=r.props).onChange)===null||o===void 0||o.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&JI(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&Tg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Pg(n,r.props)},r.liClasses=function(n){var s,o=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Dr(n)*3600+Cr(n)*60+on(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},r.handleOnKeyDown=function(n,s){var o,i;n.key===H.Space&&(n.preventDefault(),n.key=H.Enter),(n.key===H.ArrowUp||n.key===H.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===H.ArrowDown||n.key===H.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===H.Enter&&r.handleClick(s),(i=(o=r.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},r.renderTimes=function(){for(var n,s=[],o=typeof r.props.format=="string"?r.props.format:"p",i=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,a=r.props.selected||r.props.openToDate||oe(),l=Fa(a),u=r.props.injectTimes&&r.props.injectTimes.sort(function(y,x){return y.getTime()-x.getTime()}),d=60*QI(a),f=d/i,h=0;h<f;h++){var p=Vd(l,h*i);if(s.push(p),u){var g=KI(l,p,h,i,u);s=s.concat(g)}}var b=s.reduce(function(y,x){return x.getTime()<=a.getTime()?x:y},s[0]);return s.map(function(y){return P.createElement("li",{key:y.valueOf(),onClick:r.handleClick.bind(r,y),className:r.liClasses(y),ref:function(x){y===b&&(r.centerLi=x)},onKeyDown:function(x){r.handleOnKeyDown(x,y)},tabIndex:y===b?0:-1,role:"option","aria-selected":r.isSelectedTime(y)?"true":void 0,"aria-disabled":r.isDisabledTime(y)?"true":void 0},me(y,o,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?P.createElement(P.Fragment,null):P.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},P.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return P.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),P.createElement("div",{className:"react-datepicker__time"},P.createElement("div",{className:"react-datepicker__time-box"},P.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){r.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),Wg=3,uM=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=ir([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Et(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Hh(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var i,a;(a=(i=n.YEAR_REFS[s])===null||i===void 0?void 0:i.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var i,a,l,u,d=n.props,f=d.date,h=d.yearItemNumber;if(!(f===void 0||h===void 0)){var p=Gr(f,h).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,o),s-p<0?n.updateFocusOnPaginate(h-(p-s)):s-p>=h?n.updateFocusOnPaginate(Math.abs(h-(s-p))):(u=(l=n.YEAR_REFS[s-p])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus())}},n.isSameDay=function(s,o){return te(s,o)},n.isCurrentYear=function(s){return s===J(oe())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&rr(tr(oe(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&rr(tr(oe(),s),n.props.endDate)},n.isInRange=function(s){return pa(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,i=o.selectsStart,a=o.selectsEnd,l=o.selectsRange,u=o.startDate,d=o.endDate;return!(i||a||l)||!n.selectingDate()?!1:i&&d?pa(s,n.selectingDate(),d):a&&u||l&&u&&!d?pa(s,u,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,a=i.startDate,l=i.selectsStart,u=tr(oe(),s);return l?rr(u,(o=n.selectingDate())!==null&&o!==void 0?o:null):rr(u,a??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,a=i.endDate,l=i.selectsEnd,u=i.selectsRange,d=tr(oe(),s);return l||u?rr(d,(o=n.selectingDate())!==null&&o!==void 0?o:null):rr(d,a??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var o=n.props,i=o.minDate,a=o.maxDate,l=o.excludeDates,u=o.includeDates,d=o.filterDate,f=To(tr(n.props.date,s)),h=(i||a||l||u||d)&&$a(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!te(f,To(n.props.selected))&&te(f,To(n.props.preSelection))&&!h}},n.isSelectedYear=function(s){var o=n.props,i=o.selectsMultiple,a=o.selected,l=o.selectedDates;return i?l==null?void 0:l.some(function(u){return s===J(u)}):!!a&&s===J(a)},n.onYearClick=function(s,o){var i=n.props.date;i!==void 0&&n.handleYearClick(To(tr(i,o)),s)},n.onYearKeyDown=function(s,o){var i,a,l=s.key,u=n.props,d=u.date,f=u.yearItemNumber,h=u.handleOnKeyDown;if(l!==H.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case H.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,n.props.selected);break;case H.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,kr(n.props.preSelection,1));break;case H.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,Ws(n.props.preSelection,1));break;case H.ArrowUp:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var p=Gr(d,f).startPeriod,g=Wg,b=o-g;if(b<p){var y=f%g;o>=p&&o<p+y?g=y:g+=y,b=o-g}n.handleYearNavigation(b,Ws(n.props.preSelection,g));break}case H.ArrowDown:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var x=Gr(d,f).endPeriod,g=Wg,b=o+g;if(b>x){var y=f%g;o<=x&&o>x-y?g=y:g+=y,b=o+g}n.handleYearNavigation(b,kr(n.props.preSelection,g));break}}h&&h(s)},n.getYearClassNames=function(s){var o=n.props,i=o.date,a=o.minDate,l=o.maxDate,u=o.excludeDates,d=o.includeDates,f=o.filterDate,h=o.yearClassName;return Ue("react-datepicker__year-text","react-datepicker__year-".concat(s),i?h==null?void 0:h(tr(i,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(a||l||u||d||f)&&$a(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=J(n.props.preSelection),i=$a(s,n.props);return s===o&&!i?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,o=s.date,i=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(o===void 0)return null;for(var u=Gr(o,i),d=u.startPeriod,f=u.endPeriod,h=function(b){n.push(P.createElement("div",{ref:p.YEAR_REFS[b-d],onClick:function(y){r.onYearClick(y,b)},onKeyDown:function(y){Hb(y)&&(y.preventDefault(),y.key=H.Enter),r.onYearKeyDown(y,b)},tabIndex:Number(p.getYearTabIndex(b)),className:p.getYearClassNames(b),onMouseEnter:p.props.usePointerEvent?void 0:function(y){return a(y,b)},onPointerEnter:p.props.usePointerEvent?function(y){return a(y,b)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(y){return l(y,b)},onPointerLeave:p.props.usePointerEvent?function(y){return l(y,b)}:void 0,key:b,"aria-current":p.isCurrentYear(b)?"date":void 0},p.getYearContent(b)))},p=this,g=d;g<=f;g++)h(g);return P.createElement("div",{className:"react-datepicker__year"},P.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function dM(e,t,r,n){for(var s=[],o=0;o<2*t+1;o++){var i=e+t-o,a=!0;r&&(a=J(r)<=i),n&&a&&(a=J(n)>=i),a&&s.push(i)}return s}var fM=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var a=n.props.year,l=n.state.yearsList.map(function(f){return P.createElement("div",{className:a===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:n.onChange.bind(n,f),"aria-selected":a===f?"true":void 0},a===f?P.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",f)}),u=n.props.minDate?J(n.props.minDate):null,d=n.props.maxDate?J(n.props.maxDate):null;return(!d||!n.state.yearsList.find(function(f){return f===d}))&&l.unshift(P.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!n.state.yearsList.find(function(f){return f===u}))&&l.push(P.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(a){n.props.onChange(a)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(a){var l=n.state.yearsList.map(function(u){return u+a});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,i=s||(o?10:5);return n.state={yearsList:dM(n.props.year,i,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=Ue({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return P.createElement(_c,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),hM=function(e){Fe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?J(r.props.minDate):1900,s=r.props.maxDate?J(r.props.maxDate):2100,o=[],i=n;i<=s;i++)o.push(P.createElement("option",{key:i,value:i},i));return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},P.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return P.createElement(fM,re({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var o;(o=r.onSelect)===null||o===void 0||o.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var o,i;(i=(o=r.props).onSelect)===null||i===void 0||i.call(o,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),pM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],mM=function(e){var t=(e.className||"").split(/\s+/);return pM.some(function(r){return t.indexOf(r)>=0})},gM=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,i;mM(s.target)&&((i=(o=n.props).onDropdownFocus)===null||i===void 0||i.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,i=s.selected,a=s.openToDate,l=Ub(n.props),u=Wb(n.props),d=oe(),f=a||i||o;return f||(l&&zn(d,l)?l:u&&dn(d,u)?u:d)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Kt(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Ln(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,i){n.props.onSelect(s,o,i),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:tr(oe(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,i,a,l;(i=(o=n.props).onYearChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Et(s,n.props))return s;for(var o=Nr(s),i=AI(s),a=X2(i,o),l=null,u=0;u<=a;u++){var d=Vt(o,u);if(!Et(d,n.props)){l=d;break}}return l},n.handleMonthChange=function(s){var o,i,a,l=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(a=(i=n.props).setOpen)===null||a===void 0||a.call(i,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(s){var o,i;(i=(o=n.props).onMonthChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var i=o.date;return{date:tr(i,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var i=o.date;return{date:Dt(i,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var i=o.date;return{date:tr(Dt(i,Ge(s)),J(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=an(s,n.props.locale,n.props.calendarStartDay),i=[];return n.props.showWeekNumbers&&i.push(P.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),i.concat([0,1,2,3,4,5,6].map(function(a){var l=Vt(o,a),u=n.formatWeekday(l,n.props.locale),d=n.props.weekDayClassName?n.props.weekDayClassName(l):void 0;return P.createElement("div",{key:a,"aria-label":me(l,"EEEE",n.props.locale),className:Ue("react-datepicker__day-name",d)},u)}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?FI(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?BI(s,o):$I(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:Ws(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,i;if(!n.props.renderCustomHeader){var a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,d=Ln(n.state.date,u),f;switch(!0){case n.props.showMonthYearPicker:f=Ig(n.state.date,n.props);break;case n.props.showYearPicker:f=zI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:f=HI(n.state.date,n.props);break;default:f=Rg(d,n.props);break}if(!(!((i=n.props.forceShowMonthNavigation)!==null&&i!==void 0?i:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&f||n.props.showTimeSelectOnly)){var h=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],g=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(g=n.decreaseYear),f&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),g=void 0);var b=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,y=n.props,x=y.previousMonthButtonLabel,m=x===void 0?t.defaultProps.previousMonthButtonLabel:x,v=y.previousYearButtonLabel,_=v===void 0?t.defaultProps.previousYearButtonLabel:v,k=n.props,S=k.previousMonthAriaLabel,D=S===void 0?typeof m=="string"?m:"Previous Month":S,N=k.previousYearAriaLabel,E=N===void 0?typeof _=="string"?_:"Previous Year":N;return P.createElement("button",{type:"button",className:p.join(" "),onClick:g,onKeyDown:n.props.handleOnKeyDown,"aria-label":b?E:D},P.createElement("span",{className:h.join(" ")},b?_:m))}}},n.increaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:kr(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.showMonthYearPicker:o=Mg(n.state.date,n.props);break;case n.props.showYearPicker:o=VI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=YI(n.state.date,n.props);break;default:o=Og(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var i=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),l=void 0);var u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,d=n.props,f=d.nextMonthButtonLabel,h=f===void 0?t.defaultProps.nextMonthButtonLabel:f,p=d.nextYearButtonLabel,g=p===void 0?t.defaultProps.nextYearButtonLabel:p,b=n.props,y=b.nextMonthAriaLabel,x=y===void 0?typeof h=="string"?h:"Next Month":y,m=b.nextYearAriaLabel,v=m===void 0?typeof g=="string"?g:"Next Year":m;return P.createElement("button",{type:"button",className:i.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":u?v:x},P.createElement("span",{className:a.join(" ")},u?g:h))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),P.createElement("h2",{className:o.join(" ")},me(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return P.createElement(hM,re({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:J(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return P.createElement(oM,re({},t.defaultProps,n.props,{month:Ge(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return P.createElement(lM,re({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(Ng(),s),n.props.setPreSelection&&n.props.setPreSelection(Ng())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return P.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var o=s.monthDate,i=s.i;return P.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),P.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(i!==0),n.renderMonthYearDropdown(i!==0),n.renderYearDropdown(i!==0)),P.createElement("div",{className:"react-datepicker__day-names"},n.header(o)))},n.renderCustomHeader=function(s){var o,i,a=s.monthDate,l=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var u=Rg(n.state.date,n.props),d=Og(n.state.date,n.props),f=Ig(n.state.date,n.props),h=Mg(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return P.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(i=(o=n.props).renderCustomHeader)===null||i===void 0?void 0:i.call(o,re(re({},n.state),{customHeaderCount:l,monthDate:a,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:d,prevYearButtonDisabled:f,nextYearButtonDisabled:h})),p&&P.createElement("div",{className:"react-datepicker__day-names"},n.header(a)))},n.renderYearHeader=function(s){var o=s.monthDate,i=n.props,a=i.showYearPicker,l=i.yearItemNumber,u=l===void 0?t.defaultProps.yearItemNumber:l,d=Gr(o,u),f=d.startPeriod,h=d.endPeriod;return P.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(f," - ").concat(h):J(o))},n.renderHeader=function(s){var o=s.monthDate,i=s.i,a=i===void 0?0:i,l={monthDate:o,i:a};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var i=[],a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?kr(n.state.date,l):Ln(n.state.date,l),d=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,f=0;f<a;++f){var h=f-d+l,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?kr(u,h):Kt(u,h),g="month-".concat(f),b=f<a-1,y=f>0;i.push(P.createElement("div",{key:g,ref:function(x){n.monthContainer=x??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:f}),P.createElement(nM,re({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:f,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:y}))))}return i}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return P.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),P.createElement(uM,re({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return P.createElement(cM,re({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&kc(s)&&!!n.props.selected,i=o?"".concat(Ag(s.getHours()),":").concat(Ag(s.getMinutes())):"";if(n.props.showTimeInput)return P.createElement(XI,re({},t.defaultProps,n.props,{date:s,timeString:i,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=Gr(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),i=o.startPeriod,a=o.endPeriod,l;return n.props.showYearPicker?l="".concat(i," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=J(n.state.date):l="".concat(Wh(Ge(n.state.date),n.props.locale)," ").concat(J(n.state.date)),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return P.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Li}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!te(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Ze(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!te(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||PI;return P.createElement(_c,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},P.createElement("div",{style:{display:"contents"},ref:this.containerRef},P.createElement(r,{className:Ue("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),vM=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return P.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(P.isValidElement(t)){var i=t;return P.cloneElement(i,{className:"".concat(i.props.className||""," ").concat(o," ").concat(n),onClick:function(a){typeof i.props.onClick=="function"&&i.props.onClick(a),typeof s=="function"&&s(a)}})}return P.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},P.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Yb=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return cy.createPortal(this.props.children,this.el)},t}(w.Component),yM="[tabindex], a, button, input, select, textarea",xM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},zb=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(yM),1,-1).filter(xM)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?P.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},P.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,P.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function bM(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,o=w.useRef(null),i=jI(re({open:!s,whileElementsMounted:aI,placement:r.popperPlacement,middleware:ir([gI({padding:15}),mI(10),vI({element:o})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),a=re(re({},r),{hidePopper:s,popperProps:re(re({},i),{arrowRef:o})});return P.createElement(e,re({},a))};return t}var wM=function(e){Fe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,o=r.hidePopper,i=o===void 0?t.defaultProps.hidePopper:o,a=r.popperComponent,l=r.targetComponent,u=r.enableTabLoop,d=r.popperOnKeyDown,f=r.portalId,h=r.portalHost,p=r.popperProps,g=r.showArrow,b=void 0;if(!i){var y=Ue("react-datepicker-popper",n);b=P.createElement(zb,{enableTabLoop:u},P.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:y,"data-placement":p.placement,onKeyDown:d},a,g&&P.createElement(_I,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(b=w.createElement(this.props.popperContainer,{},b)),f&&!i&&(b=P.createElement(Yb,{portalId:f,portalHost:h},b));var x=Ue("react-datepicker-wrapper",s);return P.createElement(P.Fragment,null,P.createElement("div",{ref:p.refs.setReference,className:x},l),b)},t}(w.Component),_M=bM(wM),Hg="react-datepicker-ignore-onclickoutside";function kM(e,t){return e&&t?Ge(e)!==Ge(t)||J(e)!==J(t):e!==t}var Eu="Date input not valid.",SM=function(e){Fe(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:oe()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,i){var a=new Date(i.date);return kc(a)?ir(ir([],o,!0),[re(re({},i),{date:a})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),i=Ub(n.props),a=Wb(n.props),l=i&&zn(o,Fa(i))?i:a&&dn(o,Eg(a))?a:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:l,highlightDates:Lg(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(re(re({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(re(re({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:ju},function(){s||n.setState(function(i){return{focused:o?i.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Sr(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,i,a=n.state.wasHidden,l=a?n.state.open:!0;a&&n.resetHiddenStatus(),n.state.preventFocus||((i=(o=n.props).onFocus)===null||i===void 0||i.call(o,s),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var o,i;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((i=(o=n.props).onBlur)===null||i===void 0||i.call(o,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,i;n.props.inline||n.setOpen(!1),(i=(o=n.props).onClickOutside)===null||i===void 0||i.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,i,a,l,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var f=u[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,u),!f||typeof f.isDefaultPrevented!="function"||f.isDefaultPrevented()))){n.setState({inputValue:(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:null,lastPreSelectChange:DM});var h=n.props,p=h.selectsRange,g=h.startDate,b=h.endDate,y=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,x=(o=n.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,m=(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:"";if(p){var v=m.split(y.includes("-")?Fb:"-",2).map(function(I){return I.trim()}),_=v[0],k=v[1],S=Du(_??"",y,n.props.locale,x),D=Du(k??"",y,n.props.locale,x),N=(g==null?void 0:g.getTime())!==(S==null?void 0:S.getTime()),E=(b==null?void 0:b.getTime())!==(D==null?void 0:D.getTime());if(!N&&!E||S&&Et(S,n.props)||D&&Et(D,n.props))return;(a=(i=n.props).onChange)===null||a===void 0||a.call(i,[S,D],f)}else{var j=Du(m,y,n.props.locale,x,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(j||!m)&&n.setSelected(j,f,!0)}}},n.handleSelect=function(s,o,i){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(o),n.setSelected(s,o,!1,i),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var a=n.props,l=a.startDate,u=a.endDate;l&&!u&&(n.props.swapRange||!Bg(s,l))&&n.setOpen(!1)}}},n.setSelected=function(s,o,i,a){var l,u,d=s;if(n.props.showYearPicker){if(d!==null&&$a(J(d),n.props))return}else if(n.props.showMonthYearPicker){if(d!==null&&Bb(d,n.props))return}else if(d!==null&&Et(d,n.props))return;var f=n.props,h=f.onChange,p=f.selectsRange,g=f.startDate,b=f.endDate,y=f.selectsMultiple,x=f.selectedDates,m=f.minTime,v=f.swapRange;if(!Rn(n.props.selected,d)||n.props.allowSameDay||p||y)if(d!==null&&(n.props.selected&&(!i||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(d=Cu(d,{hour:Dr(n.props.selected),minute:Cr(n.props.selected),second:on(n.props.selected)})),!i&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&m&&(d=Cu(d,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),n.props.inline||n.setState({preSelection:d}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),p){var _=!g&&!b,k=g&&!b,S=g&&b;_?h==null||h([d,null],o):k&&(d===null?h==null||h([null,null],o):Bg(d,g)?v?h==null||h([d,g],o):h==null||h([d,null],o):h==null||h([g,d],o)),S&&(h==null||h([d,null],o))}else if(y){if(d!==null)if(!(x!=null&&x.length))h==null||h([d],o);else{var D=x.some(function(E){return te(E,d)});if(D){var N=x.filter(function(E){return!te(E,d)});h==null||h(N,o)}else h==null||h(ir(ir([],x,!0),[d],!1),o)}}else h==null||h(d,o);i||((u=(l=n.props).onSelect)===null||u===void 0||u.call(l,d,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=Sr(n.props.minDate),i=Sr(n.props.maxDate),a=!0;if(s){var l=Fa(s);if(o&&i)a=Ro(s,n.props.minDate,n.props.maxDate);else if(o){var u=Fa(n.props.minDate);a=dn(s,u)||Rn(l,u)}else if(i){var d=Eg(n.props.maxDate);a=zn(s,d)||Rn(l,d)}}a&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,i;if(!(n.props.selectsRange||n.props.selectsMultiple)){var a=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?s:Cu(a,{hour:Dr(s),minute:Cr(s)});n.setState({preSelection:l}),(i=(o=n.props).onChange)===null||i===void 0||i.call(o,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,i,a,l,u,d;(i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s);var f=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(f===H.ArrowDown||f===H.ArrowUp||f===H.Enter)&&((a=n.onInputClick)===null||a===void 0||a.call(n));return}if(n.state.open){if(f===H.ArrowDown||f===H.ArrowUp){s.preventDefault();var h=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(h);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var g=oe(n.state.preSelection);f===H.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===ju?(n.handleSelect(g,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(g)):n.setOpen(!1)):f===H.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):f===H.Tab&&n.setOpen(!1),n.inputOk()||(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Eu})}},n.onPortalKeyDown=function(s){var o=s.key;o===H.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,i,a,l,u,d,f=n.props,h=f.minDate,p=f.maxDate,g=f.disabledKeyboardNavigation,b=f.showWeekPicker,y=f.shouldCloseOnSelect,x=f.locale,m=f.calendarStartDay,v=f.adjustDateOnChange,_=f.inline;if((i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s),!g){var k=s.key,S=s.shiftKey,D=oe(n.state.preSelection),N=function(T,O){var B=O;switch(T){case H.ArrowRight:B=b?Sl(O,1):Vt(O,1);break;case H.ArrowLeft:B=b?mg(O,1):KR(O,1);break;case H.ArrowUp:B=mg(O,1);break;case H.ArrowDown:B=Sl(O,1);break;case H.PageUp:B=S?Ws(O,1):Ln(O,1);break;case H.PageDown:B=S?kr(O,1):Kt(O,1);break;case H.Home:B=an(O,x,m);break;case H.End:B=LI(O);break}return B},E=function(T,O){for(var B=40,C=T,R=!1,M=0,W=N(T,O);!R;){if(M>=B){W=O;break}h&&W<h&&(C=H.ArrowRight,W=Et(h,n.props)?N(C,W):h),p&&W>p&&(C=H.ArrowLeft,W=Et(p,n.props)?N(C,W):p),Et(W,n.props)?((C===H.PageUp||C===H.Home)&&(C=H.ArrowRight),(C===H.PageDown||C===H.End)&&(C=H.ArrowLeft),W=N(C,W)):R=!0,M++}return W};if(k===H.Enter){s.preventDefault(),n.handleSelect(D,s),!y&&n.setPreSelection(D);return}else if(k===H.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(a=n.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:Eu});return}var j=null;switch(k){case H.ArrowLeft:case H.ArrowRight:case H.ArrowUp:case H.ArrowDown:case H.PageUp:case H.PageDown:case H.Home:case H.End:j=E(k,D);break}if(!j){(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Eu});return}if(s.preventDefault(),n.setState({lastPreSelectChange:ju}),v&&n.setSelected(j),n.setPreSelection(j),_){var I=Ge(D),U=Ge(j),A=J(D),$=J(j);I!==U||A!==$?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===H.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,i=o.selectsRange,a=o.onChange;i?a==null||a([null,null],s):a==null||a(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:P.createElement(gM,re({showMonthYearDropdown:void 0,ref:function(i){n.calendar=i}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:GI(n.modifyHolidays()),outsideClickIgnoreClass:Hg,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,o=s.dateFormat,i=o===void 0?t.defaultProps.dateFormat:o,a=s.locale,l=n.props.showTimeInput||n.props.showTimeSelect,u=l?"PPPPp":"PPPP",d;return n.props.selectsRange?d="Selected start date: ".concat(St(n.props.startDate,{dateFormat:u,locale:a}),". ").concat(n.props.endDate?"End date: "+St(n.props.endDate,{dateFormat:u,locale:a}):""):n.props.showTimeSelectOnly?d="Selected time: ".concat(St(n.props.selected,{dateFormat:i,locale:a})):n.props.showYearPicker?d="Selected year: ".concat(St(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?d="Selected month: ".concat(St(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?d="Selected quarter: ".concat(St(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):d="Selected date: ".concat(St(n.props.selected,{dateFormat:u,locale:a})),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},n.renderDateInput=function(){var s,o,i,a=Ue(n.props.className,(s={},s[Hg]=n.state.open,s)),l=n.props.customInput||P.createElement("input",{type:"text"}),u=n.props.customInputRef||"ref",d=n.props,f=d.dateFormat,h=f===void 0?t.defaultProps.dateFormat:f,p=d.locale,g=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?RI(n.props.startDate,n.props.endDate,{dateFormat:h,locale:p}):n.props.selectsMultiple?OI((i=n.props.selectedDates)!==null&&i!==void 0?i:[],{dateFormat:h,locale:p}):St(n.props.selected,{dateFormat:h,locale:p});return w.cloneElement(l,(o={},o[u]=function(b){n.input=b},o.value=g,o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Ue(l.props.className,a),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,i=s.disabled,a=s.selected,l=s.startDate,u=s.endDate,d=s.clearButtonTitle,f=s.clearButtonClassName,h=f===void 0?"":f,p=s.ariaLabelClose,g=p===void 0?"Close":p,b=s.selectedDates,y=s.readOnly;return o&&!y&&(a!=null||l!=null||u!=null||b!=null&&b.length)?P.createElement("button",{type:"button",className:Ue("react-datepicker__close-icon",h,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":g,onClick:n.onClearClick,title:d,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Li,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,o,i,a;r.inline&&kM(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Lg(this.props.highlightDates)}),!n.focused&&!Rn(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((a=(i=this.props).onCalendarClose)===null||a===void 0||a.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,o=r.calendarIconClassname,i=r.calendarIconClassName,a=r.toggleCalendarOnIconClick,l=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),P.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&P.createElement(vM,re({icon:s,className:Ue(i,!i&&o,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?P.createElement(zb,{enableTabLoop:this.props.enableTabLoop},P.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=P.createElement(Yb,re({portalId:this.props.portalId},this.props),n)),P.createElement("div",null,this.renderInputContainer(),n)}return P.createElement(_M,re({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),DM="input",ju="navigate";function CM({value:e,onChange:t,label:r="Site Submit"}){const[n,s]=w.useState(""),[o,i]=w.useState([]),[a,l]=w.useState(null),[u,d]=w.useState(!1),f=w.useRef(null),h=w.useRef(null);w.useEffect(()=>{e?z.from("site_submit").select("*").eq("id",e).single().then(({data:y})=>{y&&(l(y),s(y.code||""))}):(l(null),s(""))},[e]),w.useEffect(()=>{const x=setTimeout(async()=>{if(n.length===0){i([]);return}const{data:m}=await z.from("site_submit").select("*").or(`site_submit_name.ilike.%${n}%,code.ilike.%${n}%`).limit(10).order("site_submit_name");m&&i(m)},300);return()=>clearTimeout(x)},[n]),w.useEffect(()=>{const y=x=>{h.current&&!h.current.contains(x.target)&&f.current&&!f.current.contains(x.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const p=y=>{l(y),s(y.code||""),t(y.id),d(!1),i([])},g=y=>{s(y.target.value),d(!0),y.target.value===""&&(t(null),l(null))},b=()=>{f.current&&f.current.select(),n.length>0&&d(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:f,type:"text",value:n,onChange:g,onFocus:b,placeholder:"Search by site submit name...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),u&&o.length>0&&c.jsx("div",{ref:h,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:o.map(y=>c.jsxs("div",{onClick:()=>p(y),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:y.code}),y.site_submit_name&&c.jsx("div",{className:"text-xs text-gray-500",children:y.site_submit_name})]},y.id))})]}),a&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View site submit:",a.id)},children:"View Site Submit Details →"})})]})}function NM({value:e,onChange:t,propertyId:r,label:n="Property Unit"}){const[s,o]=w.useState(""),[i,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{e?z.from("property_unit").select("*").eq("id",e).single().then(({data:m})=>{m&&(u(m),o(m.property_unit_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const v=setTimeout(async()=>{if(!r){a([]);return}let _=z.from("property_unit").select("*").eq("property_id",r);s.length>0&&(_=_.ilike("property_unit_name",`%${s}%`));const{data:k}=await _.limit(20).order("property_unit_name");k&&a(k)},300);return()=>clearTimeout(v)},[s,r,d]),w.useEffect(()=>{const m=v=>{p.current&&!p.current.contains(v.target)&&h.current&&!h.current.contains(v.target)&&f(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=m=>{u(m),o(m.property_unit_name||""),t(m.id),f(!1)},b=m=>{o(m.target.value),f(!0),m.target.value===""&&(t(null),u(null))},y=()=>{r&&(h.current&&h.current.select(),f(!0))},x=m=>{const v=[];m.sqft&&v.push(`${Number(m.sqft).toLocaleString()} sqft`),m.rent&&v.push(`$${Number(m.rent).toLocaleString()}/mo`);const _=[];return m.inline===!0&&_.push("Inline"),m.end_cap===!0&&_.push("End Cap"),m.patio===!0&&_.push("Patio"),_.length>0&&v.push(_.join(", ")),v.join(" • ")};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:h,type:"text",value:s,onChange:b,onFocus:y,placeholder:r?"Search or select unit...":"Select a property first",disabled:!r,className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),d&&i.length>0&&r&&c.jsx("div",{ref:p,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:i.map(m=>c.jsxs("div",{onClick:()=>g(m),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:m.property_unit_name}),c.jsx("div",{className:"text-xs text-gray-500",children:x(m)})]},m.id))}),d&&i.length===0&&r&&s.length>0&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2 text-sm text-gray-500",children:"No units found for this property"})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property unit:",l.id)},children:"View Property Unit Details →"})})]})}function EM({value:e,onChange:t,label:r="Property"}){const n=Zl(),[s,o]=w.useState(""),[i,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),[h,p]=w.useState(!1),g=w.useRef(null),b=w.useRef(null);w.useEffect(()=>{e?z.from("property").select("*").eq("id",e).single().then(({data:v})=>{v&&(u(v),o(v.property_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const _=setTimeout(async()=>{if(!s||s.trim().length===0){a([]);return}p(!0),console.log("Searching for:",s);const{data:k,error:S}=await z.from("property").select("*").ilike("property_name",`%${s}%`).limit(10).order("property_name");a(k||[]),p(!1)},300);return()=>clearTimeout(_)},[s]),w.useEffect(()=>{const v=_=>{b.current&&!b.current.contains(_.target)&&g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const y=v=>{u(v),o(v.property_name||""),t(v.id),f(!1),a([])},x=v=>{const _=v.target.value;o(_),_.length>0&&f(!0),l&&_!==l.property_name&&(u(null),t(null)),_===""&&(t(null),u(null),a([]),f(!1))},m=()=>{g.current&&g.current.select(),i.length>0&&f(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:g,type:"text",value:s,onChange:x,onFocus:m,placeholder:"Type to search properties...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),d&&c.jsx("div",{ref:b,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:h?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}):i.length>0?i.map(v=>{var _,k,S,D;return c.jsxs("div",{onClick:()=>y(v),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:v.property_name}),(((_=v.property_type)==null?void 0:_.label)||((k=v.property_stage)==null?void 0:k.label))&&c.jsx("div",{className:"text-xs text-gray-500",children:[(S=v.property_type)==null?void 0:S.label,(D=v.property_stage)==null?void 0:D.label].filter(Boolean).join(" • ")})]},v.id)}):s.length>0?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No properties found"}):null})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>{n(`/property/${l.id}`)},children:"View Property Details →"})})]})}const jM={"Negotiating LOI":50,"At Lease/PSA":75,"Under Contract / Contingent":85,Booked:90,"Executed Payable":95,"Closed Paid":100,Lost:0};function PM({deal:e,onSave:t}){const[r,n]=w.useState(e),[s,o]=w.useState(!1),[i,a]=w.useState(null),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(""),[g,b]=w.useState(""),[y,x]=w.useState([]),[m,v]=w.useState({}),[_,k]=w.useState(!1),[S,D]=w.useState(!1),N=w.useRef(null),E=w.useRef(!0);w.useEffect(()=>{n(e),v({}),D(!1),N.current=e.stage_id??null,E.current=!0},[e]),w.useEffect(()=>{z.from("deal_stage").select("id, label").then(({data:C})=>C&&u(C)),z.from("deal_team").select("id, label").then(({data:C})=>C&&f(C)),e.updated_by_id&&z.from("user").select("name").eq("id",e.updated_by_id).maybeSingle().then(({data:C})=>(C==null?void 0:C.name)&&p(C.name)),e.client_id?z.from("client").select("client_name").eq("id",e.client_id).maybeSingle().then(({data:C})=>(C==null?void 0:C.client_name)&&b(C.client_name)):b("")},[e.client_id,e.property_id]),w.useEffect(()=>{const R=setTimeout(async()=>{const M=g.trim();if(!M)return x([]);const{data:W}=await z.from("client").select("id, client_name").ilike("client_name",`%${M}%`).order("client_name",{ascending:!0}).limit(5);W&&x(W.map(K=>({id:K.id,label:K.client_name})))},150);return()=>clearTimeout(R)},[g]);const j=(C,R)=>{C==="probability"&&D(!0);const M={...r,[C]:R};if(n(M),["deal_name","deal_value","commission_percent"].includes(C)){const W=A(C,R);v(K=>{const Ce={...K},Te=W[C];return Te?Ce[C]=Te:delete Ce[C],Ce})}if(C==="commission_percent"){const W=M.flat_fee_override??(M.deal_value??0)*((R??0)/100);(async()=>{const{data:Ce,error:Te}=await z.from("deal").update({commission_percent:R,fee:W}).eq("id",r.id).select().single();Te?console.error("Error auto-saving commission:",Te):Ce&&t(Ce)})()}},I=r.flat_fee_override??(r.deal_value??0)*((r.commission_percent??0)/100),U=()=>{var C;return(C=l.find(R=>R.id===r.stage_id))==null?void 0:C.label};w.useEffect(()=>{if(!r.stage_id||l.length===0)return;const C=U();if(!C)return;const R=jM[C];if(E.current){if(E.current=!1,r.probability==null&&typeof R=="number"){n(K=>({...K,probability:R})),k(!0);const W=setTimeout(()=>k(!1),800);return()=>clearTimeout(W)}return}if(N.current!==r.stage_id&&typeof R=="number"){n(K=>({...K,probability:R})),D(!1),k(!0);const W=setTimeout(()=>k(!1),800);return N.current=r.stage_id,()=>clearTimeout(W)}N.current=r.stage_id},[r.stage_id,l]);const A=(C,R)=>{const M={};if(C==="deal_name"&&(!R||String(R).trim().length===0)&&(M.deal_name="Opportunity Name is required."),C==="deal_value"&&(R===null||R===""||isNaN(Number(R))?M.deal_value="Enter a number.":Number(R)<0&&(M.deal_value="Must be ≥ 0.")),C==="commission_percent"){const W=Number(R);R===null||R===""||isNaN(W)?M.commission_percent="Enter a percent.":(W<0||W>100)&&(M.commission_percent="0–100 only.")}return M},$=C=>{const R={};return Object.assign(R,A("deal_name",C.deal_name)),Object.assign(R,A("deal_value",C.deal_value)),Object.assign(R,A("commission_percent",C.commission_percent)),R},T=async()=>{const C=$(r);if(v(C),Object.keys(C).length>0)return;o(!0);const R={deal_name:r.deal_name,client_id:r.client_id,property_id:r.property_id,property_unit_id:r.property_unit_id,site_submit_id:r.site_submit_id,deal_value:r.deal_value,commission_percent:r.commission_percent,flat_fee_override:r.flat_fee_override,fee:I,target_close_date:r.target_close_date,loi_signed_date:r.loi_signed_date,closed_date:r.closed_date,probability:r.probability,deal_team_id:r.deal_team_id,stage_id:r.stage_id,updated_at:new Date().toISOString()},{data:M,error:W}=await z.from("deal").update(R).eq("id",r.id).select().single();o(!1),W?alert("Error saving: "+W.message):M&&t(M)},O=U(),B=O==="Closed Paid";return c.jsxs("div",{className:"relative",children:[c.jsx(va,{title:"Deal Context",help:"Name the opportunity, choose the client, property, and deal team.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(TM,{label:"Opportunity Name",value:r.deal_name,onChange:C=>j("deal_name",C)}),c.jsx(RM,{label:"Client",search:g,setSearch:b,suggestions:y,onSelect:(C,R)=>{j("client_id",C),b(R),x([])}}),c.jsx(EM,{value:r.property_id,onChange:C=>j("property_id",C),label:"Property"}),c.jsx(NM,{value:r.property_unit_id,onChange:C=>j("property_unit_id",C),propertyId:r.property_id,label:"Property Unit"}),c.jsx(CM,{value:r.site_submit_id,onChange:C=>j("site_submit_id",C),label:"Site Submit"}),c.jsx(Yg,{label:"Deal Team",value:r.deal_team_id,onChange:C=>j("deal_team_id",C),options:d}),m.deal_name&&c.jsx(Pu,{msg:m.deal_name,className:"col-span-2"})]})}),c.jsx(va,{title:"Financials",help:"Set value and commission. Fee auto-calculates unless a flat fee is set.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(ca,{label:"Deal Value",value:r.deal_value,onChange:C=>j("deal_value",C===""?null:parseFloat(C)),format:C=>bu(C,2),editingField:i,setEditingField:a,fieldKey:"deal_value"}),m.deal_value&&c.jsx(Pu,{msg:m.deal_value}),c.jsx(ca,{label:"Commission %",value:r.commission_percent,onChange:C=>j("commission_percent",C===""?null:parseFloat(C)),format:C=>H2(C,2),editingField:i,setEditingField:a,fieldKey:"commission_percent"}),m.commission_percent&&c.jsx(Pu,{msg:m.commission_percent}),c.jsx(ca,{label:"Flat Fee Override",value:r.flat_fee_override,onChange:C=>j("flat_fee_override",C===""?null:parseFloat(C)),format:C=>C===null?"":bu(C,2),editingField:i,setEditingField:a,fieldKey:"flat_fee_override"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Calculated Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:isNaN(I)?"":bu(I,2)})]})]})}),c.jsx(va,{title:"Stage & Probability",help:"Choosing a stage will set a default probability. You can override it.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Yg,{label:"Stage",value:r.stage_id,onChange:C=>j("stage_id",C),options:l}),c.jsx("div",{className:"rounded transition-colors duration-700 "+(_?"bg-yellow-50":"bg-transparent"),children:c.jsx(ca,{label:"Probability %",value:r.probability,onChange:C=>j("probability",C===""?null:parseFloat(C)),format:C=>Y2(C),editingField:i,setEditingField:a,fieldKey:"probability"})})]})}),c.jsx(va,{title:"Timeline",help:"Target and actual dates. Closed Date enabled only at Closed Paid.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Tu,{label:"Target Close Date",value:r.target_close_date,onChange:C=>j("target_close_date",C)}),c.jsx(Tu,{label:"LOI Signed Date",value:r.loi_signed_date,onChange:C=>j("loi_signed_date",C)}),c.jsx(Tu,{label:"Closed Date",value:r.closed_date,onChange:C=>j("closed_date",C),disabled:!B,tooltip:B?void 0:"Set Stage to 'Closed Paid' to enable"})]})}),c.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t mt-6 p-3 flex items-center justify-between shadow-sm",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:r.updated_at?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Last Updated by"}),c.jsx("span",{className:"font-medium",children:h||"Unknown"}),c.jsxs("span",{children:[new Date(r.updated_at).toLocaleDateString()," ",new Date(r.updated_at).toLocaleTimeString()]})]}):c.jsx("span",{children:"Not yet saved"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xs text-gray-500",children:O?`Stage: ${O}`:"No stage selected"}),c.jsx("button",{onClick:T,disabled:s||Object.keys(m).length>0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:s?"Saving...":"Save Deal"})]})]})]})}function va({title:e,help:t,children:r}){return c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]})}function Pu({msg:e,className:t=""}){return c.jsx("p",{className:"text-xs text-red-600 mt-1 "+t,children:e})}function TM({label:e,value:t,onChange:r,type:n="text",className:s=""}){return c.jsxs("div",{className:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{type:n,value:t??"",onChange:o=>r(o.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})}function Tu({label:e,value:t,onChange:r,disabled:n,tooltip:s}){const o=t?kb(t):null;return c.jsxs("div",{title:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx(SM,{selected:o,onChange:i=>r(i?Qd(i,"yyyy-MM-dd"):null),className:`mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${n?"bg-gray-100 cursor-not-allowed":""}`,dateFormat:"MM/dd/yyyy",isClearable:!0,disabled:n})]})}function Yg({label:e,value:t,onChange:r,options:n}){return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsxs("select",{value:t??"",onChange:s=>r(s.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"",children:"-- Select --"}),n.map(s=>c.jsx("option",{value:s.id,children:s.label},s.id))]})]})}function RM({label:e,search:t,setSearch:r,suggestions:n,onSelect:s}){const o=w.useRef(null),i=()=>{o.current&&o.current.select()};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{ref:o,type:"text",value:t,onChange:a=>r(a.target.value),onFocus:i,placeholder:`Search ${e.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),n.filter(a=>a.label!==t).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:n.filter(a=>a.label!==t).map(a=>c.jsx("li",{onClick:()=>s(a.id,a.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:a.label},a.id))})]})}const Vb=w.createContext(null),qb=()=>{const e=w.useContext(Vb);if(!e)throw new Error("usePanelManager must be used within a FloatingPanelManager");return e},OM=({children:e})=>{const[t,r]=w.useState(null),n=i=>{r(i)},s=()=>{r(null)},o=i=>{t===i?s():n(i)};return c.jsx(Vb.Provider,{value:{activePanel:t,openPanel:n,closePanel:s,togglePanel:o},children:e})},Do=({type:e,icon:t,count:r,label:n,position:s})=>{const{activePanel:o,togglePanel:i}=qb(),a=o===e;return c.jsxs("div",{className:"relative group",children:[c.jsxs("button",{onClick:()=>i(e),className:`
          relative flex items-center justify-center w-10 h-10 rounded-full shadow-md
          transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg
          backdrop-blur-sm border
          ${a?"bg-blue-600 text-white border-blue-500 shadow-blue-200":"bg-white/90 text-gray-600 hover:bg-white border-gray-200 hover:text-gray-800"}
        `,title:n,children:[c.jsx("span",{className:"text-sm",children:t}),r!==void 0&&r>0&&c.jsx("span",{className:`
            absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full
            border-2 border-white
            ${a?"bg-white text-blue-600":"bg-red-500 text-white"}
          `,children:r>99?"99+":r})]}),c.jsxs("div",{className:"absolute right-full mr-3 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[n,r!==void 0&&c.jsxs("span",{className:"ml-1 text-gray-300",children:["(",r,")"]}),c.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]})},IM=({children:e,contactCount:t=0,notesCount:r=0,filesCount:n=0,activityCount:s=0,paymentsCount:o=0})=>c.jsxs("div",{className:"relative",children:[e,c.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 space-y-3",style:{zIndex:50},children:[c.jsx(Do,{type:"contacts",icon:"👥",count:t,label:"Contact Roles",position:0}),c.jsx(Do,{type:"notes",icon:"📝",count:r,label:"Notes",position:1}),c.jsx(Do,{type:"files",icon:"📎",count:n,label:"Files",position:2}),c.jsx(Do,{type:"activity",icon:"📈",count:s,label:"Activity",position:3}),c.jsx(Do,{type:"payments",icon:"💰",count:o,label:"Payments",position:4})]})]}),Gb=e=>{const[t,r]=w.useState([]),[n,s]=w.useState(!0),[o,i]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!e){r([]),s(!1);return}try{s(!0),i(null);const{data:l,error:u}=await z.from("deal_contact").select("id, contact_id, role_id, primary_contact").eq("deal_id",e);if(u)throw u;if(!l||l.length===0){r([]),s(!1);return}const d=[...new Set(l.map(v=>v.contact_id).filter(Boolean))],f=[...new Set(l.map(v=>v.role_id).filter(Boolean))],{data:h,error:p}=await z.from("contact").select("id, first_name, last_name, email, phone, mobile_phone").in("id",d);if(p)throw p;const{data:g,error:b}=await z.from("contact_role").select("role_id, label").in("role_id",f);if(b)throw b;const y=new Map;h==null||h.forEach(v=>{y.set(v.id,v)});const x=new Map;g==null||g.forEach(v=>{x.set(v.role_id,v)});const m=l.map(v=>{const _=y.get(v.contact_id),k=x.get(v.role_id);let S="Unknown Contact";if(_){const D=_.first_name||"",N=_.last_name||"";D&&N?S=`${D} ${N}`:D?S=D:N&&(S=N)}return{id:v.id,contact_name:S,contact_email:(_==null?void 0:_.email)||null,contact_phone:(_==null?void 0:_.phone)||null,contact_mobile:(_==null?void 0:_.mobile_phone)||null,role_label:(k==null?void 0:k.label)||"No Role",primary_contact:v.primary_contact||!1,contact_id:v.contact_id}});m.sort((v,_)=>v.primary_contact&&!_.primary_contact?-1:!v.primary_contact&&_.primary_contact?1:v.role_label.localeCompare(_.role_label)),r(m)}catch(l){console.error("Error fetching deal contacts:",l),i("Failed to load contacts")}finally{s(!1)}})()},[e]),{contacts:t,loading:n,error:o,refetch:()=>{e&&s(!0)}}},MM=({dealId:e})=>{const{activePanel:t,closePanel:r}=qb(),{contacts:n,loading:s,error:o}=Gb(e),i=t==="contacts",a=u=>{const d=u.split(" ");return d.length>=2?`${d[0].charAt(0)}${d[d.length-1].charAt(0)}`.toUpperCase():u.charAt(0).toUpperCase()||"?"},l=(u,d)=>{u&&window.open(`tel:${u}`,"_self")};return i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/10 transition-all duration-300 z-40",onClick:r}),c.jsxs("div",{className:`
        fixed right-0 top-0 h-full w-80 bg-white shadow-2xl border-l border-gray-200
        transform transition-all duration-300 ease-out z-50
        ${i?"translate-x-0":"translate-x-full"}
        flex flex-col
      `,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white shrink-0",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:"👥"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),c.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," contact",n.length!==1?"s":""," on this deal"]})]})]}),c.jsx("button",{onClick:r,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:s?c.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((u,d)=>c.jsx("div",{className:"animate-pulse",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):o?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx("span",{className:"text-red-500 text-lg",children:"⚠️"})}),c.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Contacts"}),c.jsx("p",{className:"text-sm text-gray-500",children:o})]}):n.length===0?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-300 text-2xl",children:"👥"})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Contacts Yet"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add contacts to this deal to see them here"}),c.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Contact"})]}):c.jsx("div",{className:"divide-y divide-gray-50",children:n.map(u=>c.jsx("div",{className:"p-4 hover:bg-gray-25 transition-colors",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white font-medium text-sm",children:a(u.contact_name)})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("button",{className:"text-sm font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate",onClick:()=>{console.log("View contact:",u.contact_id)},children:u.contact_name}),u.primary_contact&&c.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:"Primary"})]}),c.jsx("p",{className:"text-xs font-medium text-blue-600 mb-2",children:u.role_label}),c.jsxs("div",{className:"space-y-1",children:[u.contact_email&&c.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["📧 ",u.contact_email]}),u.contact_phone&&c.jsxs("button",{onClick:()=>l(u.contact_phone,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer",children:["📞 ",u.contact_phone]}),u.contact_mobile&&c.jsxs("button",{onClick:()=>l(u.contact_mobile,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer block",children:["📱 ",u.contact_mobile]})]})]})]})},u.id))})}),c.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 shrink-0",children:c.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[c.jsx("span",{className:"mr-2",children:"+"}),"Add Contact Role"]})})]})]}):null},yr=({label:e,value:t,onChange:r,disabled:n=!1})=>{const[s,o]=w.useState(!1),[i,a]=w.useState(""),l=t?`${t.toFixed(1)}%`:"0.0%",u=()=>{n||(o(!0),a((t==null?void 0:t.toString())||""))},d=()=>{const p=parseFloat(i);r(isNaN(p)?null:p),o(!1)},f=()=>{o(!1),a("")},h=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),d()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),f())};return s?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"number",step:"0.1",value:i,onChange:p=>a(p.target.value),onBlur:d,onKeyDown:h,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",autoFocus:!0})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:u,className:`mt-1 block w-full rounded border-gray-300 shadow-sm px-3 py-2 transition-colors border text-sm ${n?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200"}`,title:n?"Not editable":"Click to edit",children:l})]})},LM=({value:e,onChange:t,label:r="Referral Payee"})=>{const[n,s]=w.useState(""),[o,i]=w.useState([]),a=w.useRef(null);w.useEffect(()=>{(async()=>{if(e){const{data:h}=await z.from("client").select("client_name").eq("id",e).single();h!=null&&h.client_name&&s(h.client_name)}else s("")})()},[e]),w.useEffect(()=>{const h=setTimeout(async()=>{const p=n.trim();if(!p)return i([]);const{data:g}=await z.from("client").select("id, client_name").ilike("client_name",`%${p}%`).order("client_name",{ascending:!0}).limit(5);g&&i(g.map(b=>({id:b.id,label:b.client_name})))},150);return()=>clearTimeout(h)},[n]);const l=()=>{a.current&&a.current.select()},u=(f,h)=>{t(f),s(h),i([])},d=f=>{const h=f.target.value;s(h),h===""&&t(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsx("input",{ref:a,type:"text",value:n,onChange:d,onFocus:l,placeholder:`Search ${r.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),o.filter(f=>f.label!==n).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:o.filter(f=>f.label!==n).map(f=>c.jsx("li",{onClick:()=>u(f.id,f.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:f.label},f.id))})]})},Yh=(e,t=[])=>w.useMemo(()=>{const r=(e==null?void 0:e.fee)||0,n=(e==null?void 0:e.referral_fee_usd)||0,s=(e==null?void 0:e.house_usd)||0,o=r-n-s,i=(e==null?void 0:e.origination_percent)||0,a=(e==null?void 0:e.site_percent)||0,l=(e==null?void 0:e.deal_percent)||0,u=i/100*o,d=a/100*o,f=l/100*o,h=u+d+f,p=t.map(m=>{const v=(m==null?void 0:m.split_origination_percent)||0,_=(m==null?void 0:m.split_site_percent)||0,k=(m==null?void 0:m.split_deal_percent)||0,S=v/100*u,D=_/100*d,N=k/100*f,E=S+D+N;return{...m,calculatedOriginationUSD:S,calculatedSiteUSD:D,calculatedDealUSD:N,calculatedTotalUSD:E}}),g=p.reduce((m,v)=>m+(v.split_origination_percent||0),0),b=p.reduce((m,v)=>m+(v.split_site_percent||0),0),y=p.reduce((m,v)=>m+(v.split_deal_percent||0),0),x=p.reduce((m,v)=>m+v.calculatedTotalUSD,0);return{baseAmounts:{gci:r,referralFeeUsd:n,houseUsd:s,agci:o,originationPercent:i,sitePercent:a,dealPercent:l,originationUSD:u,siteUSD:d,dealUSD:f,totalDealUSD:h},brokerSplits:p,totals:{originationPercent:g,sitePercent:b,dealPercent:y,brokerUSD:x},validation:{isOriginationValid:g<=100,isSiteValid:b<=100,isDealValid:y<=100,areAllValid:g<=100&&b<=100&&y<=100}}},[e,t]),AM=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),FM=({deal:e,onFieldUpdate:t})=>{const{baseAmounts:r}=Yh(e),n=o=>o==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),s=o=>o==null?"0.0%":`${o.toFixed(1)}%`;return c.jsx(AM,{title:"Commission Details",help:"Set commission percentages and amounts. Click any percentage to edit.",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.fee)})]}),c.jsx(yr,{label:"Commission Rate %",value:e.commission_percent,onChange:o=>t("commission_percent",o)}),c.jsx(yr,{label:"Referral Fee %",value:e.referral_fee_percent,onChange:o=>t("referral_fee_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referral Fee $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.referral_fee_usd)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of Payments"}),c.jsx("input",{type:"number",step:"1",min:"1",value:e.number_of_payments||1,onChange:o=>t("number_of_payments",parseInt(o.target.value)||1),className:"mt-1 block w-full rounded border-gray-300 shadow-sm cursor-pointer hover:bg-blue-50 px-3 py-2 transition-colors border border-transparent hover:border-blue-200 text-sm"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(LM,{value:e.referral_payee_client_id,onChange:o=>t("referral_payee_client_id",o),label:"Referral Payee"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.gci)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AGCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.agci)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(yr,{label:"House %",value:e.house_percent,onChange:o=>t("house_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.house_usd)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(yr,{label:"Origination %",value:e.origination_percent,onChange:o=>t("origination_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origination $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.originationUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(yr,{label:"Site %",value:e.site_percent,onChange:o=>t("site_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Site $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.siteUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(yr,{label:"Deal %",value:e.deal_percent,onChange:o=>t("deal_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.dealUSD)})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Broker Split Summary (Origination + Site + Deal)"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Origination:"})," ",s(e.origination_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Site:"})," ",s(e.site_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Deal:"})," ",s(e.deal_percent)]}),c.jsxs("div",{className:"font-semibold",children:[c.jsx("span",{className:"text-blue-700",children:"Total:"})," ",s((e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0))]})]}),c.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"House % is separate and not included in the 100% split validation."})]})]})})},Kb=({isOpen:e,onClose:t,onConfirm:r,title:n,itemName:s,message:o})=>e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",c.jsx("strong",{children:s}),"?"]}),o&&c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:o})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})}):null,fr=e=>e==null||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Ru=({value:e,onChange:t,label:r})=>{const[n,s]=w.useState(!1),[o,i]=w.useState(""),a=e?`${e.toFixed(1)}%`:"0.0%",l=()=>{s(!0),i((e==null?void 0:e.toString())||"0")},u=()=>{const h=parseFloat(o);t(isNaN(h)?null:h),s(!1)},d=()=>{s(!1),i("")},f=h=>{h.key==="Enter"?u():h.key==="Escape"&&d()};return n?c.jsx("input",{type:"number",step:"0.1",value:o,onChange:h=>i(h.target.value),onBlur:u,onKeyDown:f,className:"w-16 px-1 py-0.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}):c.jsx("span",{onClick:l,className:"cursor-pointer hover:bg-blue-50 px-1 py-0.5 rounded text-sm",title:`Click to edit ${r||"percentage"}`,children:a})},$M=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,a]=w.useState(!0),[l,u]=w.useState(null),[d,f]=w.useState({isOpen:!1,splitId:"",brokerName:""}),{baseAmounts:h}=Yh(e,r),p=k=>{const S=s.find(D=>D.id===k);return S?S.name:"Unknown Broker"};w.useEffect(()=>{(async()=>{if(e.id)try{a(!0);const{data:S,error:D}=await z.from("commission_split").select("*").eq("deal_id",e.id).order("created_at");if(D)throw D;const{data:N,error:E}=await z.from("broker").select("*").order("name");if(E)throw E;n(S||[]),o(N||[])}catch(S){console.error("Error fetching commission data:",S),u("Failed to load commission splits")}finally{a(!1)}})()},[e.id]);const g=async(k,S,D)=>{console.log("🔧 updateCommissionSplit called:",{splitId:k,field:S,value:D});try{const N=r.find(I=>I.id===k);if(!N)return;const E={...N};S==="split_origination_percent"?(E.split_origination_percent=D||0,E.split_origination_usd=(D||0)/100*h.originationUSD):S==="split_site_percent"?(E.split_site_percent=D||0,E.split_site_usd=(D||0)/100*h.siteUSD):S==="split_deal_percent"&&(E.split_deal_percent=D||0,E.split_deal_usd=(D||0)/100*h.dealUSD),E.split_broker_total=(E.split_origination_usd||0)+(E.split_site_usd||0)+(E.split_deal_usd||0);const{error:j}=await z.from("commission_split").update({split_origination_percent:E.split_origination_percent,split_origination_usd:E.split_origination_usd,split_site_percent:E.split_site_percent,split_site_usd:E.split_site_usd,split_deal_percent:E.split_deal_percent,split_deal_usd:E.split_deal_usd,split_broker_total:E.split_broker_total}).eq("id",k);if(j)throw j;n(I=>I.map(U=>U.id===k?E:U)),console.log("✅ Commission split updated successfully")}catch(N){console.error("Error updating commission split:",N),u("Failed to update commission split")}},b=async k=>{if(e.id)try{if(!s.find(j=>j.id===k))return;const D={deal_id:e.id,broker_id:k,split_origination_percent:0,split_origination_usd:0,split_site_percent:0,split_site_usd:0,split_deal_percent:0,split_deal_usd:0,split_broker_total:0},{data:N,error:E}=await z.from("commission_split").insert(D).select("*").single();if(E)throw E;n([...r,N])}catch(S){console.error("Error adding broker split:",S),u("Failed to add broker split")}},y=async k=>{try{const{error:S}=await z.from("commission_split").delete().eq("id",k);if(S){if(S.code==="23503"&&S.message.includes("payment_split")){u("Cannot delete this broker split because it has related payments. You must delete the payments first, or contact support to safely remove this split.");return}throw S}n(D=>D.filter(N=>N.id!==k)),u(null),f({isOpen:!1,splitId:"",brokerName:""})}catch(S){console.error("Error deleting broker split:",S),u("Failed to delete broker split: "+(S instanceof Error?S.message:"Unknown error")),f({isOpen:!1,splitId:"",brokerName:""})}},x=(k,S)=>{f({isOpen:!0,splitId:k,brokerName:S})},m=()=>{y(d.splitId)},v=()=>{f({isOpen:!1,splitId:"",brokerName:""})},_=s.filter(k=>!r.some(S=>S.broker_id===k.id));return i?c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Broker Commission Splits"}),c.jsx("div",{className:"text-gray-500",children:"Loading..."})]}):c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Broker Commission Splits"}),_.length>0&&c.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:k=>{k.target.value&&(b(k.target.value),k.target.value="")},defaultValue:"",children:[c.jsx("option",{value:"",children:"+ Add Broker"}),_.map(k=>c.jsx("option",{value:k.id,children:k.name},k.id))]})]}),l&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:c.jsx("p",{className:"text-red-600 text-sm",children:l})}),r.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"No broker splits configured for this deal."}),_.length>0&&c.jsx("p",{className:"text-sm mt-2",children:"Use the dropdown above to add brokers."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-left py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Broker"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal $"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total $"}),c.jsx("th",{className:"w-16 text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.map(k=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsx("td",{className:"py-3 px-3 w-48 whitespace-nowrap",children:c.jsx("div",{className:"text-xs text-gray-900 font-medium",children:p(k.broker_id)})}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Ru,{value:k.split_origination_percent,onChange:S=>g(k.id,"split_origination_percent",S),label:"Origination %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fr((k.split_origination_percent||0)/100*h.originationUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Ru,{value:k.split_site_percent,onChange:S=>g(k.id,"split_site_percent",S),label:"Site %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fr((k.split_site_percent||0)/100*h.siteUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Ru,{value:k.split_deal_percent,onChange:S=>g(k.id,"split_deal_percent",S),label:"Deal %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:fr((k.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-medium text-gray-900",children:fr((k.split_origination_percent||0)/100*h.originationUSD+(k.split_site_percent||0)/100*h.siteUSD+(k.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx("button",{onClick:()=>x(k.id,p(k.broker_id)),className:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Delete broker split",children:"×"})})]},k.id))}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[c.jsx("td",{className:"py-3 px-3 text-sm text-gray-900",children:"TOTALS"}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((D,N)=>D+(Number(N.split_origination_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fr(r.reduce((k,S)=>k+(S.split_origination_percent||0)/100*h.originationUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((D,N)=>D+(Number(N.split_site_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fr(r.reduce((k,S)=>k+(S.split_site_percent||0)/100*h.siteUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((D,N)=>D+(Number(N.split_deal_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:fr(r.reduce((k,S)=>k+(S.split_deal_percent||0)/100*h.dealUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-semibold text-blue-600",children:fr(r.reduce((k,S)=>{const D=(S.split_origination_percent||0)/100*h.originationUSD,N=(S.split_site_percent||0)/100*h.siteUSD,E=(S.split_deal_percent||0)/100*h.dealUSD;return k+D+N+E},0))}),c.jsx("td",{className:"py-3 px-3"})]})})]})}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[c.jsxs("p",{children:["• Split percentages are applied to AGCI: ",fr(Number(e.agci||0))]}),c.jsx("p",{children:"• These splits serve as templates for payment generation"}),c.jsx("p",{children:"• Click on percentage values to edit them directly"})]}),c.jsx(Kb,{isOpen:d.isOpen,onClose:v,onConfirm:m,title:"Delete Broker Split",itemName:d.brokerName,message:"This action cannot be undone. If this broker has related payments, the deletion will be blocked."})]})},zg=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),BM=({dealId:e,deal:t,onDealUpdate:r})=>{const[n,s]=w.useState(t),[o,i]=w.useState([]),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState(!0),[p,g]=w.useState(null),[b,y]=w.useState(!1);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{x()},[e]);const x=async()=>{try{h(!0);const{data:E,error:j}=await z.from("commission_split").select("*").eq("deal_id",e);if(j)throw j;const{data:I,error:U}=await z.from("broker").select("*");if(U)throw U;l(I.filter(O=>O.active));const A=E.map(O=>{const B=I.find(C=>C.id===O.broker_id);return{...O,broker_name:B?B.name:"Unknown Broker"}});i(A);const{data:$,error:T}=await z.from("payment").select("*").eq("deal_id",e);if(T)throw T;console.log("🔍 CommissionTab fetchCommissionData - payments found:",{dealId:e,paymentsCount:($==null?void 0:$.length)||0,payments:$==null?void 0:$.map(O=>({id:O.id,sequence:O.payment_sequence,amount:O.payment_amount,estimated_date:O.payment_date_estimated,actual_date:O.payment_date_actual}))}),d($)}catch(E){g(E instanceof Error?E.message:"An error occurred")}finally{h(!1)}},m=E=>{const j=E.deal_value||0,I=E.commission_percent||0,U=E.referral_fee_percent||0,A=E.flat_fee_override??j*(I/100),$=A*(U/100),T=A-$,O=T*((E.house_percent||0)/100),B=T-O,C=B*((E.origination_percent||0)/100),R=B*((E.site_percent||0)/100),M=B*((E.deal_percent||0)/100);return{...E,fee:Math.round(A*100)/100,gci:Math.round(T*100)/100,referral_fee_usd:Math.round($*100)/100,agci:Math.round(B*100)/100,house_usd:Math.round(O*100)/100,origination_usd:Math.round(C*100)/100,site_usd:Math.round(R*100)/100,deal_usd:Math.round(M*100)/100}},v=async(E,j)=>{if(!n)return;const I={...n,[E]:j},U=["commission_percent","referral_fee_percent","house_percent","origination_percent","site_percent","deal_percent"];let A=I;U.includes(E)&&(A=m(I));const $={commission_percent:A.commission_percent,referral_fee_percent:A.referral_fee_percent,house_percent:A.house_percent,origination_percent:A.origination_percent,site_percent:A.site_percent,deal_percent:A.deal_percent,number_of_payments:A.number_of_payments,fee:A.fee,updated_at:new Date().toISOString()};A.gci!==void 0&&($.gci=A.gci),A.referral_fee_usd!==void 0&&($.referral_fee_usd=A.referral_fee_usd),A.agci!==void 0&&($.agci=A.agci),A.house_usd!==void 0&&($.house_usd=A.house_usd),A.origination_usd!==void 0&&($.origination_usd=A.origination_usd),A.site_usd!==void 0&&($.site_usd=A.site_usd),A.deal_usd!==void 0&&($.deal_usd=A.deal_usd),E==="referral_payee_client_id"&&A.referral_payee_client_id!==void 0&&($.referral_payee_client_id=A.referral_payee_client_id);try{console.log("Updating field:",E,"with value:",j),console.log("Update payload:",$);const{data:T,error:O}=await z.from("deal").update($).eq("id",e).select().single();if(O)throw console.error("Supabase error:",O),O;console.log("Update successful:",T),s(T),r(T)}catch(T){console.error("Error saving:",T),alert(`Error saving: ${T instanceof Error?T.message:"Failed to save"}`)}},_=async()=>{try{y(!0);const{data:E,error:j}=await z.rpc("generate_payments_for_deal",{deal_uuid:e});if(j)throw j;await x()}catch(E){alert(`Error: ${E instanceof Error?E.message:"Failed to generate payments"}`)}finally{y(!1)}},k=E=>E==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),S=E=>{const j=[],I=Number(E.origination_percent)||0,U=Number(E.site_percent)||0,A=Number(E.deal_percent)||0,$=Number(E.commission_percent)||0,T=Number(E.referral_fee_percent)||0,O=I+U+A;return O>100&&j.push("Broker split percentages total "+O.toFixed(1)+"% (over 100%)"),$>50&&j.push("Commission rate "+$.toFixed(1)+"% seems high"),T>100&&j.push("Referral fee "+T.toFixed(1)+"% cannot exceed 100%"),j};if(f)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-sm text-gray-600",children:"Loading commission data..."})});if(p)return c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Loading Commission Data"}),c.jsx("p",{className:"text-sm text-red-600",children:p}),c.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Try Again"})]});if(!n)return c.jsx("div",{className:"text-center text-gray-600 py-8",children:c.jsx("p",{className:"text-sm",children:"Deal not found"})});const D=u.length>0,N=S(n);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-blue-800 mb-1",children:"Deal Fee"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(n.fee)})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-purple-800 mb-1",children:"Number of Payments"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:n.number_of_payments})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-orange-800 mb-1",children:"Commission Rate"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.commission_percent?`${n.commission_percent.toFixed(1)}%`:"0%"})]})]}),N.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:N.map((E,j)=>c.jsx("li",{children:E},j))})]})]})}),D&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payments Already Generated"}),c.jsxs("p",{className:"mt-1 text-xs text-yellow-700",children:["This deal already has ",u.length," payment",u.length!==1?"s":""," generated. To regenerate payments, you would need to delete the existing ones first."]})]})]})}),o.length===0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"No Commission Splits Found"}),c.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Commission splits are imported from Salesforce. If this deal should have commission data, check that it exists in Salesforce and run the migration again."})]})]})}),c.jsx(FM,{deal:n,onFieldUpdate:v}),c.jsx($M,{deal:n,onDealUpdate:r}),c.jsxs(zg,{title:"Payment Generation",help:"Generate payments based on commission splits",children:[c.jsx("div",{className:"flex justify-end mb-3",children:c.jsx("button",{onClick:_,disabled:o.length===0||D||b,className:`px-4 py-2 rounded font-medium text-sm ${o.length>0&&!D&&!b?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:b?"Generating...":"Generate Payments"})}),o.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-4",children:c.jsx("p",{className:"text-sm",children:"No commission splits available for payment generation."})})]}),o.length>0&&c.jsx(zg,{title:"Quick Summary",help:"Overview of commission allocation",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-green-800 mb-1",children:"Total Commission Splits"}),c.jsx("p",{className:"text-lg font-bold text-green-900",children:o.length})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Total Broker Amount"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(o.reduce((E,j)=>E+(j.split_broker_total||0),0))})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-purple-800 mb-1",children:"Payments Status"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:D?`${u.length} Generated`:"Not Generated"})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-orange-800 mb-1",children:"Per Payment Amount"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.number_of_payments&&n.fee?k(n.fee/n.number_of_payments):"$0.00"})]})]})})]})},Qb=(e,t=[],r=[])=>{const n=w.useMemo(()=>{const l=e.fee||0,u=e.number_of_payments||1,d=u>0?l/u:0,f=d*u;return{calculatedPaymentAmount:d,totalCalculatedPayments:f}},[e.fee,e.number_of_payments]),s=w.useMemo(()=>{const l=n.calculatedPaymentAmount,u=e.referral_fee_usd||0,d=e.number_of_payments||1,f=u/d,p=(e.house_usd||0)/d,g=l-f-p,b=e.origination_percent||0,y=e.site_percent||0,x=e.deal_percent||0,m=b/100*g,v=y/100*g,_=x/100*g;return{gci:l,referral_fee_usd:f,house_usd:p,agci:g,origination_percent:b,origination_usd:m,site_percent:y,site_usd:v,deal_percent:x,deal_usd:_}},[n.calculatedPaymentAmount,e.fee,e.referral_fee_usd,e.house_usd,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),o=w.useMemo(()=>l=>l.map(u=>{const d=(u.split_origination_percent||0)/100*s.origination_usd,f=(u.split_site_percent||0)/100*s.site_usd,h=(u.split_deal_percent||0)/100*s.deal_usd,p=d+f+h;return{broker_id:u.broker_id||"",origination_amount:d,site_amount:f,deal_amount:h,total_amount:p}}),[s]),i=w.useMemo(()=>{const l=[];let u=!0;return(!e.fee||e.fee<=0)&&(l.push("Commission fee is not set"),u=!1),(!e.number_of_payments||e.number_of_payments<1)&&(l.push("Number of payments must be at least 1"),u=!1),e.number_of_payments&&e.number_of_payments>10&&(l.push("Number of payments cannot exceed 10"),u=!1),(e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0)===0&&l.push("Commission split percentages are not configured"),{canGeneratePayments:u,validationMessages:l}},[e.fee,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),a=w.useMemo(()=>t.map(l=>({payment_id:l.payment_id,calculated_amount:n.calculatedPaymentAmount,database_amount:l.payment_amount||0,needs_update:Math.abs((l.payment_amount||0)-n.calculatedPaymentAmount)>.01})),[t,n.calculatedPaymentAmount]);return{calculatedPaymentAmount:n.calculatedPaymentAmount,totalCalculatedPayments:n.totalCalculatedPayments,paymentCommissionBreakdown:s,calculateBrokerSplitsForPayment:o,canGeneratePayments:i.canGeneratePayments,validationMessages:i.validationMessages,paymentComparisons:a}},UM=({deal:e,hasPayments:t,existingPayments:r=[],commissionSplits:n=[],onGeneratePayments:s,onUpdatePaymentAmounts:o,generatingPayments:i})=>{const{calculatedPaymentAmount:a,totalCalculatedPayments:l,paymentCommissionBreakdown:u,canGeneratePayments:d,validationMessages:f,paymentComparisons:h}=Qb(e,r,n),p=e.number_of_payments||1,g=x=>x.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),b=h.some(x=>x.needs_update);r.length<p;const y=r.length===p;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Generation"}),t&&c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.length," of ",p," Payments Created"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Actions"}),c.jsxs("div",{className:"space-y-3",children:[y?c.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:"✅ All Payments Created"}),c.jsxs("div",{children:["All ",p," payments have been created for this deal."]})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:s,disabled:!d||i,className:`w-full px-4 py-3 rounded-md font-medium transition-colors ${d&&!i?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating Additional Payments...":"Generating Payments..."]}):t?`Create Remaining ${p-r.length} Payments`:`Generate ${p} Payment${p>1?"s":""}`}),t&&c.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:"ℹ️ Safe Generation"}),c.jsx("div",{children:"This will create the remaining payments without affecting existing payment records or their associated invoice data."})]})]}),t&&b&&o&&c.jsx("button",{onClick:o,disabled:i,className:"w-full px-4 py-2 border border-amber-300 bg-amber-50 text-amber-700 rounded-md font-medium hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Payment Amounts"}),!d&&c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:"Configuration Required"}),c.jsx("div",{children:"Complete commission configuration in the Commission tab before generating payments."})]})]}),d&&p>1||t&&h.length>0?c.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d&&p>1&&c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Payment Schedule Preview"}),c.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[Array.from({length:p},(x,m)=>{const v=r.find(_=>_.payment_sequence===m+1);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{children:["Payment ",m+1,":"]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:`font-medium ${v?"text-green-600":""}`,children:["$",g(a),v&&" ✓"]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75",children:["AGCI: $",g(u.agci)]})]})]},m)}),c.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[c.jsx("span",{children:"Total:"}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{children:["$",g(l)]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75 font-normal",children:["Total AGCI: $",g(u.agci*p)]})]})]})]})]}),t&&h.length>0&&c.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Current vs Calculated"}),c.jsx("div",{className:"text-sm text-gray-700 space-y-1",children:h.map((x,m)=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Payment ",m+1,":"]}),c.jsxs("span",{className:x.needs_update?"text-amber-700 font-medium":"text-gray-600",children:["$",g(x.database_amount)," → $",g(x.calculated_amount),x.needs_update&&" ⚠️"]})]},m))})]})]}):null]})]})};function WM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const HM=w.forwardRef(WM),Jb=HM;function YM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const zM=w.forwardRef(YM),Xb=zM,Zb=e=>{if(!e)return"Unknown";const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n).toLocaleDateString()},wn=(e,t="Not set")=>e?Zb(e):t,VM=e=>e||"",qM=({payment:e,totalPayments:t,isExpanded:r,onToggleExpansion:n,onUpdatePayment:s,onDeletePayment:o})=>(console.log("📅 PaymentSummaryRow payment dates:",{id:e.id,payment_sequence:e.payment_sequence,payment_date_estimated:e.payment_date_estimated,payment_received_date:e.payment_received_date}),c.jsxs("div",{className:"p-4 grid grid-cols-12 items-center gap-4",children:[c.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded flex-shrink-0",children:r?c.jsx(Jb,{className:"h-4 w-4 text-gray-500"}):c.jsx(Xb,{className:"h-4 w-4 text-gray-500"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:["Payment ",e.payment_sequence," of ",t]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["$",(e.payment_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("div",{className:"text-xs text-gray-500",children:"Invoice #"}),c.jsx("div",{className:"text-sm text-gray-900",children:e.orep_invoice||"-"})]}),c.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:e.payment_received||!1,onChange:i=>s({payment_received:i.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e.payment_received?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.payment_received?"Received":"Pending"})]}),c.jsx("div",{className:"col-span-3",children:e.payment_received?c.jsx("div",{className:"w-full px-2 py-1 text-sm",children:c.jsxs("div",{className:"font-medium text-green-800",children:["Paid Date: ",Zb(e.payment_received_date)]})}):c.jsxs("div",{children:[e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Estimated Pmt Date"}),c.jsx("input",{type:"date",value:e.payment_date_estimated||"",onChange:i=>s({payment_date_estimated:i.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",placeholder:"Estimated payment date"}),!e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Set estimated payment date"})]})}),c.jsx("div",{className:"col-span-2 text-right",children:c.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-900 text-sm whitespace-nowrap",children:"Delete"})})]})),GM=({split:e,brokerName:t,paymentAmount:r,onPercentageChange:n,validationTotals:s})=>c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{children:c.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t})}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2})]})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Origination"}),c.jsx(yr,{label:"",value:e.split_origination_percent||0,onChange:o=>n("split_origination_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_origination_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Site"}),c.jsx(yr,{label:"",value:e.split_site_percent||0,onChange:o=>n("split_site_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_site_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Deal"}),c.jsx(yr,{label:"",value:e.split_deal_percent||0,onChange:o=>n("split_deal_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_deal_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Total"}),c.jsxs("div",{className:`text-sm font-semibold ${s&&!s.isValid?"text-red-600":"text-blue-600"}`,children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s&&!s.isValid&&c.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Check totals"})]})]})]}),bs=e=>e==null||isNaN(e)?"$0.00":`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Vg=({payeeName:e,amount:t,paid:r,onTogglePaid:n,disabled:s=!1})=>{const o=()=>{s||n(!r)};return c.jsxs("div",{className:`
        flex items-center justify-between p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer
        ${r?"bg-green-50 border-green-200 hover:border-green-300":"bg-white border-gray-200 hover:border-gray-300"}
        ${s?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
      `,onClick:o,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&!s&&(i.preventDefault(),o())},"aria-label":`${r?"Mark as unpaid":"Mark as paid"} - ${e} - ${bs(t)}`,children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsx("div",{className:`
          flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200
          ${r?"bg-green-500 border-green-500":"bg-white border-gray-300 hover:border-green-400"}
        `,children:r&&c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`
            text-sm font-medium truncate transition-colors duration-200
            ${r?"text-green-900":"text-gray-900"}
          `,children:e}),c.jsx("p",{className:`
            text-xs transition-colors duration-200
            ${r?"text-green-700":"text-gray-500"}
          `,children:r?"Check written":"Pending payment"})]})]}),c.jsxs("div",{className:"flex-shrink-0 text-right",children:[c.jsx("p",{className:`
          text-lg font-semibold transition-colors duration-200
          ${r?"text-green-900":"text-gray-900"}
        `,children:bs(t)}),r&&c.jsxs("div",{className:"flex items-center justify-end mt-1",children:[c.jsx("svg",{className:"w-3 h-3 text-green-600 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Paid"})]})]})]})},KM=({isOpen:e,onClose:t,payment:r,deal:n,clients:s,brokers:o,paymentSplits:i,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const v=[];if(n.referral_payee_client_id&&n.referral_fee_usd&&n.referral_fee_usd>0){const _=s.find(N=>N.id===n.referral_payee_client_id),k=n.fee||n.deal_usd||0,S=r.payment_amount||0,D=k>0?n.referral_fee_usd*(S/k):0;D>0&&v.push({id:`referral-${r.id}`,type:"referral",payeeName:(_==null?void 0:_.client_name)||"Unknown Referral Client",amount:D,paid:r.referral_fee_paid||!1})}console.log("🔍 Payment splits for disbursement modal:",i),i.forEach(_=>{const k=o.find(D=>D.id===_.broker_id),S=_.paid||!1;console.log("🔍 Processing split:",{paymentSplitId:_.id,brokerName:k==null?void 0:k.name,brokerPaid:S,amount:_.split_broker_total}),_.split_broker_total&&_.split_broker_total>0&&v.push({id:_.id,type:"broker",payeeName:(k==null?void 0:k.name)||"Unknown Broker",amount:_.split_broker_total,paid:S})}),d(v)}},[e,r,n,s,o,i]);const p=async(v,_)=>{h(!0);try{v.type==="referral"?await a(r.id,_):await l(v.id,_),d(k=>k.map(S=>S.id===v.id?{...S,paid:_}:S))}catch(k){console.error("Error updating disbursement status:",k)}finally{h(!1)}},g=r.payment_amount||0,b=u.reduce((v,_)=>v+(_.paid?_.amount:0),0),y=g-b,x=u.filter(v=>v.paid).length,m=u.length;return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:"💰"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Disbursement"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment ",r.payment_sequence," - ",bs(g)]})]})]}),c.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",disabled:f,children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Disbursement Progress: ",x," of ",m," checks written"]}),c.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(x/Math.max(m,1)*100),"% Complete"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${x/Math.max(m,1)*100}%`}})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-400 text-2xl",children:"💸"})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Disbursements Required"}),c.jsx("p",{className:"text-sm text-gray-500",children:"This payment has no referral fees or broker commissions to disburse."})]}):c.jsxs("div",{className:"space-y-4",children:[u.some(v=>v.type==="referral")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Referral Payments"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="referral").map(v=>c.jsx(Vg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]}),u.some(v=>v.type==="broker")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Broker Commissions"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="broker").map(v=>c.jsx(Vg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]})]})}),u.length>0&&c.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Payment Received:"}),c.jsx("p",{className:"font-semibold text-gray-900",children:bs(g)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Disbursed:"}),c.jsx("p",{className:"font-semibold text-green-600",children:bs(b)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Remaining:"}),c.jsx("p",{className:`font-semibold ${y>=0?"text-gray-900":"text-red-600"}`,children:bs(y)})]})]})})]})}):null},QM=({payment:e,deal:t,clients:r,brokers:n,paymentSplits:s,commissionSplits:o,onUpdatePayment:i,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState(!1),f=()=>{if(!t.referral_payee_client_id)return"No referral payee set";if(!r||r.length===0)return"Client data not available";const b=r.find(y=>y.id===t.referral_payee_client_id);return b?b.client_name||"Unknown Client":"Client not found"},h=()=>{if(!t.referral_fee_usd||t.referral_fee_usd===0)return 0;const b=t.fee||t.deal_usd||0,y=e.payment_amount||0;return b===0?0:t.referral_fee_usd*(y/b)},p=(b,y,x=!1)=>{const m=e[y];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:b}),x&&m&&c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:wn(m)}),c.jsx("input",{type:"date",value:VM(m),onChange:v=>i({[y]:v.target.value||null}),className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})},g=(b,y,x)=>{const m=e[y];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:b}),c.jsx("input",{type:"text",value:m||"",onChange:v=>i({[y]:v.target.value||null}),placeholder:x,className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})};return c.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"p-4 md:p-6",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Details"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Payment Dates & Tracking"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6",children:[p("Estimated Payment Date","payment_date_estimated"),p("Payment Received Date","payment_received_date"),p("Invoice Date","payment_invoice_date"),g("OREP Invoice","orep_invoice","Enter OREP Invoice number")]})]}),(t.referral_payee_client_id||t.referral_fee_usd||t.referral_fee_percent)&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Referral Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Payee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:f()})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Fee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:(()=>{const b=h(),y=t.referral_fee_usd||0;return b===0?"No referral fee for this payment":c.jsxs(c.Fragment,{children:["$",b.toLocaleString("en-US",{minimumFractionDigits:2}),c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["($",y.toLocaleString("en-US",{minimumFractionDigits:2})," total)"]}),t.referral_fee_percent&&c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.referral_fee_percent,"%)"]})]})})()})]})]})]}),(e.sf_payment_date_est||e.sf_payment_date_actual||e.sf_payment_date_received||e.sf_payment_invoice_date)&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Salesforce Date Fields (Read-only)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-xs",children:[e.sf_payment_date_est&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Est Date:"})," ",c.jsx("span",{className:"text-gray-500",children:wn(e.sf_payment_date_est)})]}),e.sf_payment_date_actual&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Actual Date:"})," ",c.jsx("span",{className:"text-gray-500",children:wn(e.sf_payment_date_actual)})]}),e.sf_payment_date_received&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Received Date:"})," ",c.jsx("span",{className:"text-gray-500",children:wn(e.sf_payment_date_received)})]}),e.sf_payment_invoice_date&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Invoice Date:"})," ",c.jsx("span",{className:"text-gray-500",children:wn(e.sf_payment_invoice_date)})]})]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-gray-500",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Payment Received:"})," ",e.payment_received?"Yes":"No",e.payment_received_date&&c.jsxs("span",{className:"ml-1",children:["(",wn(e.payment_received_date),")"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"SF Payment Status:"})," ",e.sf_payment_status||"Not set"]}),e.qb_sync_status&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"QB Sync Status:"})," ",e.qb_sync_status]}),e.qb_last_sync&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Last QB Sync:"})," ",wn(e.qb_last_sync)]})]})}),c.jsx("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"checkbox",id:`payment-received-${e.id}`,checked:e.payment_received||!1,onChange:async b=>{const y=b.target.checked;await i({payment_received:y}),y&&(t.referral_fee_usd&&t.referral_fee_usd>0||s&&s.some(x=>(x.split_broker_total||0)>0))&&d(!0)},className:"h-5 w-5 text-blue-600 rounded border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`payment-received-${e.id}`,className:"text-sm font-semibold text-blue-900 cursor-pointer",children:"Payment Received"}),c.jsx("p",{className:"text-xs text-blue-700",children:e.payment_received?"Payment has been received - manage disbursements below":"Check when payment is received to manage disbursements"})]})]}),e.payment_received&&c.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Manage Disbursements"})]})})]}),u&&c.jsx(KM,{isOpen:u,onClose:()=>d(!1),payment:e,deal:t,clients:r||[],brokers:n||[],paymentSplits:s||[],onUpdateReferralPaid:a||(async()=>{}),onUpdatePaymentSplitPaid:l||(async()=>{})})]})},JM=e=>{const t={deal:0,site:0,origination:0,isValid:!0};return e.forEach(r=>{t.deal+=r.split_deal_percent||0,t.site+=r.split_site_percent||0,t.origination+=r.split_origination_percent||0}),t.isValid=t.deal===100&&t.site===100&&t.origination===100,t},XM=(e,t,r,n)=>e.map(s=>{let o=s.split_origination_usd||0,i=s.split_site_usd||0,a=s.split_deal_usd||0,l=s.split_broker_total||0;if(r&&n){const u=r.number_of_payments||1,d=(r.referral_fee_usd||0)/u,f=(r.house_usd||0)/u,h=n-d-f,p=(r.origination_percent||0)/100*h,g=(r.site_percent||0)/100*h,b=(r.deal_percent||0)/100*h;o=p*(s.split_origination_percent||0)/100,i=g*(s.split_site_percent||0)/100,a=b*(s.split_deal_percent||0)/100,l=o+i+a}return{...s,split_origination_usd:o,split_site_usd:i,split_deal_usd:a,split_broker_total:l}}),ZM=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(async d=>{t(!0),n(null);try{const{data:f,error:h}=await z.from("payment").select("*").eq("id",d).single();if(h)throw h;const{data:p,error:g}=await z.from("payment_split").select("*").eq("payment_id",d);if(g)throw g;return{payment:f,paymentSplits:p||[]}}catch(f){const h=f instanceof Error?f.message:"Failed to load disbursement data";return n(h),console.error("Error loading disbursement data:",f),null}finally{t(!1)}},[]),o=w.useCallback(async(d,f)=>{t(!0),n(null);try{const{error:h}=await z.from("payment").update({referral_fee_paid:f}).eq("id",d);if(h)throw h}catch(h){const p=h instanceof Error?h.message:"Failed to update referral payment status";throw n(p),console.error("Error updating referral paid status:",h),h}finally{t(!1)}},[]),i=w.useCallback(async(d,f)=>{t(!0),n(null),console.log("🔧 Updating payment split paid status:",{splitId:d,paid:f});try{const{error:h,data:p}=await z.from("payment_split").update({paid:f}).eq("id",d).select();if(h)throw console.error("❌ Supabase error updating payment split:",h),h;console.log("✅ Payment split updated successfully:",p)}catch(h){const p=h instanceof Error?h.message:"Failed to update payment split status";throw n(p),console.error("Error updating payment split paid status:",h),h}finally{t(!1)}},[]),a=w.useCallback((d,f,h)=>{const p=d.payment_amount||0,g=h||0,b=d.referral_fee_paid&&g>0?g:0,y=f.reduce((E,j)=>E+(j.paid&&j.split_broker_total||0),0),x=b+y,m=p-x,v=g>0?1:0,_=f.filter(E=>(E.split_broker_total||0)>0).length,k=v+_,S=d.referral_fee_paid&&g>0?1:0,D=f.filter(E=>E.paid&&(E.split_broker_total||0)>0).length,N=S+D;return{paymentAmount:p,referralAmount:g,referralDisbursed:b,brokerDisbursed:y,totalDisbursed:x,remainingBalance:m,totalItems:k,paidItems:N,completionPercentage:k>0?Math.round(N/k*100):0,isOverDisbursed:x>p,isFullyDisbursed:N===k&&k>0}},[]),l=w.useCallback((d,f)=>f>d?{isValid:!1,message:`Disbursements exceed payment by $${(f-d).toLocaleString("en-US",{minimumFractionDigits:2})}`}:{isValid:!0},[]),u=w.useCallback(()=>{n(null)},[]);return{loading:e,error:r,loadDisbursementData:s,updateReferralPaid:o,updatePaymentSplitPaid:i,calculateDisbursementTotals:a,validateDisbursement:l,clearError:u}},eL=({payment:e,splits:t,brokers:r,clients:n,commissionSplits:s,dealAmounts:o,deal:i,onSplitPercentageChange:a,onUpdatePayment:l,onUpdatePaymentSplit:u})=>{const[d,f]=w.useState(!1),h=k=>{const S=r.find(D=>D.id===k);return S?S.name:"Unknown Broker"},g=(()=>{const k=e.payment_amount||0,S=i.number_of_payments||1,D=(i.referral_fee_usd||0)/S,N=(i.house_usd||0)/S;return k-D-N})(),b=XM(t,o,i,e.payment_amount||0),y=JM(b),{updateReferralPaid:x,updatePaymentSplitPaid:m}=ZM(),v=async(k,S)=>{try{await x(k,S)}catch(D){console.error("Error updating referral payment status:",D)}},_=async(k,S)=>{try{await m(k,S),u&&(await u(k,{paid:S}),console.log("✅ Payment split paid status updated, parent state refreshed"))}catch(D){console.error("Error updating payment split status:",D)}};return c.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Commission Breakdown"}),c.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Payment #",e.payment_sequence," • AGCI: $",g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsx("div",{className:"space-y-4",children:b.map(k=>c.jsx(GM,{split:k,brokerName:h(k.broker_id),paymentAmount:e.payment_amount||0,onPercentageChange:(S,D)=>a(k.id,S,D),validationTotals:y},k.id))}),!y.isValid&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[c.jsx("div",{className:"text-sm font-medium text-red-800",children:"Percentage Validation Errors:"}),c.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[y.origination!==100&&`Origination: ${y.origination}% `,y.site!==100&&`Site: ${y.site}% `,y.deal!==100&&`Deal: ${y.deal}% `,"(must equal 100% each)"]})]})]}),c.jsxs("div",{className:"border-t border-gray-200",children:[c.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>f(!d),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Dates, tracking, and referral information"})]}),c.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:d?c.jsx(Jb,{className:"h-4 w-4 text-gray-500"}):c.jsx(Xb,{className:"h-4 w-4 text-gray-500"})})]})}),d&&c.jsx(QM,{payment:e,deal:i,clients:n,brokers:r,paymentSplits:t,commissionSplits:s,onUpdatePayment:l,onUpdateReferralPaid:v,onUpdatePaymentSplitPaid:_})]})]})},tL=({payments:e,paymentSplits:t,brokers:r,clients:n,commissionSplits:s,deal:o,onUpdatePayment:i,onDeletePayment:a,onUpdatePaymentSplit:l})=>{const[u,d]=w.useState(new Set),[f,h]=w.useState(!1),[p,g]=w.useState(null),b=_=>{d(k=>{const S=new Set(k);return S.has(_)?S.delete(_):S.add(_),S})},y=_=>t.filter(k=>k.payment_id===_),x=_=>{g(_),h(!0)},m=async()=>{if(p)try{await a(p.id),h(!1),g(null)}catch(_){console.error("Error deleting payment:",_)}},v=async(_,k,S)=>{try{const{error:D}=await z.from("payment_split").update({[k]:S||0}).eq("id",_);if(D)throw console.error("Supabase error:",D),D;l&&await l(_,k,S)}catch(D){console.error("Error updating payment split:",D),alert("Failed to update split percentage. Please try again.")}};return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Management"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage individual payments and track their status"})]}),c.jsx("div",{className:"space-y-3",children:e.map(_=>{const k=y(_.id),S=u.has(_.id);return c.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white",children:[c.jsx(qM,{payment:_,totalPayments:e.length,isExpanded:S,onToggleExpansion:()=>b(_.id),onUpdatePayment:D=>i(_.id,D),onDeletePayment:()=>x(_)}),S&&c.jsx(eL,{payment:_,splits:k,brokers:r,clients:n,commissionSplits:s,dealAmounts:{origination_usd:o.origination_usd||0,site_usd:o.site_usd||0,deal_usd:o.deal_usd||0},deal:o,onSplitPercentageChange:v,onUpdatePayment:D=>i(_.id,D),onUpdatePaymentSplit:async(D,N)=>{l&&N.paid!==void 0&&await l(D,"paid",N.paid)}})]},_.id)})}),c.jsx(Kb,{isOpen:f,onClose:()=>h(!1),onConfirm:m,title:"Delete Payment",itemName:p?`Payment ${p.payment_sequence} of ${e.length}`:"",message:"This will permanently delete the payment and all associated commission splits. This action cannot be undone."})]})},rL=({statusSummary:e,hasOverdue:t,completionRate:r})=>c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Payment Status"}),e.total>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(r),"% complete)"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.received>0&&c.jsx("div",{className:"px-2 py-1 bg-green-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-green-800 font-bold",children:["✅ Received ",e.received]})}),e.sent>0&&c.jsx("div",{className:"px-2 py-1 bg-blue-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-blue-800 font-bold",children:["📧 Sent ",e.sent]})}),e.pending>0&&c.jsx("div",{className:"px-2 py-1 bg-yellow-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-yellow-800 font-bold",children:["⏳ Pending ",e.pending]})}),e.overdue>0&&c.jsx("div",{className:"px-2 py-1 bg-red-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-red-800 font-bold",children:["⚠️ Overdue ",e.overdue]})})]}),t&&c.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[c.jsx("strong",{children:"Action needed:"})," ",e.overdue," payment",e.overdue!==1?"s":"",e.overdue===1?" is":" are"," overdue and require",e.overdue===1?"s":""," attention."]}),e.total>0&&c.jsx("div",{className:"mt-3",children:c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})})]}),nL=({deal:e,commissionSplits:t=[],onEditClick:r,className:n=""})=>{const{baseAmounts:s}=Yh(e,t),{gci:o,houseUsd:i,agci:a,originationPercent:l,sitePercent:u,dealPercent:d,originationUSD:f,siteUSD:h,dealUSD:p,totalDealUSD:g}=s,b=e.fee||0,y=e.referral_fee_percent||0,x=e.referral_fee_usd||y/100*b,m=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=b>0?i/b*100:0,_=b>0?x/b*100:0,k=b>0?i/b*100:0,S=b>0?f/b*100:0,D=b>0?h/b*100:0,N=b>0?p/b*100:0,E=_>0||k>0||S>0||D>0||N>0;return!e.fee||e.fee===0?c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Commission breakdown will appear when commission fee is set"}),r&&c.jsx("button",{onClick:r,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Set Commission Details →"})]}):c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm",children:[c.jsxs("span",{className:"font-medium text-gray-900",children:["Total Commission: ",c.jsx("span",{className:"text-green-600",children:m(b)})]}),x>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:"→"}),c.jsxs("span",{className:"text-gray-600",children:["Referral: ",c.jsx("span",{className:"text-orange-600",children:m(x)})]})]}),i>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:"→"}),c.jsxs("span",{className:"text-gray-600",children:["House: ",c.jsx("span",{className:"text-gray-600",children:m(i)})]})]}),c.jsx("span",{className:"text-gray-400",children:"→"}),c.jsxs("span",{className:"text-gray-600",children:["AGCI: ",c.jsx("span",{className:"text-blue-600 font-medium",children:m(a)})]})]}),r&&c.jsx("button",{onClick:r,className:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Edit Commission"})]}),E&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex h-8 bg-gray-200 rounded-lg overflow-hidden",children:[_>0&&c.jsx("div",{className:"bg-orange-500 flex items-center justify-center relative group",style:{width:`${_}%`},title:`Referral: ${y}% of total - ${m(x)}`,children:_>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[y.toFixed(1),"%"]})}),k>0&&c.jsx("div",{className:"bg-gray-500 flex items-center justify-center relative group",style:{width:`${k}%`},title:`House: ${v.toFixed(1)}% of total - ${m(i)}`,children:k>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[v.toFixed(1),"%"]})}),S>0&&c.jsx("div",{className:"bg-blue-500 flex items-center justify-center relative group",style:{width:`${S}%`},title:`Origination: ${l}% of AGCI - ${m(f)}`,children:S>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[l,"%"]})}),D>0&&c.jsx("div",{className:"bg-green-500 flex items-center justify-center relative group",style:{width:`${D}%`},title:`Site: ${u}% of AGCI - ${m(h)}`,children:D>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[u,"%"]})}),N>0&&c.jsx("div",{className:"bg-purple-500 flex items-center justify-center relative group",style:{width:`${N}%`},title:`Deal: ${d}% of AGCI - ${m(p)}`,children:N>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[d,"%"]})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2",children:[x>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Referral"})," ",m(x)]})]}),i>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"House"})," ",m(i)]})]}),l>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Origination"})," ",m(f)]})]}),u>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Site"})," ",m(h)]})]}),d>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Deal"})," ",m(p)]})]})]}),g!==a&&a>0&&c.jsx("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:"⚠️ Commission percentages don't total to 100% of AGCI"})]}),!E&&c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Commission breakdown percentages not configured"}),r&&c.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Configure Commission Splits →"})]})]})},sL=e=>{const t=i=>{if(i.payment_received)return"received";if(i.invoice_sent&&!i.payment_received){if(i.payment_date_estimated){const a=new Date(i.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"sent"}if(i.payment_date_estimated&&!i.invoice_sent){const a=new Date(i.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"pending"},r=e.reduce((i,a)=>{const l=t(a);return i[l]=(i[l]||0)+1,i.total++,i},{pending:0,sent:0,overdue:0,received:0,total:0}),n=r.overdue>0,s=r.overdue>0||r.sent>0,o=r.total>0?r.received/r.total*100:0;return{getPaymentStatus:t,statusSummary:r,hasOverdue:n,hasActionItems:s,completionRate:o}},oL=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,a]=w.useState([]),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(!0),[g,b]=w.useState(null),[y,x]=w.useState(!1),{calculatedPaymentAmount:m,totalCalculatedPayments:v,paymentCommissionBreakdown:_,canGeneratePayments:k,validationMessages:S}=Qb(e,r,i),D=async()=>{if(e.id)try{p(!0),b(null);const{data:C,error:R}=await z.from("payment").select("*, payment_date_estimated").eq("deal_id",e.id).order("payment_sequence",{ascending:!0});if(R)throw R;console.log("🔍 PaymentTab fetchPaymentData - payments found:",{dealId:e.id,paymentsCount:(C==null?void 0:C.length)||0,payments:C==null?void 0:C.map(Ne=>({id:Ne.id,sequence:Ne.payment_sequence,amount:Ne.payment_amount,estimated_date:Ne.payment_date_estimated}))});const M=(C==null?void 0:C.map(Ne=>Ne.id))||[];let W=[];if(M.length>0){const{data:Ne,error:vn}=await z.from("payment_split").select("*").in("payment_id",M);if(vn)throw vn;W=Ne||[]}const{data:K,error:Ce}=await z.from("commission_split").select("*").eq("deal_id",e.id);if(Ce)throw Ce;const{data:Te,error:Xt}=await z.from("broker").select("*").order("name");if(Xt)throw Xt;let st=[];try{const{data:Ne,error:vn}=await z.from("client").select("*").order("client_name");vn?console.warn("Client table not available:",vn.message):st=Ne||[]}catch(Ne){console.warn("Error fetching clients (table may not exist):",Ne)}n(C||[]),o(W),a(K||[]),u(Te||[]),f(st||[])}catch(C){console.error("Error fetching payment data:",C),b(C instanceof Error?C.message:"Failed to load payment data")}finally{p(!1)}},N=async()=>{if(e.id)try{x(!0),b(null);const{data:C,error:R}=await z.rpc("generate_payments_for_deal",{deal_uuid:e.id});if(R)throw R;await D()}catch(C){console.error("Error generating payments:",C),b(C instanceof Error?C.message:"Failed to generate payments")}finally{x(!1)}},E=async(C,R)=>{try{const{error:M}=await z.from("payment").update(R).eq("id",C);if(M)throw M;n(W=>W.map(K=>K.id===C?{...K,...R}:K))}catch(M){console.error("Error updating payment:",M),b(M instanceof Error?M.message:"Failed to update payment")}},j=async C=>{try{const{error:R}=await z.from("payment_split").delete().eq("payment_id",C);if(R)throw R;const{error:M}=await z.from("payment").delete().eq("id",C);if(M)throw M;n(W=>W.filter(K=>K.id!==C)),o(W=>W.filter(K=>K.payment_id!==C))}catch(R){console.error("Error deleting payment:",R),b(R instanceof Error?R.message:"Failed to delete payment")}};if(w.useEffect(()=>{D()},[e.id]),h)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})});const I=r.length>0;r.reduce((C,R)=>C+(R.payment_amount||0),0);const U=e.fee||0,{statusSummary:A,hasOverdue:$,hasActionItems:T,completionRate:O}=sL(r),B=C=>C.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return c.jsxs("div",{className:"space-y-6",children:[g&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsx("div",{className:"text-red-700",children:g})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Commission"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",B(U)]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-green-600",children:"Calculated Payments"}),c.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["$",B(v)]}),c.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.number_of_payments||1," × $",B(m)]})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-purple-600",children:"AGCI Available"}),c.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",B(e.agci||0)]}),c.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"After house & referral fees"})]}),c.jsx(rL,{statusSummary:A,hasOverdue:$,completionRate:O})]}),c.jsx(nL,{deal:e,commissionSplits:i,className:"mb-6"}),c.jsx(UM,{deal:e,hasPayments:I,existingPayments:r,commissionSplits:i,onGeneratePayments:N,generatingPayments:y}),I?c.jsx("div",{className:"space-y-6",children:c.jsx(tL,{payments:r,paymentSplits:s,brokers:l,clients:d,commissionSplits:i,deal:e,onUpdatePayment:E,onDeletePayment:j,onUpdatePaymentSplit:async(C,R,M)=>{o(W=>W.map(K=>K.id===C?{...K,[R]:M!==null?M:R==="paid"?!1:0}:K))}})}):c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No payments generated yet"}),c.jsx("div",{className:"text-gray-400 text-sm",children:k?'Click "Generate Payments" above to create payment records':"Complete commission configuration to enable payment generation"}),S.length>0&&c.jsxs("div",{className:"mt-4 text-left max-w-md mx-auto",children:[c.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Required configuration:"}),c.jsx("ul",{className:"text-sm text-gray-500 space-y-1",children:S.map((C,R)=>c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:"•"}),C]},R))})]})]})]})},iL=({deal:e})=>{const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{(async()=>{try{if(e.client_id){const{data:f}=await z.from("client").select("id, client_name").eq("id",e.client_id).single();f&&r(f)}if(e.stage_id){const{data:f}=await z.from("deal_stage").select("id, label").eq("id",e.stage_id).single();f&&s(f)}}catch(f){console.error("Error fetching header data:",f)}finally{i(!1)}})()},[e.client_id,e.stage_id]);const a=d=>d==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),l=d=>{if(!d)return"Not set";try{return new Date(d).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},u=()=>c.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}),c.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"21",cy:"7",r:"1",fill:"currentColor"})]});return o?c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:c.jsx(u,{})}),c.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Loading..."})]})})})}):c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(u,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Deal"})]}),c.jsx("h1",{className:"text-xl font-bold leading-tight",children:e.deal_name||"Unnamed Deal"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Account Name"}),c.jsx("div",{className:"text-white",children:(t==null?void 0:t.client_name)||"No Client"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Stage"}),c.jsx("div",{className:"text-white font-semibold",children:(n==null?void 0:n.label)||"No Stage"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Probability"}),c.jsx("div",{className:"text-white font-semibold",children:e.probability!==null?`${e.probability}%`:"0%"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Target Close Date"}),c.jsx("div",{className:"text-white",children:l(e.target_close_date)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Deal Value"}),c.jsx("div",{className:"text-white font-bold text-base",children:a(e.deal_value)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Fee"}),c.jsx("div",{className:"text-emerald-400 font-bold text-base",children:a(e.fee)})]})]})]})})};function aL(){const{dealId:e}=vy(),[t,r]=w.useState(null),[n,s]=w.useState("overview"),{contacts:o}=Gb(e||null);w.useEffect(()=>{e&&(async()=>{const{data:u,error:d}=await z.from("deal").select("*").eq("id",e).single();!d&&u&&r(u)})()},[e]);const i=l=>{r(l)},a=async l=>{const u={...t,...l};return r(u),Promise.resolve()};return t?c.jsxs(OM,{children:[c.jsxs(IM,{contactCount:o.length,notesCount:0,filesCount:0,activityCount:0,paymentsCount:0,children:[c.jsx(iL,{deal:t}),c.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsx("button",{onClick:()=>s("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),c.jsx("button",{onClick:()=>s("commission"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="commission"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Commission"}),c.jsx("button",{onClick:()=>s("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payments"})]})}),n==="overview"&&c.jsx(PM,{deal:t,onSave:i}),n==="commission"&&c.jsx(BM,{dealId:e,deal:t,onDealUpdate:a}),n==="payments"&&c.jsx(oL,{deal:t,onDealUpdate:a})]})]}),e&&c.jsx(MM,{dealId:e})]}):c.jsx("div",{className:"p-4",children:"Loading..."})}const lL=e=>{const[t,r]=w.useState(null),[n,s]=w.useState(!0),[o,i]=w.useState(null),a=w.useCallback(async()=>{if(!e){r(null),s(!1);return}try{s(!0),i(null);const{data:f,error:h}=await z.from("property").select("*").eq("id",e).single();if(h)throw h;const[p,g,b]=await Promise.all([f.property_type_id?z.from("property_type").select("*").eq("id",f.property_type_id).single():Promise.resolve({data:null,error:null}),f.property_stage_id?z.from("property_stage").select("*").eq("id",f.property_stage_id).single():Promise.resolve({data:null,error:null}),f.property_record_type_id?z.from("property_record_type").select("*").eq("id",f.property_record_type_id).single():Promise.resolve({data:null,error:null})]),y={...f,property_type:p.data||void 0,property_stage:g.data||void 0,property_record_type:b.data||void 0};r(y)}catch(f){console.error("Error fetching property:",f),i(f instanceof Error?f.message:"Failed to fetch property")}finally{s(!1)}},[e]);w.useEffect(()=>{a()},[a]);const l=w.useCallback(async f=>{if(!e)throw new Error("No property ID provided");try{i(null);const h={...f,updated_at:new Date().toISOString()},{data:p,error:g}=await z.from("property").update(h).eq("id",e).select("*").single();if(g)throw g;r(p)}catch(h){throw console.error("Error updating property:",h),i(h instanceof Error?h.message:"Failed to update property"),h}},[e]),u=w.useCallback(async f=>{try{i(null);const{data:h,error:p}=await z.from("property").insert([{...f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw p;return h}catch(h){throw console.error("Error creating property:",h),i(h instanceof Error?h.message:"Failed to create property"),h}},[]),d=w.useCallback(async()=>{await a()},[a]);return{property:t,loading:n,error:o,updateProperty:l,createProperty:u,refreshProperty:d}},cL=e=>{const[t,r]=w.useState(e||{}),[n,s]=w.useState(e||{}),o=w.useCallback(d=>{r(d)},[]),i=w.useCallback((d,f)=>{r(h=>({...h,[d]:f}))},[]),a=w.useCallback(d=>{const f=d||{};r(f),s(f)},[]),l=(()=>{var k,S,D,N;const d={},f=[];(k=t.property_name)!=null&&k.trim()||(d.property_name="Property name is required"),(S=t.address)!=null&&S.trim()||(d.address="Address is required"),(D=t.city)!=null&&D.trim()||(d.city="City is required"),(N=t.state)!=null&&N.trim()||(d.state="State is required");const h=Number(t.asking_lease_price),p=Number(t.asking_purchase_price);h<0&&(d.asking_lease_price="Lease price cannot be negative"),p<0&&(d.asking_purchase_price="Purchase price cannot be negative");const g=Number(t.rent_psf),b=Number(t.nnn_psf);g<0&&(d.rent_psf="Rent PSF cannot be negative"),b<0&&(d.nnn_psf="NNN PSF cannot be negative");const y=Number(t.building_sqft),x=Number(t.available_sqft);y<0&&(d.building_sqft="Building square footage cannot be negative"),x<0&&(d.available_sqft="Available square footage cannot be negative"),x>0&&y>0&&x>y&&f.push("Available square footage exceeds building square footage"),Number(t.traffic_count)<0&&(d.traffic_count="Traffic count cannot be negative");const v=Number(t.latitude),_=Number(t.longitude);return v&&(v<-90||v>90)&&(d.latitude="Latitude must be between -90 and 90"),_&&(_<-180||_>180)&&(d.longitude="Longitude must be between -180 and 180"),t.property_type_id||f.push("Property type is not set"),t.property_stage_id||f.push("Property stage is not set"),t.contact_id||f.push("No contact assigned to this property"),h===0&&p===0&&f.push("No pricing information available"),{isValid:Object.keys(d).length===0,errors:d,warnings:f}})(),u=JSON.stringify(t)!==JSON.stringify(n);return{formData:t,setFormData:o,updateField:i,validation:l,resetForm:a,isDirty:u}},uL=({property:e,isEditing:t,onToggleEdit:r,onBack:n,onGetLocation:s,onCallContact:o})=>{var l;const i=u=>u&&{Prospecting:"bg-blue-100 text-blue-800 border-blue-200",Qualified:"bg-yellow-100 text-yellow-800 border-yellow-200","Under Contract":"bg-purple-100 text-purple-800 border-purple-200",Closed:"bg-green-100 text-green-800 border-green-200",Lost:"bg-red-100 text-red-800 border-red-200"}[u]||"bg-gray-100 text-gray-800 border-gray-200",a=()=>c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});return c.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white shadow-sm",children:c.jsxs("div",{className:"px-4 sm:px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(a,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Property"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[s&&c.jsx("button",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",title:"Get current location",children:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o&&e.contact_id&&c.jsx("button",{onClick:o,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-600 hover:bg-green-500 transition-colors",title:"Call contact",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold leading-tight mb-2",children:e.property_name||e.address||"Unnamed Property"}),e.address&&e.property_name&&c.jsx("p",{className:"text-slate-300 text-sm",children:e.address})]}),e.property_stage&&c.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${i(e.property_stage.label)}`,children:e.property_stage.label})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Type"}),c.jsx("div",{className:"text-white",children:((l=e.property_type)==null?void 0:l.label)||"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Building Size"}),c.jsx("div",{className:"text-white",children:e.building_sqft?`${e.building_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Available Size"}),c.jsx("div",{className:"text-white",children:e.available_sqft?`${e.available_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Contact Made"}),c.jsx("div",{className:"text-white",children:e.contact_made?c.jsx("span",{className:"text-green-400 font-semibold",children:"Yes"}):c.jsx("span",{className:"text-yellow-400",children:"No"})})]})]})]})})},Ba=({label:e,value:t,onChange:r,field:n,placeholder:s,disabled:o=!1,tabIndex:i})=>{const[a,l]=w.useState(!1),[u,d]=w.useState(""),[f,h]=w.useState([]),[p,g]=w.useState(!1),[b,y]=w.useState(-1),[x,m]=w.useState(!1),v=w.useRef(null),_=w.useRef(null),k=t||"Not set",S=async T=>{if(T.trim().length<2){h([]);return}m(!0);try{const{data:O,error:B}=await z.from("property").select(n).not(n,"is",null).ilike(n,`%${T}%`);if(B)throw B;const C={};O==null||O.forEach(M=>{const W=M[n];W&&(C[W]=(C[W]||0)+1)});const R=Object.entries(C).map(([M,W])=>({value:M,count:W})).sort((M,W)=>W.count-M.count).slice(0,8);h(R)}catch(O){console.error("Error fetching suggestions:",O),h([])}finally{m(!1)}};w.useEffect(()=>{if(!a)return;const T=setTimeout(()=>{S(u)},300);return()=>clearTimeout(T)},[u,a,n]);const D=T=>{o||(l(!0),d(T!==void 0?T:t||""),g(!0),y(-1))},N=()=>{o||D()},E=T=>{r((T??u).trim()||null),l(!1),g(!1),h([]),y(-1)},j=()=>{l(!1),g(!1),h([]),d(""),y(-1)},I=T=>{d(T),E(T)},U=T=>{T.key==="Enter"?(T.preventDefault(),b>=0&&f[b]?E(f[b].value):E()):T.key==="Escape"?(T.preventDefault(),j()):T.key==="ArrowDown"?(T.preventDefault(),y(O=>O<f.length-1?O+1:O)):T.key==="ArrowUp"&&(T.preventDefault(),y(O=>O>0?O-1:-1))},A=T=>{const O=T.target.value;d(O),g(!0),y(-1)},$=()=>{setTimeout(()=>{var T;(T=_.current)!=null&&T.contains(document.activeElement)||E()},150)};return a?c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{ref:v,type:"text",value:u,onChange:A,onBlur:$,onKeyDown:U,placeholder:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:i,autoFocus:!0}),p&&(f.length>0||x)&&c.jsxs("div",{ref:_,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:[x&&c.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Loading suggestions..."]}),!x&&f.map((T,O)=>c.jsxs("button",{type:"button",onMouseDown:B=>{B.preventDefault(),I(T.value)},className:`w-full px-3 py-2 text-left hover:bg-blue-50 flex items-center justify-between ${O===b?"bg-blue-50 text-blue-900":"text-gray-900"}`,children:[c.jsx("span",{className:"truncate",children:T.value}),c.jsxs("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:[T.count," properties"]})]},T.value)),!x&&f.length===0&&u.trim().length>=2&&c.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:["No matching ",e.toLowerCase()," found"]})]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:()=>D(),onKeyDown:T=>{T.key==="Enter"||T.key===" "?(T.preventDefault(),D()):T.key.length===1&&!T.ctrlKey&&!T.metaKey&&!T.altKey&&(T.preventDefault(),D(T.key))},onFocus:N,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:o?"Not editable":"Click to edit - suggestions will appear as you type",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:k})})]})},Ie=({label:e,value:t,onChange:r,type:n="text",placeholder:s,disabled:o=!1,multiline:i=!1,rows:a=1,inputMode:l,tabIndex:u})=>{const[d,f]=w.useState(!1),[h,p]=w.useState(""),g=t||"Not set",b=()=>{o||(f(!0),p((t==null?void 0:t.toString())||""))},y=()=>{o||b()},x=()=>{if(n==="number"){const _=parseFloat(h);r(isNaN(_)?null:_)}else r(h.trim()||null);f(!1)},m=()=>{f(!1),p("")},v=_=>{_.key==="Enter"&&!i?(_.preventDefault(),_.stopPropagation(),x()):_.key==="Escape"&&(_.preventDefault(),_.stopPropagation(),m())};if(d){const _=i?"textarea":"input";return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx(_,{type:i?void 0:n,inputMode:l,value:h,onChange:k=>p(k.target.value),onBlur:x,onKeyDown:v,placeholder:s,rows:i?a:void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px] resize-none",tabIndex:u,autoFocus:!0})]})}return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:b,onKeyDown:_=>{_.key==="Enter"||_.key===" "?(_.preventDefault(),b()):_.key.length===1&&!_.ctrlKey&&!_.metaKey&&!_.altKey&&(_.preventDefault(),f(!0),p(_.key))},onFocus:y,tabIndex:u||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-start transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:i?c.jsx("div",{className:"whitespace-pre-wrap",children:g}):g})})]})},dL=({property:e,onFieldUpdate:t,onGetCurrentLocation:r})=>{var f,h,p,g,b;const[n,s]=w.useState(!1),[o,i]=w.useState("idle"),a=()=>{const y=e.verified_latitude&&e.verified_longitude,x=e.latitude&&e.longitude;return y?{lat:e.verified_latitude,lng:e.verified_longitude,source:"verified"}:x?{lat:e.latitude,lng:e.longitude,source:"regular"}:null},l=()=>{const y=a();return y?`https://www.google.com/maps?q=${y.lat},${y.lng}`:null},u=async()=>{const y=l();if(y)try{await navigator.clipboard.writeText(y),i("copied"),setTimeout(()=>i("idle"),2e3)}catch(x){console.error("Failed to copy to clipboard:",x),window.open(y,"_blank")}},d=async()=>{if(r)try{s(!0);const y=await r();t("latitude",y.lat),t("longitude",y.lng)}catch(y){console.error("Error getting current location:",y)}finally{s(!1)}};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Location"})]}),r&&c.jsxs("button",{onClick:d,disabled:n,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm disabled:opacity-50",children:[n?c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Use Current Location"]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsx("div",{className:"sm:col-span-2",children:c.jsx(Ie,{label:"Street Address*",value:e.address,onChange:y=>t("address",y),placeholder:"123 Main Street",tabIndex:1})}),c.jsx(Ba,{label:"City*",value:e.city,onChange:y=>t("city",y),field:"city",placeholder:"San Francisco",tabIndex:2}),c.jsx(Ba,{label:"State*",value:e.state,onChange:y=>t("state",y),field:"state",placeholder:"CA",tabIndex:3}),c.jsx(Ie,{label:"ZIP Code",value:e.zip,onChange:y=>t("zip",y),placeholder:"94105",tabIndex:4}),c.jsx(Ba,{label:"County",value:e.county,onChange:y=>t("county",y),field:"county",placeholder:"San Francisco County",tabIndex:5})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"GPS Coordinates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(Ie,{label:"Latitude",value:e.latitude,onChange:y=>t("latitude",y),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:6}),c.jsx(Ie,{label:"Longitude",value:e.longitude,onChange:y=>t("longitude",y),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:7}),c.jsx(Ie,{label:"Verified Latitude",value:e.verified_latitude,onChange:y=>t("verified_latitude",y),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:8}),c.jsx(Ie,{label:"Verified Longitude",value:e.verified_longitude,onChange:y=>t("verified_longitude",y),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:9})]})]}),a()&&c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"bg-gray-100 rounded-md p-6 text-center",children:[c.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),c.jsx("p",{className:"text-sm text-gray-600",children:"Map Preview"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(h=(f=a())==null?void 0:f.lat)==null?void 0:h.toFixed(6),", ",(g=(p=a())==null?void 0:p.lng)==null?void 0:g.toFixed(6),((b=a())==null?void 0:b.source)==="verified"&&c.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),c.jsxs("div",{className:"mt-3 flex gap-2 justify-center",children:[c.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",onClick:()=>{const y=l();y&&window.open(y,"_blank")},children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in Maps"]}),c.jsx("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",onClick:u,children:o==="copied"?c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Link"]})})]})]})})]})},ya=({label:e,value:t,onChange:r,placeholder:n="0",disabled:s=!1,tabIndex:o,helpText:i,showLarge:a=!1,colorScheme:l="gray"})=>{const[u,d]=w.useState(!1),[f,h]=w.useState(""),p=k=>k==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(k),g=t!=null?p(t):"Not set",b={green:"text-green-700",blue:"text-blue-700",purple:"text-purple-700",gray:"text-gray-900"},y=k=>{s||(d(!0),h(k!==void 0?k:(t==null?void 0:t.toString())||""))},x=()=>{s||y()},m=()=>{const k=parseFloat(f.replace(/[^0-9.-]/g,""))||null;r(k),d(!1)},v=()=>{d(!1),h("")},_=k=>{k.key==="Enter"?(k.preventDefault(),k.stopPropagation(),m()):k.key==="Escape"&&(k.preventDefault(),k.stopPropagation(),v())};return u?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"text",inputMode:"decimal",value:f,onChange:k=>h(k.target.value),onBlur:m,onKeyDown:_,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("div",{onClick:()=>y(),onKeyDown:k=>{k.key==="Enter"||k.key===" "?(k.preventDefault(),y()):k.key.length===1&&!k.ctrlKey&&!k.metaKey&&!k.altKey&&(k.preventDefault(),y(k.key))},onFocus:x,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border ${a?"min-h-[48px]":"min-h-[44px]"} flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:`${t!==null?b[l]:"text-gray-500"} ${a?"text-lg font-semibold":"font-medium"}`,children:g})}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},qg=({label:e,value:t,onChange:r,placeholder:n="0.00",disabled:s=!1,tabIndex:o,helpText:i})=>{const[a,l]=w.useState(!1),[u,d]=w.useState(""),f=m=>m==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m),h=t!=null?`${f(t)} / SF`:"Not set",p=m=>{s||(l(!0),d(m!==void 0?m:(t==null?void 0:t.toString())||""))},g=()=>{s||p()},b=()=>{const m=parseFloat(u.replace(/[^0-9.-]/g,""))||null;r(m),l(!1)},y=()=>{l(!1),d("")},x=m=>{m.key==="Enter"?(m.preventDefault(),m.stopPropagation(),b()):m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),y())};return a?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"text",inputMode:"decimal",value:u,onChange:m=>d(m.target.value),onBlur:b,onKeyDown:x,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("div",{onClick:()=>p(),onKeyDown:m=>{m.key==="Enter"||m.key===" "?(m.preventDefault(),p()):m.key.length===1&&!m.ctrlKey&&!m.metaKey&&!m.altKey&&(m.preventDefault(),p(m.key))},onFocus:g,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:`${t!==null?"text-gray-900":"text-gray-500"} font-medium`,children:h})}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},fL=({property:e,onFieldUpdate:t})=>{var u,d;const r=((d=(u=e.property_record_type)==null?void 0:u.label)==null?void 0:d.toLowerCase())||"",n=r.includes("land"),s=r.includes("shopping")||r.includes("retail"),o=!n&&!s,i=!s,a=!n,l=!n;return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[o&&c.jsx(ya,{label:"Asking Lease Price",value:e.asking_lease_price,onChange:f=>t("asking_lease_price",f),helpText:"Annual lease amount",showLarge:!0,colorScheme:"green",tabIndex:10}),i&&c.jsx(ya,{label:"Asking Purchase Price",value:e.asking_purchase_price,onChange:f=>t("asking_purchase_price",f),helpText:"Total purchase price",showLarge:!0,colorScheme:"blue",tabIndex:11})]}),a&&c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(qg,{label:"Rent PSF",value:e.rent_psf,onChange:f=>t("rent_psf",f),helpText:"Base rent per square foot",tabIndex:12}),c.jsx(qg,{label:"NNN PSF",value:e.nnn_psf,onChange:f=>t("nnn_psf",f),helpText:"Triple net charges per square foot",tabIndex:13})]}),e.rent_psf&&e.nnn_psf&&e.available_sqft&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"All-In Rent Calculation"}),c.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["$",(e.rent_psf+e.nnn_psf).toFixed(2)," / SF"]}),c.jsxs("div",{className:"text-sm text-blue-600",children:["Total annual: $",((e.rent_psf+e.nnn_psf)*e.available_sqft).toLocaleString()]})]})]}),l&&c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Square Footage"}),s?c.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.jsx(Ie,{label:"Available Sqft",value:e.available_sqft,onChange:f=>t("available_sqft",f),type:"number",placeholder:"0",tabIndex:14})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Ie,{label:"Building Size",value:e.building_sqft,onChange:f=>t("building_sqft",f),type:"number",placeholder:"0",tabIndex:14}),c.jsx(Ie,{label:"Available Size",value:e.available_sqft,onChange:f=>t("available_sqft",f),type:"number",placeholder:"0",tabIndex:15})]}),e.building_sqft&&e.available_sqft&&c.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded-md",children:c.jsxs("div",{className:"text-sm text-gray-600",children:["Occupancy: ",((e.building_sqft-e.available_sqft)/e.building_sqft*100).toFixed(1),"% (",(e.building_sqft-e.available_sqft).toLocaleString()," SF occupied)"]})})]})]}),n&&c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Land Information"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsx(ya,{label:"Asking Purchase Price",value:e.asking_purchase_price,onChange:f=>t("asking_purchase_price",f),showLarge:!0,colorScheme:"blue",tabIndex:16}),c.jsx(ya,{label:"Asking Ground Lease Price",value:e.asking_lease_price,onChange:f=>t("asking_lease_price",f),showLarge:!0,colorScheme:"green",tabIndex:17})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsx(Ie,{label:"NNN",value:e.nnn_psf,onChange:f=>t("nnn_psf",f),type:"number",placeholder:"0",tabIndex:18}),c.jsx(Ie,{label:"Acres",value:e.acres,onChange:f=>t("acres",f),type:"number",placeholder:"0",tabIndex:19})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Ie,{label:"Building Sqft",value:e.building_sqft,onChange:f=>t("building_sqft",f),type:"number",placeholder:"0",tabIndex:20}),c.jsx(Ie,{label:"Lease Expiration Date",value:e.lease_expiration_date,onChange:f=>t("lease_expiration_date",f),type:"text",placeholder:"MM/DD/YYYY",tabIndex:21})]})]})]})},hL=({label:e,value:t,onChange:r,options:n,placeholder:s="Select...",disabled:o=!1,tabIndex:i})=>{const[a,l]=w.useState(!1),u=n.find(b=>b.id===t),d=(u==null?void 0:u.label)||"Not set",f=()=>{o||l(!0)},h=b=>{r(b||null),l(!1)},p=()=>{l(!1)},g=b=>{b.key==="Escape"&&(b.preventDefault(),b.stopPropagation(),p())};return a?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsxs("select",{value:t||"",onChange:b=>h(b.target.value),onBlur:p,onKeyDown:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:i,autoFocus:!0,children:[c.jsx("option",{value:"",children:s}),n.map(b=>c.jsx("option",{value:b.id,children:b.label},b.id))]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:f,onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),f())},onFocus:f,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:d})})]})},pL=async e=>{try{const{data:t,error:r}=await z.from("property").select("sf_id").eq("id",e).single();if(r||!(t!=null&&t.sf_id))return console.log("No sf_id found for property:",r==null?void 0:r.message),null;const{data:n,error:s}=await z.from("salesforce_Property__c").select("RecordTypeId").eq("Id",t.sf_id).single();return s?(console.log("RecordTypeId field not found:",s.message),null):(n==null?void 0:n.RecordTypeId)||null}catch(t){return console.log("Error checking for legacy record type:",t),null}},mL=({property:e,isEditing:t,onFieldUpdate:r,propertyRecordTypes:n=[]})=>{const[s,o]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{if(e.id&&!e.property_record_type_id){const u=await pL(e.id);console.log("🔍 Legacy RecordTypeId found:",u),a(u)}})()},[e.id,e.property_record_type_id]),c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx(hL,{label:"Property Record Type",value:e.property_record_type_id,onChange:l=>r("property_record_type_id",l),options:n.map(l=>({id:l.id,label:l.label})),placeholder:n.length===0?"No record types available":"Select record type...",disabled:n.length===0,tabIndex:20}),i&&!e.property_record_type_id&&c.jsxs("div",{className:"mt-1 text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded border border-blue-200",children:["Salesforce RecordTypeId: ",i]})]}),c.jsx(Ie,{label:"Property Name",value:e.property_name,onChange:l=>r("property_name",l),placeholder:"Property name or identifier",tabIndex:21})]}),c.jsx(Ie,{label:"Property Description",value:e.description,onChange:l=>r("description",l),placeholder:"Brief description of the property...",multiline:!0,rows:3}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Location Details"}),c.jsx(Ba,{label:"Trade Area",value:e.trade_area,onChange:l=>r("trade_area",l),field:"trade_area",placeholder:"Downtown, Suburb, etc."})]})]})]})},gL=({property:e,onFieldUpdate:t})=>{const[r,n]=w.useState(!1);return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Analysis"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Traffic Data"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ie,{label:"Traffic Count",value:e.traffic_count,onChange:s=>t("traffic_count",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Daily vehicle count"})]}),c.jsxs("div",{children:[c.jsx(Ie,{label:"Secondary Traffic Count",value:e.traffic_count_2nd,onChange:s=>t("traffic_count_2nd",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secondary road/access point"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Demographics"}),c.jsx(Ie,{label:"Demographic Information",value:e.demographics,onChange:s=>t("demographics",s),placeholder:"Population, income levels, age groups, household composition, etc.",multiline:!0,rows:4})]}),(e["1_mile_pop"]||e["3_mile_pop"])&&c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Population Radius Data"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-blue-800",children:"1-Mile Population"}),c.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e["1_mile_pop"]?e["1_mile_pop"].toLocaleString():"N/A"})]}),c.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-green-800",children:"3-Mile Population"}),c.jsx("div",{className:"text-2xl font-bold text-green-900",children:e["3_mile_pop"]?e["3_mile_pop"].toLocaleString():"N/A"})]}),c.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})})]}),e["1_mile_pop"]&&e["3_mile_pop"]&&c.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("strong",{children:"Population Density Analysis:"}),c.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["• 1-mile radius: ~",Math.round(e["1_mile_pop"]/3.14).toLocaleString()," people per sq mile",c.jsx("br",{}),"• 3-mile radius: ~",Math.round(e["3_mile_pop"]/28.27).toLocaleString()," people per sq mile",c.jsx("br",{}),"• Inner ring density: ",e["1_mile_pop"]>e["3_mile_pop"]/9?"High urban concentration":"Suburban spread pattern"]})]})})]}),e.total_traffic&&c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Total Traffic Volume"})]}),c.jsxs("div",{className:"text-lg font-bold text-orange-900",children:[e.total_traffic.toLocaleString()," vehicles/day"]}),c.jsx("div",{className:"text-xs text-orange-700 mt-1",children:"Combined traffic from all access points and nearby roads"})]})})]})]})},vL=({property:e,isEditing:t,onFieldUpdate:r})=>{const n=[{key:"costar_link",label:"CoStar",description:"Commercial real estate database",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),color:"blue"},{key:"reonomy_link",label:"Reonomy",description:"Property intelligence platform",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),color:"purple"},{key:"tax_url",label:"Tax Records",description:"Property tax information",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),color:"green"},{key:"map_link",label:"Map View",description:"Interactive map link",icon:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"orange"}],s=(i,a)=>{const l={blue:a?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",purple:a?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100",green:a?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",orange:a?"bg-orange-600 hover:bg-orange-700 text-white border-orange-600":"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100"};return l[i]||l.blue},o=i=>{try{return new URL(i),!0}catch{return!1}};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Links"})]}),t?c.jsx("div",{className:"space-y-4",children:n.map(i=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i.label}),c.jsx("input",{type:"url",value:e[i.key]||"",onChange:a=>r(i.key,a.target.value),placeholder:`https://example.com/${i.label.toLowerCase()}-link`,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]},i.key))}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(i=>{const a=e[i.key],l=a&&a.trim()!=="",u=l&&o(a);return c.jsx("button",{onClick:()=>{l&&u&&window.open(a,"_blank","noopener,noreferrer")},disabled:!l||!u,className:`w-full p-3 border rounded-lg text-left transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s(i.color,l&&u)}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:i.icon}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("div",{className:"font-medium text-sm",children:i.label}),c.jsx("div",{className:`text-xs opacity-75 truncate ${l&&u?"text-current":"text-gray-500"}`,children:l?u?"Click to open":"Invalid URL":i.description})]}),l&&u&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})},i.key)})}),t&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{if(e.latitude&&e.longitude){const i=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;r("map_link",i)}},disabled:!e.latitude||!e.longitude,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate Map Link"}),c.jsx("button",{onClick:()=>{if(e.address&&e.city&&e.state){const a=`https://www.costar.com/search?q=${encodeURIComponent(`${e.address} ${e.city} ${e.state}`)}`;r("costar_link",a)}},disabled:!e.address||!e.city||!e.state,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate CoStar Search"})]}),c.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Quick generation requires property address and coordinates to be set."})]})]})},yL=({property:e,isEditing:t,onFieldUpdate:r})=>{const[n,s]=w.useState(e.property_notes||""),[o,i]=w.useState(null),[a,l]=w.useState(!1),u=w.useRef(null),d=w.useRef(),f=()=>{u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")};w.useEffect(()=>{f()},[n,t]);const h=g=>{s(g),t&&(d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{try{l(!0),await r("property_notes",g),i(new Date)}catch(b){console.error("Auto-save failed:",b)}finally{l(!1)}},1e3))};w.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const p=g=>{const y=new Date().getTime()-g.getTime(),x=Math.floor(y/6e4);return x<1?"just now":x===1?"1 minute ago":x<60?`${x} minutes ago`:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Notes"})]}),t&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}),!a&&o&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsxs("span",{children:["Saved ",p(o)]})]})]})]}),t?c.jsxs("div",{className:"space-y-3",children:[c.jsx("textarea",{ref:u,value:n,onChange:g=>h(g.target.value),placeholder:"Add notes about this property, market conditions, tenant information, lease details, or any other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none overflow-hidden min-h-[120px]",style:{maxHeight:"400px"}}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[n.length," characters"]}),c.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border rounded text-xs",children:"Cmd+S"}),c.jsx("span",{children:"to save manually"})]})]}),c.jsx("div",{className:"text-right",children:"Auto-saves after 1 second"})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{const g=`Property visit completed on [DATE]
- Condition: 
- Tenant activity: 
- Market comparison: 
- Next steps: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Site Visit"}),c.jsx("button",{onClick:()=>{const g=`Market analysis as of [DATE]
- Comparable properties: 
- Pricing trends: 
- Occupancy rates: 
- Notable developments: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Market Update"}),c.jsx("button",{onClick:()=>{const g=`Contact follow-up [DATE]
- Person contacted: 
- Response: 
- Action items: 
- Next contact date: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Follow-up"})]})]})]}):c.jsx("div",{children:n?c.jsx("div",{className:"prose prose-sm max-w-none",children:c.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:n})}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-sm",children:"No notes added yet"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click Edit to add property notes"})]})}),t&&c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18.5a5.5 5.5 0 100-11 5.5 5.5 0 000 11z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2a10 10 0 100 20 10 10 0 000-20z"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Voice-to-Text Coming Soon"}),c.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Future enhancement will allow voice dictation for faster note-taking during property visits."})]})]})})]})},xL=({propertyId:e,mode:t="view",initialLocation:r,onSave:n,onBack:s=()=>window.history.back()})=>{const[o,i]=w.useState(!1),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState([]),[p,g]=w.useState("idle"),{property:b,loading:y,error:x,updateProperty:m,createProperty:v,refreshProperty:_}=lL(e),{formData:k,updateField:S,validation:D,isDirty:N,resetForm:E}=cL(b||void 0);w.useEffect(()=>{(async()=>{try{const[O,B,C]=await Promise.all([z.from("property_type").select("*").eq("active",!0).order("sort_order"),z.from("property_stage").select("*").eq("active",!0).order("sort_order"),z.from("property_record_type").select("*").eq("active",!0).order("sort_order")]);O.data&&l(O.data),B.data&&d(B.data),C.data?h(C.data):(console.log("No property record types found in lookup table"),h([]))}catch(O){console.error("Error loading dropdown data:",O),h([])}})()},[]),w.useEffect(()=>{t==="create"&&r&&!k.latitude&&!k.longitude&&(S("latitude",r.lat),S("longitude",r.lng))},[t,r,k.latitude,k.longitude,S]),w.useEffect(()=>{b&&E(b)},[b,E]);const j=async()=>{},I=async(T,O)=>{if(S(T,O),e&&t!=="create")try{g("saving"),await m({[T]:O}),g("saved"),setTimeout(()=>g("idle"),2e3)}catch(B){console.error("Auto-save failed:",B),g("error")}},U=()=>new Promise((T,O)=>{if(!navigator.geolocation){O(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(B=>{T({lat:B.coords.latitude,lng:B.coords.longitude})},B=>{O(new Error("Failed to get current location: "+B.message))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),A=()=>{console.log("Call contact for property:",e)};if(y)return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"bg-slate-800 h-32"}),c.jsx("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})]})});if(x&&t!=="create")return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Property"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x}),c.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})});const $=t==="create"?k:b||k;return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(uL,{property:{...$,property_type:a.find(T=>T.id===$.property_type_id),property_stage:u.find(T=>T.id===$.property_stage_id)},isEditing:o,onToggleEdit:j,onBack:s,onGetLocation:()=>U().then(T=>{I("latitude",T.lat),I("longitude",T.lng)}),onCallContact:A}),c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-8",children:[o&&D.warnings.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Recommendations"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:D.warnings.map((T,O)=>c.jsx("li",{children:T},O))})]})]})}),o&&p!=="idle"&&c.jsxs("div",{className:`p-2 rounded-md text-sm mb-4 ${p==="saving"?"bg-blue-50 text-blue-700":p==="saved"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[p==="saving"&&"Saving changes...",p==="saved"&&"Changes saved successfully",p==="error"&&"Error saving changes"]}),c.jsx(mL,{property:$,isEditing:o,onFieldUpdate:I,propertyRecordTypes:f}),c.jsx(dL,{property:$,onFieldUpdate:I,onGetCurrentLocation:U}),c.jsx(fL,{property:{...$,property_record_type:f.find(T=>T.id===$.property_record_type_id)},onFieldUpdate:I}),c.jsx(gL,{property:$,onFieldUpdate:I}),c.jsx(vL,{property:$,isEditing:o,onFieldUpdate:I}),c.jsx(yL,{property:$,isEditing:o,onFieldUpdate:I}),o&&!D.isValid&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please fix these errors:"}),c.jsx("ul",{className:"mt-1 text-xs text-red-700 list-disc list-inside",children:Object.entries(D.errors).map(([T,O])=>c.jsxs("li",{children:[c.jsxs("strong",{children:[T,":"]})," ",O]},T))})]})]})})]})]})};function Gg(){const{propertyId:e}=vy(),t=Zl(),[r,n]=w.useState(null),[s,o]=w.useState(!0),[i,a]=w.useState(null),l=e==="create";w.useEffect(()=>{(async()=>{if(!e||l){o(!1);return}try{o(!0);const{data:h,error:p}=await z.from("property").select("*").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching property:",h),a(h instanceof Error?h.message:"Failed to load property")}finally{o(!1)}})()},[e,l]);const u=()=>{t(-1)},d=f=>{n(f),l&&t(`/property/${f.id}`)};return s?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Loading property..."})]})}):i&&!l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Property Not Found"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})}):c.jsx(xL,{propertyId:l?void 0:e,mode:l?"create":"view",onSave:d,onBack:u})}function bL(){const e=Mr(),{user:t,signOut:r}=mC(),n=o=>`px-4 py-2 rounded hover:bg-blue-100 ${e.pathname===o?"bg-blue-200 font-semibold":""}`,s=async()=>{await r()};return c.jsxs("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex space-x-4",children:[c.jsx(ui,{to:"/master-pipeline",className:n("/master-pipeline"),children:"Master Pipeline"}),c.jsx(ui,{to:"/property/create",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"+ New Property"})]}),t&&c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:t.email}),c.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})}function wL(){return c.jsx(gC,{children:c.jsx(vC,{children:c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx(bL,{}),c.jsxs(wk,{children:[c.jsx(ss,{path:"/",element:c.jsx(xk,{to:"/master-pipeline",replace:!0})}),c.jsx(ss,{path:"/master-pipeline",element:c.jsx(W2,{})}),c.jsx(ss,{path:"/deal/:dealId",element:c.jsx(aL,{})}),c.jsx(ss,{path:"/property/create",element:c.jsx(Gg,{})}),c.jsx(ss,{path:"/property/:propertyId",element:c.jsx(Gg,{})})]})]})})})}Ou.createRoot(document.getElementById("root")).render(c.jsx(P.StrictMode,{children:c.jsx(zk,{children:c.jsx(wL,{})})}));
