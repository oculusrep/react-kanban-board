var ow=Object.defineProperty;var iw=(e,t,r)=>t in e?ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>(iw(e,typeof t!="symbol"?t+"":t,r),r);function aw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Xg={exports:{}},Bl={},Zg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=Symbol.for("react.element"),cw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),mw=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),vw=Symbol.for("react.memo"),yw=Symbol.for("react.lazy"),Kh=Symbol.iterator;function xw(e){return e===null||typeof e!="object"?null:(e=Kh&&e[Kh]||e["@@iterator"],typeof e=="function"?e:null)}var e0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t0=Object.assign,r0={};function Zs(e,t,r){this.props=e,this.context=t,this.refs=r0,this.updater=r||e0}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n0(){}n0.prototype=Zs.prototype;function sf(e,t,r){this.props=e,this.context=t,this.refs=r0,this.updater=r||e0}var of=sf.prototype=new n0;of.constructor=sf;t0(of,Zs.prototype);of.isPureReactComponent=!0;var Qh=Array.isArray,s0=Object.prototype.hasOwnProperty,af={current:null},o0={key:!0,ref:!0,__self:!0,__source:!0};function i0(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)s0.call(t,n)&&!o0.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Di,type:e,key:o,ref:i,props:s,_owner:af.current}}function bw(e,t){return{$$typeof:Di,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Di}function ww(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Jh=/\/+/g;function Cc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ww(""+e.key):t.toString(36)}function ka(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Di:case cw:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Cc(i,0):n,Qh(s)?(r="",e!=null&&(r=e.replace(Jh,"$&/")+"/"),ka(s,t,r,"",function(u){return u})):s!=null&&(lf(s)&&(s=bw(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Jh,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Qh(e))for(var a=0;a<e.length;a++){o=e[a];var l=n+Cc(o,a);i+=ka(o,t,r,l,s)}else if(l=xw(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=n+Cc(o,a++),i+=ka(o,t,r,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function zi(e,t,r){if(e==null)return e;var n=[],s=0;return ka(e,n,"","",function(o){return t.call(r,o,s++)}),n}function _w(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},Sa={transition:null},kw={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Sa,ReactCurrentOwner:af};function a0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:zi,forEach:function(e,t,r){zi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return zi(e,function(){t++}),t},toArray:function(e){return zi(e,function(t){return t})||[]},only:function(e){if(!lf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=Zs;te.Fragment=uw;te.Profiler=fw;te.PureComponent=sf;te.StrictMode=dw;te.Suspense=gw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kw;te.act=a0;te.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=t0({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=af.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)s0.call(t,l)&&!o0.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Di,type:e.type,key:s,ref:o,props:n,_owner:i}};te.createContext=function(e){return e={$$typeof:pw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hw,_context:e},e.Consumer=e};te.createElement=i0;te.createFactory=function(e){var t=i0.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:mw,render:e}};te.isValidElement=lf;te.lazy=function(e){return{$$typeof:yw,_payload:{_status:-1,_result:e},_init:_w}};te.memo=function(e,t){return{$$typeof:vw,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Sa.transition;Sa.transition={};try{e()}finally{Sa.transition=t}};te.unstable_act=a0;te.useCallback=function(e,t){return lt.current.useCallback(e,t)};te.useContext=function(e){return lt.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};te.useEffect=function(e,t){return lt.current.useEffect(e,t)};te.useId=function(){return lt.current.useId()};te.useImperativeHandle=function(e,t,r){return lt.current.useImperativeHandle(e,t,r)};te.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return lt.current.useMemo(e,t)};te.useReducer=function(e,t,r){return lt.current.useReducer(e,t,r)};te.useRef=function(e){return lt.current.useRef(e)};te.useState=function(e){return lt.current.useState(e)};te.useSyncExternalStore=function(e,t,r){return lt.current.useSyncExternalStore(e,t,r)};te.useTransition=function(){return lt.current.useTransition()};te.version="18.3.1";Zg.exports=te;var w=Zg.exports;const P=Jg(w),l0=aw({__proto__:null,default:P},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=w,Nw=Symbol.for("react.element"),Dw=Symbol.for("react.fragment"),Cw=Object.prototype.hasOwnProperty,jw=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ew={key:!0,ref:!0,__self:!0,__source:!0};function c0(e,t,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Cw.call(t,n)&&!Ew.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Nw,type:e,key:o,ref:i,props:s,_owner:jw.current}}Bl.Fragment=Dw;Bl.jsx=c0;Bl.jsxs=c0;Xg.exports=Bl;var c=Xg.exports,Lu={},u0={exports:{}},Nt={},d0={exports:{}},f0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,R){var L=D.length;D.push(R);e:for(;0<L;){var W=L-1>>>1,Q=D[W];if(0<s(Q,R))D[W]=R,D[L]=Q,L=W;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var R=D[0],L=D.pop();if(L!==R){D[0]=L;e:for(var W=0,Q=D.length,Ne=Q>>>1;W<Ne;){var Re=2*(W+1)-1,Ct=D[Re],Ke=Re+1,I=D[Ke];if(0>s(Ct,L))Ke<Q&&0>s(I,Ct)?(D[W]=I,D[Ke]=L,W=Ke):(D[W]=Ct,D[Re]=L,W=Re);else if(Ke<Q&&0>s(I,L))D[W]=I,D[Ke]=L,W=Ke;else break e}}return R}function s(D,R){var L=D.sortIndex-R.sortIndex;return L!==0?L:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=D)n(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=r(u)}}function _(D){if(x=!1,v(D),!g)if(r(l)!==null)g=!0,O(k);else{var R=r(u);R!==null&&U(_,R.startTime-D)}}function k(D,R){g=!1,x&&(x=!1,y(C),C=-1),p=!0;var L=h;try{for(v(R),f=r(l);f!==null&&(!(f.expirationTime>R)||D&&!M());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var Q=W(f.expirationTime<=R);R=e.unstable_now(),typeof Q=="function"?f.callback=Q:f===r(l)&&n(l),v(R)}else n(l);f=r(l)}if(f!==null)var Ne=!0;else{var Re=r(u);Re!==null&&U(_,Re.startTime-R),Ne=!1}return Ne}finally{f=null,h=L,p=!1}}var S=!1,N=null,C=-1,j=5,E=-1;function M(){return!(e.unstable_now()-E<j)}function H(){if(N!==null){var D=e.unstable_now();E=D;var R=!0;try{R=N(!0,D)}finally{R?F():(S=!1,N=null)}}else S=!1}var F;if(typeof m=="function")F=function(){m(H)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=H,F=function(){T.postMessage(null)}}else F=function(){b(H,0)};function O(D){N=D,S||(S=!0,F())}function U(D,R){C=b(function(){D(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,O(k))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var L=h;h=R;try{return D()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=h;h=D;try{return R()}finally{h=L}},e.unstable_scheduleCallback=function(D,R,L){var W=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,D){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,D={id:d++,callback:R,priorityLevel:D,startTime:L,expirationTime:Q,sortIndex:-1},L>W?(D.sortIndex=L,t(u,D),r(l)===null&&D===r(u)&&(x?(y(C),C=-1):x=!0,U(_,L-W))):(D.sortIndex=Q,t(l,D),g||p||(g=!0,O(k))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var R=h;return function(){var L=h;h=R;try{return D.apply(this,arguments)}finally{h=L}}}})(f0);d0.exports=f0;var Pw=d0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=w,St=Pw;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h0=new Set,Jo={};function Xn(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(Jo[e]=t,e=0;e<t.length;e++)h0.add(t[e])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,Rw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xh={},Zh={};function Ow(e){return Au.call(Zh,e)?!0:Au.call(Xh,e)?!1:Rw.test(e)?Zh[e]=!0:(Xh[e]=!0,!1)}function Iw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mw(e,t,r,n){if(t===null||typeof t>"u"||Iw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var cf=/[\-:]([a-z])/g;function uf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cf,uf);qe[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cf,uf);qe[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cf,uf);qe[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function df(e,t,r,n){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mw(t,r,s,n)&&(r=null),n||s===null?Ow(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=Tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),ff=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),$u=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),pf=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),g0=Symbol.for("react.offscreen"),ep=Symbol.iterator;function ho(e){return e===null||typeof e!="object"?null:(e=ep&&e[ep]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Object.assign,jc;function To(e){if(jc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);jc=t&&t[1]||""}return`
`+jc+e}var Ec=!1;function Pc(e,t){if(!e||Ec)return"";Ec=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{Ec=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?To(e):""}function Lw(e){switch(e.tag){case 5:return To(e.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return e=Pc(e.type,!1),e;case 11:return e=Pc(e.type.render,!1),e;case 1:return e=Pc(e.type,!0),e;default:return""}}function Uu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ms:return"Fragment";case ps:return"Portal";case Fu:return"Profiler";case ff:return"StrictMode";case $u:return"Suspense";case Bu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case m0:return(e.displayName||"Context")+".Consumer";case p0:return(e._context.displayName||"Context")+".Provider";case hf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pf:return t=e.displayName||null,t!==null?t:Uu(e.type)||"Memo";case Yr:t=e._payload,e=e._init;try{return Uu(e(t))}catch{}}return null}function Aw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uu(t);case 8:return t===ff?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function v0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fw(e){var t=v0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vi(e){e._valueTracker||(e._valueTracker=Fw(e))}function y0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=v0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function za(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wu(e,t){var r=t.checked;return Se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=hn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x0(e,t){t=t.checked,t!=null&&df(e,"checked",t,!1)}function Hu(e,t){x0(e,t);var r=hn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zu(e,t.type,r):t.hasOwnProperty("defaultValue")&&zu(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function zu(e,t,r){(t!=="number"||za(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ro=Array.isArray;function Cs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+hn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Yu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function np(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(Ro(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:hn(r)}}function b0(e,t){var r=hn(t.value),n=hn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function sp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gi,_0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gi=Gi||document.createElement("div"),Gi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$w=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(e){$w.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fo[t]=Fo[e]})});function k0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fo.hasOwnProperty(e)&&Fo[e]?(""+t).trim():t+"px"}function S0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=k0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Bw=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gu(e,t){if(t){if(Bw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function qu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=null;function mf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qu=null,js=null,Es=null;function op(e){if(e=Ei(e)){if(typeof Qu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Yl(t),Qu(e.stateNode,e.type,t))}}function N0(e){js?Es?Es.push(e):Es=[e]:js=e}function D0(){if(js){var e=js,t=Es;if(Es=js=null,op(e),t)for(e=0;e<t.length;e++)op(t[e])}}function C0(e,t){return e(t)}function j0(){}var Tc=!1;function E0(e,t,r){if(Tc)return e(t,r);Tc=!0;try{return C0(e,t,r)}finally{Tc=!1,(js!==null||Es!==null)&&(j0(),D0())}}function Zo(e,t){var r=e.stateNode;if(r===null)return null;var n=Yl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var Ju=!1;if(Rr)try{var po={};Object.defineProperty(po,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Ju=!1}function Uw(e,t,r,n,s,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var $o=!1,Ya=null,Va=!1,Xu=null,Ww={onError:function(e){$o=!0,Ya=e}};function Hw(e,t,r,n,s,o,i,a,l){$o=!1,Ya=null,Uw.apply(Ww,arguments)}function zw(e,t,r,n,s,o,i,a,l){if(Hw.apply(this,arguments),$o){if($o){var u=Ya;$o=!1,Ya=null}else throw Error(A(198));Va||(Va=!0,Xu=u)}}function Zn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function P0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ip(e){if(Zn(e)!==e)throw Error(A(188))}function Yw(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return ip(s),e;if(o===n)return ip(s),t;o=o.sibling}throw Error(A(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=o;break}if(a===n){i=!0,n=s,r=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===r){i=!0,r=o,n=s;break}if(a===n){i=!0,n=o,r=s;break}a=a.sibling}if(!i)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function T0(e){return e=Yw(e),e!==null?R0(e):null}function R0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=R0(e);if(t!==null)return t;e=e.sibling}return null}var O0=St.unstable_scheduleCallback,ap=St.unstable_cancelCallback,Vw=St.unstable_shouldYield,Gw=St.unstable_requestPaint,Ee=St.unstable_now,qw=St.unstable_getCurrentPriorityLevel,gf=St.unstable_ImmediatePriority,I0=St.unstable_UserBlockingPriority,Ga=St.unstable_NormalPriority,Kw=St.unstable_LowPriority,M0=St.unstable_IdlePriority,Ul=null,dr=null;function Qw(e){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Ul,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Zw,Jw=Math.log,Xw=Math.LN2;function Zw(e){return e>>>=0,e===0?32:31-(Jw(e)/Xw|0)|0}var qi=64,Ki=4194304;function Oo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=Oo(a):(o&=i,o!==0&&(n=Oo(o)))}else i=r&~s,i!==0?n=Oo(i):o!==0&&(n=Oo(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kt(t),s=1<<r,n|=e[r],t&=~s;return n}function e_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t_(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Kt(o),a=1<<i,l=s[i];l===-1?(!(a&r)||a&n)&&(s[i]=e_(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Zu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L0(){var e=qi;return qi<<=1,!(qi&4194240)&&(qi=64),e}function Rc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ci(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function r_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Kt(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function vf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var fe=0;function A0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F0,yf,$0,B0,U0,ed=!1,Qi=[],en=null,tn=null,rn=null,ei=new Map,ti=new Map,Gr=[],n_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lp(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function mo(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ei(t),t!==null&&yf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function s_(e,t,r,n,s){switch(t){case"focusin":return en=mo(en,e,t,r,n,s),!0;case"dragenter":return tn=mo(tn,e,t,r,n,s),!0;case"mouseover":return rn=mo(rn,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return ei.set(o,mo(ei.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,ti.set(o,mo(ti.get(o)||null,e,t,r,n,s)),!0}return!1}function W0(e){var t=Rn(e.target);if(t!==null){var r=Zn(t);if(r!==null){if(t=r.tag,t===13){if(t=P0(r),t!==null){e.blockedOn=t,U0(e.priority,function(){$0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Na(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=td(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ku=n,r.target.dispatchEvent(n),Ku=null}else return t=Ei(r),t!==null&&yf(t),e.blockedOn=r,!1;t.shift()}return!0}function cp(e,t,r){Na(e)&&r.delete(t)}function o_(){ed=!1,en!==null&&Na(en)&&(en=null),tn!==null&&Na(tn)&&(tn=null),rn!==null&&Na(rn)&&(rn=null),ei.forEach(cp),ti.forEach(cp)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,o_)))}function ri(e){function t(s){return go(s,e)}if(0<Qi.length){go(Qi[0],e);for(var r=1;r<Qi.length;r++){var n=Qi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(en!==null&&go(en,e),tn!==null&&go(tn,e),rn!==null&&go(rn,e),ei.forEach(t),ti.forEach(t),r=0;r<Gr.length;r++)n=Gr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gr.length&&(r=Gr[0],r.blockedOn===null);)W0(r),r.blockedOn===null&&Gr.shift()}var Ps=Fr.ReactCurrentBatchConfig,Ka=!0;function i_(e,t,r,n){var s=fe,o=Ps.transition;Ps.transition=null;try{fe=1,xf(e,t,r,n)}finally{fe=s,Ps.transition=o}}function a_(e,t,r,n){var s=fe,o=Ps.transition;Ps.transition=null;try{fe=4,xf(e,t,r,n)}finally{fe=s,Ps.transition=o}}function xf(e,t,r,n){if(Ka){var s=td(e,t,r,n);if(s===null)Wc(e,t,n,Qa,r),lp(e,n);else if(s_(s,e,t,r,n))n.stopPropagation();else if(lp(e,n),t&4&&-1<n_.indexOf(e)){for(;s!==null;){var o=Ei(s);if(o!==null&&F0(o),o=td(e,t,r,n),o===null&&Wc(e,t,n,Qa,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Wc(e,t,n,null,r)}}var Qa=null;function td(e,t,r,n){if(Qa=null,e=mf(n),e=Rn(e),e!==null)if(t=Zn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=P0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qa=e,null}function H0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qw()){case gf:return 1;case I0:return 4;case Ga:case Kw:return 16;case M0:return 536870912;default:return 16}default:return 16}}var Jr=null,bf=null,Da=null;function z0(){if(Da)return Da;var e,t=bf,r=t.length,n,s="value"in Jr?Jr.value:Jr.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return Da=s.slice(e,1<n?1-n:void 0)}function Ca(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ji(){return!0}function up(){return!1}function Dt(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ji:up,this.isPropagationStopped=up,this}return Se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wf=Dt(eo),ji=Se({},eo,{view:0,detail:0}),l_=Dt(ji),Oc,Ic,vo,Wl=Se({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_f,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vo&&(vo&&e.type==="mousemove"?(Oc=e.screenX-vo.screenX,Ic=e.screenY-vo.screenY):Ic=Oc=0,vo=e),Oc)},movementY:function(e){return"movementY"in e?e.movementY:Ic}}),dp=Dt(Wl),c_=Se({},Wl,{dataTransfer:0}),u_=Dt(c_),d_=Se({},ji,{relatedTarget:0}),Mc=Dt(d_),f_=Se({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),h_=Dt(f_),p_=Se({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),m_=Dt(p_),g_=Se({},eo,{data:0}),fp=Dt(g_),v_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x_[e])?!!t[e]:!1}function _f(){return b_}var w_=Se({},ji,{key:function(e){if(e.key){var t=v_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ca(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_f,charCode:function(e){return e.type==="keypress"?Ca(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ca(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),__=Dt(w_),k_=Se({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=Dt(k_),S_=Se({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_f}),N_=Dt(S_),D_=Se({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=Dt(D_),j_=Se({},Wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),E_=Dt(j_),P_=[9,13,27,32],kf=Rr&&"CompositionEvent"in window,Bo=null;Rr&&"documentMode"in document&&(Bo=document.documentMode);var T_=Rr&&"TextEvent"in window&&!Bo,Y0=Rr&&(!kf||Bo&&8<Bo&&11>=Bo),pp=String.fromCharCode(32),mp=!1;function V0(e,t){switch(e){case"keyup":return P_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function R_(e,t){switch(e){case"compositionend":return G0(t);case"keypress":return t.which!==32?null:(mp=!0,pp);case"textInput":return e=t.data,e===pp&&mp?null:e;default:return null}}function O_(e,t){if(gs)return e==="compositionend"||!kf&&V0(e,t)?(e=z0(),Da=bf=Jr=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y0&&t.locale!=="ko"?null:t.data;default:return null}}var I_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!I_[e.type]:t==="textarea"}function q0(e,t,r,n){N0(n),t=Ja(t,"onChange"),0<t.length&&(r=new wf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Uo=null,ni=null;function M_(e){ov(e,0)}function Hl(e){var t=xs(e);if(y0(t))return e}function L_(e,t){if(e==="change")return t}var K0=!1;if(Rr){var Lc;if(Rr){var Ac="oninput"in document;if(!Ac){var vp=document.createElement("div");vp.setAttribute("oninput","return;"),Ac=typeof vp.oninput=="function"}Lc=Ac}else Lc=!1;K0=Lc&&(!document.documentMode||9<document.documentMode)}function yp(){Uo&&(Uo.detachEvent("onpropertychange",Q0),ni=Uo=null)}function Q0(e){if(e.propertyName==="value"&&Hl(ni)){var t=[];q0(t,ni,e,mf(e)),E0(M_,t)}}function A_(e,t,r){e==="focusin"?(yp(),Uo=t,ni=r,Uo.attachEvent("onpropertychange",Q0)):e==="focusout"&&yp()}function F_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hl(ni)}function $_(e,t){if(e==="click")return Hl(t)}function B_(e,t){if(e==="input"||e==="change")return Hl(t)}function U_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:U_;function si(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Au.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function xp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bp(e,t){var r=xp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xp(r)}}function J0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?J0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X0(){for(var e=window,t=za();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=za(e.document)}return t}function Sf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function W_(e){var t=X0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&J0(r.ownerDocument.documentElement,r)){if(n!==null&&Sf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=bp(r,o);var i=bp(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H_=Rr&&"documentMode"in document&&11>=document.documentMode,vs=null,rd=null,Wo=null,nd=!1;function wp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nd||vs==null||vs!==za(n)||(n=vs,"selectionStart"in n&&Sf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wo&&si(Wo,n)||(Wo=n,n=Ja(rd,"onSelect"),0<n.length&&(t=new wf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vs)))}function Xi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ys={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionend:Xi("Transition","TransitionEnd")},Fc={},Z0={};Rr&&(Z0=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function zl(e){if(Fc[e])return Fc[e];if(!ys[e])return e;var t=ys[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Z0)return Fc[e]=t[r];return e}var ev=zl("animationend"),tv=zl("animationiteration"),rv=zl("animationstart"),nv=zl("transitionend"),sv=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){sv.set(e,t),Xn(t,[e])}for(var $c=0;$c<_p.length;$c++){var Bc=_p[$c],z_=Bc.toLowerCase(),Y_=Bc[0].toUpperCase()+Bc.slice(1);yn(z_,"on"+Y_)}yn(ev,"onAnimationEnd");yn(tv,"onAnimationIteration");yn(rv,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(nv,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function kp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zw(n,t,void 0,e),e.currentTarget=null}function ov(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var a=n[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;kp(s,a,u),o=l}else for(i=0;i<n.length;i++){if(a=n[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;kp(s,a,u),o=l}}}if(Va)throw e=Xu,Va=!1,Xu=null,e}function ge(e,t){var r=t[ld];r===void 0&&(r=t[ld]=new Set);var n=e+"__bubble";r.has(n)||(iv(t,e,2,!1),r.add(n))}function Uc(e,t,r){var n=0;t&&(n|=4),iv(r,e,n,t)}var Zi="_reactListening"+Math.random().toString(36).slice(2);function oi(e){if(!e[Zi]){e[Zi]=!0,h0.forEach(function(r){r!=="selectionchange"&&(V_.has(r)||Uc(r,!1,e),Uc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zi]||(t[Zi]=!0,Uc("selectionchange",!1,t))}}function iv(e,t,r,n){switch(H0(t)){case 1:var s=i_;break;case 4:s=a_;break;default:s=xf}r=s.bind(null,t,r,e),s=void 0,!Ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wc(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Rn(a),i===null)return;if(l=i.tag,l===5||l===6){n=o=i;continue e}a=a.parentNode}}n=n.return}E0(function(){var u=o,d=mf(r),f=[];e:{var h=sv.get(e);if(h!==void 0){var p=wf,g=e;switch(e){case"keypress":if(Ca(r)===0)break e;case"keydown":case"keyup":p=__;break;case"focusin":g="focus",p=Mc;break;case"focusout":g="blur",p=Mc;break;case"beforeblur":case"afterblur":p=Mc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=u_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=N_;break;case ev:case tv:case rv:p=h_;break;case nv:p=C_;break;case"scroll":p=l_;break;case"wheel":p=E_;break;case"copy":case"cut":case"paste":p=m_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hp}var x=(t&4)!==0,b=!x&&e==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=Zo(m,y),_!=null&&x.push(ii(m,_,v)))),b)break;m=m.return}0<x.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Ku&&(g=r.relatedTarget||r.fromElement)&&(Rn(g)||g[Or]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Rn(g):null,g!==null&&(b=Zn(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=dp,_="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=hp,_="onPointerLeave",y="onPointerEnter",m="pointer"),b=p==null?h:xs(p),v=g==null?h:xs(g),h=new x(_,m+"leave",p,r,d),h.target=b,h.relatedTarget=v,_=null,Rn(d)===u&&(x=new x(y,m+"enter",g,r,d),x.target=v,x.relatedTarget=b,_=x),b=_,p&&g)t:{for(x=p,y=g,m=0,v=x;v;v=ns(v))m++;for(v=0,_=y;_;_=ns(_))v++;for(;0<m-v;)x=ns(x),m--;for(;0<v-m;)y=ns(y),v--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=ns(x),y=ns(y)}x=null}else x=null;p!==null&&Sp(f,h,p,x,!1),g!==null&&b!==null&&Sp(f,b,g,x,!0)}}e:{if(h=u?xs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=L_;else if(gp(h))if(K0)k=B_;else{k=F_;var S=A_}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=$_);if(k&&(k=k(e,u))){q0(f,k,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&zu(h,"number",h.value)}switch(S=u?xs(u):window,e){case"focusin":(gp(S)||S.contentEditable==="true")&&(vs=S,rd=u,Wo=null);break;case"focusout":Wo=rd=vs=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,wp(f,r,d);break;case"selectionchange":if(H_)break;case"keydown":case"keyup":wp(f,r,d)}var N;if(kf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else gs?V0(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Y0&&r.locale!=="ko"&&(gs||C!=="onCompositionStart"?C==="onCompositionEnd"&&gs&&(N=z0()):(Jr=d,bf="value"in Jr?Jr.value:Jr.textContent,gs=!0)),S=Ja(u,C),0<S.length&&(C=new fp(C,e,null,r,d),f.push({event:C,listeners:S}),N?C.data=N:(N=G0(r),N!==null&&(C.data=N)))),(N=T_?R_(e,r):O_(e,r))&&(u=Ja(u,"onBeforeInput"),0<u.length&&(d=new fp("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}ov(f,t)})}function ii(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ja(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Zo(e,r),o!=null&&n.unshift(ii(e,o,s)),o=Zo(e,t),o!=null&&n.push(ii(e,o,s))),e=e.return}return n}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sp(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=Zo(r,o),l!=null&&i.unshift(ii(r,l,a))):s||(l=Zo(r,o),l!=null&&i.push(ii(r,l,a)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var G_=/\r\n?/g,q_=/\u0000|\uFFFD/g;function Np(e){return(typeof e=="string"?e:""+e).replace(G_,`
`).replace(q_,"")}function ea(e,t,r){if(t=Np(t),Np(e)!==t&&r)throw Error(A(425))}function Xa(){}var sd=null,od=null;function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,K_=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,Q_=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(e){return Dp.resolve(null).then(e).catch(J_)}:ad;function J_(e){setTimeout(function(){throw e})}function Hc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ri(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ri(t)}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var to=Math.random().toString(36).slice(2),ar="__reactFiber$"+to,ai="__reactProps$"+to,Or="__reactContainer$"+to,ld="__reactEvents$"+to,X_="__reactListeners$"+to,Z_="__reactHandles$"+to;function Rn(e){var t=e[ar];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Or]||r[ar]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Cp(e);e!==null;){if(r=e[ar])return r;e=Cp(e)}return t}e=r,r=e.parentNode}return null}function Ei(e){return e=e[ar]||e[Or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Yl(e){return e[ai]||null}var cd=[],bs=-1;function xn(e){return{current:e}}function ve(e){0>bs||(e.current=cd[bs],cd[bs]=null,bs--)}function me(e,t){bs++,cd[bs]=e.current,e.current=t}var pn={},tt=xn(pn),pt=xn(!1),Hn=pn;function Ls(e,t){var r=e.type.contextTypes;if(!r)return pn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function Za(){ve(pt),ve(tt)}function jp(e,t,r){if(tt.current!==pn)throw Error(A(168));me(tt,t),me(pt,r)}function av(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(A(108,Aw(e)||"Unknown",s));return Se({},r,n)}function el(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,Hn=tt.current,me(tt,e),me(pt,pt.current),!0}function Ep(e,t,r){var n=e.stateNode;if(!n)throw Error(A(169));r?(e=av(e,t,Hn),n.__reactInternalMemoizedMergedChildContext=e,ve(pt),ve(tt),me(tt,e)):ve(pt),me(pt,r)}var wr=null,Vl=!1,zc=!1;function lv(e){wr===null?wr=[e]:wr.push(e)}function e1(e){Vl=!0,lv(e)}function bn(){if(!zc&&wr!==null){zc=!0;var e=0,t=fe;try{var r=wr;for(fe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wr=null,Vl=!1}catch(s){throw wr!==null&&(wr=wr.slice(e+1)),O0(gf,bn),s}finally{fe=t,zc=!1}}return null}var ws=[],_s=0,tl=null,rl=0,Tt=[],Rt=0,zn=null,kr=1,Sr="";function Dn(e,t){ws[_s++]=rl,ws[_s++]=tl,tl=e,rl=t}function cv(e,t,r){Tt[Rt++]=kr,Tt[Rt++]=Sr,Tt[Rt++]=zn,zn=e;var n=kr;e=Sr;var s=32-Kt(n)-1;n&=~(1<<s),r+=1;var o=32-Kt(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,kr=1<<32-Kt(t)+s|r<<s|n,Sr=o+e}else kr=1<<o|r<<s|n,Sr=e}function Nf(e){e.return!==null&&(Dn(e,1),cv(e,1,0))}function Df(e){for(;e===tl;)tl=ws[--_s],ws[_s]=null,rl=ws[--_s],ws[_s]=null;for(;e===zn;)zn=Tt[--Rt],Tt[Rt]=null,Sr=Tt[--Rt],Tt[Rt]=null,kr=Tt[--Rt],Tt[Rt]=null}var bt=null,yt=null,ye=!1,Gt=null;function uv(e,t){var r=It(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Pp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,yt=nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zn!==null?{id:kr,overflow:Sr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=It(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,yt=null,!0):!1;default:return!1}}function ud(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dd(e){if(ye){var t=yt;if(t){var r=t;if(!Pp(e,t)){if(ud(e))throw Error(A(418));t=nn(r.nextSibling);var n=bt;t&&Pp(e,t)?uv(n,r):(e.flags=e.flags&-4097|2,ye=!1,bt=e)}}else{if(ud(e))throw Error(A(418));e.flags=e.flags&-4097|2,ye=!1,bt=e}}}function Tp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function ta(e){if(e!==bt)return!1;if(!ye)return Tp(e),ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!id(e.type,e.memoizedProps)),t&&(t=yt)){if(ud(e))throw dv(),Error(A(418));for(;t;)uv(e,t),t=nn(t.nextSibling)}if(Tp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yt=nn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=bt?nn(e.stateNode.nextSibling):null;return!0}function dv(){for(var e=yt;e;)e=nn(e.nextSibling)}function As(){yt=bt=null,ye=!1}function Cf(e){Gt===null?Gt=[e]:Gt.push(e)}var t1=Fr.ReactCurrentBatchConfig;function yo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function ra(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rp(e){var t=e._init;return t(e._payload)}function fv(e){function t(y,m){if(e){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=ln(y,m),y.index=0,y.sibling=null,y}function o(y,m,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,_){return m===null||m.tag!==6?(m=Jc(v,y.mode,_),m.return=y,m):(m=s(m,v),m.return=y,m)}function l(y,m,v,_){var k=v.type;return k===ms?d(y,m,v.props.children,_,v.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yr&&Rp(k)===m.type)?(_=s(m,v.props),_.ref=yo(y,m,v),_.return=y,_):(_=Ia(v.type,v.key,v.props,null,y.mode,_),_.ref=yo(y,m,v),_.return=y,_)}function u(y,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Xc(v,y.mode,_),m.return=y,m):(m=s(m,v.children||[]),m.return=y,m)}function d(y,m,v,_,k){return m===null||m.tag!==7?(m=Fn(v,y.mode,_,k),m.return=y,m):(m=s(m,v),m.return=y,m)}function f(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Jc(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Yi:return v=Ia(m.type,m.key,m.props,null,y.mode,v),v.ref=yo(y,null,m),v.return=y,v;case ps:return m=Xc(m,y.mode,v),m.return=y,m;case Yr:var _=m._init;return f(y,_(m._payload),v)}if(Ro(m)||ho(m))return m=Fn(m,y.mode,v,null),m.return=y,m;ra(y,m)}return null}function h(y,m,v,_){var k=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(y,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yi:return v.key===k?l(y,m,v,_):null;case ps:return v.key===k?u(y,m,v,_):null;case Yr:return k=v._init,h(y,m,k(v._payload),_)}if(Ro(v)||ho(v))return k!==null?null:d(y,m,v,_,null);ra(y,v)}return null}function p(y,m,v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(m,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yi:return y=y.get(_.key===null?v:_.key)||null,l(m,y,_,k);case ps:return y=y.get(_.key===null?v:_.key)||null,u(m,y,_,k);case Yr:var S=_._init;return p(y,m,v,S(_._payload),k)}if(Ro(_)||ho(_))return y=y.get(v)||null,d(m,y,_,k,null);ra(m,_)}return null}function g(y,m,v,_){for(var k=null,S=null,N=m,C=m=0,j=null;N!==null&&C<v.length;C++){N.index>C?(j=N,N=null):j=N.sibling;var E=h(y,N,v[C],_);if(E===null){N===null&&(N=j);break}e&&N&&E.alternate===null&&t(y,N),m=o(E,m,C),S===null?k=E:S.sibling=E,S=E,N=j}if(C===v.length)return r(y,N),ye&&Dn(y,C),k;if(N===null){for(;C<v.length;C++)N=f(y,v[C],_),N!==null&&(m=o(N,m,C),S===null?k=N:S.sibling=N,S=N);return ye&&Dn(y,C),k}for(N=n(y,N);C<v.length;C++)j=p(N,y,C,v[C],_),j!==null&&(e&&j.alternate!==null&&N.delete(j.key===null?C:j.key),m=o(j,m,C),S===null?k=j:S.sibling=j,S=j);return e&&N.forEach(function(M){return t(y,M)}),ye&&Dn(y,C),k}function x(y,m,v,_){var k=ho(v);if(typeof k!="function")throw Error(A(150));if(v=k.call(v),v==null)throw Error(A(151));for(var S=k=null,N=m,C=m=0,j=null,E=v.next();N!==null&&!E.done;C++,E=v.next()){N.index>C?(j=N,N=null):j=N.sibling;var M=h(y,N,E.value,_);if(M===null){N===null&&(N=j);break}e&&N&&M.alternate===null&&t(y,N),m=o(M,m,C),S===null?k=M:S.sibling=M,S=M,N=j}if(E.done)return r(y,N),ye&&Dn(y,C),k;if(N===null){for(;!E.done;C++,E=v.next())E=f(y,E.value,_),E!==null&&(m=o(E,m,C),S===null?k=E:S.sibling=E,S=E);return ye&&Dn(y,C),k}for(N=n(y,N);!E.done;C++,E=v.next())E=p(N,y,C,E.value,_),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?C:E.key),m=o(E,m,C),S===null?k=E:S.sibling=E,S=E);return e&&N.forEach(function(H){return t(y,H)}),ye&&Dn(y,C),k}function b(y,m,v,_){if(typeof v=="object"&&v!==null&&v.type===ms&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Yi:e:{for(var k=v.key,S=m;S!==null;){if(S.key===k){if(k=v.type,k===ms){if(S.tag===7){r(y,S.sibling),m=s(S,v.props.children),m.return=y,y=m;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yr&&Rp(k)===S.type){r(y,S.sibling),m=s(S,v.props),m.ref=yo(y,S,v),m.return=y,y=m;break e}r(y,S);break}else t(y,S);S=S.sibling}v.type===ms?(m=Fn(v.props.children,y.mode,_,v.key),m.return=y,y=m):(_=Ia(v.type,v.key,v.props,null,y.mode,_),_.ref=yo(y,m,v),_.return=y,y=_)}return i(y);case ps:e:{for(S=v.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(y,m.sibling),m=s(m,v.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=Xc(v,y.mode,_),m.return=y,y=m}return i(y);case Yr:return S=v._init,b(y,m,S(v._payload),_)}if(Ro(v))return g(y,m,v,_);if(ho(v))return x(y,m,v,_);ra(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(y,m.sibling),m=s(m,v),m.return=y,y=m):(r(y,m),m=Jc(v,y.mode,_),m.return=y,y=m),i(y)):r(y,m)}return b}var Fs=fv(!0),hv=fv(!1),nl=xn(null),sl=null,ks=null,jf=null;function Ef(){jf=ks=sl=null}function Pf(e){var t=nl.current;ve(nl),e._currentValue=t}function fd(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){sl=e,jf=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(jf!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(sl===null)throw Error(A(308));ks=e,sl.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var On=null;function Tf(e){On===null?On=[e]:On.push(e)}function pv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Tf(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ir(e,n)}function Ir(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vr=!1;function Rf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ir(e,r)}return s=n.interleaved,s===null?(t.next=t,Tf(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ir(e,r)}function ja(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vf(e,r)}}function Op(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ol(e,t,r,n){var s=e.updateQueue;Vr=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=s.baseState;i=0,d=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,x=a;switch(h=t,p=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Se({},f,h);break e;case 2:Vr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Vn|=i,e.lanes=i,e.memoizedState=f}}function Ip(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(A(191,s));s.call(n)}}}var Pi={},fr=xn(Pi),li=xn(Pi),ci=xn(Pi);function In(e){if(e===Pi)throw Error(A(174));return e}function Of(e,t){switch(me(ci,t),me(li,e),me(fr,Pi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vu(t,e)}ve(fr),me(fr,t)}function $s(){ve(fr),ve(li),ve(ci)}function gv(e){In(ci.current);var t=In(fr.current),r=Vu(t,e.type);t!==r&&(me(li,e),me(fr,r))}function If(e){li.current===e&&(ve(fr),ve(li))}var we=xn(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yc=[];function Mf(){for(var e=0;e<Yc.length;e++)Yc[e]._workInProgressVersionPrimary=null;Yc.length=0}var Ea=Fr.ReactCurrentDispatcher,Vc=Fr.ReactCurrentBatchConfig,Yn=0,ke=null,Le=null,$e=null,al=!1,Ho=!1,ui=0,r1=0;function Qe(){throw Error(A(321))}function Lf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function Af(e,t,r,n,s,o){if(Yn=o,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ea.current=e===null||e.memoizedState===null?i1:a1,e=r(n,s),Ho){o=0;do{if(Ho=!1,ui=0,25<=o)throw Error(A(301));o+=1,$e=Le=null,t.updateQueue=null,Ea.current=l1,e=r(n,s)}while(Ho)}if(Ea.current=ll,t=Le!==null&&Le.next!==null,Yn=0,$e=Le=ke=null,al=!1,t)throw Error(A(300));return e}function Ff(){var e=ui!==0;return ui=0,e}function sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ke.memoizedState=$e=e:$e=$e.next=e,$e}function Bt(){if(Le===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?ke.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw Error(A(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?ke.memoizedState=$e=e:$e=$e.next=e}return $e}function di(e,t){return typeof t=="function"?t(e):t}function Gc(e){var t=Bt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=Le,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var a=i=null,l=null,u=o;do{var d=u.lane;if((Yn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,i=n):l=l.next=f,ke.lanes|=d,Vn|=d}u=u.next}while(u!==null&&u!==o);l===null?i=n:l.next=a,Xt(n,t.memoizedState)||(ht=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,ke.lanes|=o,Vn|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qc(e){var t=Bt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Xt(o,t.memoizedState)||(ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function vv(){}function yv(e,t){var r=ke,n=Bt(),s=t(),o=!Xt(n.memoizedState,s);if(o&&(n.memoizedState=s,ht=!0),n=n.queue,$f(wv.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,fi(9,bv.bind(null,r,n,s,t),void 0,null),Be===null)throw Error(A(349));Yn&30||xv(r,t,s)}return s}function xv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bv(e,t,r,n){t.value=r,t.getSnapshot=n,_v(t)&&kv(e)}function wv(e,t,r){return r(function(){_v(t)&&kv(e)})}function _v(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function kv(e){var t=Ir(e,1);t!==null&&Qt(t,e,1,-1)}function Mp(e){var t=sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:e},t.queue=e,e=e.dispatch=o1.bind(null,ke,e),[t.memoizedState,e]}function fi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Sv(){return Bt().memoizedState}function Pa(e,t,r,n){var s=sr();ke.flags|=e,s.memoizedState=fi(1|t,r,void 0,n===void 0?null:n)}function Gl(e,t,r,n){var s=Bt();n=n===void 0?null:n;var o=void 0;if(Le!==null){var i=Le.memoizedState;if(o=i.destroy,n!==null&&Lf(n,i.deps)){s.memoizedState=fi(t,r,o,n);return}}ke.flags|=e,s.memoizedState=fi(1|t,r,o,n)}function Lp(e,t){return Pa(8390656,8,e,t)}function $f(e,t){return Gl(2048,8,e,t)}function Nv(e,t){return Gl(4,2,e,t)}function Dv(e,t){return Gl(4,4,e,t)}function Cv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jv(e,t,r){return r=r!=null?r.concat([e]):null,Gl(4,4,Cv.bind(null,t,e),r)}function Bf(){}function Ev(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Pv(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Tv(e,t,r){return Yn&21?(Xt(r,t)||(r=L0(),ke.lanes|=r,Vn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=r)}function n1(e,t){var r=fe;fe=r!==0&&4>r?r:4,e(!0);var n=Vc.transition;Vc.transition={};try{e(!1),t()}finally{fe=r,Vc.transition=n}}function Rv(){return Bt().memoizedState}function s1(e,t,r){var n=an(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ov(e))Iv(t,r);else if(r=pv(e,t,r,n),r!==null){var s=at();Qt(r,e,n,s),Mv(r,t,n)}}function o1(e,t,r){var n=an(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ov(e))Iv(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,r);if(s.hasEagerState=!0,s.eagerState=a,Xt(a,i)){var l=t.interleaved;l===null?(s.next=s,Tf(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=pv(e,t,s,n),r!==null&&(s=at(),Qt(r,e,n,s),Mv(r,t,n))}}function Ov(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Iv(e,t){Ho=al=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Mv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vf(e,r)}}var ll={readContext:$t,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},i1={readContext:$t,useCallback:function(e,t){return sr().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Lp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Pa(4194308,4,Cv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var r=sr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=sr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=s1.bind(null,ke,e),[n.memoizedState,e]},useRef:function(e){var t=sr();return e={current:e},t.memoizedState=e},useState:Mp,useDebugValue:Bf,useDeferredValue:function(e){return sr().memoizedState=e},useTransition:function(){var e=Mp(!1),t=e[0];return e=n1.bind(null,e[1]),sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ke,s=sr();if(ye){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),Be===null)throw Error(A(349));Yn&30||xv(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Lp(wv.bind(null,n,o,e),[e]),n.flags|=2048,fi(9,bv.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=sr(),t=Be.identifierPrefix;if(ye){var r=Sr,n=kr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ui++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=r1++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a1={readContext:$t,useCallback:Ev,useContext:$t,useEffect:$f,useImperativeHandle:jv,useInsertionEffect:Nv,useLayoutEffect:Dv,useMemo:Pv,useReducer:Gc,useRef:Sv,useState:function(){return Gc(di)},useDebugValue:Bf,useDeferredValue:function(e){var t=Bt();return Tv(t,Le.memoizedState,e)},useTransition:function(){var e=Gc(di)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:vv,useSyncExternalStore:yv,useId:Rv,unstable_isNewReconciler:!1},l1={readContext:$t,useCallback:Ev,useContext:$t,useEffect:$f,useImperativeHandle:jv,useInsertionEffect:Nv,useLayoutEffect:Dv,useMemo:Pv,useReducer:qc,useRef:Sv,useState:function(){return qc(di)},useDebugValue:Bf,useDeferredValue:function(e){var t=Bt();return Le===null?t.memoizedState=e:Tv(t,Le.memoizedState,e)},useTransition:function(){var e=qc(di)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:vv,useSyncExternalStore:yv,useId:Rv,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=Se({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hd(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Se({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ql={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=at(),s=an(e),o=Nr(n,s);o.payload=t,r!=null&&(o.callback=r),t=sn(e,o,s),t!==null&&(Qt(t,e,s,n),ja(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=at(),s=an(e),o=Nr(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=sn(e,o,s),t!==null&&(Qt(t,e,s,n),ja(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=at(),n=an(e),s=Nr(r,n);s.tag=2,t!=null&&(s.callback=t),t=sn(e,s,n),t!==null&&(Qt(t,e,n,r),ja(t,e,n))}};function Ap(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!si(r,n)||!si(s,o):!0}function Lv(e,t,r){var n=!1,s=pn,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(s=mt(t)?Hn:tt.current,n=t.contextTypes,o=(n=n!=null)?Ls(e,s):pn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ql,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Fp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ql.enqueueReplaceState(t,t.state,null)}function pd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Rf(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=$t(o):(o=mt(t)?Hn:tt.current,s.context=Ls(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(hd(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ql.enqueueReplaceState(s,s.state,null),ol(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Bs(e,t){try{var r="",n=t;do r+=Lw(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Kc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function md(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var c1=typeof WeakMap=="function"?WeakMap:Map;function Av(e,t,r){r=Nr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ul||(ul=!0,Nd=n),md(e,t)},r}function Fv(e,t,r){r=Nr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){md(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){md(e,t),typeof n!="function"&&(on===null?on=new Set([this]):on.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function $p(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new c1;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=k1.bind(null,e,t,r),t.then(e,e))}function Bp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Up(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Nr(-1,1),t.tag=2,sn(r,t,1))),r.lanes|=1),e)}var u1=Fr.ReactCurrentOwner,ht=!1;function st(e,t,r,n){t.child=e===null?hv(t,null,r,n):Fs(t,e.child,r,n)}function Wp(e,t,r,n,s){r=r.render;var o=t.ref;return Ts(t,s),n=Af(e,t,r,n,o,s),r=Ff(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mr(e,t,s)):(ye&&r&&Nf(t),t.flags|=1,st(e,t,n,s),t.child)}function Hp(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!qf(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,$v(e,t,o,n,s)):(e=Ia(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:si,r(i,n)&&e.ref===t.ref)return Mr(e,t,s)}return t.flags|=1,e=ln(o,n),e.ref=t.ref,e.return=t,t.child=e}function $v(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(si(o,n)&&e.ref===t.ref)if(ht=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Mr(e,t,s)}return gd(e,t,r,n,s)}function Bv(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Ns,vt),vt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Ns,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,me(Ns,vt),vt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,me(Ns,vt),vt|=n;return st(e,t,s,r),t.child}function Uv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gd(e,t,r,n,s){var o=mt(r)?Hn:tt.current;return o=Ls(t,o),Ts(t,s),r=Af(e,t,r,n,o,s),n=Ff(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mr(e,t,s)):(ye&&n&&Nf(t),t.flags|=1,st(e,t,r,s),t.child)}function zp(e,t,r,n,s){if(mt(r)){var o=!0;el(t)}else o=!1;if(Ts(t,s),t.stateNode===null)Ta(e,t),Lv(t,r,n),pd(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=$t(u):(u=mt(r)?Hn:tt.current,u=Ls(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Fp(t,i,n,u),Vr=!1;var h=t.memoizedState;i.state=h,ol(t,n,i,s),l=t.memoizedState,a!==n||h!==l||pt.current||Vr?(typeof d=="function"&&(hd(t,r,d,n),l=t.memoizedState),(a=Vr||Ap(t,r,a,n,h,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,mv(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:zt(t.type,a),i.props=u,f=t.pendingProps,h=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=$t(l):(l=mt(r)?Hn:tt.current,l=Ls(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Fp(t,i,n,l),Vr=!1,h=t.memoizedState,i.state=h,ol(t,n,i,s);var g=t.memoizedState;a!==f||h!==g||pt.current||Vr?(typeof p=="function"&&(hd(t,r,p,n),g=t.memoizedState),(u=Vr||Ap(t,r,u,n,h,g,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return vd(e,t,r,n,o,s)}function vd(e,t,r,n,s,o){Uv(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Ep(t,r,!1),Mr(e,t,o);n=t.stateNode,u1.current=t;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Fs(t,e.child,null,o),t.child=Fs(t,null,a,o)):st(e,t,a,o),t.memoizedState=n.state,s&&Ep(t,r,!0),t.child}function Wv(e){var t=e.stateNode;t.pendingContext?jp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jp(e,t.context,!1),Of(e,t.containerInfo)}function Yp(e,t,r,n,s){return As(),Cf(s),t.flags|=256,st(e,t,r,n),t.child}var yd={dehydrated:null,treeContext:null,retryLane:0};function xd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hv(e,t,r){var n=t.pendingProps,s=we.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),me(we,s&1),e===null)return dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Jl(i,n,0,null),e=Fn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=xd(r),t.memoizedState=yd,e):Uf(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return d1(e,t,i,n,a,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ln(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=ln(a,o):(o=Fn(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?xd(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=yd,n}return o=e.child,e=o.sibling,n=ln(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Uf(e,t){return t=Jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,r,n){return n!==null&&Cf(n),Fs(t,e.child,null,r),e=Uf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function d1(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Kc(Error(A(422))),na(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Jl({mode:"visible",children:n.children},s,0,null),o=Fn(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Fs(t,e.child,null,i),t.child.memoizedState=xd(i),t.memoizedState=yd,o);if(!(t.mode&1))return na(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(A(419)),n=Kc(o,n,void 0),na(e,t,i,n)}if(a=(i&e.childLanes)!==0,ht||a){if(n=Be,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ir(e,s),Qt(n,e,s,-1))}return Gf(),n=Kc(Error(A(421))),na(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=S1.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,yt=nn(s.nextSibling),bt=t,ye=!0,Gt=null,e!==null&&(Tt[Rt++]=kr,Tt[Rt++]=Sr,Tt[Rt++]=zn,kr=e.id,Sr=e.overflow,zn=t),t=Uf(t,n.children),t.flags|=4096,t)}function Vp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fd(e.return,t,r)}function Qc(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function zv(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(st(e,t,n.children,r),n=we.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vp(e,r,t);else if(e.tag===19)Vp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(me(we,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&il(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Qc(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&il(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Qc(t,!0,r,null,o);break;case"together":Qc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ta(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=ln(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ln(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function f1(e,t,r){switch(t.tag){case 3:Wv(t),As();break;case 5:gv(t);break;case 1:mt(t.type)&&el(t);break;case 4:Of(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;me(nl,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(me(we,we.current&1),t.flags|=128,null):r&t.child.childLanes?Hv(e,t,r):(me(we,we.current&1),e=Mr(e,t,r),e!==null?e.sibling:null);me(we,we.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(we,we.current),n)break;return null;case 22:case 23:return t.lanes=0,Bv(e,t,r)}return Mr(e,t,r)}var Yv,bd,Vv,Gv;Yv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bd=function(){};Vv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,In(fr.current);var o=null;switch(r){case"input":s=Wu(e,s),n=Wu(e,n),o=[];break;case"select":s=Se({},s,{value:void 0}),n=Se({},n,{value:void 0}),o=[];break;case"textarea":s=Yu(e,s),n=Yu(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Xa)}Gu(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ge("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Gv=function(e,t,r,n){r!==n&&(t.flags|=4)};function xo(e,t){if(!ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function h1(e,t,r){var n=t.pendingProps;switch(Df(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return mt(t.type)&&Za(),Je(t),null;case 3:return n=t.stateNode,$s(),ve(pt),ve(tt),Mf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ta(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gt!==null&&(jd(Gt),Gt=null))),bd(e,t),Je(t),null;case 5:If(t);var s=In(ci.current);if(r=t.type,e!==null&&t.stateNode!=null)Vv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(A(166));return Je(t),null}if(e=In(fr.current),ta(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ar]=t,n[ai]=o,e=(t.mode&1)!==0,r){case"dialog":ge("cancel",n),ge("close",n);break;case"iframe":case"object":case"embed":ge("load",n);break;case"video":case"audio":for(s=0;s<Io.length;s++)ge(Io[s],n);break;case"source":ge("error",n);break;case"img":case"image":case"link":ge("error",n),ge("load",n);break;case"details":ge("toggle",n);break;case"input":tp(n,o),ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ge("invalid",n);break;case"textarea":np(n,o),ge("invalid",n)}Gu(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&ea(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ea(n.textContent,a,e),s=["children",""+a]):Jo.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ge("scroll",n)}switch(r){case"input":Vi(n),rp(n,o,!0);break;case"textarea":Vi(n),sp(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Xa)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ar]=t,e[ai]=n,Yv(e,t,!1,!1),t.stateNode=e;e:{switch(i=qu(r,n),r){case"dialog":ge("cancel",e),ge("close",e),s=n;break;case"iframe":case"object":case"embed":ge("load",e),s=n;break;case"video":case"audio":for(s=0;s<Io.length;s++)ge(Io[s],e);s=n;break;case"source":ge("error",e),s=n;break;case"img":case"image":case"link":ge("error",e),ge("load",e),s=n;break;case"details":ge("toggle",e),s=n;break;case"input":tp(e,n),s=Wu(e,n),ge("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Se({},n,{value:void 0}),ge("invalid",e);break;case"textarea":np(e,n),s=Yu(e,n),ge("invalid",e);break;default:s=n}Gu(r,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?S0(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_0(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Xo(e,l):typeof l=="number"&&Xo(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jo.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ge("scroll",e):l!=null&&df(e,o,l,i))}switch(r){case"input":Vi(e),rp(e,n,!1);break;case"textarea":Vi(e),sp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+hn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Cs(e,!!n.multiple,o,!1):n.defaultValue!=null&&Cs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Gv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(A(166));if(r=In(ci.current),In(fr.current),ta(t)){if(n=t.stateNode,r=t.memoizedProps,n[ar]=t,(o=n.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:ea(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ea(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ar]=t,t.stateNode=n}return Je(t),null;case 13:if(ve(we),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&yt!==null&&t.mode&1&&!(t.flags&128))dv(),As(),t.flags|=98560,o=!1;else if(o=ta(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(A(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[ar]=t}else As(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),o=!1}else Gt!==null&&(jd(Gt),Gt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Ae===0&&(Ae=3):Gf())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return $s(),bd(e,t),e===null&&oi(t.stateNode.containerInfo),Je(t),null;case 10:return Pf(t.type._context),Je(t),null;case 17:return mt(t.type)&&Za(),Je(t),null;case 19:if(ve(we),o=t.memoizedState,o===null)return Je(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)xo(o,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=il(e),i!==null){for(t.flags|=128,xo(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return me(we,we.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ee()>Us&&(t.flags|=128,n=!0,xo(o,!1),t.lanes=4194304)}else{if(!n)if(e=il(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ye)return Je(t),null}else 2*Ee()-o.renderingStartTime>Us&&r!==1073741824&&(t.flags|=128,n=!0,xo(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ee(),t.sibling=null,r=we.current,me(we,n?r&1|2:r&1),t):(Je(t),null);case 22:case 23:return Vf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function p1(e,t){switch(Df(t),t.tag){case 1:return mt(t.type)&&Za(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $s(),ve(pt),ve(tt),Mf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return If(t),null;case 13:if(ve(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));As()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(we),null;case 4:return $s(),null;case 10:return Pf(t.type._context),null;case 22:case 23:return Vf(),null;case 24:return null;default:return null}}var sa=!1,Ze=!1,m1=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ss(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ce(e,t,n)}else r.current=null}function wd(e,t,r){try{r()}catch(n){Ce(e,t,n)}}var Gp=!1;function g1(e,t){if(sd=Ka,e=X0(),Sf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(a=i+s),f!==o||n!==0&&f.nodeType!==3||(l=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(a=i),h===o&&++d===n&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(od={focusedElem:e,selectionRange:r},Ka=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,b=g.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:zt(t.type,x),b);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(_){Ce(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return g=Gp,Gp=!1,g}function zo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&wd(t,r,o)}s=s.next}while(s!==n)}}function Kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function _d(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qv(e){var t=e.alternate;t!==null&&(e.alternate=null,qv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[ai],delete t[ld],delete t[X_],delete t[Z_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kv(e){return e.tag===5||e.tag===3||e.tag===4}function qp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Xa));else if(n!==4&&(e=e.child,e!==null))for(kd(e,t,r),e=e.sibling;e!==null;)kd(e,t,r),e=e.sibling}function Sd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sd(e,t,r),e=e.sibling;e!==null;)Sd(e,t,r),e=e.sibling}var ze=null,Yt=!1;function Ur(e,t,r){for(r=r.child;r!==null;)Qv(e,t,r),r=r.sibling}function Qv(e,t,r){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Ul,r)}catch{}switch(r.tag){case 5:Ze||Ss(r,t);case 6:var n=ze,s=Yt;ze=null,Ur(e,t,r),ze=n,Yt=s,ze!==null&&(Yt?(e=ze,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ze.removeChild(r.stateNode));break;case 18:ze!==null&&(Yt?(e=ze,r=r.stateNode,e.nodeType===8?Hc(e.parentNode,r):e.nodeType===1&&Hc(e,r),ri(e)):Hc(ze,r.stateNode));break;case 4:n=ze,s=Yt,ze=r.stateNode.containerInfo,Yt=!0,Ur(e,t,r),ze=n,Yt=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&wd(r,t,i),s=s.next}while(s!==n)}Ur(e,t,r);break;case 1:if(!Ze&&(Ss(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ce(r,t,a)}Ur(e,t,r);break;case 21:Ur(e,t,r);break;case 22:r.mode&1?(Ze=(n=Ze)||r.memoizedState!==null,Ur(e,t,r),Ze=n):Ur(e,t,r);break;default:Ur(e,t,r)}}function Kp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new m1),t.forEach(function(n){var s=N1.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:ze=a.stateNode,Yt=!1;break e;case 3:ze=a.stateNode.containerInfo,Yt=!0;break e;case 4:ze=a.stateNode.containerInfo,Yt=!0;break e}a=a.return}if(ze===null)throw Error(A(160));Qv(o,i,s),ze=null,Yt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jv(t,e),t=t.sibling}function Jv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),nr(e),n&4){try{zo(3,e,e.return),Kl(3,e)}catch(x){Ce(e,e.return,x)}try{zo(5,e,e.return)}catch(x){Ce(e,e.return,x)}}break;case 1:Wt(t,e),nr(e),n&512&&r!==null&&Ss(r,r.return);break;case 5:if(Wt(t,e),nr(e),n&512&&r!==null&&Ss(r,r.return),e.flags&32){var s=e.stateNode;try{Xo(s,"")}catch(x){Ce(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&x0(s,o),qu(a,i);var u=qu(a,o);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?S0(s,f):d==="dangerouslySetInnerHTML"?_0(s,f):d==="children"?Xo(s,f):df(s,d,f,u)}switch(a){case"input":Hu(s,o);break;case"textarea":b0(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Cs(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Cs(s,!!o.multiple,o.defaultValue,!0):Cs(s,!!o.multiple,o.multiple?[]:"",!1))}s[ai]=o}catch(x){Ce(e,e.return,x)}}break;case 6:if(Wt(t,e),nr(e),n&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(x){Ce(e,e.return,x)}}break;case 3:if(Wt(t,e),nr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ri(t.containerInfo)}catch(x){Ce(e,e.return,x)}break;case 4:Wt(t,e),nr(e);break;case 13:Wt(t,e),nr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(zf=Ee())),n&4&&Kp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(u=Ze)||d,Wt(t,e),Ze=u):Wt(t,e),nr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(G=e,d=e.child;d!==null;){for(f=G=d;G!==null;){switch(h=G,p=h.child,h.tag){case 0:case 11:case 14:case 15:zo(4,h,h.return);break;case 1:Ss(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Ce(n,r,x)}}break;case 5:Ss(h,h.return);break;case 22:if(h.memoizedState!==null){Jp(f);continue}}p!==null?(p.return=h,G=p):Jp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=k0("display",i))}catch(x){Ce(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Ce(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wt(t,e),nr(e),n&4&&Kp(e);break;case 21:break;default:Wt(t,e),nr(e)}}function nr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Kv(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Xo(s,""),n.flags&=-33);var o=qp(e);Sd(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=qp(e);kd(e,a,i);break;default:throw Error(A(161))}}catch(l){Ce(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v1(e,t,r){G=e,Xv(e)}function Xv(e,t,r){for(var n=(e.mode&1)!==0;G!==null;){var s=G,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||sa;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ze;a=sa;var u=Ze;if(sa=i,(Ze=l)&&!u)for(G=s;G!==null;)i=G,l=i.child,i.tag===22&&i.memoizedState!==null?Xp(s):l!==null?(l.return=i,G=l):Xp(s);for(;o!==null;)G=o,Xv(o),o=o.sibling;G=s,sa=a,Ze=u}Qp(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,G=o):Qp(e)}}function Qp(e){for(;G!==null;){var t=G;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Kl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ze)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:zt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ip(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ip(t,i,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ri(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ze||t.flags&512&&_d(t)}catch(h){Ce(t,t.return,h)}}if(t===e){G=null;break}if(r=t.sibling,r!==null){r.return=t.return,G=r;break}G=t.return}}function Jp(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var r=t.sibling;if(r!==null){r.return=t.return,G=r;break}G=t.return}}function Xp(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Kl(4,t)}catch(l){Ce(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){Ce(t,s,l)}}var o=t.return;try{_d(t)}catch(l){Ce(t,o,l)}break;case 5:var i=t.return;try{_d(t)}catch(l){Ce(t,i,l)}}}catch(l){Ce(t,t.return,l)}if(t===e){G=null;break}var a=t.sibling;if(a!==null){a.return=t.return,G=a;break}G=t.return}}var y1=Math.ceil,cl=Fr.ReactCurrentDispatcher,Wf=Fr.ReactCurrentOwner,Lt=Fr.ReactCurrentBatchConfig,ie=0,Be=null,Oe=null,Ge=0,vt=0,Ns=xn(0),Ae=0,hi=null,Vn=0,Ql=0,Hf=0,Yo=null,dt=null,zf=0,Us=1/0,yr=null,ul=!1,Nd=null,on=null,oa=!1,Xr=null,dl=0,Vo=0,Dd=null,Ra=-1,Oa=0;function at(){return ie&6?Ee():Ra!==-1?Ra:Ra=Ee()}function an(e){return e.mode&1?ie&2&&Ge!==0?Ge&-Ge:t1.transition!==null?(Oa===0&&(Oa=L0()),Oa):(e=fe,e!==0||(e=window.event,e=e===void 0?16:H0(e.type)),e):1}function Qt(e,t,r,n){if(50<Vo)throw Vo=0,Dd=null,Error(A(185));Ci(e,r,n),(!(ie&2)||e!==Be)&&(e===Be&&(!(ie&2)&&(Ql|=r),Ae===4&&qr(e,Ge)),gt(e,n),r===1&&ie===0&&!(t.mode&1)&&(Us=Ee()+500,Vl&&bn()))}function gt(e,t){var r=e.callbackNode;t_(e,t);var n=qa(e,e===Be?Ge:0);if(n===0)r!==null&&ap(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ap(r),t===1)e.tag===0?e1(Zp.bind(null,e)):lv(Zp.bind(null,e)),Q_(function(){!(ie&6)&&bn()}),r=null;else{switch(A0(n)){case 1:r=gf;break;case 4:r=I0;break;case 16:r=Ga;break;case 536870912:r=M0;break;default:r=Ga}r=iy(r,Zv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zv(e,t){if(Ra=-1,Oa=0,ie&6)throw Error(A(327));var r=e.callbackNode;if(Rs()&&e.callbackNode!==r)return null;var n=qa(e,e===Be?Ge:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fl(e,n);else{t=n;var s=ie;ie|=2;var o=ty();(Be!==e||Ge!==t)&&(yr=null,Us=Ee()+500,An(e,t));do try{w1();break}catch(a){ey(e,a)}while(1);Ef(),cl.current=o,ie=s,Oe!==null?t=0:(Be=null,Ge=0,t=Ae)}if(t!==0){if(t===2&&(s=Zu(e),s!==0&&(n=s,t=Cd(e,s))),t===1)throw r=hi,An(e,0),qr(e,n),gt(e,Ee()),r;if(t===6)qr(e,n);else{if(s=e.current.alternate,!(n&30)&&!x1(s)&&(t=fl(e,n),t===2&&(o=Zu(e),o!==0&&(n=o,t=Cd(e,o))),t===1))throw r=hi,An(e,0),qr(e,n),gt(e,Ee()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(A(345));case 2:Cn(e,dt,yr);break;case 3:if(qr(e,n),(n&130023424)===n&&(t=zf+500-Ee(),10<t)){if(qa(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){at(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ad(Cn.bind(null,e,dt,yr),t);break}Cn(e,dt,yr);break;case 4:if(qr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Kt(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=Ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*y1(n/1960))-n,10<n){e.timeoutHandle=ad(Cn.bind(null,e,dt,yr),n);break}Cn(e,dt,yr);break;case 5:Cn(e,dt,yr);break;default:throw Error(A(329))}}}return gt(e,Ee()),e.callbackNode===r?Zv.bind(null,e):null}function Cd(e,t){var r=Yo;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=fl(e,t),e!==2&&(t=dt,dt=r,t!==null&&jd(t)),e}function jd(e){dt===null?dt=e:dt.push.apply(dt,e)}function x1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Xt(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qr(e,t){for(t&=~Hf,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),n=1<<r;e[r]=-1,t&=~n}}function Zp(e){if(ie&6)throw Error(A(327));Rs();var t=qa(e,0);if(!(t&1))return gt(e,Ee()),null;var r=fl(e,t);if(e.tag!==0&&r===2){var n=Zu(e);n!==0&&(t=n,r=Cd(e,n))}if(r===1)throw r=hi,An(e,0),qr(e,t),gt(e,Ee()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,dt,yr),gt(e,Ee()),null}function Yf(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Us=Ee()+500,Vl&&bn())}}function Gn(e){Xr!==null&&Xr.tag===0&&!(ie&6)&&Rs();var t=ie;ie|=1;var r=Lt.transition,n=fe;try{if(Lt.transition=null,fe=1,e)return e()}finally{fe=n,Lt.transition=r,ie=t,!(ie&6)&&bn()}}function Vf(){vt=Ns.current,ve(Ns)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,K_(r)),Oe!==null)for(r=Oe.return;r!==null;){var n=r;switch(Df(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Za();break;case 3:$s(),ve(pt),ve(tt),Mf();break;case 5:If(n);break;case 4:$s();break;case 13:ve(we);break;case 19:ve(we);break;case 10:Pf(n.type._context);break;case 22:case 23:Vf()}r=r.return}if(Be=e,Oe=e=ln(e.current,null),Ge=vt=t,Ae=0,hi=null,Hf=Ql=Vn=0,dt=Yo=null,On!==null){for(t=0;t<On.length;t++)if(r=On[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}On=null}return e}function ey(e,t){do{var r=Oe;try{if(Ef(),Ea.current=ll,al){for(var n=ke.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}al=!1}if(Yn=0,$e=Le=ke=null,Ho=!1,ui=0,Wf.current=null,r===null||r.return===null){Ae=1,hi=t,Oe=null;break}e:{var o=e,i=r.return,a=r,l=t;if(t=Ge,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Bp(i);if(p!==null){p.flags&=-257,Up(p,i,a,o,t),p.mode&1&&$p(o,u,t),t=p,l=u;var g=t.updateQueue;if(g===null){var x=new Set;x.add(l),t.updateQueue=x}else g.add(l);break e}else{if(!(t&1)){$p(o,u,t),Gf();break e}l=Error(A(426))}}else if(ye&&a.mode&1){var b=Bp(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Up(b,i,a,o,t),Cf(Bs(l,a));break e}}o=l=Bs(l,a),Ae!==4&&(Ae=2),Yo===null?Yo=[o]:Yo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=Av(o,l,t);Op(o,y);break e;case 1:a=l;var m=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(on===null||!on.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Fv(o,a,t);Op(o,_);break e}}o=o.return}while(o!==null)}ny(r)}catch(k){t=k,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(1)}function ty(){var e=cl.current;return cl.current=ll,e===null?ll:e}function Gf(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Be===null||!(Vn&268435455)&&!(Ql&268435455)||qr(Be,Ge)}function fl(e,t){var r=ie;ie|=2;var n=ty();(Be!==e||Ge!==t)&&(yr=null,An(e,t));do try{b1();break}catch(s){ey(e,s)}while(1);if(Ef(),ie=r,cl.current=n,Oe!==null)throw Error(A(261));return Be=null,Ge=0,Ae}function b1(){for(;Oe!==null;)ry(Oe)}function w1(){for(;Oe!==null&&!Vw();)ry(Oe)}function ry(e){var t=oy(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?ny(e):Oe=t,Wf.current=null}function ny(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=p1(r,t),r!==null){r.flags&=32767,Oe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Oe=null;return}}else if(r=h1(r,t,vt),r!==null){Oe=r;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);Ae===0&&(Ae=5)}function Cn(e,t,r){var n=fe,s=Lt.transition;try{Lt.transition=null,fe=1,_1(e,t,r,n)}finally{Lt.transition=s,fe=n}return null}function _1(e,t,r,n){do Rs();while(Xr!==null);if(ie&6)throw Error(A(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(r_(e,o),e===Be&&(Oe=Be=null,Ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,iy(Ga,function(){return Rs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Lt.transition,Lt.transition=null;var i=fe;fe=1;var a=ie;ie|=4,Wf.current=null,g1(e,r),Jv(r,e),W_(od),Ka=!!sd,od=sd=null,e.current=r,v1(r),Gw(),ie=a,fe=i,Lt.transition=o}else e.current=r;if(oa&&(oa=!1,Xr=e,dl=s),o=e.pendingLanes,o===0&&(on=null),Qw(r.stateNode),gt(e,Ee()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,e=Nd,Nd=null,e;return dl&1&&e.tag!==0&&Rs(),o=e.pendingLanes,o&1?e===Dd?Vo++:(Vo=0,Dd=e):Vo=0,bn(),null}function Rs(){if(Xr!==null){var e=A0(dl),t=Lt.transition,r=fe;try{if(Lt.transition=null,fe=16>e?16:e,Xr===null)var n=!1;else{if(e=Xr,Xr=null,dl=0,ie&6)throw Error(A(331));var s=ie;for(ie|=4,G=e.current;G!==null;){var o=G,i=o.child;if(G.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:zo(8,d,o)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var h=d.sibling,p=d.return;if(qv(d),d===u){G=null;break}if(h!==null){h.return=p,G=h;break}G=p}}}var g=o.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}G=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,G=i;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zo(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,G=y;break e}G=o.return}}var m=e.current;for(G=m;G!==null;){i=G;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,G=v;else e:for(i=m;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kl(9,a)}}catch(k){Ce(a,a.return,k)}if(a===i){G=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,G=_;break e}G=a.return}}if(ie=s,bn(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Ul,e)}catch{}n=!0}return n}finally{fe=r,Lt.transition=t}}return!1}function em(e,t,r){t=Bs(r,t),t=Av(e,t,1),e=sn(e,t,1),t=at(),e!==null&&(Ci(e,1,t),gt(e,t))}function Ce(e,t,r){if(e.tag===3)em(e,e,r);else for(;t!==null;){if(t.tag===3){em(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(on===null||!on.has(n))){e=Bs(r,e),e=Fv(t,e,1),t=sn(t,e,1),e=at(),t!==null&&(Ci(t,1,e),gt(t,e));break}}t=t.return}}function k1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(Ge&r)===r&&(Ae===4||Ae===3&&(Ge&130023424)===Ge&&500>Ee()-zf?An(e,0):Hf|=r),gt(e,t)}function sy(e,t){t===0&&(e.mode&1?(t=Ki,Ki<<=1,!(Ki&130023424)&&(Ki=4194304)):t=1);var r=at();e=Ir(e,t),e!==null&&(Ci(e,t,r),gt(e,r))}function S1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),sy(e,r)}function N1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(t),sy(e,r)}var oy;oy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ht=!1,f1(e,t,r);ht=!!(e.flags&131072)}else ht=!1,ye&&t.flags&1048576&&cv(t,rl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ta(e,t),e=t.pendingProps;var s=Ls(t,tt.current);Ts(t,r),s=Af(null,t,n,e,s,r);var o=Ff();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(n)?(o=!0,el(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rf(t),s.updater=ql,t.stateNode=s,s._reactInternals=t,pd(t,n,e,r),t=vd(null,t,n,!0,o,r)):(t.tag=0,ye&&o&&Nf(t),st(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ta(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=C1(n),e=zt(n,e),s){case 0:t=gd(null,t,n,e,r);break e;case 1:t=zp(null,t,n,e,r);break e;case 11:t=Wp(null,t,n,e,r);break e;case 14:t=Hp(null,t,n,zt(n.type,e),r);break e}throw Error(A(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),gd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),zp(e,t,n,s,r);case 3:e:{if(Wv(t),e===null)throw Error(A(387));n=t.pendingProps,o=t.memoizedState,s=o.element,mv(e,t),ol(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Bs(Error(A(423)),t),t=Yp(e,t,n,r,s);break e}else if(n!==s){s=Bs(Error(A(424)),t),t=Yp(e,t,n,r,s);break e}else for(yt=nn(t.stateNode.containerInfo.firstChild),bt=t,ye=!0,Gt=null,r=hv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(As(),n===s){t=Mr(e,t,r);break e}st(e,t,n,r)}t=t.child}return t;case 5:return gv(t),e===null&&dd(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,id(n,s)?i=null:o!==null&&id(n,o)&&(t.flags|=32),Uv(e,t),st(e,t,i,r),t.child;case 6:return e===null&&dd(t),null;case 13:return Hv(e,t,r);case 4:return Of(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fs(t,null,n,r):st(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),Wp(e,t,n,s,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,me(nl,n._currentValue),n._currentValue=i,o!==null)if(Xt(o.value,i)){if(o.children===s.children&&!pt.current){t=Mr(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Nr(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),fd(o.return,r,t),a.lanes|=r;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(A(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),fd(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}st(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ts(t,r),s=$t(s),n=n(s),t.flags|=1,st(e,t,n,r),t.child;case 14:return n=t.type,s=zt(n,t.pendingProps),s=zt(n.type,s),Hp(e,t,n,s,r);case 15:return $v(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zt(n,s),Ta(e,t),t.tag=1,mt(n)?(e=!0,el(t)):e=!1,Ts(t,r),Lv(t,n,s),pd(t,n,s,r),vd(null,t,n,!0,e,r);case 19:return zv(e,t,r);case 22:return Bv(e,t,r)}throw Error(A(156,t.tag))};function iy(e,t){return O0(e,t)}function D1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,r,n){return new D1(e,t,r,n)}function qf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function C1(e){if(typeof e=="function")return qf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hf)return 11;if(e===pf)return 14}return 2}function ln(e,t){var r=e.alternate;return r===null?(r=It(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ia(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")qf(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ms:return Fn(r.children,s,o,t);case ff:i=8,s|=8;break;case Fu:return e=It(12,r,t,s|2),e.elementType=Fu,e.lanes=o,e;case $u:return e=It(13,r,t,s),e.elementType=$u,e.lanes=o,e;case Bu:return e=It(19,r,t,s),e.elementType=Bu,e.lanes=o,e;case g0:return Jl(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p0:i=10;break e;case m0:i=9;break e;case hf:i=11;break e;case pf:i=14;break e;case Yr:i=16,n=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=It(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function Fn(e,t,r,n){return e=It(7,e,n,t),e.lanes=r,e}function Jl(e,t,r,n){return e=It(22,e,n,t),e.elementType=g0,e.lanes=r,e.stateNode={isHidden:!1},e}function Jc(e,t,r){return e=It(6,e,null,t),e.lanes=r,e}function Xc(e,t,r){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function j1(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rc(0),this.expirationTimes=Rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kf(e,t,r,n,s,o,i,a,l){return e=new j1(e,t,r,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=It(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rf(o),e}function E1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ay(e){if(!e)return pn;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(mt(r))return av(e,r,t)}return t}function ly(e,t,r,n,s,o,i,a,l){return e=Kf(r,n,!0,e,s,o,i,a,l),e.context=ay(null),r=e.current,n=at(),s=an(r),o=Nr(n,s),o.callback=t??null,sn(r,o,s),e.current.lanes=s,Ci(e,s,n),gt(e,n),e}function Xl(e,t,r,n){var s=t.current,o=at(),i=an(s);return r=ay(r),t.context===null?t.context=r:t.pendingContext=r,t=Nr(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=sn(s,t,i),e!==null&&(Qt(e,s,i,o),ja(e,s,i)),i}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Qf(e,t){tm(e,t),(e=e.alternate)&&tm(e,t)}function P1(){return null}var cy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jf(e){this._internalRoot=e}Zl.prototype.render=Jf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Xl(e,t,null,null)};Zl.prototype.unmount=Jf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){Xl(null,e,null,null)}),t[Or]=null}};function Zl(e){this._internalRoot=e}Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=B0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gr.length&&t!==0&&t<Gr[r].priority;r++);Gr.splice(r,0,e),r===0&&W0(e)}};function Xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rm(){}function T1(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=hl(i);o.call(u)}}var i=ly(t,n,e,0,null,!1,!1,"",rm);return e._reactRootContainer=i,e[Or]=i.current,oi(e.nodeType===8?e.parentNode:e),Gn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=hl(l);a.call(u)}}var l=Kf(e,0,!1,null,null,!1,!1,"",rm);return e._reactRootContainer=l,e[Or]=l.current,oi(e.nodeType===8?e.parentNode:e),Gn(function(){Xl(t,l,r,n)}),l}function tc(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=hl(i);a.call(l)}}Xl(t,i,e,s)}else i=T1(r,t,e,s,n);return hl(i)}F0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oo(t.pendingLanes);r!==0&&(vf(t,r|1),gt(t,Ee()),!(ie&6)&&(Us=Ee()+500,bn()))}break;case 13:Gn(function(){var n=Ir(e,1);if(n!==null){var s=at();Qt(n,e,1,s)}}),Qf(e,1)}};yf=function(e){if(e.tag===13){var t=Ir(e,134217728);if(t!==null){var r=at();Qt(t,e,134217728,r)}Qf(e,134217728)}};$0=function(e){if(e.tag===13){var t=an(e),r=Ir(e,t);if(r!==null){var n=at();Qt(r,e,t,n)}Qf(e,t)}};B0=function(){return fe};U0=function(e,t){var r=fe;try{return fe=e,t()}finally{fe=r}};Qu=function(e,t,r){switch(t){case"input":if(Hu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Yl(n);if(!s)throw Error(A(90));y0(n),Hu(n,s)}}}break;case"textarea":b0(e,r);break;case"select":t=r.value,t!=null&&Cs(e,!!r.multiple,t,!1)}};C0=Yf;j0=Gn;var R1={usingClientEntryPoint:!1,Events:[Ei,xs,Yl,N0,D0,Yf]},bo={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O1={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=T0(e),e===null?null:e.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||P1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Ul=ia.inject(O1),dr=ia}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1;Nt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xf(t))throw Error(A(200));return E1(e,t,null,r)};Nt.createRoot=function(e,t){if(!Xf(e))throw Error(A(299));var r=!1,n="",s=cy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kf(e,1,!1,null,null,r,!1,n,s),e[Or]=t.current,oi(e.nodeType===8?e.parentNode:e),new Jf(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=T0(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return Gn(e)};Nt.hydrate=function(e,t,r){if(!ec(t))throw Error(A(200));return tc(null,e,t,!0,r)};Nt.hydrateRoot=function(e,t,r){if(!Xf(e))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=cy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=ly(t,null,e,1,r??null,s,!1,o,i),e[Or]=t.current,oi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Zl(t)};Nt.render=function(e,t,r){if(!ec(t))throw Error(A(200));return tc(null,e,t,!1,r)};Nt.unmountComponentAtNode=function(e){if(!ec(e))throw Error(A(40));return e._reactRootContainer?(Gn(function(){tc(null,null,e,!1,function(){e._reactRootContainer=null,e[Or]=null})}),!0):!1};Nt.unstable_batchedUpdates=Yf;Nt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ec(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return tc(e,t,r,!1,n)};Nt.version="18.3.1-next-f1338f8080-20240426";function uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uy)}catch(e){console.error(e)}}uy(),u0.exports=Nt;var Ti=u0.exports;const dy=Jg(Ti);var nm=Ti;Lu.createRoot=nm.createRoot,Lu.hydrateRoot=nm.hydrateRoot;const I1="modulepreload",M1=function(e){return"/"+e},sm={},ro=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=M1(o),o in sm)return;sm[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":I1,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var om="popstate";function L1(e={}){function t(n,s){let{pathname:o,search:i,hash:a}=n.location;return Ed("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:pi(s)}return F1(t,r,null,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A1(){return Math.random().toString(36).substring(2,10)}function im(e,t){return{usr:e.state,key:e.key,idx:t}}function Ed(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?no(t):t,state:r,key:t&&t.key||n||A1()}}function pi({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function no(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function F1(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,a="POP",l=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){a="POP";let b=d(),y=b==null?null:b-u;u=b,l&&l({action:a,location:x.location,delta:y})}function h(b,y){a="PUSH";let m=Ed(x.location,b,y);r&&r(m,b),u=d()+1;let v=im(m,u),_=x.createHref(m);try{i.pushState(v,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}o&&l&&l({action:a,location:x.location,delta:1})}function p(b,y){a="REPLACE";let m=Ed(x.location,b,y);r&&r(m,b),u=d();let v=im(m,u),_=x.createHref(m);i.replaceState(v,"",_),o&&l&&l({action:a,location:x.location,delta:0})}function g(b){return $1(b)}let x={get action(){return a},get location(){return e(s,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(om,f),l=b,()=>{s.removeEventListener(om,f),l=null}},createHref(b){return t(s,b)},createURL:g,encodeLocation(b){let y=g(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(b){return i.go(b)}};return x}function $1(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),be(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:pi(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function fy(e,t,r="/"){return B1(e,t,r,!1)}function B1(e,t,r,n){let s=typeof t=="string"?no(t):t,o=Lr(s.pathname||"/",r);if(o==null)return null;let i=hy(e);U1(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let u=X1(o);a=Q1(i[l],u,n)}return a}function hy(e,t=[],r=[],n=""){let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(be(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Dr([n,l.relativePath]),d=r.concat(l);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),hy(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:q1(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of py(o.path))s(o,i,l)}),t}function py(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=py(n.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function U1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:K1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var W1=/^:[\w-]+$/,H1=3,z1=2,Y1=1,V1=10,G1=-2,am=e=>e==="*";function q1(e,t){let r=e.split("/"),n=r.length;return r.some(am)&&(n+=G1),t&&(n+=z1),r.filter(s=>!am(s)).reduce((s,o)=>s+(W1.test(o)?H1:o===""?Y1:V1),n)}function K1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Q1(e,t,r=!1){let{routesMeta:n}=e,s={},o="/",i=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=pl({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=pl({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Dr([o,f.pathname]),pathnameBase:rk(Dr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Dr([o,f.pathnameBase]))}return i}function pl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=J1(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=a[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function J1(e,t=!1,r=!0){Zt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function X1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Z1(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?no(e):e;return{pathname:r?r.startsWith("/")?r:ek(r,t):t,search:nk(n),hash:sk(s)}}function ek(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zc(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Zf(e){let t=tk(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function eh(e,t,r,n=!1){let s;typeof e=="string"?s=no(e):(s={...e},be(!s.pathname||!s.pathname.includes("?"),Zc("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),Zc("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),Zc("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=Z1(s,a),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Dr=e=>e.join("/").replace(/\/\/+/g,"/"),rk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ok(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var my=["POST","PUT","PATCH","DELETE"];new Set(my);var ik=["GET",...my];new Set(ik);var so=w.createContext(null);so.displayName="DataRouter";var rc=w.createContext(null);rc.displayName="DataRouterState";w.createContext(!1);var gy=w.createContext({isTransitioning:!1});gy.displayName="ViewTransition";var ak=w.createContext(new Map);ak.displayName="Fetchers";var lk=w.createContext(null);lk.displayName="Await";var tr=w.createContext(null);tr.displayName="Navigation";var Ri=w.createContext(null);Ri.displayName="Location";var rr=w.createContext({outlet:null,matches:[],isDataRoute:!1});rr.displayName="Route";var th=w.createContext(null);th.displayName="RouteError";function ck(e,{relative:t}={}){be(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(tr),{hash:s,pathname:o,search:i}=Ii(e,{relative:t}),a=o;return r!=="/"&&(a=o==="/"?r:Dr([r,o])),n.createHref({pathname:a,search:i,hash:s})}function oo(){return w.useContext(Ri)!=null}function $r(){return be(oo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ri).location}var vy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yy(e){w.useContext(tr).static||w.useLayoutEffect(e)}function Oi(){let{isDataRoute:e}=w.useContext(rr);return e?_k():uk()}function uk(){be(oo(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(so),{basename:t,navigator:r}=w.useContext(tr),{matches:n}=w.useContext(rr),{pathname:s}=$r(),o=JSON.stringify(Zf(n)),i=w.useRef(!1);return yy(()=>{i.current=!0}),w.useCallback((l,u={})=>{if(Zt(i.current,vy),!i.current)return;if(typeof l=="number"){r.go(l);return}let d=eh(l,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Dr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,s,e])}w.createContext(null);function xy(){let{matches:e}=w.useContext(rr),t=e[e.length-1];return t?t.params:{}}function Ii(e,{relative:t}={}){let{matches:r}=w.useContext(rr),{pathname:n}=$r(),s=JSON.stringify(Zf(r));return w.useMemo(()=>eh(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function dk(e,t){return by(e,t)}function by(e,t,r,n){var y;be(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(tr),{matches:o}=w.useContext(rr),i=o[o.length-1],a=i?i.params:{},l=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let m=d&&d.path||"";wy(l,!d||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=$r(),h;if(t){let m=typeof t=="string"?no(t):t;be(u==="/"||((y=m.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let m=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=fy(e,{pathname:g});Zt(d||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Zt(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=gk(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Dr([u,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:Dr([u,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,r,n);return t&&b?w.createElement(Ri.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function fk(){let e=wk(),t=ok(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,i)}var hk=w.createElement(fk,null),pk=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(rr.Provider,{value:this.props.routeContext},w.createElement(th.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mk({routeContext:e,match:t,children:r}){let n=w.useContext(so);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(rr.Provider,{value:e},r)}function gk(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=r==null?void 0:r.errors;if(o!=null){let l=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);be(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,a=-1;if(r)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,d)=>{let f,h=!1,p=null,g=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||hk,i&&(a<0&&d===0?(wy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):a===d&&(h=!0,g=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),b=()=>{let y;return f?y=p:h?y=g:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,w.createElement(mk,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?w.createElement(pk,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function rh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vk(e){let t=w.useContext(so);return be(t,rh(e)),t}function yk(e){let t=w.useContext(rc);return be(t,rh(e)),t}function xk(e){let t=w.useContext(rr);return be(t,rh(e)),t}function nh(e){let t=xk(e),r=t.matches[t.matches.length-1];return be(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function bk(){return nh("useRouteId")}function wk(){var n;let e=w.useContext(th),t=yk("useRouteError"),r=nh("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function _k(){let{router:e}=vk("useNavigate"),t=nh("useNavigate"),r=w.useRef(!1);return yy(()=>{r.current=!0}),w.useCallback(async(s,o={})=>{Zt(r.current,vy),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var lm={};function wy(e,t,r){!t&&!lm[e]&&(lm[e]=!0,Zt(!1,r))}w.memo(kk);function kk({routes:e,future:t,state:r}){return by(e,void 0,r,t)}function Sk({to:e,replace:t,state:r,relative:n}){be(oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(tr);Zt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(rr),{pathname:i}=$r(),a=Oi(),l=eh(e,Zf(o),i,n==="path"),u=JSON.stringify(l);return w.useEffect(()=>{a(JSON.parse(u),{replace:t,state:r,relative:n})},[a,u,n,t,r]),null}function us(e){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Nk({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:o=!1}){be(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof r=="string"&&(r=no(r));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=w.useMemo(()=>{let g=Lr(l,i);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[i,l,u,d,f,h,n]);return Zt(p!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(tr.Provider,{value:a},w.createElement(Ri.Provider,{children:t,value:p}))}function Dk({children:e,location:t}){return dk(Pd(e),t)}function Pd(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let o=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Pd(n.props.children,o));return}be(n.type===us,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Pd(n.props.children,o)),r.push(i)}),r}var Ma="get",La="application/x-www-form-urlencoded";function nc(e){return e!=null&&typeof e.tagName=="string"}function Ck(e){return nc(e)&&e.tagName.toLowerCase()==="button"}function jk(e){return nc(e)&&e.tagName.toLowerCase()==="form"}function Ek(e){return nc(e)&&e.tagName.toLowerCase()==="input"}function Pk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Tk(e,t){return e.button===0&&(!t||t==="_self")&&!Pk(e)}var aa=null;function Rk(){if(aa===null)try{new FormData(document.createElement("form"),0),aa=!1}catch{aa=!0}return aa}var Ok=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eu(e){return e!=null&&!Ok.has(e)?(Zt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${La}"`),null):e}function Ik(e,t){let r,n,s,o,i;if(jk(e)){let a=e.getAttribute("action");n=a?Lr(a,t):null,r=e.getAttribute("method")||Ma,s=eu(e.getAttribute("enctype"))||La,o=new FormData(e)}else if(Ck(e)||Ek(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Lr(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Ma,s=eu(e.getAttribute("formenctype"))||eu(a.getAttribute("enctype"))||La,o=new FormData(a,e),!Rk()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";o.append(`${h}x`,"0"),o.append(`${h}y`,"0")}else u&&o.append(u,f)}}else{if(nc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ma,n=null,s=La,i=e}return o&&s==="text/plain"&&(i=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sh(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Mk(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Lr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Lk(e,t){if(e.id in t)return t[e.id];try{let r=await ro(()=>import(e.module),[]);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ak(e){return e!=null&&typeof e.page=="string"}function Fk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $k(e,t,r){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let i=await Lk(o,r);return i.links?i.links():[]}return[]}));return Hk(n.flat(1).filter(Fk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function cm(e,t,r,n,s,o){let i=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,a=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>i(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Bk(e,t,{includeHydrateFallback:r}={}){return Uk(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Uk(e){return[...new Set(e)]}function Wk(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Hk(e,t){let r=new Set,n=new Set(t);return e.reduce((s,o)=>{if(t&&!Ak(o)&&o.as==="script"&&o.href&&n.has(o.href))return s;let a=JSON.stringify(Wk(o));return r.has(a)||(r.add(a),s.push({key:a,link:o})),s},[])}function _y(){let e=w.useContext(so);return sh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zk(){let e=w.useContext(rc);return sh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oh=w.createContext(void 0);oh.displayName="FrameworkContext";function ky(){let e=w.useContext(oh);return sh(e,"You must render this element inside a <HydratedRouter> element"),e}function Yk(e,t){let r=w.useContext(oh),[n,s]=w.useState(!1),[o,i]=w.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=w.useRef(null);w.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=y=>{y.forEach(m=>{i(m.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[n]);let p=()=>{s(!0)},g=()=>{s(!1),i(!1)};return r?e!=="intent"?[o,h,{}]:[o,h,{onFocus:wo(a,p),onBlur:wo(l,g),onMouseEnter:wo(u,p),onMouseLeave:wo(d,g),onTouchStart:wo(f,p)}]:[!1,h,{}]}function wo(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Vk({page:e,...t}){let{router:r}=_y(),n=w.useMemo(()=>fy(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(qk,{page:e,matches:n,...t}):null}function Gk(e){let{manifest:t,routeModules:r}=ky(),[n,s]=w.useState([]);return w.useEffect(()=>{let o=!1;return $k(e,t,r).then(i=>{o||s(i)}),()=>{o=!0}},[e,t,r]),n}function qk({page:e,matches:t,...r}){let n=$r(),{manifest:s,routeModules:o}=ky(),{basename:i}=_y(),{loaderData:a,matches:l}=zk(),u=w.useMemo(()=>cm(e,t,l,s,n,"data"),[e,t,l,s,n]),d=w.useMemo(()=>cm(e,t,l,s,n,"assets"),[e,t,l,s,n]),f=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,x=!1;if(t.forEach(y=>{var v;let m=s.routes[y.route.id];!m||!m.hasLoader||(!u.some(_=>_.route.id===y.route.id)&&y.route.id in a&&((v=o[y.route.id])!=null&&v.shouldRevalidate)||m.hasClientLoader?x=!0:g.add(y.route.id))}),g.size===0)return[];let b=Mk(e,i,"data");return x&&g.size>0&&b.searchParams.set("_routes",t.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[i,a,n,s,u,t,e,o]),h=w.useMemo(()=>Bk(d,s),[d,s]),p=Gk(d);return w.createElement(w.Fragment,null,f.map(g=>w.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>w.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:x})=>w.createElement("link",{key:g,...x})))}function Kk(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sy&&(window.__reactRouterVersion="7.7.1")}catch{}function Qk({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=L1({window:r,v5Compat:!0}));let s=n.current,[o,i]=w.useState({action:s.action,location:s.location}),a=w.useCallback(l=>{w.startTransition(()=>i(l))},[i]);return w.useLayoutEffect(()=>s.listen(a),[s,a]),w.createElement(Nk,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var Ny=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:o,replace:i,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:g}=w.useContext(tr),x=typeof u=="string"&&Ny.test(u),b,y=!1;if(typeof u=="string"&&x&&(b=u,Sy))try{let j=new URL(window.location.href),E=u.startsWith("//")?new URL(j.protocol+u):new URL(u),M=Lr(E.pathname,g);E.origin===j.origin&&M!=null?u=M+E.search+E.hash:y=!0}catch{Zt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=ck(u,{relative:s}),[v,_,k]=Yk(n,h),S=eS(u,{replace:i,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function N(j){t&&t(j),j.defaultPrevented||S(j)}let C=w.createElement("a",{...h,...k,href:b||m,onClick:y||o?t:N,ref:Kk(p,_),target:l,"data-discover":!x&&r==="render"?"true":void 0});return v&&!x?w.createElement(w.Fragment,null,C,w.createElement(Vk,{page:m})):C});mi.displayName="Link";var Jk=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:o,to:i,viewTransition:a,children:l,...u},d){let f=Ii(i,{relative:u.relative}),h=$r(),p=w.useContext(rc),{navigator:g,basename:x}=w.useContext(tr),b=p!=null&&oS(f)&&a===!0,y=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,m=h.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(m=m.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&x&&(v=Lr(v,x)||v);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=m===y||!s&&m.startsWith(y)&&m.charAt(_)==="/",S=v!=null&&(v===y||!s&&v.startsWith(y)&&v.charAt(y.length)==="/"),N={isActive:k,isPending:S,isTransitioning:b},C=k?t:void 0,j;typeof n=="function"?j=n(N):j=[n,k?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let E=typeof o=="function"?o(N):o;return w.createElement(mi,{...u,"aria-current":C,className:j,ref:d,style:E,to:i,viewTransition:a},typeof l=="function"?l(N):l)});Jk.displayName="NavLink";var Xk=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:o,method:i=Ma,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let g=nS(),x=sS(a,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&Ny.test(a),m=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let _=v.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||i;g(_||v.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return w.createElement("form",{ref:p,method:b,action:x,onSubmit:n?l:m,...h,"data-discover":!y&&e==="render"?"true":void 0})});Xk.displayName="Form";function Zk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dy(e){let t=w.useContext(so);return be(t,Zk(e)),t}function eS(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:i}={}){let a=Oi(),l=$r(),u=Ii(e,{relative:o});return w.useCallback(d=>{if(Tk(d,t)){d.preventDefault();let f=r!==void 0?r:pi(l)===pi(u);a(e,{replace:f,state:n,preventScrollReset:s,relative:o,viewTransition:i})}},[l,a,u,r,n,t,e,s,o,i])}var tS=0,rS=()=>`__${String(++tS)}__`;function nS(){let{router:e}=Dy("useSubmit"),{basename:t}=w.useContext(tr),r=bk();return w.useCallback(async(n,s={})=>{let{action:o,method:i,encType:a,formData:l,body:u}=Ik(n,t);if(s.navigate===!1){let d=s.fetcherKey||rS();await e.fetch(d,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function sS(e,{relative:t}={}){let{basename:r}=w.useContext(tr),n=w.useContext(rr);be(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Ii(e||".",{relative:t})},i=$r();if(e==null){o.search=i.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Dr([r,o.pathname])),pi(o)}function oS(e,{relative:t}={}){let r=w.useContext(gy);be(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Dy("useViewTransitionState"),s=Ii(e,{relative:t});if(!r.isTransitioning)return!1;let o=Lr(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Lr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return pl(s.pathname,i)!=null||pl(s.pathname,o)!=null}const iS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>io),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ih extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class aS extends ih{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class um extends ih{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dm extends ih{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Td;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Td||(Td={}));var lS=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class cS{constructor(t,{headers:r={},customFetch:n,region:s=Td.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=iS(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return lS(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let a={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(x=>{throw new aS(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new um(f);if(!f.ok)throw new dm(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof dm||s instanceof um?s.context:void 0}}})}}var ft={},ah={},sc={},Mi={},oc={},ic={},uS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ws=uS();const dS=Ws.fetch,Cy=Ws.fetch.bind(Ws),jy=Ws.Headers,fS=Ws.Request,hS=Ws.Response,io=Object.freeze(Object.defineProperty({__proto__:null,Headers:jy,Request:fS,Response:hS,default:Cy,fetch:dS},Symbol.toStringTag,{value:"Module"})),pS=lw(io);var ac={};Object.defineProperty(ac,"__esModule",{value:!0});let mS=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ac.default=mS;var Ey=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ic,"__esModule",{value:!0});const gS=Ey(pS),vS=Ey(ac);let yS=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=gS.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let u=null,d=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),b=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await o.text();try{u=JSON.parse(x),Array.isArray(u)&&o.status===404&&(d=[],u=null,h=200,p="OK")}catch{o.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new vS.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};ic.default=yS;var xS=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oc,"__esModule",{value:!0});const bS=xS(ic);let wS=class extends bS.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};oc.default=wS;var _S=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mi,"__esModule",{value:!0});const kS=_S(oc);let SS=class extends kS.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Mi.default=SS;var NS=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sc,"__esModule",{value:!0});const _o=NS(Mi);let DS=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new _o.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new _o.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new _o.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new _o.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new _o.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};sc.default=DS;var lc={},cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.version=void 0;cc.version="0.0.0-automated";Object.defineProperty(lc,"__esModule",{value:!0});lc.DEFAULT_HEADERS=void 0;const CS=cc;lc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${CS.version}`};var Py=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ah,"__esModule",{value:!0});const jS=Py(sc),ES=Py(Mi),PS=lc;let TS=class Ty{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},PS.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new jS.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ty(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${t}`);let l;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(i="POST",l=r);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new ES.default({method:i,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ah.default=TS;var ao=Ft&&Ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ft,"__esModule",{value:!0});ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const Ry=ao(ah);ft.PostgrestClient=Ry.default;const Oy=ao(sc);ft.PostgrestQueryBuilder=Oy.default;const Iy=ao(Mi);ft.PostgrestFilterBuilder=Iy.default;const My=ao(oc);ft.PostgrestTransformBuilder=My.default;const Ly=ao(ic);ft.PostgrestBuilder=Ly.default;const Ay=ao(ac);ft.PostgrestError=Ay.default;var RS=ft.default={PostgrestClient:Ry.default,PostgrestQueryBuilder:Oy.default,PostgrestFilterBuilder:Iy.default,PostgrestTransformBuilder:My.default,PostgrestBuilder:Ly.default,PostgrestError:Ay.default};const{PostgrestClient:OS,PostgrestQueryBuilder:LL,PostgrestFilterBuilder:AL,PostgrestTransformBuilder:FL,PostgrestBuilder:$L,PostgrestError:BL}=RS;function IS(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const MS=IS(),LS="2.11.15",AS=`realtime-js/${LS}`,FS="1.0.0",Fy=1e4,$S=1e3;var Go;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Go||(Go={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var Vt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vt||(Vt={}));var Rd;(function(e){e.websocket="websocket"})(Rd||(Rd={}));var Tn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tn||(Tn={}));class BS{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(t.slice(i,i+s));i=i+s;const l=n.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class $y{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pe||(pe={}));const fm=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=US(i,e,t,s),o),{})},US=(e,t,r,n)=>{const s=t.find(a=>a.name===e),o=s==null?void 0:s.type,i=r[e];return o&&!n.includes(o)?By(o,i):Od(i)},By=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return YS(t,r)}switch(e){case pe.bool:return WS(t);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return HS(t);case pe.json:case pe.jsonb:return zS(t);case pe.timestamp:return VS(t);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Od(t);default:return Od(t)}},Od=e=>e,WS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},HS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zS=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},YS=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>By(t,a))}return e},VS=e=>typeof e=="string"?e.replace(" ","T"):e,Uy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class tu{constructor(t,r,n={},s=Fy){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hm||(hm={}));class qo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qo.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=qo.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qo.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),a={},l={};return this.map(o,(u,d)=>{i[u]||(l[u]=d)}),this.map(i,(u,d)=>{const f=o[u];if(f){const h=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),g=d.filter(b=>p.indexOf(b.presence_ref)<0),x=f.filter(b=>h.indexOf(b.presence_ref)<0);g.length>0&&(a[u]=g),x.length>0&&(l[u]=x)}else a[u]=d}),this.syncDiff(o,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const f=t[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[a].unshift(...h)}n(a,d,l)}),this.map(i,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(pm||(pm={}));var mm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mm||(mm={}));var xr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xr||(xr={}));class lh{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tu(this,Vt.join,this.params,this.timeout),this.rejoinTimer=new $y(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vt.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new qo(this),this.broadcastEndpointURL=Uy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(d=>t==null?void 0:t(xr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(xr.CLOSED));const l={},u={broadcast:o,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(xr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let x=0;x<p;x++){const b=h[x],{filter:{event:y,schema:m,table:v,filter:_}}=b,k=d&&d[x];if(k&&k.event===y&&k.schema===m&&k.table===v&&k.filter===_)g.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(xr.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xe.errored,t==null||t(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new tu(this,Vt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new tu(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Vt;if(n&&[a,l,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,x,b;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,x,b,y,m,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,k=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:x,table:b,commit_timestamp:y,type:m,errors:v}=g;h=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:y,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&lh.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vt.close,{},t)}_onError(t){this._on(Vt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=fm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=fm(t.columns,t.old_record)),r}}const gm=()=>{},GS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qS{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fy,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gm,this.ref=0,this.logger=gm,this.conn=null,this.sendBuffer=[],this.serializer=new BS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>ro(()=>Promise.resolve().then(()=>io),void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${Rd.websocket}`,this.httpEndpoint=Uy(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $y(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=MS),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:FS}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Go.connecting:return Tn.Connecting;case Go.open:return Tn.Open;case Go.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new lh(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:AS};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Vt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close($S,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([GS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ch extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class KS extends ch{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Id extends ch{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var QS=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const Wy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>io),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},JS=()=>QS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ro(()=>Promise.resolve().then(()=>io),void 0)).Response:Response}),Md=e=>{if(Array.isArray(e))return e.map(r=>Md(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Md(n)}),t},XS=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var es=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const ru=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZS=(e,t,r)=>es(void 0,void 0,void 0,function*(){const n=yield JS();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,i=(s==null?void 0:s.statusCode)||o+"";t(new KS(ru(s),o,i))}).catch(s=>{t(new Id(ru(s),s))}):t(new Id(ru(e),e))}),eN=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(XS(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function Li(e,t,r,n,s,o){return es(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(r,eN(t,n,s,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>ZS(l,a,n))})})}function ml(e,t,r,n){return es(this,void 0,void 0,function*(){return Li(e,"GET",t,r,n)})}function br(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Li(e,"POST",t,n,s,r)})}function Ld(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Li(e,"PUT",t,n,s,r)})}function tN(e,t,r,n){return es(this,void 0,void 0,function*(){return Li(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Hy(e,t,r,n,s){return es(this,void 0,void 0,function*(){return Li(e,"DELETE",t,n,s,r)})}var ut=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const rN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nN{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Wy(s)}uploadOrUpdate(t,r,n,s){return ut(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},vm),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?Ld:br)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(Fe(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ut(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:vm.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Ld(this.fetch,a.toString(),l,{headers:d});return{data:{path:o,fullPath:f.Key},error:null}}catch(l){if(Fe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield br(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new ch("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}update(t,r,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield br(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ut(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield br(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=yield br(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}download(t,r){return ut(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ml(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}info(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ml(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Md(n),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}exists(t){return ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield tN(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Fe(n)&&n instanceof Id){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Hy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}list(t,r,n){return ut(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},rN),r),{prefix:t||""});return{data:yield br(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const sN="2.10.4",oN={"X-Client-Info":`storage-js/${sN}`};var ss=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class iN{constructor(t,r={},n,s){const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},oN),r),this.fetch=Wy(n)}listBuckets(){return ss(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}getBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ss(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ss(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ss(this,void 0,void 0,function*(){try{return{data:yield Hy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}}class aN extends iN{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new nN(this.url,this.headers,t,this.fetch)}}const lN="2.53.0";let Mo="";typeof Deno<"u"?Mo="deno":typeof document<"u"?Mo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mo="react-native":Mo="node";const cN={"X-Client-Info":`supabase-js-${Mo}/${lN}`},uN={headers:cN},dN={schema:"public"},fN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hN={};var pN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const mN=e=>{let t;return e?t=e:typeof fetch>"u"?t=Cy:t=fetch,(...r)=>t(...r)},gN=()=>typeof Headers>"u"?jy:Headers,vN=(e,t,r)=>{const n=mN(r),s=gN();return(o,i)=>pN(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:u}))})};var yN=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};function xN(e){return e.endsWith("/")?e:e+"/"}function bN(e,t){var r,n;const{db:s,auth:o,realtime:i,global:a}=e,{db:l,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>yN(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const zy="2.71.1",ds=30*1e3,Ad=3,nu=Ad*ds,wN="http://localhost:9999",_N="supabase.auth.token",kN={"X-Client-Info":`gotrue-js/${zy}`},Fd="X-Supabase-Api-Version",Yy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NN=10*60*1e3;class uh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function X(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DN extends uh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function CN(e){return X(e)&&e.name==="AuthApiError"}class Vy extends uh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wn extends uh{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class zr extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jN(e){return X(e)&&e.name==="AuthSessionMissingError"}class la extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ca extends wn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ua extends wn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EN(e){return X(e)&&e.name==="AuthImplicitGrantRedirectError"}class ym extends wn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $d extends wn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function su(e){return X(e)&&e.name==="AuthRetryableFetchError"}class xm extends wn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Bd extends wn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bm=` 	
\r=`.split(""),PN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<bm.length;t+=1)e[bm[t].charCodeAt(0)]=-2;for(let t=0;t<gl.length;t+=1)e[gl[t].charCodeAt(0)]=t;return e})();function wm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gl[n]),t.queuedBits-=6}}function Gy(e,t,r){const n=PN[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function _m(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{ON(i,n,r)};for(let i=0;i<e.length;i+=1)Gy(e.charCodeAt(i),s,o);return t.join("")}function TN(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RN(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}TN(n,t)}}function ON(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function IN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Gy(e.charCodeAt(s),r,n);return new Uint8Array(t)}function MN(e){const t=[];return RN(e,r=>t.push(r)),new Uint8Array(t)}function LN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>wm(s,r,n)),wm(null,r,n),t.join("")}function AN(e){return Math.round(Date.now()/1e3)+e}function FN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",_n={tested:!1,writable:!1},qy=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_n.tested)return _n.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),_n.tested=!0,_n.writable=!0}catch{_n.tested=!0,_n.writable=!1}return _n.writable};function $N(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Ky=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ro(()=>Promise.resolve().then(()=>io),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},BN=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},kn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wr=async(e,t)=>{await e.removeItem(t)};class uc{constructor(){this.promise=new uc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}uc.promiseConstructor=Promise;function ou(e){const t=e.split(".");if(t.length!==3)throw new Bd("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!SN.test(t[n]))throw new Bd("JWT not in base64url format");return{header:JSON.parse(_m(t[0])),payload:JSON.parse(_m(t[1])),signature:IN(t[2]),raw:{header:t[0],payload:t[1]}}}async function UN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function WN(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function HN(e){return("0"+e.toString(16)).substr(-2)}function zN(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,HN).join("")}async function YN(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function VN(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await YN(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function os(e,t,r=!1){const n=zN();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await fs(e,`${t}-code-verifier`,s);const o=await VN(n);return[o,n===o?"plain":"s256"]}const GN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qN(e){const t=e.headers.get(Fd);if(!t||!t.match(GN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function KN(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function QN(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function is(e){if(!JN.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function iu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function km(e){return JSON.parse(JSON.stringify(e))}var XN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const jn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZN=[502,503,504];async function Sm(e){var t;if(!BN(e))throw new $d(jn(e),0);if(ZN.includes(e.status))throw new $d(jn(e),e.status);let r;try{r=await e.json()}catch(o){throw new Vy(jn(o),o)}let n;const s=qN(e);if(s&&s.getTime()>=Yy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xm(jn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new xm(jn(r),e.status,r.weak_password.reasons);throw new DN(jn(r),e.status||500,n)}const eD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ee(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Fd]||(o[Fd]=Yy["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await tD(e,t,r+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function tD(e,t,r,n,s,o){const i=eD(t,n,s,o);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new $d(jn(l),0)}if(a.ok||await Sm(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Sm(l)}}function vr(e){var t;let r=null;oD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=AN(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Nm(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rD(e){return{data:e,error:null}}function nD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=XN(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function sD(e){return e}function oD(e){return e.access_token&&e.refresh_token&&e.expires_in}const au=["global","local","others"];var iD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class aD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ky(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=au[0]){if(au.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${au.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=iD(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:nD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(X(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:sD});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(X(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){is(t);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){is(t);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){is(t);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){is(t.userId);try{const{data:r,error:n}=await ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _deleteFactor(t){is(t.userId),is(t.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}}function Dm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function lD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const as={debug:!!(globalThis&&qy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cD extends Qy{}async function uD(e,t,r){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(as.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}lD();const dD={url:wN,storageKey:_N,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cm(e,t,r){return await r()}const ls={};class gi{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gi.nextInstanceID,gi.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},dD),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new aD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ky(s.fetch),this.lock=s.lock||Cm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ht()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=uD:this.lock=Cm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:qy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Dm(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ls[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ls[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=$N(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),EN(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return X(r)?{error:r}:{error:new Vy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vr}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(X(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await os(this.storage,this.storageKey)),o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:vr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:vr})}else throw new ca("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(X(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:a}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nm})}else if("phone"in t){const{phone:o,password:i,options:a}=t;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nm})}else throw new ca("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new la}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,a,l,u,d,f,h,p;let g,x;if("message"in t)g=t.message,x=t.signature;else{const{chain:b,wallet:y,statement:m,options:v}=t;let _;if(Ht())if(typeof y=="object")_=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const k=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:b,error:y}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:LN(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vr});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new la}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(X(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:vr});if(await Wr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new la}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(X(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,a=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:vr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new la}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await os(this.storage,this.storageKey));const{error:f}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ca("You must provide either an email or phone number.")}catch(a){if(X(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:vr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,u=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await os(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:rD})}catch(o){if(X(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zr;const{error:s}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:a}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new ca("You must provide either an email or phone number and a type")}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<nu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await kn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=iu()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kr}):await this._useSession(async r=>{var n,s,o;const{data:i,error:a}=r;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zr}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Kr})})}catch(r){if(X(r))return jN(r)&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new zr;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await os(this.storage,this.storageKey));const{data:u,error:d}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Kr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zr;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=ou(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(X(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:a}=r;if(a)throw a;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zr;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ht())throw new ua("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ua(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ym("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ua("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ym("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:u}=t;if(!o||!a||!i||!u)throw new ua("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=ds&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:x,error:b}=await this._getUser(o);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(X(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(CN(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=FN(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await os(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(X(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,a,l,u,d;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ht()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(X(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await WN(async s=>(s>0&&await UN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&su(o)&&Date.now()+i-n<ds})}catch(n){if(this._debug(r,"error",n),X(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await kn(this.storage,this.storageKey);if(s&&this.userStorage){let i=await kn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await fs(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:iu()}else if(s&&!s.user&&!s.user){const i=await kn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Wr(this.storage,this.storageKey+"-user"),await fs(this.storage,this.storageKey,s)):s.user=iu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<nu;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${nu}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),su(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new uc;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new zr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),X(o)){const i={session:null,error:o};return su(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await fs(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=km(s);await fs(this.storage,this.storageKey,o)}else{const s=km(r);await fs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Wr(this.storage,this.storageKey),await Wr(this.storage,this.storageKey+"-code-verifier"),await Wr(this.storage,this.storageKey+"-user"),this.userStorage&&await Wr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ds);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ds);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ds}ms, refresh threshold is ${Ad} ticks`),s<=Ad&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await os(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:a}=await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ou(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+NN>s)return n;const{data:o,error:i}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:l}}=ou(n);r!=null&&r.allowExpired||KN(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=QN(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,MN(`${a}.${l}`)))throw new Bd("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}}gi.nextInstanceID=0;const fD=gi;class hD extends fD{constructor(t){super(t)}}var pD=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class mD{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=xN(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:dN,realtime:hN,auth:Object.assign(Object.assign({},fN),{storageKey:u}),global:uN},f=bN(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=vN(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new OS(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new aN(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new cS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return pD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:a,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new qS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gD=(e,t,r)=>new mD(e,t,r);function vD(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}vD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yD="https://rqbvcvwbziilnycqtmnc.supabase.co",xD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxYnZjdndiemlpbG55Y3F0bW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyMzk5ODIsImV4cCI6MjA2NTgxNTk4Mn0.819LDXCnlu2dgCPw91oMbZIojeFom-UxqJn2hA5yjBM",Y=gD(yD,xD),Jy=w.createContext(void 0);function bD(){const e=w.useContext(Jy);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function wD({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{Y.auth.getSession().then(({data:{session:h}})=>{s(h),r((h==null?void 0:h.user)??null),i(!1)});const{data:{subscription:f}}=Y.auth.onAuthStateChange(async(h,p)=>{s(p),r((p==null?void 0:p.user)??null),i(!1)});return()=>f.unsubscribe()},[]);const d={user:t,session:n,loading:o,signIn:async(f,h)=>await Y.auth.signInWithPassword({email:f,password:h}),signUp:async(f,h)=>await Y.auth.signUp({email:f,password:h}),signOut:async()=>{await Y.auth.signOut()}};return c.jsx(Jy.Provider,{value:d,children:e})}function _D({children:e}){return c.jsx(c.Fragment,{children:e})}function nt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kD=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),jm=kD,lu=()=>Math.random().toString(36).substring(7).split("").join("."),SD={INIT:`@@redux/INIT${lu()}`,REPLACE:`@@redux/REPLACE${lu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lu()}`},Em=SD;function ND(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Xy(e,t,r){if(typeof e!="function")throw new Error(nt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(nt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(nt(1));return r(Xy)(e,t)}let n=e,s=t,o=new Map,i=o,a=0,l=!1;function u(){i===o&&(i=new Map,o.forEach((b,y)=>{i.set(y,b)}))}function d(){if(l)throw new Error(nt(3));return s}function f(b){if(typeof b!="function")throw new Error(nt(4));if(l)throw new Error(nt(5));let y=!0;u();const m=a++;return i.set(m,b),function(){if(y){if(l)throw new Error(nt(6));y=!1,u(),i.delete(m),o=null}}}function h(b){if(!ND(b))throw new Error(nt(7));if(typeof b.type>"u")throw new Error(nt(8));if(typeof b.type!="string")throw new Error(nt(17));if(l)throw new Error(nt(9));try{l=!0,s=n(s,b)}finally{l=!1}return(o=i).forEach(m=>{m()}),b}function p(b){if(typeof b!="function")throw new Error(nt(10));n=b,h({type:Em.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(nt(11));function m(){const _=y;_.next&&_.next(d())}return m(),{unsubscribe:b(m)}},[jm](){return this}}}return h({type:Em.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[jm]:g}}function Pm(e,t){return function(...r){return t(e.apply(this,r))}}function Tm(e,t){if(typeof e=="function")return Pm(e,t);if(typeof e!="object"||e===null)throw new Error(nt(16));const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=Pm(s,t))}return r}function Zy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function DD(...e){return t=>(r,n)=>{const s=t(r,n);let o=()=>{throw new Error(nt(15))};const i={getState:s.getState,dispatch:(l,...u)=>o(l,...u)},a=e.map(l=>l(i));return o=Zy(...a)(s.dispatch),{...s,dispatch:o}}}var CD={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=w;function jD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ED=typeof Object.is=="function"?Object.is:jD,PD=Ai.useSyncExternalStore,TD=Ai.useRef,RD=Ai.useEffect,OD=Ai.useMemo,ID=Ai.useDebugValue;CD.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=TD(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=OD(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),s!==void 0&&i.hasValue){var g=i.value;if(s(g,p))return f=g}return f=p}if(g=f,ED(d,p))return g;var x=n(p);return s!==void 0&&s(g,x)?(d=p,g):(d=p,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,s]);var a=PD(e,o[0],o[1]);return RD(function(){i.hasValue=!0,i.value=a},[a]),ID(a),a};var MD=w.version.startsWith("19"),LD=Symbol.for(MD?"react.transitional.element":"react.element"),AD=Symbol.for("react.portal"),FD=Symbol.for("react.fragment"),$D=Symbol.for("react.strict_mode"),BD=Symbol.for("react.profiler"),UD=Symbol.for("react.consumer"),WD=Symbol.for("react.context"),ex=Symbol.for("react.forward_ref"),HD=Symbol.for("react.suspense"),zD=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),YD=Symbol.for("react.lazy"),VD=ex,GD=dh;function qD(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case LD:switch(e=e.type,e){case FD:case BD:case $D:case HD:case zD:return e;default:switch(e=e&&e.$$typeof,e){case WD:case ex:case YD:case dh:return e;case UD:return e;default:return t}}case AD:return t}}}function KD(e){return qD(e)===dh}function QD(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:i}){let a=!1,l,u,d,f,h;function p(m,v){return l=m,u=v,d=e(l,u),f=t(n,u),h=r(d,f,u),a=!0,h}function g(){return d=e(l,u),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function x(){return e.dependsOnOwnProps&&(d=e(l,u)),t.dependsOnOwnProps&&(f=t(n,u)),h=r(d,f,u),h}function b(){const m=e(l,u),v=!i(m,d);return d=m,v&&(h=r(d,f,u)),h}function y(m,v){const _=!o(v,u),k=!s(m,l,v,u);return l=m,u=v,_&&k?g():_?x():k?b():h}return function(v,_){return a?y(v,_):p(v,_)}}function JD(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...s}){const o=t(e,s),i=r(e,s),a=n(e,s);return QD(o,i,a,e,s)}function XD(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function Ud(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function Rm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function tx(e,t){return function(n,{displayName:s}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=e,o.dependsOnOwnProps=Rm(e);let u=o(a,l);return typeof u=="function"&&(o.mapToProps=u,o.dependsOnOwnProps=Rm(u),u=o(a,l)),u},o}}function fh(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function ZD(e){return e&&typeof e=="object"?Ud(t=>XD(e,t)):e?typeof e=="function"?tx(e):fh(e,"mapDispatchToProps"):Ud(t=>({dispatch:t}))}function eC(e){return e?typeof e=="function"?tx(e):fh(e,"mapStateToProps"):Ud(()=>({}))}function tC(e,t,r){return{...r,...e,...t}}function rC(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,i;return function(l,u,d){const f=e(l,u,d);return o?s(f,i)||(i=f):(o=!0,i=f),i}}}function nC(e){return e?typeof e=="function"?rC(e):fh(e,"mergeProps"):()=>tC}function sC(e){e()}function oC(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sC(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Om={notify(){},get:()=>[]};function rx(e,t){let r,n=Om,s=0,o=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function a(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return o}function d(){s++,r||(r=t?t.addNestedSub(l):e.subscribe(l),n=oC())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Om)}function h(){o||(o=!0,d())}function p(){o&&(o=!1,f())}const g={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var iC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aC=iC(),lC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cC=lC(),uC=()=>aC||cC?w.useLayoutEffect:w.useEffect,vl=uC();function Im(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function cu(e,t){if(Im(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Im(e[r[s]],t[r[s]]))return!1;return!0}var dC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pC={[VD]:hC,[GD]:nx};function Mm(e){return KD(e)?nx:pC[e.$$typeof]||dC}var mC=Object.defineProperty,gC=Object.getOwnPropertyNames,Lm=Object.getOwnPropertySymbols,vC=Object.getOwnPropertyDescriptor,yC=Object.getPrototypeOf,Am=Object.prototype;function Wd(e,t){if(typeof t!="string"){if(Am){const o=yC(t);o&&o!==Am&&Wd(e,o)}let r=gC(t);Lm&&(r=r.concat(Lm(t)));const n=Mm(e),s=Mm(t);for(let o=0;o<r.length;++o){const i=r[o];if(!fC[i]&&!(s&&s[i])&&!(n&&n[i])){const a=vC(t,i);try{mC(e,i,a)}catch{}}}}return e}var uu=Symbol.for("react-redux-context"),du=typeof globalThis<"u"?globalThis:{};function xC(){if(!w.createContext)return{};const e=du[uu]??(du[uu]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var sx=xC(),bC=[null,null];function wC(e,t,r){vl(()=>e(...t),r)}function _C(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function kC(e,t,r,n,s,o,i,a,l,u,d){if(!e)return()=>{};let f=!1,h=null;const p=()=>{if(f||!a.current)return;const x=t.getState();let b,y;try{b=n(x,s.current)}catch(m){y=m,h=m}y||(h=null),b===o.current?i.current||u():(o.current=b,l.current=b,i.current=!0,d())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function SC(e,t){return e===t}function NC(e,t,r,{pure:n,areStatesEqual:s=SC,areOwnPropsEqual:o=cu,areStatePropsEqual:i=cu,areMergedPropsEqual:a=cu,forwardRef:l=!1,context:u=sx}={}){const d=u,f=eC(e),h=ZD(t),p=nC(r),g=!!e;return b=>{const y=b.displayName||b.name||"Component",m=`Connect(${y})`,v={shouldHandleStateChanges:g,displayName:m,wrappedComponentName:y,WrappedComponent:b,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:a};function _(N){const[C,j,E]=w.useMemo(()=>{const{reactReduxForwardedRef:Me,...rs}=N;return[N.context,Me,rs]},[N]),M=w.useMemo(()=>{let Me=d;return C!=null&&C.Consumer,Me},[C,d]),H=w.useContext(M),F=!!N.store&&!!N.store.getState&&!!N.store.dispatch,B=!!H&&!!H.store,T=F?N.store:H.store,O=B?H.getServerState:T.getState,U=w.useMemo(()=>JD(T.dispatch,v),[T]),[D,R]=w.useMemo(()=>{if(!g)return bC;const Me=rx(T,F?void 0:H.subscription),rs=Me.notifyNestedSubs.bind(Me);return[Me,rs]},[T,F,H]),L=w.useMemo(()=>F?H:{...H,subscription:D},[F,H,D]),W=w.useRef(void 0),Q=w.useRef(E),Ne=w.useRef(void 0),Re=w.useRef(!1),Ct=w.useRef(!1),Ke=w.useRef(void 0);vl(()=>(Ct.current=!0,()=>{Ct.current=!1}),[]);const I=w.useMemo(()=>()=>Ne.current&&E===Q.current?Ne.current:U(T.getState(),E),[T,E]),re=w.useMemo(()=>rs=>D?kC(g,T,D,U,Q,W,Re,Ct,Ne,R,rs):()=>{},[D]);wC(_C,[Q,W,Re,E,Ne,R]);let J;try{J=w.useSyncExternalStore(re,I,O?()=>U(O(),E):I)}catch(Me){throw Ke.current&&(Me.message+=`
The error may be correlated with this previous error:
${Ke.current.stack}

`),Me}vl(()=>{Ke.current=void 0,Ne.current=void 0,W.current=J});const Ie=w.useMemo(()=>w.createElement(b,{...J,ref:j}),[j,b,J]);return w.useMemo(()=>g?w.createElement(M.Provider,{value:L},Ie):Ie,[M,Ie,L])}const S=w.memo(_);if(S.WrappedComponent=b,S.displayName=_.displayName=m,l){const C=w.forwardRef(function(E,M){return w.createElement(S,{...E,reactReduxForwardedRef:M})});return C.displayName=m,C.WrappedComponent=b,Wd(C,b)}return Wd(S,b)}}var ox=NC;function DC(e){const{children:t,context:r,serverState:n,store:s}=e,o=w.useMemo(()=>{const l=rx(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),i=w.useMemo(()=>s.getState(),[s]);vl(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,i]);const a=r||sx;return w.createElement(a.Provider,{value:o},t)}var CC=DC,jC=!0,fu="Invariant failed";function EC(e,t){if(!e){if(jC)throw new Error(fu);var r=typeof t=="function"?t():t,n=r?"".concat(fu,": ").concat(r):fu;throw new Error(n)}}var qt=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,i=n-o,a=s-r,l={top:r,right:n,bottom:s,left:o,width:i,height:a,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return l},hh=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Fm=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},PC=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},hu={top:0,right:0,bottom:0,left:0},ph=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?hu:n,o=t.border,i=o===void 0?hu:o,a=t.padding,l=a===void 0?hu:a,u=qt(hh(r,s)),d=qt(Fm(r,i)),f=qt(Fm(d,l));return{marginBox:u,borderBox:qt(r),paddingBox:d,contentBox:f,margin:s,border:i,padding:l}},jt=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&EC(!1),s},TC=function(){return{x:window.pageXOffset,y:window.pageYOffset}},yl=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,i=t.padding,a=PC(n,r);return ph({borderBox:a,border:s,margin:o,padding:i})},xl=function(t,r){return r===void 0&&(r=TC()),yl(t,r)},ix=function(t,r){var n={top:jt(r.marginTop),right:jt(r.marginRight),bottom:jt(r.marginBottom),left:jt(r.marginLeft)},s={top:jt(r.paddingTop),right:jt(r.paddingRight),bottom:jt(r.paddingBottom),left:jt(r.paddingLeft)},o={top:jt(r.borderTopWidth),right:jt(r.borderRightWidth),bottom:jt(r.borderBottomWidth),left:jt(r.borderLeftWidth)};return ph({borderBox:t,margin:n,padding:s,border:o})},ax=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return ix(r,n)},RC=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};const vi=RC;function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(null,arguments)}function lx(e,t){}lx.bind(null,"warn");lx.bind(null,"error");function cn(){}function OC(e,t){return{...e,...t}}function Mt(e,t,r){const n=t.map(s=>{const o=OC(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const IC="Invariant failed";class wl extends Error{}wl.prototype.toString=function(){return this.message};function $(e,t){throw new wl(IC)}class MC extends P.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=cn,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof wl&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Mt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof wl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const LC=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,_l=e=>e+1,AC=e=>`
  You have lifted an item in position ${_l(e.source.index)}
`,cx=(e,t)=>{const r=e.droppableId===t.droppableId,n=_l(e.index),s=_l(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},ux=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,FC=e=>{const t=e.destination;if(t)return cx(e.source,t);const r=e.combine;return r?ux(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},$m=e=>`
  The item has returned to its starting position
  of ${_l(e.index)}
`,$C=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${$m(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${cx(e.source,t)}
    `:r?`
      You have dropped the item.
      ${ux(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${$m(e.source)}
  `},Aa={dragHandleUsageInstructions:LC,onDragStart:AC,onDragUpdate:FC,onDragEnd:$C};function BC(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function dx(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!BC(e[r],t[r]))return!1;return!0}function ne(e,t){const r=w.useState(()=>({inputs:t,result:e()}))[0],n=w.useRef(!0),s=w.useRef(r),i=n.current||!!(t&&s.current.inputs&&dx(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{n.current=!1,s.current=i},[i]),i.result}function K(e,t){return ne(()=>e,t)}const We={x:0,y:0},Ye=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),xt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),un=(e,t)=>e.x===t.x&&e.y===t.y,lo=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),qn=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},yi=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Bm=(e,t)=>Math.min(...t.map(r=>yi(e,r))),fx=e=>t=>({x:e(t.x),y:e(t.y)});var UC=(e,t)=>{const r=qt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Fi=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Um=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],WC={top:0,right:0,bottom:0,left:0},HC=(e,t)=>t?Fi(e,t.scroll.diff.displacement):e,zC=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,YC=(e,t)=>t&&t.shouldClipSubject?UC(t.pageMarginBox,e):qt(e);var Hs=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=HC(e.marginBox,n),o=zC(s,r,t),i=YC(o,n);return{page:e,withPlaceholder:t,active:i}},mh=(e,t)=>{e.frame||$();const r=e.frame,n=xt(t,r.scroll.initial),s=lo(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},i=Hs({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function Ue(e,t=dx){let r=null;function n(...s){if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}const hx=Ue(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),px=Ue(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),dc=Ue(e=>Object.values(e)),VC=Ue(e=>Object.values(e));var co=Ue((e,t)=>VC(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function gh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function fc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var hc=Ue((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),GC=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!gh(s))return null;function i(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...s,at:g}}const a=s.displaced.all,l=a.length?a[0]:null;if(e)return l?i(l):null;const u=hc(t,n);if(!l){if(!u.length)return null;const p=u[u.length-1];return i(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===l);d===-1&&$();const f=d-1;if(f<0)return null;const h=u[f];return i(h.descriptor.id)},uo=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const mx={point:We,value:0},xi={invisible:{},visible:{},all:[]},qC={displaced:xi,displacedBy:mx,at:null};var At=(e,t)=>r=>e<=r&&r<=t,gx=e=>{const t=At(e.top,e.bottom),r=At(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const l=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return l&&u?!0:l&&i||u&&o}},KC=e=>{const t=At(e.top,e.bottom),r=At(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const vh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},vx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var QC=e=>t=>{const r=At(t.top,t.bottom),n=At(t.left,t.right);return s=>e===vh?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const JC=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:We;return Fi(e,r)},XC=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,ZC=(e,t,r)=>r(t)(e),yh=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?JC(e,t):e;return XC(o,t,s)&&ZC(o,r,s)},ej=e=>yh({...e,isVisibleThroughFrameFn:gx}),yx=e=>yh({...e,isVisibleThroughFrameFn:KC}),tj=e=>yh({...e,isVisibleThroughFrameFn:QC(e.destination.axis)}),rj=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function nj(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return qt(hh(r,n))}function bi({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(a,l){const u=nj(l,r),d=l.descriptor.id;if(a.all.push(d),!ej({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=rj(d,o,s),p={draggableId:d,shouldAnimate:h};return a.visible[d]=p,a},{all:[],visible:{},invisible:{}})}function sj(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Wm({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=sj(e,{inHomeList:t});return{displaced:xi,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function kl({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:i,forceShouldAnimate:a}){const l=uo(e,r);if(i==null)return Wm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const u=t.find(g=>g.descriptor.index===i);if(!u)return Wm({insideDestination:t,inHomeList:l,displacedBy:s,destination:r});const d=hc(e,t),f=t.indexOf(u),h=d.slice(f);return{displaced:bi({afterDragging:h,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function mn(e,t){return!!t.effected[e]}var oj=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return mn(o,s)?e?a:a-1:e?a+1:a},ij=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,i=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=t?a:a+1;return o<i||o>l?null:o},aj=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:i,viewport:a,afterCritical:l})=>{const u=i.at;if(u||$(),u.type==="REORDER"){const f=ij({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:o});return f==null?null:kl({draggable:r,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:f})}const d=oj({isMovingForward:e,destination:s,displaced:i.displaced,draggables:n,combine:u.combine,afterCritical:l});return d==null?null:kl({draggable:r,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:d})},lj=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return mn(r,t)?s?We:lo(n.point):s?n.point:We},cj=({afterCritical:e,impact:t,draggables:r})=>{const n=fc(t);n||$();const s=n.draggableId,o=r[s].page.borderBox.center,i=lj({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return Ye(o,i)};const xx=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,uj=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,xh=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Hm=({axis:e,moveRelativeTo:t,isMoving:r})=>qn(e.line,t.marginBox[e.end]+xx(e,r),xh(e,t.marginBox,r)),zm=({axis:e,moveRelativeTo:t,isMoving:r})=>qn(e.line,t.marginBox[e.start]-uj(e,r),xh(e,t.marginBox,r)),dj=({axis:e,moveInto:t,isMoving:r})=>qn(e.line,t.contentBox[e.start]+xx(e,r),xh(e,t.contentBox,r));var fj=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=co(n.descriptor.id,r),i=t.page,a=n.axis;if(!o.length)return dj({axis:a,moveInto:n.page,isMoving:i});const{displaced:l,displacedBy:u}=e,d=l.all[0];if(d){const h=r[d];if(mn(d,s))return zm({axis:a,moveRelativeTo:h.page,isMoving:i});const p=yl(h.page,u.point);return zm({axis:a,moveRelativeTo:p,isMoving:i})}const f=o[o.length-1];if(f.descriptor.id===t.descriptor.id)return i.borderBox.center;if(mn(f.descriptor.id,s)){const h=yl(f.page,lo(s.displacedBy.point));return Hm({axis:a,moveRelativeTo:h,isMoving:i})}return Hm({axis:a,moveRelativeTo:f.page,isMoving:i})},Hd=(e,t)=>{const r=e.frame;return r?Ye(t,r.scroll.diff.displacement):t};const hj=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?fj({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):cj({impact:e,draggables:n,afterCritical:s})};var pc=e=>{const t=hj(e),r=e.droppable;return r?Hd(r,t):t},bx=(e,t)=>{const r=xt(t,e.scroll.initial),n=lo(r);return{frame:qt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Ym(e,t){return e.map(r=>t[r])}function pj(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var mj=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=bx(t,Ye(t.scroll.current,s)),i=r.frame?mh(r,Ye(r.frame.scroll.current,s)):r,a=e.displaced,l=bi({afterDragging:Ym(a.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),u=bi({afterDragging:Ym(a.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),d={},f={},h=[a,l,u];return a.all.forEach(g=>{const x=pj(g,h);if(x){f[g]=x;return}d[g]=!0}),{...e,displaced:{all:a.all,invisible:d,visible:f}}},gj=(e,t)=>Ye(e.scroll.diff.displacement,t),bh=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=gj(r,e),s=xt(n,t.page.borderBox.center);return Ye(t.client.borderBox.center,s)},wx=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const i=xt(r,e.page.borderBox.center),l={target:Fi(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:n};return o?tj(l):yx(l)},vj=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const u=co(r.descriptor.id,n),d=uo(t,r),f=GC({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:s})||aj({isMovingForward:e,isInHomeList:d,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:l});if(!f)return null;const h=pc({impact:f,draggable:t,droppable:r,draggables:n,afterCritical:l});if(wx({draggable:t,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:bh({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:f,scrollJumpRequest:null};const g=xt(h,i),x=mj({impact:f,viewport:o,destination:r,draggables:n,maxScrollChange:g});return{clientSelection:a,impact:x,scrollJumpRequest:g}};const rt=e=>{const t=e.subject.active;return t||$(),t};var yj=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,a=At(o[i.start],o[i.end]),l=dc(n).filter(d=>d!==r).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>gx(s.frame)(rt(d))).filter(d=>{const f=rt(d);return e?o[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<o[i.crossAxisStart]}).filter(d=>{const f=rt(d),h=At(f[i.start],f[i.end]);return a(f[i.start])||a(f[i.end])||h(o[i.start])||h(o[i.end])}).sort((d,f)=>{const h=rt(d)[i.crossAxisStart],p=rt(f)[i.crossAxisStart];return e?h-p:p-h}).filter((d,f,h)=>rt(d)[i.crossAxisStart]===rt(h[0])[i.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const u=l.filter(d=>At(rt(d)[i.start],rt(d)[i.end])(t[i.line]));return u.length===1?u[0]:u.length>1?u.sort((d,f)=>rt(d)[i.start]-rt(f)[i.start])[0]:l.sort((d,f)=>{const h=Bm(t,Um(rt(d))),p=Bm(t,Um(rt(f)));return h!==p?h-p:rt(d)[i.start]-rt(f)[i.start]})[0]};const Vm=(e,t)=>{const r=e.page.borderBox.center;return mn(e.descriptor.id,t)?xt(r,t.displacedBy.point):r},xj=(e,t)=>{const r=e.page.borderBox;return mn(e.descriptor.id,t)?Fi(r,lo(t.displacedBy.point)):r};var bj=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(i=>yx({target:xj(i,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const l=yi(e,Hd(r,Vm(i,s))),u=yi(e,Hd(r,Vm(a,s)));return l<u?-1:u<l?1:i.descriptor.index-a.descriptor.index})[0]||null,$i=Ue(function(t,r){const n=r[t.line];return{value:n,point:qn(t.line,n)}});const wj=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return qn(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],l=co(e.descriptor.id,r).reduce((u,d)=>u+d.client.marginBox[n.size],0)+t[n.line]-s;return l<=0?null:qn(n.line,l)},_x=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),kx=(e,t,r)=>{const n=e.frame;uo(t,e)&&$(),e.subject.withPlaceholder&&$();const s=$i(e.axis,t.displaceBy).point,o=wj(e,s,r),i={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const d=Hs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:d}}const a=o?Ye(n.scroll.max,o):n.scroll.max,l=_x(n,a),u=Hs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:u,frame:l}},_j=e=>{const t=e.subject.withPlaceholder;t||$();const r=e.frame;if(!r){const i=Hs({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||$();const s=_x(r,n),o=Hs({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var kj=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:i,afterCritical:a})=>{if(!t){if(r.length)return null;const f={displaced:xi,displacedBy:mx,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=pc({impact:f,draggable:n,droppable:o,draggables:s,afterCritical:a}),p=uo(n,o)?o:kx(o,n,s);return wx({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const l=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],u=(()=>{const f=t.descriptor.index;return t.descriptor.id===n.descriptor.id||l?f:f+1})(),d=$i(o.axis,n.displaceBy);return kl({draggable:n,insideDestination:r,destination:o,viewport:i,displacedBy:d,last:xi,index:u})},Sj=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:i,afterCritical:a})=>{const l=yj({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:i});if(!l)return null;const u=co(l.descriptor.id,s),d=bj({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:u,afterCritical:a}),f=kj({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:i,afterCritical:a});if(!f)return null;const h=pc({impact:f,draggable:r,droppable:l,draggables:s,afterCritical:a});return{clientSelection:bh({pageBorderBoxCenter:h,draggable:r,viewport:i}),impact:f,scrollJumpRequest:null}},wt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Nj=(e,t)=>{const r=wt(e);return r?t[r]:null};var Dj=({state:e,type:t})=>{const r=Nj(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,i=o.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!n)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:f,droppables:h}=e.dimensions;return a?vj({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Sj({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:f,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function En(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Sx(e){const t=At(e.top,e.bottom),r=At(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function Cj(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function jj({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const i=o.axis,a=qn(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:yi(n,a)}}).sort((o,i)=>i.distance-o.distance);return s[0]?s[0].id:null}function Ej({pageBorderBox:e,draggable:t,droppables:r}){const n=dc(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!Cj(e,o))return!1;if(Sx(o)(e.center))return!0;const i=s.axis,a=o.center[i.crossAxisLine],l=e[i.crossAxisStart],u=e[i.crossAxisEnd],d=At(o[i.crossAxisStart],o[i.crossAxisEnd]),f=d(l),h=d(u);return!f&&!h?!0:f?l<a:u>a});return n.length?n.length===1?n[0].descriptor.id:jj({pageBorderBox:e,draggable:t,candidates:n}):null}const Nx=(e,t)=>qt(Fi(e,t));var Pj=(e,t)=>{const r=e.frame;return r?Nx(t,r.scroll.diff.value):t};function Dx({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Tj({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Rj=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:i})=>{const a=r.axis,l=$i(r.axis,t.displaceBy),u=l.value,d=e[a.start],f=e[a.end],p=hc(t,n).find(x=>{const b=x.descriptor.id,y=x.page.borderBox.center[a.line],m=mn(b,i),v=Dx({displaced:s,id:b});return m?v?f<=y:d<y-u:v?f<=y+u:d<y})||null,g=Tj({draggable:t,closest:p,inHomeList:uo(t,r)});return kl({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:l,index:g})};const Oj=4;var Ij=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=n.axis,a=$i(n.axis,e.displaceBy),l=a.value,u=t[i.start],d=t[i.end],h=hc(e,s).find(g=>{const x=g.descriptor.id,b=g.page.borderBox,m=b[i.size]/Oj,v=mn(x,o),_=Dx({displaced:r.displaced,id:x});return v?_?d>b[i.start]+m&&d<b[i.end]-m:u>b[i.start]-l+m&&u<b[i.end]-l-m:_?d>b[i.start]+l+m&&d<b[i.end]+l-m:u>b[i.start]+m&&u<b[i.end]-m});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Cx=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:i})=>{const a=Nx(t.page.borderBox,e),l=Ej({pageBorderBox:a,draggable:t,droppables:n});if(!l)return qC;const u=n[l],d=co(u.descriptor.id,r),f=Pj(u,a);return Ij({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:i})||Rj({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:o,afterCritical:i})},wh=(e,t)=>({...e,[t.descriptor.id]:t});const Mj=({previousImpact:e,impact:t,droppables:r})=>{const n=wt(e),s=wt(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const i=_j(o);return wh(r,i)};var Lj=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=Mj({previousImpact:n,impact:s,droppables:r}),i=wt(s);if(!i)return o;const a=r[i];if(uo(e,a)||a.subject.withPlaceholder)return o;const l=kx(a,e,t);return wh(o,l)},Ko=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const i=n||e.viewport,a=r||e.dimensions,l=t||e.current.client.selection,u=xt(l,e.initial.client.selection),d={offset:u,selection:l,borderBoxCenter:Ye(e.initial.client.borderBoxCenter,u)},f={selection:Ye(d.selection,i.scroll.current),borderBoxCenter:Ye(d.borderBoxCenter,i.scroll.current),offset:Ye(d.offset,i.scroll.diff.value)},h={client:d,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:h};const p=a.draggables[e.critical.draggable.id],g=s||Cx({pageOffset:f.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=Lj({draggable:p,impact:g,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:h,dimensions:{draggables:a.draggables,droppables:x},impact:g,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function Aj(e,t){return e.map(r=>t[r])}var jx=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,i=Aj(o.all,r),a=bi({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:a}},Ex=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const i=pc({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return bh({pageBorderBoxCenter:i,draggable:t,viewport:s})},Px=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&$();const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:a}=o,l=i[e.critical.draggable.id],u=wt(n);u||$();const d=a[u],f=jx({impact:n,viewport:s,destination:d,draggables:i}),h=Ex({impact:f,draggable:l,droppable:d,draggables:i,viewport:s,afterCritical:e.afterCritical});return Ko({impact:f,clientSelection:h,state:e,dimensions:o,viewport:s})},Fj=e=>({index:e.index,droppableId:e.droppableId}),Tx=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=$i(t.axis,e.displaceBy),o=co(t.descriptor.id,r),i=o.indexOf(e);i===-1&&$();const a=o.slice(i+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:bi({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:Fj(e.descriptor)}},afterCritical:u}},$j=(e,t)=>({draggables:e.draggables,droppables:wh(e.droppables,t)}),Bj=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=yl(e.client,t),s=xl(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},Uj=e=>{const t=e.frame;return t||$(),t},Wj=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,i=t[o],l=Uj(i).scroll.diff.value,u=Ye(n,l);return Bj({draggable:s,offset:u,initialWindowScroll:r.scroll.initial})})},Hj=({state:e,published:t})=>{const r=t.modified.map(y=>{const m=e.dimensions.droppables[y.droppableId];return mh(m,y.scroll)}),n={...e.dimensions.droppables,...hx(r)},s=px(Wj({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(y=>{delete o[y]});const i={droppables:n,draggables:o},a=wt(e.impact),l=a?i.droppables[a]:null,u=i.draggables[e.critical.draggable.id],d=i.droppables[e.critical.droppable.id],{impact:f,afterCritical:h}=Tx({draggable:u,home:d,draggables:o,viewport:e.viewport}),p=l&&l.isCombineEnabled?e.impact:f,g=Cx({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:h}),x={...e,phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:i,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const zd=e=>e.movementMode==="SNAP",pu=(e,t,r)=>{const n=$j(e.dimensions,t);return!zd(e)||r?Ko({state:e,dimensions:n}):Px({state:e,dimensions:n})};function mu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Gm={phase:"IDLE",completed:null,shouldFlush:!1};var zj=(e=Gm,t)=>{if(t.type==="FLUSH")return{...Gm,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&$();const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:i}=t.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],u={selection:n,borderBoxCenter:a.client.borderBox.center,offset:We},d={client:u,page:{selection:Ye(u.selection,s.scroll.initial),borderBoxCenter:Ye(u.selection,s.scroll.initial),offset:Ye(u.selection,s.scroll.diff.value)}},f=dc(o.droppables).every(x=>!x.isFixedOnPage),{impact:h,afterCritical:p}=Tx({draggable:a,home:l,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:d,current:d,isWindowScrollAllowed:f,impact:h,afterCritical:p,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&$(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||$(),Hj({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;En(e)||$();const{client:r}=t.payload;return un(r,e.current.client.selection)?e:Ko({state:e,clientSelection:r,impact:zd(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return mu(e);En(e)||$();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=mh(s,n);return pu(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;En(e)||$();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||$(),s.isEnabled===n&&$();const o={...s,isEnabled:n};return pu(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;En(e)||$();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||$(),s.isCombineEnabled===n&&$();const o={...s,isCombineEnabled:n};return pu(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;En(e)||$(),e.isWindowScrollAllowed||$();const r=t.payload.newScroll;if(un(e.viewport.scroll.current,r))return mu(e);const n=bx(e.viewport,r);return zd(e)?Px({state:e,viewport:n}):Ko({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!En(e))return e;const r=t.payload.maxScroll;if(un(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&$();const r=Dj({state:e,type:t.type});return r?Ko({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&$(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||$(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function ce(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Yj=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Vj=e=>({type:"LIFT",payload:e}),Gj=e=>({type:"INITIAL_PUBLISH",payload:e}),qj=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Kj=()=>({type:"COLLECTION_STARTING",payload:null}),Qj=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Jj=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Xj=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Rx=e=>({type:"MOVE",payload:e}),Zj=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),eE=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),tE=()=>({type:"MOVE_UP",payload:null}),rE=()=>({type:"MOVE_DOWN",payload:null}),nE=()=>({type:"MOVE_RIGHT",payload:null}),sE=()=>({type:"MOVE_LEFT",payload:null}),_h=()=>({type:"FLUSH",payload:null}),oE=e=>({type:"DROP_ANIMATE",payload:e}),kh=e=>({type:"DROP_COMPLETE",payload:e}),Ox=e=>({type:"DROP",payload:e}),iE=e=>({type:"DROP_PENDING",payload:e}),Ix=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var aE=e=>({getState:t,dispatch:r})=>n=>s=>{if(!ce(s,"LIFT")){n(s);return}const{id:o,clientSelection:i,movementMode:a}=s.payload,l=t();l.phase==="DROP_ANIMATING"&&r(kh({completed:l.completed})),t().phase!=="IDLE"&&$(),r(_h()),r(Yj({draggableId:o,movementMode:a}));const d={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:h,viewport:p}=e.startPublishing(d);r(Gj({critical:f,dimensions:h,clientSelection:i,movementMode:a,viewport:p}))},lE=e=>()=>t=>r=>{ce(r,"INITIAL_PUBLISH")&&e.dragging(),ce(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(ce(r,"FLUSH")||ce(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Sh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},wi={opacity:{drop:0,combining:.7},scale:{drop:.75}},Mx={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Sn=`${Mx.outOfTheWay}s ${Sh.outOfTheWay}`,Qo={fluid:`opacity ${Sn}`,snap:`transform ${Sn}, opacity ${Sn}`,drop:e=>{const t=`${e}s ${Sh.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Sn}`,placeholder:`height ${Sn}, width ${Sn}, margin ${Sn}`},qm=e=>un(e,We)?void 0:`translate(${e.x}px, ${e.y}px)`,Yd={moveTo:qm,drop:(e,t)=>{const r=qm(e);if(r)return t?`${r} scale(${wi.scale.drop})`:r}},{minDropTime:Vd,maxDropTime:Lx}=Mx,cE=Lx-Vd,Km=1500,uE=.6;var dE=({current:e,destination:t,reason:r})=>{const n=yi(e,t);if(n<=0)return Vd;if(n>=Km)return Lx;const s=n/Km,o=Vd+cE*s,i=r==="CANCEL"?o*uE:o;return Number(i.toFixed(2))},fE=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:i}=r,a=wt(e),l=a?i[a]:null,u=i[t.descriptor.droppableId],d=Ex({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:l||u,viewport:n});return xt(d,t.client.borderBox.center)},hE=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:jx({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:xi},didDropInsideDroppable:!0};const pE=({getState:e,dispatch:t})=>r=>n=>{if(!ce(n,"DROP")){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t(iE({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&$(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||$();const a=s.critical,l=s.dimensions,u=l.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=hE({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f?gh(d):null,p=f?fc(d):null,g={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:s.movementMode,destination:h,combine:p},b=fE({impact:d,draggable:u,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:d};if(!(!un(s.current.client.offset,b)||!!x.combine)){t(kh({completed:y}));return}const v=dE({current:s.current.client.offset,destination:b,reason:o});t(oE({newHomeClientOffset:b,dropDuration:v,completed:y}))};var Ax=()=>({x:window.pageXOffset,y:window.pageYOffset});function mE(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function gE({onWindowScroll:e}){function t(){e(Ax())}const r=vi(t),n=mE(r);let s=cn;function o(){return s!==cn}function i(){o()&&$(),s=Mt(window,[n])}function a(){o()||$(),r.cancel(),s(),s=cn}return{start:i,stop:a,isActive:o}}const vE=e=>ce(e,"DROP_COMPLETE")||ce(e,"DROP_ANIMATE")||ce(e,"FLUSH"),yE=e=>{const t=gE({onWindowScroll:r=>{e.dispatch(Zj({newScroll:r}))}});return r=>n=>{!t.isActive()&&ce(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&vE(n)&&t.stop(),r(n)}};var xE=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},bE=()=>{const e=[],t=s=>{const o=e.findIndex(a=>a.timerId===s);o===-1&&$();const[i]=e.splice(o,1);i.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const wE=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,_E=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,kE=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},ko=(e,t)=>{t()},da=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function gu(e,t,r,n){if(!e){r(n(t));return}const s=xE(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var SE=(e,t)=>{const r=bE();let n=null;const s=(f,h)=>{n&&$(),ko("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:h})})},o=(f,h)=>{n&&$(),ko("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(da(f,h))})},i=(f,h)=>{n&&$();const p=da(f,h);n={mode:h,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{ko("onDragStart",()=>gu(e().onDragStart,p,t,Aa.onDragStart))})},a=(f,h)=>{const p=gh(h),g=fc(h);n||$();const x=!kE(f,n.lastCritical);x&&(n.lastCritical=f);const b=!wE(n.lastLocation,p);b&&(n.lastLocation=p);const y=!_E(n.lastCombine,g);if(y&&(n.lastCombine=g),!x&&!b&&!y)return;const m={...da(f,n.mode),combine:g,destination:p};r.add(()=>{ko("onDragUpdate",()=>gu(e().onDragUpdate,m,t,Aa.onDragUpdate))})},l=()=>{n||$(),r.flush()},u=f=>{n||$(),n=null,ko("onDragEnd",()=>gu(e().onDragEnd,f,t,Aa.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:i,update:a,flush:l,drop:u,abort:()=>{if(!n)return;const f={...da(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(f)}}},NE=(e,t)=>{const r=SE(e,t);return n=>s=>o=>{if(ce(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(ce(o,"INITIAL_PUBLISH")){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),s(o),r.start(a,o.payload.movementMode);return}if(ce(o,"DROP_COMPLETE")){const a=o.payload.completed.result;r.flush(),s(o),r.drop(a);return}if(s(o),ce(o,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const DE=e=>t=>r=>{if(!ce(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&$(),e.dispatch(kh({completed:n.completed}))},CE=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((ce(o,"FLUSH")||ce(o,"DROP_COMPLETE")||ce(o,"DROP_ANIMATION_FINISHED"))&&n(),s(o),!ce(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Ix())}};r=requestAnimationFrame(()=>{r=null,t=Mt(window,[i])})}};var jE=e=>()=>t=>r=>{(ce(r,"DROP_COMPLETE")||ce(r,"FLUSH")||ce(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},EE=e=>{let t=!1;return()=>r=>n=>{if(ce(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(ce(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(ce(n,"DROP_COMPLETE")){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const PE=e=>ce(e,"DROP_COMPLETE")||ce(e,"DROP_ANIMATE")||ce(e,"FLUSH");var TE=e=>t=>r=>n=>{if(PE(n)){e.stop(),r(n);return}if(ce(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();s.phase!=="DRAGGING"&&$(),e.start(s);return}r(n),e.scroll(t.getState())};const RE=e=>t=>r=>{if(t(r),!ce(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Ox({reason:n.reason})))},OE=Zy;var IE=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>Xy(zj,OE(DD(lE(r),jE(e),aE(e),pE,DE,CE,RE,TE(o),yE,EE(t),NE(n,s))));const vu=()=>({additions:{},removals:{},modified:{}});function ME({registry:e,callbacks:t}){let r=vu(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:u,modified:d}=r,f=Object.keys(l).map(g=>e.draggable.getById(g).getDimension(We)).sort((g,x)=>g.descriptor.index-x.descriptor.index),h=Object.keys(d).map(g=>{const b=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:b}}),p={additions:f,removals:Object.keys(u),modified:h};r=vu(),t.publish(p)}))};return{add:l=>{const u=l.descriptor.id;r.additions[u]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],s()},remove:l=>{const u=l.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=vu())}}}var Fx=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=xt({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},$x=()=>{const e=document.documentElement;return e||$(),e},Bx=()=>{const e=$x();return Fx({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},LE=()=>{const e=Ax(),t=Bx(),r=e.y,n=e.x,s=$x(),o=s.clientWidth,i=s.clientHeight,a=n+o,l=r+i;return{frame:qt({top:r,left:n,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:We,displacement:We}}}},AE=({critical:e,scrollOptions:t,registry:r})=>{const n=LE(),s=n.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),a=r.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:px(a),droppables:hx(i)},critical:e,viewport:n}};function Qm(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var FE=(e,t)=>{let r=null;const n=ME({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,p)=>{e.droppable.exists(h)||$(),r&&t.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(e.droppable.exists(h)||$(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},i=(h,p)=>{r&&(e.droppable.exists(h)||$(),t.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&e.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;e.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},u=h=>{r||$();const p=r.critical.draggable;h.type==="ADDITION"&&Qm(e,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Qm(e,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:i,startPublishing:h=>{r&&$();const p=e.draggable.getById(h.draggableId),g=e.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:g.descriptor},b=e.subscribe(u);return r={critical:x,unsubscribe:b},AE({critical:x,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:l}},Ux=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",$E=e=>{window.scrollBy(e.x,e.y)};const BE=Ue(e=>dc(e).filter(t=>!(!t.isEnabled||!t.frame))),UE=(e,t)=>BE(t).find(n=>(n.frame||$(),Sx(n.frame.pageMarginBox)(e)))||null;var WE=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return UE(e,r)};const _i={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var HE=(e,t,r=()=>_i)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},Wx=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},Nh=1,zE=(e,t,r=()=>_i)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return Nh;const o=1-Wx({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)},YE=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,i=t,a=o,u=Date.now()-i;if(u>=o)return e;if(u<s)return Nh;const d=Wx({startOfRange:s,endOfRange:a,current:u}),f=e*n.ease(d);return Math.ceil(f)},Jm=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=zE(e,t,s);return o===0?0:n?Math.max(YE(o,r,s),Nh):o},Xm=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=HE(e,n,o);return t[n.end]<t[n.start]?Jm({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*Jm({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},VE=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const GE=fx(e=>e===0?0:e);var Hx=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},a=Xm({container:t,distanceToEdges:i,dragStartTime:e,axis:vh,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),l=Xm({container:t,distanceToEdges:i,dragStartTime:e,axis:vx,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),u=GE({x:l,y:a});if(un(u,We))return null;const d=VE({container:t,subject:r,proposedScroll:u});return d?un(d,We)?null:d:null};const qE=fx(e=>e===0?0:e>0?1:-1),Dh=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=Ye(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return un(o,We)?null:o}})(),zx=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=qE(r),o=Dh({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Ch=(e,t)=>zx({current:e.scroll.current,max:e.scroll.max,change:t}),KE=(e,t)=>{if(!Ch(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return Dh({current:n,max:r,change:t})},jh=(e,t)=>{const r=e.frame;return r?zx({current:r.scroll.current,max:r.scroll.max,change:t}):!1},QE=(e,t)=>{const r=e.frame;return!r||!jh(e,t)?null:Dh({current:r.scroll.current,max:r.scroll.max,change:t})};var JE=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Hx({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return i&&Ch(e,i)?i:null},XE=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const a=Hx({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return a&&jh(e,a)?a:null},Zm=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,h=JE({dragStartTime:t,viewport:f,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const u=WE({center:i,destination:wt(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=XE({dragStartTime:t,droppable:u,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});d&&s(u.descriptor.id,d)},ZE=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>_i})=>{const n=vi(e),s=vi(t);let o=null;const i=u=>{o||$();const{shouldUseTimeDampening:d,dragStartTime:f}=o;Zm({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:r})};return{start:u=>{o&&$();const d=Date.now();let f=!1;const h=()=>{f=!0};Zm({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:d,shouldUseTimeDampening:f},f&&i(u)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:i}},e2=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(a,l)=>{const u=Ye(a.current.client.selection,l);e({client:u})},s=(a,l)=>{if(!jh(a,l))return l;const u=QE(a,l);if(!u)return t(a.descriptor.id,l),null;const d=xt(l,u);return t(a.descriptor.id,d),xt(l,d)},o=(a,l,u)=>{if(!a||!Ch(l,u))return u;const d=KE(l,u);if(!d)return r(u),null;const f=xt(u,d);return r(f),xt(u,f)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const u=wt(a.impact);u||$();const d=s(a.dimensions.droppables[u],l);if(!d)return;const f=a.viewport,h=o(a.isWindowScrollAllowed,f,d);h&&n(a,h)}},t2=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=ZE({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=e2({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:s.start,stop:s.stop}};const zs="data-rfd",Ys=(()=>{const e=`${zs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Gd=(()=>{const e=`${zs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),r2=(()=>{const e=`${zs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),eg={contextId:`${zs}-scroll-container-context-id`},n2=e=>t=>`[${t}="${e}"]`,So=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),s2="pointer-events: none;";var o2=e=>{const t=n2(e),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ys.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:s2,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Qo.outOfTheWay};
    `;return{selector:t(Gd.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(r2.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:So(i,"always"),resting:So(i,"resting"),dragging:So(i,"dragging"),dropAnimating:So(i,"dropAnimating"),userCancel:So(i,"userCancel")}};const _t=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,yu=()=>{const e=document.querySelector("head");return e||$(),e},tg=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function i2(e,t){const r=ne(()=>o2(e),[e]),n=w.useRef(null),s=w.useRef(null),o=K(Ue(f=>{const h=s.current;h||$(),h.textContent=f}),[]),i=K(f=>{const h=n.current;h||$(),h.textContent=f},[]);_t(()=>{!n.current&&!s.current||$();const f=tg(t),h=tg(t);return n.current=f,s.current=h,f.setAttribute(`${zs}-always`,e),h.setAttribute(`${zs}-dynamic`,e),yu().appendChild(f),yu().appendChild(h),i(r.always),o(r.resting),()=>{const p=g=>{const x=g.current;x||$(),yu().removeChild(x),g.current=null};p(n),p(s)}},[t,i,o,r.always,r.resting,e]);const a=K(()=>o(r.dragging),[o,r.dragging]),l=K(f=>{if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),u=K(()=>{s.current&&o(r.resting)},[o,r.resting]);return ne(()=>({dragging:a,dropping:l,resting:u}),[a,l,u])}function Yx(e,t){return Array.from(e.querySelectorAll(t))}var Vx=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function mc(e){return e instanceof Vx(e).HTMLElement}function a2(e,t){const r=`[${Ys.contextId}="${e}"]`,n=Yx(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute(Ys.draggableId)===t);return!s||!mc(s)?null:s}function l2(e){const t=w.useRef({}),r=w.useRef(null),n=w.useRef(null),s=w.useRef(!1),o=K(function(h,p){const g={id:h,focus:p};return t.current[h]=g,function(){const b=t.current;b[h]!==g&&delete b[h]}},[]),i=K(function(h){const p=a2(e,h);p&&p!==document.activeElement&&p.focus()},[e]),a=K(function(h,p){r.current===h&&(r.current=p)},[]),l=K(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&i(h)}))},[i]),u=K(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(Ys.draggableId)===h&&(r.current=h)},[]);return _t(()=>(s.current=!0,function(){s.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),ne(()=>({register:o,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,u,l,a])}function c2(){const e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function n(f){t.length&&t.forEach(h=>h(f))}function s(f){return e.draggables[f]||null}function o(f){const h=s(f);return h||$(),h}const i={register:f=>{e.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:(f,h)=>{const p=e.draggables[h.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const h=f.descriptor.id,p=s(h);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[h],e.droppables[f.descriptor.droppableId]&&n({type:"REMOVAL",value:f}))},getById:o,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(e.draggables).filter(h=>h.descriptor.type===f)};function a(f){return e.droppables[f]||null}function l(f){const h=a(f);return h||$(),h}const u={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const h=a(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete e.droppables[f.descriptor.id]},getById:l,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.droppables).filter(h=>h.descriptor.type===f)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:d}}function u2(){const e=ne(c2,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var Eh=P.createContext(null),Sl=()=>{const e=document.body;return e||$(),e};const d2={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},f2=e=>`rfd-announcement-${e}`;function h2(e){const t=ne(()=>f2(e),[e]),r=w.useRef(null);return w.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),bl(o.style,d2),Sl().appendChild(o),function(){setTimeout(function(){const l=Sl();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[t]),K(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}const p2={separator:"::"};function Ph(e,t=p2){const r=P.useId();return ne(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function m2({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function g2({contextId:e,text:t}){const r=Ph("hidden-text",{separator:"-"}),n=ne(()=>m2({contextId:e,uniqueId:r}),[r,e]);return w.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",Sl().appendChild(o),function(){const a=Sl();a.contains(o)&&a.removeChild(o)}},[n,t]),n}var gc=P.createContext(null);function Gx(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function v2(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&$();const a={abandon:i};return e=a,a}function s(){e||$(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function ki(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const y2=9,x2=13,Th=27,qx=32,b2=33,w2=34,_2=35,k2=36,S2=37,N2=38,D2=39,C2=40,j2={[x2]:!0,[y2]:!0};var Kx=e=>{j2[e.keyCode]&&e.preventDefault()};const vc=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),Qx=0,rg=5;function E2(e,t){return Math.abs(t.x-e.x)>=rg||Math.abs(t.y-e.y)>=rg}const ng={type:"IDLE"};function P2({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:i,clientY:a}=s;if(o!==Qx)return;const l={x:i,y:a},u=r();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(l);return}u.type!=="PENDING"&&$();const d=u.point;if(!E2(d,l))return;s.preventDefault();const f=u.actions.fluidLift(l);n({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===Th){s.preventDefault(),e();return}Kx(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&$(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:vc,fn:e}]}function T2(e){const t=w.useRef(ng),r=w.useRef(cn),n=ne(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==Qx||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.tryGetLock(h,i,{sourceEvent:f});if(!p)return;f.preventDefault();const g={x:f.clientX,y:f.clientY};r.current(),u(p,g)}}),[e]),s=ne(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=e.findClosestDraggableId(d);if(!f)return;const h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&d.preventDefault())}}),[e]),o=K(function(){const f={passive:!1,capture:!0};r.current=Mt(window,[s,n],f)},[s,n]),i=K(()=>{t.current.type!=="IDLE"&&(t.current=ng,r.current(),o())},[o]),a=K(()=>{const d=t.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),l=K(function(){const f={capture:!0,passive:!1},h=P2({cancel:a,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=Mt(window,h,f)},[a,i]),u=K(function(f,h){t.current.type!=="IDLE"&&$(),t.current={type:"PENDING",point:h,actions:f},l()},[l]);_t(function(){return o(),function(){r.current()}},[o])}function R2(){}const O2={[w2]:!0,[b2]:!0,[k2]:!0,[_2]:!0};function I2(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Th){s.preventDefault(),r();return}if(s.keyCode===qx){s.preventDefault(),n();return}if(s.keyCode===C2){s.preventDefault(),e.moveDown();return}if(s.keyCode===N2){s.preventDefault(),e.moveUp();return}if(s.keyCode===D2){s.preventDefault(),e.moveRight();return}if(s.keyCode===S2){s.preventDefault(),e.moveLeft();return}if(O2[s.keyCode]){s.preventDefault();return}Kx(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:vc,fn:r}]}function M2(e){const t=w.useRef(R2),r=ne(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==qx)return;const i=e.findClosestDraggableId(o);if(!i)return;const a=e.tryGetLock(i,d,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const u=a.snapLift();t.current();function d(){l||$(),l=!1,t.current(),n()}t.current=Mt(window,I2(u,d),{capture:!0,passive:!1})}}),[e]),n=K(function(){const o={passive:!1,capture:!0};t.current=Mt(window,[r],o)},[r]);_t(function(){return n(),function(){t.current()}},[n])}const xu={type:"IDLE"},L2=120,A2=.15;function F2({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Th&&r.preventDefault(),e()}},{eventName:vc,fn:e}]}function $2({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:i}=n.touches[0],a={x:o,y:i};n.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&$();const o=n.touches[0];if(!o||!(o.force>=A2))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:vc,fn:e}]}function B2(e){const t=w.useRef(xu),r=w.useRef(cn),n=K(function(){return t.current},[]),s=K(function(p){t.current=p},[]),o=ne(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const x=e.tryGetLock(g,a,{sourceEvent:p});if(!x)return;const b=p.touches[0],{clientX:y,clientY:m}=b,v={x:y,y:m};r.current(),f(x,v)}}),[e]),i=K(function(){const p={capture:!0,passive:!1};r.current=Mt(window,[o],p)},[o]),a=K(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(xu),r.current(),i())},[i,s]),l=K(()=>{const h=t.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),u=K(function(){const p={capture:!0,passive:!1},g={cancel:l,completed:a,getPhase:n},x=Mt(window,$2(g),p),b=Mt(window,F2(g),p);r.current=function(){x(),b()}},[l,n,a]),d=K(function(){const p=n();p.type!=="PENDING"&&$();const g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),f=K(function(p,g){n().type!=="IDLE"&&$();const x=setTimeout(d,L2);s({type:"PENDING",point:g,actions:p,longPressTimerId:x}),u()},[u,n,s,d]);_t(function(){return i(),function(){r.current();const g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(xu))}},[n,i,s]),_t(function(){return Mt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const U2=["input","button","textarea","select","option","optgroup","video","audio"];function Jx(e,t){if(t==null)return!1;if(U2.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Jx(e,t.parentElement)}function W2(e,t){const r=t.target;return mc(r)?Jx(e,r):!1}var H2=e=>qt(e.getBoundingClientRect()).center;function z2(e){return e instanceof Vx(e).Element}const Y2=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function Xx(e,t){return e==null?null:e[Y2](t)?e:Xx(e.parentElement,t)}function V2(e,t){return e.closest?e.closest(t):Xx(e,t)}function G2(e){return`[${Ys.contextId}="${e}"]`}function q2(e,t){const r=t.target;if(!z2(r))return null;const n=G2(e),s=V2(r,n);return!s||!mc(s)?null:s}function K2(e,t){const r=q2(e,t);return r?r.getAttribute(Ys.draggableId):null}function Q2(e,t){const r=`[${Gd.contextId}="${e}"]`,s=Yx(document,r).find(o=>o.getAttribute(Gd.id)===t);return!s||!mc(s)?null:s}function J2(e){e.preventDefault()}function fa({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function Zx({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!Ux(t.getState(),n))}function X2({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:i}){if(!Zx({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const l=n.draggable.getById(s),u=Q2(t,l.descriptor.id);if(!u||i&&!l.options.canDragInteractiveElements&&W2(u,i))return null;const d=e.claim(o||cn);let f="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return e.isActive(d)}function g(k,S){fa({expected:k,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(S())}const x=g.bind(null,"DRAGGING");function b(k){function S(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(S(),$()),r.dispatch(Vj(k.liftActionArgs)),f="DRAGGING";function N(C,j={shouldBlockNextClick:!1}){if(k.cleanup(),j.shouldBlockNextClick){const E=Mt(window,[{eventName:"click",fn:J2,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}S(),r.dispatch(Ox({reason:C}))}return{isActive:()=>fa({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>N("DROP",C),cancel:C=>N("CANCEL",C),...k.actions}}function y(k){const S=vi(C=>{x(()=>Rx({client:C}))});return{...b({liftActionArgs:{id:s,clientSelection:k,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function m(){const k={moveUp:()=>x(tE),moveRight:()=>x(nE),moveDown:()=>x(rE),moveLeft:()=>x(sE)};return b({liftActionArgs:{id:s,clientSelection:H2(u),movementMode:"SNAP"},cleanup:cn,actions:k})}function v(){fa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>fa({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:y,snapLift:m,abort:v}}const Z2=[T2,M2,B2];function eP({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?Z2:[],...n||[]],i=w.useState(()=>v2())[0],a=K(function(b,y){ki(b)&&!ki(y)&&i.tryAbandon()},[i]);_t(function(){let b=t.getState();return t.subscribe(()=>{const m=t.getState();a(b,m),b=m})},[i,t,a]),_t(()=>i.tryAbandon,[i.tryAbandon]);const l=K(x=>Zx({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),u=K((x,b,y)=>X2({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[e,i,r,t]),d=K(x=>K2(e,x),[e]),f=K(x=>{const b=r.draggable.findById(x);return b?b.options:null},[r.draggable]),h=K(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(_h()))},[i,t]),p=K(()=>i.isClaimed(),[i]),g=ne(()=>({canGetLock:l,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:p}),[l,u,d,f,h,p]);for(let x=0;x<o.length;x++)o[x](g)}const tP=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ti.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),rP=e=>({..._i,...e.autoScrollerOptions,durationDampening:{..._i.durationDampening,...e.autoScrollerOptions}});function No(e){return e.current||$(),e.current}function nP(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,i=w.useRef(null),a=Gx(e),l=K(()=>tP(a.current),[a]),u=K(()=>rP(a.current),[a]),d=h2(t),f=g2({contextId:t,text:o}),h=i2(t,s),p=K(E=>{No(i).dispatch(E)},[]),g=ne(()=>Tm({publishWhileDragging:qj,updateDroppableScroll:Qj,updateDroppableIsEnabled:Jj,updateDroppableIsCombineEnabled:Xj,collectionStarting:Kj},p),[p]),x=u2(),b=ne(()=>FE(x,g),[x,g]),y=ne(()=>t2({scrollWindow:$E,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...Tm({move:Rx},p)}),[b.scrollDroppable,p,u]),m=l2(t),v=ne(()=>IE({announce:d,autoScroller:y,dimensionMarshal:b,focusMarshal:m,getResponders:l,styleMarshal:h}),[d,y,b,m,l,h]);i.current=v;const _=K(()=>{const E=No(i);E.getState().phase!=="IDLE"&&E.dispatch(_h())},[]),k=K(()=>{const E=No(i).getState();return E.phase==="DROP_ANIMATING"?!0:E.phase==="IDLE"?!1:E.isDragging},[]),S=ne(()=>({isDragging:k,tryAbort:_}),[k,_]);r(S);const N=K(E=>Ux(No(i).getState(),E),[]),C=K(()=>En(No(i).getState()),[]),j=ne(()=>({marshal:b,focus:m,contextId:t,canLift:N,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:x}),[t,b,f,m,N,C,x]);return eP({contextId:t,store:v,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>_,[_]),P.createElement(gc.Provider,{value:j},P.createElement(CC,{context:Eh,store:v},e.children))}function sP(){return P.useId()}function oP(e){const t=sP(),r=e.dragHandleUsageInstructions||Aa.dragHandleUsageInstructions;return P.createElement(MC,null,n=>P.createElement(nP,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const sg={dragging:5e3,dropAnimating:4500},iP=(e,t)=>t?Qo.drop(t.duration):e?Qo.snap:Qo.fluid,aP=(e,t)=>{if(e)return t?wi.opacity.drop:wi.opacity.combining},lP=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function cP(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,i=!!s,a=lP(e),l=!!o,u=l?Yd.drop(n,i):Yd.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:iP(a,o),transform:u,opacity:aP(i,l),zIndex:l?sg.dropAnimating:sg.dragging,pointerEvents:"none"}}function uP(e){return{transform:Yd.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function dP(e){return e.type==="DRAGGING"?cP(e):uP(e)}function fP(e,t,r=We){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=ix(s,n),i=xl(o,r),a={client:o,tagName:t.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:o,page:i}}function hP(e){const t=Ph("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}=e,l=ne(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}),[o,a,i]),u=K(p=>{const g=s();return g||$(),fP(r,g,p)},[r,s]),d=ne(()=>({uniqueId:t,descriptor:r,options:l,getDimension:u}),[r,u,l,t]),f=w.useRef(d),h=w.useRef(!0);_t(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),_t(()=>{if(h.current){h.current=!1;return}const p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}var Rh=P.createContext(null);function Nl(e){const t=w.useContext(e);return t||$(),t}function pP(e){e.preventDefault()}const mP=e=>{const t=w.useRef(null),r=K((S=null)=>{t.current=S},[]),n=K(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:i}=Nl(gc),{type:a,droppableId:l}=Nl(Rh),u=ne(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:d,draggableId:f,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:x,mapped:b,dropAnimationFinished:y}=e;if(!x){const S=ne(()=>({descriptor:u,registry:i,getDraggableRef:n,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:h}),[u,i,n,g,p,h]);hP(S)}const m=ne(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:pP}:null,[s,o,f,h]),v=K(S=>{b.type==="DRAGGING"&&b.dropping&&S.propertyName==="transform"&&Ti.flushSync(y)},[y,b]),_=ne(()=>{const S=dP(b),N=b.type==="DRAGGING"&&b.dropping?v:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:S,onTransitionEnd:N},dragHandleProps:m}},[s,m,f,b,v,r]),k=ne(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return P.createElement(P.Fragment,null,d(_,b.snapshot,k))};var eb=(e,t)=>e===t,tb=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const gP=e=>e.combine?e.combine.draggableId:null,vP=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function yP(){const e=Ue((s,o)=>({x:s,y:o})),t=Ue((s,o,i=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:i,combineWith:a,combineTargetFor:null})),r=Ue((s,o,i,a,l=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:o,offset:s,dimension:i,forceShouldAnimate:d,snapshot:t(o,a,l,u,null)}}));return(s,o)=>{if(ki(s)){if(s.critical.draggable.id!==o.draggableId)return null;const i=s.current.client.offset,a=s.dimensions.draggables[o.draggableId],l=wt(s.impact),u=vP(s.impact),d=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,a,o.isClone,l,u,d)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=s.dimensions.draggables[o.draggableId],u=i.result,d=u.mode,f=tb(u),h=gP(u),g={duration:s.dropDuration,curve:Sh.drop,moveTo:s.newHomeClientOffset,opacity:h?wi.opacity.drop:null,scale:h?wi.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:g,draggingOver:f,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:t(d,a,f,h,g)}}}return null}}function rb(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const xP={mapped:{type:"SECONDARY",offset:We,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:rb(null)}};function bP(){const e=Ue((i,a)=>({x:i,y:a})),t=Ue(rb),r=Ue((i,a=null,l)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),n=i=>i?r(We,i,!0):null,s=(i,a,l,u)=>{const d=l.displaced.visible[i],f=!!(u.inVirtualList&&u.effected[i]),h=fc(l),p=h&&h.draggableId===i?a:null;if(!d){if(!f)return n(p);if(l.displaced.invisible[i])return null;const b=lo(u.displacedBy.point),y=e(b.x,b.y);return r(y,p,!0)}if(f)return n(p);const g=l.displacedBy.point,x=e(g.x,g.y);return r(x,p,d.shouldAnimate)};return(i,a)=>{if(ki(i))return i.critical.draggable.id===a.draggableId?null:s(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const l=i.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const wP=()=>{const e=yP(),t=bP();return(n,s)=>e(n,s)||t(n,s)||xP},_P={dropAnimationFinished:Ix},kP=ox(wP,_P,null,{context:Eh,areStatePropsEqual:eb})(mP);function nb(e){return Nl(Rh).isUsingCloneFor===e.draggableId&&!e.isClone?null:P.createElement(kP,e)}function SP(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return P.createElement(nb,bl({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const sb=e=>t=>e===t,NP=sb("scroll"),DP=sb("auto"),og=(e,t)=>t(e.overflowX)||t(e.overflowY),CP=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return og(r,NP)||og(r,DP)},jP=()=>!1,ob=e=>e==null?null:e===document.body?jP()?e:null:e===document.documentElement?null:CP(e)?e:ob(e.parentElement);var qd=e=>({x:e.scrollLeft,y:e.scrollTop});const ib=e=>e?window.getComputedStyle(e).position==="fixed"?!0:ib(e.parentElement):!1;var EP=e=>{const t=ob(e),r=ib(e);return{closestScrollable:t,isFixedOnPage:r}},PP=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:i,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,g=Fx({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:g,diff:{value:We,displacement:We}}}})(),u=s==="vertical"?vh:vx,d=Hs({page:i,withPlaceholder:null,axis:u,frame:l});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:o,page:i,frame:l,subject:d}};const TP=(e,t)=>{const r=ax(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,i=s+t.scrollWidth,l=hh({top:n,right:i,bottom:o,left:s},r.border);return ph({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var RP=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:a})=>{const l=r.closestScrollable,u=TP(e,l),d=xl(u,n),f=(()=>{if(!l)return null;const p=ax(l),g={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:xl(p,n),scroll:qd(l),scrollSize:g,shouldClipSubject:a}})();return PP({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:f})};const OP={passive:!1},IP={passive:!0};var ig=e=>e.shouldPublishImmediately?OP:IP;const ha=e=>e&&e.env.closestScrollable||null;function MP(e){const t=w.useRef(null),r=Nl(gc),n=Ph("droppable"),{registry:s,marshal:o}=r,i=Gx(e),a=ne(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=w.useRef(a),u=ne(()=>Ue((_,k)=>{t.current||$();const S={x:_,y:k};o.updateDroppableScroll(a.id,S)}),[a.id,o]),d=K(()=>{const _=t.current;return!_||!_.env.closestScrollable?We:qd(_.env.closestScrollable)},[]),f=K(()=>{const _=d();u(_.x,_.y)},[d,u]),h=ne(()=>vi(f),[f]),p=K(()=>{const _=t.current,k=ha(_);if(_&&k||$(),_.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),g=K((_,k)=>{t.current&&$();const S=i.current,N=S.getDroppableRef();N||$();const C=EP(N),j={ref:N,descriptor:a,env:C,scrollOptions:k};t.current=j;const E=RP({ref:N,descriptor:a,env:C,windowScroll:_,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),M=C.closestScrollable;return M&&(M.setAttribute(eg.contextId,r.contextId),M.addEventListener("scroll",p,ig(j.scrollOptions))),E},[r.contextId,a,p,i]),x=K(()=>{const _=t.current,k=ha(_);return _&&k||$(),qd(k)},[]),b=K(()=>{const _=t.current;_||$();const k=ha(_);t.current=null,k&&(h.cancel(),k.removeAttribute(eg.contextId),k.removeEventListener("scroll",p,ig(_.scrollOptions)))},[p,h]),y=K(_=>{const k=t.current;k||$();const S=ha(k);S||$(),S.scrollTop+=_.y,S.scrollLeft+=_.x},[]),m=ne(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:x,dragStopped:b,scroll:y}),[b,g,x,y]),v=ne(()=>({uniqueId:n,descriptor:a,callbacks:m}),[m,a,n]);_t(()=>(l.current=v.descriptor,s.droppable.register(v),()=>{t.current&&b(),s.droppable.unregister(v)}),[m,a,b,v,o,s.droppable]),_t(()=>{t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),_t(()=>{t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function bu(){}const ag={width:0,height:0,margin:WC},LP=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?ag:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},AP=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=LP({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Qo.placeholder:null}},FP=e=>{const t=w.useRef(null),r=K(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:i}=e,[a,l]=w.useState(e.animate==="open");w.useEffect(()=>a?n!=="open"?(r(),l(!1),bu):t.current?bu:(t.current=setTimeout(()=>{t.current=null,l(!1)}),r):bu,[n,a,r]);const u=K(f=>{f.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),d=AP({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return P.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var $P=P.memo(FP);class BP extends P.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const UP=e=>{const t=w.useContext(gc);t||$();const{contextId:r,isMovementAllowed:n}=t,s=w.useRef(null),o=w.useRef(null),{children:i,droppableId:a,type:l,mode:u,direction:d,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:p,snapshot:g,useClone:x,updateViewportMaxScroll:b,getContainerForClone:y}=e,m=K(()=>s.current,[]),v=K((M=null)=>{s.current=M},[]);K(()=>o.current,[]);const _=K((M=null)=>{o.current=M},[]),k=K(()=>{n()&&b({maxScroll:Bx()})},[n,b]);MP({droppableId:a,type:l,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:m});const S=ne(()=>P.createElement(BP,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:M,data:H,animate:F})=>P.createElement($P,{placeholder:H,onClose:M,innerRef:_,animate:F,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,_]),N=ne(()=>({innerRef:v,placeholder:S,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,S,v]),C=x?x.dragging.draggableId:null,j=ne(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function E(){if(!x)return null;const{dragging:M,render:H}=x,F=P.createElement(nb,{draggableId:M.draggableId,index:M.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(B,T)=>H(B,T,M));return dy.createPortal(F,y())}return P.createElement(Rh.Provider,{value:j},i(N,g),E())};function WP(){return document.body||$(),document.body}const lg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:WP},ab=e=>{let t={...e},r;for(r in lg)e[r]===void 0&&(t={...t,[r]:lg[r]});return t},wu=(e,t)=>e===t.droppable.type,cg=(e,t)=>t.draggables[e.draggable.id],HP=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Ue(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Ue((o,i,a,l,u,d)=>{const f=u.descriptor.id;if(u.descriptor.droppableId===o){const g=d?{render:d,dragging:r(u.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:g}}if(!i)return t;if(!l)return e;const p={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const a=ab(i),l=a.droppableId,u=a.type,d=!a.isDropDisabled,f=a.renderClone;if(ki(o)){const h=o.critical;if(!wu(u,h))return t;const p=cg(h,o.dimensions),g=wt(o.impact)===l;return n(l,d,g,g,p,f)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!wu(u,h.critical))return t;const p=cg(h.critical,o.dimensions);return n(l,d,tb(h.result)===l,wt(h.impact)===l,p,f)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!wu(u,h.critical))return t;const p=wt(h.impact)===l,g=!!(h.impact.at&&h.impact.at.type==="COMBINE"),x=h.critical.droppable.id===l;return p?g?e:t:x?e:t}return t}},zP={updateViewportMaxScroll:eE},YP=ox(HP,zP,(e,t,r)=>({...ab(r),...e,...t}),{context:Eh,areStatePropsEqual:eb})(UP);function VP(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,o]=w.useState(!0);return w.useEffect(()=>{(async()=>{try{console.log(" Fetching kanban data (safe version)...");const{data:a,error:l}=await Y.from("deal_stage").select("id, label, description, sort_order, active").eq("active",!0).order("sort_order",{ascending:!0});if(console.log(" Stages:",a),l)throw console.error(" Stage error:",l),l;const{data:u,error:d}=await Y.from("deal").select("id, deal_name, fee, deal_value, closed_date, stage_id, kanban_position, client_id, created_at").order("kanban_position",{ascending:!0});if(console.log(" Deals:",(u==null?void 0:u.length)||0,"deals fetched"),d)throw console.error(" Deal error:",d),d;const{data:f,error:h}=await Y.from("client").select("id, client_name");console.log(" Clients:",(f==null?void 0:f.length)||0,"clients fetched"),h&&console.warn(" Client error (non-fatal):",h);const p=new Map;f==null||f.forEach(v=>{p.set(v.id,v.client_name)});const g=u.map(v=>({id:v.id,deal_name:v.deal_name,fee:v.fee,deal_value:v.deal_value,closed_date:v.closed_date,stage_id:v.stage_id,kanban_position:v.kanban_position,client_name:v.client_id&&p.get(v.client_id)||null,created_at:v.created_at})),x=new Map;a.forEach(v=>{x.set(v.id,v.label)});const b=new Set(a.map(v=>v.id)),y=new Date;y.setFullYear(y.getFullYear()-2);const m=g.filter(v=>!v.stage_id||!b.has(v.stage_id)?!1:x.get(v.stage_id)==="Lost"?v.created_at?new Date(v.created_at)>=y:!1:!0);console.log(" Final cards:",m.length),console.log(" Final columns:",a.length),t(a||[]),n(m)}catch(a){console.error(" Error:",a)}finally{o(!1)}})()},[]),{columns:e,cards:r,loading:s}}function GP(){const{columns:e,cards:t,loading:r}=VP(),[n,s]=w.useState([]);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{document.title="Master Pipeline"},[]);const o=async l=>{const{destination:u,draggableId:d}=l;if(!u)return;const f=u.droppableId,h=[...n],p=h.find(b=>b.id===d);if(!p)return;p.stage_id=f;const g=h.filter(b=>b.stage_id===f&&b.id!==d).sort((b,y)=>(b.kanban_position??0)-(y.kanban_position??0));g.splice(u.index,0,p),g.forEach((b,y)=>{b.kanban_position=y}),s(h);const x=g.map(b=>Y.from("deal").update({stage_id:b.stage_id,kanban_position:b.kanban_position}).eq("id",b.id));await Promise.all(x)},i=(l,u=0)=>typeof l=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:u,maximumFractionDigits:u}).format(l):"--",a=new Date().getFullYear();return r?c.jsx("div",{className:"p-4",children:"Loading..."}):c.jsxs("div",{className:"p-4 overflow-x-auto bg-gray-100 min-h-screen",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Master Pipeline"}),c.jsx("div",{className:"flex min-w-max gap-[2px]",children:c.jsx(oP,{onDragEnd:o,children:e.map((l,u)=>{let d=n.filter(g=>g.stage_id===l.id).sort((g,x)=>(g.kanban_position??0)-(x.kanban_position??0));l.label==="Closed Paid"&&(d=d.filter(g=>g.closed_date?new Date(g.closed_date).getFullYear()===a:!1));const f=d.reduce((g,x)=>g+(x.fee??0),0),h=u===e.length-1,p=u===0;return c.jsx(YP,{droppableId:l.id,children:(g,x)=>c.jsxs("div",{ref:g.innerRef,...g.droppableProps,className:`relative min-w-[240px] max-w-[280px] bg-white shadow-sm flex flex-col ${x.isDraggingOver?"bg-blue-50":""}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`chevron-header ${p?"first":""} ${h?"last":""} flex items-center justify-center`,children:c.jsxs("div",{className:"text-center font-semibold text-sm",children:[l.label," (",d.length,")"]})}),c.jsx("div",{className:"bg-white text-center py-2 border-b",children:c.jsx("div",{className:"text-green-600 text-lg font-bold",children:i(f)})})]}),c.jsxs("div",{className:"p-2 flex-1",children:[d.map((b,y)=>c.jsx(SP,{draggableId:b.id,index:y,children:(m,v)=>c.jsxs("div",{ref:m.innerRef,...m.draggableProps,...m.dragHandleProps,className:`bg-white p-2 rounded shadow mb-2 border text-sm ${v.isDragging?"bg-yellow-100":""}`,children:[c.jsx("div",{className:"font-semibold",children:c.jsx(mi,{to:`/deal/${b.id}`,className:"text-blue-600 hover:underline",children:b.deal_name||"Untitled Deal"})}),c.jsx("div",{className:"text-gray-700",children:i(b.fee)}),c.jsx("div",{className:"text-gray-500 text-xs",children:b.client_name||"No Client"}),c.jsx("div",{className:"text-gray-800",children:i(b.deal_value)})]})},b.id)),g.placeholder]})]})},l.id)})})})]})}function _u(e,t=0){return e==null||isNaN(e)?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function qP(e,t=2){return typeof e!="number"||isNaN(e)?"":`${e.toFixed(t)}%`}function KP(e){return typeof e!="number"?"":Math.round(e)+"%"}function pa({label:e,value:t,onChange:r,format:n,editingField:s,setEditingField:o,fieldKey:i}){const a=s===i,l=w.useRef(null);w.useEffect(()=>{a&&l.current&&l.current.focus()},[a]);const u=()=>{o(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),a?c.jsx("input",{ref:l,type:"number",value:t??"",onChange:d=>r(d.target.value),onBlur:u,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):c.jsx("div",{onClick:()=>o(i),className:"mt-1 p-2 bg-gray-100 rounded text-sm cursor-pointer",children:t==null||t===""?"":n(t)})]})}function lb(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=lb(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ve(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=lb(e))&&(n&&(n+=" "),n+=t);return n}const cb=6048e5,QP=864e5,yc=6e4,xc=36e5,JP=1e3,ug=Symbol.for("constructDateFrom");function he(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&ug in e?e[ug](t):e instanceof Date?new e.constructor(t):new Date(t)}function q(e,t){return he(t||e,e)}function Jt(e,t,r){const n=q(e,r==null?void 0:r.in);return isNaN(t)?he((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function er(e,t,r){const n=q(e,r==null?void 0:r.in);if(isNaN(t))return he((r==null?void 0:r.in)||e,NaN);if(!t)return n;const s=n.getDate(),o=he((r==null?void 0:r.in)||e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const i=o.getDate();return s>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function ub(e,t,r){return he((r==null?void 0:r.in)||e,+q(e)+t)}function XP(e,t,r){return ub(e,t*xc,r)}let ZP={};function ts(){return ZP}function Ar(e,t){var a,l,u,d;const r=ts(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=q(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Vs(e,t){return Ar(e,{...t,weekStartsOn:1})}function db(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=he(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=Vs(s),i=he(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Vs(i);return r.getTime()>=o.getTime()?n+1:r.getTime()>=a.getTime()?n:n-1}function Dl(e){const t=q(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Br(e,...t){const r=he.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function Kn(e,t){const r=q(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Gs(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=Kn(n),i=Kn(s),a=+o-Dl(o),l=+i-Dl(i);return Math.round((a-l)/QP)}function eT(e,t){const r=db(e,t),n=he((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Vs(n)}function Kd(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setTime(n.getTime()+t*yc),n}function Oh(e,t,r){return er(e,t*3,r)}function tT(e,t,r){return ub(e,t*1e3,r)}function Cl(e,t,r){return Jt(e,t*7,r)}function Cr(e,t,r){return er(e,t*12,r)}function dg(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=he.bind(null,s));const o=q(s,n);(!r||r<o||isNaN(+o))&&(r=o)}),he(n,r||NaN)}function fg(e,t){let r,n=t==null?void 0:t.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=he.bind(null,s));const o=q(s,n);(!r||r>o||isNaN(+o))&&(r=o)}),he(n,r||NaN)}function rT(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return+Kn(n)==+Kn(s)}function jr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function jl(e){return!(!jr(e)&&typeof e!="number"||isNaN(+q(e)))}function El(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return o*12+i}function $n(e,t){const r=q(e,t==null?void 0:t.in);return Math.trunc(r.getMonth()/3)+1}function Pl(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=n.getFullYear()-s.getFullYear(),i=$n(n)-$n(s);return o*4+i}function Tl(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()-s.getFullYear()}function nT(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t),o=hg(n,s),i=Math.abs(Gs(n,s));n.setDate(n.getDate()-o*i);const a=+(hg(n,s)===-o),l=o*(i-a);return l===0?0:l}function hg(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function fb(e,t){const r=q(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function hb(e,t){const r=q(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Qd(e,t){const r=q(e,t==null?void 0:t.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function pb(e,t){const r=q(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function mb(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function bc(e,t){const r=q(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function sT(e,t){var a,l,u,d;const r=ts(),n=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=q(e,t==null?void 0:t.in),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const oT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iT=(e,t,r)=>{let n;const s=oT[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function ku(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const aT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uT={date:ku({formats:aT,defaultWidth:"full"}),time:ku({formats:lT,defaultWidth:"full"}),dateTime:ku({formats:cT,defaultWidth:"full"})},dT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fT=(e,t,r,n)=>dT[e];function Do(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const hT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xT=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},bT={ordinalNumber:xT,era:Do({values:hT,defaultWidth:"wide"}),quarter:Do({values:pT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Do({values:mT,defaultWidth:"wide"}),day:Do({values:gT,defaultWidth:"wide"}),dayPeriod:Do({values:vT,defaultWidth:"wide",formattingValues:yT,defaultFormattingWidth:"wide"})};function Co(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?_T(a,f=>f.test(i)):wT(a,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function wT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function _T(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function kT(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const ST=/^(\d+)(th|st|nd|rd)?/i,NT=/\d+/i,DT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CT={any:[/^b/i,/^(a|c)/i]},jT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ET={any:[/1/i,/2/i,/3/i,/4/i]},PT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LT={ordinalNumber:kT({matchPattern:ST,parsePattern:NT,valueCallback:e=>parseInt(e,10)}),era:Co({matchPatterns:DT,defaultMatchWidth:"wide",parsePatterns:CT,defaultParseWidth:"any"}),quarter:Co({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:ET,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Co({matchPatterns:PT,defaultMatchWidth:"wide",parsePatterns:TT,defaultParseWidth:"any"}),day:Co({matchPatterns:RT,defaultMatchWidth:"wide",parsePatterns:OT,defaultParseWidth:"any"}),dayPeriod:Co({matchPatterns:IT,defaultMatchWidth:"any",parsePatterns:MT,defaultParseWidth:"any"})},gb={code:"en-US",formatDistance:iT,formatLong:uT,formatRelative:fT,localize:bT,match:LT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AT(e,t){const r=q(e,t==null?void 0:t.in);return Gs(r,bc(r))+1}function Ih(e,t){const r=q(e,t==null?void 0:t.in),n=+Vs(r)-+eT(r);return Math.round(n/cb)+1}function Mh(e,t){var d,f,h,p;const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=ts(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=he((t==null?void 0:t.in)||e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const a=Ar(i,t),l=he((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const u=Ar(l,t);return+r>=+a?n+1:+r>=+u?n:n-1}function FT(e,t){var a,l,u,d;const r=ts(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Mh(e,t),o=he((t==null?void 0:t.in)||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Ar(o,t)}function vb(e,t){const r=q(e,t==null?void 0:t.in),n=+Ar(r,t)-+FT(r,t);return Math.round(n/cb)+1}function ue(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Hr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ue(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ue(r+1,2)},d(e,t){return ue(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ue(e.getHours()%12||12,t.length)},H(e,t){return ue(e.getHours(),t.length)},m(e,t){return ue(e.getMinutes(),t.length)},s(e,t){return ue(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return ue(s,t.length)}},cs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pg={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Hr.y(e,t)},Y:function(e,t,r,n){const s=Mh(e,n),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return ue(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):ue(o,t.length)},R:function(e,t){const r=db(e);return ue(r,t.length)},u:function(e,t){const r=e.getFullYear();return ue(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ue(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ue(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Hr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ue(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=vb(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):ue(s,t.length)},I:function(e,t,r){const n=Ih(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ue(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Hr.d(e,t)},D:function(e,t,r){const n=AT(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ue(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ue(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ue(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return ue(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=cs.noon:n===0?s=cs.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=cs.evening:n>=12?s=cs.afternoon:n>=4?s=cs.morning:s=cs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Hr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Hr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ue(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ue(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Hr.s(e,t)},S:function(e,t){return Hr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return gg(n);case"XXXX":case"XX":return Pn(n);case"XXXXX":case"XXX":default:return Pn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return gg(n);case"xxxx":case"xx":return Pn(n);case"xxxxx":case"xxx":default:return Pn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+mg(n,":");case"OOOO":default:return"GMT"+Pn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+mg(n,":");case"zzzz":default:return"GMT"+Pn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return ue(n,t.length)},T:function(e,t,r){return ue(+e,t.length)}};function mg(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+t+ue(o,2)}function gg(e,t){return e%60===0?(e>0?"-":"+")+ue(Math.abs(e)/60,2):Pn(e,t)}function Pn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=ue(Math.trunc(n/60),2),o=ue(n%60,2);return r+s+t+o}const vg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},yb=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},$T=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return vg(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",vg(n,t)).replace("{{time}}",yb(s,t))},Jd={p:yb,P:$T},BT=/^D+$/,UT=/^Y+$/,WT=["D","DD","YY","YYYY"];function xb(e){return BT.test(e)}function bb(e){return UT.test(e)}function Xd(e,t,r){const n=HT(e,t,r);if(console.warn(n),WT.includes(e))throw new RangeError(n)}function HT(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VT=/^'([^]*?)'?$/,GT=/''/g,qT=/[a-zA-Z]/;function Zd(e,t,r){var d,f,h,p,g,x,b,y;const n=ts(),s=(r==null?void 0:r.locale)??n.locale??gb,o=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((x=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,a=q(e,r==null?void 0:r.in);if(!jl(a))throw new RangeError("Invalid time value");let l=t.match(YT).map(m=>{const v=m[0];if(v==="p"||v==="P"){const _=Jd[v];return _(m,s.formatLong)}return m}).join("").match(zT).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:KT(m)};if(pg[v])return{isToken:!0,value:m};if(v.match(qT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&bb(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&xb(v))&&Xd(v,t,String(e));const _=pg[v[0]];return _(a,v,s.localize,u)}).join("")}function KT(e){const t=e.match(VT);return t?t[1].replace(GT,"'"):e}function yg(e,t){return q(e,t==null?void 0:t.in).getDate()}function QT(e,t){return q(e,t==null?void 0:t.in).getDay()}function JT(e,t){const r=q(e,t==null?void 0:t.in),n=r.getFullYear(),s=r.getMonth(),o=he(r,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function XT(){return Object.assign({},ts())}function Er(e,t){return q(e,t==null?void 0:t.in).getHours()}function ZT(e,t){const r=q(e,t==null?void 0:t.in).getDay();return r===0?7:r}function Pr(e,t){return q(e,t==null?void 0:t.in).getMinutes()}function et(e,t){return q(e,t==null?void 0:t.in).getMonth()}function dn(e){return q(e).getSeconds()}function ef(e){return+q(e)}function Z(e,t){return q(e,t==null?void 0:t.in).getFullYear()}function gn(e,t){return+q(e)>+q(t)}function Qn(e,t){return+q(e)<+q(t)}function eR(e,t){return+q(e)==+q(t)}function tR(e,t){const r=rR(t)?new t(0):he(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function rR(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const nR=10;class wb{constructor(){V(this,"subPriority",0)}validate(t,r){return!0}}class sR extends wb{constructor(t,r,n,s,o){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class oR extends wb{constructor(r,n){super();V(this,"priority",nR);V(this,"subPriority",-1);this.context=r||(s=>he(n,s))}set(r,n){return n.timestampIsSet?r:he(r,tR(r,this.context))}}class ae{run(t,r,n,s){const o=this.parse(t,r,n,s);return o?{setter:new sR(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,r,n){return!0}}class iR extends ae{constructor(){super(...arguments);V(this,"priority",140);V(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}const Pe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},lr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Te(e,t){return e&&{value:t(e.value),rest:e.rest}}function _e(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function cr(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(s*xc+o*yc+i*JP),rest:t.slice(r[0].length)}}function _b(e){return _e(Pe.anyDigitsSigned,e)}function je(e,t){switch(e){case 1:return _e(Pe.singleDigit,t);case 2:return _e(Pe.twoDigits,t);case 3:return _e(Pe.threeDigits,t);case 4:return _e(Pe.fourDigits,t);default:return _e(new RegExp("^\\d{1,"+e+"}"),t)}}function Rl(e,t){switch(e){case 1:return _e(Pe.singleDigitSigned,t);case 2:return _e(Pe.twoDigitsSigned,t);case 3:return _e(Pe.threeDigitsSigned,t);case 4:return _e(Pe.fourDigitsSigned,t);default:return _e(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Lh(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function kb(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const o=n+50,i=Math.trunc(o/100)*100,a=e>=o%100;s=e+i-(a?100:0)}return r?s:1-s}function Sb(e){return e%400===0||e%4===0&&e%100!==0}class aR extends ae{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Te(je(4,r),o);case"yo":return Te(s.ordinalNumber(r,{unit:"year"}),o);default:return Te(je(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const o=r.getFullYear();if(s.isTwoDigitYear){const a=kb(s.year,o);return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}const i=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(i,0,1),r.setHours(0,0,0,0),r}}class lR extends ae{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,s){const o=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Te(je(4,r),o);case"Yo":return Te(s.ordinalNumber(r,{unit:"year"}),o);default:return Te(je(n.length,r),o)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,o){const i=Mh(r,o);if(s.isTwoDigitYear){const l=kb(s.year,i);return r.setFullYear(l,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Ar(r,o)}const a=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(a,0,o.firstWeekContainsDate),r.setHours(0,0,0,0),Ar(r,o)}}class cR extends ae{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return Rl(n==="R"?4:n.length,r)}set(r,n,s){const o=he(r,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Vs(o)}}class uR extends ae{constructor(){super(...arguments);V(this,"priority",130);V(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return Rl(n==="u"?4:n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}class dR extends ae{constructor(){super(...arguments);V(this,"priority",120);V(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"Q":case"QQ":return je(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class fR extends ae{constructor(){super(...arguments);V(this,"priority",120);V(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"q":case"qq":return je(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}class hR extends ae{constructor(){super(...arguments);V(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);V(this,"priority",110)}parse(r,n,s){const o=i=>i-1;switch(n){case"M":return Te(_e(Pe.month,r),o);case"MM":return Te(je(2,r),o);case"Mo":return Te(s.ordinalNumber(r,{unit:"month"}),o);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}class pR extends ae{constructor(){super(...arguments);V(this,"priority",110);V(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,s){const o=i=>i-1;switch(n){case"L":return Te(_e(Pe.month,r),o);case"LL":return Te(je(2,r),o);case"Lo":return Te(s.ordinalNumber(r,{unit:"month"}),o);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}function mR(e,t,r){const n=q(e,r==null?void 0:r.in),s=vb(n,r)-t;return n.setDate(n.getDate()-s*7),q(n,r==null?void 0:r.in)}class gR extends ae{constructor(){super(...arguments);V(this,"priority",100);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,s){switch(n){case"w":return _e(Pe.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return je(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,o){return Ar(mR(r,s,o),o)}}function vR(e,t,r){const n=q(e,r==null?void 0:r.in),s=Ih(n,r)-t;return n.setDate(n.getDate()-s*7),n}class yR extends ae{constructor(){super(...arguments);V(this,"priority",100);V(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,s){switch(n){case"I":return _e(Pe.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return je(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return Vs(vR(r,s))}}const xR=[31,28,31,30,31,30,31,31,30,31,30,31],bR=[31,29,31,30,31,30,31,31,30,31,30,31];class wR extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"subPriority",1);V(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"d":return _e(Pe.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return je(n.length,r)}}validate(r,n){const s=r.getFullYear(),o=Sb(s),i=r.getMonth();return o?n>=1&&n<=bR[i]:n>=1&&n<=xR[i]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}}class _R extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"subpriority",1);V(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,s){switch(n){case"D":case"DD":return _e(Pe.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return je(n.length,r)}}validate(r,n){const s=r.getFullYear();return Sb(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}}function Ah(e,t,r){var f,h,p,g;const n=ts(),s=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,o=q(e,r==null?void 0:r.in),i=o.getDay(),l=(t%7+7)%7,u=7-s,d=t<0||t>6?t-(i+u)%7:(l+u)%7-(i+u)%7;return Jt(o,d,r)}class kR extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ah(r,s,o),r.setHours(0,0,0,0),r}}class SR extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return Te(je(n.length,r),i);case"eo":return Te(s.ordinalNumber(r,{unit:"day"}),i);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ah(r,s,o),r.setHours(0,0,0,0),r}}class NR extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return Te(je(n.length,r),i);case"co":return Te(s.ordinalNumber(r,{unit:"day"}),i);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,o){return r=Ah(r,s,o),r.setHours(0,0,0,0),r}}function DR(e,t,r){const n=q(e,r==null?void 0:r.in),s=ZT(n,r),o=t-s;return Jt(n,o,r)}class CR extends ae{constructor(){super(...arguments);V(this,"priority",90);V(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,s){const o=i=>i===0?7:i;switch(n){case"i":case"ii":return je(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return Te(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiii":return Te(s.day(r,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Te(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Te(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),o)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=DR(r,s),r.setHours(0,0,0,0),r}}class jR extends ae{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Lh(s),0,0,0),r}}class ER extends ae{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Lh(s),0,0,0),r}}class PR extends ae{constructor(){super(...arguments);V(this,"priority",80);V(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(Lh(s),0,0,0),r}}class TR extends ae{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,s){switch(n){case"h":return _e(Pe.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return je(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const o=r.getHours()>=12;return o&&s<12?r.setHours(s+12,0,0,0):!o&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}}class RR extends ae{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,s){switch(n){case"H":return _e(Pe.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return je(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}}class OR extends ae{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,s){switch(n){case"K":return _e(Pe.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return je(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}}class IR extends ae{constructor(){super(...arguments);V(this,"priority",70);V(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,s){switch(n){case"k":return _e(Pe.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return je(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const o=s<=24?s%24:s;return r.setHours(o,0,0,0),r}}class MR extends ae{constructor(){super(...arguments);V(this,"priority",60);V(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"m":return _e(Pe.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return je(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}}class LR extends ae{constructor(){super(...arguments);V(this,"priority",50);V(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"s":return _e(Pe.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return je(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}}class AR extends ae{constructor(){super(...arguments);V(this,"priority",30);V(this,"incompatibleTokens",["t","T"])}parse(r,n){const s=o=>Math.trunc(o*Math.pow(10,-n.length+3));return Te(je(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}}class FR extends ae{constructor(){super(...arguments);V(this,"priority",10);V(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return cr(lr.basicOptionalMinutes,r);case"XX":return cr(lr.basic,r);case"XXXX":return cr(lr.basicOptionalSeconds,r);case"XXXXX":return cr(lr.extendedOptionalSeconds,r);case"XXX":default:return cr(lr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:he(r,r.getTime()-Dl(r)-s)}}class $R extends ae{constructor(){super(...arguments);V(this,"priority",10);V(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return cr(lr.basicOptionalMinutes,r);case"xx":return cr(lr.basic,r);case"xxxx":return cr(lr.basicOptionalSeconds,r);case"xxxxx":return cr(lr.extendedOptionalSeconds,r);case"xxx":default:return cr(lr.extended,r)}}set(r,n,s){return n.timestampIsSet?r:he(r,r.getTime()-Dl(r)-s)}}class BR extends ae{constructor(){super(...arguments);V(this,"priority",40);V(this,"incompatibleTokens","*")}parse(r){return _b(r)}set(r,n,s){return[he(r,s*1e3),{timestampIsSet:!0}]}}class UR extends ae{constructor(){super(...arguments);V(this,"priority",20);V(this,"incompatibleTokens","*")}parse(r){return _b(r)}set(r,n,s){return[he(r,s),{timestampIsSet:!0}]}}const WR={G:new iR,y:new aR,Y:new lR,R:new cR,u:new uR,Q:new dR,q:new fR,M:new hR,L:new pR,w:new gR,I:new yR,d:new wR,D:new _R,E:new kR,e:new SR,c:new NR,i:new CR,a:new jR,b:new ER,B:new PR,h:new TR,H:new RR,K:new OR,k:new IR,m:new MR,s:new LR,S:new AR,X:new FR,x:new $R,t:new BR,T:new UR},HR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YR=/^'([^]*?)'?$/,VR=/''/g,GR=/\S/,qR=/[a-zA-Z]/;function KR(e,t,r,n){var b,y,m,v,_,k,S,N;const s=()=>he((n==null?void 0:n.in)||r,NaN),o=XT(),i=(n==null?void 0:n.locale)??o.locale??gb,a=(n==null?void 0:n.firstWeekContainsDate)??((y=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??o.firstWeekContainsDate??((v=(m=o.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((k=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:k.weekStartsOn)??o.weekStartsOn??((N=(S=o.locale)==null?void 0:S.options)==null?void 0:N.weekStartsOn)??0;if(!t)return e?s():q(r,n==null?void 0:n.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:i},d=[new oR(n==null?void 0:n.in,r)],f=t.match(zR).map(C=>{const j=C[0];if(j in Jd){const E=Jd[j];return E(C,i.formatLong)}return C}).join("").match(HR),h=[];for(let C of f){!(n!=null&&n.useAdditionalWeekYearTokens)&&bb(C)&&Xd(C,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&xb(C)&&Xd(C,t,e);const j=C[0],E=WR[j];if(E){const{incompatibleTokens:M}=E;if(Array.isArray(M)){const F=h.find(B=>M.includes(B.token)||B.token===j);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${C}\` at the same time`)}else if(E.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);h.push({token:j,fullToken:C});const H=E.run(e,C,i.match,u);if(!H)return s();d.push(H.setter),e=H.rest}else{if(j.match(qR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(C==="''"?C="'":j==="'"&&(C=QR(C)),e.indexOf(C)===0)e=e.slice(C.length);else return s()}}if(e.length>0&&GR.test(e))return s();const p=d.map(C=>C.priority).sort((C,j)=>j-C).filter((C,j,E)=>E.indexOf(C)===j).map(C=>d.filter(j=>j.priority===C).sort((j,E)=>E.subPriority-j.subPriority)).map(C=>C[0]);let g=q(r,n==null?void 0:n.in);if(isNaN(+g))return s();const x={};for(const C of p){if(!C.validate(g,u))return s();const j=C.set(g,x,u);Array.isArray(j)?(g=j[0],Object.assign(x,j[1])):g=j}return g}function QR(e){return e.match(YR)[1].replace(VR,"'")}function JR(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function XR(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return+Qd(n)==+Qd(s)}function ZR(e,t,r){const[n,s]=Br(r==null?void 0:r.in,e,t);return n.getFullYear()===s.getFullYear()}function Si(e,t,r){const n=+q(e,r==null?void 0:r.in),[s,o]=[+q(t.start,r==null?void 0:r.in),+q(t.end,r==null?void 0:r.in)].sort((i,a)=>i-a);return n>=s&&n<=o}function eO(e,t,r){return Jt(e,-t,r)}function Nb(e,t){const r=()=>he(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,s=sO(e);let o;if(s.date){const u=oO(s.date,n);o=iO(u.restDateString,u.year)}if(!o||isNaN(+o))return r();const i=+o;let a=0,l;if(s.time&&(a=aO(s.time),isNaN(a)))return r();if(s.timezone){if(l=lO(s.timezone),isNaN(l))return r()}else{const u=new Date(i+a),d=q(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return q(i+a+l,t==null?void 0:t.in)}const ma={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},tO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,nO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function sO(e){const t={},r=e.split(ma.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ma.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ma.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=ma.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function oO(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function iO(e,t){if(t===null)return new Date(NaN);const r=e.match(tO);if(!r)return new Date(NaN);const n=!!r[4],s=jo(r[1]),o=jo(r[2])-1,i=jo(r[3]),a=jo(r[4]),l=jo(r[5])-1;if(n)return hO(t,a,l)?cO(t,a,l):new Date(NaN);{const u=new Date(0);return!dO(t,o,i)||!fO(t,s)?new Date(NaN):(u.setUTCFullYear(t,o,Math.max(s,i)),u)}}function jo(e){return e?parseInt(e):1}function aO(e){const t=e.match(rO);if(!t)return NaN;const r=Su(t[1]),n=Su(t[2]),s=Su(t[3]);return pO(r,n,s)?r*xc+n*yc+s*1e3:NaN}function Su(e){return e&&parseFloat(e.replace(",","."))||0}function lO(e){if(e==="Z")return 0;const t=e.match(nO);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return mO(n,s)?r*(n*xc+s*yc):NaN}function cO(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,o=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const uO=[31,null,31,30,31,30,31,31,30,31,30,31];function Db(e){return e%400===0||e%4===0&&e%100!==0}function dO(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(uO[t]||(Db(e)?29:28))}function fO(e,t){return t>=1&&t<=(Db(e)?366:365)}function hO(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function pO(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function mO(e,t){return t>=0&&t<=59}function Pt(e,t,r){const n=q(e,r==null?void 0:r.in),s=n.getFullYear(),o=n.getDate(),i=he((r==null?void 0:r.in)||e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const a=JT(i);return n.setMonth(t,Math.min(o,a)),n}function Fa(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setHours(t),n}function $a(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setMinutes(t),n}function hs(e,t,r){const n=q(e,r==null?void 0:r.in),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return Pt(n,n.getMonth()+o*3)}function Ba(e,t,r){const n=q(e,r==null?void 0:r.in);return n.setSeconds(t),n}function or(e,t,r){const n=q(e,r==null?void 0:r.in);return isNaN(+n)?he((r==null?void 0:r.in)||e,NaN):(n.setFullYear(t),n)}function Bn(e,t,r){return er(e,-t,r)}function Cb(e,t,r){return Oh(e,-t,r)}function xg(e,t,r){return Cl(e,-t,r)}function qs(e,t,r){return Cr(e,-t,r)}function wc(){return typeof window<"u"}function fo(e){return jb(e)?(e.nodeName||"").toLowerCase():"#document"}function kt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mr(e){var t;return(t=(jb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function jb(e){return wc()?e instanceof Node||e instanceof kt(e).Node:!1}function it(e){return wc()?e instanceof Element||e instanceof kt(e).Element:!1}function pr(e){return wc()?e instanceof HTMLElement||e instanceof kt(e).HTMLElement:!1}function bg(e){return!wc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof kt(e).ShadowRoot}const gO=new Set(["inline","contents"]);function Bi(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Ut(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!gO.has(s)}const vO=new Set(["table","td","th"]);function yO(e){return vO.has(fo(e))}const xO=[":popover-open",":modal"];function _c(e){return xO.some(t=>{try{return e.matches(t)}catch{return!1}})}const bO=["transform","translate","scale","rotate","perspective"],wO=["transform","translate","scale","rotate","perspective","filter"],_O=["paint","layout","strict","content"];function Fh(e){const t=$h(),r=it(e)?Ut(e):e;return bO.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||wO.some(n=>(r.willChange||"").includes(n))||_O.some(n=>(r.contain||"").includes(n))}function kO(e){let t=vn(e);for(;pr(t)&&!Ks(t);){if(Fh(t))return t;if(_c(t))return null;t=vn(t)}return null}function $h(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const SO=new Set(["html","body","#document"]);function Ks(e){return SO.has(fo(e))}function Ut(e){return kt(e).getComputedStyle(e)}function kc(e){return it(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function vn(e){if(fo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bg(e)&&e.host||mr(e);return bg(t)?t.host:t}function Eb(e){const t=vn(e);return Ks(t)?e.ownerDocument?e.ownerDocument.body:e.body:pr(t)&&Bi(t)?t:Eb(t)}function Ni(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Eb(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),i=kt(s);if(o){const a=tf(i);return t.concat(i,i.visualViewport||[],Bi(s)?s:[],a&&r?Ni(a):[])}return t.concat(s,Ni(s,[],r))}function tf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Qs=Math.min,Un=Math.max,Ol=Math.round,ga=Math.floor,hr=e=>({x:e,y:e}),NO={left:"right",right:"left",bottom:"top",top:"bottom"},DO={start:"end",end:"start"};function CO(e,t,r){return Un(e,Qs(t,r))}function Sc(e,t){return typeof e=="function"?e(t):e}function Js(e){return e.split("-")[0]}function Ui(e){return e.split("-")[1]}function jO(e){return e==="x"?"y":"x"}function Bh(e){return e==="y"?"height":"width"}const EO=new Set(["top","bottom"]);function Mn(e){return EO.has(Js(e))?"y":"x"}function Uh(e){return jO(Mn(e))}function PO(e,t,r){r===void 0&&(r=!1);const n=Ui(e),s=Uh(e),o=Bh(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Il(i)),[i,Il(i)]}function TO(e){const t=Il(e);return[rf(e),t,rf(t)]}function rf(e){return e.replace(/start|end/g,t=>DO[t])}const wg=["left","right"],_g=["right","left"],RO=["top","bottom"],OO=["bottom","top"];function IO(e,t,r){switch(e){case"top":case"bottom":return r?t?_g:wg:t?wg:_g;case"left":case"right":return t?RO:OO;default:return[]}}function MO(e,t,r,n){const s=Ui(e);let o=IO(Js(e),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(rf)))),o}function Il(e){return e.replace(/left|right|bottom|top/g,t=>NO[t])}function LO(e){return{top:0,right:0,bottom:0,left:0,...e}}function Pb(e){return typeof e!="number"?LO(e):{top:e,right:e,bottom:e,left:e}}function Ml(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}var AO=typeof document<"u",FO=function(){},Ll=AO?w.useLayoutEffect:FO;const $O={...l0},BO=$O.useInsertionEffect,UO=BO||(e=>e());function WO(e){const t=w.useRef(()=>{});return UO(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function kg(e,t,r){let{reference:n,floating:s}=e;const o=Mn(t),i=Uh(t),a=Bh(i),l=Js(t),u=o==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Ui(t)){case"start":p[i]-=h*(r&&u?-1:1);break;case"end":p[i]+=h*(r&&u?-1:1);break}return p}const HO=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=kg(u,n,l),h=n,p={},g=0;for(let x=0;x<a.length;x++){const{name:b,fn:y}=a[x],{x:m,y:v,data:_,reset:k}=await y({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=m??d,f=v??f,p={...p,[b]:{...p[b],..._}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:d,y:f}=kg(u,h,l)),x=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function zO(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Sc(t,e),g=Pb(p),b=a[h?f==="floating"?"reference":"floating":f],y=Ml(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(b)))==null||r?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),m=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},k=Ml(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:v,strategy:l}):m);return{top:(y.top-k.top+g.top)/_.y,bottom:(k.bottom-y.bottom+g.bottom)/_.y,left:(y.left-k.left+g.left)/_.x,right:(k.right-y.right+g.right)/_.x}}const YO=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=Sc(e,t)||{};if(u==null)return{};const f=Pb(d),h={x:r,y:n},p=Uh(s),g=Bh(p),x=await i.getDimensions(u),b=p==="y",y=b?"top":"left",m=b?"bottom":"right",v=b?"clientHeight":"clientWidth",_=o.reference[g]+o.reference[p]-h[p]-o.floating[g],k=h[p]-o.reference[p],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=S?S[v]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=a.floating[v]||o.floating[g]);const C=_/2-k/2,j=N/2-x[g]/2-1,E=Qs(f[y],j),M=Qs(f[m],j),H=E,F=N-x[g]-M,B=N/2-x[g]/2+C,T=CO(H,B,F),O=!l.arrow&&Ui(s)!=null&&B!==T&&o.reference[g]/2-(B<H?E:M)-x[g]/2<0,U=O?B<H?B-H:B-F:0;return{[p]:h[p]+U,data:{[p]:T,centerOffset:B-T-U,...O&&{alignmentOffset:U}},reset:O}}}),VO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...b}=Sc(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=Js(s),m=Mn(a),v=Js(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(v||!x?[Il(a)]:TO(a)),S=g!=="none";!h&&S&&k.push(...MO(a,x,g,_));const N=[a,...k],C=await zO(t,b),j=[];let E=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&j.push(C[y]),f){const B=PO(s,i,_);j.push(C[B[0]],C[B[1]])}if(E=[...E,{placement:s,overflows:j}],!j.every(B=>B<=0)){var M,H;const B=(((M=o.flip)==null?void 0:M.index)||0)+1,T=N[B];if(T&&(!(f==="alignment"?m!==Mn(T):!1)||E.every(D=>Mn(D.placement)===m?D.overflows[0]>0:!0)))return{data:{index:B,overflows:E},reset:{placement:T}};let O=(H=E.filter(U=>U.overflows[0]<=0).sort((U,D)=>U.overflows[1]-D.overflows[1])[0])==null?void 0:H.placement;if(!O)switch(p){case"bestFit":{var F;const U=(F=E.filter(D=>{if(S){const R=Mn(D.placement);return R===m||R==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(R=>R>0).reduce((R,L)=>R+L,0)]).sort((D,R)=>D[1]-R[1])[0])==null?void 0:F[0];U&&(O=U);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}},GO=new Set(["left","top"]);async function qO(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Js(r),a=Ui(r),l=Mn(r)==="y",u=GO.has(i)?-1:1,d=o&&l?-1:1,f=Sc(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const KO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await qO(t,e);return i===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}};function Tb(e){const t=Ut(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=pr(e),o=s?e.offsetWidth:r,i=s?e.offsetHeight:n,a=Ol(r)!==o||Ol(n)!==i;return a&&(r=o,n=i),{width:r,height:n,$:a}}function Wh(e){return it(e)?e:e.contextElement}function Os(e){const t=Wh(e);if(!pr(t))return hr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=Tb(t);let i=(o?Ol(r.width):r.width)/n,a=(o?Ol(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const QO=hr(0);function Rb(e){const t=kt(e);return!$h()||!t.visualViewport?QO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JO(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==kt(e)?!1:t}function Jn(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Wh(e);let i=hr(1);t&&(n?it(n)&&(i=Os(n)):i=Os(e));const a=JO(o,r,n)?Rb(o):hr(0);let l=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(o){const h=kt(o),p=n&&it(n)?kt(n):n;let g=h,x=tf(g);for(;x&&n&&p!==g;){const b=Os(x),y=x.getBoundingClientRect(),m=Ut(x),v=y.left+(x.clientLeft+parseFloat(m.paddingLeft))*b.x,_=y.top+(x.clientTop+parseFloat(m.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,f*=b.y,l+=v,u+=_,g=kt(x),x=tf(g)}}return Ml({width:d,height:f,x:l,y:u})}function Hh(e,t){const r=kc(e).scrollLeft;return t?t.left+r:Jn(mr(e)).left+r}function Ob(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Hh(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function XO(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",i=mr(n),a=t?_c(t.floating):!1;if(n===i||a&&o)return r;let l={scrollLeft:0,scrollTop:0},u=hr(1);const d=hr(0),f=pr(n);if((f||!f&&!o)&&((fo(n)!=="body"||Bi(i))&&(l=kc(n)),pr(n))){const p=Jn(n);u=Os(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=i&&!f&&!o?Ob(i,l,!0):hr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-l.scrollTop*u.y+d.y+h.y}}function ZO(e){return Array.from(e.getClientRects())}function eI(e){const t=mr(e),r=kc(e),n=e.ownerDocument.body,s=Un(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Un(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Hh(e);const a=-r.scrollTop;return Ut(n).direction==="rtl"&&(i+=Un(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:a}}function tI(e,t){const r=kt(e),n=mr(e),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const u=$h();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}const rI=new Set(["absolute","fixed"]);function nI(e,t){const r=Jn(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=pr(e)?Os(e):hr(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,u=n*o.y;return{width:i,height:a,x:l,y:u}}function Sg(e,t,r){let n;if(t==="viewport")n=tI(e,r);else if(t==="document")n=eI(mr(e));else if(it(t))n=nI(t,r);else{const s=Rb(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ml(n)}function Ib(e,t){const r=vn(e);return r===t||!it(r)||Ks(r)?!1:Ut(r).position==="fixed"||Ib(r,t)}function sI(e,t){const r=t.get(e);if(r)return r;let n=Ni(e,[],!1).filter(a=>it(a)&&fo(a)!=="body"),s=null;const o=Ut(e).position==="fixed";let i=o?vn(e):e;for(;it(i)&&!Ks(i);){const a=Ut(i),l=Fh(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&rI.has(s.position)||Bi(i)&&!l&&Ib(e,i))?n=n.filter(d=>d!==i):s=a,i=vn(i)}return t.set(e,n),n}function oI(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?_c(t)?[]:sI(t,this._c):[].concat(r),n],a=i[0],l=i.reduce((u,d)=>{const f=Sg(t,d,s);return u.top=Un(f.top,u.top),u.right=Qs(f.right,u.right),u.bottom=Qs(f.bottom,u.bottom),u.left=Un(f.left,u.left),u},Sg(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iI(e){const{width:t,height:r}=Tb(e);return{width:t,height:r}}function aI(e,t,r){const n=pr(t),s=mr(t),o=r==="fixed",i=Jn(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=hr(0);function u(){l.x=Hh(s)}if(n||!n&&!o)if((fo(t)!=="body"||Bi(s))&&(a=kc(t)),n){const p=Jn(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?Ob(s,a):hr(0),f=i.left+a.scrollLeft-l.x-d.x,h=i.top+a.scrollTop-l.y-d.y;return{x:f,y:h,width:i.width,height:i.height}}function Nu(e){return Ut(e).position==="static"}function Ng(e,t){if(!pr(e)||Ut(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return mr(e)===r&&(r=r.ownerDocument.body),r}function Mb(e,t){const r=kt(e);if(_c(e))return r;if(!pr(e)){let s=vn(e);for(;s&&!Ks(s);){if(it(s)&&!Nu(s))return s;s=vn(s)}return r}let n=Ng(e,t);for(;n&&yO(n)&&Nu(n);)n=Ng(n,t);return n&&Ks(n)&&Nu(n)&&!Fh(n)?r:n||kO(e)||r}const lI=async function(e){const t=this.getOffsetParent||Mb,r=this.getDimensions,n=await r(e.floating);return{reference:aI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function cI(e){return Ut(e).direction==="rtl"}const uI={convertOffsetParentRelativeRectToViewportRelativeRect:XO,getDocumentElement:mr,getClippingRect:oI,getOffsetParent:Mb,getElementRects:lI,getClientRects:ZO,getDimensions:iI,getScale:Os,isElement:it,isRTL:cI};function Lb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dI(e,t){let r=null,n;const s=mr(e);function o(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;const g=ga(f),x=ga(s.clientWidth-(d+h)),b=ga(s.clientHeight-(f+p)),y=ga(d),v={rootMargin:-g+"px "+-x+"px "+-b+"px "+-y+"px",threshold:Un(0,Qs(1,l))||1};let _=!0;function k(S){const N=S[0].intersectionRatio;if(N!==l){if(!_)return i();N?i(!1,N):n=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!Lb(u,e.getBoundingClientRect())&&i(),_=!1}try{r=new IntersectionObserver(k,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,v)}r.observe(e)}return i(!0),o}function fI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Wh(e),d=s||o?[...u?Ni(u):[],...Ni(t)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const f=u&&a?dI(u,r):null;let h=-1,p=null;i&&(p=new ResizeObserver(y=>{let[m]=y;m&&m.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let g,x=l?Jn(e):null;l&&b();function b(){const y=Jn(e);x&&!Lb(x,y)&&r(),x=y,g=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(m=>{s&&m.removeEventListener("scroll",r),o&&m.removeEventListener("resize",r)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const hI=KO,pI=VO,Dg=YO,mI=(e,t,r)=>{const n=new Map,s={platform:uI,...r},o={...s.platform,_c:n};return HO(e,t,{...s,platform:o})};var gI=typeof document<"u",vI=function(){},Ua=gI?w.useLayoutEffect:vI;function Al(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Al(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Al(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ab(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Cg(e,t){const r=Ab(e);return Math.round(t*r)/r}function Du(e){const t=w.useRef(e);return Ua(()=>{t.current=e}),t}function yI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(n);Al(h,n)||p(n);const[g,x]=w.useState(null),[b,y]=w.useState(null),m=w.useCallback(D=>{D!==S.current&&(S.current=D,x(D))},[]),v=w.useCallback(D=>{D!==N.current&&(N.current=D,y(D))},[]),_=o||g,k=i||b,S=w.useRef(null),N=w.useRef(null),C=w.useRef(d),j=l!=null,E=Du(l),M=Du(s),H=Du(u),F=w.useCallback(()=>{if(!S.current||!N.current)return;const D={placement:t,strategy:r,middleware:h};M.current&&(D.platform=M.current),mI(S.current,N.current,D).then(R=>{const L={...R,isPositioned:H.current!==!1};B.current&&!Al(C.current,L)&&(C.current=L,Ti.flushSync(()=>{f(L)}))})},[h,t,r,M,H]);Ua(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const B=w.useRef(!1);Ua(()=>(B.current=!0,()=>{B.current=!1}),[]),Ua(()=>{if(_&&(S.current=_),k&&(N.current=k),_&&k){if(E.current)return E.current(_,k,F);F()}},[_,k,F,E,j]);const T=w.useMemo(()=>({reference:S,floating:N,setReference:m,setFloating:v}),[m,v]),O=w.useMemo(()=>({reference:_,floating:k}),[_,k]),U=w.useMemo(()=>{const D={position:r,left:0,top:0};if(!O.floating)return D;const R=Cg(O.floating,d.x),L=Cg(O.floating,d.y);return a?{...D,transform:"translate("+R+"px, "+L+"px)",...Ab(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:L}},[r,a,O.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:F,refs:T,elements:O,floatingStyles:U}),[d,F,T,O,U])}const xI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Dg({element:n.current,padding:s}).fn(r):{}:n?Dg({element:n,padding:s}).fn(r):{}}}},bI=(e,t)=>({...hI(e),options:[e,t]}),wI=(e,t)=>({...pI(e),options:[e,t]}),_I=(e,t)=>({...xI(e),options:[e,t]}),kI={...l0};let jg=!1,SI=0;const Eg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+SI++;function NI(){const[e,t]=w.useState(()=>jg?Eg():void 0);return Ll(()=>{e==null&&t(Eg())},[]),w.useEffect(()=>{jg=!0},[]),e}const DI=kI.useId,Fb=DI||NI,CI=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:i}},width:a=14,height:l=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:f,stroke:h,d:p,style:{transform:g,...x}={},...b}=t,y=Fb(),[m,v]=w.useState(!1);if(Ll(()=>{if(!s)return;Ut(s).direction==="rtl"&&v(!0)},[s]),!s)return null;const[_,k]=n.split("-"),S=_==="top"||_==="bottom";let N=f;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(N=null);const C=d*2,j=C/2,E=a/2*(u/-8+1),M=l/2*u/4,H=!!p,F=N&&k==="end"?"bottom":"top";let B=N&&k==="end"?"right":"left";N&&m&&(B=k==="end"?"left":"right");const T=(o==null?void 0:o.x)!=null?N||o.x:"",O=(o==null?void 0:o.y)!=null?N||o.y:"",U=p||"M0,0"+(" H"+a)+(" L"+(a-E)+","+(l-M))+(" Q"+a/2+","+l+" "+E+","+(l-M))+" Z",D={top:H?"rotate(180deg)":"",left:H?"rotate(90deg)":"rotate(-90deg)",bottom:H?"":"rotate(180deg)",right:H?"rotate(-90deg)":"rotate(90deg)"}[_];return c.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:H?a:a+C,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[B]:T,[F]:O,[_]:S||H?"100%":"calc(100% - "+C/2+"px)",transform:[D,g].filter(R=>!!R).join(" "),...x},children:[C>0&&c.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:h,strokeWidth:C+(p?0:1),d:U}),c.jsx("path",{stroke:C&&!p?b.fill:"none",d:U}),c.jsx("clipPath",{id:y,children:c.jsx("rect",{x:-j,y:j*(H?-1:1),width:a+C,height:a})})]})});function jI(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const EI=w.createContext(null),PI=w.createContext(null),TI=()=>{var e;return((e=w.useContext(EI))==null?void 0:e.id)||null},RI=()=>w.useContext(PI);function OI(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=Fb(),o=w.useRef({}),[i]=w.useState(()=>jI()),a=TI()!=null,[l,u]=w.useState(n.reference),d=WO((p,g,x)=>{o.current.openEvent=p?g:void 0,i.emit("openchange",{open:p,event:g,reason:x,nested:a}),r==null||r(p,g,x)}),f=w.useMemo(()=>({setPositionReference:u}),[]),h=w.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:h,events:i,floatingId:s,refs:f}),[t,d,h,i,s,f])}function II(e){e===void 0&&(e={});const{nodeId:t}=e,r=OI({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[o,i]=w.useState(null),[a,l]=w.useState(null),d=(s==null?void 0:s.domReference)||o,f=w.useRef(null),h=RI();Ll(()=>{d&&(f.current=d)},[d]);const p=yI({...e,elements:{...s,...a&&{reference:a}}}),g=w.useCallback(v=>{const _=it(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;l(_),p.refs.setReference(_)},[p.refs]),x=w.useCallback(v=>{(it(v)||v===null)&&(f.current=v,i(v)),(it(p.refs.reference.current)||p.refs.reference.current===null||v!==null&&!it(v))&&p.refs.setReference(v)},[p.refs]),b=w.useMemo(()=>({...p.refs,setReference:x,setPositionReference:g,domReference:f}),[p.refs,x,g]),y=w.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),m=w.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return Ll(()=>{n.dataRef.current.floatingContext=m;const v=h==null?void 0:h.nodesRef.current.find(_=>_.id===t);v&&(v.context=m)}),w.useMemo(()=>({...p,context:m,refs:b,elements:y}),[p,b,y,m])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var nf=function(t,r){return nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},nf(t,r)};function He(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var oe=function(){return oe=Object.assign||function(r){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},oe.apply(this,arguments)};function ur(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var MI=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,o=e.className,i=e.children,a=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return P.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},i)},LI=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(o){var i,a=o.composed&&o.composedPath&&o.composedPath().find(function(l){return l instanceof Node})||o.target;r.current&&!r.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(i=n.current)===null||i===void 0||i.call(n,o))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},Nc=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,o=e.style,i=e.ignoreClass,a=LI(r,i);return P.createElement("div",{className:n,style:o,ref:function(l){a.current=l,s&&(s.current=l)}},t)},z;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(z||(z={}));function $b(){var e=typeof window<"u"?window:globalThis;return e}var Wi=12;function le(e){if(e==null)return new Date;var t=typeof e=="string"?Nb(e):q(e);return Dc(t)?t:new Date}function Cu(e,t,r,n,s){s===void 0&&(s=le());for(var o=Xs(r)||Xs(zh()),i=Array.isArray(t)?t:[t],a=0,l=i;a<l.length;a++){var u=l[a],d=KR(e,u,s,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(Dc(d)&&(!n||e===xe(d,u,r)))return d}return null}function Dc(e,t){return jl(e)&&!Qn(e,new Date("1/1/1800"))}function xe(e,t,r){if(r==="en")return Zd(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?Xs(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||Xs(zh()),Zd(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Et(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&xe(e,s,n)||""}var Bb=" - ";function AI(e,t,r){if(!e)return"";var n=Et(e,r),s=t?Et(t,r):"";return"".concat(n).concat(Bb).concat(s)}function FI(e,t){if(!(e!=null&&e.length))return"";var r=e[0]?Et(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=Et(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function ju(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,o=s===void 0?0:s,i=t.second,a=i===void 0?0:i;return Fa($a(Ba(e,a),o),n)}function $I(e){return Ih(e)}function BI(e,t){return xe(e,"ddd",t)}function Wa(e){return Kn(e)}function fn(e,t,r){var n=Xs(t||zh());return Ar(e,{locale:n,weekStartsOn:r})}function Tr(e){return pb(e)}function Lo(e){return bc(e)}function Pg(e){return Qd(e)}function Tg(){return Kn(le())}function Rg(e){return fb(e)}function UI(e){return sT(e)}function WI(e){return hb(e)}function ir(e,t){return e&&t?ZR(e,t):!e&&!t}function ot(e,t){return e&&t?JR(e,t):!e&&!t}function Fl(e,t){return e&&t?XR(e,t):!e&&!t}function se(e,t){return e&&t?rT(e,t):!e&&!t}function Ln(e,t){return e&&t?eR(e,t):!e&&!t}function Ao(e,t,r){var n,s=Kn(t),o=fb(r);try{n=Si(e,{start:s,end:o})}catch{n=!1}return n}function zh(){var e=$b();return e.__localeId__}function Xs(e){if(typeof e=="string"){var t=$b();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function HI(e,t,r){return t(xe(e,"EEEE",r))}function zI(e,t){return xe(e,"EEEEEE",t)}function YI(e,t){return xe(e,"EEE",t)}function Yh(e,t){return xe(Pt(le(),e),"LLLL",t)}function Ub(e,t){return xe(Pt(le(),e),"LLL",t)}function VI(e,t){return xe(hs(le(),e),"QQQ",t)}function Ot(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.excludeDateIntervals,a=r.includeDates,l=r.includeDateIntervals,u=r.filterDate;return Hi(e,{minDate:n,maxDate:s})||o&&o.some(function(d){return d instanceof Date?se(e,d):se(e,d.date)})||i&&i.some(function(d){var f=d.start,h=d.end;return Si(e,{start:f,end:h})})||a&&!a.some(function(d){return se(e,d)})||l&&!l.some(function(d){var f=d.start,h=d.end;return Si(e,{start:f,end:h})})||u&&!u(le(e))||!1}function Vh(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var i=o.start,a=o.end;return Si(e,{start:i,end:a})}):n&&n.some(function(o){var i;return o instanceof Date?se(e,o):se(e,(i=o.date)!==null&&i!==void 0?i:new Date)})||!1}function Wb(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate;return Hi(e,{minDate:n?pb(n):void 0,maxDate:s?hb(s):void 0})||(o==null?void 0:o.some(function(l){return ot(e,l instanceof Date?l:l.date)}))||i&&!i.some(function(l){return ot(e,l)})||a&&!a(le(e))||!1}function va(e,t,r,n){var s=Z(e),o=et(e),i=Z(t),a=et(t),l=Z(n);return s===i&&s===l?o<=r&&r<=a:s<i?l===s&&o<=r||l===i&&a>=r||l<i&&l>s:!1}function GI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates;return Hi(e,{minDate:n,maxDate:s})||o&&o.some(function(a){return ot(a instanceof Date?a:a.date,e)})||i&&!i.some(function(a){return ot(a,e)})||!1}function ya(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate;return Hi(e,{minDate:n,maxDate:s})||(o==null?void 0:o.some(function(l){return Fl(e,l instanceof Date?l:l.date)}))||i&&!i.some(function(l){return Fl(e,l)})||a&&!a(le(e))||!1}function xa(e,t,r){if(!t||!r||!jl(t)||!jl(r))return!1;var n=Z(t),s=Z(r);return n<=e&&s>=e}function Ha(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,o=r.excludeDates,i=r.includeDates,a=r.filterDate,l=new Date(e,0,1);return Hi(l,{minDate:n?bc(n):void 0,maxDate:s?mb(s):void 0})||(o==null?void 0:o.some(function(u){return ir(l,u instanceof Date?u:u.date)}))||i&&!i.some(function(u){return ir(l,u)})||a&&!a(le(l))||!1}function ba(e,t,r,n){var s=Z(e),o=$n(e),i=Z(t),a=$n(t),l=Z(n);return s===i&&s===l?o<=r&&r<=a:s<i?l===s&&o<=r||l===i&&a>=r||l<i&&l>s:!1}function Hi(e,t){var r,n=t===void 0?{}:t,s=n.minDate,o=n.maxDate;return(r=s&&Gs(e,s)<0||o&&Gs(e,o)>0)!==null&&r!==void 0?r:!1}function Og(e,t){return t.some(function(r){return Er(r)===Er(e)&&Pr(r)===Pr(e)&&dn(r)===dn(e)})}function Ig(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,o=r.filterTime;return n&&Og(e,n)||s&&!Og(e,s)||o&&!o(e)||!1}function Mg(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=le();s=Fa(s,Er(e)),s=$a(s,Pr(e)),s=Ba(s,dn(e));var o=le();o=Fa(o,Er(r)),o=$a(o,Pr(r)),o=Ba(o,dn(r));var i=le();i=Fa(i,Er(n)),i=$a(i,Pr(n)),i=Ba(i,dn(n));var a;try{a=!Si(s,{start:o,end:i})}catch{a=!1}return a}function Lg(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=Bn(e,1);return n&&El(n,o)>0||s&&s.every(function(i){return El(i,o)>0})||!1}function Ag(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=er(e,1);return n&&El(o,n)>0||s&&s.every(function(i){return El(o,i)>0})||!1}function qI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=bc(e),i=Cb(o,1);return n&&Pl(n,i)>0||s&&s.every(function(a){return Pl(a,i)>0})||!1}function KI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=mb(e),i=Oh(o,1);return n&&Pl(i,n)>0||s&&s.every(function(a){return Pl(i,a)>0})||!1}function Fg(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,o=qs(e,1);return n&&Tl(n,o)>0||s&&s.every(function(i){return Tl(i,o)>0})||!1}function QI(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,o=s===void 0?Wi:s,i=Lo(qs(e,o)),a=Zr(i,o).endPeriod,l=n&&Z(n);return l&&l>a||!1}function $g(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,o=Cr(e,1);return n&&Tl(o,n)>0||s&&s.every(function(i){return Tl(o,i)>0})||!1}function JI(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,o=s===void 0?Wi:s,i=Cr(e,o),a=Zr(i,o).startPeriod,l=n&&Z(n);return l&&l<a||!1}function Hb(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Gs(s,t)>=0});return fg(n)}else return r?fg(r):t}function zb(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Gs(s,t)<=0});return dg(n)}else return r?dg(r):t}function Bg(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=e.length;s<o;s++){var i=e[s];if(jr(i)){var a=xe(i,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(t)||(l.push(t),n.set(a,l))}else if(typeof i=="object"){var u=Object.keys(i),d=(r=u[0])!==null&&r!==void 0?r:"",f=i[d];if(typeof d=="string"&&Array.isArray(f))for(var h=0,p=f.length;h<p;h++){var g=f[h];if(g){var a=xe(g,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(d)||(l.push(d),n.set(a,l))}}}}return n}function XI(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function ZI(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,o=n.holidayName;if(jr(s)){var i=xe(s,"MM.dd.yyyy"),a=r.get(i)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&XI(a.holidayNames,[o]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?ur(ur([],l,!0),[o],!1):[o],r.set(i,a)}}}),r}function eM(e,t,r,n,s){for(var o=s.length,i=[],a=0;a<o;a++){var l=e,u=s[a];u&&(l=XP(l,Er(u)),l=Kd(l,Pr(u)),l=tT(l,dn(u)));var d=Kd(e,(r+1)*n);gn(l,t)&&Qn(l,d)&&u!=null&&i.push(u)}return i}function Ug(e){return e<10?"0".concat(e):"".concat(e)}function Zr(e,t){t===void 0&&(t=Wi);var r=Math.ceil(Z(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function tM(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function Wg(e){var t=e.getSeconds(),r=e.getMilliseconds();return q(e.getTime()-t*1e3-r)}function rM(e,t){return Wg(e).getTime()===Wg(t).getTime()}function Hg(e){if(!jr(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function zg(e,t){if(!jr(e)||!jr(t))throw new Error("Invalid date received");var r=Hg(e),n=Hg(t);return Qn(r,n)}function Yb(e){return e.key===z.Space}var nM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=P.createRef(),n.onTimeChange=function(s){var o,i;n.setState({time:s});var a=n.props.date,l=a instanceof Date&&!isNaN(+a),u=l?a:new Date;if(s!=null&&s.includes(":")){var d=s.split(":"),f=d[0],h=d[1];u.setHours(Number(f)),u.setMinutes(Number(h))}(i=(o=n.props).onChange)===null||i===void 0||i.call(o,u)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,i=o.date,a=o.timeString,l=o.customTimeInput;return l?w.cloneElement(l,{date:i,value:s,onChange:n.onTimeChange}):P.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var u;(u=n.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){n.onTimeChange(u.target.value||a)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return P.createElement("div",{className:"react-datepicker__input-time-container"},P.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),P.createElement("div",{className:"react-datepicker-time__input-container"},P.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),sM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===z.Space&&(n.preventDefault(),n.key=z.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isSameDay=function(n){return se(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(i){return r.isSameDayOrWeek(i)}):r.isSameDayOrWeek(r.props.selected),o=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!o},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return Vh(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return se(r.props.day,fn(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&se(n,fn(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,o=n.highlightDates;if(!o)return!1;var i=xe(s,"MM.dd.yyyy");return o.get(i)},r.getHolidaysClass=function(){var n,s=r.props,o=s.day,i=s.holidays;if(!i)return[void 0];var a=xe(o,"MM.dd.yyyy");return i.has(a)?[(n=i.get(a))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:Ao(s,o,i)},r.isInSelectingRange=function(){var n,s=r.props,o=s.day,i=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,u=s.selectsDisabledDaysInRange,d=s.startDate,f=s.endDate,h=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(i||a||l)||!h||!u&&r.isDisabled()?!1:i&&f&&(Qn(h,f)||Ln(h,f))?Ao(o,h,f):a&&d&&(gn(h,d)||Ln(h,d))||l&&d&&!f&&(gn(h,d)||Ln(h,d))?Ao(o,d,h):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.startDate,a=s.selectsStart,l=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a?se(o,l):se(o,i)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,o=s.day,i=s.endDate,a=s.selectsEnd,l=s.selectsRange,u=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return a||l?se(o,u):se(o,i)},r.isRangeStart=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:se(o,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,o=n.startDate,i=n.endDate;return!o||!i?!1:se(i,s)},r.isWeekend=function(){var n=QT(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===et(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(et(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(le())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return Ve("react-datepicker__day",s,"react-datepicker__day--"+BI(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,i=o===void 0?"Choose":o,a=n.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,u=r.isDisabled()||r.isExcluded()?l:i;return"".concat(u," ").concat(xe(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,o=n.holidays,i=o===void 0?new Map:o,a=n.excludeDates,l=xe(s,"MM.dd.yyyy"),u=[];return i.has(l)&&u.push.apply(u,i.get(l).holidayNames),r.isExcluded()&&u.push(a==null?void 0:a.filter(function(d){return d instanceof Date?se(d,s):se(d==null?void 0:d.date,s)}).map(function(d){if(!(d instanceof Date))return d==null?void 0:d.message})),u.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,o=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&se(s,n))?0:-1;return o},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(yg(r.props.day),r.props.day):yg(r.props.day)},r.render=function(){return P.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&P.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),oM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,o,i=n.key;i===z.Space&&(n.preventDefault(),n.key=z.Enter),(o=(s=r.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!se(r.props.date,r.props.selected)&&se(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||se(r.props.date,r.props.selected)&&se(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&se(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,o=r.ariaLabelPrefix,i=o===void 0?t.defaultProps.ariaLabelPrefix:o,a=r.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&se(this.props.date,this.props.selected)};return P.createElement("div",{ref:this.weekNumberEl,className:Ve(l),"aria-label":"".concat(i," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),iM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,o){for(var i,a,l,u=new Date(n),d=0;d<7;d++){var f=new Date(n);f.setDate(f.getDate()+d);var h=!r.isDisabled(f);if(h){u=f;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(u,s,o),r.props.showWeekPicker&&r.handleDayClick(u,o),((i=r.props.shouldCloseOnSelect)!==null&&i!==void 0?i:t.defaultProps.shouldCloseOnSelect)&&((l=(a=r.props).setOpen)===null||l===void 0||l.call(a,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):$I(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Jt(n,6),o=new Date(n);o<=s;){if(!r.isDisabled(o))return!1;o=Jt(o,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],o=r.formatWeekNumber(n);if(r.props.showWeekNumber){var i=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,o):void 0;s.push(P.createElement(oM,oe({key:"W"},t.defaultProps,r.props,{weekNumber:o,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:i})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=Jt(n,a);return P.createElement(sM,oe({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:r.handleDayClick.bind(r,l),onMouseEnter:r.handleDayMouseEnter.bind(r,l)}))}))},r.startOfWeek=function(){return fn(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!se(r.startOfWeek(),r.props.selected)&&se(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":se(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return P.createElement("div",{className:Ve(r)},this.renderDays())},t}(w.Component),Eo,aM=6,Is={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Eu=(Eo={},Eo[Is.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Eo[Is.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Eo[Is.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Eo),wa=1;function Yg(e,t){return e?Is.FOUR_COLUMNS:t?Is.TWO_COLUMNS:Is.THREE_COLUMNS}var lM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=ur([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=ur([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Ot(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return Vh(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var o,i;(i=(o=r.props).onDayClick)===null||i===void 0||i.call(o,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,o;(o=(s=r.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:ot(Pt(o,n),i)},r.isRangeStartQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Fl(hs(o,n),i)},r.isRangeEndMonth=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:ot(Pt(o,n),a)},r.isRangeEndQuarter=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate;return!i||!a?!1:Fl(hs(o,n),a)},r.isInSelectingRangeMonth=function(n){var s,o=r.props,i=o.day,a=o.selectsStart,l=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?va(h,f,n,i):l&&d||u&&d&&!f?va(d,h,n,i):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,a=o.startDate,l=o.selectsStart,u=Pt(i,n),d=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l?ot(u,d):ot(u,a)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var o=r.props,i=o.day,a=o.endDate,l=o.selectsEnd,u=o.selectsRange,d=Pt(i,n),f=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return l||u?ot(d,f):ot(d,a)},r.isInSelectingRangeQuarter=function(n){var s,o=r.props,i=o.day,a=o.selectsStart,l=o.selectsEnd,u=o.selectsRange,d=o.startDate,f=o.endDate,h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(a||l||u)||!h?!1:a&&f?ba(h,f,n,i):l&&d||u&&d&&!f?ba(d,h,n,i):!1},r.isWeekInMonth=function(n){var s=r.props.day,o=Jt(n,6);return ot(n,s)||ot(o,s)},r.isCurrentMonth=function(n,s){return Z(n)===Z(le())&&s===et(le())},r.isCurrentQuarter=function(n,s){return Z(n)===Z(le())&&s===$n(le())},r.isSelectedMonth=function(n,s,o){return et(o)===s&&Z(n)===Z(o)},r.isSelectMonthInList=function(n,s,o){return o.some(function(i){return r.isSelectedMonth(n,s,i)})},r.isSelectedQuarter=function(n,s,o){return $n(n)===s&&Z(n)===Z(o)},r.isMonthSelected=function(){var n=r.props,s=n.day,o=n.selected,i=n.selectedDates,a=n.selectsMultiple,l=et(s);return a?i==null?void 0:i.some(function(u){return r.isSelectedMonth(s,l,u)}):!!o&&r.isSelectedMonth(s,l,o)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,o=0,i=!1,a=fn(Tr(r.props.day),r.props.locale,r.props.calendarStartDay),l=function(g){return r.props.showWeekPicker?fn(g,r.props.locale,r.props.calendarStartDay):r.props.preSelection},u=function(g){return r.props.showWeekPicker?fn(g,r.props.locale,r.props.calendarStartDay):r.props.selected},d=r.props.selected?u(r.props.selected):void 0,f=r.props.preSelection?l(r.props.preSelection):void 0;n.push(P.createElement(iM,oe({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:o,day:a,month:et(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:d,preSelection:f,showWeekNumber:r.props.showWeekNumbers}))),!i;){o++,a=Cl(a,1);var h=s&&o>=aM,p=!s&&!r.isWeekInMonth(a);if(h||p)if(r.props.peekNextMonth)i=!0;else break}return n},r.onMonthClick=function(n,s){var o=r.isMonthDisabledForLabelDate(s),i=o.isDisabled,a=o.labelDate;i||r.handleDayClick(Tr(a),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),o=s.isDisabled,i=s.labelDate;o||r.handleDayMouseEnter(Tr(i))},r.handleMonthNavigation=function(n,s){var o,i,a,l;(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(l=(a=r.MONTH_REFS[n])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},r.handleKeyboardNavigation=function(n,s,o){var i,a=r.props,l=a.selected,u=a.preSelection,d=a.setPreSelection,f=a.minDate,h=a.maxDate,p=a.showFourColumnMonthYearPicker,g=a.showTwoColumnMonthYearPicker;if(u){var x=Yg(p,g),b=r.getVerticalOffset(x),y=(i=Eu[x])===null||i===void 0?void 0:i.grid,m=function(N,C,j){var E,M,H=C,F=j;switch(N){case z.ArrowRight:H=er(C,wa),F=j===11?0:j+wa;break;case z.ArrowLeft:H=Bn(C,wa),F=j===0?11:j-wa;break;case z.ArrowUp:H=Bn(C,b),F=!((E=y==null?void 0:y[0])===null||E===void 0)&&E.includes(j)?j+12-b:j-b;break;case z.ArrowDown:H=er(C,b),F=!((M=y==null?void 0:y[y.length-1])===null||M===void 0)&&M.includes(j)?j-12+b:j+b;break}return{newCalculatedDate:H,newCalculatedMonth:F}},v=function(N,C,j){for(var E=40,M=N,H=!1,F=0,B=m(M,C,j),T=B.newCalculatedDate,O=B.newCalculatedMonth;!H;){if(F>=E){T=C,O=j;break}if(f&&T<f){M=z.ArrowRight;var U=m(M,T,O);T=U.newCalculatedDate,O=U.newCalculatedMonth}if(h&&T>h){M=z.ArrowLeft;var U=m(M,T,O);T=U.newCalculatedDate,O=U.newCalculatedMonth}if(GI(T,r.props)){var U=m(M,T,O);T=U.newCalculatedDate,O=U.newCalculatedMonth}else H=!0;F++}return{newCalculatedDate:T,newCalculatedMonth:O}};if(s===z.Enter){r.isMonthDisabled(o)||(r.onMonthClick(n,o),d==null||d(l));return}var _=v(s,u,o),k=_.newCalculatedDate,S=_.newCalculatedMonth;switch(s){case z.ArrowRight:case z.ArrowLeft:case z.ArrowUp:case z.ArrowDown:r.handleMonthNavigation(S,k);break}}},r.getVerticalOffset=function(n){var s,o;return(o=(s=Eu[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},r.onMonthKeyDown=function(n,s){var o=r.props,i=o.disabledKeyboardNavigation,a=o.handleOnMonthKeyDown,l=n.key;l!==z.Tab&&n.preventDefault(),i||r.handleKeyboardNavigation(n,l,s),a&&a(n)},r.onQuarterClick=function(n,s){var o=hs(r.props.day,s);ya(o,r.props)||r.handleDayClick(Pg(o),n)},r.onQuarterMouseEnter=function(n){var s=hs(r.props.day,n);ya(s,r.props)||r.handleDayMouseEnter(Pg(s))},r.handleQuarterNavigation=function(n,s){var o,i,a,l;r.isDisabled(s)||r.isExcluded(s)||((i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,s),(l=(a=r.QUARTER_REFS[n-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},r.onQuarterKeyDown=function(n,s){var o,i,a=n.key;if(!r.props.disabledKeyboardNavigation)switch(a){case z.Enter:r.onQuarterClick(n,s),(i=(o=r.props).setPreSelection)===null||i===void 0||i.call(o,r.props.selected);break;case z.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,Oh(r.props.preSelection,1));break;case z.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,Cb(r.props.preSelection,1));break}},r.isMonthDisabledForLabelDate=function(n){var s,o=r.props,i=o.day,a=o.minDate,l=o.maxDate,u=o.excludeDates,d=o.includeDates,f=Pt(i,n);return{isDisabled:(s=(a||l||u||d)&&Wb(f,r.props))!==null&&s!==void 0?s:!1,labelDate:f}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate,l=s.preSelection,u=s.monthClassName,d=u?u(Pt(o,n)):void 0,f=r.getSelection();return Ve("react-datepicker__month-text","react-datepicker__month-".concat(n),d,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":f?r.isSelectMonthInList(o,n,f):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&l&&r.isSelectedMonth(o,n,l)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":i&&a?va(i,a,n,o):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(o,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=et(r.props.preSelection),o=r.isMonthDisabledForLabelDate(s).isDisabled,i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=$n(r.props.preSelection),o=ya(r.props.day,r.props),i=n===s&&!(o||r.props.disabledKeyboardNavigation)?"0":"-1";return i},r.getAriaLabel=function(n){var s=r.props,o=s.chooseDayAriaLabelPrefix,i=o===void 0?"Choose":o,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,u=s.day,d=s.locale,f=Pt(u,n),h=r.isDisabled(f)||r.isExcluded(f)?l:i;return"".concat(h," ").concat(xe(f,"MMMM yyyy",d))},r.getQuarterClassNames=function(n){var s=r.props,o=s.day,i=s.startDate,a=s.endDate,l=s.selected,u=s.minDate,d=s.maxDate,f=s.excludeDates,h=s.includeDates,p=s.filterDate,g=s.preSelection,x=s.disabledKeyboardNavigation,b=(u||d||f||h||p)&&ya(hs(o,n),r.props);return Ve("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":l?r.isSelectedQuarter(o,n,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!x&&g&&r.isSelectedQuarter(o,n,g)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":i&&a?ba(i,a,n,o):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(o,n)})},r.getMonthContent=function(n){var s=r.props,o=s.showFullMonthYearPicker,i=s.renderMonthContent,a=s.locale,l=s.day,u=Ub(n,a),d=Yh(n,a);return i?i(n,u,d,l):o?d:u},r.getQuarterContent=function(n){var s,o=r.props,i=o.renderQuarterContent,a=o.locale,l=VI(n,a);return(s=i==null?void 0:i(n,l))!==null&&s!==void 0?s:l},r.renderMonths=function(){var n,s=r.props,o=s.showTwoColumnMonthYearPicker,i=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,u=(n=Eu[Yg(i,o)])===null||n===void 0?void 0:n.grid;return u==null?void 0:u.map(function(d,f){return P.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(h,p){return P.createElement("div",{ref:r.MONTH_REFS[h],key:p,onClick:function(g){r.onMonthClick(g,h)},onKeyDown:function(g){Yb(g)&&(g.preventDefault(),g.key=z.Enter),r.onMonthKeyDown(g,h)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(h)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(h)}:void 0,tabIndex:Number(r.getTabIndex(h)),className:r.getMonthClassNames(h),"aria-disabled":r.isMonthDisabled(h),role:"option","aria-label":r.getAriaLabel(h),"aria-current":r.isCurrentMonth(a,h)?"date":void 0,"aria-selected":l?r.isSelectedMonth(a,h,l):void 0},r.getMonthContent(h))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,o=n.selected,i=[1,2,3,4];return P.createElement("div",{className:"react-datepicker__quarter-wrapper"},i.map(function(a,l){return P.createElement("div",{key:l,ref:r.QUARTER_REFS[l],role:"option",onClick:function(u){r.onQuarterClick(u,a)},onKeyDown:function(u){r.onQuarterKeyDown(u,a)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(a)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(a)}:void 0,className:r.getQuarterClassNames(a),"aria-selected":o?r.isSelectedQuarter(s,a,o):void 0,tabIndex:Number(r.getQuarterTabIndex(a)),"aria-current":r.isCurrentQuarter(s,a)?"date":void 0},r.getQuarterContent(a))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,o=n.selectsStart,i=n.selectsEnd,a=n.showMonthYearPicker,l=n.showQuarterYearPicker,u=n.showWeekPicker;return Ve("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||i)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":u})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,o=r.selectsMultiple;if(o)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,o=r.day,i=r.ariaLabelPrefix,a=i===void 0?"Month ":i,l=a?a.trim()+" ":"";return P.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(xe(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),cM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return P.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?P.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return P.createElement(Nc,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),uM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,o){return P.createElement("option",{key:s,value:o},s)})},r.renderSelectMode=function(n){return P.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return P.createElement(cM,oe({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,o=[r.renderReadView(!s,n)];return s&&o.unshift(r.renderDropdown(n)),o},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return Ub(o,r.props.locale)}:function(o){return Yh(o,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return P.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function dM(e,t){for(var r=[],n=Tr(e),s=Tr(t);!gn(n,s);)r.push(le(n)),n=er(n,1);return r}var fM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=ef(s),i=ir(n.props.date,s)&&ot(n.props.date,s);return P.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":i?"true":void 0},i?P.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",xe(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:dM(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=Ve({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return P.createElement(Nc,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),hM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Tr(r.props.minDate),s=Tr(r.props.maxDate),o=[];!gn(n,s);){var i=ef(n);o.push(P.createElement("option",{key:i,value:i},xe(n,r.props.dateFormat,r.props.locale))),n=er(n,1)}return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:ef(Tr(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=xe(r.props.date,r.props.dateFormat,r.props.locale);return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},P.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return P.createElement(fM,oe({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=le(n);ir(r.props.date,s)&&ot(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),pM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;r.list&&(r.list.scrollTop=(o=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&o!==void 0?o:0)})},r.handleClick=function(n){var s,o;(r.props.minTime||r.props.maxTime)&&Mg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Ig(n,r.props)||(o=(s=r.props).onChange)===null||o===void 0||o.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&rM(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&Mg(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Ig(n,r.props)},r.liClasses=function(n){var s,o=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Er(n)*3600+Pr(n)*60+dn(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},r.handleOnKeyDown=function(n,s){var o,i;n.key===z.Space&&(n.preventDefault(),n.key=z.Enter),(n.key===z.ArrowUp||n.key===z.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===z.ArrowDown||n.key===z.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===z.Enter&&r.handleClick(s),(i=(o=r.props).handleOnKeyDown)===null||i===void 0||i.call(o,n)},r.renderTimes=function(){for(var n,s=[],o=typeof r.props.format=="string"?r.props.format:"p",i=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,a=r.props.selected||r.props.openToDate||le(),l=Wa(a),u=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),d=60*tM(a),f=d/i,h=0;h<f;h++){var p=Kd(l,h*i);if(s.push(p),u){var g=eM(l,p,h,i,u);s=s.concat(g)}}var x=s.reduce(function(b,y){return y.getTime()<=a.getTime()?y:b},s[0]);return s.map(function(b){return P.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===x&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===x?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},xe(b,o,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?P.createElement(P.Fragment,null):P.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},P.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return P.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),P.createElement("div",{className:"react-datepicker__time"},P.createElement("div",{className:"react-datepicker__time-box"},P.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){r.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),Vg=3,mM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=ur([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Ot(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Vh(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var i,a;(a=(i=n.YEAR_REFS[s])===null||i===void 0?void 0:i.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var i,a,l,u,d=n.props,f=d.date,h=d.yearItemNumber;if(!(f===void 0||h===void 0)){var p=Zr(f,h).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,o),s-p<0?n.updateFocusOnPaginate(h-(p-s)):s-p>=h?n.updateFocusOnPaginate(Math.abs(h-(s-p))):(u=(l=n.YEAR_REFS[s-p])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus())}},n.isSameDay=function(s,o){return se(s,o)},n.isCurrentYear=function(s){return s===Z(le())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&ir(or(le(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&ir(or(le(),s),n.props.endDate)},n.isInRange=function(s){return xa(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,i=o.selectsStart,a=o.selectsEnd,l=o.selectsRange,u=o.startDate,d=o.endDate;return!(i||a||l)||!n.selectingDate()?!1:i&&d?xa(s,n.selectingDate(),d):a&&u||l&&u&&!d?xa(s,u,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,a=i.startDate,l=i.selectsStart,u=or(le(),s);return l?ir(u,(o=n.selectingDate())!==null&&o!==void 0?o:null):ir(u,a??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var i=n.props,a=i.endDate,l=i.selectsEnd,u=i.selectsRange,d=or(le(),s);return l||u?ir(d,(o=n.selectingDate())!==null&&o!==void 0?o:null):ir(d,a??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var o=n.props,i=o.minDate,a=o.maxDate,l=o.excludeDates,u=o.includeDates,d=o.filterDate,f=Lo(or(n.props.date,s)),h=(i||a||l||u||d)&&Ha(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!se(f,Lo(n.props.selected))&&se(f,Lo(n.props.preSelection))&&!h}},n.isSelectedYear=function(s){var o=n.props,i=o.selectsMultiple,a=o.selected,l=o.selectedDates;return i?l==null?void 0:l.some(function(u){return s===Z(u)}):!!a&&s===Z(a)},n.onYearClick=function(s,o){var i=n.props.date;i!==void 0&&n.handleYearClick(Lo(or(i,o)),s)},n.onYearKeyDown=function(s,o){var i,a,l=s.key,u=n.props,d=u.date,f=u.yearItemNumber,h=u.handleOnKeyDown;if(l!==z.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case z.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,n.props.selected);break;case z.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,Cr(n.props.preSelection,1));break;case z.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,qs(n.props.preSelection,1));break;case z.ArrowUp:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var p=Zr(d,f).startPeriod,g=Vg,x=o-g;if(x<p){var b=f%g;o>=p&&o<p+b?g=b:g+=b,x=o-g}n.handleYearNavigation(x,qs(n.props.preSelection,g));break}case z.ArrowDown:{if(d===void 0||f===void 0||n.props.preSelection==null)break;var y=Zr(d,f).endPeriod,g=Vg,x=o+g;if(x>y){var b=f%g;o<=y&&o>y-b?g=b:g+=b,x=o+g}n.handleYearNavigation(x,Cr(n.props.preSelection,g));break}}h&&h(s)},n.getYearClassNames=function(s){var o=n.props,i=o.date,a=o.minDate,l=o.maxDate,u=o.excludeDates,d=o.includeDates,f=o.filterDate,h=o.yearClassName;return Ve("react-datepicker__year-text","react-datepicker__year-".concat(s),i?h==null?void 0:h(or(i,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(a||l||u||d||f)&&Ha(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=Z(n.props.preSelection),i=Ha(s,n.props);return s===o&&!i?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,o=s.date,i=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(o===void 0)return null;for(var u=Zr(o,i),d=u.startPeriod,f=u.endPeriod,h=function(x){n.push(P.createElement("div",{ref:p.YEAR_REFS[x-d],onClick:function(b){r.onYearClick(b,x)},onKeyDown:function(b){Yb(b)&&(b.preventDefault(),b.key=z.Enter),r.onYearKeyDown(b,x)},tabIndex:Number(p.getYearTabIndex(x)),className:p.getYearClassNames(x),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return a(b,x)},onPointerEnter:p.props.usePointerEvent?function(b){return a(b,x)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return l(b,x)},onPointerLeave:p.props.usePointerEvent?function(b){return l(b,x)}:void 0,key:x,"aria-current":p.isCurrentYear(x)?"date":void 0},p.getYearContent(x)))},p=this,g=d;g<=f;g++)h(g);return P.createElement("div",{className:"react-datepicker__year"},P.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function gM(e,t,r,n){for(var s=[],o=0;o<2*t+1;o++){var i=e+t-o,a=!0;r&&(a=Z(r)<=i),n&&a&&(a=Z(n)>=i),a&&s.push(i)}return s}var vM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var a=n.props.year,l=n.state.yearsList.map(function(f){return P.createElement("div",{className:a===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:n.onChange.bind(n,f),"aria-selected":a===f?"true":void 0},a===f?P.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",f)}),u=n.props.minDate?Z(n.props.minDate):null,d=n.props.maxDate?Z(n.props.maxDate):null;return(!d||!n.state.yearsList.find(function(f){return f===d}))&&l.unshift(P.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!n.state.yearsList.find(function(f){return f===u}))&&l.push(P.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},P.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(a){n.props.onChange(a)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(a){var l=n.state.yearsList.map(function(u){return u+a});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,i=s||(o?10:5);return n.state={yearsList:gM(n.props.year,i,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=Ve({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return P.createElement(Nc,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),yM=function(e){He(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?Z(r.props.minDate):1900,s=r.props.maxDate?Z(r.props.maxDate):2100,o=[],i=n;i<=s;i++)o.push(P.createElement("option",{key:i,value:i},i));return o},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return P.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return P.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},P.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),P.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return P.createElement(vM,oe({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var o;(o=r.onSelect)===null||o===void 0||o.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var o,i;(i=(o=r.props).onSelect)===null||i===void 0||i.call(o,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return P.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),xM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],bM=function(e){var t=(e.className||"").split(/\s+/);return xM.some(function(r){return t.indexOf(r)>=0})},wM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,i;bM(s.target)&&((i=(o=n.props).onDropdownFocus)===null||i===void 0||i.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,i=s.selected,a=s.openToDate,l=Hb(n.props),u=zb(n.props),d=le(),f=a||i||o;return f||(l&&Qn(d,l)?l:u&&gn(d,u)?u:d)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:er(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Bn(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,i){n.props.onSelect(s,o,i),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:or(le(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,i,a,l;(i=(o=n.props).onYearChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Ot(s,n.props))return s;for(var o=Tr(s),i=WI(s),a=nT(i,o),l=null,u=0;u<=a;u++){var d=Jt(o,u);if(!Ot(d,n.props)){l=d;break}}return l},n.handleMonthChange=function(s){var o,i,a,l=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(a=(i=n.props).setOpen)===null||a===void 0||a.call(i,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(s){var o,i;(i=(o=n.props).onMonthChange)===null||i===void 0||i.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var i=o.date;return{date:or(i,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var i=o.date;return{date:Pt(i,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var i=o.date;return{date:or(Pt(i,et(s)),Z(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=fn(s,n.props.locale,n.props.calendarStartDay),i=[];return n.props.showWeekNumbers&&i.push(P.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),i.concat([0,1,2,3,4,5,6].map(function(a){var l=Jt(o,a),u=n.formatWeekday(l,n.props.locale),d=n.props.weekDayClassName?n.props.weekDayClassName(l):void 0;return P.createElement("div",{key:a,"aria-label":xe(l,"EEEE",n.props.locale),className:Ve("react-datepicker__day-name",d)},u)}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?HI(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?YI(s,o):zI(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:qs(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,i;if(!n.props.renderCustomHeader){var a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,d=Bn(n.state.date,u),f;switch(!0){case n.props.showMonthYearPicker:f=Fg(n.state.date,n.props);break;case n.props.showYearPicker:f=QI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:f=qI(n.state.date,n.props);break;default:f=Lg(d,n.props);break}if(!(!((i=n.props.forceShowMonthNavigation)!==null&&i!==void 0?i:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&f||n.props.showTimeSelectOnly)){var h=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],g=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(g=n.decreaseYear),f&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),g=void 0);var x=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,m=y===void 0?t.defaultProps.previousMonthButtonLabel:y,v=b.previousYearButtonLabel,_=v===void 0?t.defaultProps.previousYearButtonLabel:v,k=n.props,S=k.previousMonthAriaLabel,N=S===void 0?typeof m=="string"?m:"Previous Month":S,C=k.previousYearAriaLabel,j=C===void 0?typeof _=="string"?_:"Previous Year":C;return P.createElement("button",{type:"button",className:p.join(" "),onClick:g,onKeyDown:n.props.handleOnKeyDown,"aria-label":x?j:N},P.createElement("span",{className:h.join(" ")},x?_:m))}}},n.increaseYear=function(){n.setState(function(s){var o,i=s.date;return{date:Cr(i,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.showMonthYearPicker:o=$g(n.state.date,n.props);break;case n.props.showYearPicker:o=JI(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=KI(n.state.date,n.props);break;default:o=Ag(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var i=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),l=void 0);var u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,d=n.props,f=d.nextMonthButtonLabel,h=f===void 0?t.defaultProps.nextMonthButtonLabel:f,p=d.nextYearButtonLabel,g=p===void 0?t.defaultProps.nextYearButtonLabel:p,x=n.props,b=x.nextMonthAriaLabel,y=b===void 0?typeof h=="string"?h:"Next Month":b,m=x.nextYearAriaLabel,v=m===void 0?typeof g=="string"?g:"Next Year":m;return P.createElement("button",{type:"button",className:i.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":u?v:y},P.createElement("span",{className:a.join(" ")},u?g:h))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),P.createElement("h2",{className:o.join(" ")},xe(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return P.createElement(yM,oe({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Z(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return P.createElement(uM,oe({},t.defaultProps,n.props,{month:et(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return P.createElement(hM,oe({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(Tg(),s),n.props.setPreSelection&&n.props.setPreSelection(Tg())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return P.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var o=s.monthDate,i=s.i;return P.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),P.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(i!==0),n.renderMonthYearDropdown(i!==0),n.renderYearDropdown(i!==0)),P.createElement("div",{className:"react-datepicker__day-names"},n.header(o)))},n.renderCustomHeader=function(s){var o,i,a=s.monthDate,l=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var u=Lg(n.state.date,n.props),d=Ag(n.state.date,n.props),f=Fg(n.state.date,n.props),h=$g(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return P.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(i=(o=n.props).renderCustomHeader)===null||i===void 0?void 0:i.call(o,oe(oe({},n.state),{customHeaderCount:l,monthDate:a,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:d,prevYearButtonDisabled:f,nextYearButtonDisabled:h})),p&&P.createElement("div",{className:"react-datepicker__day-names"},n.header(a)))},n.renderYearHeader=function(s){var o=s.monthDate,i=n.props,a=i.showYearPicker,l=i.yearItemNumber,u=l===void 0?t.defaultProps.yearItemNumber:l,d=Zr(o,u),f=d.startPeriod,h=d.endPeriod;return P.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(f," - ").concat(h):Z(o))},n.renderHeader=function(s){var o=s.monthDate,i=s.i,a=i===void 0?0:i,l={monthDate:o,i:a};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var i=[],a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,u=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Cr(n.state.date,l):Bn(n.state.date,l),d=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,f=0;f<a;++f){var h=f-d+l,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Cr(u,h):er(u,h),g="month-".concat(f),x=f<a-1,b=f>0;i.push(P.createElement("div",{key:g,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:f}),P.createElement(lM,oe({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:f,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:x,monthShowsDuplicateDaysStart:b}))))}return i}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return P.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),P.createElement(mM,oe({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return P.createElement(pM,oe({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&Dc(s)&&!!n.props.selected,i=o?"".concat(Ug(s.getHours()),":").concat(Ug(s.getMinutes())):"";if(n.props.showTimeInput)return P.createElement(nM,oe({},t.defaultProps,n.props,{date:s,timeString:i,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=Zr(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),i=o.startPeriod,a=o.endPeriod,l;return n.props.showYearPicker?l="".concat(i," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=Z(n.state.date):l="".concat(Yh(et(n.state.date),n.props.locale)," ").concat(Z(n.state.date)),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return P.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Wi}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!se(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!ot(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!se(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||MI;return P.createElement(Nc,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},P.createElement("div",{style:{display:"contents"},ref:this.containerRef},P.createElement(r,{className:Ve("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),_M=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return P.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(P.isValidElement(t)){var i=t;return P.cloneElement(i,{className:"".concat(i.props.className||""," ").concat(o," ").concat(n),onClick:function(a){typeof i.props.onClick=="function"&&i.props.onClick(a),typeof s=="function"&&s(a)}})}return P.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},P.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Vb=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return dy.createPortal(this.props.children,this.el)},t}(w.Component),kM="[tabindex], a, button, input, select, textarea",SM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Gb=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(kM),1,-1).filter(SM)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?P.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},P.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,P.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function NM(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,o=w.useRef(null),i=II(oe({open:!s,whileElementsMounted:fI,placement:r.popperPlacement,middleware:ur([wI({padding:15}),bI(10),_I({element:o})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),a=oe(oe({},r),{hidePopper:s,popperProps:oe(oe({},i),{arrowRef:o})});return P.createElement(e,oe({},a))};return t}var DM=function(e){He(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,o=r.hidePopper,i=o===void 0?t.defaultProps.hidePopper:o,a=r.popperComponent,l=r.targetComponent,u=r.enableTabLoop,d=r.popperOnKeyDown,f=r.portalId,h=r.portalHost,p=r.popperProps,g=r.showArrow,x=void 0;if(!i){var b=Ve("react-datepicker-popper",n);x=P.createElement(Gb,{enableTabLoop:u},P.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:d},a,g&&P.createElement(CI,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(x=w.createElement(this.props.popperContainer,{},x)),f&&!i&&(x=P.createElement(Vb,{portalId:f,portalHost:h},x));var y=Ve("react-datepicker-wrapper",s);return P.createElement(P.Fragment,null,P.createElement("div",{ref:p.refs.setReference,className:y},l),x)},t}(w.Component),CM=NM(DM),Gg="react-datepicker-ignore-onclickoutside";function jM(e,t){return e&&t?et(e)!==et(t)||Z(e)!==Z(t):e!==t}var Pu="Date input not valid.",EM=function(e){He(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:le()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,i){var a=new Date(i.date);return Dc(a)?ur(ur([],o,!0),[oe(oe({},i),{date:a})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),i=Hb(n.props),a=zb(n.props),l=i&&Qn(o,Wa(i))?i:a&&gn(o,Rg(a))?a:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:l,highlightDates:Bg(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(oe(oe({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(oe(oe({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Tu},function(){s||n.setState(function(i){return{focused:o?i.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return jr(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,i,a=n.state.wasHidden,l=a?n.state.open:!0;a&&n.resetHiddenStatus(),n.state.preventFocus||((i=(o=n.props).onFocus)===null||i===void 0||i.call(o,s),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var o,i;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((i=(o=n.props).onBlur)===null||i===void 0||i.call(o,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,i;n.props.inline||n.setOpen(!1),(i=(o=n.props).onClickOutside)===null||i===void 0||i.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,i,a,l,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var f=u[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,u),!f||typeof f.isDefaultPrevented!="function"||f.isDefaultPrevented()))){n.setState({inputValue:(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:null,lastPreSelectChange:PM});var h=n.props,p=h.selectsRange,g=h.startDate,x=h.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(o=n.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,m=(f==null?void 0:f.target)instanceof HTMLInputElement?f.target.value:"";if(p){var v=m.split(b.includes("-")?Bb:"-",2).map(function(M){return M.trim()}),_=v[0],k=v[1],S=Cu(_??"",b,n.props.locale,y),N=Cu(k??"",b,n.props.locale,y),C=(g==null?void 0:g.getTime())!==(S==null?void 0:S.getTime()),j=(x==null?void 0:x.getTime())!==(N==null?void 0:N.getTime());if(!C&&!j||S&&Ot(S,n.props)||N&&Ot(N,n.props))return;(a=(i=n.props).onChange)===null||a===void 0||a.call(i,[S,N],f)}else{var E=Cu(m,b,n.props.locale,y,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(E||!m)&&n.setSelected(E,f,!0)}}},n.handleSelect=function(s,o,i){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(o),n.setSelected(s,o,!1,i),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var a=n.props,l=a.startDate,u=a.endDate;l&&!u&&(n.props.swapRange||!zg(s,l))&&n.setOpen(!1)}}},n.setSelected=function(s,o,i,a){var l,u,d=s;if(n.props.showYearPicker){if(d!==null&&Ha(Z(d),n.props))return}else if(n.props.showMonthYearPicker){if(d!==null&&Wb(d,n.props))return}else if(d!==null&&Ot(d,n.props))return;var f=n.props,h=f.onChange,p=f.selectsRange,g=f.startDate,x=f.endDate,b=f.selectsMultiple,y=f.selectedDates,m=f.minTime,v=f.swapRange;if(!Ln(n.props.selected,d)||n.props.allowSameDay||p||b)if(d!==null&&(n.props.selected&&(!i||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(d=ju(d,{hour:Er(n.props.selected),minute:Pr(n.props.selected),second:dn(n.props.selected)})),!i&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&m&&(d=ju(d,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),n.props.inline||n.setState({preSelection:d}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),p){var _=!g&&!x,k=g&&!x,S=g&&x;_?h==null||h([d,null],o):k&&(d===null?h==null||h([null,null],o):zg(d,g)?v?h==null||h([d,g],o):h==null||h([d,null],o):h==null||h([g,d],o)),S&&(h==null||h([d,null],o))}else if(b){if(d!==null)if(!(y!=null&&y.length))h==null||h([d],o);else{var N=y.some(function(j){return se(j,d)});if(N){var C=y.filter(function(j){return!se(j,d)});h==null||h(C,o)}else h==null||h(ur(ur([],y,!0),[d],!1),o)}}else h==null||h(d,o);i||((u=(l=n.props).onSelect)===null||u===void 0||u.call(l,d,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=jr(n.props.minDate),i=jr(n.props.maxDate),a=!0;if(s){var l=Wa(s);if(o&&i)a=Ao(s,n.props.minDate,n.props.maxDate);else if(o){var u=Wa(n.props.minDate);a=gn(s,u)||Ln(l,u)}else if(i){var d=Rg(n.props.maxDate);a=Qn(s,d)||Ln(l,d)}}a&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,i;if(!(n.props.selectsRange||n.props.selectsMultiple)){var a=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?s:ju(a,{hour:Er(s),minute:Pr(s)});n.setState({preSelection:l}),(i=(o=n.props).onChange)===null||i===void 0||i.call(o,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,i,a,l,u,d;(i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s);var f=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(f===z.ArrowDown||f===z.ArrowUp||f===z.Enter)&&((a=n.onInputClick)===null||a===void 0||a.call(n));return}if(n.state.open){if(f===z.ArrowDown||f===z.ArrowUp){s.preventDefault();var h=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(h);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var g=le(n.state.preSelection);f===z.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Tu?(n.handleSelect(g,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(g)):n.setOpen(!1)):f===z.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):f===z.Tab&&n.setOpen(!1),n.inputOk()||(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Pu})}},n.onPortalKeyDown=function(s){var o=s.key;o===z.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,i,a,l,u,d,f=n.props,h=f.minDate,p=f.maxDate,g=f.disabledKeyboardNavigation,x=f.showWeekPicker,b=f.shouldCloseOnSelect,y=f.locale,m=f.calendarStartDay,v=f.adjustDateOnChange,_=f.inline;if((i=(o=n.props).onKeyDown)===null||i===void 0||i.call(o,s),!g){var k=s.key,S=s.shiftKey,N=le(n.state.preSelection),C=function(T,O){var U=O;switch(T){case z.ArrowRight:U=x?Cl(O,1):Jt(O,1);break;case z.ArrowLeft:U=x?xg(O,1):eO(O,1);break;case z.ArrowUp:U=xg(O,1);break;case z.ArrowDown:U=Cl(O,1);break;case z.PageUp:U=S?qs(O,1):Bn(O,1);break;case z.PageDown:U=S?Cr(O,1):er(O,1);break;case z.Home:U=fn(O,y,m);break;case z.End:U=UI(O);break}return U},j=function(T,O){for(var U=40,D=T,R=!1,L=0,W=C(T,O);!R;){if(L>=U){W=O;break}h&&W<h&&(D=z.ArrowRight,W=Ot(h,n.props)?C(D,W):h),p&&W>p&&(D=z.ArrowLeft,W=Ot(p,n.props)?C(D,W):p),Ot(W,n.props)?((D===z.PageUp||D===z.Home)&&(D=z.ArrowRight),(D===z.PageDown||D===z.End)&&(D=z.ArrowLeft),W=C(D,W)):R=!0,L++}return W};if(k===z.Enter){s.preventDefault(),n.handleSelect(N,s),!b&&n.setPreSelection(N);return}else if(k===z.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(a=n.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:Pu});return}var E=null;switch(k){case z.ArrowLeft:case z.ArrowRight:case z.ArrowUp:case z.ArrowDown:case z.PageUp:case z.PageDown:case z.Home:case z.End:E=j(k,N);break}if(!E){(d=(u=n.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:Pu});return}if(s.preventDefault(),n.setState({lastPreSelectChange:Tu}),v&&n.setSelected(E),n.setPreSelection(E),_){var M=et(N),H=et(E),F=Z(N),B=Z(E);M!==H||F!==B?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===z.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,i=o.selectsRange,a=o.onChange;i?a==null||a([null,null],s):a==null||a(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:P.createElement(wM,oe({showMonthYearDropdown:void 0,ref:function(i){n.calendar=i}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:ZI(n.modifyHolidays()),outsideClickIgnoreClass:Gg,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,o=s.dateFormat,i=o===void 0?t.defaultProps.dateFormat:o,a=s.locale,l=n.props.showTimeInput||n.props.showTimeSelect,u=l?"PPPPp":"PPPP",d;return n.props.selectsRange?d="Selected start date: ".concat(Et(n.props.startDate,{dateFormat:u,locale:a}),". ").concat(n.props.endDate?"End date: "+Et(n.props.endDate,{dateFormat:u,locale:a}):""):n.props.showTimeSelectOnly?d="Selected time: ".concat(Et(n.props.selected,{dateFormat:i,locale:a})):n.props.showYearPicker?d="Selected year: ".concat(Et(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?d="Selected month: ".concat(Et(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?d="Selected quarter: ".concat(Et(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):d="Selected date: ".concat(Et(n.props.selected,{dateFormat:u,locale:a})),P.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},n.renderDateInput=function(){var s,o,i,a=Ve(n.props.className,(s={},s[Gg]=n.state.open,s)),l=n.props.customInput||P.createElement("input",{type:"text"}),u=n.props.customInputRef||"ref",d=n.props,f=d.dateFormat,h=f===void 0?t.defaultProps.dateFormat:f,p=d.locale,g=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?AI(n.props.startDate,n.props.endDate,{dateFormat:h,locale:p}):n.props.selectsMultiple?FI((i=n.props.selectedDates)!==null&&i!==void 0?i:[],{dateFormat:h,locale:p}):Et(n.props.selected,{dateFormat:h,locale:p});return w.cloneElement(l,(o={},o[u]=function(x){n.input=x},o.value=g,o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Ve(l.props.className,a),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,i=s.disabled,a=s.selected,l=s.startDate,u=s.endDate,d=s.clearButtonTitle,f=s.clearButtonClassName,h=f===void 0?"":f,p=s.ariaLabelClose,g=p===void 0?"Close":p,x=s.selectedDates,b=s.readOnly;return o&&!b&&(a!=null||l!=null||u!=null||x!=null&&x.length)?P.createElement("button",{type:"button",className:Ve("react-datepicker__close-icon",h,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":g,onClick:n.onClearClick,title:d,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Wi,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,o,i,a;r.inline&&jM(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Bg(this.props.highlightDates)}),!n.focused&&!Ln(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((a=(i=this.props).onCalendarClose)===null||a===void 0||a.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,o=r.calendarIconClassname,i=r.calendarIconClassName,a=r.toggleCalendarOnIconClick,l=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),P.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&P.createElement(_M,oe({icon:s,className:Ve(i,!i&&o,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?P.createElement(Gb,{enableTabLoop:this.props.enableTabLoop},P.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=P.createElement(Vb,oe({portalId:this.props.portalId},this.props),n)),P.createElement("div",null,this.renderInputContainer(),n)}return P.createElement(CM,oe({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),PM="input",Tu="navigate";function TM({value:e,onChange:t,label:r="Site Submit"}){const[n,s]=w.useState(""),[o,i]=w.useState([]),[a,l]=w.useState(null),[u,d]=w.useState(!1),f=w.useRef(null),h=w.useRef(null);w.useEffect(()=>{e?Y.from("site_submit").select("*").eq("id",e).single().then(({data:b})=>{b&&(l(b),s(b.code||""))}):(l(null),s(""))},[e]),w.useEffect(()=>{const y=setTimeout(async()=>{if(n.length===0){i([]);return}const{data:m}=await Y.from("site_submit").select("*").or(`site_submit_name.ilike.%${n}%,code.ilike.%${n}%`).limit(10).order("site_submit_name");m&&i(m)},300);return()=>clearTimeout(y)},[n]),w.useEffect(()=>{const b=y=>{h.current&&!h.current.contains(y.target)&&f.current&&!f.current.contains(y.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{l(b),s(b.code||""),t(b.id),d(!1),i([])},g=b=>{s(b.target.value),d(!0),b.target.value===""&&(t(null),l(null))},x=()=>{f.current&&f.current.select(),n.length>0&&d(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:f,type:"text",value:n,onChange:g,onFocus:x,placeholder:"Search by site submit name...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),u&&o.length>0&&c.jsx("div",{ref:h,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:o.map(b=>c.jsxs("div",{onClick:()=>p(b),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:b.code}),b.site_submit_name&&c.jsx("div",{className:"text-xs text-gray-500",children:b.site_submit_name})]},b.id))})]}),a&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View site submit:",a.id)},children:"View Site Submit Details "})})]})}function RM({value:e,onChange:t,propertyId:r,label:n="Property Unit"}){const[s,o]=w.useState(""),[i,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{e?Y.from("property_unit").select("*").eq("id",e).single().then(({data:m})=>{m&&(u(m),o(m.property_unit_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const v=setTimeout(async()=>{if(!r){a([]);return}let _=Y.from("property_unit").select("*").eq("property_id",r);s.length>0&&(_=_.ilike("property_unit_name",`%${s}%`));const{data:k}=await _.limit(20).order("property_unit_name");k&&a(k)},300);return()=>clearTimeout(v)},[s,r,d]),w.useEffect(()=>{const m=v=>{p.current&&!p.current.contains(v.target)&&h.current&&!h.current.contains(v.target)&&f(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=m=>{u(m),o(m.property_unit_name||""),t(m.id),f(!1)},x=m=>{o(m.target.value),f(!0),m.target.value===""&&(t(null),u(null))},b=()=>{r&&(h.current&&h.current.select(),f(!0))},y=m=>{const v=[];m.sqft&&v.push(`${Number(m.sqft).toLocaleString()} sqft`),m.rent&&v.push(`$${Number(m.rent).toLocaleString()}/mo`);const _=[];return m.inline===!0&&_.push("Inline"),m.end_cap===!0&&_.push("End Cap"),m.patio===!0&&_.push("Patio"),_.length>0&&v.push(_.join(", ")),v.join("  ")};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:h,type:"text",value:s,onChange:x,onFocus:b,placeholder:r?"Search or select unit...":"Select a property first",disabled:!r,className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),d&&i.length>0&&r&&c.jsx("div",{ref:p,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:i.map(m=>c.jsxs("div",{onClick:()=>g(m),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:m.property_unit_name}),c.jsx("div",{className:"text-xs text-gray-500",children:y(m)})]},m.id))}),d&&i.length===0&&r&&s.length>0&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2 text-sm text-gray-500",children:"No units found for this property"})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>{console.log("View property unit:",l.id)},children:"View Property Unit Details "})})]})}function OM({value:e,onChange:t,label:r="Property"}){const n=Oi(),[s,o]=w.useState(""),[i,a]=w.useState([]),[l,u]=w.useState(null),[d,f]=w.useState(!1),[h,p]=w.useState(!1),g=w.useRef(null),x=w.useRef(null);w.useEffect(()=>{e?Y.from("property").select("*").eq("id",e).single().then(({data:v})=>{v&&(u(v),o(v.property_name||""))}):(u(null),o(""))},[e]),w.useEffect(()=>{const _=setTimeout(async()=>{if(!s||s.trim().length===0){a([]);return}p(!0),console.log("Searching for:",s);const{data:k,error:S}=await Y.from("property").select("*").ilike("property_name",`%${s}%`).limit(10).order("property_name");a(k||[]),p(!1)},300);return()=>clearTimeout(_)},[s]),w.useEffect(()=>{const v=_=>{x.current&&!x.current.contains(_.target)&&g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const b=v=>{u(v),o(v.property_name||""),t(v.id),f(!1),a([])},y=v=>{const _=v.target.value;o(_),_.length>0&&f(!0),l&&_!==l.property_name&&(u(null),t(null)),_===""&&(t(null),u(null),a([]),f(!1))},m=()=>{g.current&&g.current.select(),i.length>0&&f(!0)};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{ref:g,type:"text",value:s,onChange:y,onFocus:m,placeholder:"Type to search properties...",className:"block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),d&&c.jsx("div",{ref:x,className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",children:h?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}):i.length>0?i.map(v=>{var _,k,S,N;return c.jsxs("div",{onClick:()=>b(v),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:[c.jsx("div",{className:"font-medium",children:v.property_name}),(((_=v.property_type)==null?void 0:_.label)||((k=v.property_stage)==null?void 0:k.label))&&c.jsx("div",{className:"text-xs text-gray-500",children:[(S=v.property_type)==null?void 0:S.label,(N=v.property_stage)==null?void 0:N.label].filter(Boolean).join("  ")})]},v.id)}):s.length>0?c.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No properties found"}):null})]}),l&&c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>{n(`/property/${l.id}`)},children:"View Property Details "})})]})}const IM={"Negotiating LOI":50,"At Lease/PSA":75,"Under Contract / Contingent":85,Booked:90,"Executed Payable":95,"Closed Paid":100,Lost:0};function MM({deal:e,onSave:t}){const[r,n]=w.useState(e),[s,o]=w.useState(!1),[i,a]=w.useState(null),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(""),[g,x]=w.useState(""),[b,y]=w.useState([]),[m,v]=w.useState({}),[_,k]=w.useState(!1),[S,N]=w.useState(!1),C=w.useRef(null),j=w.useRef(!0);w.useEffect(()=>{n(e),v({}),N(!1),C.current=e.stage_id??null,j.current=!0},[e]),w.useEffect(()=>{Y.from("deal_stage").select("id, label").then(({data:D})=>D&&u(D)),Y.from("deal_team").select("id, label").then(({data:D})=>D&&f(D)),e.updated_by_id&&Y.from("user").select("name").eq("id",e.updated_by_id).maybeSingle().then(({data:D})=>(D==null?void 0:D.name)&&p(D.name)),e.client_id?Y.from("client").select("client_name").eq("id",e.client_id).maybeSingle().then(({data:D})=>(D==null?void 0:D.client_name)&&x(D.client_name)):x("")},[e.client_id,e.property_id]),w.useEffect(()=>{const R=setTimeout(async()=>{const L=g.trim();if(!L)return y([]);const{data:W}=await Y.from("client").select("id, client_name").ilike("client_name",`%${L}%`).order("client_name",{ascending:!0}).limit(5);W&&y(W.map(Q=>({id:Q.id,label:Q.client_name})))},150);return()=>clearTimeout(R)},[g]);const E=(D,R)=>{D==="probability"&&N(!0);const L={...r,[D]:R};if(n(L),["deal_name","deal_value","commission_percent"].includes(D)){const W=F(D,R);v(Q=>{const Ne={...Q},Re=W[D];return Re?Ne[D]=Re:delete Ne[D],Ne})}if(D==="commission_percent"){const W=L.flat_fee_override??(L.deal_value??0)*((R??0)/100);(async()=>{const{data:Ne,error:Re}=await Y.from("deal").update({commission_percent:R,fee:W}).eq("id",r.id).select().single();Re?console.error("Error auto-saving commission:",Re):Ne&&t(Ne)})()}},M=r.flat_fee_override??(r.deal_value??0)*((r.commission_percent??0)/100),H=()=>{var D;return(D=l.find(R=>R.id===r.stage_id))==null?void 0:D.label};w.useEffect(()=>{if(!r.stage_id||l.length===0)return;const D=H();if(!D)return;const R=IM[D];if(j.current){if(j.current=!1,r.probability==null&&typeof R=="number"){n(Q=>({...Q,probability:R})),k(!0);const W=setTimeout(()=>k(!1),800);return()=>clearTimeout(W)}return}if(C.current!==r.stage_id&&typeof R=="number"){n(Q=>({...Q,probability:R})),N(!1),k(!0);const W=setTimeout(()=>k(!1),800);return C.current=r.stage_id,()=>clearTimeout(W)}C.current=r.stage_id},[r.stage_id,l]);const F=(D,R)=>{const L={};if(D==="deal_name"&&(!R||String(R).trim().length===0)&&(L.deal_name="Opportunity Name is required."),D==="deal_value"&&(R===null||R===""||isNaN(Number(R))?L.deal_value="Enter a number.":Number(R)<0&&(L.deal_value="Must be  0.")),D==="commission_percent"){const W=Number(R);R===null||R===""||isNaN(W)?L.commission_percent="Enter a percent.":(W<0||W>100)&&(L.commission_percent="0100 only.")}return L},B=D=>{const R={};return Object.assign(R,F("deal_name",D.deal_name)),Object.assign(R,F("deal_value",D.deal_value)),Object.assign(R,F("commission_percent",D.commission_percent)),R},T=async()=>{const D=B(r);if(v(D),Object.keys(D).length>0)return;o(!0);const R={deal_name:r.deal_name,client_id:r.client_id,property_id:r.property_id,property_unit_id:r.property_unit_id,site_submit_id:r.site_submit_id,deal_value:r.deal_value,commission_percent:r.commission_percent,flat_fee_override:r.flat_fee_override,fee:M,target_close_date:r.target_close_date,loi_signed_date:r.loi_signed_date,closed_date:r.closed_date,probability:r.probability,deal_team_id:r.deal_team_id,stage_id:r.stage_id,updated_at:new Date().toISOString()},{data:L,error:W}=await Y.from("deal").update(R).eq("id",r.id).select().single();o(!1),W?alert("Error saving: "+W.message):L&&t(L)},O=H(),U=O==="Closed Paid";return c.jsxs("div",{className:"relative",children:[c.jsx(_a,{title:"Deal Context",help:"Name the opportunity, choose the client, property, and deal team.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(LM,{label:"Opportunity Name",value:r.deal_name,onChange:D=>E("deal_name",D)}),c.jsx(AM,{label:"Client",search:g,setSearch:x,suggestions:b,onSelect:(D,R)=>{E("client_id",D),x(R),y([])}}),c.jsx(OM,{value:r.property_id,onChange:D=>E("property_id",D),label:"Property"}),c.jsx(RM,{value:r.property_unit_id,onChange:D=>E("property_unit_id",D),propertyId:r.property_id,label:"Property Unit"}),c.jsx(TM,{value:r.site_submit_id,onChange:D=>E("site_submit_id",D),label:"Site Submit"}),c.jsx(qg,{label:"Deal Team",value:r.deal_team_id,onChange:D=>E("deal_team_id",D),options:d}),m.deal_name&&c.jsx(Ru,{msg:m.deal_name,className:"col-span-2"})]})}),c.jsx(_a,{title:"Financials",help:"Set value and commission. Fee auto-calculates unless a flat fee is set.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(pa,{label:"Deal Value",value:r.deal_value,onChange:D=>E("deal_value",D===""?null:parseFloat(D)),format:D=>_u(D,2),editingField:i,setEditingField:a,fieldKey:"deal_value"}),m.deal_value&&c.jsx(Ru,{msg:m.deal_value}),c.jsx(pa,{label:"Commission %",value:r.commission_percent,onChange:D=>E("commission_percent",D===""?null:parseFloat(D)),format:D=>qP(D,2),editingField:i,setEditingField:a,fieldKey:"commission_percent"}),m.commission_percent&&c.jsx(Ru,{msg:m.commission_percent}),c.jsx(pa,{label:"Flat Fee Override",value:r.flat_fee_override,onChange:D=>E("flat_fee_override",D===""?null:parseFloat(D)),format:D=>D===null?"":_u(D,2),editingField:i,setEditingField:a,fieldKey:"flat_fee_override"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium",children:"Calculated Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:isNaN(M)?"":_u(M,2)})]})]})}),c.jsx(_a,{title:"Stage & Probability",help:"Choosing a stage will set a default probability. You can override it.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(qg,{label:"Stage",value:r.stage_id,onChange:D=>E("stage_id",D),options:l}),c.jsx("div",{className:"rounded transition-colors duration-700 "+(_?"bg-yellow-50":"bg-transparent"),children:c.jsx(pa,{label:"Probability %",value:r.probability,onChange:D=>E("probability",D===""?null:parseFloat(D)),format:D=>KP(D),editingField:i,setEditingField:a,fieldKey:"probability"})})]})}),c.jsx(_a,{title:"Timeline",help:"Target and actual dates. Closed Date enabled only at Closed Paid.",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Ou,{label:"Target Close Date",value:r.target_close_date,onChange:D=>E("target_close_date",D)}),c.jsx(Ou,{label:"LOI Signed Date",value:r.loi_signed_date,onChange:D=>E("loi_signed_date",D)}),c.jsx(Ou,{label:"Closed Date",value:r.closed_date,onChange:D=>E("closed_date",D),disabled:!U,tooltip:U?void 0:"Set Stage to 'Closed Paid' to enable"})]})}),c.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t mt-6 p-3 flex items-center justify-between shadow-sm",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:r.updated_at?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Last Updated by"}),c.jsx("span",{className:"font-medium",children:h||"Unknown"}),c.jsxs("span",{children:[new Date(r.updated_at).toLocaleDateString()," ",new Date(r.updated_at).toLocaleTimeString()]})]}):c.jsx("span",{children:"Not yet saved"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xs text-gray-500",children:O?`Stage: ${O}`:"No stage selected"}),c.jsx("button",{onClick:T,disabled:s||Object.keys(m).length>0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-60",children:s?"Saving...":"Save Deal"})]})]})]})}function _a({title:e,help:t,children:r}){return c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]})}function Ru({msg:e,className:t=""}){return c.jsx("p",{className:"text-xs text-red-600 mt-1 "+t,children:e})}function LM({label:e,value:t,onChange:r,type:n="text",className:s=""}){return c.jsxs("div",{className:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{type:n,value:t??"",onChange:o=>r(o.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})}function Ou({label:e,value:t,onChange:r,disabled:n,tooltip:s}){const o=t?Nb(t):null;return c.jsxs("div",{title:s,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx(EM,{selected:o,onChange:i=>r(i?Zd(i,"yyyy-MM-dd"):null),className:`mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm ${n?"bg-gray-100 cursor-not-allowed":""}`,dateFormat:"MM/dd/yyyy",isClearable:!0,disabled:n})]})}function qg({label:e,value:t,onChange:r,options:n}){return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsxs("select",{value:t??"",onChange:s=>r(s.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"",children:"-- Select --"}),n.map(s=>c.jsx("option",{value:s.id,children:s.label},s.id))]})]})}function AM({label:e,search:t,setSearch:r,suggestions:n,onSelect:s}){const o=w.useRef(null),i=()=>{o.current&&o.current.select()};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{ref:o,type:"text",value:t,onChange:a=>r(a.target.value),onFocus:i,placeholder:`Search ${e.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),n.filter(a=>a.label!==t).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:n.filter(a=>a.label!==t).map(a=>c.jsx("li",{onClick:()=>s(a.id,a.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:a.label},a.id))})]})}const qb=w.createContext(null),Kb=()=>{const e=w.useContext(qb);if(!e)throw new Error("usePanelManager must be used within a FloatingPanelManager");return e},FM=({children:e})=>{const[t,r]=w.useState(null),n=i=>{r(i)},s=()=>{r(null)},o=i=>{t===i?s():n(i)};return c.jsx(qb.Provider,{value:{activePanel:t,openPanel:n,closePanel:s,togglePanel:o},children:e})},Po=({type:e,icon:t,count:r,label:n,position:s})=>{const{activePanel:o,togglePanel:i}=Kb(),a=o===e;return c.jsxs("div",{className:"relative group",children:[c.jsxs("button",{onClick:()=>i(e),className:`
          relative flex items-center justify-center w-10 h-10 rounded-full shadow-md
          transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg
          backdrop-blur-sm border
          ${a?"bg-blue-600 text-white border-blue-500 shadow-blue-200":"bg-white/90 text-gray-600 hover:bg-white border-gray-200 hover:text-gray-800"}
        `,title:n,children:[c.jsx("span",{className:"text-sm",children:t}),r!==void 0&&r>0&&c.jsx("span",{className:`
            absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full
            border-2 border-white
            ${a?"bg-white text-blue-600":"bg-red-500 text-white"}
          `,children:r>99?"99+":r})]}),c.jsxs("div",{className:"absolute right-full mr-3 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[n,r!==void 0&&c.jsxs("span",{className:"ml-1 text-gray-300",children:["(",r,")"]}),c.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]})},$M=({children:e,contactCount:t=0,notesCount:r=0,filesCount:n=0,activityCount:s=0,paymentsCount:o=0})=>c.jsxs("div",{className:"relative",children:[e,c.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 space-y-3",style:{zIndex:50},children:[c.jsx(Po,{type:"contacts",icon:"",count:t,label:"Contact Roles",position:0}),c.jsx(Po,{type:"notes",icon:"",count:r,label:"Notes",position:1}),c.jsx(Po,{type:"files",icon:"",count:n,label:"Files",position:2}),c.jsx(Po,{type:"activity",icon:"",count:s,label:"Activity",position:3}),c.jsx(Po,{type:"payments",icon:"",count:o,label:"Payments",position:4})]})]}),Qb=e=>{const[t,r]=w.useState([]),[n,s]=w.useState(!0),[o,i]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!e){r([]),s(!1);return}try{s(!0),i(null);const{data:l,error:u}=await Y.from("deal_contact").select("id, contact_id, role_id, primary_contact").eq("deal_id",e);if(u)throw u;if(!l||l.length===0){r([]),s(!1);return}const d=[...new Set(l.map(v=>v.contact_id).filter(Boolean))],f=[...new Set(l.map(v=>v.role_id).filter(Boolean))],{data:h,error:p}=await Y.from("contact").select("id, first_name, last_name, email, phone, mobile_phone").in("id",d);if(p)throw p;const{data:g,error:x}=await Y.from("contact_role").select("role_id, label").in("role_id",f);if(x)throw x;const b=new Map;h==null||h.forEach(v=>{b.set(v.id,v)});const y=new Map;g==null||g.forEach(v=>{y.set(v.role_id,v)});const m=l.map(v=>{const _=b.get(v.contact_id),k=y.get(v.role_id);let S="Unknown Contact";if(_){const N=_.first_name||"",C=_.last_name||"";N&&C?S=`${N} ${C}`:N?S=N:C&&(S=C)}return{id:v.id,contact_name:S,contact_email:(_==null?void 0:_.email)||null,contact_phone:(_==null?void 0:_.phone)||null,contact_mobile:(_==null?void 0:_.mobile_phone)||null,role_label:(k==null?void 0:k.label)||"No Role",primary_contact:v.primary_contact||!1,contact_id:v.contact_id}});m.sort((v,_)=>v.primary_contact&&!_.primary_contact?-1:!v.primary_contact&&_.primary_contact?1:v.role_label.localeCompare(_.role_label)),r(m)}catch(l){console.error("Error fetching deal contacts:",l),i("Failed to load contacts")}finally{s(!1)}})()},[e]),{contacts:t,loading:n,error:o,refetch:()=>{e&&s(!0)}}},BM=({dealId:e})=>{const{activePanel:t,closePanel:r}=Kb(),{contacts:n,loading:s,error:o}=Qb(e),i=t==="contacts",a=u=>{const d=u.split(" ");return d.length>=2?`${d[0].charAt(0)}${d[d.length-1].charAt(0)}`.toUpperCase():u.charAt(0).toUpperCase()||"?"},l=(u,d)=>{u&&window.open(`tel:${u}`,"_self")};return i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/10 transition-all duration-300 z-40",onClick:r}),c.jsxs("div",{className:`
        fixed right-0 top-0 h-full w-80 bg-white shadow-2xl border-l border-gray-200
        transform transition-all duration-300 ease-out z-50
        ${i?"translate-x-0":"translate-x-full"}
        flex flex-col
      `,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white shrink-0",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),c.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," contact",n.length!==1?"s":""," on this deal"]})]})]}),c.jsx("button",{onClick:r,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:s?c.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((u,d)=>c.jsx("div",{className:"animate-pulse",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):o?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx("span",{className:"text-red-500 text-lg",children:""})}),c.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Contacts"}),c.jsx("p",{className:"text-sm text-gray-500",children:o})]}):n.length===0?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-300 text-2xl",children:""})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Contacts Yet"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add contacts to this deal to see them here"}),c.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Contact"})]}):c.jsx("div",{className:"divide-y divide-gray-50",children:n.map(u=>c.jsx("div",{className:"p-4 hover:bg-gray-25 transition-colors",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white font-medium text-sm",children:a(u.contact_name)})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("button",{className:"text-sm font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate",onClick:()=>{console.log("View contact:",u.contact_id)},children:u.contact_name}),u.primary_contact&&c.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:"Primary"})]}),c.jsx("p",{className:"text-xs font-medium text-blue-600 mb-2",children:u.role_label}),c.jsxs("div",{className:"space-y-1",children:[u.contact_email&&c.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[" ",u.contact_email]}),u.contact_phone&&c.jsxs("button",{onClick:()=>l(u.contact_phone,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer",children:[" ",u.contact_phone]}),u.contact_mobile&&c.jsxs("button",{onClick:()=>l(u.contact_mobile,u.contact_name),className:"text-xs text-gray-600 hover:text-blue-600 transition-colors cursor-pointer block",children:[" ",u.contact_mobile]})]})]})]})},u.id))})}),c.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 shrink-0",children:c.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[c.jsx("span",{className:"mr-2",children:"+"}),"Add Contact Role"]})})]})]}):null},_r=({label:e,value:t,onChange:r,disabled:n=!1})=>{const[s,o]=w.useState(!1),[i,a]=w.useState(""),l=t?`${t.toFixed(1)}%`:"0.0%",u=()=>{n||(o(!0),a((t==null?void 0:t.toString())||""))},d=()=>{const p=parseFloat(i);r(isNaN(p)?null:p),o(!1)},f=()=>{o(!1),a("")},h=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),d()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),f())};return s?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"number",step:"0.1",value:i,onChange:p=>a(p.target.value),onBlur:d,onKeyDown:h,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",autoFocus:!0})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:u,className:`mt-1 block w-full rounded border-gray-300 shadow-sm px-3 py-2 transition-colors border text-sm ${n?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200"}`,title:n?"Not editable":"Click to edit",children:l})]})},UM=({value:e,onChange:t,label:r="Referral Payee"})=>{const[n,s]=w.useState(""),[o,i]=w.useState([]),a=w.useRef(null);w.useEffect(()=>{(async()=>{if(e){const{data:h}=await Y.from("client").select("client_name").eq("id",e).single();h!=null&&h.client_name&&s(h.client_name)}else s("")})()},[e]),w.useEffect(()=>{const h=setTimeout(async()=>{const p=n.trim();if(!p)return i([]);const{data:g}=await Y.from("client").select("id, client_name").ilike("client_name",`%${p}%`).order("client_name",{ascending:!0}).limit(5);g&&i(g.map(x=>({id:x.id,label:x.client_name})))},150);return()=>clearTimeout(h)},[n]);const l=()=>{a.current&&a.current.select()},u=(f,h)=>{t(f),s(h),i([])},d=f=>{const h=f.target.value;s(h),h===""&&t(null)};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),c.jsx("input",{ref:a,type:"text",value:n,onChange:d,onFocus:l,placeholder:`Search ${r.toLowerCase()}...`,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),o.filter(f=>f.label!==n).length>0&&c.jsx("ul",{className:"bg-white border border-gray-300 rounded mt-1 max-h-48 overflow-auto",children:o.filter(f=>f.label!==n).map(f=>c.jsx("li",{onClick:()=>u(f.id,f.label),className:"p-2 hover:bg-gray-100 cursor-pointer text-sm",children:f.label},f.id))})]})},Gh=(e,t=[])=>w.useMemo(()=>{const r=(e==null?void 0:e.fee)||0,n=(e==null?void 0:e.referral_fee_usd)||0,s=(e==null?void 0:e.house_usd)||0,o=r-n-s,i=(e==null?void 0:e.origination_percent)||0,a=(e==null?void 0:e.site_percent)||0,l=(e==null?void 0:e.deal_percent)||0,u=i/100*o,d=a/100*o,f=l/100*o,h=u+d+f,p=t.map(m=>{const v=(m==null?void 0:m.split_origination_percent)||0,_=(m==null?void 0:m.split_site_percent)||0,k=(m==null?void 0:m.split_deal_percent)||0,S=v/100*u,N=_/100*d,C=k/100*f,j=S+N+C;return{...m,calculatedOriginationUSD:S,calculatedSiteUSD:N,calculatedDealUSD:C,calculatedTotalUSD:j}}),g=p.reduce((m,v)=>m+(v.split_origination_percent||0),0),x=p.reduce((m,v)=>m+(v.split_site_percent||0),0),b=p.reduce((m,v)=>m+(v.split_deal_percent||0),0),y=p.reduce((m,v)=>m+v.calculatedTotalUSD,0);return{baseAmounts:{gci:r,referralFeeUsd:n,houseUsd:s,agci:o,originationPercent:i,sitePercent:a,dealPercent:l,originationUSD:u,siteUSD:d,dealUSD:f,totalDealUSD:h},brokerSplits:p,totals:{originationPercent:g,sitePercent:x,dealPercent:b,brokerUSD:y},validation:{isOriginationValid:g<=100,isSiteValid:x<=100,isDealValid:b<=100,areAllValid:g<=100&&x<=100&&b<=100}}},[e,t]),WM=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),HM=({deal:e,onFieldUpdate:t})=>{const{baseAmounts:r}=Gh(e),n=o=>o==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),s=o=>o==null?"0.0%":`${o.toFixed(1)}%`;return c.jsx(WM,{title:"Commission Details",help:"Set commission percentages and amounts. Click any percentage to edit.",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Fee"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.fee)})]}),c.jsx(_r,{label:"Commission Rate %",value:e.commission_percent,onChange:o=>t("commission_percent",o)}),c.jsx(_r,{label:"Referral Fee %",value:e.referral_fee_percent,onChange:o=>t("referral_fee_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referral Fee $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.referral_fee_usd)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number of Payments"}),c.jsx("input",{type:"number",step:"1",min:"1",value:e.number_of_payments||1,onChange:o=>t("number_of_payments",parseInt(o.target.value)||1),className:"mt-1 block w-full rounded border-gray-300 shadow-sm cursor-pointer hover:bg-blue-50 px-3 py-2 transition-colors border border-transparent hover:border-blue-200 text-sm"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(UM,{value:e.referral_payee_client_id,onChange:o=>t("referral_payee_client_id",o),label:"Referral Payee"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.gci)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AGCI"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.agci)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_r,{label:"House %",value:e.house_percent,onChange:o=>t("house_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"House $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(e.house_usd)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_r,{label:"Origination %",value:e.origination_percent,onChange:o=>t("origination_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origination $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.originationUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_r,{label:"Site %",value:e.site_percent,onChange:o=>t("site_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Site $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.siteUSD)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_r,{label:"Deal %",value:e.deal_percent,onChange:o=>t("deal_percent",o)}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal $"}),c.jsx("div",{className:"mt-1 p-2 bg-gray-100 rounded text-sm",children:n(r.dealUSD)})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-2",children:"Broker Split Summary (Origination + Site + Deal)"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Origination:"})," ",s(e.origination_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Site:"})," ",s(e.site_percent)]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-blue-700",children:"Deal:"})," ",s(e.deal_percent)]}),c.jsxs("div",{className:"font-semibold",children:[c.jsx("span",{className:"text-blue-700",children:"Total:"})," ",s((e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0))]})]}),c.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"House % is separate and not included in the 100% split validation."})]})]})})},Jb=({isOpen:e,onClose:t,onConfirm:r,title:n,itemName:s,message:o})=>e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",c.jsx("strong",{children:s}),"?"]}),o&&c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:o})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})}):null,gr=e=>e==null||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Iu=({value:e,onChange:t,label:r})=>{const[n,s]=w.useState(!1),[o,i]=w.useState(""),a=e?`${e.toFixed(1)}%`:"0.0%",l=()=>{s(!0),i((e==null?void 0:e.toString())||"0")},u=()=>{const h=parseFloat(o);t(isNaN(h)?null:h),s(!1)},d=()=>{s(!1),i("")},f=h=>{h.key==="Enter"?u():h.key==="Escape"&&d()};return n?c.jsx("input",{type:"number",step:"0.1",value:o,onChange:h=>i(h.target.value),onBlur:u,onKeyDown:f,className:"w-16 px-1 py-0.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}):c.jsx("span",{onClick:l,className:"cursor-pointer hover:bg-blue-50 px-1 py-0.5 rounded text-sm",title:`Click to edit ${r||"percentage"}`,children:a})},zM=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,a]=w.useState(!0),[l,u]=w.useState(null),[d,f]=w.useState({isOpen:!1,splitId:"",brokerName:""}),{baseAmounts:h}=Gh(e,r),p=k=>{const S=s.find(N=>N.id===k);return S?S.name:"Unknown Broker"};w.useEffect(()=>{(async()=>{if(e.id)try{a(!0);const{data:S,error:N}=await Y.from("commission_split").select("*").eq("deal_id",e.id).order("created_at");if(N)throw N;const{data:C,error:j}=await Y.from("broker").select("*").order("name");if(j)throw j;n(S||[]),o(C||[])}catch(S){console.error("Error fetching commission data:",S),u("Failed to load commission splits")}finally{a(!1)}})()},[e.id]);const g=async(k,S,N)=>{console.log(" updateCommissionSplit called:",{splitId:k,field:S,value:N});try{const C=r.find(M=>M.id===k);if(!C)return;const j={...C};S==="split_origination_percent"?(j.split_origination_percent=N||0,j.split_origination_usd=(N||0)/100*h.originationUSD):S==="split_site_percent"?(j.split_site_percent=N||0,j.split_site_usd=(N||0)/100*h.siteUSD):S==="split_deal_percent"&&(j.split_deal_percent=N||0,j.split_deal_usd=(N||0)/100*h.dealUSD),j.split_broker_total=(j.split_origination_usd||0)+(j.split_site_usd||0)+(j.split_deal_usd||0);const{error:E}=await Y.from("commission_split").update({split_origination_percent:j.split_origination_percent,split_origination_usd:j.split_origination_usd,split_site_percent:j.split_site_percent,split_site_usd:j.split_site_usd,split_deal_percent:j.split_deal_percent,split_deal_usd:j.split_deal_usd,split_broker_total:j.split_broker_total}).eq("id",k);if(E)throw E;n(M=>M.map(H=>H.id===k?j:H)),console.log(" Commission split updated successfully")}catch(C){console.error("Error updating commission split:",C),u("Failed to update commission split")}},x=async k=>{if(e.id)try{if(!s.find(E=>E.id===k))return;const N={deal_id:e.id,broker_id:k,split_origination_percent:0,split_origination_usd:0,split_site_percent:0,split_site_usd:0,split_deal_percent:0,split_deal_usd:0,split_broker_total:0},{data:C,error:j}=await Y.from("commission_split").insert(N).select("*").single();if(j)throw j;n([...r,C])}catch(S){console.error("Error adding broker split:",S),u("Failed to add broker split")}},b=async k=>{try{const{error:S}=await Y.from("commission_split").delete().eq("id",k);if(S){if(S.code==="23503"&&S.message.includes("payment_split")){u("Cannot delete this broker split because it has related payments. You must delete the payments first, or contact support to safely remove this split.");return}throw S}n(N=>N.filter(C=>C.id!==k)),u(null),f({isOpen:!1,splitId:"",brokerName:""})}catch(S){console.error("Error deleting broker split:",S),u("Failed to delete broker split: "+(S instanceof Error?S.message:"Unknown error")),f({isOpen:!1,splitId:"",brokerName:""})}},y=(k,S)=>{f({isOpen:!0,splitId:k,brokerName:S})},m=()=>{b(d.splitId)},v=()=>{f({isOpen:!1,splitId:"",brokerName:""})},_=s.filter(k=>!r.some(S=>S.broker_id===k.id));return i?c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Broker Commission Splits"}),c.jsx("div",{className:"text-gray-500",children:"Loading..."})]}):c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Broker Commission Splits"}),_.length>0&&c.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:k=>{k.target.value&&(x(k.target.value),k.target.value="")},defaultValue:"",children:[c.jsx("option",{value:"",children:"+ Add Broker"}),_.map(k=>c.jsx("option",{value:k.id,children:k.name},k.id))]})]}),l&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:c.jsx("p",{className:"text-red-600 text-sm",children:l})}),r.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"No broker splits configured for this deal."}),_.length>0&&c.jsx("p",{className:"text-sm mt-2",children:"Use the dropdown above to add brokers."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-left py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Broker"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origination $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Site $"}),c.jsx("th",{className:"text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal %"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deal $"}),c.jsx("th",{className:"text-right py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total $"}),c.jsx("th",{className:"w-16 text-center py-3 px-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.map(k=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsx("td",{className:"py-3 px-3 w-48 whitespace-nowrap",children:c.jsx("div",{className:"text-xs text-gray-900 font-medium",children:p(k.broker_id)})}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Iu,{value:k.split_origination_percent,onChange:S=>g(k.id,"split_origination_percent",S),label:"Origination %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_origination_percent||0)/100*h.originationUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Iu,{value:k.split_site_percent,onChange:S=>g(k.id,"split_site_percent",S),label:"Site %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_site_percent||0)/100*h.siteUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx(Iu,{value:k.split_deal_percent,onChange:S=>g(k.id,"split_deal_percent",S),label:"Deal %"})}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-gray-900",children:gr((k.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-medium text-gray-900",children:gr((k.split_origination_percent||0)/100*h.originationUSD+(k.split_site_percent||0)/100*h.siteUSD+(k.split_deal_percent||0)/100*h.dealUSD)}),c.jsx("td",{className:"py-3 px-3 text-center",children:c.jsx("button",{onClick:()=>y(k.id,p(k.broker_id)),className:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Delete broker split",children:""})})]},k.id))}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"border-t-2 border-gray-300 font-semibold bg-gray-50",children:[c.jsx("td",{className:"py-3 px-3 text-sm text-gray-900",children:"TOTALS"}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((N,C)=>N+(Number(C.split_origination_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_origination_percent||0)/100*h.originationUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((N,C)=>N+(Number(C.split_site_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_site_percent||0)/100*h.siteUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-center",children:(()=>{const k=r.reduce((N,C)=>N+(Number(C.split_deal_percent)||0),0),S=Math.abs(k-100)<.1;return c.jsxs("span",{className:`text-sm ${S?"text-blue-600":"text-red-600"}`,children:[k.toFixed(1),"%"]})})()}),c.jsx("td",{className:"py-3 px-3 text-right text-sm text-blue-600",children:gr(r.reduce((k,S)=>k+(S.split_deal_percent||0)/100*h.dealUSD,0))}),c.jsx("td",{className:"py-3 px-3 text-right text-sm font-semibold text-blue-600",children:gr(r.reduce((k,S)=>{const N=(S.split_origination_percent||0)/100*h.originationUSD,C=(S.split_site_percent||0)/100*h.siteUSD,j=(S.split_deal_percent||0)/100*h.dealUSD;return k+N+C+j},0))}),c.jsx("td",{className:"py-3 px-3"})]})})]})}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[c.jsxs("p",{children:[" Split percentages are applied to AGCI: ",gr(Number(e.agci||0))]}),c.jsx("p",{children:" These splits serve as templates for payment generation"}),c.jsx("p",{children:" Click on percentage values to edit them directly"})]}),c.jsx(Jb,{isOpen:d.isOpen,onClose:v,onConfirm:m,title:"Delete Broker Split",itemName:d.brokerName,message:"This action cannot be undone. If this broker has related payments, the deletion will be blocked."})]})},Kg=({title:e,help:t,children:r})=>c.jsxs("section",{className:"bg-white rounded-md border p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:e}),t&&c.jsx("span",{className:"text-gray-500 text-xs border rounded-full w-4 h-4 inline-flex items-center justify-center",title:t,"aria-label":t,children:"i"})]}),r]}),YM=({dealId:e,deal:t,onDealUpdate:r})=>{const[n,s]=w.useState(t),[o,i]=w.useState([]),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState(!0),[p,g]=w.useState(null),[x,b]=w.useState(!1);w.useEffect(()=>{s(t)},[t]),w.useEffect(()=>{y()},[e]);const y=async()=>{try{h(!0);const{data:j,error:E}=await Y.from("commission_split").select("*").eq("deal_id",e);if(E)throw E;const{data:M,error:H}=await Y.from("broker").select("*");if(H)throw H;l(M.filter(O=>O.active));const F=j.map(O=>{const U=M.find(D=>D.id===O.broker_id);return{...O,broker_name:U?U.name:"Unknown Broker"}});i(F);const{data:B,error:T}=await Y.from("payment").select("*").eq("deal_id",e);if(T)throw T;console.log(" CommissionTab fetchCommissionData - payments found:",{dealId:e,paymentsCount:(B==null?void 0:B.length)||0,payments:B==null?void 0:B.map(O=>({id:O.id,sequence:O.payment_sequence,amount:O.payment_amount,estimated_date:O.payment_date_estimated,actual_date:O.payment_date_actual}))}),d(B)}catch(j){g(j instanceof Error?j.message:"An error occurred")}finally{h(!1)}},m=j=>{const E=j.deal_value||0,M=j.commission_percent||0,H=j.referral_fee_percent||0,F=j.flat_fee_override??E*(M/100),B=F*(H/100),T=F-B,O=T*((j.house_percent||0)/100),U=T-O,D=U*((j.origination_percent||0)/100),R=U*((j.site_percent||0)/100),L=U*((j.deal_percent||0)/100);return{...j,fee:Math.round(F*100)/100,gci:Math.round(T*100)/100,referral_fee_usd:Math.round(B*100)/100,agci:Math.round(U*100)/100,house_usd:Math.round(O*100)/100,origination_usd:Math.round(D*100)/100,site_usd:Math.round(R*100)/100,deal_usd:Math.round(L*100)/100}},v=async(j,E)=>{if(!n)return;const M={...n,[j]:E},H=["commission_percent","referral_fee_percent","house_percent","origination_percent","site_percent","deal_percent"];let F=M;H.includes(j)&&(F=m(M));const B={commission_percent:F.commission_percent,referral_fee_percent:F.referral_fee_percent,house_percent:F.house_percent,origination_percent:F.origination_percent,site_percent:F.site_percent,deal_percent:F.deal_percent,number_of_payments:F.number_of_payments,fee:F.fee,updated_at:new Date().toISOString()};F.gci!==void 0&&(B.gci=F.gci),F.referral_fee_usd!==void 0&&(B.referral_fee_usd=F.referral_fee_usd),F.agci!==void 0&&(B.agci=F.agci),F.house_usd!==void 0&&(B.house_usd=F.house_usd),F.origination_usd!==void 0&&(B.origination_usd=F.origination_usd),F.site_usd!==void 0&&(B.site_usd=F.site_usd),F.deal_usd!==void 0&&(B.deal_usd=F.deal_usd),j==="referral_payee_client_id"&&F.referral_payee_client_id!==void 0&&(B.referral_payee_client_id=F.referral_payee_client_id);try{console.log("Updating field:",j,"with value:",E),console.log("Update payload:",B);const{data:T,error:O}=await Y.from("deal").update(B).eq("id",e).select().single();if(O)throw console.error("Supabase error:",O),O;console.log("Update successful:",T),s(T),r(T)}catch(T){console.error("Error saving:",T),alert(`Error saving: ${T instanceof Error?T.message:"Failed to save"}`)}},_=async()=>{try{b(!0);const{data:j,error:E}=await Y.rpc("generate_payments_for_deal",{deal_uuid:e});if(E)throw E;await y()}catch(j){alert(`Error: ${j instanceof Error?j.message:"Failed to generate payments"}`)}finally{b(!1)}},k=j=>j==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j),S=j=>{const E=[],M=Number(j.origination_percent)||0,H=Number(j.site_percent)||0,F=Number(j.deal_percent)||0,B=Number(j.commission_percent)||0,T=Number(j.referral_fee_percent)||0,O=M+H+F;return O>100&&E.push("Broker split percentages total "+O.toFixed(1)+"% (over 100%)"),B>50&&E.push("Commission rate "+B.toFixed(1)+"% seems high"),T>100&&E.push("Referral fee "+T.toFixed(1)+"% cannot exceed 100%"),E};if(f)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-sm text-gray-600",children:"Loading commission data..."})});if(p)return c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Loading Commission Data"}),c.jsx("p",{className:"text-sm text-red-600",children:p}),c.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Try Again"})]});if(!n)return c.jsx("div",{className:"text-center text-gray-600 py-8",children:c.jsx("p",{className:"text-sm",children:"Deal not found"})});const N=u.length>0,C=S(n);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-blue-800 mb-1",children:"Deal Fee"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(n.fee)})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-purple-800 mb-1",children:"Number of Payments"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:n.number_of_payments})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-xs font-medium text-orange-800 mb-1",children:"Commission Rate"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.commission_percent?`${n.commission_percent.toFixed(1)}%`:"0%"})]})]}),C.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:C.map((j,E)=>c.jsx("li",{children:j},E))})]})]})}),N&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payments Already Generated"}),c.jsxs("p",{className:"mt-1 text-xs text-yellow-700",children:["This deal already has ",u.length," payment",u.length!==1?"s":""," generated. To regenerate payments, you would need to delete the existing ones first."]})]})]})}),o.length===0&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"No Commission Splits Found"}),c.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Commission splits are imported from Salesforce. If this deal should have commission data, check that it exists in Salesforce and run the migration again."})]})]})}),c.jsx(HM,{deal:n,onFieldUpdate:v}),c.jsx(zM,{deal:n,onDealUpdate:r}),c.jsxs(Kg,{title:"Payment Generation",help:"Generate payments based on commission splits",children:[c.jsx("div",{className:"flex justify-end mb-3",children:c.jsx("button",{onClick:_,disabled:o.length===0||N||x,className:`px-4 py-2 rounded font-medium text-sm ${o.length>0&&!N&&!x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:x?"Generating...":"Generate Payments"})}),o.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-4",children:c.jsx("p",{className:"text-sm",children:"No commission splits available for payment generation."})})]}),o.length>0&&c.jsx(Kg,{title:"Quick Summary",help:"Overview of commission allocation",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-green-800 mb-1",children:"Total Commission Splits"}),c.jsx("p",{className:"text-lg font-bold text-green-900",children:o.length})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Total Broker Amount"}),c.jsx("p",{className:"text-lg font-bold text-blue-900",children:k(o.reduce((j,E)=>j+(E.split_broker_total||0),0))})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-purple-800 mb-1",children:"Payments Status"}),c.jsx("p",{className:"text-lg font-bold text-purple-900",children:N?`${u.length} Generated`:"Not Generated"})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[c.jsx("h4",{className:"text-xs font-medium text-orange-800 mb-1",children:"Per Payment Amount"}),c.jsx("p",{className:"text-lg font-bold text-orange-900",children:n.number_of_payments&&n.fee?k(n.fee/n.number_of_payments):"$0.00"})]})]})})]})},Xb=(e,t=[],r=[])=>{const n=w.useMemo(()=>{const l=e.fee||0,u=e.number_of_payments||1,d=u>0?l/u:0,f=d*u;return{calculatedPaymentAmount:d,totalCalculatedPayments:f}},[e.fee,e.number_of_payments]),s=w.useMemo(()=>{const l=n.calculatedPaymentAmount,u=e.referral_fee_usd||0,d=e.number_of_payments||1,f=u/d,p=(e.house_usd||0)/d,g=l-f-p,x=e.origination_percent||0,b=e.site_percent||0,y=e.deal_percent||0,m=x/100*g,v=b/100*g,_=y/100*g;return{gci:l,referral_fee_usd:f,house_usd:p,agci:g,origination_percent:x,origination_usd:m,site_percent:b,site_usd:v,deal_percent:y,deal_usd:_}},[n.calculatedPaymentAmount,e.fee,e.referral_fee_usd,e.house_usd,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),o=w.useMemo(()=>l=>l.map(u=>{const d=(u.split_origination_percent||0)/100*s.origination_usd,f=(u.split_site_percent||0)/100*s.site_usd,h=(u.split_deal_percent||0)/100*s.deal_usd,p=d+f+h;return{broker_id:u.broker_id||"",origination_amount:d,site_amount:f,deal_amount:h,total_amount:p}}),[s]),i=w.useMemo(()=>{const l=[];let u=!0;return(!e.fee||e.fee<=0)&&(l.push("Commission fee is not set"),u=!1),(!e.number_of_payments||e.number_of_payments<1)&&(l.push("Number of payments must be at least 1"),u=!1),e.number_of_payments&&e.number_of_payments>10&&(l.push("Number of payments cannot exceed 10"),u=!1),(e.origination_percent||0)+(e.site_percent||0)+(e.deal_percent||0)===0&&l.push("Commission split percentages are not configured"),{canGeneratePayments:u,validationMessages:l}},[e.fee,e.number_of_payments,e.origination_percent,e.site_percent,e.deal_percent]),a=w.useMemo(()=>t.map(l=>({payment_id:l.payment_id,calculated_amount:n.calculatedPaymentAmount,database_amount:l.payment_amount||0,needs_update:Math.abs((l.payment_amount||0)-n.calculatedPaymentAmount)>.01})),[t,n.calculatedPaymentAmount]);return{calculatedPaymentAmount:n.calculatedPaymentAmount,totalCalculatedPayments:n.totalCalculatedPayments,paymentCommissionBreakdown:s,calculateBrokerSplitsForPayment:o,canGeneratePayments:i.canGeneratePayments,validationMessages:i.validationMessages,paymentComparisons:a}},VM=({deal:e,hasPayments:t,existingPayments:r=[],commissionSplits:n=[],onGeneratePayments:s,onUpdatePaymentAmounts:o,generatingPayments:i})=>{const{calculatedPaymentAmount:a,totalCalculatedPayments:l,paymentCommissionBreakdown:u,canGeneratePayments:d,validationMessages:f,paymentComparisons:h}=Xb(e,r,n),p=e.number_of_payments||1,g=y=>y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),x=h.some(y=>y.needs_update);r.length<p;const b=r.length===p;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Generation"}),t&&c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.length," of ",p," Payments Created"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Actions"}),c.jsxs("div",{className:"space-y-3",children:[b?c.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:" All Payments Created"}),c.jsxs("div",{children:["All ",p," payments have been created for this deal."]})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:s,disabled:!d||i,className:`w-full px-4 py-3 rounded-md font-medium transition-colors ${d&&!i?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating Additional Payments...":"Generating Payments..."]}):t?`Create Remaining ${p-r.length} Payments`:`Generate ${p} Payment${p>1?"s":""}`}),t&&c.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:" Safe Generation"}),c.jsx("div",{children:"This will create the remaining payments without affecting existing payment records or their associated invoice data."})]})]}),t&&x&&o&&c.jsx("button",{onClick:o,disabled:i,className:"w-full px-4 py-2 border border-amber-300 bg-amber-50 text-amber-700 rounded-md font-medium hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Payment Amounts"}),!d&&c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3",children:[c.jsx("div",{className:"font-medium mb-1",children:"Configuration Required"}),c.jsx("div",{children:"Complete commission configuration in the Commission tab before generating payments."})]})]}),d&&p>1||t&&h.length>0?c.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d&&p>1&&c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Payment Schedule Preview"}),c.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[Array.from({length:p},(y,m)=>{const v=r.find(_=>_.payment_sequence===m+1);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{children:["Payment ",m+1,":"]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:`font-medium ${v?"text-green-600":""}`,children:["$",g(a),v&&" "]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75",children:["AGCI: $",g(u.agci)]})]})]},m)}),c.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[c.jsx("span",{children:"Total:"}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{children:["$",g(l)]}),c.jsxs("div",{className:"text-xs text-green-600 opacity-75 font-normal",children:["Total AGCI: $",g(u.agci*p)]})]})]})]})]}),t&&h.length>0&&c.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Current vs Calculated"}),c.jsx("div",{className:"text-sm text-gray-700 space-y-1",children:h.map((y,m)=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Payment ",m+1,":"]}),c.jsxs("span",{className:y.needs_update?"text-amber-700 font-medium":"text-gray-600",children:["$",g(y.database_amount),"  $",g(y.calculated_amount),y.needs_update&&" "]})]},m))})]})]}):null]})]})};function GM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const qM=w.forwardRef(GM),Zb=qM;function KM({title:e,titleId:t,...r},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?w.createElement("title",{id:t},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const QM=w.forwardRef(KM),ew=QM,tw=e=>{if(!e)return"Unknown";const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n).toLocaleDateString()},Nn=(e,t="Not set")=>e?tw(e):t,JM=e=>e||"",XM=({payment:e,totalPayments:t,isExpanded:r,onToggleExpansion:n,onUpdatePayment:s,onDeletePayment:o})=>(console.log(" PaymentSummaryRow payment dates:",{id:e.id,payment_sequence:e.payment_sequence,payment_date_estimated:e.payment_date_estimated,payment_received_date:e.payment_received_date}),c.jsxs("div",{className:"p-4 grid grid-cols-12 items-center gap-4",children:[c.jsxs("div",{className:"col-span-3 flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded flex-shrink-0",children:r?c.jsx(Zb,{className:"h-4 w-4 text-gray-500"}):c.jsx(ew,{className:"h-4 w-4 text-gray-500"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:["Payment ",e.payment_sequence," of ",t]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["$",(e.payment_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("div",{className:"text-xs text-gray-500",children:"Invoice #"}),c.jsx("div",{className:"text-sm text-gray-900",children:e.orep_invoice||"-"})]}),c.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:e.payment_received||!1,onChange:i=>s({payment_received:i.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e.payment_received?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.payment_received?"Received":"Pending"})]}),c.jsx("div",{className:"col-span-3",children:e.payment_received?c.jsx("div",{className:"w-full px-2 py-1 text-sm",children:c.jsxs("div",{className:"font-medium text-green-800",children:["Paid Date: ",tw(e.payment_received_date)]})}):c.jsxs("div",{children:[e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Estimated Pmt Date"}),c.jsx("input",{type:"date",value:e.payment_date_estimated||"",onChange:i=>s({payment_date_estimated:i.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",placeholder:"Estimated payment date"}),!e.payment_date_estimated&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Set estimated payment date"})]})}),c.jsx("div",{className:"col-span-2 text-right",children:c.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-900 text-sm whitespace-nowrap",children:"Delete"})})]})),ZM=({split:e,brokerName:t,paymentAmount:r,onPercentageChange:n,validationTotals:s})=>c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{children:c.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t})}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2})]})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Origination"}),c.jsx(_r,{label:"",value:e.split_origination_percent||0,onChange:o=>n("split_origination_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_origination_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Site"}),c.jsx(_r,{label:"",value:e.split_site_percent||0,onChange:o=>n("split_site_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_site_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Deal"}),c.jsx(_r,{label:"",value:e.split_deal_percent||0,onChange:o=>n("split_deal_percent",o)}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",(e.split_deal_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"bg-white rounded-md p-2 border border-gray-200",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Total"}),c.jsxs("div",{className:`text-sm font-semibold ${s&&!s.isValid?"text-red-600":"text-blue-600"}`,children:["$",(e.split_broker_total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s&&!s.isValid&&c.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Check totals"})]})]})]}),Ds=e=>e==null||isNaN(e)?"$0.00":`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Qg=({payeeName:e,amount:t,paid:r,onTogglePaid:n,disabled:s=!1})=>{const o=()=>{s||n(!r)};return c.jsxs("div",{className:`
        flex items-center justify-between p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer
        ${r?"bg-green-50 border-green-200 hover:border-green-300":"bg-white border-gray-200 hover:border-gray-300"}
        ${s?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
      `,onClick:o,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&!s&&(i.preventDefault(),o())},"aria-label":`${r?"Mark as unpaid":"Mark as paid"} - ${e} - ${Ds(t)}`,children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsx("div",{className:`
          flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200
          ${r?"bg-green-500 border-green-500":"bg-white border-gray-300 hover:border-green-400"}
        `,children:r&&c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`
            text-sm font-medium truncate transition-colors duration-200
            ${r?"text-green-900":"text-gray-900"}
          `,children:e}),c.jsx("p",{className:`
            text-xs transition-colors duration-200
            ${r?"text-green-700":"text-gray-500"}
          `,children:r?"Check written":"Pending payment"})]})]}),c.jsxs("div",{className:"flex-shrink-0 text-right",children:[c.jsx("p",{className:`
          text-lg font-semibold transition-colors duration-200
          ${r?"text-green-900":"text-gray-900"}
        `,children:Ds(t)}),r&&c.jsxs("div",{className:"flex items-center justify-end mt-1",children:[c.jsx("svg",{className:"w-3 h-3 text-green-600 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Paid"})]})]})]})},eL=({isOpen:e,onClose:t,payment:r,deal:n,clients:s,brokers:o,paymentSplits:i,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const v=[];if(n.referral_payee_client_id&&n.referral_fee_usd&&n.referral_fee_usd>0){const _=s.find(C=>C.id===n.referral_payee_client_id),k=n.fee||n.deal_usd||0,S=r.payment_amount||0,N=k>0?n.referral_fee_usd*(S/k):0;N>0&&v.push({id:`referral-${r.id}`,type:"referral",payeeName:(_==null?void 0:_.client_name)||"Unknown Referral Client",amount:N,paid:r.referral_fee_paid||!1})}console.log(" Payment splits for disbursement modal:",i),i.forEach(_=>{const k=o.find(N=>N.id===_.broker_id),S=_.paid||!1;console.log(" Processing split:",{paymentSplitId:_.id,brokerName:k==null?void 0:k.name,brokerPaid:S,amount:_.split_broker_total}),_.split_broker_total&&_.split_broker_total>0&&v.push({id:_.id,type:"broker",payeeName:(k==null?void 0:k.name)||"Unknown Broker",amount:_.split_broker_total,paid:S})}),d(v)}},[e,r,n,s,o,i]);const p=async(v,_)=>{h(!0);try{v.type==="referral"?await a(r.id,_):await l(v.id,_),d(k=>k.map(S=>S.id===v.id?{...S,paid:_}:S))}catch(k){console.error("Error updating disbursement status:",k)}finally{h(!1)}},g=r.payment_amount||0,x=u.reduce((v,_)=>v+(_.paid?_.amount:0),0),b=g-x,y=u.filter(v=>v.paid).length,m=u.length;return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-sm",children:c.jsx("span",{className:"text-white text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Disbursement"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment ",r.payment_sequence," - ",Ds(g)]})]})]}),c.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",disabled:f,children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Disbursement Progress: ",y," of ",m," checks written"]}),c.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(y/Math.max(m,1)*100),"% Complete"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${y/Math.max(m,1)*100}%`}})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),c.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Disbursements Required"}),c.jsx("p",{className:"text-sm text-gray-500",children:"This payment has no referral fees or broker commissions to disburse."})]}):c.jsxs("div",{className:"space-y-4",children:[u.some(v=>v.type==="referral")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Referral Payments"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="referral").map(v=>c.jsx(Qg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]}),u.some(v=>v.type==="broker")&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 uppercase tracking-wide mb-3",children:"Broker Commissions"}),c.jsx("div",{className:"space-y-2",children:u.filter(v=>v.type==="broker").map(v=>c.jsx(Qg,{payeeName:v.payeeName,amount:v.amount,paid:v.paid,onTogglePaid:_=>p(v,_),disabled:f},v.id))})]})]})}),u.length>0&&c.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Payment Received:"}),c.jsx("p",{className:"font-semibold text-gray-900",children:Ds(g)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Disbursed:"}),c.jsx("p",{className:"font-semibold text-green-600",children:Ds(x)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Remaining:"}),c.jsx("p",{className:`font-semibold ${b>=0?"text-gray-900":"text-red-600"}`,children:Ds(b)})]})]})})]})}):null},tL=({payment:e,deal:t,clients:r,brokers:n,paymentSplits:s,commissionSplits:o,onUpdatePayment:i,onUpdateReferralPaid:a,onUpdatePaymentSplitPaid:l})=>{const[u,d]=w.useState(!1),f=()=>{if(!t.referral_payee_client_id)return"No referral payee set";if(!r||r.length===0)return"Client data not available";const x=r.find(b=>b.id===t.referral_payee_client_id);return x?x.client_name||"Unknown Client":"Client not found"},h=()=>{if(!t.referral_fee_usd||t.referral_fee_usd===0)return 0;const x=t.fee||t.deal_usd||0,b=e.payment_amount||0;return x===0?0:t.referral_fee_usd*(b/x)},p=(x,b,y=!1)=>{const m=e[b];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),y&&m&&c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:Nn(m)}),c.jsx("input",{type:"date",value:JM(m),onChange:v=>i({[b]:v.target.value||null}),className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})},g=(x,b,y)=>{const m=e[b];return c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:x}),c.jsx("input",{type:"text",value:m||"",onChange:v=>i({[b]:v.target.value||null}),placeholder:y,className:"w-full border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})};return c.jsxs("div",{className:"border-t border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"p-4 md:p-6",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Details"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Payment Dates & Tracking"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6",children:[p("Estimated Payment Date","payment_date_estimated"),p("Payment Received Date","payment_received_date"),p("Invoice Date","payment_invoice_date"),g("OREP Invoice","orep_invoice","Enter OREP Invoice number")]})]}),(t.referral_payee_client_id||t.referral_fee_usd||t.referral_fee_percent)&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Referral Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Payee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:f()})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Referral Fee"}),c.jsx("div",{className:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-200 rounded-md text-gray-600",children:(()=>{const x=h(),b=t.referral_fee_usd||0;return x===0?"No referral fee for this payment":c.jsxs(c.Fragment,{children:["$",x.toLocaleString("en-US",{minimumFractionDigits:2}),c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["($",b.toLocaleString("en-US",{minimumFractionDigits:2})," total)"]}),t.referral_fee_percent&&c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.referral_fee_percent,"%)"]})]})})()})]})]})]}),(e.sf_payment_date_est||e.sf_payment_date_actual||e.sf_payment_date_received||e.sf_payment_invoice_date)&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h5",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-3",children:"Salesforce Date Fields (Read-only)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-xs",children:[e.sf_payment_date_est&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Est Date:"})," ",c.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_est)})]}),e.sf_payment_date_actual&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Actual Date:"})," ",c.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_actual)})]}),e.sf_payment_date_received&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Received Date:"})," ",c.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_date_received)})]}),e.sf_payment_invoice_date&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-600",children:"SF Invoice Date:"})," ",c.jsx("span",{className:"text-gray-500",children:Nn(e.sf_payment_invoice_date)})]})]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-gray-500",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Payment Received:"})," ",e.payment_received?"Yes":"No",e.payment_received_date&&c.jsxs("span",{className:"ml-1",children:["(",Nn(e.payment_received_date),")"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"SF Payment Status:"})," ",e.sf_payment_status||"Not set"]}),e.qb_sync_status&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"QB Sync Status:"})," ",e.qb_sync_status]}),e.qb_last_sync&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Last QB Sync:"})," ",Nn(e.qb_last_sync)]})]})}),c.jsx("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"checkbox",id:`payment-received-${e.id}`,checked:e.payment_received||!1,onChange:async x=>{const b=x.target.checked;await i({payment_received:b}),b&&(t.referral_fee_usd&&t.referral_fee_usd>0||s&&s.some(y=>(y.split_broker_total||0)>0))&&d(!0)},className:"h-5 w-5 text-blue-600 rounded border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`payment-received-${e.id}`,className:"text-sm font-semibold text-blue-900 cursor-pointer",children:"Payment Received"}),c.jsx("p",{className:"text-xs text-blue-700",children:e.payment_received?"Payment has been received - manage disbursements below":"Check when payment is received to manage disbursements"})]})]}),e.payment_received&&c.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Manage Disbursements"})]})})]}),u&&c.jsx(eL,{isOpen:u,onClose:()=>d(!1),payment:e,deal:t,clients:r||[],brokers:n||[],paymentSplits:s||[],onUpdateReferralPaid:a||(async()=>{}),onUpdatePaymentSplitPaid:l||(async()=>{})})]})},rL=e=>{const t={deal:0,site:0,origination:0,isValid:!0};return e.forEach(r=>{t.deal+=r.split_deal_percent||0,t.site+=r.split_site_percent||0,t.origination+=r.split_origination_percent||0}),t.isValid=t.deal===100&&t.site===100&&t.origination===100,t},nL=(e,t,r,n)=>e.map(s=>{let o=s.split_origination_usd||0,i=s.split_site_usd||0,a=s.split_deal_usd||0,l=s.split_broker_total||0;if(r&&n){const u=r.number_of_payments||1,d=(r.referral_fee_usd||0)/u,f=(r.house_usd||0)/u,h=n-d-f,p=(r.origination_percent||0)/100*h,g=(r.site_percent||0)/100*h,x=(r.deal_percent||0)/100*h;o=p*(s.split_origination_percent||0)/100,i=g*(s.split_site_percent||0)/100,a=x*(s.split_deal_percent||0)/100,l=o+i+a}return{...s,split_origination_usd:o,split_site_usd:i,split_deal_usd:a,split_broker_total:l}}),sL=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(async d=>{t(!0),n(null);try{const{data:f,error:h}=await Y.from("payment").select("*").eq("id",d).single();if(h)throw h;const{data:p,error:g}=await Y.from("payment_split").select("*").eq("payment_id",d);if(g)throw g;return{payment:f,paymentSplits:p||[]}}catch(f){const h=f instanceof Error?f.message:"Failed to load disbursement data";return n(h),console.error("Error loading disbursement data:",f),null}finally{t(!1)}},[]),o=w.useCallback(async(d,f)=>{t(!0),n(null);try{const{error:h}=await Y.from("payment").update({referral_fee_paid:f}).eq("id",d);if(h)throw h}catch(h){const p=h instanceof Error?h.message:"Failed to update referral payment status";throw n(p),console.error("Error updating referral paid status:",h),h}finally{t(!1)}},[]),i=w.useCallback(async(d,f)=>{t(!0),n(null),console.log(" Updating payment split paid status:",{splitId:d,paid:f});try{const{error:h,data:p}=await Y.from("payment_split").update({paid:f}).eq("id",d).select();if(h)throw console.error(" Supabase error updating payment split:",h),h;console.log(" Payment split updated successfully:",p)}catch(h){const p=h instanceof Error?h.message:"Failed to update payment split status";throw n(p),console.error("Error updating payment split paid status:",h),h}finally{t(!1)}},[]),a=w.useCallback((d,f,h)=>{const p=d.payment_amount||0,g=h||0,x=d.referral_fee_paid&&g>0?g:0,b=f.reduce((j,E)=>j+(E.paid&&E.split_broker_total||0),0),y=x+b,m=p-y,v=g>0?1:0,_=f.filter(j=>(j.split_broker_total||0)>0).length,k=v+_,S=d.referral_fee_paid&&g>0?1:0,N=f.filter(j=>j.paid&&(j.split_broker_total||0)>0).length,C=S+N;return{paymentAmount:p,referralAmount:g,referralDisbursed:x,brokerDisbursed:b,totalDisbursed:y,remainingBalance:m,totalItems:k,paidItems:C,completionPercentage:k>0?Math.round(C/k*100):0,isOverDisbursed:y>p,isFullyDisbursed:C===k&&k>0}},[]),l=w.useCallback((d,f)=>f>d?{isValid:!1,message:`Disbursements exceed payment by $${(f-d).toLocaleString("en-US",{minimumFractionDigits:2})}`}:{isValid:!0},[]),u=w.useCallback(()=>{n(null)},[]);return{loading:e,error:r,loadDisbursementData:s,updateReferralPaid:o,updatePaymentSplitPaid:i,calculateDisbursementTotals:a,validateDisbursement:l,clearError:u}},oL=({payment:e,splits:t,brokers:r,clients:n,commissionSplits:s,dealAmounts:o,deal:i,onSplitPercentageChange:a,onUpdatePayment:l,onUpdatePaymentSplit:u})=>{const[d,f]=w.useState(!1),h=k=>{const S=r.find(N=>N.id===k);return S?S.name:"Unknown Broker"},g=(()=>{const k=e.payment_amount||0,S=i.number_of_payments||1,N=(i.referral_fee_usd||0)/S,C=(i.house_usd||0)/S;return k-N-C})(),x=nL(t,o,i,e.payment_amount||0),b=rL(x),{updateReferralPaid:y,updatePaymentSplitPaid:m}=sL(),v=async(k,S)=>{try{await y(k,S)}catch(N){console.error("Error updating referral payment status:",N)}},_=async(k,S)=>{try{await m(k,S),u&&(await u(k,{paid:S}),console.log(" Payment split paid status updated, parent state refreshed"))}catch(N){console.error("Error updating payment split status:",N)}};return c.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Commission Breakdown"}),c.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Payment #",e.payment_sequence,"  AGCI: $",g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsx("div",{className:"space-y-4",children:x.map(k=>c.jsx(ZM,{split:k,brokerName:h(k.broker_id),paymentAmount:e.payment_amount||0,onPercentageChange:(S,N)=>a(k.id,S,N),validationTotals:b},k.id))}),!b.isValid&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[c.jsx("div",{className:"text-sm font-medium text-red-800",children:"Percentage Validation Errors:"}),c.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[b.origination!==100&&`Origination: ${b.origination}% `,b.site!==100&&`Site: ${b.site}% `,b.deal!==100&&`Deal: ${b.deal}% `,"(must equal 100% each)"]})]})]}),c.jsxs("div",{className:"border-t border-gray-200",children:[c.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>f(!d),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Dates, tracking, and referral information"})]}),c.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:d?c.jsx(Zb,{className:"h-4 w-4 text-gray-500"}):c.jsx(ew,{className:"h-4 w-4 text-gray-500"})})]})}),d&&c.jsx(tL,{payment:e,deal:i,clients:n,brokers:r,paymentSplits:t,commissionSplits:s,onUpdatePayment:l,onUpdateReferralPaid:v,onUpdatePaymentSplitPaid:_})]})]})},iL=({payments:e,paymentSplits:t,brokers:r,clients:n,commissionSplits:s,deal:o,onUpdatePayment:i,onDeletePayment:a,onUpdatePaymentSplit:l})=>{const[u,d]=w.useState(new Set),[f,h]=w.useState(!1),[p,g]=w.useState(null),x=_=>{d(k=>{const S=new Set(k);return S.has(_)?S.delete(_):S.add(_),S})},b=_=>t.filter(k=>k.payment_id===_),y=_=>{g(_),h(!0)},m=async()=>{if(p)try{await a(p.id),h(!1),g(null)}catch(_){console.error("Error deleting payment:",_)}},v=async(_,k,S)=>{try{const{error:N}=await Y.from("payment_split").update({[k]:S||0}).eq("id",_);if(N)throw console.error("Supabase error:",N),N;l&&await l(_,k,S)}catch(N){console.error("Error updating payment split:",N),alert("Failed to update split percentage. Please try again.")}};return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Management"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage individual payments and track their status"})]}),c.jsx("div",{className:"space-y-3",children:e.map(_=>{const k=b(_.id),S=u.has(_.id);return c.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white",children:[c.jsx(XM,{payment:_,totalPayments:e.length,isExpanded:S,onToggleExpansion:()=>x(_.id),onUpdatePayment:N=>i(_.id,N),onDeletePayment:()=>y(_)}),S&&c.jsx(oL,{payment:_,splits:k,brokers:r,clients:n,commissionSplits:s,dealAmounts:{origination_usd:o.origination_usd||0,site_usd:o.site_usd||0,deal_usd:o.deal_usd||0},deal:o,onSplitPercentageChange:v,onUpdatePayment:N=>i(_.id,N),onUpdatePaymentSplit:async(N,C)=>{l&&C.paid!==void 0&&await l(N,"paid",C.paid)}})]},_.id)})}),c.jsx(Jb,{isOpen:f,onClose:()=>h(!1),onConfirm:m,title:"Delete Payment",itemName:p?`Payment ${p.payment_sequence} of ${e.length}`:"",message:"This will permanently delete the payment and all associated commission splits. This action cannot be undone."})]})},aL=({statusSummary:e,hasOverdue:t,completionRate:r})=>c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Payment Status"}),e.total>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(r),"% complete)"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.received>0&&c.jsx("div",{className:"px-2 py-1 bg-green-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-green-800 font-bold",children:[" Received ",e.received]})}),e.sent>0&&c.jsx("div",{className:"px-2 py-1 bg-blue-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-blue-800 font-bold",children:[" Sent ",e.sent]})}),e.pending>0&&c.jsx("div",{className:"px-2 py-1 bg-yellow-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-yellow-800 font-bold",children:[" Pending ",e.pending]})}),e.overdue>0&&c.jsx("div",{className:"px-2 py-1 bg-red-100 rounded whitespace-nowrap",children:c.jsxs("span",{className:"text-red-800 font-bold",children:[" Overdue ",e.overdue]})})]}),t&&c.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[c.jsx("strong",{children:"Action needed:"})," ",e.overdue," payment",e.overdue!==1?"s":"",e.overdue===1?" is":" are"," overdue and require",e.overdue===1?"s":""," attention."]}),e.total>0&&c.jsx("div",{className:"mt-3",children:c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})})]}),lL=({deal:e,commissionSplits:t=[],onEditClick:r,className:n=""})=>{const{baseAmounts:s}=Gh(e,t),{gci:o,houseUsd:i,agci:a,originationPercent:l,sitePercent:u,dealPercent:d,originationUSD:f,siteUSD:h,dealUSD:p,totalDealUSD:g}=s,x=e.fee||0,b=e.referral_fee_percent||0,y=e.referral_fee_usd||b/100*x,m=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(E),v=x>0?i/x*100:0,_=x>0?y/x*100:0,k=x>0?i/x*100:0,S=x>0?f/x*100:0,N=x>0?h/x*100:0,C=x>0?p/x*100:0,j=_>0||k>0||S>0||N>0||C>0;return!e.fee||e.fee===0?c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Commission breakdown will appear when commission fee is set"}),r&&c.jsx("button",{onClick:r,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Set Commission Details "})]}):c.jsxs("div",{className:`bg-white rounded-lg border p-4 ${n}`,children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm",children:[c.jsxs("span",{className:"font-medium text-gray-900",children:["Total Commission: ",c.jsx("span",{className:"text-green-600",children:m(x)})]}),y>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["Referral: ",c.jsx("span",{className:"text-orange-600",children:m(y)})]})]}),i>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["House: ",c.jsx("span",{className:"text-gray-600",children:m(i)})]})]}),c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("span",{className:"text-gray-600",children:["AGCI: ",c.jsx("span",{className:"text-blue-600 font-medium",children:m(a)})]})]}),r&&c.jsx("button",{onClick:r,className:"mt-2 sm:mt-0 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Edit Commission"})]}),j&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex h-8 bg-gray-200 rounded-lg overflow-hidden",children:[_>0&&c.jsx("div",{className:"bg-orange-500 flex items-center justify-center relative group",style:{width:`${_}%`},title:`Referral: ${b}% of total - ${m(y)}`,children:_>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[b.toFixed(1),"%"]})}),k>0&&c.jsx("div",{className:"bg-gray-500 flex items-center justify-center relative group",style:{width:`${k}%`},title:`House: ${v.toFixed(1)}% of total - ${m(i)}`,children:k>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[v.toFixed(1),"%"]})}),S>0&&c.jsx("div",{className:"bg-blue-500 flex items-center justify-center relative group",style:{width:`${S}%`},title:`Origination: ${l}% of AGCI - ${m(f)}`,children:S>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[l,"%"]})}),N>0&&c.jsx("div",{className:"bg-green-500 flex items-center justify-center relative group",style:{width:`${N}%`},title:`Site: ${u}% of AGCI - ${m(h)}`,children:N>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[u,"%"]})}),C>0&&c.jsx("div",{className:"bg-purple-500 flex items-center justify-center relative group",style:{width:`${C}%`},title:`Deal: ${d}% of AGCI - ${m(p)}`,children:C>15&&c.jsxs("span",{className:"text-white text-xs font-medium",children:[d,"%"]})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2",children:[y>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Referral"})," ",m(y)]})]}),i>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"House"})," ",m(i)]})]}),l>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Origination"})," ",m(f)]})]}),u>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Site"})," ",m(h)]})]}),d>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded mr-2"}),c.jsxs("span",{className:"text-sm text-gray-900",children:[c.jsx("span",{className:"font-medium",children:"Deal"})," ",m(p)]})]})]}),g!==a&&a>0&&c.jsx("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:" Commission percentages don't total to 100% of AGCI"})]}),!j&&c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Commission breakdown percentages not configured"}),r&&c.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Configure Commission Splits "})]})]})},cL=e=>{const t=i=>{if(i.payment_received)return"received";if(i.invoice_sent&&!i.payment_received){if(i.payment_date_estimated){const a=new Date(i.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"sent"}if(i.payment_date_estimated&&!i.invoice_sent){const a=new Date(i.payment_date_estimated),l=new Date;if(l.setHours(0,0,0,0),a<l)return"overdue"}return"pending"},r=e.reduce((i,a)=>{const l=t(a);return i[l]=(i[l]||0)+1,i.total++,i},{pending:0,sent:0,overdue:0,received:0,total:0}),n=r.overdue>0,s=r.overdue>0||r.sent>0,o=r.total>0?r.received/r.total*100:0;return{getPaymentStatus:t,statusSummary:r,hasOverdue:n,hasActionItems:s,completionRate:o}},uL=({deal:e,onDealUpdate:t})=>{const[r,n]=w.useState([]),[s,o]=w.useState([]),[i,a]=w.useState([]),[l,u]=w.useState([]),[d,f]=w.useState([]),[h,p]=w.useState(!0),[g,x]=w.useState(null),[b,y]=w.useState(!1),{calculatedPaymentAmount:m,totalCalculatedPayments:v,paymentCommissionBreakdown:_,canGeneratePayments:k,validationMessages:S}=Xb(e,r,i),N=async()=>{if(e.id)try{p(!0),x(null);const{data:D,error:R}=await Y.from("payment").select("*, payment_date_estimated").eq("deal_id",e.id).order("payment_sequence",{ascending:!0});if(R)throw R;console.log(" PaymentTab fetchPaymentData - payments found:",{dealId:e.id,paymentsCount:(D==null?void 0:D.length)||0,payments:D==null?void 0:D.map(I=>({id:I.id,sequence:I.payment_sequence,amount:I.payment_amount,estimated_date:I.payment_date_estimated}))});const L=(D==null?void 0:D.map(I=>I.id))||[];let W=[];if(L.length>0){const{data:I,error:re}=await Y.from("payment_split").select("*").in("payment_id",L);if(re)throw re;W=I||[]}const{data:Q,error:Ne}=await Y.from("commission_split").select("*").eq("deal_id",e.id);if(Ne)throw Ne;const{data:Re,error:Ct}=await Y.from("broker").select("*").order("name");if(Ct)throw Ct;let Ke=[];try{const{data:I,error:re}=await Y.from("client").select("*").order("client_name");re?console.warn("Client table not available:",re.message):Ke=I||[]}catch(I){console.warn("Error fetching clients (table may not exist):",I)}n(D||[]),o(W),a(Q||[]),u(Re||[]),f(Ke||[])}catch(D){console.error("Error fetching payment data:",D),x(D instanceof Error?D.message:"Failed to load payment data")}finally{p(!1)}},C=async()=>{if(e.id)try{y(!0),x(null);const{data:D,error:R}=await Y.rpc("generate_payments_for_deal",{deal_uuid:e.id});if(R)throw R;await N()}catch(D){console.error("Error generating payments:",D),x(D instanceof Error?D.message:"Failed to generate payments")}finally{y(!1)}},j=async(D,R)=>{try{const{error:L}=await Y.from("payment").update(R).eq("id",D);if(L)throw L;n(W=>W.map(Q=>Q.id===D?{...Q,...R}:Q))}catch(L){console.error("Error updating payment:",L),x(L instanceof Error?L.message:"Failed to update payment")}},E=async D=>{try{const{error:R}=await Y.from("payment_split").delete().eq("payment_id",D);if(R)throw R;const{error:L}=await Y.from("payment").delete().eq("id",D);if(L)throw L;n(W=>W.filter(Q=>Q.id!==D)),o(W=>W.filter(Q=>Q.payment_id!==D))}catch(R){console.error("Error deleting payment:",R),x(R instanceof Error?R.message:"Failed to delete payment")}};if(w.useEffect(()=>{N()},[e.id]),h)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-gray-500",children:"Loading payment data..."})});const M=r.length>0;r.reduce((D,R)=>D+(R.payment_amount||0),0);const H=e.fee||0,{statusSummary:F,hasOverdue:B,hasActionItems:T,completionRate:O}=cL(r),U=D=>D.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return c.jsxs("div",{className:"space-y-6",children:[g&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsx("div",{className:"text-red-700",children:g})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Commission"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",U(H)]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-green-600",children:"Calculated Payments"}),c.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["$",U(v)]}),c.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.number_of_payments||1,"  $",U(m)]})]}),c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-sm font-medium text-purple-600",children:"AGCI Available"}),c.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",U(e.agci||0)]}),c.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"After house & referral fees"})]}),c.jsx(aL,{statusSummary:F,hasOverdue:B,completionRate:O})]}),c.jsx(lL,{deal:e,commissionSplits:i,className:"mb-6"}),c.jsx(VM,{deal:e,hasPayments:M,existingPayments:r,commissionSplits:i,onGeneratePayments:C,generatingPayments:b}),M?c.jsx("div",{className:"space-y-6",children:c.jsx(iL,{payments:r,paymentSplits:s,brokers:l,clients:d,commissionSplits:i,deal:e,onUpdatePayment:j,onDeletePayment:E,onUpdatePaymentSplit:async(D,R,L)=>{o(W=>W.map(Q=>Q.id===D?{...Q,[R]:L!==null?L:R==="paid"?!1:0}:Q))}})}):c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No payments generated yet"}),c.jsx("div",{className:"text-gray-400 text-sm",children:k?'Click "Generate Payments" above to create payment records':"Complete commission configuration to enable payment generation"}),S.length>0&&c.jsxs("div",{className:"mt-4 text-left max-w-md mx-auto",children:[c.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Required configuration:"}),c.jsx("ul",{className:"text-sm text-gray-500 space-y-1",children:S.map((D,R)=>c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"text-gray-400 mr-1",children:""}),D]},R))})]})]})]})},dL=({deal:e})=>{const[t,r]=w.useState(null),[n,s]=w.useState(null),[o,i]=w.useState(!0);w.useEffect(()=>{(async()=>{try{if(e.client_id){const{data:f}=await Y.from("client").select("id, client_name").eq("id",e.client_id).single();f&&r(f)}if(e.stage_id){const{data:f}=await Y.from("deal_stage").select("id, label").eq("id",e.stage_id).single();f&&s(f)}}catch(f){console.error("Error fetching header data:",f)}finally{i(!1)}})()},[e.client_id,e.stage_id]);const a=d=>d==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),l=d=>{if(!d)return"Not set";try{return new Date(d).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}catch{return"Invalid date"}},u=()=>c.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}),c.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}),c.jsx("circle",{cx:"21",cy:"7",r:"1",fill:"currentColor"})]});return o?c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:c.jsx(u,{})}),c.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Loading..."})]})})})}):c.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white px-6 py-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(u,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Deal"})]}),c.jsx("h1",{className:"text-xl font-bold leading-tight",children:e.deal_name||"Unnamed Deal"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Account Name"}),c.jsx("div",{className:"text-white",children:(t==null?void 0:t.client_name)||"No Client"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Stage"}),c.jsx("div",{className:"text-white font-semibold",children:(n==null?void 0:n.label)||"No Stage"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Probability"}),c.jsx("div",{className:"text-white font-semibold",children:e.probability!==null?`${e.probability}%`:"0%"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Target Close Date"}),c.jsx("div",{className:"text-white",children:l(e.target_close_date)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Deal Value"}),c.jsx("div",{className:"text-white font-bold text-base",children:a(e.deal_value)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Fee"}),c.jsx("div",{className:"text-emerald-400 font-bold text-base",children:a(e.fee)})]})]})]})})};function fL(){const{dealId:e}=xy(),[t,r]=w.useState(null),[n,s]=w.useState("overview"),{contacts:o}=Qb(e||null);w.useEffect(()=>{e&&(async()=>{const{data:u,error:d}=await Y.from("deal").select("*").eq("id",e).single();!d&&u&&r(u)})()},[e]);const i=l=>{r(l)},a=async l=>{const u={...t,...l};return r(u),Promise.resolve()};return t?c.jsxs(FM,{children:[c.jsxs($M,{contactCount:o.length,notesCount:0,filesCount:0,activityCount:0,paymentsCount:0,children:[c.jsx(dL,{deal:t}),c.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsx("button",{onClick:()=>s("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),c.jsx("button",{onClick:()=>s("commission"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="commission"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Commission"}),c.jsx("button",{onClick:()=>s("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payments"})]})}),n==="overview"&&c.jsx(MM,{deal:t,onSave:i}),n==="commission"&&c.jsx(YM,{dealId:e,deal:t,onDealUpdate:a}),n==="payments"&&c.jsx(uL,{deal:t,onDealUpdate:a})]})]}),e&&c.jsx(BM,{dealId:e})]}):c.jsx("div",{className:"p-4",children:"Loading..."})}const rw=e=>{const[t,r]=w.useState(null),[n,s]=w.useState(!0),[o,i]=w.useState(null),a=w.useCallback(async()=>{if(!e){r(null),s(!1);return}try{s(!0),i(null);const{data:f,error:h}=await Y.from("property").select("*").eq("id",e).single();if(h)throw h;const[p,g,x]=await Promise.all([f.property_type_id?Y.from("property_type").select("*").eq("id",f.property_type_id).single():Promise.resolve({data:null,error:null}),f.property_stage_id?Y.from("property_stage").select("*").eq("id",f.property_stage_id).single():Promise.resolve({data:null,error:null}),f.property_record_type_id?Y.from("property_record_type").select("*").eq("id",f.property_record_type_id).single():Promise.resolve({data:null,error:null})]),b={...f,property_type:p.data||void 0,property_stage:g.data||void 0,property_record_type:x.data||void 0};r(b)}catch(f){console.error("Error fetching property:",f),i(f instanceof Error?f.message:"Failed to fetch property")}finally{s(!1)}},[e]);w.useEffect(()=>{a()},[a]);const l=w.useCallback(async f=>{if(!e)throw new Error("No property ID provided");try{i(null);const h={...f,updated_at:new Date().toISOString()},{data:p,error:g}=await Y.from("property").update(h).eq("id",e).select("*").single();if(g)throw g;r(p)}catch(h){throw console.error("Error updating property:",h),i(h instanceof Error?h.message:"Failed to update property"),h}},[e]),u=w.useCallback(async f=>{try{i(null);const{data:h,error:p}=await Y.from("property").insert([{...f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw p;return h}catch(h){throw console.error("Error creating property:",h),i(h instanceof Error?h.message:"Failed to create property"),h}},[]),d=w.useCallback(async()=>{await a()},[a]);return{property:t,loading:n,error:o,updateProperty:l,createProperty:u,refreshProperty:d}},hL=e=>{const[t,r]=w.useState(e||{}),[n,s]=w.useState(e||{}),o=w.useCallback(d=>{r(d)},[]),i=w.useCallback((d,f)=>{r(h=>({...h,[d]:f}))},[]),a=w.useCallback(d=>{const f=d||{};r(f),s(f)},[]),l=(()=>{var k,S,N,C;const d={},f=[];(k=t.property_name)!=null&&k.trim()||(d.property_name="Property name is required"),(S=t.address)!=null&&S.trim()||(d.address="Address is required"),(N=t.city)!=null&&N.trim()||(d.city="City is required"),(C=t.state)!=null&&C.trim()||(d.state="State is required");const h=Number(t.asking_lease_price),p=Number(t.asking_purchase_price);h<0&&(d.asking_lease_price="Lease price cannot be negative"),p<0&&(d.asking_purchase_price="Purchase price cannot be negative");const g=Number(t.rent_psf),x=Number(t.nnn_psf);g<0&&(d.rent_psf="Rent PSF cannot be negative"),x<0&&(d.nnn_psf="NNN PSF cannot be negative");const b=Number(t.building_sqft),y=Number(t.available_sqft);b<0&&(d.building_sqft="Building square footage cannot be negative"),y<0&&(d.available_sqft="Available square footage cannot be negative"),y>0&&b>0&&y>b&&f.push("Available square footage exceeds building square footage"),Number(t.traffic_count)<0&&(d.traffic_count="Traffic count cannot be negative");const v=Number(t.latitude),_=Number(t.longitude);return v&&(v<-90||v>90)&&(d.latitude="Latitude must be between -90 and 90"),_&&(_<-180||_>180)&&(d.longitude="Longitude must be between -180 and 180"),t.property_type_id||f.push("Property type is not set"),t.property_stage_id||f.push("Property stage is not set"),t.contact_id||f.push("No contact assigned to this property"),h===0&&p===0&&f.push("No pricing information available"),{isValid:Object.keys(d).length===0,errors:d,warnings:f}})(),u=JSON.stringify(t)!==JSON.stringify(n);return{formData:t,setFormData:o,updateField:i,validation:l,resetForm:a,isDirty:u}},pL=({property:e,isEditing:t,onToggleEdit:r,onBack:n,onGetLocation:s,onCallContact:o})=>{var l;const i=u=>u&&{Prospecting:"bg-blue-100 text-blue-800 border-blue-200",Qualified:"bg-yellow-100 text-yellow-800 border-yellow-200","Under Contract":"bg-purple-100 text-purple-800 border-purple-200",Closed:"bg-green-100 text-green-800 border-green-200",Lost:"bg-red-100 text-red-800 border-red-200"}[u]||"bg-gray-100 text-gray-800 border-gray-200",a=()=>c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});return c.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 text-white shadow-sm",children:c.jsxs("div",{className:"px-4 sm:px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-600 rounded-lg",children:[c.jsx(a,{}),c.jsx("span",{className:"text-white text-sm font-medium",children:"Property"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[s&&c.jsx("button",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-slate-600 hover:bg-slate-500 transition-colors",title:"Get current location",children:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o&&e.contact_id&&c.jsx("button",{onClick:o,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-600 hover:bg-green-500 transition-colors",title:"Call contact",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold leading-tight mb-2",children:e.property_name||e.address||"Unnamed Property"}),e.address&&e.property_name&&c.jsx("p",{className:"text-slate-300 text-sm",children:e.address})]}),e.property_stage&&c.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${i(e.property_stage.label)}`,children:e.property_stage.label})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Type"}),c.jsx("div",{className:"text-white",children:((l=e.property_type)==null?void 0:l.label)||"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Building Size"}),c.jsx("div",{className:"text-white",children:e.building_sqft?`${e.building_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Available Size"}),c.jsx("div",{className:"text-white",children:e.available_sqft?`${e.available_sqft.toLocaleString()} SF`:"Not set"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-slate-300 font-medium mb-1",children:"Contact Made"}),c.jsx("div",{className:"text-white",children:e.contact_made?c.jsx("span",{className:"text-green-400 font-semibold",children:"Yes"}):c.jsx("span",{className:"text-yellow-400",children:"No"})})]})]})]})})},Wn=({label:e,value:t,onChange:r,field:n,placeholder:s,disabled:o=!1,tabIndex:i})=>{const[a,l]=w.useState(!1),[u,d]=w.useState(""),[f,h]=w.useState([]),[p,g]=w.useState(!1),[x,b]=w.useState(-1),[y,m]=w.useState(!1),v=w.useRef(null),_=w.useRef(null),k=t||"",S=async T=>{if(T.trim().length<2){h([]);return}m(!0);try{const{data:O,error:U}=await Y.from("property").select(n).not(n,"is",null).ilike(n,`%${T}%`);if(U)throw U;const D={};O==null||O.forEach(L=>{const W=L[n];W&&(D[W]=(D[W]||0)+1)});const R=Object.entries(D).map(([L,W])=>({value:L,count:W})).sort((L,W)=>W.count-L.count).slice(0,8);h(R)}catch(O){console.error("Error fetching suggestions:",O),h([])}finally{m(!1)}};w.useEffect(()=>{if(!a)return;const T=setTimeout(()=>{S(u)},300);return()=>clearTimeout(T)},[u,a,n]);const N=T=>{o||(l(!0),d(T!==void 0?T:t||""),g(!0),b(-1))},C=()=>{o||N()},j=T=>{r((T??u).trim()||null),l(!1),g(!1),h([]),b(-1)},E=()=>{l(!1),g(!1),h([]),d(""),b(-1)},M=T=>{d(T),j(T)},H=T=>{T.key==="Enter"?(T.preventDefault(),x>=0&&f[x]?j(f[x].value):j()):T.key==="Escape"?(T.preventDefault(),E()):T.key==="ArrowDown"?(T.preventDefault(),b(O=>O<f.length-1?O+1:O)):T.key==="ArrowUp"&&(T.preventDefault(),b(O=>O>0?O-1:-1))},F=T=>{const O=T.target.value;d(O),g(!0),b(-1)},B=()=>{setTimeout(()=>{var T;(T=_.current)!=null&&T.contains(document.activeElement)||j()},150)};return a?c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{ref:v,type:"text",value:u,onChange:F,onBlur:B,onKeyDown:H,placeholder:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:i,autoFocus:!0}),p&&(f.length>0||y)&&c.jsxs("div",{ref:_,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:[y&&c.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500 flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Loading suggestions..."]}),!y&&f.map((T,O)=>c.jsxs("button",{type:"button",onMouseDown:U=>{U.preventDefault(),M(T.value)},className:`w-full px-3 py-2 text-left hover:bg-blue-50 flex items-center justify-between ${O===x?"bg-blue-50 text-blue-900":"text-gray-900"}`,children:[c.jsx("span",{className:"truncate",children:T.value}),c.jsxs("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:[T.count," properties"]})]},T.value)),!y&&f.length===0&&u.trim().length>=2&&c.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:["No matching ",e.toLowerCase()," found"]})]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:()=>N(),onKeyDown:T=>{T.key==="Enter"||T.key===" "?(T.preventDefault(),N()):T.key.length===1&&!T.ctrlKey&&!T.metaKey&&!T.altKey&&(T.preventDefault(),N(T.key))},onFocus:C,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:o?"Not editable":"Click to edit - suggestions will appear as you type",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":"text-gray-500",children:k})})]})},de=({label:e,value:t,onChange:r,type:n="text",placeholder:s,disabled:o=!1,multiline:i=!1,rows:a=1,inputMode:l,tabIndex:u,required:d=!1,defaultText:f="Click to add"})=>{const[h,p]=w.useState(!1),[g,x]=w.useState(""),b=t!=null&&t!==""&&t!==0?t:"",y=!t||typeof t=="string"&&t.trim()==="",m=d&&y,v=()=>{o||(p(!0),x((t==null?void 0:t.toString())||""))},_=()=>{o||v()},k=()=>{if(n==="number"){const C=parseFloat(g);r(isNaN(C)?null:C)}else r(g.trim()||null);p(!1)},S=()=>{p(!1),x("")},N=C=>{C.key==="Enter"&&!i?(C.preventDefault(),C.stopPropagation(),k()):C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),S())};if(h){const C=i?"textarea":"input";return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx(C,{type:i?void 0:n,inputMode:l,value:g,onChange:j=>x(j.target.value),onBlur:k,onKeyDown:N,placeholder:s,rows:i?a:void 0,className:`w-full px-3 py-2 rounded-md shadow-sm text-base min-h-[44px] resize-none ${m?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white focus:ring-blue-500 focus:border-blue-500"}`,tabIndex:u,autoFocus:!0})]})}return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:v,onKeyDown:C=>{C.key==="Enter"||C.key===" "?(C.preventDefault(),v()):C.key.length===1&&!C.ctrlKey&&!C.metaKey&&!C.altKey&&(C.preventDefault(),p(!0),x(C.key))},onFocus:_,tabIndex:u||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-start transition-colors focus:outline-none focus:ring-2 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":m?"cursor-pointer bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 focus:ring-red-500 focus:border-red-500":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white focus:ring-blue-500 focus:border-blue-500"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":m?"text-red-600 font-medium":"text-gray-500",children:i?c.jsx("div",{className:"whitespace-pre-wrap",children:b||(y?f:"")}):b||(y?f:"")})})]})},mL=({property:e,onFieldUpdate:t,onGetCurrentLocation:r})=>{var _,k,S,N,C;const[n,s]=w.useState(!1),[o,i]=w.useState("idle"),[a,l]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!1),p=()=>{const j=e.verified_latitude&&e.verified_longitude,E=e.latitude&&e.longitude;return j?{lat:e.verified_latitude,lng:e.verified_longitude,source:"verified"}:E?{lat:e.latitude,lng:e.longitude,source:"regular"}:null},g=()=>{const j=p();return j?`https://www.google.com/maps?q=${j.lat},${j.lng}`:null},x=async()=>{const j=g();if(j)try{await navigator.clipboard.writeText(j),i("copied"),setTimeout(()=>i("idle"),2e3)}catch(E){console.error("Failed to copy to clipboard:",E),window.open(j,"_blank")}},b=async()=>{if(r)try{s(!0);const j=await r();t("latitude",j.lat),t("longitude",j.lng)}catch(j){console.error("Error getting current location:",j)}finally{s(!1)}},y=()=>{l(!0),setTimeout(()=>l(!1),3e3)},m=()=>{d(!0),setTimeout(()=>d(!1),3e3)},v=()=>{h(!0),setTimeout(()=>h(!1),4e3)};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Location"})]}),r&&c.jsxs("button",{onClick:b,disabled:n,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm disabled:opacity-50",children:[n?c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Use Current Location"]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsx("div",{className:"sm:col-span-2",children:c.jsx(de,{label:"Street Address*",value:e.address,onChange:j=>t("address",j),placeholder:"123 Main Street",tabIndex:1})}),c.jsx(Wn,{label:"City*",value:e.city,onChange:j=>t("city",j),field:"city",placeholder:"San Francisco",tabIndex:2}),c.jsx(Wn,{label:"State*",value:e.state,onChange:j=>t("state",j),field:"state",placeholder:"CA",tabIndex:3}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[c.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),c.jsx("button",{type:"button",onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Click for more info",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),c.jsx(de,{label:"",value:e.zip,onChange:j=>t("zip",j),placeholder:"94105",tabIndex:4}),a&&c.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),c.jsx("div",{className:"font-medium text-blue-200 mb-1",children:" Future Auto-Fill"}),c.jsx("p",{children:"Will auto-populate in the future from Google geocoding services."}),c.jsx("button",{onClick:()=>l(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[c.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"County"}),c.jsx("button",{type:"button",onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Click for more info",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),c.jsx(Wn,{label:"",value:e.county,onChange:j=>t("county",j),field:"county",placeholder:"San Francisco County",tabIndex:5}),u&&c.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),c.jsx("div",{className:"font-medium text-blue-200 mb-1",children:" Future Auto-Fill"}),c.jsx("p",{children:"Will auto-populate in the future from Google geocoding services."}),c.jsx("button",{onClick:()=>d(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"GPS Coordinates"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Verify Location"]}),f&&c.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),c.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will take you to a map where you can move the pin to the correct location and recode the address coordinates."}),c.jsx("button",{onClick:()=>h(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(de,{label:"Latitude",value:e.latitude,onChange:j=>t("latitude",j),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:6}),c.jsx(de,{label:"Longitude",value:e.longitude,onChange:j=>t("longitude",j),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:7}),c.jsx(de,{label:"Verified Latitude",value:e.verified_latitude,onChange:j=>t("verified_latitude",j),type:"number",placeholder:"37.7749",inputMode:"decimal",tabIndex:8}),c.jsx(de,{label:"Verified Longitude",value:e.verified_longitude,onChange:j=>t("verified_longitude",j),type:"number",placeholder:"-122.4194",inputMode:"decimal",tabIndex:9})]})]}),p()&&c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"bg-gray-100 rounded-md p-6 text-center",children:[c.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),c.jsx("p",{className:"text-sm text-gray-600",children:"Map Preview"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(k=(_=p())==null?void 0:_.lat)==null?void 0:k.toFixed(6),", ",(N=(S=p())==null?void 0:S.lng)==null?void 0:N.toFixed(6),((C=p())==null?void 0:C.source)==="verified"&&c.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Verified"})]}),c.jsxs("div",{className:"mt-3 flex gap-2 justify-center",children:[c.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",onClick:()=>{const j=g();j&&window.open(j,"_blank")},children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in Maps"]}),c.jsx("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",onClick:x,children:o==="copied"?c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Link"]})})]})]})})]})},Qr=({label:e,value:t,onChange:r,placeholder:n="0",disabled:s=!1,tabIndex:o,helpText:i,showLarge:a=!1,colorScheme:l="gray"})=>{const[u,d]=w.useState(!1),[f,h]=w.useState(""),p=k=>k==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(k),g=t!=null?p(t):"",x={green:"text-green-700",blue:"text-blue-700",purple:"text-purple-700",gray:"text-gray-900",orange:"text-orange-700"},b=k=>{s||(d(!0),h(k!==void 0?k:(t==null?void 0:t.toString())||""))},y=()=>{s||b()},m=()=>{const k=parseFloat(f.replace(/[^0-9.-]/g,""))||null;r(k),d(!1)},v=()=>{d(!1),h("")},_=k=>{k.key==="Enter"?(k.preventDefault(),k.stopPropagation(),m()):k.key==="Escape"&&(k.preventDefault(),k.stopPropagation(),v())};return u?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"text",inputMode:"decimal",value:f,onChange:k=>h(k.target.value),onBlur:m,onKeyDown:_,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("div",{onClick:()=>b(),onKeyDown:k=>{k.key==="Enter"||k.key===" "?(k.preventDefault(),b()):k.key.length===1&&!k.ctrlKey&&!k.metaKey&&!k.altKey&&(k.preventDefault(),b(k.key))},onFocus:y,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border ${a?"min-h-[48px]":"min-h-[44px]"} flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:`${t!==null?x[l]:"text-gray-500"} ${a?"text-lg font-semibold":"font-medium"}`,children:g})}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},$l=({label:e,value:t,onChange:r,placeholder:n="0.00",disabled:s=!1,tabIndex:o,helpText:i})=>{const[a,l]=w.useState(!1),[u,d]=w.useState(""),f=m=>m==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m),h=t!=null?`${f(t)} / SF`:"Not set",p=m=>{s||(l(!0),d(m!==void 0?m:(t==null?void 0:t.toString())||""))},g=()=>{s||p()},x=()=>{const m=parseFloat(u.replace(/[^0-9.-]/g,""))||null;r(m),l(!1)},b=()=>{l(!1),d("")},y=m=>{m.key==="Enter"?(m.preventDefault(),m.stopPropagation(),x()):m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),b())};return a?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("input",{type:"text",inputMode:"decimal",value:u,onChange:m=>d(m.target.value),onBlur:x,onKeyDown:y,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]",tabIndex:o,autoFocus:!0}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsx("div",{onClick:()=>p(),onKeyDown:m=>{m.key==="Enter"||m.key===" "?(m.preventDefault(),p()):m.key.length===1&&!m.ctrlKey&&!m.metaKey&&!m.altKey&&(m.preventDefault(),p(m.key))},onFocus:g,tabIndex:o||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed border-gray-200":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white"}`,title:s?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:`${t!==null?"text-gray-900":"text-gray-500"} font-medium`,children:h})}),i&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})},gL=({property:e,onFieldUpdate:t})=>{var l,u;const r=((u=(l=e.property_record_type)==null?void 0:l.label)==null?void 0:u.toLowerCase())||"",n=r.includes("land"),s=r.includes("shopping")||r.includes("retail"),o=!n&&!s,i=!n,a=!n;return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Information"})]}),o&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:c.jsx(Qr,{label:"Asking Lease Price",value:e.asking_lease_price,onChange:d=>t("asking_lease_price",d),helpText:"Annual lease amount",showLarge:!0,colorScheme:"green",tabIndex:10})}),i&&c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx($l,{label:"Rent PSF",value:e.rent_psf,onChange:d=>t("rent_psf",d),helpText:"Base rent per square foot",tabIndex:12}),c.jsx($l,{label:"NNN PSF",value:e.nnn_psf,onChange:d=>t("nnn_psf",d),helpText:"Triple net charges per square foot",tabIndex:13})]}),e.rent_psf&&e.nnn_psf&&e.available_sqft&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"All-In Rent Calculation"}),c.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["$",(e.rent_psf+e.nnn_psf).toFixed(2)," / SF"]}),c.jsxs("div",{className:"text-sm text-blue-600",children:["Total annual: $",((e.rent_psf+e.nnn_psf)*e.available_sqft).toLocaleString()]})]})]}),a&&c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Square Footage"}),s?c.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.jsx(de,{label:"Available Sqft",value:e.available_sqft,onChange:d=>t("available_sqft",d),type:"number",placeholder:"0",tabIndex:14})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(de,{label:"Building Size",value:e.building_sqft,onChange:d=>t("building_sqft",d),type:"number",placeholder:"0",tabIndex:14}),c.jsx(de,{label:"Available Size",value:e.available_sqft,onChange:d=>t("available_sqft",d),type:"number",placeholder:"0",tabIndex:15})]}),e.building_sqft&&e.available_sqft&&c.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded-md",children:c.jsxs("div",{className:"text-sm text-gray-600",children:["Occupancy: ",((e.building_sqft-e.available_sqft)/e.building_sqft*100).toFixed(1),"% (",(e.building_sqft-e.available_sqft).toLocaleString()," SF occupied)"]})})]})]}),n&&c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Land Information"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsx(Qr,{label:"Asking Purchase Price",value:e.asking_purchase_price,onChange:d=>t("asking_purchase_price",d),showLarge:!0,colorScheme:"blue",tabIndex:16}),c.jsx(Qr,{label:"Asking Ground Lease Price",value:e.asking_lease_price,onChange:d=>t("asking_lease_price",d),showLarge:!0,colorScheme:"green",tabIndex:17})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsx(de,{label:"NNN",value:e.nnn_psf,onChange:d=>t("nnn_psf",d),type:"number",placeholder:"0",tabIndex:18}),c.jsx(de,{label:"Acres",value:e.acres,onChange:d=>t("acres",d),type:"number",placeholder:"0",tabIndex:19})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(de,{label:"Building Sqft",value:e.building_sqft,onChange:d=>t("building_sqft",d),type:"number",placeholder:"0",tabIndex:20}),c.jsx(de,{label:"Lease Expiration Date",value:e.lease_expiration_date,onChange:d=>t("lease_expiration_date",d),type:"text",placeholder:"MM/DD/YYYY",tabIndex:21})]})]})]})},nw=({label:e,value:t,onChange:r,options:n,placeholder:s="Select...",disabled:o=!1,tabIndex:i,required:a=!1,defaultText:l="Not set"})=>{const[u,d]=w.useState(!1),f=n.find(v=>v.id===t),h=(f==null?void 0:f.label)||l,g=a&&!t,x=()=>{o||d(!0)},b=v=>{r(v||null),d(!1)},y=()=>{d(!1)},m=v=>{v.key==="Escape"&&(v.preventDefault(),v.stopPropagation(),y())};return u?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),c.jsxs("select",{value:t||"",onChange:v=>b(v.target.value),onBlur:y,onKeyDown:m,className:`w-full px-3 py-2 rounded-md shadow-sm text-base min-h-[44px] ${g?"border-red-300 bg-red-50 focus:ring-red-500 focus:border-red-500":"border-gray-300 bg-white focus:ring-blue-500 focus:border-blue-500"}`,tabIndex:i,autoFocus:!0,children:[c.jsx("option",{value:"",children:s}),n.map(v=>c.jsx("option",{value:v.id,children:v.label},v.id))]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("div",{onClick:x,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),x())},onFocus:x,tabIndex:i||0,className:`mt-1 px-3 py-2 rounded-md shadow-sm border text-base min-h-[44px] flex items-center transition-colors focus:outline-none focus:ring-2 ${o?"bg-gray-100 cursor-not-allowed border-gray-200":g?"cursor-pointer bg-red-50 border-red-300 hover:bg-red-100 hover:border-red-400 focus:ring-red-500 focus:border-red-500":"cursor-pointer hover:bg-blue-50 border-transparent hover:border-blue-200 bg-white focus:ring-blue-500 focus:border-blue-500"}`,title:o?"Not editable":"Click to edit",role:"button","aria-label":`Click to edit ${e}`,children:c.jsx("span",{className:t?"text-gray-900":g?"text-red-600 font-medium":"text-gray-500",children:h})})]})},vL=async e=>{try{const{data:t,error:r}=await Y.from("property").select("sf_id").eq("id",e).single();if(r||!(t!=null&&t.sf_id))return console.log("No sf_id found for property:",r==null?void 0:r.message),null;const{data:n,error:s}=await Y.from("salesforce_Property__c").select("RecordTypeId").eq("Id",t.sf_id).single();return s?(console.log("RecordTypeId field not found:",s.message),null):(n==null?void 0:n.RecordTypeId)||null}catch(t){return console.log("Error checking for legacy record type:",t),null}},yL=({property:e,isEditing:t,onFieldUpdate:r,propertyRecordTypes:n=[]})=>{const[s,o]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{if(e.id&&!e.property_record_type_id){const u=await vL(e.id);console.log(" Legacy RecordTypeId found:",u),a(u)}})()},[e.id,e.property_record_type_id]),c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx(nw,{label:"Property Record Type",value:e.property_record_type_id,onChange:l=>r("property_record_type_id",l),options:n.map(l=>({id:l.id,label:l.label})),placeholder:n.length===0?"No record types available":"Select record type...",disabled:n.length===0,tabIndex:20}),i&&!e.property_record_type_id&&c.jsxs("div",{className:"mt-1 text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded border border-blue-200",children:["Salesforce RecordTypeId: ",i]})]}),c.jsx(de,{label:"Property Name",value:e.property_name,onChange:l=>r("property_name",l),placeholder:"Property name or identifier",tabIndex:21})]}),c.jsx(de,{label:"Property Description",value:e.description,onChange:l=>r("description",l),placeholder:"Brief description of the property...",multiline:!0,rows:3}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Location Details"}),c.jsx(Wn,{label:"Trade Area",value:e.trade_area,onChange:l=>r("trade_area",l),field:"trade_area",placeholder:"Downtown, Suburb, etc."})]})]})]})},xL=({property:e,onFieldUpdate:t})=>{const[r,n]=w.useState(!1);return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Analysis"})]}),c.jsx("svg",{className:`w-5 h-5 text-gray-400 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Traffic Data"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx(de,{label:"Traffic Count",value:e.traffic_count,onChange:s=>t("traffic_count",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Daily vehicle count"})]}),c.jsxs("div",{children:[c.jsx(de,{label:"Secondary Traffic Count",value:e.traffic_count_2nd,onChange:s=>t("traffic_count_2nd",s),type:"number",inputMode:"numeric",placeholder:"0"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secondary road/access point"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Traffic"}),c.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-base min-h-[44px] flex items-center",children:c.jsx("span",{className:"text-gray-900 font-medium",children:((e.traffic_count||0)+(e.traffic_count_2nd||0)).toLocaleString()})})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calculated total (vehicles/day)"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Demographics"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(de,{label:"Demographic Information",value:e.demographics,onChange:s=>t("demographics",s),placeholder:"Population, income levels, age groups, household composition, etc.",multiline:!0,rows:4}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx(de,{label:"1 Mile Population",value:e["1_mile_pop"],onChange:s=>t("1_mile_pop",s),type:"number",inputMode:"numeric",placeholder:"Enter population count"}),c.jsx(de,{label:"HH Income - Median 3 Mile",value:e.hh_income_median_3_mile,onChange:s=>t("hh_income_median_3_mile",s),type:"number",inputMode:"numeric",placeholder:"Enter median income"}),c.jsx(de,{label:"3 Mile Population",value:e["3_mile_pop"],onChange:s=>t("3_mile_pop",s),type:"number",inputMode:"numeric",placeholder:"Enter population count"})]})]})]})]})]})},bL=({property:e,isEditing:t,onFieldUpdate:r})=>{const n=[{key:"costar_link",label:"CoStar",description:"Commercial real estate database",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),color:"blue"},{key:"reonomy_link",label:"Reonomy",description:"Property intelligence platform",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),color:"purple"},{key:"tax_url",label:"Tax Records",description:"Property tax information",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),color:"green"},{key:"map_link",label:"Map View",description:"Interactive map link",icon:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"orange"}],s=(i,a)=>{const l={blue:a?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",purple:a?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100",green:a?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",orange:a?"bg-orange-600 hover:bg-orange-700 text-white border-orange-600":"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100"};return l[i]||l.blue},o=i=>{try{return new URL(i),!0}catch{return!1}};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Links"})]}),t?c.jsx("div",{className:"space-y-4",children:n.map(i=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i.label}),c.jsx("input",{type:"url",value:e[i.key]||"",onChange:a=>r(i.key,a.target.value),placeholder:`https://example.com/${i.label.toLowerCase()}-link`,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base min-h-[44px]"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]},i.key))}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(i=>{const a=e[i.key],l=a&&a.trim()!=="",u=l&&o(a);return c.jsx("button",{onClick:()=>{l&&u&&window.open(a,"_blank","noopener,noreferrer")},disabled:!l||!u,className:`w-full p-3 border rounded-lg text-left transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s(i.color,l&&u)}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:i.icon}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("div",{className:"font-medium text-sm",children:i.label}),c.jsx("div",{className:`text-xs opacity-75 truncate ${l&&u?"text-current":"text-gray-500"}`,children:l?u?"Click to open":"Invalid URL":i.description})]}),l&&u&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})},i.key)})}),t&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{if(e.latitude&&e.longitude){const i=`https://www.google.com/maps?q=${e.latitude},${e.longitude}`;r("map_link",i)}},disabled:!e.latitude||!e.longitude,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate Map Link"}),c.jsx("button",{onClick:()=>{if(e.address&&e.city&&e.state){const a=`https://www.costar.com/search?q=${encodeURIComponent(`${e.address} ${e.city} ${e.state}`)}`;r("costar_link",a)}},disabled:!e.address||!e.city||!e.state,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate CoStar Search"})]}),c.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Quick generation requires property address and coordinates to be set."})]})]})},wL=({property:e,isEditing:t,onFieldUpdate:r})=>{const[n,s]=w.useState(e.property_notes||""),[o,i]=w.useState(null),[a,l]=w.useState(!1),u=w.useRef(null),d=w.useRef(),f=()=>{u.current&&(u.current.style.height="auto",u.current.style.height=u.current.scrollHeight+"px")};w.useEffect(()=>{f()},[n,t]);const h=g=>{s(g),t&&(d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{try{l(!0),await r("property_notes",g),i(new Date)}catch(x){console.error("Auto-save failed:",x)}finally{l(!1)}},1e3))};w.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const p=g=>{const b=new Date().getTime()-g.getTime(),y=Math.floor(b/6e4);return y<1?"just now":y===1?"1 minute ago":y<60?`${y} minutes ago`:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Notes"})]}),t&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}),!a&&o&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsxs("span",{children:["Saved ",p(o)]})]})]})]}),t?c.jsxs("div",{className:"space-y-3",children:[c.jsx("textarea",{ref:u,value:n,onChange:g=>h(g.target.value),placeholder:"Add notes about this property, market conditions, tenant information, lease details, or any other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none overflow-hidden min-h-[120px]",style:{maxHeight:"400px"}}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[n.length," characters"]}),c.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border rounded text-xs",children:"Cmd+S"}),c.jsx("span",{children:"to save manually"})]})]}),c.jsx("div",{className:"text-right",children:"Auto-saves after 1 second"})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>{const g=`Property visit completed on [DATE]
- Condition: 
- Tenant activity: 
- Market comparison: 
- Next steps: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Site Visit"}),c.jsx("button",{onClick:()=>{const g=`Market analysis as of [DATE]
- Comparable properties: 
- Pricing trends: 
- Occupancy rates: 
- Notable developments: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Market Update"}),c.jsx("button",{onClick:()=>{const g=`Contact follow-up [DATE]
- Person contacted: 
- Response: 
- Action items: 
- Next contact date: `;h(n+(n?`

`:"")+g)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:"Follow-up"})]})]})]}):c.jsx("div",{children:n?c.jsx("div",{className:"prose prose-sm max-w-none",children:c.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:n})}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-sm",children:"No notes added yet"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click Edit to add property notes"})]})}),t&&c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18.5a5.5 5.5 0 100-11 5.5 5.5 0 000 11z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2a10 10 0 100 20 10 10 0 000-20z"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Voice-to-Text Coming Soon"}),c.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Future enhancement will allow voice dictation for faster note-taking during property visits."})]})]})})]})},_L=({propertyId:e,mode:t="view",initialLocation:r,onSave:n,onBack:s=()=>window.history.back()})=>{const[o,i]=w.useState(!1),[a,l]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState([]),[p,g]=w.useState("idle"),{property:x,loading:b,error:y,updateProperty:m,createProperty:v,refreshProperty:_}=rw(e),{formData:k,updateField:S,validation:N,isDirty:C,resetForm:j}=hL(x||void 0);w.useEffect(()=>{(async()=>{try{const[O,U,D]=await Promise.all([Y.from("property_type").select("*").eq("active",!0).order("sort_order"),Y.from("property_stage").select("*").eq("active",!0).order("sort_order"),Y.from("property_record_type").select("*").eq("active",!0).order("sort_order")]);O.data&&l(O.data),U.data&&d(U.data),D.data?h(D.data):(console.log("No property record types found in lookup table"),h([]))}catch(O){console.error("Error loading dropdown data:",O),h([])}})()},[]),w.useEffect(()=>{t==="create"&&r&&!k.latitude&&!k.longitude&&(S("latitude",r.lat),S("longitude",r.lng))},[t,r,k.latitude,k.longitude,S]),w.useEffect(()=>{x&&j(x)},[x,j]);const E=async()=>{},M=async(T,O)=>{if(S(T,O),e&&t!=="create")try{g("saving"),await m({[T]:O}),g("saved"),setTimeout(()=>g("idle"),2e3)}catch(U){console.error("Auto-save failed:",U),g("error")}},H=()=>new Promise((T,O)=>{if(!navigator.geolocation){O(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(U=>{T({lat:U.coords.latitude,lng:U.coords.longitude})},U=>{O(new Error("Failed to get current location: "+U.message))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),F=()=>{console.log("Call contact for property:",e)};if(b)return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"bg-slate-800 h-32"}),c.jsx("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})]})});if(y&&t!=="create")return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Property"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:y}),c.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})});const B=t==="create"?k:x||k;return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(pL,{property:{...B,property_type:a.find(T=>T.id===B.property_type_id),property_stage:u.find(T=>T.id===B.property_stage_id)},isEditing:o,onToggleEdit:E,onBack:s,onGetLocation:()=>H().then(T=>{M("latitude",T.lat),M("longitude",T.lng)}),onCallContact:F}),c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-8",children:[o&&N.warnings.length>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Recommendations"}),c.jsx("ul",{className:"mt-1 text-xs text-yellow-700 list-disc list-inside",children:N.warnings.map((T,O)=>c.jsx("li",{children:T},O))})]})]})}),o&&p!=="idle"&&c.jsxs("div",{className:`p-2 rounded-md text-sm mb-4 ${p==="saving"?"bg-blue-50 text-blue-700":p==="saved"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[p==="saving"&&"Saving changes...",p==="saved"&&"Changes saved successfully",p==="error"&&"Error saving changes"]}),c.jsx(yL,{property:B,isEditing:o,onFieldUpdate:M,propertyRecordTypes:f}),c.jsx(mL,{property:B,onFieldUpdate:M,onGetCurrentLocation:H}),c.jsx(gL,{property:{...B,property_record_type:f.find(T=>T.id===B.property_record_type_id)},onFieldUpdate:M}),c.jsx(xL,{property:B,onFieldUpdate:M}),c.jsx(bL,{property:B,isEditing:o,onFieldUpdate:M}),c.jsx(wL,{property:B,isEditing:o,onFieldUpdate:M}),o&&!N.isValid&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please fix these errors:"}),c.jsx("ul",{className:"mt-1 text-xs text-red-700 list-disc list-inside",children:Object.entries(N.errors).map(([T,O])=>c.jsxs("li",{children:[c.jsxs("strong",{children:[T,":"]})," ",O]},T))})]})]})})]})]})};function kL(){const{propertyId:e}=xy(),t=Oi(),[r,n]=w.useState(null),[s,o]=w.useState(!0),[i,a]=w.useState(null),l=e==="create";w.useEffect(()=>{(async()=>{if(!e||l){o(!1);return}try{o(!0);const{data:h,error:p}=await Y.from("property").select("*").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching property:",h),a(h instanceof Error?h.message:"Failed to load property")}finally{o(!1)}})()},[e,l]);const u=()=>{t(-1)},d=f=>{n(f),l&&t(`/property/${f.id}`)};return s?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Loading property..."})]})}):i&&!l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6 max-w-md mx-4",children:c.jsxs("div",{className:"text-red-600 text-center",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Property Not Found"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Go Back"})]})})}):c.jsx(_L,{propertyId:l?void 0:e,mode:l?"create":"view",onSave:d,onBack:u})}class SL{constructor(){this.NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org/search",this.USER_AGENT="PropertyKanbanApp/1.0"}async geocodeAddress(t){try{const r=t.trim().replace(/\s+/g," ");if(!r)return{error:"Address is required"};const n=await fetch(`${this.NOMINATIM_BASE_URL}?`+new URLSearchParams({q:r,format:"json",limit:"1",addressdetails:"1",countrycodes:"us"}),{headers:{"User-Agent":this.USER_AGENT}});if(!n.ok)throw new Error(`Geocoding API responded with status: ${n.status}`);const s=await n.json();if(!s||s.length===0)return{error:"Address not found",code:"NOT_FOUND"};const o=s[0],i=o.address||{};return{latitude:parseFloat(o.lat),longitude:parseFloat(o.lon),formatted_address:o.display_name,city:i.city||i.town||i.village||i.hamlet,state:i.state,zip:i.postcode,county:i.county}}catch(r){return console.error("Geocoding error:",r),{error:r instanceof Error?r.message:"Geocoding failed",code:"GEOCODING_ERROR"}}}async reverseGeocode(t,r){try{const n=await fetch("https://nominatim.openstreetmap.org/reverse?"+new URLSearchParams({lat:t.toString(),lon:r.toString(),format:"json",addressdetails:"1"}),{headers:{"User-Agent":this.USER_AGENT}});if(!n.ok)throw new Error(`Reverse geocoding API responded with status: ${n.status}`);const s=await n.json();if(!s)return{error:"Location not found",code:"NOT_FOUND"};const o=s.address||{};return{latitude:t,longitude:r,formatted_address:s.display_name,city:o.city||o.town||o.village||o.hamlet,state:o.state,zip:o.postcode,county:o.county}}catch(n){return console.error("Reverse geocoding error:",n),{error:n instanceof Error?n.message:"Reverse geocoding failed",code:"REVERSE_GEOCODING_ERROR"}}}buildAddressString(t,r,n,s){const o=[t];return r&&o.push(r),n&&o.push(n),s&&o.push(s),o.join(", ")}isValidCoordinates(t,r){return t>=-90&&t<=90&&r>=-180&&r<=180}async getCurrentLocation(){return new Promise(t=>{if(!navigator.geolocation){t({error:"Geolocation is not supported by this browser",code:"NOT_SUPPORTED"});return}navigator.geolocation.getCurrentPosition(r=>{t({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{let n="Failed to get current location",s="LOCATION_ERROR";switch(r.code){case r.PERMISSION_DENIED:n="Location access denied by user",s="PERMISSION_DENIED";break;case r.POSITION_UNAVAILABLE:n="Location information unavailable",s="POSITION_UNAVAILABLE";break;case r.TIMEOUT:n="Location request timed out",s="TIMEOUT";break}t({error:n,code:s})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}}const Mu=new SL;function NL(){const[e,t]=w.useState(!1),[r,n]=w.useState(null),s=w.useCallback(()=>{n(null)},[]),o=w.useCallback(async a=>{t(!0),n(null);try{const l=Mu.buildAddressString(a.address||"",a.city,a.state,a.zip);if(!l.trim())throw new Error("No address provided for geocoding");console.log(" Geocoding address:",l);const u=await Mu.geocodeAddress(l);if("error"in u)return n(u.error),console.error("Geocoding failed:",u.error),a;const d=u,f={...a,latitude:d.latitude,longitude:d.longitude};return!a.city&&d.city&&(f.city=d.city),!a.state&&d.state&&(f.state=d.state),!a.zip&&d.zip&&(f.zip=d.zip),!a.county&&d.county&&(f.county=d.county),console.log(" Geocoding successful:",{address:l,coordinates:[d.latitude,d.longitude]}),f}catch(l){const u=l instanceof Error?l.message:"Geocoding failed";return n(u),console.error("Geocoding error:",l),a}finally{t(!1)}},[]),i=w.useCallback(async()=>{n(null);try{const a=await Mu.getCurrentLocation();return"error"in a?(n(a.error),null):a}catch(a){const l=a instanceof Error?a.message:"Failed to get current location";return n(l),null}},[]);return{isGeocoding:e,geocodeError:r,geocodeProperty:o,getCurrentLocation:i,clearError:s}}function DL(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,o]=w.useState(null);return w.useEffect(()=>{(async()=>{try{n(!0),o(null);const{data:a,error:l}=await Y.from("property_record_type").select("*").eq("active",!0).order("sort_order");if(l)throw l;t(a||[])}catch(a){const l=a instanceof Error?a.message:"Failed to fetch property record types";o(l),console.error("Error fetching property record types:",a)}finally{n(!1)}})()},[]),{propertyRecordTypes:e,isLoading:r,error:s}}const CL=()=>{const e=Oi(),[t,r]=w.useState(!1),{isGeocoding:n,geocodeError:s,geocodeProperty:o,getCurrentLocation:i,clearError:a}=NL(),{propertyRecordTypes:l,isLoading:u,error:d}=DL(),{createProperty:f}=rw(),[h,p]=w.useState({property_record_type_id:null,property_name:"",address:"",city:"",state:"",zip:"",trade_area:"",asking_lease_price:null,asking_purchase_price:null,rent_psf:null,nnn_psf:null,property_notes:"",acres:null,units:[]}),g=(I,re)=>{p(J=>({...J,[I]:re}))},x=()=>{const I={id:`temp_${Date.now()}`,property_unit_name:null,sqft:null,rent:null,nnn:null,patio:!1,inline:!1,end_cap:!1,end_cap_drive_thru:!1,second_gen_restaurant:!1,created_at:null,created_by_id:null,created_by_sf_id:null,deal_id:null,lease_expiration_date:null,property_id:null,sf_id:crypto.randomUUID(),site_submit_id:null,unit_notes:null,updated_at:null,updated_by_id:null,updated_by_sf_id:null};p(re=>({...re,units:[...re.units,I]}))},b=(I,re,J)=>{p(Ie=>({...Ie,units:Ie.units.map(De=>De.id===I?{...De,[re]:J}:De)}))},y=I=>{p(re=>({...re,units:re.units.filter(J=>J.id!==I)}))},m=w.useMemo(()=>{var qh;const I=l.find(sw=>sw.id===h.property_record_type_id),re=((qh=I==null?void 0:I.label)==null?void 0:qh.toLowerCase())||"",J=re.includes("land"),Ie=re.includes("shopping")||re.includes("retail");return{isLandType:J,isShoppingCenterType:Ie,showLeaseFields:!J&&!Ie,showPSFFields:!J,showPurchaseFields:J,selectedRecordType:I,recordTypeLabel:re}},[h.property_record_type_id,l]),{isLandType:v,isShoppingCenterType:_,showLeaseFields:k,showPSFFields:S,showPurchaseFields:N,selectedRecordType:C,recordTypeLabel:j}=m;w.useEffect(()=>{if(!h.property_record_type_id)return;const I={};v&&!S&&(h.rent_psf||h.nnn_psf)&&(I.rent_psf=null,I.nnn_psf=null),_&&h.asking_purchase_price&&(I.asking_purchase_price=null),k&&h.asking_purchase_price&&(I.asking_purchase_price=null),Object.keys(I).length>0&&p(re=>({...re,...I}))},[v,_,k,S,h.property_record_type_id]);const E=async I=>{if(I.preventDefault(),a(),!h.property_record_type_id){alert("Please select a property record type");return}if(!h.property_name.trim()||!h.address.trim()||!h.city.trim()||!h.state.trim()){alert("Please fill in all required fields (Property Record Type, Property Name, Address, City, State)");return}r(!0);try{console.log("Creating new property:",h);const re={property_record_type_id:h.property_record_type_id,property_name:h.property_name,address:h.address,city:h.city,state:h.state,zip:h.zip,trade_area:h.trade_area,asking_lease_price:h.asking_lease_price,asking_purchase_price:h.asking_purchase_price,rent_psf:h.rent_psf,nnn_psf:h.nnn_psf,property_notes:h.property_notes,acres:h.acres},J=await f(re);if(console.log(" Property created successfully:",J),_&&h.units.length>0){console.log("Creating property units:",h.units);const Ie=h.units.filter(De=>De.property_unit_name&&De.property_unit_name.trim()).map(De=>{var Me;return{property_id:J.id,property_unit_name:((Me=De.property_unit_name)==null?void 0:Me.trim())||null,sqft:De.sqft,rent:De.rent,nnn:De.nnn,patio:De.patio,inline:De.inline,end_cap:De.end_cap,end_cap_drive_thru:De.end_cap_drive_thru,second_gen_restaurant:De.second_gen_restaurant,sf_id:crypto.randomUUID(),lease_expiration_date:De.lease_expiration_date,unit_notes:De.unit_notes,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by_id:null,created_by_sf_id:null,deal_id:null,site_submit_id:null,updated_by_id:null,updated_by_sf_id:null}});if(Ie.length>0){const{data:De,error:Me}=await Y.from("property_unit").insert(Ie).select();Me?console.error("Error creating property units:",Me):console.log(" Property units created successfully:",De)}}o(J).then(Ie=>{Ie.latitude&&Ie.longitude?console.log(" Property geocoded successfully:",{coordinates:[Ie.latitude,Ie.longitude]}):s&&console.warn(" Property created but geocoding failed:",s)}).catch(Ie=>{console.warn(" Property created but geocoding failed:",Ie)}),e(`/property/${J.id}`)}catch(re){console.error("Error creating property:",re),alert("Failed to create property. Please try again.")}finally{r(!1)}},M=()=>{e(-1)},[H,F]=w.useState(!1),[B,T]=w.useState(!1),[O,U]=w.useState({}),[D,R]=w.useState(!1),[L,W]=w.useState(!1),Q=()=>{F(!0),setTimeout(()=>F(!1),4e3)},Ne=()=>{T(!0),setTimeout(()=>T(!1),4e3)},Re=I=>{U(re=>({...re,[I]:!0})),setTimeout(()=>{U(re=>({...re,[I]:!1}))},4e3)},Ct=()=>{R(!0),setTimeout(()=>{R(!1)},4e3)},Ke=()=>{W(!0),setTimeout(()=>{W(!1)},4e3)};return c.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Property"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enter essential property information to get started"})]}),c.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})}),d&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Unable to load property types"}),c.jsx("div",{className:"mt-2 text-sm text-red-700",children:c.jsx("p",{children:d})})]})]})}),s&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L4.316 15.5C3.546 16.333 4.508 18 6.048 18z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Geocoding Notice"}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:s}),c.jsx("p",{className:"mt-1",children:"Don't worry - your property will still be created. You can manually enter coordinates later if needed."})]}),c.jsx("div",{className:"mt-3",children:c.jsx("button",{type:"button",onClick:a,className:"text-sm text-yellow-600 hover:text-yellow-500 underline",children:"Dismiss"})})]})]})}),c.jsxs("form",{onSubmit:E,className:"space-y-6",children:[c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Type"}),c.jsx("span",{className:"text-red-500 text-sm",children:"*Required"})]}),c.jsx("div",{className:"max-w-md",children:c.jsx(nw,{label:"Property Record Type*",value:h.property_record_type_id,onChange:I=>g("property_record_type_id",I),options:l.map(I=>({id:I.id,label:I.label})),placeholder:u?"Loading...":l.length===0?"No record types available":"Select property type...",disabled:u||l.length===0,tabIndex:1,required:!0,defaultText:"Select Property Type"})})]}),c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Property Details"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:Ne,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",title:"Pin current location",children:c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),B&&c.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute bottom-full right-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"}),c.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will drop your current location geocode to create an address and geocode from where your computer or phone are located."}),c.jsx("button",{onClick:()=>T(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsx(de,{label:"Property Name*",value:h.property_name,onChange:I=>g("property_name",I),placeholder:"Downtown Office Building",tabIndex:2,required:!0,defaultText:"Enter Property Name"}),c.jsx(de,{label:"Street Address*",value:h.address,onChange:I=>g("address",I),placeholder:"123 Main Street",tabIndex:3}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx(Wn,{label:"City*",value:h.city,onChange:I=>g("city",I),field:"city",placeholder:"San Francisco",tabIndex:4}),c.jsx(Wn,{label:"State*",value:h.state,onChange:I=>g("state",I),field:"state",placeholder:"CA",tabIndex:5}),c.jsx(de,{label:"ZIP Code",value:h.zip,onChange:I=>g("zip",I),placeholder:"94105",tabIndex:6})]}),c.jsxs("div",{className:"flex items-end gap-4 mt-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Wn,{label:"Trade Area",value:h.trade_area,onChange:I=>g("trade_area",I),field:"trade_area",placeholder:"Downtown, Suburb, etc.",tabIndex:7})}),c.jsxs("div",{className:"relative pb-1",children:[c.jsxs("button",{type:"button",onClick:Q,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Verify Location"]}),H&&c.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),c.jsx("div",{className:"font-medium text-yellow-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will take you to a map where you can move the pin to the correct location and recode the address coordinates."}),c.jsx("button",{onClick:()=>F(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]})]})]}),h.property_record_type_id&&c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Financial Information",v&&" (Land)",_&&" (Retail/Shopping)",!v&&!_&&" (Building)"]}),c.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(Optional - can be added later)"})]}),v&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Qr,{label:"Asking Purchase Price",value:h.asking_purchase_price,onChange:I=>g("asking_purchase_price",I),helpText:"Land purchase price",colorScheme:"blue",showLarge:!0,tabIndex:8}),c.jsx(Qr,{label:"Asking Ground Lease Price",value:h.asking_lease_price,onChange:I=>g("asking_lease_price",I),helpText:"Annual ground lease amount",colorScheme:"green",showLarge:!0,tabIndex:9}),c.jsx(de,{label:"Acres",value:h.acres,onChange:I=>g("acres",I),type:"number",placeholder:"5.25",inputMode:"decimal",tabIndex:10})]}),c.jsxs("div",{className:"flex justify-end relative",children:[c.jsxs("button",{type:"button",onClick:Ke,className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),L&&c.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),c.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will create a site submit for this land property to track development prospects and opportunities."}),c.jsx("button",{onClick:()=>W(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),k&&c.jsx("div",{className:"space-y-4",children:c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.jsx(Qr,{label:"Asking Lease Price",value:h.asking_lease_price,onChange:I=>g("asking_lease_price",I),helpText:"Annual lease amount",colorScheme:"green",showLarge:!0,tabIndex:8})})}),S&&c.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Per Square Foot Rates"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx($l,{label:"Rent PSF",value:h.rent_psf,onChange:I=>g("rent_psf",I),helpText:"Base rent per square foot",tabIndex:9}),c.jsx($l,{label:"NNN PSF",value:h.nnn_psf,onChange:I=>g("nnn_psf",I),helpText:"Triple net charges per square foot",tabIndex:10})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:c.jsx("p",{className:"text-sm text-gray-600",children:" Additional financial fields like square footage, occupancy rates, and detailed lease terms can be added in the detailed property view after creation."})})]}),!h.property_record_type_id&&c.jsxs("section",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Financial Information"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Select a property record type above to see relevant financial fields."})]}),_&&c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Shopping Center Units"})]}),c.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Unit"]})]}),h.units.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"mb-2",children:c.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),c.jsx("p",{className:"text-sm",children:"No units added yet."}),c.jsx("p",{className:"text-xs mt-1 text-gray-400",children:'Use the "Add Unit" button to start adding units to this shopping center.'}),c.jsxs("div",{className:"mt-4 relative inline-block",children:[c.jsxs("button",{type:"button",onClick:Ct,className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),D&&c.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),c.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will create a site submit on the property level for tracking prospects when no specific units are defined."}),c.jsx("button",{onClick:()=>R(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}):c.jsx("div",{className:"space-y-4",children:h.units.map((I,re)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Unit ",re+1]})}),c.jsx("button",{type:"button",onClick:()=>y(I.id),className:"text-red-500 hover:text-red-700 text-lg font-bold",title:"Delete unit",children:""})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(de,{label:"Unit Name",value:I.property_unit_name,onChange:J=>b(I.id,"property_unit_name",J),placeholder:"e.g., Suite A, Space 101, etc.",tabIndex:11})}),c.jsx("div",{children:c.jsx(de,{label:"Unit Notes",value:I.unit_notes,onChange:J=>b(I.id,"unit_notes",J),placeholder:"Optional notes",multiline:!0,rows:1,tabIndex:15})}),c.jsx("div",{children:c.jsx(de,{label:"Square Feet",value:I.sqft,onChange:J=>b(I.id,"sqft",J),type:"number",placeholder:"1,200",inputMode:"numeric",tabIndex:12})}),c.jsx("div",{children:c.jsx(Qr,{label:"Rent",value:I.rent,onChange:J=>b(I.id,"rent",J),helpText:"Unit rent amount",tabIndex:13})}),c.jsx("div",{children:c.jsx(Qr,{label:"NNN",value:I.nnn,onChange:J=>b(I.id,"nnn",J),helpText:"Net Net Net charges",tabIndex:14})}),c.jsx("div",{className:"md:col-span-3",children:c.jsx(de,{label:"Lease Expiration Date",value:I.lease_expiration_date?new Date(I.lease_expiration_date).toISOString().split("T")[0]:null,onChange:J=>b(I.id,"lease_expiration_date",J?new Date(J).toISOString():null),type:"date",placeholder:"YYYY-MM-DD",tabIndex:16})})]}),c.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Unit Features"}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>Re(I.id),className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors text-xs font-medium focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Submit"]}),O[I.id]&&c.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-64 z-10",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg relative",children:[c.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"}),c.jsx("div",{className:"font-medium text-green-200 mb-1",children:" Future Feature"}),c.jsx("p",{children:"This will create a site submit on the unit for tracking tenant prospects and submissions."}),c.jsx("button",{onClick:()=>U(J=>({...J,[I.id]:!1})),className:"absolute top-1 right-1 text-gray-400 hover:text-white w-4 h-4 flex items-center justify-center",children:""})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:I.patio,onChange:J=>b(I.id,"patio",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Patio"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:I.inline,onChange:J=>b(I.id,"inline",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Inline"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:I.end_cap,onChange:J=>b(I.id,"end_cap",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"End Cap"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:I.end_cap_drive_thru,onChange:J=>b(I.id,"end_cap_drive_thru",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"End Cap Drive-Thru"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:I.second_gen_restaurant,onChange:J=>b(I.id,"second_gen_restaurant",J.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"2nd Gen Restaurant"})]})]})]})]},I.id))}),c.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:c.jsx("p",{className:"text-sm text-blue-700",children:" Units can be added now or later in the detailed property view. Adding units helps track individual tenant spaces and their lease details."})})]}),c.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Initial Notes"})]}),c.jsx("textarea",{value:h.property_notes,onChange:I=>g("property_notes",I.target.value),placeholder:"Add any initial notes about this property, market conditions, or other relevant information...",className:"w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base resize-none min-h-[100px]",tabIndex:10}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can add more detailed notes and use quick templates after the property is created."})]}),c.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:[c.jsx("span",{className:"text-red-500",children:"*"})," Required fields: Property Record Type, Property Name, Address, City, State"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:t||n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(t||n)&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n?"Adding Location...":t?"Creating Property...":"Create Property"]})]})]})]}),c.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Automatic Location Detection"}),c.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"The system automatically converts your address into GPS coordinates for mapping and location features. This happens in the background and won't delay property creation."}),n&&c.jsxs("div",{className:"mt-2 flex items-center gap-2 text-blue-600",children:[c.jsx("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-xs",children:"Detecting location..."})]})]})]})})]})})};function jL(){const e=$r(),{user:t,signOut:r}=bD(),n=o=>`px-4 py-2 rounded hover:bg-blue-100 ${e.pathname===o?"bg-blue-200 font-semibold":""}`,s=async()=>{await r()};return c.jsxs("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex space-x-4",children:[c.jsx(mi,{to:"/master-pipeline",className:n("/master-pipeline"),children:"Master Pipeline"}),c.jsx(mi,{to:"/property/new",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"+ New Property"})]}),t&&c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:t.email}),c.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})}function EL(){return c.jsx(wD,{children:c.jsx(_D,{children:c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx(jL,{}),c.jsxs(Dk,{children:[c.jsx(us,{path:"/",element:c.jsx(Sk,{to:"/master-pipeline",replace:!0})}),c.jsx(us,{path:"/master-pipeline",element:c.jsx(GP,{})}),c.jsx(us,{path:"/deal/:dealId",element:c.jsx(fL,{})}),c.jsx(us,{path:"/property/new",element:c.jsx(CL,{})}),c.jsx(us,{path:"/property/:propertyId",element:c.jsx(kL,{})})]})]})})})}Lu.createRoot(document.getElementById("root")).render(c.jsx(P.StrictMode,{children:c.jsx(Qk,{children:c.jsx(EL,{})})}));
